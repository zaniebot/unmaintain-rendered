<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Root unable to find uv.toml file - astral-sh/uv #6144</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Root unable to find uv.toml file</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/6144">#6144</a>
        opened by <a href="https://github.com/ryan-cpi">@ryan-cpi</a>
        on 2024-08-16 13:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ryan-cpi">@ryan-cpi</a> on 2024-08-16 13:18</div>
            <div class="timeline-body"><p><strong>Issue</strong></p>
<p>Running as the root user seems to be unable to find the uv.toml file.</p>
<p><strong>Steps to replicate</strong></p>
<ol>
<li>docker run -it ubuntu:20.04 bash</li>
<li>update &amp;&amp; upgrade</li>
<li>pip install uv</li>
<li>vim /root/.config/uv.toml</li>
<li>pip install private-package</li>
</ol>
<p><strong>Output</strong></p>
<pre><code>  root@7f40b5526c18:/# uv pip install core==3.4.6 --system --verbose
  DEBUG uv 0.2.37
  DEBUG Searching for Python interpreter in system path
  DEBUG Found `cpython-3.8.10-linux-x86_64-gnu` at `/usr/bin/python3` (search path)
  DEBUG Using Python 3.8.10 environment at usr/bin/python3
  DEBUG Acquired lock for `usr`
  DEBUG At least one requirement is not satisfied: core==3.4.6
  DEBUG Using request timeout of 30s
  DEBUG Solving with installed Python version: 3.8.10
  DEBUG Adding direct dependency: core==3.4.6
  DEBUG Found fresh response for: https://pypi.org/simple/core/
  DEBUG Searching for a compatible version of core(==3.4.6)
  DEBUG No compatible version found for: core
    x No solution found when resolving dependencies:
    `-&gt; Because there is no version of core==3.4.6 and you require core==3.4.6, we can conclude that your requirements are unsatisfiable.

root@7f40b5526c18:/# cat /root/.config/uv.toml 
[pip]
index-url = &quot;https://__token__:glpat-xxx@gitlab.com/api/v4/groups/123/-/packages/pypi/simple&quot;
</code></pre>
<p><strong>Expected outcome</strong></p>
<p>Setting <code>--config-file /root/.config/uv.toml</code> fixes the issue for me but it should be able to find the config without this needing to be explicitly set.</p>
<p><strong>Versions</strong></p>
<p><strong>UV Version:</strong> uv 0.2.37
<strong>OS:</strong> Docker ubuntu:20.04</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-16 13:21</div>
            <div class="timeline-body"><p>I think it's <code>/root/.config/uv/uv.toml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-08-16 13:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ryan-cpi on 2024-08-16 13:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-16 13:25</div>
            <div class="timeline-body"><p>Fooled me.. I was debugging this :D</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ryan-cpi">@ryan-cpi</a> on 2024-08-16 13:26</div>
            <div class="timeline-body"><p>Ah i see. Thanks.  I'm used to it being only one file off the home for pip. Sorry
~/.pip/pip.conf vs ~/.conf/uv/uv.toml</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-16 13:27</div>
            <div class="timeline-body"><p>No prob. I wonder if we should warn or something here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ryan-cpi">@ryan-cpi</a> on 2024-08-16 13:48</div>
            <div class="timeline-body"><p>The docs are pretty clear but a debug line in the --verbose might be nice</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:59 UTC
    </footer>
</body>
</html>
