<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support for PEP 735: Dependency Groups in `pyproject.toml` - astral-sh/uv #8090</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support for PEP 735: Dependency Groups in `pyproject.toml`</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8090">#8090</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-10-10 13:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-10 13:43</div>
            <div class="timeline-body"><p>This PEP was <a href="https://discuss.python.org/t/pep-735-dependency-groups-in-pyproject-toml/39233/312">just accepted</a> — we plan to support it. We'll track it here.</p>
<p>The implementation can be tracked in https://github.com/astral-sh/uv/pull/8272</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-10-10 13:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @zanieb on 2024-10-10 13:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Support for PEP 735" to "Support for PEP 735: Dependency Groups in `pyproject.toml`" by @zanieb on 2024-10-10 13:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a> on 2024-10-12 02:51</div>
            <div class="timeline-body"><p>I'm just curious, but will there be a &quot;dev&quot; dependency group that supplants</p>
<pre><code class="language-toml">[tool.uv]
dev-dependencies = …
</code></pre>
<p>or is it up to the user to specify the <code>group=</code> when running <code>uv sync</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2024-10-12 03:34</div>
            <div class="timeline-body"><p>Dependency-groups don't allow self-dependencies, so <code>dev-dependencies = [&quot;&lt;self&gt;[test]&quot;]</code> wouldn't be replaceable with dependency groups. Also, I think/hope that dependency groups are going to feed into a new environment and task system. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dschneiderch">@dschneiderch</a> on 2024-10-12 14:54</div>
            <div class="timeline-body"><p>I noticed there is no mention of constraints in the pep. Dev-constraints is
super useful to me . Do you think this concept will continue to be
supported as 735 is implemented?</p>
<p>On Fri, Oct 11, 2024, 20:34 Henry Schreiner <em><strong>@</strong></em>.***&gt;
wrote:</p>
<blockquote>
<p>Dependency-groups don't allow self-dependencies, so dev-dependencies =
[&quot;<self>[test]&quot;] wouldn't be replaceable with dependency groups. Also, I
think/hope that dependency groups are going to feed into a new environment
and task system. :)</p>
<p>—
Reply to this email directly, view it on GitHub
<a href="https://github.com/astral-sh/uv/issues/8090#issuecomment-2408333294">https://github.com/astral-sh/uv/issues/8090#issuecomment-2408333294</a>, or
unsubscribe
<a href="https://github.com/notifications/unsubscribe-auth/ABY5SZNHP7RTAJMIFAHFSW3Z3CKEHAVCNFSM6AAAAABPW2Q3ESVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDIMBYGMZTGMRZGQ">https://github.com/notifications/unsubscribe-auth/ABY5SZNHP7RTAJMIFAHFSW3Z3CKEHAVCNFSM6AAAAABPW2Q3ESVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDIMBYGMZTGMRZGQ</a>
.
You are receiving this because you are subscribed to this thread.Message
ID: <em><strong>@</strong></em>.***&gt;</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-12 14:59</div>
            <div class="timeline-body"><blockquote>
<p>Dependency-groups don't allow self-dependencies, so dev-dependencies = [&quot;<self>[test]&quot;] wouldn't be replaceable with dependency groups.</p>
</blockquote>
<p>Is this explicitly banned? I think <code>group = [&quot;my-project[test]&quot;]</code> might &quot;just work&quot; in uv because of how we treat package names that are shadowed by the project?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-12 15:00</div>
            <div class="timeline-body"><blockquote>
<p>will there be a &quot;dev&quot; dependency group that supplants ...</p>
</blockquote>
<p>I'm not sure yet. This is a significant open question I must address before adding support.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-12 15:00</div>
            <div class="timeline-body"><blockquote>
<p>I noticed there is no mention of constraints in the pep...</p>
</blockquote>
<p>I don't see any reason that we wouldn't apply constraints to the dependencies in the groups. Do you need a <em>separate</em> set of constraints?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-12 15:03</div>
            <div class="timeline-body"><p>I only see <a href="https://peps.python.org/pep-0735/#why-not-support-a-dependency-group-which-includes-the-current-project">this section</a>, but I don't see any other discussion in the finalized PEP of self-references of project dependencies in dependency groups.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dschneiderch">@dschneiderch</a> on 2024-10-12 19:55</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>I noticed there is no mention of constraints in the pep...</p>
</blockquote>
<p>I don't see any reason that we wouldn't apply constraints to the dependencies in the groups. Do you need a <em>separate</em> set of constraints?</p>
</blockquote>
<p>I am asking about the equivalent of <code>constraint-dependencies</code>, which I don't see addressed. I have a similar use case as discussed https://github.com/astral-sh/uv/issues/6518 . We use a managed airflow service. For dag development we only need a subset of the installed py dependencies and installing every py dependency is challenging and overkill because it requires several system dependencies. I'm slowly converting people to use uv, one of the motivations is having an easy, declarative approach to setting up a virtual environment for development.</p>
<p>here is an example from pyproject.toml from a repo that contains dags:</p>
<pre><code>[tool.uv]
dev-dependencies = [apache-airflow[gcp,beam]==2.9.1]
constraint-dependencies = [ long list of transient dependencies from cloud composer docs]
</code></pre>
<p><a href="https://cloud.google.com/composer/docs/concepts/versioning/composer-versions#images-composer-2">cloud composer docs</a>
I want to install what i need but I want to make sure I don't install a transient dependency with a different version from our prod environment.</p>
<p>1 difference from the other issue is we are not using the official airflow constraints file from the url (this is what i used to use before we moved to the managed airflow). Right now I am copying the list of installed packages into my pyproject.toml file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-12 21:02</div>
            <div class="timeline-body"><p>@dschneiderch -- Apologies if I'm misunderstanding but I think <code>constraint-dependencies</code> will just continue to be the right thing to use there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dschneiderch">@dschneiderch</a> on 2024-10-12 23:55</div>
            <div class="timeline-body"><p>Perfect! Wasn't sure if that metadata field was going to be redesigned
alongside dev-dependencies .</p>
<p>On Sat, Oct 12, 2024, 14:02 Charlie Marsh <em><strong>@</strong></em>.***&gt; wrote:</p>
<blockquote>
<p>@dschneiderch <a href="https://github.com/dschneiderch">https://github.com/dschneiderch</a> -- Apologies if I'm
misunderstanding but I think constraint-dependencies will just continue
to be the right thing to use there.</p>
<p>—
Reply to this email directly, view it on GitHub
<a href="https://github.com/astral-sh/uv/issues/8090#issuecomment-2408699012">https://github.com/astral-sh/uv/issues/8090#issuecomment-2408699012</a>, or
unsubscribe
<a href="https://github.com/notifications/unsubscribe-auth/ABY5SZLLZYROQTHBXX5QSVLZ3GE7HAVCNFSM6AAAAABPW2Q3ESVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDIMBYGY4TSMBRGI">https://github.com/notifications/unsubscribe-auth/ABY5SZLLZYROQTHBXX5QSVLZ3GE7HAVCNFSM6AAAAABPW2Q3ESVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDIMBYGY4TSMBRGI</a>
.
You are receiving this because you were mentioned.Message ID:
<em><strong>@</strong></em>.***&gt;</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jankatins">@jankatins</a> on 2024-10-15 21:54</div>
            <div class="timeline-body"><p>Duplicates https://github.com/astral-sh/uv/issues/5632 -&gt; either this or the other one could probably be closed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/potiuk">@potiuk</a> on 2024-10-16 21:12</div>
            <div class="timeline-body"><p>Would love to get it in  ... PR is coming I see :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kaxil">@kaxil</a> on 2024-10-16 21:14</div>
            <div class="timeline-body"><p>Same, looking forward to using it in the Airflow repo</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-17 01:35</div>
            <div class="timeline-body"><p>@jankatins thanks! Embarrassing I keep creating duplicates of my own issues. I'll close them both when we add PEP 735 support.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/potiuk">@potiuk</a> on 2024-10-17 08:03</div>
            <div class="timeline-body"><blockquote>
<p>@jankatins thanks! Embarrassing I keep creating duplicates of my own issues. I'll close them both when we add PEP 735 support.</p>
</blockquote>
<p>With the speed you are all working, occasional duplicate is not embarassing, it's a given :D. You are all doing great job.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-25 18:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-25 20:46</div>
            <div class="timeline-body"><p>As of <a href="https://github.com/astral-sh/uv/releases/tag/0.4.27">0.4.27</a> we support this. Details in #8272.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 04:38:49 UTC
    </footer>
</body>
</html>
