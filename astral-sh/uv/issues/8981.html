<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Why `dependency-groups` and not `project.optional-dependencies`? (PEP 621) - astral-sh/uv #8981</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Why <code>dependency-groups</code> and not <code>project.optional-dependencies</code>? (PEP 621)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8981">#8981</a>
        opened by <a href="https://github.com/d3cryptofc">@d3cryptofc</a>
        on 2024-11-10 02:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/d3cryptofc">@d3cryptofc</a></div>
            <div class="timeline-body"><p>I&#x27;m using <code>uv 0.4.30</code> version, and comparing the generated by UV <code>pyproject.toml</code> between <a href="https://peps.python.org/pep-0621/#dependencies-optional-dependencies">PEP 621</a> I found this difference.</p>
<p>I just would like more details about it. Thank you!!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ryanhiebert">@ryanhiebert</a> on 2024-11-10 10:34</div>
            <div class="timeline-body"><p>Optional dependencies are also supported. They are intended for library consumers to install optional packages, and are a public interface because of that. I&#x27;ve used them a lot of times as a hack to collect things that aren&#x27;t for consumers but for me as a library developer, such as installing linters or pytest.</p>
<p>With dependency-groups, I can have <code>build</code> or <code>test</code> dependencies that I can install without exposing those to users in any public interface. <code>dependency-groups</code> are also a PEP, <a href="https://peps.python.org/pep-0735/">PEP 735</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-10 15:54</div>
            <div class="timeline-body"><p>Yeah, for local development, they&#x27;re effectively identical in uv. The main difference from that perspective is that <code>optional-dependencies</code> are part of the <em>published</em> metadata for your package, while <code>dependency-groups</code> are <em>only</em> visible when working with your package locally. For example, if your package is <code>foo</code>, and you have an optional group called <code>bar</code> and a dependency group called <code>baz</code>, when you publish to PyPI, users can <code>uv pip install foo[bar]</code> (but <code>uv pip install foo[baz]</code> would error).</p>
<p>There are some other differences that are articulated in the PEP. For example, you can use <code>dependency-groups</code> without a <code>[project]</code> table, while <code>optional-dependencies</code> requires a <code>[project]</code> table. But that doesn&#x27;t affect uv much right now since <code>uv lock</code>, <code>uv sync</code>, etc. all require projects.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-10 15:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-10 15:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-10 15:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:23 UTC
    </footer>
</body>
</html>
