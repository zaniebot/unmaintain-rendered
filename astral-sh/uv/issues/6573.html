<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow `uv sync --no-install-project` without relying on `pyproject.toml` - astral-sh/uv #6573</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Allow `uv sync --no-install-project` without relying on `pyproject.toml`</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/6573">#6573</a>
        opened by <a href="https://github.com/albertferras-vrf">@albertferras-vrf</a>
        on 2024-08-24 07:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/albertferras-vrf">@albertferras-vrf</a> on 2024-08-24 07:45</div>
            <div class="timeline-body"><p>I'm trying the new feature in today's <code>0.3.3</code> release: <code>uv sync --no-install-project</code> but I could not make it work since it keeps failing because <code>pyproject.toml</code> file is not found</p>
<p>The full <code>Dockerfile</code> example provided in the documentation here https://docs.astral.sh/uv/guides/integration/docker/#intermediate-layers does not work and raises this error too</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-24 11:30</div>
            <div class="timeline-body"><p>Apologies, does it work if you copy over the <code>pyproject.toml</code>? It might be relying on <em>discovering</em> it but not actually reading from it. Will fix.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-08-24 11:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/albertferras-vrf">@albertferras-vrf</a> on 2024-08-24 12:37</div>
            <div class="timeline-body"><p>Yes, it works after copying <code>pyproject.toml</code>.
However, it seems like it tries to read it because after creating an empty one (<code>touch pyproject.toml</code>) then <code>uv sync</code> fails with <code>0.092 error: No </code>project<code>table found in:</code>/opt/app/pyproject.toml``</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-24 12:41</div>
            <div class="timeline-body"><p>Yes it reads it to discover the project name, so it can pick out the right dependency tree in the lockfile.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-24 12:42</div>
            <div class="timeline-body"><p>But it does not require the project <em>contents</em> which is the critical piece that would ruin caching.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-24 12:42</div>
            <div class="timeline-body"><p>(The docs are incorrect though.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/albertferras-vrf">@albertferras-vrf</a> on 2024-08-24 12:51</div>
            <div class="timeline-body"><p>What happens if the project has multiple packages (using workspaces), do I need to copy all other pyproject.toml files too?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-24 13:05</div>
            <div class="timeline-body"><p>Let me test it before I try to answer confidently.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-24 13:34</div>
            <div class="timeline-body"><p>Yes, but I think we can fix that part.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/6581.html">astral-sh/uv#6581</a> on 2024-08-24 13:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-24 14:01</div>
            <div class="timeline-body"><p>I updated the documentation (and added test coverage) for now. We'll follow-up with some other changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/albertferras-vrf">@albertferras-vrf</a> on 2024-08-24 17:07</div>
            <div class="timeline-body"><p>thank you @charliermarsh !</p>
<p>One suggestion: Maybe we can consider storing the root (?) project name in uv.lock so that pyproject.toml is not needed.
it would make it slightly easier to have a working Dockerfile</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-24 17:46</div>
            <div class="timeline-body"><p>I think we probably can. Just trying to decide if we <em>should</em>. It creates some weirdness if we don't use the <code>pyproject.toml</code> to discover the root directory, etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2024-08-25 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-08-25 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Error when running `uv sync --no-install-project`: pyproject.toml file not found" to "Allow `uv sync --no-install-project` with relying on `pyproject.toml`" by @charliermarsh on 2024-08-25 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jaklan">@jaklan</a> on 2024-08-25 11:02</div>
            <div class="timeline-body"><p>@charliermarsh I don't know low-level differences between <code>uv</code> and <code>pdm</code>, just to mention the latter is able to update venv without <code>pyproject.toml</code> with the below command:</p>
<blockquote>
<p>pdm sync --no-self</p>
</blockquote>
<p>Btw, what is a difference between these two flags?</p>
<pre><code>      --locked                                   Assert that the `uv.lock` will remain unchanged
      --frozen                                   Sync without updating the `uv.lock` file
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-26 16:40</div>
            <div class="timeline-body"><p>@jaklan you can see the extended documentation at https://docs.astral.sh/uv/reference/cli/#uv-sync or <code>uv help sync</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jaklan">@jaklan</a> on 2024-08-26 17:22</div>
            <div class="timeline-body"><p>@zanieb thanks, I haven't noticed docs contain extended version of options' help messages (I used <code>uv sync --help</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-26 17:50</div>
            <div class="timeline-body"><p>The end of <code>uv sync --help</code> suggests the longer option and we cover this at https://docs.astral.sh/uv/getting-started/help/ ‚Äî let me know if there's anything more we can do to emphasize that it's available though!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jaklan">@jaklan</a> on 2024-08-26 18:00</div>
            <div class="timeline-body"><p>@zanieb ach lol, haven't noticed the footer at all üòÑ Maybe you can make it bold:</p>
<blockquote>
<p>Use <strong><code>uv help sync</code></strong> for more details.</p>
</blockquote>
<p>or put at the top:</p>
<blockquote>
<p>‚ùØ uv sync --help
Update the project's environment</p>
<p>Note: Use <strong><code>uv help sync</code></strong> for more detailed help.</p>
<p>Usage: uv sync [OPTIONS]
...</p>
</blockquote>
<p>but generally - it was simply my bad, I was just quickly testing <code>uv</code> and haven't got familiar with the CLI and docs yet</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6685.html">astral-sh/uv#6685</a> on 2024-08-27 12:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6722.html">astral-sh/uv#6722</a> on 2024-08-27 21:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Allow `uv sync --no-install-project` with relying on `pyproject.toml`" to "Allow `uv sync --no-install-project` without relying on `pyproject.toml`" by @konstin on 2024-08-28 09:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-28 15:06</div>
            <div class="timeline-body"><p>The biggest hangup to doing this is that you lose any configuration specified in the <code>pyproject.toml</code>, which feels like a footgun.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6960.html">astral-sh/uv#6960</a> on 2024-09-03 20:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @charliermarsh on 2024-09-14 22:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../plugboard-dev/plugboard/pulls/66.html">plugboard-dev/plugboard#66</a> on 2025-01-16 17:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:21 UTC
    </footer>
</body>
</html>
