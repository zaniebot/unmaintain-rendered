<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv` is not installing the latest version of dependency packages - astral-sh/uv #9462</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv</code> is not installing the latest version of dependency packages</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9462">#9462</a>
        opened by <a href="https://github.com/Laughing-q">@Laughing-q</a>
        on 2024-11-27 08:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Laughing-q">@Laughing-q</a></div>
            <div class="timeline-body"><p>Hi team! Really awesome work on this package!
The installation speed is incredibly fast and we really want to use <code>uv</code> package as the python package manager in our github CI tests. However I do noticed it behaves slightly different from the original <code>pip</code> manager and it causes our CI tests failing.</p>
<p>We have a dependency <code>tensorflowjs&gt;=3.9.0</code> in our repo <a href="https://github.com/ultralytics/ultralytics">ultralytics</a>, https://github.com/ultralytics/ultralytics/blob/7c97ed19372655a8b3d9050fc0f2ffb2e6a31276/pyproject.toml#L104.</p>
<ul>
<li>With original <code>pip</code> as python package manager it&#x27;ll install <code>tensorflow==4.15.0</code> which works fine with our tests.</li>
<li>With <code>uv pip</code> somehow it&#x27;ll install <code>tensorflowjs==3.9.0</code> and actually this version is not compatible with our tests. (I tried to pin this package to a higher version but <code>uv</code> raised another issue to me. see <a href="https://github.com/astral-sh/uv/issues/9462">astral-sh/uv#9462</a>#issuecomment-2503274238)</li>
</ul>
<p>I have all the install log here:
<a href="https://github.com/user-attachments/files/17931564/3_Benchmarks.ubuntu-latest.3.11.yolo11n.txt">3_Benchmarks (ubuntu-latest, 3.11, yolo11n).txt</a>
and from the log it seems <code>uv</code> tried a higher version but eventually selected the lowest one, which I don&#x27;t understand. Can you check the log and tell me why it&#x27;s selecting the lowest version of the package? Thanks
Because from the docs it should be installing the latest version.
<img src="https://github.com/user-attachments/assets/2445281e-d676-4f8c-b705-6ec347fbd545" alt="Image"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Laughing-q">@Laughing-q</a> on 2024-11-27 08:50</div>
            <div class="timeline-body"><p>Also I tried to pin a higher version for <code>tensorflowjs</code> but it raised another issue and did not install the packages at all. see <a href="https://github.com/ultralytics/ultralytics/pull/17749">ultralytics/ultralytics#17749</a>#issuecomment-2503231199</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;`uv` is not installing the latest version of package&quot; to &quot;`uv` is not installing the latest version of dependency packages&quot; by <a href="https://github.com/Laughing-q">@Laughing-q</a> on 2024-11-27 08:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-11-27 12:59</div>
            <div class="timeline-body"><p>Could it be that the conflict with the tighter bound is caused by packaging and https://docs.astral.sh/uv/pip/compatibility/#packages-that-exist-on-multiple-indexes ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/konstin">@konstin</a> on 2024-11-27 13:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by <a href="https://github.com/konstin">@konstin</a> on 2024-11-27 13:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-27 13:42</div>
            <div class="timeline-body"><p>Yeah, are you using multiple indexes? The version of packaging you want doesn&#x27;t exist on the PyTorch index: https://download.pytorch.org/whl/packaging/. So you&#x27;d need to use <code>unsafe-first-match</code> or similar. This looks to be working as intended.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-27 13:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-27 15:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Laughing-q">@Laughing-q</a> on 2024-11-29 13:22</div>
            <div class="timeline-body"><p>@konstin @charliermarsh Thank you guys! using <code>unsafe-first-match</code> works to our case!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Laughing-q">@Laughing-q</a> on 2024-11-29 13:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:48 UTC
    </footer>
</body>
</html>
