<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow artificial delay for security considerations for uv pip compile - astral-sh/uv #3019</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow artificial delay for security considerations for uv pip compile</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/3019">#3019</a>
        opened by <a href="https://github.com/mikeckennedy">@mikeckennedy</a>
        on 2024-04-13 18:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mikeckennedy">@mikeckennedy</a> on 2024-04-13 18:08</div>
            <div class="timeline-body"><p>Consider this a feature request and a bit of a weird one. But I'd love to hear your thoughts on it. Close it if it's not inline with the uv vision.</p>
<p>I've been thinking about what can be done to limit exposure to the supply chain attacks that were once theoretical but <a href="https://www.bleepingcomputer.com/news/security/pypi-suspends-new-user-registration-to-block-malware-campaign/">seem to be weekly now</a>.</p>
<p>These are generally caught but may persist for a period of time before detected.</p>
<p>How do you feel about something like:</p>
<pre><code>uv pip compile requirements.piptools --upgrade --delay-in-days 7
</code></pre>
<p>That is adding <code>--delay-in-days 7</code> which would only upgrade a library to a newer version if that update has been out for the specific number of days.  So say there is pydantic 2.7.1 and we have pydantic 2.7.0 specified, --upgrade won't switch it to 2.7.1 until the 2.7.1 is at least 7 days old.</p>
<p>It's not a perfect fix against these pypi attacks. But letting the rest of the world &quot;go first&quot; in trying out the updates could be a good hedge against just installing whatever was just published to pypi that hour.</p>
<p>Another really valuable aspect to this would be big-time bugs that get shipped and then pulled quickly. A recent example was mongoengine shipped a catastrophic bug that when used on a web server with threading=true enabled (uwsgi? gunicorn? I don't think it mattered) it would 100% fail all queries. This was quickly fixed but still took down my site because I didn't test it locally in a threaded server. Maybe this feature would have helped. At least the git hub issues would have been out and discussed by the time I started looking for what went wrong.</p>
<p>Any interest in this idea? I discussed it with the pip folks a year or two ago and I think they didn't see any value in it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-04-13 18:52</div>
            <div class="timeline-body"><p>uv already has <code>--exclude-newer</code> but you have to give it a specific timestamp, with sufficently good shell/utilities you should be able to do something like:</p>
<pre><code>uv pip compile requirements.piptools --upgrade --exclude-newer $(date --utc -d &quot;7 days ago&quot; &quot;+%Y-%m-%dT%H:%M:%SZ&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-04-14 16:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-04-14 16:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeckennedy">@mikeckennedy</a> on 2024-04-15 20:17</div>
            <div class="timeline-body"><p>Good to know that there is this option. It's not the most user friendly :) but I use uv through a bunch of shell aliases anyway so I should be able to make it work. Thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-15 20:19</div>
            <div class="timeline-body"><p>It seems kind of complicated to add at the top-level right now but if there's significant interest we can consider it in the future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeckennedy">@mikeckennedy</a> on 2024-04-15 20:23</div>
            <div class="timeline-body"><p>Sounds good @zanieb Perhaps it's the kind of thing that belongs in some sort of config file. Maybe the equivalent of ruff.toml if you ever create such a thing for uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-15 20:31</div>
            <div class="timeline-body"><p>See</p>
<ul>
<li>https://github.com/astral-sh/uv/pull/3007</li>
<li>#1511</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/14992.html">astral-sh/uv#14992</a> on 2025-07-31 15:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:57 UTC
    </footer>
</body>
</html>
