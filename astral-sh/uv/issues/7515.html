<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automate updating of minimum dependencies based on time since initial minor release  - astral-sh/uv #7515</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Automate updating of minimum dependencies based on time since initial minor release </h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/7515">#7515</a>
        opened by <a href="https://github.com/namurphy">@namurphy</a>
        on 2024-09-18 19:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/namurphy">@namurphy</a> on 2024-09-18 19:01</div>
            <div class="timeline-body"><h2>Feature request</h2>
<p>It would be quite helpful if uv had a command for automagically updating the minimum supported versions of dependencies specified in <code>pyproject.toml</code> after a specified time frame. ‚è±Ô∏è</p>
<p>For example, if the minimum allowed version of NumPy is $‚â•24$ months old, and there was a release of NumPy that is ‚â•18 months old, then uv would update the minimum allowed version of NumPy in <code>pyproject.toml</code> to be the oldest minor release that $‚â§24$ months old. There should also be a check to make sure that the lowest-direct resolution strategy works with the updated requirements.</p>
<p>It would be helpful to make this configurable for different time frames, with options to run this only for a single dependency or exclude certain dependencies.</p>
<p>These updates should respect excluded versions (i.e., <code>numpy != 1.25</code>) and not change upper limits.</p>
<h2>Backstory</h2>
<p><a href="https://scientific-python.org/specs/spec-0000/">Scientific Python Enhancement Proposal (SPEC) 0 </a> proposes a community policy on minimum supported dependencies:</p>
<blockquote>
<ol>
<li>Support for Python versions be dropped 3 years after their initial release.</li>
<li>Support for core package dependencies be dropped 2 years after their initial  release.</li>
</ol>
</blockquote>
<p>My understanding is that SPEC 0 has been adopted by core packages like NumPy, SciPy, and matplotlib; as well as by numerous other packages. This policy is for minor releases (e.g., 1.24) rather than patch releases (e.g., 1.24.4).</p>
<p>(This issue doesn't request automatic updates to <code>python-requires</code> in <code>pyproject.toml</code> because  often more significant changes in the CI infrastructure and documentation are necessary.)</p>
<h2>Motivation</h2>
<p>Adherence to SPEC 0's policy is somewhat tedious.  Every few months, I go into <code>pyproject.toml</code>, look up the PyPI release dates of all of the dependencies, verify that there has been a more recent release, and then update the minimum requirement as necessary.  While this happens to be one of my favorite strategies for procrastination-driven development (PDD) üòÖ, this task could be automated.</p>
<p>Adding this capability could encourage packages within the scientific pythoniverse to adopt uv, and for a wider variety of packages to adopt practices aligned with SPEC 0.</p>
<h2>Additional context</h2>
<p>SPEC 0 supersedes <a href="https://numpy.org/neps/nep-0029-deprecation_policy.html">NumPy Enhancement Proposal (NEP) 29</a>.</p>
<p>Thank you times ten billion! üôèüèª I'm curious how many others would make use of this capability.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-09-18 19:16</div>
            <div class="timeline-body"><blockquote>
<p>For example, if the minimum allowed version of NumPy is ‚â• 24 months old, and there was a release of NumPy that is ‚â•18 months old, then uv would update the minimum allowed version of NumPy in <code>pyproject.toml</code> to be the oldest minor release that ‚â§ 24 months old. There should also be a check to make sure that the lowest-direct resolution strategy works with the updated requirements.</p>
</blockquote>
<p>FYI, this would require the index being queries to support Simple Repository API version 1.1 or later i.e. <a href="https://peps.python.org/pep-0700/">PEP 700</a>.</p>
<p>For indexes which are on  Simple Repository API version 1.0 uv would have no way of getting this data. I mention this because PyTorch appears to still be on 1.0 and I'm sure other popular non-PyPI indexes are on 1.0, so there would need to be a clear warning from uv when using an index that doesn't provide this information.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/namurphy">@namurphy</a> on 2025-10-17 00:48</div>
            <div class="timeline-body"><p>Coming back to this after a while, #6794 and #8585 are potentially related issues.</p>
<p>I've since learned about <a href="https://github.com/hmaarrfk/nep29"><code>nep29</code></a> (named after <a href="https://numpy.org/neps/nep-0029-deprecation_policy.html">NEP 29</a>) which prints out the minor versions of a package that have been released in the past period of time (defaulting to 24 months).  An example usage is:</p>
<pre><code class="language-bash">$ uvx --with setuptools nep29 plasmapy --n_months 24
|  version  |    date    |
| :-------: | :--------: |
|  2025.8.0 | 2025-08-07 |
| 2024.10.0 | 2024-10-30 |
|  2024.7.0 | 2024-07-21 |
|  2024.5.0 | 2024-05-08 |
|  2024.2.0 | 2024-02-06 |
| 2023.10.0 | 2023-10-20 |
</code></pre>
<p>I've played around with a Nox session to automate SPEC 0 updates in https://github.com/PlasmaPy/PlasmaPy/pull/3048 (stalled).</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:26:16 UTC
    </footer>
</body>
</html>
