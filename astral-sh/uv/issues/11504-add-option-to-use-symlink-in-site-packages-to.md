```yaml
number: 11504
title: Add option to use symlink in site-packages to reduce disk space usage
type: issue
state: closed
author: tolotrasamuel
labels:
  - question
assignees: []
created_at: 2025-02-14T10:33:47Z
updated_at: 2025-02-15T00:52:16Z
url: https://github.com/astral-sh/uv/issues/11504
synced_at: 2026-01-12T16:00:38Z
```

# Add option to use symlink in site-packages to reduce disk space usage

---

_@tolotrasamuel_

### Summary

Every time I create a new project, it copies the entire package codebase into the project folder, which I find wasteful. For example, I don't want each of my projects to occupy 1 Gigabyte worth of tensorflow v2.8 disk space.

In other languages, we can easily avoid this. For instance, in Node.js, we can use `pnpm` or `yarn berry`. In Dart, this functionality is built-in by default. They utilize a global cache directory and the engine refers directly to `~/cache/.some-language/some-package/version/files` (or its symlink in `pnpm`).

However, I can't seem to find a way to do this in Python. I read about all the dozens of Python package manager and I tried using `uv` because this project advertise on their GitHub page:

> ðŸ’¾ Disk-space efficient, with a global cache for dependency deduplication.

Unfortunately, it turns out that this was completely false and misleading. I tried it, and it only caches the package to reduce network usage the next time it is installed, but it still copies an entire instance into each project's `.venv` folder. This does not improve disk space usage at all.

For example:

```bash
myproject/.venv/site-packages % du -sh * | sort -hr | head -20

1.0G    tensorflow
326M    jaxlib
106M    mediapipe
106M    cv2
81M     scipy
72M     clang
46M     numpy
```

## The feature request:

Add an optional flag to make symlinks instead of copying each packages files in the .venv folder.

Currently, I was able to do that manually by running on every package:
```

 ln -s /Users/home/.cache/uv/archive-v0/6ZKTddJrLxFRWgWPK1Rha/requests \
      /Users/home/my-project/.venv/lib/python3.11/site-packages/requests

ln -s /Users/home/.cache/uv/archive-v0/6ZKTddJrLxFRWgWPK1Rha/requests-2.32.3.dist-info \
      /Users/home/my-project/.venv/lib/python3.11/site-packages/requests-2.32.3.dist-info

```

This will not only make this project truly `ðŸ’¾ Disk-space efficient` but I believe it will make installation even faster. 



### Example

_No response_

---

_Label `enhancement` added by @tolotrasamuel on 2025-02-14 10:33_

---

_Comment by @tolotrasamuel on 2025-02-14 11:33_

## Update: I found that PDM supports it already. 

https://pdm-project.org/en/latest/usage/config/#central-installation-caches

I would love to use UV but unfortunately, I can't find it in the documentation if this is supported or now (and if not, whether it will planned or not) even though you wrote in your main readme page `"ðŸ’¾ Disk-space efficient, with a global cache for dependency deduplication." `. For now, I'll have to use PDM

---

_Comment by @edmorley on 2025-02-14 11:56_

@tolotrasamuel Hi! uv already stores files efficiently - it uses hardlinks by default on Linux, as documented here:
https://docs.astral.sh/uv/reference/settings/#link-mode
(that page can be found by searching the docs for "symlink", "hardlink" etc)

When hardlinks are used, it looks like the files are using additional space, but they are not.

I would google "hardlinks vs symlinks" to find out more :-)



---

_Label `enhancement` removed by @zanieb on 2025-02-14 12:50_

---

_Label `question` added by @zanieb on 2025-02-14 12:50_

---

_Comment by @charliermarsh on 2025-02-14 18:08_

+1 to what @edmorley said. We use hardlinks which have a number of advantages over symlinks while providing the same space efficiency. It "looks like" the files are copied to `du`, but they share an inode. They're not duplicated.

---

_Comment by @tolotrasamuel on 2025-02-15 00:14_

Okay, I am using Mac which explains the 1.9GB tensorflow and other packages in my projects.

`Default value: "clone" (macOS) or "hardlink" (Linux, Windows)` 

Is there any reason why the default value is not consistent across all platform ? Why in macOS, it doesn't also use hardlinks by default?

Then my bigger concern is this is such a great feature  of this really great package manager that you even put in your readme.md page as key highlight.

> Disk-space efficient, with a [global cache](https://docs.astral.sh/uv/concepts/cache) for dependency deduplication.



However, the links points to https://docs.astral.sh/uv/concepts/cache/ which explains about Network Caching.

> uv uses aggressive caching to avoid re-downloading (and re-building) dependencies that have already been accessed in prior runs.

But tells nothing about Disk-space efficiency by avoiding dependency deduplication.

In my opinion, it should points to both: network caching and disk space efficiency benefits.

https://docs.astral.sh/uv/reference/settings/#link-mode 



---

_Comment by @zanieb on 2025-02-15 00:46_

Because macOS uses a different file system which supports `clone`

> Making an ordinary copy of that file involves duplicating each of its components, including copying each of its storage blocks. But APFS offers a more efficient alternative: the clone.

which is like a hardlink, but superior because it will create a new copy if the file is changed in one of its locations

> Instead of duplicating everything, only the inode and its attributes (blue and pink) are duplicated, together with their file extent information. You can verify this by inspecting the numbers of those inodes, as theyâ€™re different, and information in the attributes such as the fileâ€™s name will also be different. Thereâ€™s a flag in the fileâ€™s attributes to indicate that cloning has taken place.
>
> At first, the two cloned files share the same data blocks and extended attributes. Delete one of the clones and those components remain, as theyâ€™re still required by the other clone. But, as the two files are changed by editing, they start to drift apart.

[ref](https://eclecticlight.co/2024/03/20/apfs-files-and-clones/)



---

_Comment by @zanieb on 2025-02-15 00:52_

I've opened https://github.com/astral-sh/uv/issues/11528 to track the requested change to the documentation.

---

_Closed by @zanieb on 2025-02-15 00:52_

---
