<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How can `uv sync` resolve version pin conflicts between editable-path dependencies and consumer pins in a monorepo? - astral-sh/uv #13125</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How can `uv sync` resolve version pin conflicts between editable-path dependencies and consumer pins in a monorepo?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/13125">#13125</a>
        opened by <a href="https://github.com/K-dash">@K-dash</a>
        on 2025-04-27 05:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/K-dash">@K-dash</a> on 2025-04-27 05:52</div>
            <div class="timeline-body"><h3>Question</h3>
<h4>Summary</h4>
<p><code>uv sync</code> fails in our <strong>monorepo</strong> when a consumer package pins an external dependency to a version that conflicts with the version pinned inside a <strong>local editable path dependency</strong> (<code>common</code>).</p>
<p>We are <strong>not using <code>uv workspace</code></strong>—only editable paths—yet we would like <code>uv</code> to prioritise the version declared by the path dependency rather than treating the situation as unsatisfiable.</p>
<h4>Motivation / Use-case</h4>
<pre><code>repo/
├── common/                     # shared lib (editable path)
│   └── pyproject.toml          # requests==2.32.1
├── repo_a/                     # app A
│   └── pyproject.toml          # requests==2.31.0  ← conflict
└── repo_b/                     # app B
    └── pyproject.toml          # requests==2.31.0  ← conflict
</code></pre>
<ul>
<li>Every application declares<br />
<code>[tool.uv.sources] common = { path = &quot;../common&quot;, editable = true }</code>.</li>
<li><code>common</code> is the single source of truth for shared libs (<code>requests</code>, <code>django</code>, …).</li>
<li>Whenever <code>common</code> bumps a shared dependency we must visit <strong>all</strong> consumer <code>pyproject.toml</code> files and align their pins, otherwise:</li>
</ul>
<pre><code>$ cd common &amp;&amp; uv venv &amp;&amp; uv sync &amp;&amp; uv pip install -e .

$ cd repo_a &amp;&amp; uv venv &amp;&amp; uv sync &amp;&amp; uv pip install -e .
  × No solution found when resolving dependencies:
  ╰─▶ Because only common==0.1.0 is available and common==0.1.0 depends on requests==2.32.1, we can conclude that all versions of common depend on requests==2.32.1.
      And because your project depends on common and requests==2.31.0, we can conclude that your project's requirements are unsatisfiable.
</code></pre>
<h4>Current Work-around</h4>
<ol>
<li>Run <code>uv sync</code> in each consumer directory; note the conflict message.</li>
<li>Manually edit the consumer’s <code>pyproject.toml</code> (requests==2.32.0 → ==2.32.1, etc.).</li>
<li>Run <code>uv sync</code> again (now succeeds).</li>
</ol>
<p>With many consumer packages this manual loop is tedious and error-prone.</p>
<p>This manual update loop in each consumer package remains necessary even if <code>common</code>'s dependencies are updated automatically (e.g., by Dependabot), as the consumer's conflicting pins are not automatically aligned. We seek to eliminate this manual step.</p>
<h4>Questions</h4>
<ul>
<li>Is there an existing uv feature or recommended pattern to make the resolver automatically prefer the version required by a local editable path dependency when such a conflict occurs?</li>
<li>If not, would it be feasible to introduce an optional flag or config to enable that behaviour?</li>
</ul>
<h3>Platform</h3>
<p>macOS15 arm64</p>
<h3>Version</h3>
<p>uv 0.6.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @K-dash on 2025-04-27 05:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-28 11:31</div>
            <div class="timeline-body"><p>There is <a href="https://docs.astral.sh/uv/reference/settings/#override-dependencies">override-dependencies</a> which allows ignoring certain conflicts. It's usually easier to use wider bounds, e.g., <code>&gt;=2.32.0,&lt;3.0.0</code> instead of <code>==2.32.1</code>, and to use a lockfile for pinning in applications instead. The lockfile ensures consistent installed version and can be updated by Dependabot, while the wider constraints avoid the dependency conflict.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/K-dash">@K-dash</a> on 2025-04-30 14:08</div>
            <div class="timeline-body"><p>@konstin
Thank you for your reply. I tried both approaches you suggested and confirmed that they resolve the dependency conflict. I’ll consider which of the two strategies to adopt. Thanks again!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @K-dash on 2025-04-30 14:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:03 UTC
    </footer>
</body>
</html>
