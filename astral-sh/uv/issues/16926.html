<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow reading `.env` files without opt-in - astral-sh/uv #16926</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow reading `.env` files without opt-in</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16926">#16926</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-12-02 10:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-02 10:42</div>
            <div class="timeline-body"><p>This is a tracking issue for a sentiment expressed in</p>
<ul>
<li>#1384</li>
<li>https://github.com/astral-sh/uv/issues/8862</li>
</ul>
<p>uv does not allow reading <code>.env</code> files without opt-in because we see reading <code>.env</code> files from checkouts of arbitrary projects as unsafe. People view this as introducing too much friction.</p>
<p>There are a few ways to persistently opt-in being discussed:</p>
<ul>
<li>https://github.com/astral-sh/uv/issues/16672</li>
<li>https://github.com/astral-sh/uv/issues/9994</li>
<li>https://github.com/astral-sh/uv/issues/14500</li>
</ul>
<p>We may also allow use of <code>.env</code> files without persistent opt-in, but that'd be a breaking change and I don't see how we'd address the security concerns.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1384.html">astral-sh/uv#1384</a> on 2025-12-02 10:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8862.html">astral-sh/uv#8862</a> on 2025-12-02 10:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-12-03 03:41</div>
            <div class="timeline-body"><p>Another alternative is to only allow these settings to be configurable only from a system or user level configuration file (similarly mentioned in https://github.com/astral-sh/uv/issues/9461#issuecomment-2509801588). This approach combined with the concept of &quot;trusted&quot; projects would provide a great deal of flexibility plus address most security concerns and attack vectors I can think of from my perspective.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/birdhackor">@birdhackor</a> on 2025-12-03 07:47</div>
            <div class="timeline-body"><p>Trusted projects + UV_DEFAULT_ENV_FILE should be good.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kompre">@kompre</a> on 2025-12-03 08:35</div>
            <div class="timeline-body"><p><code>uv</code> does make use of environment variables to modify its own behavior, and in particular I'm interested in <code>UV_PROJECT_ENVIRONMENT</code> that will inform <code>uv</code> of the path for the project virtual environment (if different from default value); the <code>--env-file</code> option is only available for <code>uv run</code> command, but <code>uv</code> needs to know about that for any command that do venv stuff (e.g. <code>uv sync</code>), otherwise it will default to <code>.venv/</code>.</p>
<p>My current workaround is to set the <code>UV_PROJECT_ENVIRONMENT</code> as settings in the .code-workspace, but this only works for vscode, and I need to remember to set the env variables each time I spawn a new terminal session (or use another tool that will do that). AI agents such claude code needs to be set up specifically too.</p>
<p>I kinda get around the limitation of <code>--env-file</code> not being available to all <code>uv </code>command by running something like this:</p>
<pre><code>uv run --env-file .env -- uv [COMMAND]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/16964.html">astral-sh/uv#16964</a> on 2025-12-03 13:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-03 13:40</div>
            <div class="timeline-body"><p>@kompre that's a different request. We can track that in https://github.com/astral-sh/uv/issues/16964</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:15 UTC
    </footer>
</body>
</html>
