<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow reading `.env` files without opt-in - astral-sh/uv #16926</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow reading <code>.env</code> files without opt-in</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16926">#16926</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-12-02 10:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>This is a tracking issue for a sentiment expressed in</p>
<ul>
<li>#1384</li>
<li>https://github.com/astral-sh/uv/issues/8862</li>
</ul>
<p>uv does not allow reading <code>.env</code> files without opt-in because we see reading <code>.env</code> files from checkouts of arbitrary projects as unsafe. People view this as introducing too much friction.</p>
<p>There are a few ways to persistently opt-in being discussed:</p>
<ul>
<li>https://github.com/astral-sh/uv/issues/16672</li>
<li>https://github.com/astral-sh/uv/issues/9994</li>
<li>https://github.com/astral-sh/uv/issues/14500</li>
</ul>
<p>We may also allow use of <code>.env</code> files without persistent opt-in, but that&#x27;d be a breaking change and I don&#x27;t see how we&#x27;d address the security concerns.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-12-03 03:41</div>
            <div class="timeline-body"><p>Another alternative is to only allow these settings to be configurable only from a system or user level configuration file (similarly mentioned in <a href="https://github.com/astral-sh/uv/issues/9461">astral-sh/uv#9461</a>#issuecomment-2509801588). This approach combined with the concept of &quot;trusted&quot; projects would provide a great deal of flexibility plus address most security concerns and attack vectors I can think of from my perspective.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/birdhackor">@birdhackor</a> on 2025-12-03 07:47</div>
            <div class="timeline-body"><p>Trusted projects + UV_DEFAULT_ENV_FILE should be good.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kompre">@kompre</a> on 2025-12-03 08:35</div>
            <div class="timeline-body"><p><code>uv</code> does make use of environment variables to modify its own behavior, and in particular I&#x27;m interested in <code>UV_PROJECT_ENVIRONMENT</code> that will inform <code>uv</code> of the path for the project virtual environment (if different from default value); the <code>--env-file</code> option is only available for <code>uv run</code> command, but <code>uv</code> needs to know about that for any command that do venv stuff (e.g. <code>uv sync</code>), otherwise it will default to <code>.venv/</code>.</p>
<p>My current workaround is to set the <code>UV_PROJECT_ENVIRONMENT</code> as settings in the .code-workspace, but this only works for vscode, and I need to remember to set the env variables each time I spawn a new terminal session (or use another tool that will do that). AI agents such claude code needs to be set up specifically too.</p>
<p>I kinda get around the limitation of <code>--env-file</code> not being available to all <code>uv </code>command by running something like this:</p>
<pre><code>uv run --env-file .env -- uv [COMMAND]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-03 13:40</div>
            <div class="timeline-body"><p>@kompre that&#x27;s a different request. We can track that in <a href="https://github.com/astral-sh/uv/issues/16964">astral-sh/uv#16964</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-12-11 21:12</div>
            <div class="timeline-body"><p>Users need an <code>env-file</code> list setting in <code>pyproject.toml</code> so that they don&#x27;t need to pass <code>--env-file</code> with every command invocation.</p>
<p>Setting environment variables like <code>UV_ENV_FILE</code> via the OS/terminal defeats the common purpose of env files, which is to avoid setting system/user environment variables and introducing (often undocumented) state outside of the project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AmanDevelops">@AmanDevelops</a> on 2025-12-12 19:33</div>
            <div class="timeline-body"><p>I’m currently using <code>poethepoet</code> as a task runner to work around this friction, and I think it’s a good concrete example of the kind of “persistent opt‑in” people are asking for.</p>
<p>My setup looks like this:</p>
<pre><code>[tool.poe]
envfile = &quot;.env&quot;

[tool.poe.tasks]
dev = &quot;fastapi dev app.py&quot;
</code></pre>
<p>Then I run the server with:</p>
<pre><code>uv run poe dev
</code></pre>
<p>This gives me:</p>
<ul>
<li>A single, short dev command (<code>poe dev</code>) that everyone on the team can use.</li>
<li>Automatic <code>.env</code> loading for dev tasks, without having to remember <code>--env-file</code> every time.</li>
<li>The opt‑in is explicit and versioned in <code>pyproject.toml</code>, so it’s clear that this project expects a <code>.env</code> file.</li>
</ul>
<p>From a user perspective, this is exactly the kind of “project‑level opt‑in” that would be ideal in uv itself (e.g. a <code>[tool.uv]</code> setting that says “load <code>.env</code> for this project”). Right now, needing an extra task runner just to get this behavior feels like overkill, especially when uv already supports <code>--env-file</code> and <code>UV_ENV_FILE</code>.</p>
<p>I’d love to see uv support a similar persistent opt‑in mechanism (via config or a project‑level flag) so that teams can get the convenience of automatic <code>.env</code> loading without losing the security guarantees of explicit opt‑in.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:11 UTC
    </footer>
</body>
</html>
