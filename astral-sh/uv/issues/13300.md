```yaml
number: 13300
title: How to create a lock file from installed packages (or from requirements.txt file)
type: issue
state: closed
author: czechnology
labels:
  - question
assignees: []
created_at: 2025-05-05T12:50:18Z
updated_at: 2025-05-06T15:31:52Z
url: https://github.com/astral-sh/uv/issues/13300
synced_at: 2026-01-10T01:57:30Z
```

# How to create a lock file from installed packages (or from requirements.txt file)

---

_Issue opened by @czechnology on 2025-05-05 12:50_

### Question

When I'm creating a lock file with `uv lock`, it will always lock the newest available versions. Is it possible to create a lock file which matches the versions installed in the venv? I have not been able to find a combination of options which would achieve this.
Alternatively, can I create a lock file from requirements.txt file?

I would need this for the process of migrating to uv: I would like to keep the pinned versions the same as before to keep the change minimal.

### Platform

_No response_

### Version

_No response_

---

_Label `question` added by @czechnology on 2025-05-05 12:50_

---

_Comment by @czechnology on 2025-05-05 12:52_

In practice, for the first option I would install the packages based on the `requirements.txt` file and then lock.
```sh
rm -rf .venv
uv venv
uv pip install -r requirements.txt
uv lock --something?
```

---

_Comment by @konstin on 2025-05-05 13:15_

You can use `uv pip freeze` to record the installed versions and use them as constraint dependencies for the first locking (you might need some manual editing for the transition from one environment to universal locking)

---

_Comment by @czechnology on 2025-05-05 13:19_

That is not what I'm going for - I already have the dependencies I want to keep available as `requirements.txt` files. I am trying to figure out how to make a `uv.lock` file with the same versions as those in the requirements files. One way I thought would be doable is to first install those versions into a virtualenv and then somehow create a `uv.lock` file which would reflect the _installed_ versions instead of the newest ones available.

---

_Comment by @charliermarsh on 2025-05-05 14:48_

You can pass the `requirements.txt` as a constraint:

```
echo "anyio" > requirements.in
uv pip compile requirements.in -o requirements.txt
uv add -r requirements.in -c requirements.txt
```

---

_Comment by @czechnology on 2025-05-05 18:57_

Thanks, @charliermarsh, that is an interesting approach but gets me forward, thanks!
```sh
# Create a backup of pyproject.toml
cp pyproject.toml pyproject.backup

# Set the pinned requirements to be the constraints in pyproject.toml
uv add -r requirements.txt -c requirements.txt

# uv.lock is now created

# Now that we have a lock file, let's revert the original config file
mv pyproject.backup pyproject.toml
```

---

_Comment by @zanieb on 2025-05-05 19:18_

This is also covered in https://github.com/astral-sh/uv/pull/12382, to an extent.

---

_Comment by @czechnology on 2025-05-05 19:59_

That will be a useful part of the docs, @zanieb, thanks!

---

_Closed by @czechnology on 2025-05-06 15:31_

---

_Referenced in [astral-sh/uv#10924](../../astral-sh/uv/issues/10924.md) on 2025-05-20 16:02_

---
