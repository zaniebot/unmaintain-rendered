<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preserve compiled `file:/` requirement names. - astral-sh/uv #9489</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Preserve compiled <code>file:/</code> requirement names.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9489">#9489</a>
        opened by <a href="https://github.com/salomon-smekecohen">@salomon-smekecohen</a>
        on 2024-11-28 00:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/salomon-smekecohen">@salomon-smekecohen</a></div>
            <div class="timeline-body">Issue
<p>Compiling requirements.in files with <code>file:</code> requirements that are named, creates <code>.txt</code> output that lacks the names.
This is in contrast to <code>url</code>s which maintain names.</p>
<p>Thus disallowing <code>.txt</code> generated files from being used as constraints files.</p>
<p><em>Note: this worked in uv 0.1.2</em></p>
Info
<p>Version - <code>uv 0.5.5 (95cd8b8b3 2024-11-27)</code>
Platform - <code>24.1.0 Darwin</code>
Arch - <code>arm64</code></p>
Example
<pre><code># requirements.in
# normal requirement
mypy
# url req
nose @ git+https://github.com/salomon-smekecohen/nose@48735f874383f711c3b233ab1442cc9a26e96d6d
# file req
foo @ file:./something
</code></pre>
<pre><code># something/setup.py
from setuptools import setup

setup(name=&#x27;foo&#x27;, version=&#x27;0.1&#x27;)
</code></pre>
<pre><code># something/something/__init__.py
</code></pre>
<p><code>python -m uv pip compile requirements.in -o requirements.txt</code></p>
Expectation
<pre><code># This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in -o requirements.txt
foo @ file:./something
    # via -r requirements.in
mypy==1.13.0
    # via -r requirements.in
mypy-extensions==1.0.0
    # via mypy
nose @ git+https://github.com/salomon-smekecohen/nose@48735f874383f711c3b233ab1442cc9a26e96d6d
    # via -r requirements.in
typing-extensions==4.12.2
    # via mypy
</code></pre>
Reality
<pre><code># This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in -o requirements.txt
file:./something
    # via -r requirements.in
mypy==1.13.0
    # via -r requirements.in
mypy-extensions==1.0.0
    # via mypy
nose @ git+https://github.com/salomon-smekecohen/nose@48735f874383f711c3b233ab1442cc9a26e96d6d
    # via -r requirements.in
typing-extensions==4.12.2
    # via mypy
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-28 01:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-28 03:01</div>
            <div class="timeline-body"><p>I thought pip didn&#x27;t allow relative paths in <code>file:</code>, but I guess they do?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/salomon-smekecohen">@salomon-smekecohen</a> on 2024-11-28 03:05</div>
            <div class="timeline-body"><blockquote>
<p>I thought pip didn&#x27;t allow relative paths in <code>file:</code>, but I guess they do?</p>
</blockquote>
<p>Yeah ðŸ˜…. Vendoring this has just been an adventure all around. Excluding<code>file:</code> in favor of just referencing the relative path produces the same results, but <code>pip-tools</code> outputs an absolute path to the <code>.txt</code> when you do that, so I use <code>file:</code> as a way to stay a bit more cross-compatible just in case other people read my requirements files and try to emulate anything without using <code>uv</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-28 03:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-28 03:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-28 03:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/salomon-smekecohen">@salomon-smekecohen</a> on 2024-11-28 03:32</div>
            <div class="timeline-body"><p>Wow! Thank you Charlie, that was so fast.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:49 UTC
    </footer>
</body>
</html>
