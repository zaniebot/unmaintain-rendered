<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comfirm with hint in `uv venv` glitches - astral-sh/uv #14688</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Comfirm with hint in `uv venv` glitches</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/14688">#14688</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-07-17 19:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/konstin">@konstin</a> on 2025-07-17 19:30</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>When I run <code>uv venv</code> and press enter, the output glitches: There is still content in the current line, even though the command is over and I should have a clear new prompt.</p>
<p><img width="841" height="168" alt="Image" src="https://github.com/user-attachments/assets/493a02c1-036a-49e1-93ce-395c89e72522" /></p>
<pre><code>home ~/projects/uv ⊤  ../uv/target/release/uv venv 
Using CPython 3.13.2
Creating virtual environment at: .venv
✔ A virtual environment already exists at `.venv`. Do you want to replace it? · yes
Activate with: source .venv/bin/activate
home ~/projects/uv ⊤  ` flag or set `UV_VENV_CLEAR=1` to skip this prompt
</code></pre>
<h3>Platform</h3>
<p>Ubuntu 24.04, stock terminal</p>
<h3>Version</h3>
<p>0.8.0</p>
<h3>Python version</h3>
<p>n/a</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @jtfmumm by @konstin on 2025-07-17 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @konstin on 2025-07-17 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-17 19:34</div>
            <div class="timeline-body"><p>Interesting, I tested this quite a bit. Is <code>clear_lines</code> not working on your system? Are you doing anything weird?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-17 19:35</div>
            <div class="timeline-body"><p>(I believe this is &quot;my&quot; change, in https://github.com/astral-sh/uv/pull/14667 I added a new &quot;hint&quot; to the prompt)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @jtfmumm by @konstin on 2025-07-17 19:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-17 19:38</div>
            <div class="timeline-body"><p>I only tested it on macOS though (I use Kitty)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-07-17 19:40</div>
            <div class="timeline-body"><p>It's a mostly stock terminal with a custom prompt style. It happens both in Gnome Terminal and in the RustRover terminal (old and new). It happens with bash, but it doesn't happen with zsh or fish. It does also happen in a bash without any configuration (<code>bash --noprofile --norc</code>):</p>
<p><img width="841" height="194" alt="Image" src="https://github.com/user-attachments/assets/382ef748-2910-4343-a2f2-3ae1264b559f" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-17 20:39</div>
            <div class="timeline-body"><p>Okay, I can reproduce in <code>bash</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14691.html">astral-sh/uv#14691</a> on 2025-07-17 20:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-07-17 20:50</div>
            <div class="timeline-body"><p>I can also reproduce on git bash/powershell/cmd, but only if I set the prompt to something without a newline (<code>export PS1=&quot;$&quot;</code> in git bash, <code>function prompt() {}</code> in powershell, <code>prompt -</code> in cmd). Using the binary from #14691 fixes it for me on all three.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-17 20:52</div>
            <div class="timeline-body"><p>&lt;3 thank you for testing!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-07-17 20:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/14950.html">astral-sh/uv#14950</a> on 2025-07-29 09:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:04 UTC
    </footer>
</body>
</html>
