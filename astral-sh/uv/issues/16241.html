<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a single command equivalent to &quot;uv run --script&quot; - astral-sh/uv #16241</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a single command equivalent to &quot;uv run --script&quot;</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16241">#16241</a>
        opened by <a href="https://github.com/treyhunner">@treyhunner</a>
        on 2025-10-10 21:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/treyhunner">@treyhunner</a> on 2025-10-10 21:47</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Add a <code>uvs</code> command so that <code>uv init --script</code> could add a <code>#!/usr/bin/env uvs</code> line without standardization concerns.</p>
<p><strong>Reason</strong>: I always forget the spelling of the <code>#!/usr/bin/env -S uv run --script</code> incantation I need to add to the bottom of each script after initialization.</p>
<h3>Longer Explanation</h3>
<p>I would love to see <code>uv init --script</code> add a shebang line (either by default or in a <code>--with-shebang</code> if hiding behind an option flag is deemed necessary). The issue with this is that <code>-S</code> is a non-standard <code>/usr/bin/env</code> option.</p>
<p>In <a href="https://github.com/astral-sh/uv/issues/11876#issuecomment-2745912913">#11876</a>  @magistau suggested adding a single command (e.g. <code>uvs</code>) to fix this:</p>
<blockquote>
<p>It's hard to implement properly, because <code>-S</code> flag is not a part of <a href="https://pubs.opengroup.org/onlinepubs/9799919799/">POSIX standard</a>. That is, different <code>env</code> implementations may treat it differently, potentially causing issues. IMO a better solution would be introducing a helper executable (say, <code>uvs</code>) that could be used instead of <code>uv run</code> when a shebang is needed.</p>
</blockquote>
<h3>Example</h3>
<pre><code class="language-bash">$ uv init --script ~/bin/new_script
$ head -n 5 ~/bin/new_script
#!/usr/bin/env uvs
# /// script
# requires-python = &quot;&gt;=3.14&quot;
# dependencies = []
# ///
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @treyhunner on 2025-10-10 21:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/treyhunner">@treyhunner</a> on 2025-10-11 20:23</div>
            <div class="timeline-body"><p>As both a proof of concept and a useful tool to help me work with uv scripts more easily, I published <a href="https://github.com/treyhunner/uvrs">uvrs</a>. If this feature is intergrated into uv directly (and I hope it will be!) I will sunset that tool.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add uvs command equivalent to "uv run --script"" to "Add a single command equivalent to "uv run --script"" by @treyhunner on 2025-10-11 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/11876.html">astral-sh/uv#11876</a> on 2025-10-11 20:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/16334.html">astral-sh/uv#16334</a> on 2025-10-17 03:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/treyhunner">@treyhunner</a> on 2025-10-17 03:13</div>
            <div class="timeline-body"><p>I think a <code>uvs &lt;path&gt;</code> command should be equivalent to <code>uv run --exact --script &lt;path&gt;</code> (in the spirit of &quot;principle of least astonishment&quot;).</p>
<p>Having a different default semantic than for <code>uv run</code> seems acceptable since the script virtual environment is more carefully and deliberately hidden and &quot;behind the scenes&quot; than project virtual environments are.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-10-17 08:31</div>
            <div class="timeline-body"><blockquote>
<p>The issue with this is that <code>-S</code> is a non-standard <code>/usr/bin/env</code> option.</p>
</blockquote>
<p>For determining the impact, which shells don't implement the <code>-S</code> option?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/treyhunner">@treyhunner</a> on 2025-10-17 20:50</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>The issue with this is that <code>-S</code> is a non-standard <code>/usr/bin/env</code> option.</p>
</blockquote>
<p>For determining the impact, which shells don't implement the <code>-S</code> option?</p>
</blockquote>
<p>I have been wondering this too. Here is my attempt at researching this from web searches...</p>
<p>These systems seem to have <code>/usr/bin/env</code> that supports <code>-S</code> with the semantics that the uv documentation assumes:</p>
<ol>
<li>Linux by default, as of 2018 or so</li>
<li>Mac OS, though I don't know when it was added</li>
<li>FreeBSD</li>
<li>Various WSL tools, thanks to support in Linux</li>
</ol>
<p>I believe these systems don't support <code>/usr/bin/env -S</code>:</p>
<ol>
<li>Most BSD systems (Open BSD &amp; Net BSD for example)</li>
<li>Alpine Linux and some other deliberately small Linux distributions</li>
<li>Other POSIX systems in general (haven't looked into this)</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/apfelchips">@apfelchips</a> on 2025-10-18 21:08</div>
            <div class="timeline-body"><p>@bahamas10 made a nice video about shebang argument handling on different Systems: https://www.youtube.com/watch?v=aoHMiCzqCNw&amp;t=1000s</p>
<p>TLDW: You can't trust what and how arguments are passed and for maximum portability you shouldn't use more than one.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-18 22:56</div>
            <div class="timeline-body"><p>There's a non-zero cost to us adding additional binaries to the uv installation, but we can consider this.</p>
<p>There was quite a bit of discussion about the shebang in https://github.com/astral-sh/uv/pull/11553</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davep">@davep</a> on 2025-10-22 13:58</div>
            <div class="timeline-body"><blockquote>
<p>Mac OS, though I don't know when it was added</p>
</blockquote>
<p>@treyhunner If it helps, the HISTORY section of the man page for <code>env</code> on macOS says:</p>
<blockquote>
<p>The env command appeared in 4.4BSD.  The -P, -S and -v options were added in FreeBSD 6.0.  The -C option was added in FreeBSD 14.2.</p>
</blockquote>
<p>This is as documented in macOS 26.0, with the man page last updated October 8, 2024.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:13 UTC
    </footer>
</body>
</html>
