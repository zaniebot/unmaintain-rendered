<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make uv tool upgrade --all tolerant to deleted Python versions - astral-sh/uv #11534</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make uv tool upgrade --all tolerant to deleted Python versions</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/11534">#11534</a>
        opened by <a href="https://github.com/owenlamont">@owenlamont</a>
        on 2025-02-15 11:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/owenlamont">@owenlamont</a></div>
            <div class="timeline-body">Summary
<p>This is partly a follow up to some of the commentary on <a href="https://github.com/astral-sh/uv/issues/8067">astral-sh/uv#8067</a> I found if I deleted a uv python version (in this case because I&#x27;d installed Python 3.13.2 with uv), e.g.</p>
<pre><code>uv python uninstall cpython-3.13.1-windows-x86_64-none
</code></pre>
<p>and that was the Python my uv tools were installed against, when I run:</p>
<pre><code>uv tool upgrade --all
</code></pre>
<p>I get a long list of errors, e.g.</p>
<pre><code>error: Failed to upgrade hatch
  Caused by: `hatch` is missing a valid environment; run `uv tool install --force hatch` to reinstall
error: Failed to upgrade linkchecker
  Caused by: `linkchecker` is missing a valid environment; run `uv tool install --force linkchecker` to reinstall
error: Failed to upgrade maturin
  Caused by: `maturin` is missing a valid environment; run `uv tool install --force maturin` to reinstall
error: Failed to upgrade mkdocs
  Caused by: `mkdocs` is missing a valid environment; run `uv tool install --force mkdocs` to reinstall
</code></pre>
<p>My only options (I&#x27;m aware of) to get around this are to:</p>
<ol>
<li>For each tool call <code>uv tool install --force &lt;tool name&gt;</code> as suggested (but I have dozens of tools and that&#x27;s onerous).</li>
<li>Reinstall the Python I deleted <code>uv python install cpython-3.13.1-windows-x86_64-none</code>, then run <code>uv tool upgrade --all --python 3.13.2</code>, then uninstall the older Python after the upgrade <code>uv python install cpython-3.13.1-windows-x86_64-none</code> - which is easy when you understand the workflow but not obvious and for me required searching uv documentation / issues</li>
</ol>
<p>I was hoping the behaviour of <code>uv tool upgrade --all</code> could be changed to do a force reinstall itself in the situation the previous Python it was installed against was removed - or there could be some new CLI options, e.g. <code>uv tool upgrade --all --force</code> or <code>uv tool reinstall --all</code> - something like that where I could express I do want to force reinstall everything in the case I know I have deleted the Python the tool was installed with.</p>
<p>I guess a related bit of feature parity it&#x27;d be nice to have versus pipx is <code>pipx list</code> shows the Python version each package was installed with whereas <code>uv tool list</code> doesn&#x27;t show that.</p>
<p>My current uv version is: <code>uv 0.6.0 (591f38c25 2025-02-14)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/owenlamont">@owenlamont</a> on 2025-02-15 11:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-15 16:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:37:20 UTC
    </footer>
</body>
</html>
