<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Package-specific find-links, without using other indices - astral-sh/uv #11634</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Package-specific find-links, without using other indices</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11634">#11634</a>
        opened by <a href="https://github.com/JWCS">@JWCS</a>
        on 2025-02-19 19:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/JWCS">@JWCS</a> on 2025-02-19 19:18</div>
            <div class="timeline-body"><h3>Question</h3>
<p>Installing just one package from a find-links with pip was <a href="https://mmcv.readthedocs.io/en/latest/get_started/installation.html#install-with-pip">(source)</a></p>
<pre><code class="language-bash">pip install mmcv==2.2.0 -f https://download.openmmlab.com/mmcv/dist/cu121/torch2.4/index.html
</code></pre>
<p>I'm trying to replicate this functionality via the pyproject.toml configuration.
The most that I can see allowed is:
(Validated with <code>uv lock --upgrade</code>)</p>
<pre><code class="language-toml">dependencies = [ &quot;mmcv==2.2.0&quot; ]
[tool.uv]
environments = [ &quot;sys_platform == 'linux' and implementation_name == 'cpython' and platform_machine == 'x86_64'&quot; ]
find-links = [ &quot;https://download.openmmlab.com/mmcv/dist/cu121/torch2.4/index.html&quot; ]
# ^ Is this is exposed to all other packages? Do all other package installs check this/these links?
# [tool.uv.sources]
# mmcv = { index = &quot;mmcv-cu121&quot; }
# [[tool.uv.index]]
# name = &quot;mmcv-cu121&quot;
# explicit = true
# url = &quot;&quot; # None? Exclude all other indices ? Not documented
</code></pre>
<p>Ideally, I'd only want the particular package to use that find-links, and I'd also want it to be excluded from searching other indices (ie pypi and other non-explicits).
I might happen to have several other packages with this same install condition in the same project.
Am I just missing something in the documentation, or is this non-functionality?</p>
<h3>Platform</h3>
<p>Ubuntu 20.04 amd64</p>
<h3>Version</h3>
<p>uv 0.6.1</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @JWCS on 2025-02-19 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-19 19:22</div>
            <div class="timeline-body"><p>This is on the roadmap to add as a mode to the <code>tool.uv.index</code> config but just hasn't been implemented yet, cc @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @zanieb on 2025-02-19 19:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2025-02-19 19:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-19 19:23</div>
            <div class="timeline-body"><p>To confirm, yes, using the top-level <code>tool.uv.find-links</code> will apply to other packages too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-19 19:23</div>
            <div class="timeline-body"><p>Unfortunately the &quot;lock a package to a specific index&quot; functionality isn't available for <code>--find-links</code> yet. So what you have above is the best you can do. I can look into adding it. (We do support that functionality for &quot;normal&quot; registry indexes, but not for <code>--find-links</code>.)</p>
<p>(It sounds like you know this, but you can do <code>uv pip install mmcv==2.2.0 -f https://download.openmmlab.com/mmcv/dist/cu121/torch2.4/index.html</code> if you continue to use the lower-level <code>uv pip</code> API. But yeah, if you want to use the <code>pyproject.toml</code> and <code>uv.lock</code>-based APIs, it's not possible to do exactly what you've described right now.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-03-24 01:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/12407.html">astral-sh/uv#12407</a> on 2025-03-24 01:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-03-26 01:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-03-26 01:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:00 UTC
    </footer>
</body>
</html>
