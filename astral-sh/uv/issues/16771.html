<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow passing packages to `--excludes` option - astral-sh/uv #16771</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow passing packages to `--excludes` option</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/16771">#16771</a>
        opened by <a href="https://github.com/terror">@terror</a>
        on 2025-11-18 18:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/terror">@terror</a> on 2025-11-18 18:10</div>
            <div class="timeline-body"><p>There are cases where users may want to exclude a single package, but end up having to <a href="https://x.com/vllm_project/status/1988832111659479440">write it to a file</a> in order to do so, which I find a bit awkward. We should consider allowing <code>--excludes</code> for pip {compile, install, tool install} to accept package names alongside actual paths.</p>
<p>For instance, the following flow:</p>
<pre><code>uv self update
echo xformers &gt; exclude.txt
uv pip install -U vllm --extra-index-url [https://wheels.vllm.ai/nightly](https://t.co/Y5FwbIWlUu) --excludes exclude.txt
</code></pre>
<p>would become:</p>
<pre><code>uv self update
uv pip install -U vllm --extra-index-url [https://wheels.vllm.ai/nightly](https://t.co/Y5FwbIWlUu) --exclude xformers
</code></pre>
<p>This may be a bit tricky to implement, since it will likely require us to make a guess as to what argument is a path or a package name.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @terror on 2025-11-18 18:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-20 14:35</div>
            <div class="timeline-body"><p>I think we'll probably want a separate argument, e.g., <code>--exclude-package</code>, to avoid disambiguating between paths and names? In general, I think we want this functionality for constraints, excludes, and overrides so we'll want something coherent amongst them.</p>
<p>Unfortunately we named this <code>exclude-dependencies</code> (etc.) in the <code>pyproject.toml</code>, but we could consider rename that at some point too.</p>
<p>We could also consider changing the existing arguments, first using inference to determine if it's a file or name then deprecating one of the paths. e.g., <code>--constraint &lt;requirement&gt;</code> or <code>--exclude &lt;package&gt;</code> could be the long-term goal and we could add a <code>--constraint-file</code> and <code>--exclude-file</code> that we encourage users to use instead for the file option.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-11-21 02:34</div>
            <div class="timeline-body"><p>Another option would be like...</p>
<p><code>--exclude-package ${packageName}</code> on the CLI, <code>exclude-packages</code> in the <code>pyproject.toml</code>, and then <code>--excludes ${filePath}</code> for a list from a file.</p>
<p><code>--constraint-package ${packageName}&gt;=1</code> on the CLI, <code>constraint-packages</code> in the <code>pyproject.toml</code>, and then <code>--constraints ${filePath}</code> for a list from a file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/terror">@terror</a> on 2025-11-21 05:08</div>
            <div class="timeline-body"><p>Should we also consider <code>--exclude-packages ${packageName} ... ${packageName}</code> and <code>--constraint-packages ${packageName}&gt;=1 ... ${packageName}&gt;=1</code> on the CLI? I mention the single package case in the issue, but this might also apply to 2 or 3 or more (i.e. a small amount).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-21 15:02</div>
            <div class="timeline-body"><p>We generally can't use space delimited names in the CLI because it creates ambiguous parsing. We usually prefer <code>,</code>. There are various places where we allow this (and I'd expect to here)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/16808.html">astral-sh/uv#16808</a> on 2025-11-21 17:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:06 UTC
    </footer>
</body>
</html>
