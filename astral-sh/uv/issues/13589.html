<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>using uv workspaces in flat layouts (e.g. monorepos) - astral-sh/uv #13589</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>using uv workspaces in flat layouts (e.g. monorepos)</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/13589">#13589</a>
        opened by <a href="https://github.com/MartyMcFlyInTheSky">@MartyMcFlyInTheSky</a>
        on 2025-05-22 06:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MartyMcFlyInTheSky">@MartyMcFlyInTheSky</a> on 2025-05-22 06:16</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I get from the <a href="https://docs.astral.sh/uv/concepts/projects/workspaces/#workspace-layouts">documentation</a> that the recommended workspace layout looks like this:</p>
<pre><code>albatross
├── packages
│   ├── bird-feeder
│   │   ├── pyproject.toml
│   │   └── src
│   │       └── bird_feeder
│   │           ├── __init__.py
│   │           └── foo.py
│   └── seeds
│       ├── pyproject.toml
│       └── src
│           └── seeds
│               ├── __init__.py
│               └── bar.py
├── pyproject.toml
├── README.md
├── uv.lock
└── src
    └── albatross
        └── main.py
</code></pre>
<p>I have used successfully used this approach and was quite pleased with how easy everything was. Now I'm trying to bring workspaces to our monorepo, but the difference here is that we have a flat hierarchy there and still want packages to be able to see each other while there is no real toplevel project. To follow the bird example it would look something like this:</p>
<pre><code>monorepo
├── albatross
│   ├── pyproject.toml
│   ├── README.md
│   ├── src
│   │   └── albatross
│   │       └── main.py
│   └── uv.lock
├── sandpiper
│   ├── pyproject.toml
│   ├── README.md
│   ├── src
│   │   └── sandpiper
│   │       └── main.py
│   └── uv.lock
└── logger
    ├── pyproject.toml
    ├── README.md
    ├── src
    │   └── logger
    │       └── main.py
    └── uv.lock
</code></pre>
<p>Now <code>logger</code> is a dependency of both albatross and sandpiper, how can I make sure that both packages see this support library? Is this achievable with workspaces as well?</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MartyMcFlyInTheSky on 2025-05-22 06:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-22 18:53</div>
            <div class="timeline-body"><p>You can achieve this with a virtual workspace root, a top level <code>pyproject.toml</code> that contains no <code>[project]</code> table, but a <code>[tool.uv.workspace]</code> table.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/paveldikov">@paveldikov</a> on 2025-05-24 12:13</div>
            <div class="timeline-body"><p>I have the exact use case you describe and have been able to engineer it at a somewhat lower-level by configuring <code>[tool.uv.sources]</code> for the inner projects. This allows each of the leaves to be more or less independent for lockfile &amp; venv purposes, whilst still installing each other in an editable way for development.</p>
<p>(It's not quite as fluent as workspaces -- obviously -- but I have found it to be a good escape-hatch for dealing with internally-inconsistent monorepos -- which is all too common IRL...)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ggoggam">@ggoggam</a> on 2025-07-29 04:24</div>
            <div class="timeline-body"><p>@konstin @paveldikov I have the exact same use case. Is there an example that I can follow?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ElliotK-IB">@ElliotK-IB</a> on 2025-10-21 18:01</div>
            <div class="timeline-body"><blockquote>
<p>You can achieve this with a virtual workspace root, a top level <code>pyproject.toml</code> that contains no <code>[project]</code> table, but a <code>[tool.uv.workspace]</code> table.</p>
</blockquote>
<p>Is this reflected in the documentation anywhere? I would expect something like this to be mentioned here: <a href="https://docs.astral.sh/uv/concepts/projects/workspaces/">Using workspaces</a>.</p>
<p>It seems that #6511 should be related.</p>
<p>@charliermarsh Would appreciate clarification - maybe I'm missing something.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/atinary-rdaod">@atinary-rdaod</a> on 2025-10-24 08:27</div>
            <div class="timeline-body"><p>Hi there! Thanks for opening the issue. I’m also very interested in learning about best practices for using uv in monorepos.
Currently, I’m using a mix of uv workspaces and packages, depending on how the projects depend on each other.
I’m wondering if that’s the recommended approach and how releases should ideally be handled.
An example setup or reference would be super helpful!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:27 UTC
    </footer>
</body>
</html>
