<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv venv includes system dependencies in fresh environment - astral-sh/uv #15627</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv venv includes system dependencies in fresh environment</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/15627">#15627</a>
        opened by <a href="https://github.com/xOctave">@xOctave</a>
        on 2025-09-02 13:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/xOctave">@xOctave</a> on 2025-09-02 13:47</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><code>uv venv</code> includes system dependencies in fresh environment</p>
<p><strong>Describe the bug</strong>
When creating a fresh project with <code>uv venv</code>, the virtual environment unexpectedly shows all system-wide dependencies when running <code>pip list</code>. I would expect a clean environment containing only the standard library (and optionally pip if seeded), but instead the environment seems to inherit global packages.</p>
<p><strong>To Reproduce</strong>
Steps to reproduce the behavior:</p>
<ol>
<li><p>Create a new directory:</p>
<pre><code class="language-bash">uv init uvdemo &amp;&amp; cd uvdemo
</code></pre>
</li>
<li><p>Create a venv:</p>
<pre><code class="language-bash">uv venv --python 3.12
source .venv/bin/activate
</code></pre>
</li>
<li><p>List installed packages:</p>
<pre><code class="language-bash">pip list
</code></pre>
</li>
<li><p>Observe that all packages installed system-wide appear here.</p>
</li>
</ol>
<pre><code class="language-[...]">python-debian         0.1.49+ubuntu2
python-markdown-math  0.8
pytz                  2024.1
pyxdg                 0.28
PyYAML                6.0.1
regex                 2022.10.31
rencode               1.0.6
requests              2.31.0
rich                  13.7.1
roman                 3.3
service-identity      24.1.0
setproctitle          1.3.3
setuptools            68.1.2
six                   1.16.0
soupsieve             2.5
ssh-import-id         5.11
systemd-python        235
textile               4.0.2
torbrowser-launcher   0.3.7
[...]
</code></pre>
<p>They should not be there !</p>
<p><strong>Expected behavior</strong>
The environment created by <code>uv venv</code> should be isolated, with no system packages present. Running <code>pip list</code> should show only <code>pip</code>, <code>setuptools</code>, and <code>wheel</code> if seeded, or nothing at all if unseeded.</p>
<p><strong>Actual behavior</strong>
System dependencies from <code>/usr/lib/python3.12/dist-packages</code> (and potentially others) appear inside the venv. This makes the venv non-isolated and causes unexpected behavior.</p>
<p><strong>Additional context</strong></p>
<ul>
<li>The venvâ€™s <code>pyvenv.cfg</code> has <code>include-system-site-packages = false</code>.</li>
<li><code>sys.path</code> inside the venv includes <code>/usr/lib/python3.12</code> and a system-installed <code>sitecustomize.py</code> gets loaded, which seems to bring in the system packages.</li>
<li>This makes it hard to rely on <code>uv venv</code> for isolated builds.</li>
</ul>
<h3>Platform</h3>
<p>Ubuntu 24.04</p>
<h3>Version</h3>
<p>0.8.14</p>
<h3>Python version</h3>
<p>3.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @xOctave on 2025-09-02 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-02 14:04</div>
            <div class="timeline-body"><p>You're not getting <code>pip</code> from the virtual environment, e.g., do <code>which pip</code>. We don't install pip by default in virtual environments, use <code>uv pip list</code> instead or <code>uv venv --seed</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-09-02 14:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-09-02 14:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:05 UTC
    </footer>
</body>
</html>
