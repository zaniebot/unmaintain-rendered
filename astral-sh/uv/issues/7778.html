<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>In case VIRTUAL_ENV is different from .venv UV_PROJECT_ENVIRONMENT should be created automatically - astral-sh/uv #7778</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>In case VIRTUAL_ENV is different from .venv UV_PROJECT_ENVIRONMENT should be created automatically</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7778">#7778</a>
        opened by <a href="https://github.com/avoutsas67">@avoutsas67</a>
        on 2024-09-29 10:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/avoutsas67">@avoutsas67</a></div>
            <div class="timeline-body"><p>Hi all,</p>
<p>If I understand correctly, the current behaviour of <strong>uv add</strong> when <code>VIRTUAL_ENVIRONMENT</code> is different than <code>.venv </code>is to raise a warning and create a .venv environment where the dependency will be created.
<code>warning: </code>VIRTUAL_ENV=.venv-py312<code>does not match the project environment path</code>.venv<code> and will be ignored Using Python 3.12.6 interpreter at: /opt/homebrew/opt/python@3.12/bin/python3.12 Creating virtualenv at: .venv</code></p>
<p>I believe it would be more intuitive and more efficient when the <code>VIRTUAL_ENV</code> is different from .venv that the <code>UV_PROJECT_ENVIRONMENT</code> is set automatically to <code>VIRTUAL_ENV</code> by <strong>uv init</strong>. This will remove an extra step in setting up a project.</p>
<p>If a users wants to use a different environment from the one set in <code>VIRTUAL_ENV</code> then they could explicitly set the <code>UV_PROJECT_ENVIRONMENT</code>.</p>
<p>Thanks for considering this request.</p>
<p>Achilleas</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-29 14:47</div>
            <div class="timeline-body"><p>We intentionally don&#x27;t support using the &quot;active&quot; virtual environment for a project.</p>
<p>More context in #6834 which links to much more discussion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sglbl">@sglbl</a> on 2024-11-29 09:22</div>
            <div class="timeline-body"><p>@zanieb So how can I use my cpu-based-venv without removing the other one?</p>
<p><img src="https://github.com/user-attachments/assets/ea631eca-2d86-42f7-8df9-64cdd598f6ac" alt="Image"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adhadse">@adhadse</a> on 2024-12-28 05:16</div>
            <div class="timeline-body"><p>Unfortunately, this doesn&#x27;t allow me to keep all virtual environments at one place under <code>~</code> dir.</p>
<p>Currently <code>UV_PROJECT_ENVIRONMENT</code> only allow me to configure for one project.</p>
<p>I usually name project environments with the same name as project and keep them under one folder in <code>~/uv_environments</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-28 16:53</div>
            <div class="timeline-body"><p>@adhadse that&#x27;s tracked in #1495</p>
<p>@sglbl we don&#x27;t really support that yet. You can hack it with <code>UV_PROJECT_ENVIRONMENT</code> but there&#x27;s not a way to define multiple persistent environments. We&#x27;re thinking about it, but there can be 2^N environments (N = number of groups + extras + resolution modes) for each project and we don&#x27;t want to just store every combination ever created.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-28 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mgu">@mgu</a> on 2025-01-04 10:12</div>
            <div class="timeline-body"><p>@adhadse for this specific use case, I use <code>direnv</code> and export UV_PROJECT_ENVIRONMENT in my <code>.envrc</code>. I don&#x27;t know if this is something that could help you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adhadse">@adhadse</a> on 2025-01-06 06:41</div>
            <div class="timeline-body"><p>Right now, I&#x27;m not interested in fiddling with this issue. I&#x27;m going with how uv does it. I&#x27;ll come back to it later once I start using uv  with more and more projects.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-06 15:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:34:22 UTC
    </footer>
</body>
</html>
