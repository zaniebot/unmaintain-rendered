<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Export uv benchmarks to pubgrub - astral-sh/uv #9119</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Export uv benchmarks to pubgrub</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/9119">#9119</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-11-14 13:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/konstin">@konstin</a> on 2024-11-14 13:01</div>
            <div class="timeline-body"><p>It would be very helpful if we could run uv's main benchmarks (<code>jupyter</code>, <code>jupyter</code> universal, <code>apache-airflow[all]</code>) in pubgrub without uv, so we can benchmark and optimize pubgrub in isolation. This would require three pieces:</p>
<ul>
<li>Some sort of exporter logic that runs in uv (e.g. as separate cargo feature in the uv-resolver crate) and emits the steps taken in the resolution (package selection, package versions, version selection, dependencies for the selected version) into a file.</li>
<li>A &quot;pseudo-uv&quot; shim in pubgrub that has uv's package type and uses the pep440 versions (there's a crate that's exported from uv) without actually depending on uv</li>
<li>A runner in pubgrub that reads the file from the first step and drives the resolver with it in a criterion benchmark.</li>
</ul>
<p>Part of this is being creative on a file format that shrinks the info of all the steps enough that we can store them in a repo, potentially one that we can use for all pubgrub benchmarks.</p>
<p>Like uv, pubgrub uses <a href="https://codspeed.io/pubgrub-rs/pubgrub">codspeed</a> for continuous benchmarking (it uses instruction counting over walltimes). The would exporter allows optimizing pubgrub for uv in isolation, getting the accurate perf impact of pubgrub changes without the noise from uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @konstin on 2024-11-14 13:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:01 UTC
    </footer>
</body>
</html>
