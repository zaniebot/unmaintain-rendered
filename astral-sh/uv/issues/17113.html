<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv add -U package` claims unsatisfiable with pinned dependency and constraints-dependencies configured - astral-sh/uv #17113</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv add -U package` claims unsatisfiable with pinned dependency and constraints-dependencies configured</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/17113">#17113</a>
        opened by <a href="https://github.com/rogersei">@rogersei</a>
        on 2025-12-12 21:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/rogersei">@rogersei</a> on 2025-12-12 21:35</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>This might be user error or a doc improvement, not a code bug.</p>
<p>Our pyproject.toml specifies pinned dependency versions (so package==x.y.z not ranges). It also defines package constraints in the constraints-dependencies, also a pinned version.</p>
<p>Specifically - starting with a working project with both dependencies and constraints-dependencies configured with <code>zapp==3.20.2</code>, change the constraints-dependencies to be <code>zapp==3.21.0</code></p>
<p>My assumption is I could run <code>uv add -U zipp</code> and the dependency value and lock file would both get updated to the new constraint version - but I get this instead:</p>
<pre><code>root@3c0e7cfdf989:/workspaces/neptune-bulk# uv add -U zipp
  × No solution found when resolving dependencies:
  ╰─▶ Because your project depends on zipp==3.20.2 and zipp==3.21.0, we can conclude that your project's
      requirements are unsatisfiable.
  help: If you want to add the package regardless of the failed resolution, provide the `--frozen` flag to
        skip locking and syncing.
</code></pre>
<p>using <code>uv add -P zipp</code> also failed.</p>
<p>Am I running the wrong command to trigger the package and pyproject.toml upgrade, or is there a technical issue here?</p>
<p>Changing the pinned project dependencies to be ranges did allow syncing to happen, but still doesn't update the target version</p>
<h3>Platform</h3>
<p>ghcr.io/astral-sh/uv:python3.11-bookworm</p>
<h3>Version</h3>
<p>0.9.15</p>
<h3>Python version</h3>
<p>3.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @rogersei on 2025-12-12 21:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-13 03:03</div>
            <div class="timeline-body"><p>Unfortunately <code>uv add</code> doesn't upgrade existing bounds right now. I think it'd be best to track https://github.com/astral-sh/uv/issues/6794 -- we want to add a dedicated <code>uv upgrade</code> command or flow, it's on the near-term roadmap.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-12-13 03:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:06 UTC
    </footer>
</body>
</html>
