<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Specify Constraints File In Dependencies - astral-sh/uv #1797</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Specify Constraints File In Dependencies</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1797">#1797</a>
        opened by <a href="https://github.com/juftin">@juftin</a>
        on 2024-02-21 06:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/juftin">@juftin</a> on 2024-02-21 06:13</div>
            <div class="timeline-body"><p><code>uv</code> doesn't specify a constraints file as a dependency when enumerating which packages depend on one-another. IMO, having <code>-c constraints.txt</code> is helpful information in the following example (<code>uv==0.1.6</code>):</p>
<pre><code class="language-diff">--- a/piptools_requirements.txt
+++ b/uv_requirements.txt
@@ -1,9 +1,5 @@
-#
-# This file is autogenerated by pip-compile with Python 3.12
-# by the following command:
-#
-#    pip-compile --constraint=constraints.txt --output-file=piptools_requirements.txt -
-#
+# This file was autogenerated by uv via the following command:
+#    uv pip compile - -o uv_requirements.txt -c constraints.txt
 certifi==2024.2.2
     # via requests
 charset-normalizer==3.3.2
@@ -11,8 +7,5 @@ charset-normalizer==3.3.2
 idna==3.6
     # via requests
 requests==2.31.0
-    # via -r -
 urllib3==2.2.1
-    # via
-    #   -c constraints.txt
-    #   requests
+    # via requests
</code></pre>
<h2>Recreation Steps</h2>
<pre><code class="language-shell">docker run --rm -it python:3.12 /bin/bash
</code></pre>
<pre><code class="language-shell">pip install -q pip-tools uv
echo &quot;urllib3==2.2.1&quot; &gt; constraints.txt
echo &quot;requests&quot; | pip-compile - -o piptools_requirements.txt -c constraints.txt
echo &quot;requests&quot; | uv pip compile - -o uv_requirements.txt -c constraints.txt
git diff piptools_requirements.txt uv_requirements.txt
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/juftin">@juftin</a> on 2024-02-21 06:24</div>
            <div class="timeline-body"><p>Same goes for <code>requirements.in</code> files, I think having them included is helpful too:</p>
<pre><code class="language-shell">pip install -q pip-tools uv
echo &quot;urllib3==2.2.1&quot; &gt; constraints.txt
echo &quot;requests&quot; &gt; requirements.in
pip-compile requirements.in -o piptools_requirements.txt -c constraints.txt
uv pip compile requirements.in -o uv_requirements.txt -c constraints.txt
git diff piptools_requirements.txt uv_requirements.txt
</code></pre>
<pre><code class="language-diff">--- a/piptools_requirements.txt
+++ b/uv_requirements.txt
@@ -1,9 +1,5 @@
-#
-# This file is autogenerated by pip-compile with Python 3.12
-# by the following command:
-#
-#    pip-compile --constraint=constraints.txt --output-file=piptools_requirements.txt requirements.in
-#
+# This file was autogenerated by uv via the following command:
+#    uv pip compile requirements.in -o uv_requirements.txt -c constraints.txt
 certifi==2024.2.2
     # via requests
 charset-normalizer==3.3.2
@@ -11,8 +7,5 @@ charset-normalizer==3.3.2
 idna==3.6
     # via requests
 requests==2.31.0
-    # via -r requirements.in
 urllib3==2.2.1
-    # via
-    #   -c constraints.txt
-    #   requests
+    # via requests
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-02-21 06:35</div>
            <div class="timeline-body"><p>Related https://github.com/astral-sh/uv/issues/1343</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-21 19:41</div>
            <div class="timeline-body"><p>Yeah I think this is the same as https://github.com/astral-sh/uv/issues/1343. Gonna merge into that issue. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-02-21 19:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2024-02-21 20:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-09 14:43</div>
            <div class="timeline-body"><p>Supported in the next version via https://github.com/astral-sh/uv/pull/3269.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:57 UTC
    </footer>
</body>
</html>
