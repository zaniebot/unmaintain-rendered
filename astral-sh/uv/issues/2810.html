<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random errors on accessing cache with simultaneous installs on Windows - astral-sh/uv #2810</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Random errors on accessing cache with simultaneous installs on Windows</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/2810">#2810</a>
        opened by <a href="https://github.com/gozdal">@gozdal</a>
        on 2024-04-03 15:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gozdal">@gozdal</a></div>
            <div class="timeline-body"><p>Quite often <code>uv venv</code> or <code>uv pip install</code> fails in our CI environment. There are multiple jobs creating virtual envs and/or installing requirements with <code>uv pip install</code>. Each is using a different venv but they all share user and thus the cache.</p>
<p>Example (synthetic reproduction):</p>
<pre><code>host=&quot;jenkins@sf-win19-vm4&quot;
python=&quot;C:/Python3.12/python.exe&quot;

venv=$WORKSPACE/venv

ssh &quot;$host&quot; &quot;uv venv --seed --python $python $venv&quot;
</code></pre>
<p>Running this snippet as a Jenkins job from 9 hosts to the same Windows hosts sometimes works, but more often than not it fails on some of the hosts. Example:</p>
<pre><code>11:09:38 + ssh jenkins@sf-win19-vm4 &#x27;uv venv --seed --python C:/Python3.12/python.exe /home/jenkins/workspace/gozdal/uv-repro-windows-cache-bug/node/sf-precision9/venv&#x27;
11:09:38 Using Python 3.12.2 interpreter at: C:\Python3.12\python.exe
11:09:38 Creating virtualenv at: /home/jenkins/workspace/gozdal/uv-repro-windows-cache-bug/node/sf-precision9/venv
11:09:42 uv::venv::seed
11:09:42 
11:09:42   × Failed to install seed packages
11:09:42   ├─▶ No solution found when resolving: pip
11:09:42   ├─▶ Failed to write to the client cache
11:09:42   ╰─▶ Failed to persist temporary file to
11:09:42       AppData\Local\uv\cache\simple-v6\pypi\pip.rkyv: Access is denied. (os
11:09:42       error 5)
</code></pre>
<pre><code>11:09:38 + ssh jenkins@sf-win19-vm4 &#x27;uv venv --seed --python C:/Python3.12/python.exe /home/jenkins/workspace/gozdal/uv-repro-windows-cache-bug/node/sf-precision4/venv&#x27;
11:09:38 Using Python 3.12.2 interpreter at: C:\Python3.12\python.exe
11:09:38 Creating virtualenv at: /home/jenkins/workspace/gozdal/uv-repro-windows-cache-bug/node/sf-precision4/venv
11:09:42 uv::venv::seed
11:09:42 
11:09:42   × Failed to install seed packages
11:09:42   ├─▶ No solution found when resolving: pip
11:09:42   ├─▶ Failed to write to the client cache
11:09:42   ╰─▶ Failed to persist temporary file to
11:09:42       AppData\Local\uv\cache\simple-v6\pypi\pip.rkyv: Access is denied. (os
11:09:42       error 5)
</code></pre>
<pre><code>11:09:38 + ssh jenkins@sf-win19-vm4 &#x27;uv venv --seed --python C:/Python3.12/python.exe /home/jenkins/workspace/gozdal/uv-repro-windows-cache-bug/node/sf-worker3/venv&#x27;
11:09:38   × Failed to persist temporary file to
11:09:38   │ AppData\Local\uv\cache\interpreter-v0\55968f1457792c80.msgpack: Access is
11:09:38   │ denied. (os error 5)
</code></pre>
<pre><code>11:09:38 + ssh jenkins@sf-win19-vm4 &#x27;uv venv --seed --python C:/Python3.12/python.exe /home/jenkins/workspace/gozdal/uv-repro-windows-cache-bug/node/sf-worker2/venv&#x27;
11:09:38 Using Python 3.12.2 interpreter at: C:\Python3.12\python.exe
11:09:38 Creating virtualenv at: /home/jenkins/workspace/gozdal/uv-repro-windows-cache-bug/node/sf-worker2/venv
11:09:42 uv::venv::seed
11:09:42 
11:09:42   × Failed to install seed packages
11:09:42   ├─▶ No solution found when resolving: pip
11:09:42   ├─▶ Failed to write to the client cache
11:09:42   ╰─▶ Failed to persist temporary file to
11:09:42       AppData\Local\uv\cache\simple-v6\pypi\pip.rkyv: Access is denied. (os
11:09:42       error 5)
</code></pre>
<pre><code>1:09:38 + ssh jenkins@sf-win19-vm4 &#x27;uv venv --seed --python C:/Python3.12/python.exe /home/jenkins/workspace/gozdal/uv-repro-windows-cache-bug/node/sf-precision2/venv&#x27;
11:09:38 Using Python 3.12.2 interpreter at: C:\Python3.12\python.exe
11:09:38 Creating virtualenv at: /home/jenkins/workspace/gozdal/uv-repro-windows-cache-bug/node/sf-precision2/venv
11:09:42 uv::venv::seed
11:09:42 
11:09:42   × Failed to install seed packages
11:09:42   ├─▶ No solution found when resolving: pip
11:09:42   ├─▶ Failed to write to the client cache
11:09:42   ╰─▶ Failed to persist temporary file to
11:09:42       AppData\Local\uv\cache\simple-v6\pypi\pip.rkyv: Access is denied. (os
11:09:42       error 5)
</code></pre>
<p><code>uv 0.1.28 (0046a0d59 2024-04-02)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gozdal">@gozdal</a> on 2024-04-03 15:24</div>
            <div class="timeline-body"><p>Example of an error in <code>uv pip install</code>:</p>
<pre><code>[2024-04-03T12:12:32.983Z] Built 8 editables in 5.84s
[2024-04-03T12:12:41.046Z] Resolved 253 packages in 7.26s
[2024-04-03T12:12:41.046Z] error: Failed to download distributions
[2024-04-03T12:12:41.046Z]   Caused by: Failed to fetch wheel: python-swiftclient @ git+https://github.com/StarfishStorage/python-swiftclient.git@fbdac94cf75e2fb5d3cf20207d6883fc6bd280b4
[2024-04-03T12:12:41.046Z]   Caused by: Failed to write to the distribution cache
[2024-04-03T12:12:41.046Z]   Caused by: The process cannot access the file because another process has locked a portion of the file. (os error 33)
</code></pre>
<pre><code>[2024-04-03T12:12:33.275Z] error: Failed to build editables
[2024-04-03T12:12:33.275Z]   Caused by: Failed to build editable: file:///C:/jenkins/pr_integration_windows_multi_pipeline-PR-13659-2/part-1/remote/repo/starfish/agent
[2024-04-03T12:12:33.275Z]   Caused by: Build backend failed to determine extra requires with `build_editable()` with exit code: 1
[2024-04-03T12:12:33.275Z] --- stdout:
[2024-04-03T12:12:33.275Z] 
[2024-04-03T12:12:33.275Z] --- stderr:
[2024-04-03T12:12:33.275Z] Traceback (most recent call last):
[2024-04-03T12:12:33.275Z]   File &quot;&lt;string&gt;&quot;, line 14, in &lt;module&gt;
[2024-04-03T12:12:33.275Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools\build_meta.py&quot;, line 448, in get_requires_for_build_editable
[2024-04-03T12:12:33.275Z]     return self.get_requires_for_build_wheel(config_settings)
[2024-04-03T12:12:33.275Z]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[2024-04-03T12:12:33.275Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools\build_meta.py&quot;, line 325, in get_requires_for_build_wheel
[2024-04-03T12:12:33.275Z]     return self._get_build_requires(config_settings, requirements=[&#x27;wheel&#x27;])
[2024-04-03T12:12:33.275Z]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[2024-04-03T12:12:33.275Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools\build_meta.py&quot;, line 295, in _get_build_requires
[2024-04-03T12:12:33.275Z]     self.run_setup()
[2024-04-03T12:12:33.275Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools\build_meta.py&quot;, line 311, in run_setup
[2024-04-03T12:12:33.275Z]     exec(code, locals())
[2024-04-03T12:12:33.275Z]   File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
[2024-04-03T12:12:33.275Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools\__init__.py&quot;, line 104, in setup
[2024-04-03T12:12:33.275Z]     return distutils.core.setup(**attrs)
[2024-04-03T12:12:33.275Z]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[2024-04-03T12:12:33.275Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools\_distutils\core.py&quot;, line 147, in setup
[2024-04-03T12:12:33.275Z]     _setup_distribution = dist = klass(attrs)
[2024-04-03T12:12:33.275Z]                                  ^^^^^^^^^^^^
[2024-04-03T12:12:33.275Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools\dist.py&quot;, line 307, in __init__
[2024-04-03T12:12:33.275Z]     _Distribution.__init__(self, dist_attrs)
[2024-04-03T12:12:33.275Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools\_distutils\dist.py&quot;, line 283, in __init__
[2024-04-03T12:12:33.275Z]     self.finalize_options()
[2024-04-03T12:12:33.275Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools\dist.py&quot;, line 657, in finalize_options
[2024-04-03T12:12:33.275Z]     for ep in sorted(loaded, key=by_order):
[2024-04-03T12:12:33.275Z]               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[2024-04-03T12:12:33.275Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools\dist.py&quot;, line 656, in &lt;lambda&gt;
[2024-04-03T12:12:33.275Z]     loaded = map(lambda e: e.load(), filtered)
[2024-04-03T12:12:33.275Z]                            ^^^^^^^^
[2024-04-03T12:12:33.275Z]   File &quot;C:\Python\python.3.12.2\tools\Lib\importlib\metadata\__init__.py&quot;, line 205, in load
[2024-04-03T12:12:33.275Z]     module = import_module(match.group(&#x27;module&#x27;))
[2024-04-03T12:12:33.275Z]              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[2024-04-03T12:12:33.275Z]   File &quot;C:\Python\python.3.12.2\tools\Lib\importlib\__init__.py&quot;, line 90, in import_module
[2024-04-03T12:12:33.275Z]     return _bootstrap._gcd_import(name[level:], package, level)
[2024-04-03T12:12:33.275Z]            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
[2024-04-03T12:12:33.275Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1387, in _gcd_import
[2024-04-03T12:12:33.275Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1360, in _find_and_load
[2024-04-03T12:12:33.275Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1310, in _find_and_load_unlocked
[2024-04-03T12:12:33.275Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 488, in _call_with_frames_removed
[2024-04-03T12:12:33.275Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1387, in _gcd_import
[2024-04-03T12:12:33.275Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1360, in _find_and_load
[2024-04-03T12:12:33.275Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1310, in _find_and_load_unlocked
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 488, in _call_with_frames_removed
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1387, in _gcd_import
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1360, in _find_and_load
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1331, in _find_and_load_unlocked
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 935, in _load_unlocked
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 995, in exec_module
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 488, in _call_with_frames_removed
[2024-04-03T12:12:33.276Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools_scm\__init__.py&quot;, line 7, in &lt;module&gt;
[2024-04-03T12:12:33.276Z]     from ._config import Configuration
[2024-04-03T12:12:33.276Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools_scm\_config.py&quot;, line 15, in &lt;module&gt;
[2024-04-03T12:12:33.276Z]     from ._integration.pyproject_reading import (
[2024-04-03T12:12:33.276Z]   File &quot;C:\Users\jenkins\AppData\Local\uv\cache\.tmp37BXNX\.venv\Lib\site-packages\setuptools_scm\_integration\pyproject_reading.py&quot;, line 8, in &lt;module&gt;
[2024-04-03T12:12:33.276Z]     from .setuptools import read_dist_name_from_setup_cfg
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1360, in _find_and_load
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1331, in _find_and_load_unlocked
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 935, in _load_unlocked
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 991, in exec_module
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 1128, in get_code
[2024-04-03T12:12:33.276Z]   File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 1186, in get_data
[2024-04-03T12:12:33.276Z] PermissionError: [Errno 13] Permission denied: &#x27;C:\\Users\\jenkins\\AppData\\Local\\uv\\cache\\.tmp37BXNX\\.venv\\Lib\\site-packages\\setuptools_scm\\_integration\\setuptools.py&#x27;
</code></pre>
<pre><code>[2024-04-03T12:12:22.667Z] Installing sf-packaging requirements from C:\jenkins\pr_integration_windows_multi_pipeline-PR-13659-2\part-3\remote\repo\sf-packaging\requirements.txt
[2024-04-03T12:12:22.668Z] error: Failed to download and build: argparse-manpager @ git+https://github.com/StarfishStorage/argparse-manpager.git@e5b8176cbea4a48cdcad5390335a8a9464cd3537
[2024-04-03T12:12:22.668Z]   Caused by: Failed to write to the distribution cache
[2024-04-03T12:12:22.668Z]   Caused by: The process cannot access the file because another process has locked a portion of the file. (os error 33)
[2024-04-03T12:12:22.668Z] UpdatePackagingRequirements : uv pip install failed for C:\jenkins\pr_integrati
[2024-04-03T12:12:22.668Z] on_windows_multi_pipeline-PR-13659-2\part-3\remote\repo\sf-packaging\requiremen
[2024-04-03T12:12:22.668Z] ts.txt
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-03 15:27</div>
            <div class="timeline-body"><p>The second issue is already fixed on main (#2800). The first issue I&#x27;m not really sure but your system seems to be rejecting moving files out of the temporary directory.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gozdal">@gozdal</a> on 2024-04-03 15:32</div>
            <div class="timeline-body"><p>Thanks for such a quick reply!
The thing is it&#x27;s not deterministic - sometimes it works, sometimes it doesn&#x27;t.
Do you have any tips on how to debug?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-07 00:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pfmoore">@pfmoore</a> on 2024-04-16 11:02</div>
            <div class="timeline-body"><p>&quot;The process cannot access the file because another process has locked a portion of the file&quot; sounds like another tool is reading the file while it&#x27;s being moved. Maybe some sort of virus checker?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gozdal">@gozdal</a> on 2024-04-16 11:03</div>
            <div class="timeline-body"><p>There is no AV software on those machines.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nickhutchinson">@nickhutchinson</a> on 2024-04-27 15:37</div>
            <div class="timeline-body"><p>The <code>ERROR_ACCESS_DENIED</code> &#x27;Failed to persist temporary file&#x27; errors are straightforward to reproduce -- try deleting <code>%LOCALAPPDATA%\uv\cache</code> and then running, say, five <code>uv venv --seed &lt;my-venv-dir&gt;</code> commands in parallel, where <code>&lt;my-venv-dir&gt;</code> is unique across all the invocations.</p>
<p>Looking at a <a href="https://learn.microsoft.com/en-us/sysinternals/downloads/procmon">Process Monitor</a> trace with uv 0.1.39, it looks that these concurrent uv.exe processes are racing to write to <code>wheel.rykv</code>/<code>pip.rykv</code>/<code>setuptools.rykv</code> in <code>%LOCALAPPDATA%\uv\cache\simple-v7\pypi</code>. Specifically, the uv processes are writing to a temporary file that is then renamed to <code>wheel.rykv</code>/<code>pip.rykv</code>/<code>setuptools.rykv</code>. However, these rename operations fail with <code>ERROR_ACCESS_DENIED</code> if any process (i.e. another of the concurrent uv processes) has an open handle to the file being replaced.</p>
<p>(Replacing an open file <em>can</em> actually be done on recent Windows 10, but is a bit tricky. I believe all opens need to have used the <code>FILE_SHARE_DELETE</code> share flag, and the rename operation needs to be done with an API such as <code>SetFileInformationByHandle</code> with <code>SetFileRenameInfoEx</code> and the <code>FILE_RENAME_FLAG_POSIX_SEMANTICS</code> flag. <code>SetFileRenameInfoEx</code> is only available for Windows 10 1607 and newer.)</p>
<p>Process Monitor screenshot showing the failed rename op:</p>
<img alt="Screenshot 2024-04-27 at 15 24 06" src="https://github.com/astral-sh/uv/assets/755692/969536aa-a432-4614-b786-5a29f6239679">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-27 15:50</div>
            <div class="timeline-body"><p>Thanks, that&#x27;s really helpful. Not sure how to resolve that then, other than to make Windows 10 1607 our minimum-supported version and implement POSIX semantics there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nickhutchinson">@nickhutchinson</a> on 2024-04-30 19:21</div>
            <div class="timeline-body"><blockquote>
<p>Thanks, that&#x27;s really helpful. Not sure how to resolve that then, other than to make Windows 10 1607 our minimum-supported version and implement POSIX semantics there.</p>
</blockquote>
<p>If you&#x27;ve got a hard requirement on having POSIX-style file renames for uv, then yeah, I guess so. Otherwise, perhaps you could use some form of file-level locking to avoid having multiple uv processes race to write to the same path in the cache.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/george-palmsens">@george-palmsens</a> on 2024-08-28 08:20</div>
            <div class="timeline-body"><p>Would love to see this remedied - <code>uv</code> speeds up our CI by a huge amount but this issue has forced us to revert. Glad the root cause seems to be understood!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codeLemur">@codeLemur</a> on 2024-12-24 10:12</div>
            <div class="timeline-body"><p>I had a similar problem with uv , GitLab and a Windows build server.
Parallel builds caused conflicts with the uv cache. The cache was stored for each build in the same directory of the user:
<code>Failed to retrieve temporary file while trying to persist to C:\Users\GitLabUser\AppData\Local\uv\cache\simple-v14\pypi\docutils.rkyv</code></p>
<p>What solved the issue was to set a specific cache directory for each build:
<code>--cache-dir .cache</code></p>
<p>With this solution each parallel build uses its own cache.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dinhphieu">@dinhphieu</a> on 2025-01-19 09:15</div>
            <div class="timeline-body"><blockquote>
<p>I had a similar problem with uv , GitLab and a Windows build server. Parallel builds caused conflicts with the uv cache. The cache was stored for each build in the same directory of the user: <code>Failed to retrieve temporary file while trying to persist to C:\Users\GitLabUser\AppData\Local\uv\cache\simple-v14\pypi\docutils.rkyv</code></p>
<p>What solved the issue was to set a specific cache directory for each build: <code>--cache-dir .cache</code></p>
<p>With this solution each parallel build uses its own cache.</p>
</blockquote>
<p>Thanks! Recently hit this while using uvx with Claude&#x27;s MCP mcp-server-sqlite</p>
<p>If anyone is in the same boat as me, this is the config</p>
<pre><code>{
  &quot;mcpServers&quot;: {
    &quot;sqlite&quot;: {
      &quot;command&quot;: &quot;uvx&quot;,
      &quot;args&quot;: [
        &quot;--cache-dir&quot;,
        &quot;.cache&quot;,
        &quot;mcp-server-sqlite&quot;,
        &quot;--db-path&quot;,
        &quot;/path/to/sqlite.db&quot;
      ]
    }
  }
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/skaasjager">@skaasjager</a> on 2025-05-23 08:00</div>
            <div class="timeline-body"><p>Just wanted to let people know that I hit the issue of <code>Caused by: Failed to persist temporary file to ...</code> as well during a build using <code>cmake</code> and <code>uv</code>. I read about AV being the issue and some caching things, but I had another solution that worked for me.</p>
<p>In my case, it seems to have hit the <a href="https://learn.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation">Maximum Path Length Limitation</a>, because after I moved the repository to a short-named folder in the root of the drive (e.g. C:\Code), I was able to run the build successfully.</p>
<p>Perhaps this helps others as well.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:30:44 UTC
    </footer>
</body>
</html>
