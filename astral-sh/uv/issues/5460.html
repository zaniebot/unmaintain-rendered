<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv self update: failed to execute installer (status: exit code: 1) on Windows - astral-sh/uv #5460</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv self update: failed to execute installer (status: exit code: 1) on Windows</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/5460">#5460</a>
        opened by <a href="https://github.com/tschneiderr">@tschneiderr</a>
        on 2024-07-25 19:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/tschneiderr">@tschneiderr</a> on 2024-07-25 19:25</div>
            <div class="timeline-body"><p>When running <code>uv self update --verbose</code> on my Windows 11 machine, I get the following output:</p>
<pre><code>DEBUG uv 0.2.28
info: Checking for updates...
error: failed to execute installer (status: exit code: 1)
</code></pre>
<p>Installing and updating <code>uv</code> through the following command works as expected: <code>irm https://astral.sh/uv/install.ps1 | iex</code>
<code>uv</code> has only been installed via the standalone installer, not via <code>pip</code>.</p>
<p>I can't seem to reproduce the issue on any other system or virtual machine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2024-07-25 19:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-25 19:29</div>
            <div class="timeline-body"><p>Thanks for the report!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-25 20:15</div>
            <div class="timeline-body"><p>What shell are you using?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tschneiderr">@tschneiderr</a> on 2024-07-25 20:31</div>
            <div class="timeline-body"><p>I'm using the current PowerShell v7.4.4.
But switching to the built-in PowerShell v5 from Windows produces the same result.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-25 21:08</div>
            <div class="timeline-body"><p>Unfortunately I'm not sure what's going on. I'm chatting with maintainers of the upstream dependency (<code>cargo-dist</code>) which creates the installer for us.</p>
<p>Does it persist if you delete and reinstall?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tschneiderr">@tschneiderr</a> on 2024-07-25 21:15</div>
            <div class="timeline-body"><p>Yes, the issue persists. Also tried different older versions of uv and deleted everything uv-related from the AppData directory.</p>
<p>I also tried changing the <code>ExecutionPolicy</code> from <code>RemoteSigned</code> to <code>Unrestricted</code>, but that didn't help either.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-27 17:13</div>
            <div class="timeline-body"><p>Do you mind testing with the latest version? It should have a change that surfaces more information in the trace.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2024-07-27 20:26</div>
            <div class="timeline-body"><p>@tschneiderr I couldn't reproduce your issue on my Windows 11 system either. So I'm wondering if it could be an instruction set architecture issue? Windows 11 currently comes in both ARM64 and x86-64 versions. My Windows 11 is the x86-64 version.</p>
<p>According to the installer's notes, ARM64 might install x86-x64 versions. I wonder if this will have any impact on self-updates.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">upstream</span> added by @charliermarsh on 2024-07-29 01:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tschneiderr">@tschneiderr</a> on 2024-07-29 19:32</div>
            <div class="timeline-body"><p>I updated <code>uv</code> to v0.2.30 via the following command, which worked as before:</p>
<pre><code>irm https://astral.sh/uv/0.2.30/install.ps1 | iex
</code></pre>
<p>Running <code>uv self update --verbose</code> now doesn't give any additional information:</p>
<pre><code>DEBUG uv 0.2.30
info: Checking for updates...
error: failed to execute installer (status: exit code: 1)
</code></pre>
<p>@charliermarsh Is there any way for me to provide more detailed logs of what's going wrong?
@FishAlchemist I'm running Windows on x86-64.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tschneiderr">@tschneiderr</a> on 2024-08-19 20:53</div>
            <div class="timeline-body"><p>Trying to update <code>uv</code> <code>v0.2.36</code> via <code>uv self update --verbose</code> revealed some information which helped me fix the problem.</p>
<pre><code class="language-pwsh">DEBUG uv 0.2.36
info: Checking for updates...
error: The installation failed. Output from the installer:
C:\Users\Thomas\AppData\Local\Temp\.tmpCelC4m\installer.ps1 : File
C:\Users\Thomas\AppData\Local\Temp\.tmpCelC4m\installer.ps1 cannot be loaded because running scripts is disabled on
this system. For more information, see about_Execution_Policies at https:/go.microsoft.com/fwlink/?LinkID=135170.
At line:1 char:1
+ C:\Users\Thomas\AppData\Local\Temp\.tmpCelC4m\installer.ps1
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : SecurityError: (:) [], PSSecurityException
    + FullyQualifiedErrorId : UnauthorizedAccess
</code></pre>
<p>My <code>Execution-Policy</code> is set to <code>RemoteSigned</code>. The <code>uv</code> standalone installer also works, so what's going on here?</p>
<p><code>Get-ExecutionPolicy -List</code></p>
<pre><code class="language-pwsh">        Scope ExecutionPolicy
        ----- ---------------
MachinePolicy       Undefined
   UserPolicy       Undefined
      Process       Undefined
  CurrentUser    RemoteSigned
 LocalMachine    RemoteSigned
</code></pre>
<p>It turnes out that the current <code>PowerShell Core (v7)</code> and the integrated <code>PowerShell Classic (v5)</code> have separate <code>Execution-Policy</code> settings and for some reason the integrated <code>uv</code> updater runs in <code>PowerShell Classic</code>!</p>
<p><code>powershell.exe Get-ExecutionPolicy -List</code></p>
<pre><code class="language-pwsh">        Scope ExecutionPolicy
        ----- ---------------
MachinePolicy       Undefined
   UserPolicy       Undefined
      Process       Undefined
  CurrentUser       Undefined
 LocalMachine       Undefined
</code></pre>
<p>Changing the <code>Execution-Policy</code> to <code>RemoteSigned</code> in <code>PowerShell Classic</code> too fixes my issues! ðŸ˜„</p>
<p>I think the updater should run in the same shell as the <code>uv</code> command is run from to prevent these kind of issues.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-19 20:55</div>
            <div class="timeline-body"><p>Thanks for the details! The updater itself is managed outside of uv â€” we'll raise this with the Axo team.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jon-ton">@jon-ton</a> on 2024-08-22 14:06</div>
            <div class="timeline-body"><p>I had a similar problem with PowerShell on windows. What worked for me was the following command to avoid spawning the shell within a shell:</p>
<p><code>Invoke-WebRequest https://astral.sh/uv/install.ps1 | iex</code></p>
<p>Might be worth adding to the main docs page as I've always had the old method (<code>powershell -c &quot;irm https://astral.sh/uv/install.ps1 | iex&quot;</code>) blocked by PowerShell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 15:59</div>
            <div class="timeline-body"><p>@jon-ton would you be willing to contribute that to the installation docs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jon-ton">@jon-ton</a> on 2024-08-23 03:17</div>
            <div class="timeline-body"><p>Ah sorry, I'm a reluctant Windows user.</p>
<p>It ended up being even easier. If using PowerShell core:
<code>irm https://astral.sh/uv/install.ps1 | iex</code></p>
<p>Whereas the original uses the old windows PowerShell:
<code>powershell -c &quot;irm https://astral.sh/uv/install.ps1 | iex&quot;</code></p>
<p>Is it safe to assume people should be using the new PowerShell core and just replace the installation instructions, or list both?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-23 13:05</div>
            <div class="timeline-body"><p>I'm not sure â€” these recommendations are from an external dependency which creates these installers for us. I'll check in there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2024-08-23 13:57</div>
            <div class="timeline-body"><p>I agree it would be great to just run in the current version of powershell, core on not. Unfortunately, explicitly invoking powershell here is a workaround for the reverse problem: people would paste this command into cmd and it would fail. And microsoft quite explicitly made classic powershell and powershell core have different commands (<code>powershell</code> vs <code>pwsh</code>) to make sure you don't accidentally invoke one when you meant the other, since they have fairly different semantics (especially around utf8 vs utf16).</p>
<p>I'm pretty confident the cmd case is more pervasive than the pwsh one, but still, it would be good for us to find a way to manage this execution policy thing better.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">release</span> added by @zanieb on 2024-08-23 14:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/2-5">@2-5</a> on 2024-08-25 10:53</div>
            <div class="timeline-body"><p>I've hit this too. I have a pretty default Windows 11, with PowerShell core, but with dev mode disabled:</p>
<pre><code class="language-powershell">PowerShell 7.4.4

PS C:\Users\user&gt; powershell -c &quot;irm https://astral.sh/uv/install.ps1 | iex&quot;
Error: PowerShell requires an execution policy in [Unrestricted, RemoteSigned, ByPass]
to run uv. For example, to set the execution policy to 'RemoteSigned' please run:

    Set-ExecutionPolicy RemoteSigned -scope CurrentUser

PS C:\Users\user&gt; irm https://astral.sh/uv/install.ps1 | iex
Downloading uv 0.3.3 (x86_64-pc-windows-msvc)
Installing to C:\Users\user\.cargo\bin
  uv.exe
  uvx.exe
everything's installed!

C:\Users\user\.cargo\bin was added to your PATH, you may
need to restart your shell for that to take effect.
</code></pre>
<p>The alternative ways of installing on Windows should at least be documented:</p>
<pre><code class="language-powershell">powershell -c &quot;irm https://astral.sh/uv/install.ps1 | iex&quot;
powershell -ExecutionPolicy Bypass -c &quot;irm https://astral.sh/uv/install.ps1 | iex&quot;
irm https://astral.sh/uv/install.ps1 | iex
</code></pre>
<p>It might be worth mentioning that under <code>cmd</code> one should use the <code>powershell -c</code> variant, and the <code>irm ...</code> variant for <code>powershell</code>.</p>
<p>Windows also ships with <code>curl</code> now, so a variation of this would work under both <code>cmd</code> and <code>powershell</code>. The <code>.bat</code> file would autodetect the env it's run under and proceed accordingly:</p>
<pre><code class="language-shell">curl -LsSf https://astral.sh/uv/install.bat -o uv_install.bat &amp;&amp; .\uv_install.bat
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2024-08-25 19:56</div>
            <div class="timeline-body"><p>curl has different behaviors in windows. It is recommended to add <strong>.exe</strong> to explicitly use <code>curl.exe</code>.</p>
<ul>
<li>Powershell 5.1 (Windows Powershell)
<img src="https://github.com/user-attachments/assets/2dd4444a-ebbf-4b30-9040-4cfb033545cd" alt="image" /></li>
<li>Powershell 5.1 (Windows Powershell) with .exe
<img src="https://github.com/user-attachments/assets/46bc874b-1546-4c97-9483-a7c2323bd287" alt="image" /></li>
<li>PowerShell 7 (PowerShell Core)
<img src="https://github.com/user-attachments/assets/b1613253-ae56-41c5-a471-77270fe7bd0b" alt="image" /></li>
<li>Command Prompt (cmd.exe)
<img src="https://github.com/user-attachments/assets/39b22dbb-5c8c-4fe5-81ba-06fc780fee90" alt="image" /></li>
</ul>
<p><strong>Link:</strong>
<a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invoke-webrequest">Invoke-WebRequest</a> (Microsoft Learn)
<a href="https://curl.se/windows/microsoft.html">curl shipped by Microsoft</a> (curl website)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kylewardlow">@kylewardlow</a> on 2025-03-26 21:54</div>
            <div class="timeline-body"><p>There is a similar error for users for whom the Powershell ExecutionPolicy is dictated by corporate client security group policies and thus inescapable. A workaround I've found is to simply use git bash and <code>curl -LsSf https://astral.sh/uv/install.sh | sh</code>, but a functional Powershell method that works for all users, especially those in security-controlled environments, should be implemented.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tkmeyer">@tkmeyer</a> on 2025-03-28 02:39</div>
            <div class="timeline-body"><p>I once had the bad idea to manually uninstall powershell 5.1, so I was only left with <code>pwsh</code> and that left me with the same bug this issue was initially opened for. So I strongly support @tschneiderr 's idea to let  the updater run in the same shell as the uv command is run from and to also mention</p>
<p><code>pwsh -ExecutionPolicy Bypass -c &quot;irm https://astral.sh/uv/install.ps1 | iex&quot;</code></p>
<p>as another alternative way to install uv in the docs.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:58 UTC
    </footer>
</body>
</html>
