<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can't activate a virtual environment if Python version is pinned - astral-sh/uv #12544</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Can&#x27;t activate a virtual environment if Python version is pinned</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12544">#12544</a>
        opened by <a href="https://github.com/dmfigol">@dmfigol</a>
        on 2025-03-29 13:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dmfigol">@dmfigol</a></div>
            <div class="timeline-body">Summary
<p>If you pin python version using <code>.python-version</code>, then the virtual environment can&#x27;t be activated. See reproduction below:</p>
<pre><code>-&gt; % mkdir uv-venv-bug &amp;&amp; cd uv-venv-bug   
[~/uv-venv-bug] 
-&gt; % uv python pin 3.9
Pinned `.python-version` to `3.9`
[~/uv-venv-bug] 
-&gt; % uv venv venv
Using CPython 3.9.21
Creating virtual environment at: venv
Activate with: source venv/bin/activate
[~/uv-venv-bug] 
-&gt; % source venv/bin/activate
[~/uv-venv-bug] 
-&gt; % which python
python not found
[~/uv-venv-bug] 
-&gt; % echo $VIRTUAL_ENV
[~/uv-venv-bug] 
-&gt; % uv pip install httpx
error: No virtual environment found; run `uv venv` to create an environment, or pass `--system` to install into a non-virtual environment
[~/uv-venv-bug] 
-&gt; % ls -la
total 16
drwxrwxr-x  3 dmfigol dmfigol 4096 Mar 29 14:27 .
drwxr-xr-x 40 dmfigol dmfigol 4096 Mar 29 14:28 ..
-rw-rw-r--  1 dmfigol dmfigol    4 Mar 29 14:26 .python-version
drwxrwxr-x  4 dmfigol dmfigol 4096 Mar 29 14:27 venv
</code></pre>
Platform
<p>Ubuntu 24.04.2</p>
Version
<p>0.6.10</p>
Python version
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/dmfigol">@dmfigol</a> on 2025-03-29 13:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Can&#x27;t activatea  virtual environment if Python version is pinned&quot; to &quot;Can&#x27;t activate a virtual environment if Python version is pinned&quot; by <a href="https://github.com/dmfigol">@dmfigol</a> on 2025-03-29 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2025-03-29 14:56</div>
            <div class="timeline-body"><p>Is the terminal you&#x27;re using <code>bash/zsh</code>?
If not, the scripts are actually different.
<img src="https://github.com/user-attachments/assets/ea6bc64d-d4b2-40d8-b8d6-e5a33dc5f60b" alt="Image">
As for <code>uv pip install</code>, if you haven&#x27;t successfully entered the virtual environment, it will look for <code>.venv</code>
Ref: https://docs.astral.sh/uv/pip/compatibility/#virtual-environments-by-default
Ref: https://docs.astral.sh/uv/concepts/python-versions/#finding-a-python-executable</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dmfigol">@dmfigol</a> on 2025-03-29 18:00</div>
            <div class="timeline-body"><p>I use zsh. The issue is about the fact that I can&#x27;t activate virtual environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-29 18:12</div>
            <div class="timeline-body"><p>I don&#x27;t have any ideas here -- I&#x27;ve never seen this. There must be something unusual about your machine or setup (e.g., do you have pyenv installed, could it be resolving to a pyenv shim in some bad way, or something?). What does <code>venv/pyenv.cfg</code> contain? Does it point to a valid Python?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-29 18:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-29 18:13</div>
            <div class="timeline-body"><pre><code>❯ mkdir uv-venv-bug &amp;&amp; cd uv-venv-bug
❯ uv python pin 3.9
Pinned `.python-version` to `3.9`
❯ uv venv venv
Using CPython 3.9.20
Creating virtual environment at: venv
Activate with: source venv/bin/activate
❯ source venv/bin/activate
❯ python
Python 3.9.20 (main, Oct 16 2024, 08:30:28)
[Clang 18.1.8 ] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-29 18:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dmfigol">@dmfigol</a> on 2025-03-29 18:36</div>
            <div class="timeline-body"><p>@charliermarsh thank you Charlie for testing. With your pyenv pointer I was able to localize this to pyenv-virtualenv specifically. After I uninstalled everything pyenv related, uv venv works now correctly.
I am sorry for spending your time on what proved to be my issue, not uv.
Thank you folks for your work on uv, I love using it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dmfigol">@dmfigol</a> on 2025-03-29 18:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-29 18:40</div>
            <div class="timeline-body"><p>That&#x27;s great to hear, thanks for following up!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:00 UTC
    </footer>
</body>
</html>
