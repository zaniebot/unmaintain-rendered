<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv pip install hangs when I install paddlepaddle - astral-sh/uv #12711</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv pip install hangs when I install paddlepaddle</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12711">#12711</a>
        opened by <a href="https://github.com/HydrogenSulfate">@HydrogenSulfate</a>
        on 2025-04-07 09:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/HydrogenSulfate">@HydrogenSulfate</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>When I use <code>pip install ...</code> in colab, <code>paddlepaddle</code> can be installed successfully, but hangs if I changed to <code>uv pip install ...</code></p>
<p><img src="https://github.com/user-attachments/assets/02e6bf72-fa47-4f57-9d8e-aca11a65c044" alt="Image" /></p>
<h3>Platform</h3>
<p>Ubuntu</p>
<h3>Version</h3>
<p>uv 0.5.29</p>
<h3>Python version</h3>
<p>Python 3.11.11</p>
<p>Related PR: <a href="https://github.com/deepmodeling/deepmd-kit/pull/4694">https://github.com/deepmodeling/deepmd-kit/pull/4694</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @HydrogenSulfate on 2025-04-07 09:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/njzjz">@njzjz</a> on 2025-04-07 14:22</div>
            <div class="timeline-body"><p>Detailed log:</p>
<pre><code class="language-sh">uv pip install -vvv --system &quot;paddlepaddle-gpu==3.0.0&quot; -i https://www.paddlepaddle.org.cn/packages/stable/cu126/
</code></pre>
<pre><code>DEBUG uv 0.6.12
DEBUG Searching for default Python interpreter in search path
TRACE Searching PATH for executables: python, python3
TRACE Checking `PATH` directory for interpreters: /usr/local/cuda/bin
TRACE Checking `PATH` directory for interpreters: /usr/local/sbin
TRACE Checking `PATH` directory for interpreters: /usr/local/bin
TRACE Found possible Python executable: /usr/local/bin/python
TRACE Querying interpreter executable at /usr/local/bin/python
DEBUG Found `cpython-3.11.11-linux-x86_64-gnu` at `/usr/local/bin/python` (first executable in the search path)
Using Python 3.11.11 environment at: /usr
TRACE Checking lock for `/usr` at `/tmp/uv-b17927aca3d28934.lock`
DEBUG Acquired lock for `/usr`
DEBUG At least one requirement is not satisfied: paddlepaddle-gpu==3.0.0
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.11.11
DEBUG Solving with target Python version: &gt;=3.11.11
TRACE Assigned packages: 
TRACE Chose package for decision: root. remaining choices: 
DEBUG Adding direct dependency: paddlepaddle-gpu&gt;=3.0.0, &lt;3.0.0+
TRACE Fetching metadata for paddlepaddle-gpu from https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/
INFO add_decision: Id::&lt;PubGrubPackage&gt;(0) @ 0a0.dev0 without checking dependencies    
TRACE Assigned packages: root==0a0.dev0
TRACE Chose package for decision: paddlepaddle-gpu. remaining choices: 
TRACE No cache entry exists for /root/.cache/uv/simple-v15/index/39f4eb9d54e2813f/paddlepaddle-gpu.rkyv
DEBUG No cache entry for: https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/
TRACE Sending fresh GET request for https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/
TRACE Handling request for https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/ with authentication policy auto
TRACE Request for https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/ is unauthenticated, checking cache
TRACE No credentials in cache for URL https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/
TRACE Attempting unauthenticated request for https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/
TRACE checkout waiting for idle connection: (&quot;https&quot;, [www.paddlepaddle.org.cn](http://www.paddlepaddle.org.cn/))
DEBUG starting new connection: https://www.paddlepaddle.org.cn/    
TRACE Http::connect; scheme=Some(&quot;https&quot;), host=Some(&quot;[www.paddlepaddle.org.cn](http://www.paddlepaddle.org.cn/)&quot;), port=None
DEBUG connecting to 106.12.155.111:443
DEBUG connected to 106.12.155.111:443
TRACE http1 handshake complete, spawning background dispatcher task
TRACE checkout dropped for (&quot;https&quot;, [www.paddlepaddle.org.cn](http://www.paddlepaddle.org.cn/))
TRACE Cached request https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/ is storable because its response has a heuristically cacheable status code 200
TRACE put; add idle connection for (&quot;https&quot;, [www.paddlepaddle.org.cn](http://www.paddlepaddle.org.cn/))
DEBUG pooling idle connection for (&quot;https&quot;, [www.paddlepaddle.org.cn](http://www.paddlepaddle.org.cn/))
TRACE Received package metadata for: paddlepaddle-gpu
TRACE Selecting candidate for paddlepaddle-gpu with range &gt;=3.0.0, &lt;3.0.0+ with 2 remote versions
DEBUG Searching for a compatible version of paddlepaddle-gpu (&gt;=3.0.0, &lt;3.0.0+)
TRACE Selecting candidate for paddlepaddle-gpu with range &gt;=3.0.0, &lt;3.0.0+ with 2 remote versions
TRACE Found candidate for package paddlepaddle-gpu with range &gt;=3.0.0, &lt;3.0.0+ after 1 steps: 3.0.0 version
TRACE Returning candidate for package paddlepaddle-gpu with range &gt;=3.0.0, &lt;3.0.0+ after 1 steps
TRACE Found candidate for package paddlepaddle-gpu with range &gt;=3.0.0, &lt;3.0.0+ after 1 steps: 3.0.0 version
TRACE Returning candidate for package paddlepaddle-gpu with range &gt;=3.0.0, &lt;3.0.0+ after 1 steps
DEBUG Selecting: paddlepaddle-gpu==3.0.0 [compatible] (paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl)
TRACE idle interval checking for expired
TRACE No cache entry exists for /root/.cache/uv/wheels-v5/index/39f4eb9d54e2813f/paddlepaddle/3.0.0-cp311-cp311-linux_x86_64.msgpack
DEBUG No cache entry for: https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE Sending fresh HEAD request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE Handling request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl with authentication policy auto
TRACE Request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl is unauthenticated, checking cache
TRACE No credentials in cache for URL https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE Attempting unauthenticated request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE checkout waiting for idle connection: (&quot;https&quot;, paddle-whl.bj.bcebos.com)
DEBUG starting new connection: https://paddle-whl.bj.bcebos.com/    
TRACE Http::connect; scheme=Some(&quot;https&quot;), host=Some(&quot;paddle-whl.bj.bcebos.com&quot;), port=None
DEBUG connecting to 103.235.47.176:443
DEBUG connected to 103.235.47.176:443
TRACE http1 handshake complete, spawning background dispatcher task
TRACE checkout dropped for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE put; add idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
DEBUG pooling idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE Cached request https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl is storable because its response has an 'Expires' header set
TRACE Getting metadata for paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl by range request
TRACE Handling request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl with authentication policy auto
TRACE Request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl is unauthenticated, checking cache
TRACE No credentials in cache for URL https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE Attempting unauthenticated request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE take? (&quot;https&quot;, paddle-whl.bj.bcebos.com): expiration = Some(90s)
DEBUG reuse idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE put; add idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
DEBUG pooling idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE Handling request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl with authentication policy auto
TRACE Request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl is unauthenticated, checking cache
TRACE No credentials in cache for URL https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE Attempting unauthenticated request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE take? (&quot;https&quot;, paddle-whl.bj.bcebos.com): expiration = Some(90s)
DEBUG reuse idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE put; add idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
DEBUG pooling idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE Handling request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl with authentication policy auto
TRACE Request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl is unauthenticated, checking cache
TRACE No credentials in cache for URL https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE Attempting unauthenticated request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE take? (&quot;https&quot;, paddle-whl.bj.bcebos.com): expiration = Some(90s)
DEBUG reuse idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE put; add idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
DEBUG pooling idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE Handling request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl with authentication policy auto
TRACE Request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl is unauthenticated, checking cache
TRACE No credentials in cache for URL https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE Attempting unauthenticated request for https://paddle-whl.bj.bcebos.com/stable/cu126/paddlepaddle-gpu/paddlepaddle-3.0.0-cp311-cp311-linux_x86_64.whl
TRACE take? (&quot;https&quot;, paddle-whl.bj.bcebos.com): expiration = Some(90s)
DEBUG reuse idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE put; add idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
DEBUG pooling idle connection for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE Received built distribution metadata for: paddlepaddle==3.0.0
TRACE idle interval checking for expired
TRACE idle interval evicting closed for (&quot;https&quot;, [www.paddlepaddle.org.cn](http://www.paddlepaddle.org.cn/))
TRACE idle interval evicting closed for (&quot;https&quot;, paddle-whl.bj.bcebos.com)
TRACE idle interval checking for expired
TRACE idle interval checking for expired
TRACE idle interval checking for expired
TRACE idle interval checking for expired
TRACE idle interval checking for expired
TRACE idle interval checking for expired
TRACE idle interval checking for expired
TRACE idle interval checking for expired
TRACE idle interval checking for expired
TRACE idle interval checking for expired
TRACE idle interval checking for expired
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eric-gitta-moore">@eric-gitta-moore</a> on 2025-05-02 14:58</div>
            <div class="timeline-body"><p>same here.</p>
<p>At the same time, I encountered another issue. If the package name (paddlepaddle-gpu) and the name of the whl file (paddlepaddle-3.0.0-cp312-cp312-linux_x86_64.whl) are inconsistent, it will lead to the failure of installing <code>uv sync</code>.</p>
<p>project.toml</p>
<pre><code class="language-toml">[project]
name = &quot;uv-test&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;paddlepaddle-gpu==3.0.0&quot;,
]

[tool.uv.pip]
index-strategy = &quot;unsafe-best-match&quot;

[tool.uv.sources]
paddlepaddle-gpu = [{ index = &quot;paddlepaddle&quot; }]

[[tool.uv.index]]
url = &quot;https://pypi.tuna.tsinghua.edu.cn/simple/&quot;
default = true

[[tool.uv.index]]
name = &quot;paddlepaddle&quot;
url = &quot;https://www.paddlepaddle.org.cn/packages/stable/cu126/&quot;
explicit = true
</code></pre>
<pre><code class="language-diff">‚ùØ uv sync -v
DEBUG uv 0.7.2
DEBUG Found project root: `/home/linux/workspace/uv-test`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/home/linux/workspace/uv-test`
DEBUG Reading Python requests from version file at `/home/linux/workspace/uv-test/.python-version`
DEBUG Using Python request `3.12` from version file at `.python-version`
DEBUG Checking for Python environment at `.venv`
DEBUG The virtual environment's Python version satisfies the request: `Python 3.12`
DEBUG Released lock at `/tmp/uv-f041222ac8a8b3f6.lock`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: uv-test @ file:///home/linux/workspace/uv-test
DEBUG No workspace root found, using project root
DEBUG Solving with installed Python version: 3.12.3
DEBUG Solving with target Python version: &gt;=3.12
DEBUG Adding direct dependency: uv-test*
DEBUG Searching for a compatible version of uv-test @ file:///home/linux/workspace/uv-test (*)
DEBUG Adding direct dependency: paddlepaddle-gpu&gt;=3.0.0, &lt;3.0.0+
DEBUG Found stale response for: https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/
DEBUG Sending revalidation request for: https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/
DEBUG Found modified response for: https://www.paddlepaddle.org.cn/packages/stable/cu126/paddlepaddle-gpu/
DEBUG Searching for a compatible version of paddlepaddle-gpu (&gt;=3.0.0, &lt;3.0.0+)
+DEBUG Selecting: paddlepaddle-gpu==3.0.0 [compatible] (paddlepaddle-3.0.0-cp312-cp312-linux_x86_64.whl)
+error: The index returned metadata for the wrong package: expected distribution for paddlepaddle-gpu, got distribution for paddlepaddle
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eric-gitta-moore">@eric-gitta-moore</a> on 2025-05-02 15:06</div>
            <div class="timeline-body"><p>update 2</p>
<p>Actually, I found that there is a corresponding whl file (paddlepaddle_gpu-3.0.0-cp312-cp312-linux_x86_64.whl), but perhaps due to some reason, it was not used? (I guess it's because paddlepaddle-3.0.0-cp312-cp312-linux_x86_64.whl is listed earlier in the sequence, so I chose the first one.)</p>
<p><img src="https://github.com/user-attachments/assets/b2c462af-38c1-4765-8225-998e1fffc12d" alt="Image" /></p>
<p>Now I have solved this problem by using a method which doesn't feel very good to me.</p>
<pre><code class="language-diff">[project]
name = &quot;lpd-project&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
-    &quot;paddlepaddle-gpu==3.0.0&quot;,
+    &quot;paddlepaddle-gpu==3.0.0.dev20250324&quot;,
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-02 15:09</div>
            <div class="timeline-body"><p>We should probably ignore wheels entirely with the wrong name. (We should <em>definitely</em> not allow them to be installed, but in that case, I agree it should use the <code>paddlepaddle-gpu</code> wheels.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2025-05-02 15:23</div>
            <div class="timeline-body"><p>FYI, I'm going to make an issue on pip side as well, pip should also ignore wheels with the wrong name. Can't be done any earlier than pip 25.3 though, as we're still in the middle of deprecating invalid wheel file names.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-07-02 16:25</div>
            <div class="timeline-body"><p>We don't allow wheels with the wrong name anymore and we fixed that hang, so this issue should be fixed. (Feel free to reopen it if we missed something)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-07-02 16:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:30:49 UTC
    </footer>
</body>
</html>
