<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `--no-editable` to `uv pip install` - astral-sh/uv #13087</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add `--no-editable` to `uv pip install`</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/13087">#13087</a>
        opened by <a href="https://github.com/kkpattern">@kkpattern</a>
        on 2025-04-24 12:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kkpattern">@kkpattern</a> on 2025-04-24 12:52</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>We have a workspace monorepo structured like this:</p>
<pre><code>monorepo
    |- packages
          |- package_a
          |- package_b
          |- package_c
</code></pre>
<p>Package <code>package_a</code> depends on <code>package_b</code>, and <code>package_b</code>has no workspace dependencies.</p>
<p>When building a Docker image with <code>package_a</code> installed, we want to install <code>package_a</code> and its dependency <code>package_b</code> into the system Python environment, and then remove the monorepo source code from the Docker image to reduce its size:</p>
<pre><code class="language-Dockerfile">COPY . /tmp/monorepo
WORKDIR /tmp/monorepo
RUN uv pip install --system packages/package_a
RUN rm -r /tmp/monorepo
</code></pre>
<p>However, <code>uv pip install</code> currently installs workspace dependencies as editable, and there is no <code>--no-editable</code> option for <code>uv pip install</code>.</p>
<p>Therefore, if we remove the <code>/tmp/monorepo</code> directory, importing <code>package_b</code> fails because its source code is gone.</p>
<p>It would be nice if we could have a <code>--no-editable</code> flag for <code>uv pip install</code>, similar to the one available for <code>uv sync</code>.</p>
<p>Thanks.</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @kkpattern on 2025-04-24 12:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/viniciuscr">@viniciuscr</a> on 2025-05-13 13:01</div>
            <div class="timeline-body"><p>I am having the exactly same issue.
I am trying to create a bundle to deploy to a aws lambda, basically using uv export and uv pip install.
however the uv pip install  creates a .pth file point the my workspace project, instead of copying it source to the dist/ location.
it becomes nonviable to scale up a project that depends on multiple workspace projects.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-13 13:05</div>
            <div class="timeline-body"><p>@viniciuscr Can you use <code>--no-editable</code> with <code>uv export</code> instead of <code>uv pip install</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/viniciuscr">@viniciuscr</a> on 2025-05-13 13:14</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/viniciuscr">@viniciuscr</a> Can you use <code>--no-editable</code> with <code>uv export</code> instead of <code>uv pip install</code>?</p>
</blockquote>
<p>I use it, but as @kkpattern explains, it works only for the target package, not to its dependencies.
My command is <code>uv export --frozen --no-dev --no-editable --quiet  --package $(PACKAGE) -o dist/$(PACKAGE)/requirements.txt</code></p>
<p>the next step would be</p>
<pre><code>uv pip install \
		--no-installer-metadata \
		--no-compile-bytecode \
		--python-platform x86_64-manylinux2014 \
		--target dist/$(PACKAGE) \
		--exact \
		--strict \
		-r dist/$(PACKAGE)/requirements.txt
</code></pre>
<p>but since uv pip install does not have the --no-editable option it creates a .pth file pointing to the workspace project.</p>
<p>I tested the sync command , and the --no-editable  is indeed the missing part.
uv sync will have the same behavior of uv install: editable will have a .pth point to it, passing --no-editable uv sync will copy the code and dont create the .pth file.
Which is the necessary behavior for uv pip install, in order to become viable to use it to create a deployment zip file to send to a lambda.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-13 13:31</div>
            <div class="timeline-body"><p>Can you share a minimal example for an input where <code>uv export --no-editable</code> exports an editable? We may still add <code>--no-editable</code> to <code>uv pip install</code>, but the <code>uv export</code> behavior sounds like a bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/viniciuscr">@viniciuscr</a> on 2025-05-13 14:31</div>
            <div class="timeline-body"><p>Here I have the output from uv export</p>
<pre><code># This file was autogenerated by uv via the following command:
#    uv export --frozen --no-dev --no-editable --package project_a -o dist/project_a/requirements.txt
./handlers/project_a
./libs/project_b
</code></pre>
<p>Something I also tried was to use uv pip compile
and to my surprise:</p>
<pre><code># This file was autogenerated by uv via the following command:
#    uv pip compile dist/project_a/requirements.txt
-e ./libs/project_b
    # via
    #   -r dist/project_a/requirements.txt
    #   project_a
./handlers/project_a
    # via -r dist/project_a/requirements.txt
</code></pre>
<p>An important info: both project where generated using <code>uv init --package</code>. As I plan to publish both</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/badrobit">@badrobit</a> on 2025-05-23 19:08</div>
            <div class="timeline-body"><p>I can also confirm we are seeing the same behavior that no matter what we try it cannot work with just the uv pip install</p>
<p>We did find a messy (and likely long term error prone workaround), we basically have two steps one to install the monorepo via the usual <code>uv export</code> and then <code>uv pip install &lt;requirements&gt;</code> we then add a follow on steps for:</p>
<pre><code class="language-shell">uv pip install dist/project_b*.whl
</code></pre>
<p>(stealing the example provided by others) If you do a second <code>uv pip install</code> and point to a build wheel file you will get the same as if the dependent library had been installed as non-editable in the first place. I don't think I can sell this as sustainable as this depends on no additional dependencies being added and will explode our <code>.justfiles</code> to account for the bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MKLeb">@MKLeb</a> on 2025-06-13 19:48</div>
            <div class="timeline-body"><p>We have found a solution to this by utilizing the <code>--no-deps</code> flag on the <code>uv pip install</code> and the <code>--no-editable</code> flag on <code>uv export</code>. This is currently working in our monorepo setup, and local dependencies are being installed as expected in their target virtual environment (in this example, <code>foo/packages</code>).</p>
<pre><code class="language-python">uv export --package foo --frozen --no-default-groups --no-editable -o requirements.txt
uv pip install --no-deps --no-installer-metadata --target foo/packages -r requirements.txt
</code></pre>
<p><code>uv export</code> should capture all dependencies already, thus the <code>--no-deps</code> optional is valid.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/viniciuscr">@viniciuscr</a> on 2025-07-14 08:16</div>
            <div class="timeline-body"><blockquote>
<p>We have found a solution to this by utilizing the <code>--no-deps</code> flag on the <code>uv pip install</code> and the <code>--no-editable</code> flag on <code>uv export</code>. This is currently working in our monorepo setup, and local dependencies are being installed as expected in their target virtual environment (in this example, <code>foo/packages</code>).</p>
<p>uv export --package foo --frozen --no-default-groups --no-editable -o requirements.txt
uv pip install --no-deps --no-installer-metadata --target foo/packages -r requirements.txt</p>
<p><code>uv export</code> should capture all dependencies already, thus the <code>--no-deps</code> optional is valid.</p>
</blockquote>
<p>the <code>--no-deps</code> works for me. I just think the hole thing is a little confusing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mlnrt">@mlnrt</a> on 2025-08-22 19:49</div>
            <div class="timeline-body"><p>Same here the <code>--no-deps</code> in <code>uv pip install</code> works for me, and I also find it confusing</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:26:37 UTC
    </footer>
</body>
</html>
