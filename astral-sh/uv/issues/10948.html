<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Best Practices for integrating uv with PYTHONPATH - astral-sh/uv #10948</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Best Practices for integrating uv with PYTHONPATH</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10948">#10948</a>
        opened by <a href="https://github.com/ClarkMyWords">@ClarkMyWords</a>
        on 2025-01-24 22:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ClarkMyWords">@ClarkMyWords</a> on 2025-01-24 22:21</div>
            <div class="timeline-body"><h3>Question</h3>
<p>Hello,</p>
<p>I'm working with <a href="https://docs.ros.org/en/humble/index.html">ROS 2 Humble</a>, largely in Python. I'm managing an environment for a few users, and I've chosen <code>uv</code> as our scheme for managing virtual environments.</p>
<p>ROS 2 <em>can</em> respect Python virtual environments, but it relies on whatever is set in PYTHONPATH for those. At the moment, I am having to manually set it as such:
<code>export PYTHONPATH=$PYTHONPATH:$VIRTUAL_ENV/lib/python3.10/site-packages</code></p>
<p>From <a href="https://github.com/astral-sh/uv/issues/9168">this issue</a> I understand that this isn't really functionallity in <code>uv</code>'s wheelhouse, but I'm wondering if there's a reasonable way  in <code>uv</code> to create some sort of hook that, after sourcing <code>.venv/bin/activate</code>, will add anything added by that venv to the PYTHONPATH? (Bonus points if this would also work for something installed via <code>uv pip install -e ...</code> because that doesn't place the editable package in the site-packages directory (for obvious reasons)).</p>
<p>I see that for something like <code>uv run ...</code> the <code>--env-file</code> argument could work, but, because of the constraints of my project, I'm using <code>uv</code> only for the virtual environment management, not for actually running anything.</p>
<p>Or, possibly, if there is any other wisdom or best-practices to dynamically set my PYTHONPATH with <code>uv</code>.</p>
<p>Thanks!</p>
<h3>Platform</h3>
<p>Ubuntu 22.04.5 LTS x86_64</p>
<h3>Version</h3>
<p>uv 0.5.24 (42fae925c 2025-01-23)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @ClarkMyWords on 2025-01-24 22:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ClarkMyWords on 2025-01-24 22:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @ClarkMyWords on 2025-01-24 22:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ClarkMyWords on 2025-01-28 20:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/borismo">@borismo</a> on 2025-02-04 04:53</div>
            <div class="timeline-body"><p>Hi, did you solve this? Curious to know how if you did.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ClarkMyWords">@ClarkMyWords</a> on 2025-02-04 17:28</div>
            <div class="timeline-body"><p>@borismo</p>
<p>Hi,</p>
<p>So, according to the ROS 2 documentation <a href="https://docs.ros.org/en/humble/How-To-Guides/Using-Python-Packages.html">here</a>, the venv should work out of the box. However, based on all of my testing, as well as <a href="https://robotics.stackexchange.com/questions/98214/how-to-use-python-virtual-environments-with-ros2">this stackexchange post</a> which first pointed me to <code>PYTHONPATH</code>, it is clear this isn't the case.</p>
<p>In my use-case, our system is fully containerized (due to the constraints of our institution, we are using <a href="https://apptainer.org/">apptainer</a> in lieu of Docker/on top of a docker image (for back-readers, I would be happy to discuss using ROS 2 in apptainer, but that's not specifically relevant to this issue).</p>
<p>Because it is containerized, we have decided that system-wide package installation is our best option, because that works out of the box. This should be fine containerized. I'm still using <code>uv</code> to manage the installation, but this way, I never have to source a venv or modify the <code>PYTHONPATH</code>.</p>
<p>So, in summary, because we were using a containerized environment anyway, I just ensured that Python packages were installed, with <code>uv pip</code>, systemwide. (In my specific case, this is an issue because our apptainer containers are read-only, so we have to rebuild the whole image to add more Python dependencies, but that is an issue we're taking up with our institution's security policy, and the system install would work fine in a Docker container.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:32:58 UTC
    </footer>
</body>
</html>
