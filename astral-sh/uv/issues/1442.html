<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement `--report` for `uv pip install` - astral-sh/uv #1442</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Implement `--report` for `uv pip install`</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/1442">#1442</a>
        opened by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a>
        on 2024-02-16 06:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2024-02-16 06:16</div>
            <div class="timeline-body"><p>From the <code>pip</code> docs:</p>
<blockquote>
<p>The <code>--report</code> option of the pip install command produces a detailed JSON report of what it did install (or what it would have installed, if used with the <code>--dry-run</code> option).</p>
</blockquote>
<p>This produces a nice JSON report that's essentially <code>pip compile</code> but with a different and more detailed output format.</p>
<h2>Related</h2>
<ul>
<li>https://github.com/astral-sh/uv/issues/1244</li>
</ul>
<h2>References:</h2>
<ul>
<li>https://pip.pypa.io/en/stable/cli/pip_install/#obtaining-information-about-what-was-installed</li>
<li>https://pip.pypa.io/en/stable/reference/installation-report/</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-02-16 06:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-02-17 11:36</div>
            <div class="timeline-body"><p>related https://github.com/astral-sh/uv/issues/411</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3199.html">astral-sh/uv#3199</a> on 2024-04-25 12:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yajo">@yajo</a> on 2024-06-25 11:50</div>
            <div class="timeline-body"><p>Do we have any current workaround for this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sfc-gh-nsharma">@sfc-gh-nsharma</a> on 2024-06-25 14:41</div>
            <div class="timeline-body"><p>+1, this feature will be very useful for us for creating reproducible environments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-25 14:42</div>
            <div class="timeline-body"><p>Can you expand on the use-case? Why would this be an output of <code>pip install</code> rather than <code>pip compile</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sfc-gh-nsharma">@sfc-gh-nsharma</a> on 2024-06-25 14:54</div>
            <div class="timeline-body"><p>We are basically trying to get parity with https://pip.pypa.io/en/stable/cli/pip_install/#obtaining-information-about-what-was-installed. The goal is to get the list of files that will be downloaded along with their SHA hashes (without actually creating the environemtn). We could use that to recreate the exact environment for CI/CD</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-25 15:07</div>
            <div class="timeline-body"><p>This sounds like the purpose of <code>uv pip compile</code> — I think this is just a flag in <code>pip install</code> because they don't have the <code>pip-compile</code> interface.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-25 15:45</div>
            <div class="timeline-body"><p>I think the difference is that compile won’t tell you the specific wheels or source distributions that you’d need to install for the current platform.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sfc-gh-nsharma">@sfc-gh-nsharma</a> on 2024-06-25 15:51</div>
            <div class="timeline-body"><p>Yes, <code>--dry-run</code> + <code>--report</code> has a very detailed machine-readable output.
https://pip.pypa.io/en/stable/reference/installation-report/#example</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2024-06-25 15:54</div>
            <div class="timeline-body"><blockquote>
<p>Can you expand on the use-case? Why would this be an output of <code>pip install</code> rather than <code>pip compile</code>?</p>
</blockquote>
<p>For us, we're PoCing a requirements-lock feature and we support two &quot;venv backends&quot;:</p>
<ul>
<li>virtualenv + pip</li>
<li>uv</li>
</ul>
<p>For the first one we were planning to use the <code>--report</code> output to get the resolved direct dependencies. The benefit of having this feature in uv would be writing the parse logic only once (for the JSON output). Without this, we either need a dependency on <code>pip-tools</code> and parse the same requirements.txt style output from both tools, or write different parsing logic for pip and uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yajo">@yajo</a> on 2024-06-26 11:20</div>
            <div class="timeline-body"><p>My use case is that I package a huge project with lots of dependencies (a meta-repo; some are editable) using https://github.com/nix-community/dream2nix. In Nix world, all files must either be built offline or hash-verified if online. The locking process uses pip and is terribly slow. I'd love to speed it up with uv, but uv lacks the report feature, which is the one used by the lock process to produce valid nix FODs.</p>
<p>I checked by using <code>uv pip compile --generate-hashes</code>, but the output is hard to parse and also doesn't have details about what files use what hashes. It's just a list of hashes but I don't know which is which. Also it seems to build wheels for sdists, when I'd be happy with just the hash of the sdist as <code>pip --dry-run --report</code> gets, as the real build is done later by nix anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-26 11:59</div>
            <div class="timeline-body"><blockquote>
<p>Also it seems to build wheels for sdists...</p>
</blockquote>
<p>(Just as an aside: you often need to build a wheel in order to perform dependency resolution.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../conda-incubator/conda-pypi/issues/14.html">conda-incubator/conda-pypi#14</a> on 2024-07-23 13:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yorickvP">@yorickvP</a> on 2024-08-14 08:33</div>
            <div class="timeline-body"><p>@yajo I implemented a uv solver with dream2nix at https://github.com/datakami/cognix/blob/main/modules/pip-uv/default.nix, but it requires a <a href="https://github.com/astral-sh/uv/compare/7dfb562585e75137226fa5e4dbcf248c816925c3...yorickvP:uv:yorickvp/dream2nix-resolver-2">patched uv</a></p>
<p>My patch isn't really upstreamable, but it would be great to instead have <code>--report</code> upstream.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../moreati/ansible-uv/issues/2.html">moreati/ansible-uv#2</a> on 2024-11-29 22:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/411.html">astral-sh/uv#411</a> on 2025-02-21 17:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:21 UTC
    </footer>
</body>
</html>
