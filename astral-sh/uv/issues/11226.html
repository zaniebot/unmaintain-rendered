<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv add seems to have a hard time with python version constraint - astral-sh/uv #11226</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv add seems to have a hard time with python version constraint</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11226">#11226</a>
        opened by <a href="https://github.com/Elmekior">@Elmekior</a>
        on 2025-02-04 20:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Elmekior">@Elmekior</a></div>
            <div class="timeline-body">Summary
<p>Hello everyone,</p>
<p>I was looking to use UV into our system because the speed gain is just... amazing to say the least. I looked a bit around but didn&#x27;t seem to find a relatable issue so I wanted to open this one. I tried to summarize the issue as much as possible.</p>
<p>Currently, I am trying to install a package with Pillow inside of my package with this information (we are using setup.cfg):</p>
<pre><code>[options]
install_requires=
pillow==7.2.0 ; python_version&lt;&quot;3.10&quot;
pillow==8.4.0 ; python_version&gt;=&quot;3.10&quot;
</code></pre>
<pre><code>example requirement.txt
internal_pkg_name==1.0.0
Pillow==7.2.0
</code></pre>
<p>In my requirement.txt file, I have the version of my package that I wanted to use and pillow==7.2.0. But, for some reason, it looks like UV tries to tell me that:</p>
<pre><code>No solution found when resolving dependencies for split &#x27;3.10&#x27;}==8.4.0 and your project depends on internal_pkg_name==1.0.0, we can conclude that your project depends on pillow==8.4.0.
And because your project depends on pillow==7.2.0, we can conclude that your project&#x27;s requirements are unsatisfiable. 
help: If you want to add the packag e regardless of the failed resolution,provide the `--frozen` flag to skip locking and syncing.
</code></pre>
<p>I am leaving some information blank for the default-index and index ( but we have our own )</p>
<p>The command I am trying to run :</p>
<pre><code>uv.exe add -r requirements.txt --default-index (Internal_index) --index-strategy unsafe-best-match --python 3.9.7 --python-preference only-managed --directory &quot;Path\to\a\directory&quot; --link-mode=copy --no-cache
</code></pre>
<p>Beforehand, I also make a uv init with a forced python 3.9.7 project and always give the python_version in all command lines.</p>
<p>I know that it says that I could just use --frozen, but, for me, this feels like a weird behavior that even tho everything is running in 3.9.7, it tells me the other version is a requirement.</p>
Platform
<p>Windows 11</p>
Version
<p>0.5.27</p>
Python version
<p>3.9.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/Elmekior">@Elmekior</a> on 2025-02-04 20:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-04 21:16</div>
            <div class="timeline-body"><p>Is some chunk of the error missing here?</p>
<blockquote>
<p>No solution found when resolving dependencies for split &#x27;3.10&#x27;}==8.4.0</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-04 21:18</div>
            <div class="timeline-body"><p>It&#x27;s pretty hard to tell what&#x27;s going on here. Do you think you could create a minimal project in a Git repository to demonstrate the issue?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Elmekior">@Elmekior</a> on 2025-02-04 21:23</div>
            <div class="timeline-body"><blockquote>
<p>Is some chunk of the error missing here?</p>
<blockquote>
<p>No solution found when resolving dependencies for split &#x27;3.10&#x27;}==8.4.0</p>
</blockquote>
</blockquote>
<p>Weirdly enough, that&#x27;s the error message I get from my system. I&#x27;ll try to make a more &#x27;barebone&#x27; test with UV directly and a git package. I&#x27;ll report back when those are setupped</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-04 21:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Elmekior">@Elmekior</a> on 2025-02-04 23:03</div>
            <div class="timeline-body"><p>I am sorry, after making some more investigation, I believe that this might be from a weird version in our pypi since I cannot seem to be able to reproduce this with a barebone package. I&#x27;ll close this and apologize for the noise and appreciate the quick reply. If I can find a better reproductible version of this issue, I&#x27;ll create another issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Elmekior">@Elmekior</a> on 2025-02-04 23:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:37:05 UTC
    </footer>
</body>
</html>
