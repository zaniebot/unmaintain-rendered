<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FRs: Commit lint and changelog generation - astral-sh/uv #6440</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>FRs: Commit lint and changelog generation</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/6440">#6440</a>
        opened by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a>
        on 2024-08-22 14:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2024-08-22 14:35</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>This issue is an extension of #6298 (version bumping) for related enhancements. Combining into one issue so as not to inundate the team (but can split into multiple issues if that is preferred).</p>
<p>Standards-compliant project management actions like auto-version bumping (<a href="https://semver.org/">SemVer</a>), changelog generation (<a href="https://keepachangelog.com/en/1.1.0/">Keep a Changelog</a>) and commit message linting (<a href="https://www.conventionalcommits.org/en/v1.0.0/">Conventional Commits</a>) might be good tasks for the project management tool to tackle and promote best practices for development. It would consolidate the tooling even further, save time for the developer, and reduce the cognitive load. Defining the rules and formats in <code>pyproject.toml</code> could provide consistency and configurability for any codebase.</p>
<h2>Example</h2>
<h3><code>pyproject.toml</code></h3>
<pre><code class="language-toml">[tool.uv.bump]
version-files = [&quot;src/project/__init__.py:__version__&quot;]
version-format = &quot;semver2&quot;

[tool.uv.commit]
lint-commits = true
commit-format = &quot;conventional-commits&quot;

[tool.uv.changelog]
generate-on-bump = true
include-date = true
date-format = &quot;iso8601&quot;

[tool.uv.changelog-map]
feat = &quot;‚≠ê Features&quot;
fix = &quot;üêõ Bug Fixes&quot;
chore = &quot;üßπ Chores&quot;
ci = &quot;üöÄ Continuous Integration&quot;
docs = &quot;üìö Documentation&quot;
perf = &quot;üî• Performance Improvements&quot;
refactor = &quot;üî® Refactoring&quot;
revert = &quot;üîÑ Reverts&quot;
style = &quot;üé® Styling&quot;
test = &quot;üß™ Tests&quot;
</code></pre>
<h3>Command line usage</h3>
<p>Commiting via <code>uv</code> will lint the commit message for applicable conventional commit tags and reject if there isn‚Äôt one. This can just shell out to git detected on the path.</p>
<pre><code>uv commit ‚Äúfix: Always invoke found interpreter when `uv run python` is used (#6363)‚Äù
</code></pre>
<p>or</p>
<pre><code>uv commit fix ‚ÄúAlways invoke ‚Ä¶‚Äù
</code></pre>
<p>Bumping will bump versions for all listed files or file sections (e.g. <code>__version__.py</code> or <code>__init__.py:__version__</code>). Not sure if there‚Äôs a consensus on the best place to put the version so <code>version-files</code> provides flexibility.</p>
<pre><code>uv bump
</code></pre>
<p>Changelog generation can also be its own command if <code>generate-on-bump</code> is not desired.</p>
<pre><code>uv changelog
</code></pre>
<h3>Generated changelog</h3>
<p><code>CHANGELOG.md</code></p>
<pre><code class="language-md"># Changelog

## 0.3.1 (2024-08-21)

### üêõ Bug Fixes

- Always invoke found interpreter when `uv run python` is used ([#6363](https://github.com/astral-sh/uv/pull/6363))

### üìö Documentation 

- Remove the preview default value of `python-preference` ([#6301](https://github.com/astral-sh/uv/pull/6301))
- Update env vars doc about `XDG_*` variables on macOS ([#6337](https://github.com/astral-sh/uv/pull/6337))
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2024-08-22 14:36</div>
            <div class="timeline-body"><p>See also: <a href="https://github.com/commitizen-tools/commitizen">Commitizen</a>, a tool that provides these capabilities.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @zanieb on 2024-08-22 15:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">projects</span> added by @zanieb on 2024-08-22 15:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 15:25</div>
            <div class="timeline-body"><p>This would be cool, of course. We use <a href="https://github.com/zanieb/rooster">rooster</a> right now, but it's not polished at all.</p>
<p>I think we need to focus on a lot of other things before this though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/deadnews">@deadnews</a> on 2024-08-22 15:51</div>
            <div class="timeline-body"><p>By the way, there is <a href="https://github.com/orhun/git-cliff">git-cliff</a>, and it works for any projects, not just python ones.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phi-friday">@phi-friday</a> on 2024-10-17 12:08</div>
            <div class="timeline-body"><p>https://github.com/astral-sh/uv/issues/6298#issuecomment-2350938745</p>
<blockquote>
<p>Using uvx hatch version ... is mostly fine, but I can't use it when it's a stub only package because there is no *.py.</p>
</blockquote>
<p>I need a way to work around this case.
It would be great if this was considered.
As someone else pointed out, it can be solved by doing the following, but it's ugly.
https://github.com/astral-sh/uv/issues/6298#issuecomment-2411738585</p>
<blockquote>
<p>As a workaround, I use this in my project:
<code>sed -i -e &quot;s/0.0.0/${GITHUB_REF#refs/*/}/&quot; pyproject.toml</code></p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mayurankv">@mayurankv</a> on 2025-10-17 14:35</div>
            <div class="timeline-body"><p>I too would love this!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:26:12 UTC
    </footer>
</body>
</html>
