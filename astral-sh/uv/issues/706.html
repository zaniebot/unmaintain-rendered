<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Display better error when index does not support requested format - astral-sh/uv #706</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Display better error when index does not support requested format</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/706">#706</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2023-12-19 18:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-19 18:45</div>
            <div class="timeline-body"><p>I haven't found an example index that returns the correct response type yet, but in theory content negotiation will result in a 406 or 415 if the requested response format is not supported e.g. https://github.com/devpi/devpi/issues/1020</p>
<p>We should explain that the package index does not support the required specification or suggest including <code>simple</code> in the index URL.</p>
<p>May be irrelevant with the implementation of #412</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-12-21 21:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @charliermarsh on 2023-12-21 21:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-24 21:52</div>
            <div class="timeline-body"><p>We do now show a custom message at least for indexes that return a default type: &quot;error: Unsupported <code>Content-Type</code> &quot;text/html&quot; for https://download.pytorch.org/whl/jinja2/. Index must support JSON or HTML responses.&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-24 21:53</div>
            <div class="timeline-body"><p>If the server returns 406 or 300 (per <a href="https://peps.python.org/pep-0691/#version-format-selection">PEP 691</a>), I think we'll just error and show the server response. Maybe sufficient? I also don't know of servers that use those responses unfortunately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-24 21:57</div>
            <div class="timeline-body"><p>I'm okay with the current improvements, presumedly the 406 would tell you that the content type is unsupported (I would hope)!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-12-24 21:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/705.html">astral-sh/uv#705</a> on 2023-12-25 00:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4907.html">astral-sh/uv#4907</a> on 2024-07-24 07:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:17 UTC
    </footer>
</body>
</html>
