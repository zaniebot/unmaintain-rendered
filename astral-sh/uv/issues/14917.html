<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pull in upstream patches for nushell activation script - astral-sh/uv #14917</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Pull in upstream patches for nushell activation script</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14917">#14917</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-07-26 19:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-26 19:32</div>
            <div class="timeline-body"><blockquote>
<p>Thanks IIRC uv used to upstream from the virtualenv one that also got fixed: https://github.com/pypa/virtualenv/commit/5e875b3b89ff5b7c11c6e7b6cdcd688009e1a620</p>
</blockquote>
<p><em>Originally posted by @melMass in https://github.com/astral-sh/uv/issues/14914#issuecomment-3122156446</em></p>
<p>See</p>
<ul>
<li>https://github.com/pypa/virtualenv/pull/2910</li>
<li>#14888</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @zanieb on 2025-07-26 19:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @zanieb on 2025-07-26 19:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/2bndy5">@2bndy5</a> on 2025-08-14 02:54</div>
            <div class="timeline-body"><p>Upstream <code>virtualenv</code> has already released their fix for this (as of <a href="https://github.com/pypa/virtualenv/releases/tag/20.33.0">v20.33.0</a>)</p>
<p>@zanieb I see the &quot;help wanted&quot; label here and in #14888 . How can I help?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-14 04:16</div>
            <div class="timeline-body"><p>Thanks for offerring!</p>
<p>I think someone just needs to validate and pull in those upstream changes into our virtual environment activation scripts. Ideally, we'd have some test coverage that makes it apparent we're resolving the problem.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/2bndy5">@2bndy5</a> on 2025-08-14 05:51</div>
            <div class="timeline-body"><p>Ok, I'm looking into it. FWIW, I'll be pulling in changes from upstream latest stable release (v20.34.0 at time of writing).</p>
<p>As for the test idea, ~it may be difficult/complex to capture stderr from rust unit test(s). Maybe I can utilize <a href="https://doc.rust-lang.org/std/process/struct.Command.html"><code>std::process::Command</code></a> to ensure the script(s) execute without problems. But this would involve adjusting the CI to ensure certain tools (eg various third-party shells) are installed for certain platforms, and the CI already looks very complex for a newcomer; I'm no stranger to GitHub Actions, though I do find the .github/workflows/setup-dev-drive.ps1 script rather foreign.~</p>
<p>EDIT: I see now that integration tests are written directly in the CI.yml workflow (an overwhelmingly long file). While unconventional per rust standards, this makes writing integration tests easier. I'll look at adding tests for each <em>supported</em> shell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-09-05 21:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:26:44 UTC
    </footer>
</body>
</html>
