<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Issue Fetching Packages from Devpi Server Using uv and --index-url - astral-sh/uv #10567</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Issue Fetching Packages from Devpi Server Using uv and --index-url</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10567">#10567</a>
        opened by <a href="https://github.com/ALEXRG27">@ALEXRG27</a>
        on 2025-01-13 15:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ALEXRG27">@ALEXRG27</a></div>
            <div class="timeline-body"><p>Description:
I am hosting all my packages on a Devpi server, and I have configured pip.ini as shown below to manage the sources. However, when I try to install the experimentbase package, it does not fetch correctly. While I can see the information on the index, the installation fails. Below is the relevant configuration and logs:</p>
<p>pip.ini Configuration:
[global]
index-url = http://:80/nightly/dist
trusted-host = </p>
<p>[install]
extra-index-url =
http://:80/releases/dist
https://pypi.org/simple
Steps to Reproduce:</p>
<p>Set up a virtual environment using uv.
Activate the environment: .\env_uv\Scripts\activate.
Try installing the package:
uv pip install experimentbase --index-url=http:///nightly/dist -v.
Logs:
(env_uv) PS C:\jenkins\workspace\New folder&gt; uv venv env_uv
Using CPython 3.11.1 interpreter at: C:\Program Files\Python311\python.exe
Creating virtual environment at: env_uv
Activate with: env_uv\Scripts\activate
(env_uv) PS C:\jenkins\workspace\New folder&gt; .\env_uv\Scripts\activate
(env_uv) PS C:\jenkins\workspace\New folder&gt; uv pip install experimentbase --index-url=http:///nightly/dist -v<br>
DEBUG uv 0.5.18 (27d1bad55 2025-01-11)
DEBUG Searching for default Python interpreter in virtual environments
DEBUG Found <code>cpython-3.11.1-windows-x86_64-none</code> at <code>C:\jenkins\workspace\New folder\env_uv\Scripts\python.exe</code> (active virtual environment)
Using Python 3.11.1 environment at: env_uv
DEBUG Acquired lock for <code>env_uv</code>
DEBUG At least one requirement is not satisfied: experimentbase
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.11.1
DEBUG Solving with target Python version: &gt;=3.11.1
DEBUG Adding direct dependency: experimentbase*
DEBUG Found stale response for: http:///nightly/dist/experimentbase/
DEBUG Sending revalidation request for: http:///nightly/dist/experimentbase/
DEBUG Found modified response for: http:///nightly/dist/experimentbase/
WARN Skipping file for experimentbase:
WARN Skipping file for experimentbase:
WARN Skipping file for experimentbase:
WARN Skipping file for experimentbase: +searchhelp
WARN Skipping file for experimentbase: +status
WARN Skipping file for experimentbase: 0.0.1.303.dev0+g9b572e0ac7
WARN Skipping file for experimentbase: dist
WARN Skipping file for experimentbase: dist
WARN Skipping file for experimentbase: experimentbase
WARN Skipping file for experimentbase: experimentbase
WARN Skipping file for experimentbase: latest
WARN Skipping file for experimentbase: nightly
WARN Skipping file for experimentbase: pypi
DEBUG Searching for a compatible version of experimentbase (*)
DEBUG No compatible version found for: experimentbase
× No solution found when resolving dependencies:
╰─▶ Because there are no versions of experimentbase and you require experimentbase, we can conclude that your requirements<br>
are unsatisfiable.
DEBUG Released lock at <code>C:\workspace\env_uv\.lock</code>
Expected Behavior:
The experimentbase package should be installed from the specified Devpi server.</p>
<p>Actual Behavior:
The package installation fails with multiple warnings related to missing files and no compatible version found.</p>
<p>I would appreciate it if you could investigate why the packages are not being fetched from the Devpi server. Additionally, I would be grateful for any recommendations regarding configuration changes or troubleshooting steps that might help resolve the issue. The installation also fails when specifying the version:
uv pip install experimentbase==0.0.1.303.dev0+g9b572e0ac7 --index-url=http:///nightly/dist -v</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-13 15:32</div>
            <div class="timeline-body"><p>We don&#x27;t read from <code>pip.ini</code>. Are you expecting it to? Separately, it looks like there&#x27;s some mismatch between your local registry and the URL you&#x27;re passing in. These should be filenames:</p>
<pre><code>WARN Skipping file for experimentbase:
WARN Skipping file for experimentbase:
WARN Skipping file for experimentbase:
WARN Skipping file for experimentbase: +searchhelp
WARN Skipping file for experimentbase: +status
WARN Skipping file for experimentbase: 0.0.1.303.dev0+g9b572e0ac7
WARN Skipping file for experimentbase: dist
WARN Skipping file for experimentbase: dist
WARN Skipping file for experimentbase: experimentbase
WARN Skipping file for experimentbase: experimentbase
WARN Skipping file for experimentbase: latest
WARN Skipping file for experimentbase: nightly
WARN Skipping file for experimentbase: pypi
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-13 15:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ALEXRG27">@ALEXRG27</a> on 2025-01-13 15:48</div>
            <div class="timeline-body"><p>I was providing uv with the --url defined in pip.ini I was not expecting uv to use pip.ini
But I was expecting both flows to work
PS C:\jenkins\workspace\New folder&gt; python -m venv env
PS C:\jenkins\workspace\New folder&gt; .\env\Scripts\activate
(env) PS C:\jenkins\workspace\New folder&gt; pip install experimentbase
Looking in indexes: http://:80/nightly/dist, http://:80/releasebeta/dist, https://pypi.org/simple
Collecting experimentbase
Using cached http:///nightly/dist/%2Bf/b42/9ca544189b0c9/experimentbase-0.0.1.303.dev0%2Bg9b572e0ac7-py3-none-any.whl (4.6 kB)
Installing collected packages: experimentbase
Successfully installed experimentbase-0.0.1.303.dev0+g9b572e0ac7</p>
<p>Doing exaclty this with uv venv env_uv , activate, and then uv pip install specifying the url of my package server, It it not fetching the package when it is there. I was expecting to work the same as pip.</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/2a32823b-544f-4035-bbe1-7738d7d8f3f8"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-13 15:49</div>
            <div class="timeline-body"><p>I&#x27;ll need something I can run myself to reproduce, like a Git repo or a Dockerfile or a series of specific commands.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-13 16:05</div>
            <div class="timeline-body"><p>Are  you using the <code>/simple</code> suffix on your devpi index URL?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ALEXRG27">@ALEXRG27</a> on 2025-01-14 09:50</div>
            <div class="timeline-body"><p>Thank you so much, Zanieb, for pointing that out! It turns out that using /simple doesn’t work, but /+simple does. I’m still unsure why this is necessary at all.</p>
<p>Here’s an example of the issue and how it was resolved:</p>
<p><img src="https://github.com/user-attachments/assets/0380daca-f346-40c0-a001-d0e7666627f9" alt="Image"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-31 17:33</div>
            <div class="timeline-body"><p>Thanks for following up! We are tracking support for the non-simple index in <a href="https://github.com/astral-sh/uv/issues/4907">astral-sh/uv#4907</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-31 18:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:36:39 UTC
    </footer>
</body>
</html>
