<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support for project tool/plugin dependencies in pyproject.toml - astral-sh/uv #13861</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support for project tool/plugin dependencies in pyproject.toml</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/13861">#13861</a>
        opened by <a href="https://github.com/rabader">@rabader</a>
        on 2025-06-05 14:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/rabader">@rabader</a></div>
            <div class="timeline-body">Summary
<p>I have a project that has dependencies from a private google artifact registry repo. When a new user clones the repo and runs &quot;uv sync&quot; to create a venv, it will fail (without much information for why it failed), unless they first pre-install keyring and the Artifact registry plugin with:</p>
<pre><code># Pre-install keyring and Artifact Registry plugin from the public PyPI
uv tool install keyring --with keyrings.google-artifactregistry-auth

# Enable keyring authentication
export UV_KEYRING_PROVIDER=subprocess

# Set the username for the index
export UV_INDEX_PRIVATE_REGISTRY_USERNAME=oauth2accesstoken
</code></pre>
<p>I already have a section in my pyproject.toml file which includes:</p>
<pre><code>[tool.uv]
keyring-provider = &quot;subprocess&quot;
</code></pre>
<p>In poetry, they include this functionality:</p>
<pre><code>[tool.poetry.requires-plugins]
keyring = &quot;^23.9.0&quot;
&quot;keyrings.google-artifactregistry-auth&quot; = &quot;^1.1.0&quot;
</code></pre>
<ul>
<li>with the above included in your pyproject.toml in poetry, running the &quot;sync&quot; command first ensures that your poetry installation has the necessary plugins included, and if not, installs them FIRST, before attempting to sync, which would take care of this problem. This request is to add that functionality into uv as well.</li>
</ul>
Example
<p>Add support for a new section in uv pyproject.toml file that&#x27;s something like this:</p>
<pre><code>[uv.tool]
required-plugins = [
    keyring = &quot;^23.9.0&quot;,
    &quot;keyrings.google-artifactregistry-auth&quot; = &quot;^1.1.0&quot;
]
</code></pre>
<p>And the uv sync command should first check your uv install to determine if the required plugins are installed before attempting to sync, and if not, should install the required plugins, before proceeding to sync/create the venv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/rabader">@rabader</a> on 2025-06-05 14:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Support for project tool dependencies in pyproject.toml&quot; to &quot;Support for project tool/plugin dependencies in pyproject.toml&quot; by <a href="https://github.com/rabader">@rabader</a> on 2025-06-05 14:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-05 14:56</div>
            <div class="timeline-body"><p>Thanks for sharing your use-cases!</p>
<p>Related</p>
<ul>
<li>#3560</li>
</ul>
<p>We&#x27;ve also discussed a static definition of keyring environments specifically.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rabader">@rabader</a> on 2025-06-05 15:02</div>
            <div class="timeline-body"><p>Thanks for taking a look! For now, I&#x27;m working around this with instructions in a README file, but it would be great if we could ensure that the same tool versions are being used on all of our devs&#x27; systems.</p>
<p>And just to add a bit more clarity, the order seems to matter here. I can&#x27;t just add the keyrings packages as dependencies (uv sync fails). The tools need to be installed before syncing.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:56 UTC
    </footer>
</body>
</html>
