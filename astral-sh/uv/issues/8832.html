<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv unable to download python due to corp proxy certificate - astral-sh/uv #8832</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv unable to download python due to corp proxy certificate</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8832">#8832</a>
        opened by <a href="https://github.com/bouianpe">@bouianpe</a>
        on 2024-11-05 17:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bouianpe">@bouianpe</a> on 2024-11-05 17:08</div>
            <div class="timeline-body"><p>Hi, I've looking into switching over from rye to uv for some of our projects for a bit, and I think the only thing stopping us now is that uv fails to install python in our corporate environment due to corporate proxy certificates. Rye is able to install python without those same issues, so it is able to find / load those certificates somewhere.
There are no issues adding / syncing / locking dependencies, both from PyPI and private Gitlab package repositories.</p>
<p>rye</p>
<blockquote>
<p>$ rye toolchain fetch cpython@3.11.9
Downloading cpython@3.11.9
Checking checksum
Unpacking
Downloaded cpython@3.11.9</p>
</blockquote>
<p>uv</p>
<blockquote>
<p>$ uv python install -v cpython-3.11.10
<strong>DEBUG uv 0.4.30 (61ed2a236 2024-11-04)</strong>
DEBUG Acquired lock for <code>C:\Users\bouianpe\AppData\Roaming\uv\python</code>
DEBUG No installation found for request <code>cpython-3.11.10-any-any-any</code>
DEBUG Found download <code>cpython-3.11.10-windows-x86_64-none</code> for request <code>cpython-3.11.10-any-any-any</code>
DEBUG Using request timeout of 30s
DEBUG Transient request failure for https://github.com/indygreg/python-build-standalone/releases/download/20241016/cpython-3.11.10%2B20241016-x86_64-pc-windows-msvc-install_only_stripped.tar.gz, retrying: error sending request for url (https://github.com/indygreg/python-build-standalone/releases/download/20241016/cpython-3.11.10%2B20241016-x86_64-pc-windows-msvc-install_only_stripped.tar.gz)
Caused by: client error (Connect)
Caused by: invalid peer certificate: UnknownIssuer
DEBUG Transient request failure for https://github.com/indygreg/python-build-standalone/releases/download/20241016/cpython-3.11.10%2B20241016-x86_64-pc-windows-msvc-install_only_stripped.tar.gz, retrying: error sending request for url (https://github.com/indygreg/python-build-standalone/releases/download/20241016/cpython-3.11.10%2B20241016-x86_64-pc-windows-msvc-install_only_stripped.tar.gz)
Caused by: client error (Connect)
Caused by: invalid peer certificate: UnknownIssuer
DEBUG Transient request failure for https://github.com/indygreg/python-build-standalone/releases/download/20241016/cpython-3.11.10%2B20241016-x86_64-pc-windows-msvc-install_only_stripped.tar.gz, retrying: error sending request for url (https://github.com/indygreg/python-build-standalone/releases/download/20241016/cpython-3.11.10%2B20241016-x86_64-pc-windows-msvc-install_only_stripped.tar.gz)
Caused by: client error (Connect)
Caused by: invalid peer certificate: UnknownIssuer
DEBUG Transient request failure for https://github.com/indygreg/python-build-standalone/releases/download/20241016/cpython-3.11.10%2B20241016-x86_64-pc-windows-msvc-install_only_stripped.tar.gz, retrying: error sending request for url (https://github.com/indygreg/python-build-standalone/releases/download/20241016/cpython-3.11.10%2B20241016-x86_64-pc-windows-msvc-install_only_stripped.tar.gz)
Caused by: client error (Connect)
Caused by: invalid peer certificate: UnknownIssuer
error: Failed to install cpython-3.11.10-windows-x86_64-none
Caused by: Failed to download https://github.com/indygreg/python-build-standalone/releases/download/20241016/cpython-3.11.10%2B20241016-x86_64-pc-windows-msvc-install_only_stripped.tar.gz
Caused by: Request failed after 3 retries
Caused by: error sending request for url (https://github.com/indygreg/python-build-standalone/releases/download/20241016/cpython-3.11.10%2B20241016-x86_64-pc-windows-msvc-install_only_stripped.tar.gz)
Caused by: client error (Connect)
Caused by: invalid peer certificate: UnknownIssuer
DEBUG Released lock at <code>C:\Users\bouianpe\AppData\Roaming\uv\python\.lock</code></p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-05 17:20</div>
            <div class="timeline-body"><p>Have you used the <code>--native-tls</code> flag?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-11-05 17:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bouianpe">@bouianpe</a> on 2024-11-05 17:23</div>
            <div class="timeline-body"><p>Well, that did the trick, <em>much</em> appreciated. Looks like I need to look over the docs some more for other things I may have missed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @bouianpe on 2024-11-05 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-05 17:23</div>
            <div class="timeline-body"><p>No problem! I'd recommend putting that in a global configuration file if you're using corporate proxies.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 04:39:01 UTC
    </footer>
</body>
</html>
