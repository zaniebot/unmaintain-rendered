```yaml
number: 2527
title: uv ignores packages installed in lib64/
type: issue
state: closed
author: danielhollas
labels:
  - bug
  - compatibility
assignees: []
created_at: 2024-03-18T22:08:47Z
updated_at: 2024-03-19T03:06:17Z
url: https://github.com/astral-sh/uv/issues/2527
synced_at: 2026-01-10T01:57:06Z
```

# uv ignores packages installed in lib64/

---

_Issue opened by @danielhollas on 2024-03-18 22:08_

On Fedora 39 (and presumably some other distros), Python packages can be installed in two directories, lib/ and lib64. E.g. system packages can be both in:
- /usr/lib/python3.12/site-packages
- /usr/lib64/python3.12/site-packages

The same applies for venvs, including venvs managed by uv.

It seems that the location is determined by the presence of C-extensions: pure python packages go to `lib`, while those containing native code go to platform-specific directory in `lib64`. See https://docs.fedoraproject.org/en-US/packaging-guidelines/Python/#_mandatory_macros

uv pip install handles the installation correctly, e.g.

```console
$ uv venv --seed
$ uv pip install numpy  
Resolved 4 packages in 25ms
Installed 4 packages in 13ms
 + annotated-types==0.6.0
 + pydantic==2.6.4
 + pydantic-core==2.16.3
 + typing-extensions==4.10.0
 ```

This will install `pydantic_core` into `.venv/lib64/python3.12/site-packages/` and the rest into `.venv/lib/python3.12/site-packages/`

However, running `uv pip list` omits `pydantic-core`
```console
$ uv pip list
Package           Version
----------------- -------
annotated-types   0.6.0
pip               24.0
pydantic          2.6.4
typing-extensions 4.10.0
```

Similarly, `uv pip show pydantic-core` does not find the package, and
```
$ uv pip check
Checked 4 packages in 0.57ms
Found 1 incompatibility
The package `pydantic` requires `pydantic-core ==2.16.3`, but it's not installed.
```

The equivalent pip commands all work as expected.

uv version: 0.1.22

---

_Assigned to @charliermarsh by @charliermarsh on 2024-03-18 22:17_

---

_Comment by @charliermarsh on 2024-03-18 22:18_

Thanks, I’ve been meaning to fix this.

---

_Comment by @charliermarsh on 2024-03-18 22:20_

Do you have a minimal Dockerfile that could replicate it?

---

_Comment by @charliermarsh on 2024-03-18 22:20_

(On my distros, and in general, purelib and platlib tend to be set to the same directory, but as you can see here it’s not _required_ to be.)

---

_Label `bug` added by @charliermarsh on 2024-03-18 22:21_

---

_Label `compatibility` added by @charliermarsh on 2024-03-18 22:21_

---

_Comment by @danielhollas on 2024-03-18 22:23_

> Do you have a minimal Dockerfile that could replicate it?

I don't sorry, running on my local machine. I guess any fedora image should work like this?

I did a little bisection and interestingly, prior to version 0.1.12, `uv` installed everything to `lib/` so this was not a problem.

There were a lot of big changes in that releases so it's not immediately apparent which PR introduced the `lib/` `lib64/` split.

---

_Comment by @charliermarsh on 2024-03-18 22:26_

Yeah installing everything into `lib/` was also wrong, but I guess it was "consistently wrong" so this problem didn't show up :)

---

_Referenced in [astral-sh/uv#2537](../../astral-sh/uv/pulls/2537.md) on 2024-03-19 02:53_

---

_Closed by @charliermarsh on 2024-03-19 03:06_

---
