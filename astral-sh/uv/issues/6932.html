<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Option to stop `uv self update` from adding `. $HOME/.local/share/cargo/env`? - astral-sh/uv #6932</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Option to stop `uv self update` from adding `. $HOME/.local/share/cargo/env`?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/6932">#6932</a>
        opened by <a href="https://github.com/baggiponte">@baggiponte</a>
        on 2024-09-02 09:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/baggiponte">@baggiponte</a> on 2024-09-02 09:49</div>
            <div class="timeline-body"><p>Ciao! With rust on my machine already, my shell already sources the <code>cargo/env</code> script. Every time that I upgrade uv to a newer version with <code>uv self update</code>, the line is added to my zshrc and fish conf dir (which I do not use). This is absolutely nothing high priority, but I was wondering if you would consider setting an option to disable this behaviour.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AbdealiLoKo">@AbdealiLoKo</a> on 2024-09-02 12:59</div>
            <div class="timeline-body"><p>I think you may be looking for <code>--no-modify-path</code> ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/baggiponte">@baggiponte</a> on 2024-09-02 14:53</div>
            <div class="timeline-body"><blockquote>
<p>I think you may be looking for <code>--no-modify-path</code> ?</p>
</blockquote>
<p>Interesting. I don't see it as an option for <code>uv self update</code> though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Option to stop `uv` from adding `. $HOME/.local/share/cargo/env`?" to "Option to stop `uv self update` from adding `. $HOME/.local/share/cargo/env`?" by @baggiponte on 2024-09-02 14:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">upstream</span> added by @charliermarsh on 2024-09-02 17:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">release</span> added by @charliermarsh on 2024-09-02 17:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tpgillam">@tpgillam</a> on 2024-09-04 08:03</div>
            <div class="timeline-body"><p>Seconded - I upgraded from <code>uv</code> 0.4.3 -&gt; 0.4.4 just now with <code>uv self update</code>, and it appended <code>~/.bashrc</code> with:</p>
<pre><code>
. &quot;$HOME/.cargo/env&quot;
</code></pre>
<p>I would certainly prefer if the <code>self update</code> command by default did not modify any configuration files. My reasoning is that, if updating, the user has presumably already set their paths in the way that they want (in my case I want my <code>.bashrc</code> portable between different machines, so I don't put any paths directly in that file).</p>
<p>Only a small niggle though. I just have to do a <code>git restore</code> on it every time I upgrade, which is mildly inconvenient at worst!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/baggiponte">@baggiponte</a> on 2024-09-04 08:14</div>
            <div class="timeline-body"><p>Maybe one could do <code>uv self update --ensurepath</code> or a flag like that and have this behaviour to be opt-in.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-04 12:55</div>
            <div class="timeline-body"><p>Looking into upstream support for this — I don't think we can add it until they do.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-05 14:09</div>
            <div class="timeline-body"><p>Can you try setting <code>INSTALLER_NO_MODIFY_PATH=1</code> during the update?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tpgillam">@tpgillam</a> on 2024-09-05 15:30</div>
            <div class="timeline-body"><p>I'm on a different machine today (Fedora 39), where it doesn't try to modify <code>~/.bashrc</code>, but instead creates or modifies <code>~/.profile</code></p>
<blockquote>
<p>Can you try setting INSTALLER_NO_MODIFY_PATH=1 during the update?</p>
</blockquote>
<p>Yes - this seems to do the trick (installed 0.4.4 and tested on <code>uv self upgrade</code> thereafter).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-05 15:35</div>
            <div class="timeline-body"><p>Great — we can document that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @zanieb on 2024-09-05 15:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7090.html">astral-sh/uv#7090</a> on 2024-09-05 16:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-09-05 16:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/baggiponte">@baggiponte</a> on 2024-09-06 09:59</div>
            <div class="timeline-body"><p>Confirm too, setting <code>INSTALLER_NO_MODIFY_PATH=1</code> works :)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:22 UTC
    </footer>
</body>
</html>
