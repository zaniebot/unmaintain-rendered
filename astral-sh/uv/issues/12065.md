```yaml
number: 12065
title: Pinning Indirect dependencies to index does not work
type: issue
state: closed
author: 07pepa
labels:
  - bug
assignees: []
created_at: 2025-03-08T06:50:52Z
updated_at: 2025-03-08T14:15:33Z
url: https://github.com/astral-sh/uv/issues/12065
synced_at: 2026-01-10T01:57:27Z
```

# Pinning Indirect dependencies to index does not work

---

_Issue opened by @07pepa on 2025-03-08 06:50_

### Summary

consider this pyproject.toml

```toml
[project]
name = "test"
version = "0.1.0"
description = "test"
requires-python = ">=3.12,<3.13"
dependencies = [
    "docling[tesserocr]>=2.25.1",
]

[tool.uv]
package = false

[tool.uv.sources]
torch = { index = "pytorch" }

[[tool.uv.index]]
name = "pypi"
url = "https://pypi.org/simple"

[[tool.uv.index]]
name = "pytorch"
url = "https://download.pytorch.org/whl/cpu"
```

but it produces lockfile with
```lock
...
[[package]]
name = "torch"
version = "2.6.0"
source = { registry = "https://pypi.org/simple" }
...
```

this is likely unexpected

### Platform

Darwin 24.3.0 arm64

### Version

uv 0.6.5 (Homebrew 2025-03-06)

### Python version

Python 3.12.4

---

_Label `bug` added by @07pepa on 2025-03-08 06:50_

---

_Renamed from "Pining Indirect dependencies does not work" to "Pining Indirect dependencies to index does not work" by @07pepa on 2025-03-08 06:51_

---

_Renamed from "Pining Indirect dependencies to index does not work" to "Pinning Indirect dependencies to index does not work" by @AlexWaygood on 2025-03-08 09:58_

---

_Comment by @charliermarsh on 2025-03-08 14:15_

Thanks -- this is a duplicate of #8253.

---

_Closed by @charliermarsh on 2025-03-08 14:15_

---
