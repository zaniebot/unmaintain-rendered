<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Will the cache be used if the package with the same version number is installed in different Python version virtual environments? - astral-sh/uv #10535</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Will the cache be used if the package with the same version number is installed in different Python version virtual environments?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10535">#10535</a>
        opened by <a href="https://github.com/jarlor">@jarlor</a>
        on 2025-01-12 05:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jarlor">@jarlor</a></div>
            <div class="timeline-body"><p>I initialized two uv projects. Project A uses python3.11 via <code>uv init -p 3.11</code>. Project B uses python 3.10 via <code>uv init -p 3.10</code>.</p>
<p>I installed transformers==4.48.0 in project A via <code>uv add transformers==4.48.0</code>. After the installation was successful, I could see that transformer==4.48.0 was already in the cache directory.</p>
<p>I continued to try to install transformers==4.48.0 in project B via <code>uv add transformers==4.48.0</code>. I found that it <strong>re-downloaded</strong> transformers==4.48.0 instead of using the cache.</p>
<p>I want to know if this is normal? Can I use any command line to control the use of cache instead of re-downloading when installing transformers==4.48.0 in B.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-12 16:07</div>
            <div class="timeline-body"><p>How did you conclude that it's re-downloading transformers==4.48.0?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-12 20:59</div>
            <div class="timeline-body"><p>So, if I do this in two different projects, the first shows:</p>
<pre><code>Resolved 19 packages in 243ms
Prepared 9 packages in 594ms
Installed 17 packages in 73ms
 + certifi==2024.12.14
 + charset-normalizer==3.4.1
 + filelock==3.16.1
 + fsspec==2024.12.0
 + huggingface-hub==0.27.1
 + idna==3.10
 + numpy==2.2.1
 + packaging==24.2
 + pyyaml==6.0.2
 + regex==2024.11.6
 + requests==2.32.3
 + safetensors==0.5.2
 + tokenizers==0.21.0
 + tqdm==4.67.1
 + transformers==4.48.0
 + typing-extensions==4.12.2
 + urllib3==2.3.0
</code></pre>
<p>Then the second hows:</p>
<pre><code>Resolved 19 packages in 74ms
Prepared 3 packages in 113ms
Installed 15 packages in 28ms
 + certifi==2024.12.14
 + charset-normalizer==3.4.1
 + filelock==3.16.1
 + fsspec==2024.12.0
 + huggingface-hub==0.27.1
 + idna==3.10
 + pyyaml==6.0.2
 + regex==2024.11.6
 + requests==2.32.3
 + safetensors==0.5.2
 + tokenizers==0.21.0
 + tqdm==4.67.1
 + transformers==4.48.0
 + typing-extensions==4.12.2
 + urllib3==2.3.0
</code></pre>
<p>The <code>Prepared 3 packages</code> indicates that only three new packages were downloaded -- the rest came from the cache. This makes sense, since <em>some</em> of the dependencies are probably specific to the Python version, and so we have to download new builds for Python 3.11 when re-running <code>uv add</code> in the 3.11 project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2025-01-13 02:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cache</span> added by @charliermarsh on 2025-01-13 02:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jarlor">@jarlor</a> on 2025-01-13 05:23</div>
            <div class="timeline-body"><p>Thank for u replyÔºÅ
Actually i don't know <code>Prepared xx packages</code> means xx packages were downloaded.
I remember that when I was installing in project B, the progress bar of the download package flashed by. Because the speed was so fast, I couldn't tell whether it was downloading additional new packages or using the cache.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jarlor on 2025-01-13 05:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:16 UTC
    </footer>
</body>
</html>
