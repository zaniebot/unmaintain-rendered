<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use relative paths for local files when exporting `pylock.toml` - astral-sh/uv #16299</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use relative paths for local files when exporting `pylock.toml`</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/16299">#16299</a>
        opened by <a href="https://github.com/ncoghlan">@ncoghlan</a>
        on 2025-10-14 17:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ncoghlan">@ncoghlan</a> on 2025-10-14 17:31</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>The <code>pylock.toml</code> format supports relative file paths (defining them to be relative to the lock file).</p>
<p>When <code>uv lock</code> is run with local wheel directories configured via either <code>find-links</code> or flat file indexes, <code>uv export</code> currently emits <code>pylock.toml</code> files with absolute paths, so they end up coupled to the specific build location, rather than allowing the lock file and the local wheels it references to be published together using relative paths.</p>
<p>This is a feature request to have it emit paths relative to the exported <code>pylock.toml</code> file instead. Whether that's opt-in or just new standard behaviour would depend on if there are any expected use cases for publishing absolute paths that would <em>break</em> if a relative path was specified instead.</p>
<p>(I considered commenting on #13239 instead of filing a new feature request, but this feels like something narrower in scope that's less likely to have unwanted side effects, since it would only affect exported <code>pylock.toml</code> files, not <code>uv.lock</code> itself)</p>
<h3>Example</h3>
<p>This specifically came up when migrating <code>venvstacks</code> from the legacy <code>requirements.txt</code> format over to <code>pylock.toml</code>: https://github.com/lmstudio-ai/venvstacks/issues/291</p>
<p>The expectation for the <code>venvstacks</code> use is that the layer lock files will be checked in, and the required locally built wheels (if that features is used) will be made available in a consistent location relative to those checked in files (perhaps via git-lfs, perhaps via separate downloads), rather than publishing them to a compliant index server.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @ncoghlan on 2025-10-14 17:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @konstin on 2025-10-17 09:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @konstin on 2025-10-17 09:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:05 UTC
    </footer>
</body>
</html>
