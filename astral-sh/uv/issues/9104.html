<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unable to configure basic HTTP auth via env for `UV_DEFAULT_INDEX` - astral-sh/uv #9104</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Unable to configure basic HTTP auth via env for <code>UV_DEFAULT_INDEX</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9104">#9104</a>
        opened by <a href="https://github.com/qbedard">@qbedard</a>
        on 2024-11-13 23:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/qbedard">@qbedard</a></div>
            <div class="timeline-body"><p>It looks like there's no way to configure the default index authentication via environment variables without incorporating it into the index URL itself. This gets a bit tricky when you need to set a rotating password separately from the URL (such as for CodeArtifact). The current hack is to do some string manipulation to jam the password into the URL when publishing, but it would be really nice to avoid that.</p>
<p>It would seem easy enough to add <code>UV_DEFAULT_INDEX_USERNAME</code> and <code>UV_DEFAULT_INDEX_PASSWORD</code> as available environment variables.</p>
<p>That wouldn't help with using multiple indexes via <code>UV_INDEX</code>, but maybe that's fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-14 05:02</div>
            <div class="timeline-body"><p>I believe this is possible today? E.g., if you do:</p>
<pre><code class="language-toml">[[tool.uv.index]]
default = true
name = &quot;internal&quot;
url = &quot;...&quot;
</code></pre>
<p>Then <code>UV_INDEX_INTERNAL_USERNAME</code> and <code>UV_INDEX_INTERNAL_PASSWORD</code> will be respected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-11-14 05:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-14 05:04</div>
            <div class="timeline-body"><p>I think the problem is if you change the default index via environment variable instead of defining it in a configuration file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-14 05:05</div>
            <div class="timeline-body"><p>Why is that? I think <code>UV_DEFAULT_INDEX=internal=https://</code> would work as above?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-14 05:13</div>
            <div class="timeline-body"><p>Oh, well that answers the question I think :) I didn't realize you could use that syntax, but it makes sense.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qbedard">@qbedard</a> on 2024-11-14 15:12</div>
            <div class="timeline-body"><blockquote>
<p>Why is that? I think <code>UV_DEFAULT_INDEX=internal=https://</code> would work as above?</p>
</blockquote>
<p>Oh, thatâ€™s interesting. Is that syntax documented somewhere?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-15 00:45</div>
            <div class="timeline-body"><p>I guess not? I thought it was but can't find it. I'll add something.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-11-15 00:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-11-15 15:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-11-15 15:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qbedard">@qbedard</a> on 2024-11-15 19:08</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:28:20 UTC
    </footer>
</body>
</html>
