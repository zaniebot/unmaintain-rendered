<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip install onnxsim` installation error - astral-sh/uv #14744</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv pip install onnxsim</code> installation error</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/14744">#14744</a>
        opened by <a href="https://github.com/kayoonkim">@kayoonkim</a>
        on 2025-07-19 12:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kayoonkim">@kayoonkim</a></div>
            <div class="timeline-body">Summary
<p>Hi, I&#x27;m encountering an issue while installing <code>onnxsim</code>.
Here&#x27;s the complete error message:</p>
<p><code>× Failed to build </code>onnxsim==0.4.36<code>  ├─▶ The build backend returned an error   ╰─▶ Call to</code>setuptools.build_meta:<strong>legacy</strong>.build_wheel` failed (exit status: 1)</p>
<pre><code>  [stdout]
  running bdist_wheel
  running build
  running build_py
  running create_version
  copying onnxsim/__main__.py -&gt; build/lib.linux-aarch64-cpython-312/onnxsim
  copying onnxsim/onnx_simplifier.py -&gt; build/lib.linux-aarch64-cpython-312/onnxsim
  copying onnxsim/version.py -&gt; build/lib.linux-aarch64-cpython-312/onnxsim
  copying onnxsim/model_checking.py -&gt; build/lib.linux-aarch64-cpython-312/onnxsim
  copying onnxsim/model_info.py -&gt; build/lib.linux-aarch64-cpython-312/onnxsim
  copying onnxsim/__init__.py -&gt; build/lib.linux-aarch64-cpython-312/onnxsim
  running egg_info
  writing onnxsim.egg-info/PKG-INFO
  writing dependency_links to onnxsim.egg-info/dependency_links.txt
  writing entry points to onnxsim.egg-info/entry_points.txt
  writing requirements to onnxsim.egg-info/requires.txt
  writing top-level names to onnxsim.egg-info/top_level.txt
  reading manifest file &#x27;onnxsim.egg-info/SOURCES.txt&#x27;
  reading manifest template &#x27;MANIFEST.in&#x27;
  adding license file &#x27;LICENSE&#x27;
  writing manifest file &#x27;onnxsim.egg-info/SOURCES.txt&#x27;
  copying onnxsim/cpp2py_export.cc -&gt; build/lib.linux-aarch64-cpython-312/onnxsim
  copying onnxsim/cxxopts.hpp -&gt; build/lib.linux-aarch64-cpython-312/onnxsim
  copying onnxsim/onnxsim.cpp -&gt; build/lib.linux-aarch64-cpython-312/onnxsim
  copying onnxsim/onnxsim.h -&gt; build/lib.linux-aarch64-cpython-312/onnxsim
  copying onnxsim/bin/onnxsim_bin.cpp -&gt; build/lib.linux-aarch64-cpython-312/onnxsim/bin
  copying onnxsim/bin/onnxsim_option.cpp -&gt; build/lib.linux-aarch64-cpython-312/onnxsim/bin
  copying onnxsim/bin/onnxsim_option.h -&gt; build/lib.linux-aarch64-cpython-312/onnxsim/bin
  running build_ext
  running cmake_build
  -- Configuring incomplete, errors occurred!
  Run command [&#x27;/home/ubuntu/my_folder_name/.venv/bin/cmake&#x27;,
  &#x27;-DPython_INCLUDE_DIR=/home/ubuntu/.local/share/uv/python/cpython-3.12.7-linux-aarch64-gnu/include/python3.12&#x27;,
  &#x27;-DPython_EXECUTABLE=/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/bin/python&#x27;,
  &#x27;-DPYTHON_EXECUTABLE=/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/bin/python&#x27;,
  &#x27;-DBUILD_ONNX_PYTHON=OFF&#x27;, &#x27;-DONNXSIM_PYTHON=ON&#x27;, &#x27;-DONNXSIM_BUILTIN_ORT=OFF&#x27;,
  &#x27;-DONNX_USE_LITE_PROTO=OFF&#x27;, &#x27;-DCMAKE_EXPORT_COMPILE_COMMANDS=ON&#x27;,
  &#x27;-DONNX_NAMESPACE=onnx&#x27;, &#x27;-DPY_EXT_SUFFIX=.cpython-312-aarch64-linux-gnu.so&#x27;,
  &#x27;-DONNX_OPT_USE_SYSTEM_PROTOBUF=OFF&#x27;, &#x27;-DCMAKE_BUILD_TYPE=Release&#x27;, &#x27;-DONNX_ML=1&#x27;,
  &#x27;/home/ubuntu/.cache/uv/sdists-v9/pypi/onnxsim/0.4.36/I-UFDVCqugrMo4L-jGXwF/src&#x27;]

  [stderr]
  &lt;string&gt;:28: DeprecationWarning: Use shutil.which instead of find_executable
  fatal: invalid gitfile format: /home/ubuntu/.cache/uv/sdists-v9/.git
  fatal: invalid gitfile format: /home/ubuntu/.cache/uv/sdists-v9/.git
  /home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/dist.py:759:
  SetuptoolsDeprecationWarning: License classifiers are deprecated.
  !!

          ********************************************************************************
          Please consider removing the following classifiers in favor of a SPDX license expression:

          License :: OSI Approved :: Apache Software License

          See https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#license for details.
          ********************************************************************************

  !!
    self._finalize_license_expression()
  warning: no files found matching &#x27;*.c&#x27; under directory &#x27;onnxsim&#x27;
  warning: no files found matching &#x27;*.proto&#x27; under directory &#x27;onnxsim&#x27;
  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;third_party/onnxruntime&#x27;
  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;third_party/onnx-optimizer/build&#x27;
  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;third_party/onnx/build&#x27;
  warning: no previously-included files matching &#x27;*&#x27; found under directory &#x27;third_party/onnx/onnx/backend&#x27;
  /home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/command/build_py.py:212:
  _Warning: Package &#x27;onnxsim.bin&#x27; is absent from the `packages` configuration.
  !!

          ********************************************************************************
          ############################
          # Package would be ignored #
          ############################
          Python recognizes &#x27;onnxsim.bin&#x27; as an importable package[^1],
          but it is absent from setuptools&#x27; `packages` configuration.

          This leads to an ambiguous overall configuration. If you want to distribute this
          package, please make sure that &#x27;onnxsim.bin&#x27; is explicitly added
          to the `packages` configuration field.

          Alternatively, you can also rely on setuptools&#x27; discovery methods
          (for example by using `find_namespace_packages(...)`/`find_namespace:`
          instead of `find_packages(...)`/`find:`).

          You can read more about &quot;package discovery&quot; on setuptools documentation page:

          - https://setuptools.pypa.io/en/latest/userguide/package_discovery.html

          If you don&#x27;t want &#x27;onnxsim.bin&#x27; to be distributed and are
          already explicitly excluding &#x27;onnxsim.bin&#x27; via
          `find_namespace_packages(...)/find_namespace` or `find_packages(...)/find`,
          you can try to use `exclude_package_data`, or `include-package-data=False` in
          combination with a more fine grained `package-data` configuration.

          You can read more about &quot;package data files&quot; on setuptools documentation page:

          - https://setuptools.pypa.io/en/latest/userguide/datafiles.html


          [^1]: For Python, any directory (with suitable naming) can be imported,
                even if it does not contain any `.py` files.
                On the other hand, currently there is no concept of package data
                directory, all directories are treated like packages.
          ********************************************************************************

  !!
    check.warn(importable)
  CMake Error: CMake was unable to find a build program corresponding to &quot;Unix Makefiles&quot;.  CMAKE_MAKE_PROGRAM
  is not set.  You probably need to select a different build tool.
  CMake Error: CMAKE_CXX_COMPILER not set, after EnableLanguage
  Traceback (most recent call last):
    File &quot;&lt;string&gt;&quot;, line 11, in &lt;module&gt;
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/build_meta.py&quot;,
  line 432, in build_wheel
      return _build([&#x27;bdist_wheel&#x27;])
             ^^^^^^^^^^^^^^^^^^^^^^^
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/build_meta.py&quot;,
  line 423, in _build
      return self._build_with_temp_dir(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/build_meta.py&quot;,
  line 404, in _build_with_temp_dir
      self.run_setup()
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/build_meta.py&quot;,
  line 512, in run_setup
      super().run_setup(setup_script=setup_script)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/build_meta.py&quot;,
  line 317, in run_setup
      exec(code, locals())
    File &quot;&lt;string&gt;&quot;, line 279, in &lt;module&gt;
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/__init__.py&quot;,
  line 115, in setup
      return distutils.core.setup(**attrs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/core.py&quot;,
  line 186, in setup
      return run_commands(dist)
             ^^^^^^^^^^^^^^^^^^
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/core.py&quot;,
  line 202, in run_commands
      dist.run_commands()
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/dist.py&quot;,
  line 1002, in run_commands
      self.run_command(cmd)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/dist.py&quot;, line
  1102, in run_command
      super().run_command(command)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/dist.py&quot;,
  line 1021, in run_command
      cmd_obj.run()
    File
  &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/command/bdist_wheel.py&quot;,
  line 370, in run
      self.run_command(&quot;build&quot;)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/cmd.py&quot;,
  line 357, in run_command
      self.distribution.run_command(command)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/dist.py&quot;, line
  1102, in run_command
      super().run_command(command)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/dist.py&quot;,
  line 1021, in run_command
      cmd_obj.run()
    File
  &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/command/build.py&quot;,
  line 135, in run
      self.run_command(cmd_name)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/cmd.py&quot;,
  line 357, in run_command
      self.distribution.run_command(command)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/dist.py&quot;, line
  1102, in run_command
      super().run_command(command)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/dist.py&quot;,
  line 1021, in run_command
      cmd_obj.run()
    File &quot;&lt;string&gt;&quot;, line 220, in run
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/cmd.py&quot;,
  line 357, in run_command
      self.distribution.run_command(command)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/dist.py&quot;, line
  1102, in run_command
      super().run_command(command)
    File &quot;/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/lib/python3.12/site-packages/setuptools/_distutils/dist.py&quot;,
  line 1021, in run_command
      cmd_obj.run()
    File &quot;&lt;string&gt;&quot;, line 194, in run
    File &quot;/home/ubuntu/.local/share/uv/python/cpython-3.12.7-linux-aarch64-gnu/lib/python3.12/subprocess.py&quot;,
  line 413, in check_call
      raise CalledProcessError(retcode, cmd)
  subprocess.CalledProcessError: Command &#x27;[&#x27;/home/ubuntu/my_folder_name/.venv/bin/cmake&#x27;,
  &#x27;-DPython_INCLUDE_DIR=/home/ubuntu/.local/share/uv/python/cpython-3.12.7-linux-aarch64-gnu/include/python3.12&#x27;,
  &#x27;-DPython_EXECUTABLE=/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/bin/python&#x27;,
  &#x27;-DPYTHON_EXECUTABLE=/home/ubuntu/.cache/uv/builds-v0/.tmpPNxw58/bin/python&#x27;,
  &#x27;-DBUILD_ONNX_PYTHON=OFF&#x27;, &#x27;-DONNXSIM_PYTHON=ON&#x27;, &#x27;-DONNXSIM_BUILTIN_ORT=OFF&#x27;,
  &#x27;-DONNX_USE_LITE_PROTO=OFF&#x27;, &#x27;-DCMAKE_EXPORT_COMPILE_COMMANDS=ON&#x27;,
  &#x27;-DONNX_NAMESPACE=onnx&#x27;, &#x27;-DPY_EXT_SUFFIX=.cpython-312-aarch64-linux-gnu.so&#x27;,
  &#x27;-DONNX_OPT_USE_SYSTEM_PROTOBUF=OFF&#x27;, &#x27;-DCMAKE_BUILD_TYPE=Release&#x27;, &#x27;-DONNX_ML=1&#x27;,
  &#x27;/home/ubuntu/.cache/uv/sdists-v9/pypi/onnxsim/0.4.36/I-UFDVCqugrMo4L-jGXwF/src&#x27;]&#x27; returned non-zero exit
  status 1.

  hint: This usually indicates a problem with the package or the build environment.`</code></pre>
<p>I tried installing a lower version of Python (3.12.7) because I read a thread where someone successfully installed it with that version (<a href="https://github.com/daquexian/onnx-simplifier/issues/334">daquexian/onnx-simplifier#334</a>). I also used an earlier version of <code>onnxsim</code>. I reinstalled the virtual environment, but it still isn&#x27;t working. Has anyone else encountered the same issue? Or could you tell me what is the issue here?</p>
Platform
<p>Linux 6.8.0-1009-aws aarch64 GNU/Linux</p>
Version
<p>uv 0.7.20</p>
Python version
<p>Python 3.12.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/kayoonkim">@kayoonkim</a> on 2025-07-19 12:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2025-07-19 14:08</div>
            <div class="timeline-body"><p>The issue you&#x27;ve linked is saying there is no version available for Python 3.12, that&#x27;s one reason you can&#x27;t install.</p>
<p>If you look at the files available: https://pypi.org/project/onnxsim/#files the pre-compiled packages (wheels ending in &quot;.whl) there is only Python 3.9 to 3.11, and there is no aarch64 available for Linux, so even if you try Python 3.11 it may still not install.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2025-07-19 14:10</div>
            <div class="timeline-body"><p>The thread you linked to also has someone offering their own alternative: https://github.com/tsukumijima/onnx-simplifier-prebuilt. But you will have to trust they know what they&#x27;re doing (as with any package you install as there is always some security risk involved with installing packages).</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:39:31 UTC
    </footer>
</body>
</html>
