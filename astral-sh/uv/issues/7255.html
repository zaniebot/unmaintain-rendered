<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Provide option to install only dev dependencies - astral-sh/uv #7255</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Provide option to install only dev dependencies</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/7255">#7255</a>
        opened by <a href="https://github.com/paveldedik">@paveldedik</a>
        on 2024-09-10 14:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/paveldedik">@paveldedik</a> on 2024-09-10 14:10</div>
            <div class="timeline-body"><p>Hi,</p>
<p>Thank you for creating this amazing tool! We are in the process of switching from <code>pip-tools</code> to <code>uv</code> and have encountered a situation we’re unsure how to resolve.</p>
<h2>Use Case</h2>
<p>We have a Python project with the following setup:</p>
<ol>
<li><p>We install dependencies (excluding dev dependencies) in Docker.</p>
</li>
<li><p>We use Docker Compose to mount the <code>site-packages</code> directory to the host machine.</p>
</li>
<li><p>On the host machine, we create a virtual environment (<code>venv</code>).</p>
</li>
<li><p>Dev dependencies are installed only in this virtual environment.</p>
</li>
<li><p>We link the production dependencies (mounted via Docker) to the <code>venv</code> using the following script:</p>
<pre><code class="language-shell">source .venv/bin/activate
VENV_SITE_PACKAGES=$(python -c &quot;import site; print(site.getsitepackages()[0])&quot;)
echo &quot;$(realpath var/site-packages/)&quot; &gt; &quot;$VENV_SITE_PACKAGES/core.pth&quot;
echo &quot;$(realpath app/libs/)&quot; &gt; &quot;$VENV_SITE_PACKAGES/libs.pth&quot;
</code></pre>
</li>
</ol>
<p>This setup works well with <code>pip</code> and <code>pip-compile</code>, allowing us to maintain a development environment close to production, with full IDE compatibility.</p>
<h2>Challenge with uv</h2>
<p>We’d like to transition to <code>pyproject.toml</code> + <code>uv.lock</code> for dependency management.</p>
<p>Steps 1-3 remain the same when using <code>uv</code>. However, we encounter difficulties with step 4, where we need to install only dev dependencies into the virtual environment.</p>
<p>The issue is that:</p>
<ul>
<li><code>uv sync</code> installs both production and dev dependencies.</li>
<li><code>uv pip install</code> doesn't respect the pinned dependencies from the lock file.</li>
</ul>
<p>We’ve considered using the following workaround:</p>
<ul>
<li><code>uv export --format requirements-txt</code> followed by <code>uv pip install &lt;exported-requirements&gt;</code>, but there doesn’t seem to be an option to export only dev dependencies as well (this could be resolved somehow by combination of <code>uv export ...</code> - <code>uv export --no-dev ...</code> outputs, but that is very far from a neat solution.</li>
</ul>
<h2>Conclusion</h2>
<p>There may be a better way to handle this setup with <code>uv</code> where project dependencies are mounted over Docker (feel free to suggest them), but at the moment we are missing a way to install only dev dependencies without affecting the linked site-packages.</p>
<p>The obvious solution is to add an option something like <code>uv sync --only-dev</code> + also <code>uv export --only-dev ...</code>.</p>
<p>Any guidance or suggestions would be greatly appreciated!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-10 17:47</div>
            <div class="timeline-body"><p>Agree, I do want to support this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-09-12 01:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-09-12 01:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7367.html">astral-sh/uv#7367</a> on 2024-09-13 16:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-16 20:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-16 20:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7993.html">astral-sh/uv#7993</a> on 2024-10-08 02:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:22 UTC
    </footer>
</body>
</html>
