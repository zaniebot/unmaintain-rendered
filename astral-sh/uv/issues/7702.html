<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow trusted-host in requirements source file - astral-sh/uv #7702</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Allow trusted-host in requirements source file</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/7702">#7702</a>
        opened by <a href="https://github.com/gma2th">@gma2th</a>
        on 2024-09-26 09:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/gma2th">@gma2th</a> on 2024-09-26 09:32</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<h2>Description</h2>
<p>uv allows to specifiy <code>--index-url</code> in the requirements source file for <code>uv pip install</code> or <code>uv pip compile</code>.
However it doesn't allow to specify <code>--trusted-host</code>.
This is useful when the host doesn't support https.</p>
<h2>Example</h2>
<pre><code>$ cat req.in
--index-url https://pypi.org/simple

$ uv pip install -r req.in 
Audited 1 package in 1ms

$ cat req.in
--index-url https://pypi.org/simple
--trusted-host pypi.org

$ uv pip install -r req.in
error: Unexpected '-', expected '-c', '-e', '-r' or the start of a requirement at req.in:2:1
</code></pre>
<pre><code>uv version
uv 0.4.16 (e81ed8ec5 2024-09-24)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-26 12:37</div>
            <div class="timeline-body"><p>Generally we don't want to add options to requirements files and it seems less than ideal to do so for trusting an insecure host. Why not pass the option during invocation?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gma2th">@gma2th</a> on 2024-09-26 13:19</div>
            <div class="timeline-body"><p>To not having to pass it every time one want to install/compile the requirements.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-26 14:26</div>
            <div class="timeline-body"><p>Yeah but can you see how it is a security concern to allow that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-26 18:53</div>
            <div class="timeline-body"><p>Yeah I'd prefer not to support this. It doesn't seem like the right security / usability tradeoff. You can already put this in your <code>pyproject.toml</code> if you want to avoid passing it repeatedly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-26 18:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @charliermarsh on 2024-09-26 18:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8290.html">astral-sh/uv#8290</a> on 2024-10-17 15:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/10366.html">astral-sh/uv#10366</a> on 2025-01-07 14:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:22 UTC
    </footer>
</body>
</html>
