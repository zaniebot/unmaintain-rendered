<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Usage of tool `uv` in Dockerfile fails to activate environment - astral-sh/uv #13273</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Usage of tool `uv` in Dockerfile fails to activate environment</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/13273">#13273</a>
        opened by <a href="https://github.com/brunolnetto">@brunolnetto</a>
        on 2025-05-02 19:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/brunolnetto">@brunolnetto</a> on 2025-05-02 19:55</div>
            <div class="timeline-body"><p>Hi all. I want to use uv on my Dockerfile. After more than 3 hours reading and implementing the <a href="https://docs.astral.sh/uv/guides/integration/docker/#installing-a-project_1">documentation</a>, without success to &quot;activate the environment&quot;, I came here for help. THe repository is <a href="https://github.com/brunolnetto/langgraph-pydantic-mvp">here</a>. The command to run the application is <code>docker compose up -d --build</code>.</p>
<p>After &quot;succesfully building the application&quot;, following error pops up:</p>
<pre><code>   Building landgraph-pydantic-mvp @ file:///app
      Built landgraph-pydantic-mvp @ file:///app
Uninstalled 1 package in 2ms
Installed 1 package in 0.64ms
Bytecode compiled 6046 files in 1.03s
error: Failed to spawn: uvicorn
  Caused by: No such file or directory (os error 2)
</code></pre>
<p>I am sure, I am using it wrongly, but at this point, I am tired of trying new things out. Therefore, any help is appreciated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-02 20:03</div>
            <div class="timeline-body"><p>I cloned the repo and it mostly &quot;just worked&quot; for me? I had to run <code>uv add langchain-openai</code>. Then I ran <code>docker compose up -d --build</code> and looked at the logs:</p>
<pre><code>INFO:     Will watch for changes in these directories: ['/app']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [131] using WatchFiles
</code></pre>
<p>(It's immediately failing because I don't have <code>OPENAI_API_KEY</code> set, but uvicorn starts without issue.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brunolnetto">@brunolnetto</a> on 2025-05-02 20:04</div>
            <div class="timeline-body"><p>You don't count. Tool <code>uv</code> is your favourite child, it will always obey you. ðŸ˜… . But it still is not working properly for me, with the same issue. :/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-02 21:01</div>
            <div class="timeline-body"><p>You mount your working directory as a volume</p>
<pre><code>    volumes:
      - .:/app
</code></pre>
<p>This can clobber the existing environment as mentioned at https://docs.astral.sh/uv/guides/integration/docker/#developing-in-a-container</p>
<p>See https://github.com/astral-sh/uv-docker-example/blob/ac09d87bf12d7b2d573a0e37c1d64f791ae31f10/compose.yml#L14-L21 instead</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brunolnetto">@brunolnetto</a> on 2025-05-02 21:15</div>
            <div class="timeline-body"><p>Thanks, @zanieb. You guys are so amazing, I feel blessed everytime I come here asking for help.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:27 UTC
    </footer>
</body>
</html>
