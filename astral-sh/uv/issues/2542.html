<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wheel on pypi.org not found when using `--extra-index-url` that includes non-compatible wheels - astral-sh/uv #2542</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>wheel on pypi.org not found when using <code>--extra-index-url</code> that includes non-compatible wheels</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2542">#2542</a>
        opened by <a href="https://github.com/altendky">@altendky</a>
        on 2024-03-19 15:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/altendky">@altendky</a></div>
            <div class="timeline-body"><p>I use a <code>--extra-index-url</code> that contains mostly arm and risc wheels not avilable from pypi.org, or compilations for new versions of python etc.  When a version is found at the extra index without it providing a usable wheel, the applicable wheel from pypi.org is not used.</p>
<pre><code class="language-console">$ python -m venv venv
</code></pre>
<pre><code class="language-console">$ venv/bin/python --version --version
Python 3.11.6 (main, Oct 13 2023, 12:34:41) [GCC 11.4.0]
</code></pre>
<p>Installing the latest <code>main</code> uv as of now.</p>
<pre><code class="language-console">$ venv/bin/pip install 'uv @ git+https://github.com/astral-sh/uv@ba14f6967639a75e3c0781659f646bd95beafdab'
Collecting uv@ git+https://github.com/astral-sh/uv@ba14f6967639a75e3c0781659f646bd95beafdab
  Using cached uv-0.1.22-py3-none-linux_x86_64.whl
Installing collected packages: uv
Successfully installed uv-0.1.22

[notice] A new release of pip is available: 23.2.1 -&gt; 24.0
[notice] To update, run: /home/altendky/tmp/p/venv/bin/python -m pip install --upgrade pip
</code></pre>
<p>Listing the v1.1.4 wheel that should get used from pypi.org.</p>
<pre><code class="language-console">$ curl --silent https://pypi.org/simple/chiavdf/ | grep -e '1\.1\.4' | grep -e cp310 |grep -e manylinux | grep -e x86_64
&lt;a href=&quot;https://files.pythonhosted.org/packages/6f/84/0d86567374a45e8172021c1eb751e9a00e9ea4d563af4be969cc4da46566/chiavdf-1.1.4-cp310-cp310-manylinux_2_12_x86_64.manylinux2010_x86_64.whl#sha256=986673742982baa3afb7ff0e9580e23b7b7c60e367eac8c63ffbceb07bf702b1&quot; data-requires-python=&quot;&amp;gt;=3.8&quot; data-dist-info-metadata=&quot;sha256=c1aa82178a5c9f08469dbe3ff54829b9682414838466b37950a139e744d615c7&quot; data-core-metadata=&quot;sha256=c1aa82178a5c9f08469dbe3ff54829b9682414838466b37950a139e744d615c7&quot;&gt;chiavdf-1.1.4-cp310-cp310-manylinux_2_12_x86_64.manylinux2010_x86_64.whl&lt;/a&gt;&lt;br /&gt;
</code></pre>
<p>Listing the wrong v1.1.4 wheels on pypi.chia.net that seem to cause trouble.</p>
<pre><code class="language-console">$ curl --silent https://pypi.chia.net/simple/chiavdf/ | grep '1\.1\.4'
&lt;a href=&quot;https://download.chia.net/simple/chiavdf/chiavdf-1.1.4-cp310-cp310-linux_riscv64.whl&quot;&gt;chiavdf-1.1.4-cp310-cp310-linux_riscv64.whl&lt;/a&gt;                                2024-03-08T18:07:08.000Z      90 KB
&lt;a href=&quot;https://download.chia.net/simple/chiavdf/chiavdf-1.1.4-cp311-cp311-linux_riscv64.whl&quot;&gt;chiavdf-1.1.4-cp311-cp311-linux_riscv64.whl&lt;/a&gt;                                2024-03-08T18:07:09.000Z      91 KB
&lt;a href=&quot;https://download.chia.net/simple/chiavdf/chiavdf-1.1.4-cp38-cp38-linux_riscv64.whl&quot;&gt;chiavdf-1.1.4-cp38-cp38-linux_riscv64.whl&lt;/a&gt;                                  2024-03-08T18:07:10.000Z      90 KB
&lt;a href=&quot;https://download.chia.net/simple/chiavdf/chiavdf-1.1.4-cp39-cp39-linux_riscv64.whl&quot;&gt;chiavdf-1.1.4-cp39-cp39-linux_riscv64.whl&lt;/a&gt;                                  2024-03-08T18:07:11.000Z      91 KB
</code></pre>
<p>Failing to install the package using uv and <code>--extra-index-url</code>.</p>
<pre><code class="language-console">$ venv/bin/python -m uv pip install chiavdf==1.1.4 --extra-index-url https://pypi.chia.net/simple/
  × No solution found when resolving dependencies:
  ╰─▶ Because chiavdf==1.1.4 is unusable because no wheels are available with a matching Python ABI and you require chiavdf==1.1.4, we can conclude that the requirements are unsatisfiable.
</code></pre>
<p>Successfully installing the package using uv without <code>--extra-index-url</code>.</p>
<pre><code class="language-console">$ venv/bin/python -m uv pip install chiavdf==1.1.4 
Resolved 1 package in 118ms
Installed 1 package in 9ms
 + chiavdf==1.1.4
</code></pre>
<p>Pip working in the problematic case, albeit with a <code>--force-reinstall</code> added.</p>
<pre><code class="language-console">$ venv/bin/python -m pip install chiavdf==1.1.4 --force-reinstall --extra-index-url https://pypi.chia.net/simple/
Looking in indexes: https://pypi.org/simple, https://pypi.chia.net/simple/
Collecting chiavdf==1.1.4
  Obtaining dependency information for chiavdf==1.1.4 from https://files.pythonhosted.org/packages/f2/b0/5e103b9d9d0189c0eaa3061661740ae727f5ea75a67cc6c8bb74d235497e/chiavdf-1.1.4-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata
  Downloading chiavdf-1.1.4-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (20 kB)
Downloading chiavdf-1.1.4-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (477 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 477.3/477.3 kB 3.6 MB/s eta 0:00:00
Installing collected packages: chiavdf
  Attempting uninstall: chiavdf
    Found existing installation: chiavdf 1.1.4
    Uninstalling chiavdf-1.1.4:
      Successfully uninstalled chiavdf-1.1.4
Successfully installed chiavdf-1.1.4

[notice] A new release of pip is available: 23.2.1 -&gt; 24.0
[notice] To update, run: /home/altendky/tmp/p/venv/bin/python -m pip install --upgrade pip
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-19 17:20</div>
            <div class="timeline-body"><p>Thanks for the clear write-up. This is described here: https://github.com/astral-sh/uv/blob/main/PIP_COMPATIBILITY.md#packages-that-exist-on-multiple-indexes.</p>
<p>There's also discussion on it in a few existing issues:</p>
<ul>
<li>https://github.com/astral-sh/uv/issues/171#issuecomment-1971076413</li>
<li>https://github.com/astral-sh/uv/issues/1377</li>
<li>https://github.com/astral-sh/uv/issues/1600</li>
<li>https://github.com/astral-sh/uv/issues/1451</li>
<li>https://github.com/astral-sh/uv/pull/2083</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-19 17:21</div>
            <div class="timeline-body"><p>This is currently unsupported, but you can follow along https://github.com/astral-sh/uv/issues/171.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-19 17:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:24:26 UTC
    </footer>
</body>
</html>
