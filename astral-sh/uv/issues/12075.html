<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can I use `uv` to install only the dependencies of a package? - astral-sh/uv #12075</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Can I use <code>uv</code> to install only the dependencies of a package?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/12075">#12075</a>
        opened by <a href="https://github.com/mkleinbort-wl">@mkleinbort-wl</a>
        on 2025-03-09 13:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mkleinbort-wl">@mkleinbort-wl</a> on 2025-03-09 13:40</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I'd be interested in being able to install only the dependencies of a python package (not the python package itself).</p>
<p>I imagine this api as something like:</p>
<p><code>uv add scikit-learn --only-deps</code></p>
<p>Which would install the dependencies from the <code>pyproject.toml</code> <a href="https://github.com/scikit-learn/scikit-learn/blob/main/pyproject.toml">here</a>, but not scikit-learn itself.</p>
<p>Use case:</p>
<ul>
<li>Easier caching of layers in docker builds</li>
</ul>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @mkleinbort-wl on 2025-03-09 13:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-09 15:36</div>
            <div class="timeline-body"><p>I think the expected interface would be <code>uv add -r https://github.com/scikit-learn/scikit-learn/blob/main/pyproject.toml</code> but we ban that because the interaction with extras and such is confusing. Perhaps we should allow it though.</p>
<blockquote>
<p>Easier caching of layers in docker builds</p>
</blockquote>
<p>Hm why are you using <code>uv add</code> in Docker builds?</p>
<p>We have <code>uv sync --no-install-project</code> for layer caching. https://docs.astral.sh/uv/guides/integration/docker/#intermediate-layers</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mkleinbort-wl">@mkleinbort-wl</a> on 2025-03-09 15:39</div>
            <div class="timeline-body"><p>I think <code>uv sync --no-install-project</code> is exactly what I was looking for, I'll test it and close the issue.</p>
<p>In my Dockerfile I'm directly installing from a private git repo, hence the ask - vs. having the code in the image itself.</p>
<p>Roughly...</p>
<pre><code class="language-Dockerfile">FROM python:3.11 AS builder

WORKDIR /app

RUN uv venv
RUN uv pip install git+ssh://git@github.com/{ORG}/{REPO}.git

FROM python:3.11
WORKDIR /app
COPY --from=builder /app/.venv .venv/
COPY . .

# More code
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mkleinbort-wl">@mkleinbort-wl</a> on 2025-03-09 16:01</div>
            <div class="timeline-body"><p>To explain further, the dependencies of <code>git+ssh://git@github.com/{ORG}/{REPO}.git</code> change slowly, but <code>git+ssh://git@github.com/{ORG}/{REPO}.git</code> itself changes frequently.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-09 16:24</div>
            <div class="timeline-body"><p>You might want to clone / download the <code>uv.lock</code> and <code>pyproject.toml</code> first so you can do something like https://github.com/astral-sh/uv-docker-example/blob/c16a61fb3e6ab568ac58d94b73a7d79594a5d570/Dockerfile#L15-L17 then clone the rest of the code</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-09 17:08</div>
            <div class="timeline-body"><p>I think <code>--no-install-package scikit-learn</code> should also work. It will install the dependencies, but not <code>scikit-learn</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mkleinbort-wl">@mkleinbort-wl</a> on 2025-03-12 13:37</div>
            <div class="timeline-body"><p>Not sure that works</p>
<pre><code># In a docker file
RUN uv pip install --no-install-package git+ssh://git@github.com/{{ ORG_NAME }}/{{ REPO_NAME }}.git 
</code></pre>
<p>Results in Exit code 2 (troubleshooting it now)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:57 UTC
    </footer>
</body>
</html>
