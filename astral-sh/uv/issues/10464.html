<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>error: Distribution `kaleido==0.2.1.post1 @ registry+https://pypi.org/simple` can't be installed because it doesn't have a source distribution or wheel for the current platform - astral-sh/uv #10464</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>error: Distribution <code>kaleido==0.2.1.post1 @ registry+https://pypi.org/simple</code> can&#x27;t be installed because it doesn&#x27;t have a source distribution or wheel for the current platform</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/10464">#10464</a>
        opened by <a href="https://github.com/jamesdeluk">@jamesdeluk</a>
        on 2025-01-10 10:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jamesdeluk">@jamesdeluk</a></div>
            <div class="timeline-body"><p>New to uv, sorry if PEBKAC.</p>
<p>I&#x27;m trying to install pycaret (<code>uv add pycaret</code>) to a new project on Windows, Python 3.11.</p>
<p>Get this error:</p>
<pre><code>error: Distribution `kaleido==0.2.1.post1 @ registry+https://pypi.org/simple` can&#x27;t be installed because it doesn&#x27;t have a source distribution or wheel for the current platform
</code></pre>
<p>The repo (https://pypi.org/simple/kaleido/) has:</p>
<pre><code>kaleido-0.2.1-py2.py3-none-win_amd64.whl
kaleido-0.2.1.post1-py2.py3-none-manylinux2014_armv7l.whl
</code></pre>
<p>So, no <code>kaleido-0.2.1.post1</code> for Windows.</p>
<p>Checking the PyPi website, there is https://pypi.org/project/kaleido/0.2.1.post1/</p>
<pre><code>pip install kaleido==0.2.1.post1
</code></pre>
<p>Although that applies to the manylinux version.</p>
<p>Yet using <code>conda</code>, it works fine; it installs:</p>
<pre><code>Downloading kaleido-0.2.1-py2.py3-none-win_amd64.whl (65.9 MB)
</code></pre>
<p>Is there a way for uv to use the compatible version like conda does?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-01-10 10:45</div>
            <div class="timeline-body"><p>The problem is that kaleido 0.2.1 and 0.2.1.post1 are technically different versions, and the latter has only a <code>kaleido-0.2.1.post1-py2.py3-none-manylinux2014_armv7l.whl</code> (and due to universal resolution, uv doesn&#x27;t know which wheels it will need eventually). Setting required platforms is planned in #10067, currently you can try something like</p>
<pre><code>[tool.uv]
environments = [
	&quot;platform_system != &quot;Windows&quot;,
	&quot;platform_system == &quot;Windows&quot;
]
</code></pre>
<p>or banning <code>0.2.1.post1</code> in a constraint.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesdeluk">@jamesdeluk</a> on 2025-01-10 17:41</div>
            <div class="timeline-body"><p>Thanks @konstin .</p>
<blockquote>
<pre><code>[tool.uv]
environments = [
  &quot;platform_system != &quot;Windows&quot;,
  &quot;platform_system == &quot;Windows&quot;
]
</code></pre>
</blockquote>
<p>The same error occurred with this (note it&#x27;s <code>&quot;platform_system != &#x27;Windows&#x27;&quot;</code> not <code>&quot;platform_system != &quot;Windows&quot;</code> for anyone else who tried this and initially had an error).</p>
<blockquote>
<p>or banning <code>0.2.1.post1</code> in a constraint.</p>
</blockquote>
<p>How can I do this?</p>
<p>EDIT: I tried</p>
<pre><code>dependencies = [&quot;kaleido&lt;0.2.1.post1&quot;]
</code></pre>
<p>But then got a weird error:</p>
<pre><code>  Ã— Failed to build `sklearn==0.0.post12`
The &#x27;sklearn&#x27; PyPI package is deprecated, use &#x27;scikit-learn&#x27;
</code></pre>
<p>sklearn 0.0.post12 is ancient!</p>
<pre><code>dependencies = [&quot;kaleido&lt;=0.2.1&quot;]
</code></pre>
<p>Seems to be working, but it&#x27;s taking <em>ages</em> to install - far longer than both <code>pip</code> and <code>conda</code>, making me think something isn&#x27;t working correctly (<code>warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-01-10 20:43</div>
            <div class="timeline-body"><p>With this input:</p>
<pre><code>[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.11&quot;
dependencies = [
  &quot;pycaret&quot;,
]

[tool.uv]
constraint-dependencies = [&quot;kaleido!=0.2.1.post1&quot;]
</code></pre>
<p>I get a resolution that does not contain <code>sklearn==0.0.post12</code> and - at least on linux python 3.11 - successfully installs.</p>
<blockquote>
<p>Seems to be working, but it&#x27;s taking ages to install - far longer than both pip and conda, making me think something isn&#x27;t working correctly (warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.)</p>
</blockquote>
<p>This usually happens when the cache and the install directory aren&#x27;t on the same drive, but should not have a <em>massive</em> impact. Usually, something really is some package not having a wheel for the target environment, and that build takes a long time. You can get more information running with <code>-v</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesdeluk">@jamesdeluk</a> on 2025-01-11 09:10</div>
            <div class="timeline-body"><blockquote>
<p>With this input:</p>
</blockquote>
<p>To confirm, you mean edit the toml then <code>uv add pycaret</code>? I did that and it seems to have worked - thanks! Or is there a way to &quot;run&quot; the toml directly, similar to building from a requirements file?</p>
<blockquote>
<p>This usually happens when the cache and the install directory aren&#x27;t on the same drive, but should not have a <em>massive</em> impact. Usually, something really is some package not having a wheel for the target environment, and that build takes a long time. You can get more information running with <code>-v</code>.</p>
</blockquote>
<p>Turns out it was because I was working within Google Drive, so it was the annoying upload/download causing the delay.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-01-13 19:20</div>
            <div class="timeline-body"><p>Inside of <code>docker run --rm -it -v $(pwd):/io ghcr.io/astral-sh/uv:python3.11-bookworm bash</code>, i can create a pyproject.toml with:</p>
<pre><code>[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.11&quot;

[tool.uv]
constraint-dependencies = [&quot;kaleido!=0.2.1.post1&quot;]
</code></pre>
<p>and run</p>
<pre><code>uv add pycaret
</code></pre>
<p>I get a lockfile with sklearn-compat 0.1.3, but no <code>sklearn==0.0.post12</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/this-josh">@this-josh</a> on 2025-02-20 11:19</div>
            <div class="timeline-body"><p>To anyone looking to install kaleido itself you can install the previous version with <code>uv add kaleido==0.2.0</code> which works fine on mac for me</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:36:36 UTC
    </footer>
</body>
</html>
