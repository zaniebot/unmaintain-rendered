<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reconcile published and vendored pep508_rs crates - astral-sh/uv #3538</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Reconcile published and vendored pep508_rs crates</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/3538">#3538</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-05-13 08:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/konstin">@konstin</a> on 2024-05-13 08:06</div>
            <div class="timeline-body"><p>There are two versions of the <code>pep508_rs</code> crate: The crates.io published one from https://github.com/konstin/pep508_rs, and the vendored one at https://github.com/astral-sh/uv/tree/main/crates/pep508-rs. We added the non-PEP 508 features <code>VerbatimUrl</code>, <code>UnnamedRequirement</code> and <code>RequirementOrigin</code> to the vendored version. We also partially added them to the published version.</p>
<p>Given that we have users of both the published version and our vendored version (pixi) and that the published is lagging behind, we should split the current vendored pep508_rs crate into a merely spec-compliant core pep508_rs that is synced with the published repository, while moving <code>VerbatimUrl</code>, <code>UnnamedRequirement</code> and <code>RequirementOrigin</code> to <code>distribution-types</code> or a similar uv crate. The main challenge is that <code>UnnamedRequirement</code> uses the <code>Cursor</code> from <code>pep508_rs</code> that should not become part of the public api, while <code>UnnamedRequirement</code> should not be part of pep508_rs, given that it is not PEP 508 compliant but a pip addition.</p>
<p>We should also split the pyo3 binding off into a separate crate that only exists in https://github.com/konstin/pep508_rs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tdejager">@tdejager</a> on 2024-05-13 08:07</div>
            <div class="timeline-body"><p>Would be great! Let me know if you need any help</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">release</span> added by @charliermarsh on 2024-05-13 14:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../prefix-dev/pixi/issues/2002.html">prefix-dev/pixi#2002</a> on 2024-09-07 14:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pnasrat">@pnasrat</a> on 2025-02-14 13:20</div>
            <div class="timeline-body"><p>Iâ€™d definitely find the type/metadata crates for peps useful in other rust/python tooling with the plan to create a standalone separate a build backend #3957 it might be an opportunity make those a more public facing api</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2025-02-17 00:25</div>
            <div class="timeline-body"><p>I would also be interested in using various parts in <a href="https://github.com/ofek/pyapp">PyApp</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-06-24 20:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:19 UTC
    </footer>
</body>
</html>
