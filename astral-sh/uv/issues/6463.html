<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add feature flag to disable new lock file features (PEP 751) - astral-sh/uv #6463</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add feature flag to disable new lock file features (PEP 751)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6463">#6463</a>
        opened by <a href="https://github.com/ketozhang">@ketozhang</a>
        on 2024-08-22 21:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ketozhang">@ketozhang</a></div>
            <div class="timeline-body"><p>I&#x27;m not ready to use the new lock files in my dev environment. I need to heavily rely on pip-compile style lock files (<code>uv sync requirements.in</code>).</p>
<p>Is there any way to not be affected by the <code>uv.lock</code> (not sure what the existence of that file implies for other uv commands).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-22 21:27</div>
            <div class="timeline-body"><p>If you use the <code>pip</code> API, there&#x27;s no impact. But you can&#x27;t use <code>uv sync</code> or <code>uv lock</code> without <code>uv.lock</code>. (Note that <code>uv.lock</code> is not the same as PEP 751, which is not yet finished or accepted.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 21:29</div>
            <div class="timeline-body"><p>Yeah, I&#x27;d recommend just using <code>uv pip sync</code> instead of the top-level interface.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 21:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ketozhang">@ketozhang</a> on 2024-08-22 21:30</div>
            <div class="timeline-body"><p>@charliermarsh Your response speed amazing ❤️! @zanieb (and you! I didn&#x27;t get a chance to type this)</p>
<p>Doesn&#x27;t the lock file affect <code>uv run</code> (<a href="https://docs.astral.sh/uv/concepts/projects/#lockfile">docs</a>)?
I think <code>uv run python</code> is something I started to use in place of <code>.venv/bin/python</code> (or activate -&gt; python).</p>
<hr>
<p>Gotcha, will try to move remember to always use <code>uv pip</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 21:34</div>
            <div class="timeline-body"><p><code>uv run</code> will always create and use a lockfile in a project, yeah. I presume you have a <code>pyproject.toml</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 21:35</div>
            <div class="timeline-body"><p>Actually you can use <code>uv run --no-project</code> and we will ignore any <code>pyproject.toml</code> files</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ketozhang">@ketozhang</a> on 2024-08-22 21:39</div>
            <div class="timeline-body"><blockquote>
<p>I presume you have a pyproject.toml?</p>
</blockquote>
<p>Yes.</p>
<p>For now, I&#x27;m thinking about the project workflow:</p>
<pre><code>$ cd /path/to/project

$ uv venv                               # Optional and redundant to next command (old habit)
$ uv pip sync dev-requirements.txt      # OR uv pip install -r ...

# Run project environment&#x27;s python == .venv/bin/python
$ uv run python
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 21:46</div>
            <div class="timeline-body"><p>Yep! Makes sense. If you do <code>uv run --no-project python</code> we <em>will</em> read the <code>.venv</code> we just will ignore the <code>pyproject.toml</code> (and <code>uv.lock</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 21:47</div>
            <div class="timeline-body"><pre><code>❯ uv init
Initialized project `example`
❯ uv venv
Using Python 3.11.7
Creating virtualenv at: .venv
Activate with: source .venv/bin/activate
❯ uv pip install httpx
Resolved 7 packages in 201ms
Installed 7 packages in 19ms
 + anyio==4.4.0
 + certifi==2024.7.4
 + h11==0.14.0
 + httpcore==1.0.5
 + httpx==0.27.0
 + idna==3.7
 + sniffio==1.3.1
❯ uv run --no-project python -c &quot;import httpx&quot;
❯ tree .
.
├── README.md
├── pyproject.toml
└── src
    └── example
        └── __init__.py
</code></pre>
<p>(Note we don&#x27;t create a <code>uv.lock</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 21:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 21:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 21:49</div>
            <div class="timeline-body"><p>You can also just do</p>
<pre><code>[tool.uv]
managed = false
</code></pre>
<p>if you <em>never</em> want to use <code>uv sync</code> and <code>uv lock</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ketozhang">@ketozhang</a> on 2024-08-22 21:51</div>
            <div class="timeline-body"><blockquote>
<p><code>managed = false</code></p>
</blockquote>
<p>Oh, same as rye. That solves it as a quasi-feature flag. Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 21:55</div>
            <div class="timeline-body"><p>Adding documentation for this in <a href="https://github.com/astral-sh/uv/pull/6465">astral-sh/uv#6465</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 23:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 23:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:33:06 UTC
    </footer>
</body>
</html>
