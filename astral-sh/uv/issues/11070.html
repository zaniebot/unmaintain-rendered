<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inheriting [tool.uv] section from root-level `pyproject.toml` when desired - astral-sh/uv #11070</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Inheriting [tool.uv] section from root-level <code>pyproject.toml</code> when desired</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/11070">#11070</a>
        opened by <a href="https://github.com/uwu-420">@uwu-420</a>
        on 2025-01-29 17:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uwu-420">@uwu-420</a></div>
            <div class="timeline-body">Summary
<p>Hi all, thanks for making uv!</p>
<p>I&#x27;m trying to make a monorepo with uv and I&#x27;d love to do some base uv configuration in the root level <code>pyproject.toml</code>. Things that are most likely to be the same for all packages, e.g. package indices. But I&#x27;m not using workspaces because the packages will have conflicting dependencies. This is also listed as a reason in the docs, see https://docs.astral.sh/uv/concepts/projects/workspaces/#when-not-to-use-workspaces But some packages will have some custom uv config in <code>[tool.uv]</code> in <code>pyproject.toml</code> but I noticed that this will cause the package to ignore everything set in <code>[tool.uv]</code> by the root <code>pyproject.toml</code>. I suppose this is intentional, but I could imagine my use case being relevant as well.</p>
<p>After all, I saw that ruff offers some explicit opt-in to inherit from some other config, see https://docs.astral.sh/ruff/settings/#extend which is really good for my use case! (I wish pyright and pytest would make it as easy... edit: pyright actually has an <code>extends</code> option, see <a href="https://microsoft.github.io/pyright/#/configuration?id=environment-options">here</a>. pytest does not prioritize that as of now, see <a href="https://github.com/pytest-dev/pytest/issues/13173">here</a>)</p>
<p>Relatedly, there already seems to be some config merging logic https://docs.astral.sh/uv/configuration/files/ but it&#x27;s only for <code>uv.toml</code> user/system-level files.</p>
Example
<p>Not exactly sure about the exact design of it but having this</p>
<pre><code># ./pyproject.toml
[tool.uv]
required-version = &quot;&gt;=0.5.25&quot;
</code></pre>
<p>and</p>
<pre><code># ./sub/pyproject.toml
[tool.uv]
environments = [&quot;sys_platform == &#x27;linux&#x27;&quot;]
</code></pre>
<p>it would be cool to have some way to let the <code>./sub/pyproject.toml</code> inherit the <code>required-version</code> from <code>./pyproject.toml</code>.</p>
<p>Maybe like ruff does it</p>
<pre><code># ./sub/pyproject.toml
[tool.uv]
extend = &quot;../pyproject.toml&quot;
environments = [&quot;sys_platform == &#x27;linux&#x27;&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/uwu-420">@uwu-420</a> on 2025-01-29 17:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/matthewadams">@matthewadams</a> on 2025-01-30 13:50</div>
            <div class="timeline-body"><p>You might be interested in <a href="https://github.com/astral-sh/uv/issues/10960">astral-sh/uv#10960</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-30 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-30 14:19</div>
            <div class="timeline-body"><p>I think we&#x27;re somewhat unlikely to do this, but I understand the problem you&#x27;re facing. I don&#x27;t <em>think</em> we&#x27;d do the same thing in Ruff if we were to re-implement it today. The inheritance causes a lot of complexity and confusion for users. We <em>do</em> support inheritance of user- and system-level settings (e.g., <code>~/.config/uv/uv.toml</code> as in https://docs.astral.sh/uv/configuration/files/ -- that gets combined with your <code>pyproject.toml</code>), so that&#x27;s one option, but it doesn&#x27;t help with sharing across a team.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jvacek">@jvacek</a> on 2025-02-06 11:59</div>
            <div class="timeline-body"><p>Smells related to my issue <a href="https://github.com/astral-sh/uv/issues/5596">astral-sh/uv#5596</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tibbe">@tibbe</a> on 2025-07-09 14:51</div>
            <div class="timeline-body"><p>We&#x27;re facing this as well as our monorepo gets larger. Each package probably has a 100 lines worth of cut-n-pasted <code>pyproject.toml</code> to configure ruff, mypy, and pytest.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjhunter">@tjhunter</a> on 2025-11-03 09:30</div>
            <div class="timeline-body"><p>We &quot;solve&quot; this issue with a script that compares shared sections of pyproject.toml and triggers an error if they deviate:
https://github.com/ecmwf/WeatherGenerator/blob/develop/scripts/check_tomls.py</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:36:58 UTC
    </footer>
</body>
</html>
