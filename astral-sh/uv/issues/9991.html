<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>build backend: `find_uv_bin` fails with pip - astral-sh/uv #9991</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>build backend: <code>find_uv_bin</code> fails with pip</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9991">#9991</a>
        opened by <a href="https://github.com/cthoyt">@cthoyt</a>
        on 2024-12-18 09:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/cthoyt">@cthoyt</a> on 2024-12-18 09:46</div>
            <div class="timeline-body"><p>pip has an issue installing a project using the uv backend, both when installing in editable mode and not. My system uses the following:</p>
<ul>
<li>uv 0.5.10 (37b11ddb2 2024-12-17).</li>
<li>Python 3.12.7</li>
<li>pip 24.3.1</li>
</ul>
<p>This can be reproduced with the following:</p>
<pre><code class="language-console">$ uv --preview init xyz --build-backend uv
Initialized project `xyz` at `/Users/cthoyt/Desktop/xyz`

$ cd xyz
</code></pre>
<p>Here's the error from regular install. Note that <code>UV_PREVIEW=1</code> is required here, otherwise the uv package doesn't have the right functions exposed, and unlike when using uv directly, we can't pass <code>--preview</code>.</p>
<pre><code class="language-console">$ UV_PREVIEW=1 python3 -m pip install .
Processing /Users/cthoyt/Desktop/xyz
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Preparing metadata (pyproject.toml) ... error
  error: subprocess-exited-with-error
  
  × Preparing metadata (pyproject.toml) did not run successfully.
  │ exit code: 1
  ╰─&gt; [18 lines of output]
      Traceback (most recent call last):
        File &quot;/Users/cthoyt/.virtualenvs/biopragmatics/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 353, in &lt;module&gt;
          main()
        File &quot;/Users/cthoyt/.virtualenvs/biopragmatics/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 335, in main
          json_out['return_val'] = hook(**hook_input['kwargs'])
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/Users/cthoyt/.virtualenvs/biopragmatics/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 149, in prepare_metadata_for_build_wheel
          return hook(metadata_directory, config_settings)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/private/var/folders/6k/r2gmmc213vl6h7bv20x624xw0000gn/T/pip-build-env-8hdutcpq/overlay/lib/python3.12/site-packages/uv/_build_backend.py&quot;, line 84, in prepare_metadata_for_build_wheel
          return call(args, config_settings)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/private/var/folders/6k/r2gmmc213vl6h7bv20x624xw0000gn/T/pip-build-env-8hdutcpq/overlay/lib/python3.12/site-packages/uv/_build_backend.py&quot;, line 36, in call
          result = subprocess.run([find_uv_bin()] + args, stdout=subprocess.PIPE)
                                   ^^^^^^^^^^^^^
        File &quot;/private/var/folders/6k/r2gmmc213vl6h7bv20x624xw0000gn/T/pip-build-env-8hdutcpq/overlay/lib/python3.12/site-packages/uv/_find_uv.py&quot;, line 36, in find_uv_bin
          raise FileNotFoundError(path)
      FileNotFoundError: /Users/cthoyt/Library/Python/3.12/bin/uv
      [end of output]
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
error: metadata-generation-failed

× Encountered error while generating package metadata.
╰─&gt; See above for output.

note: This is an issue with the package mentioned above, not pip.
hint: See above for details.
</code></pre>
<p>Here's the error from editable install</p>
<pre><code class="language-console">$ UV_PREVIEW=1 python3 -m pip install -e .
Obtaining file:///Users/cthoyt/Desktop/xyz
  Installing build dependencies ... done
  Checking if build backend supports build_editable ... done
  Getting requirements to build editable ... done
  Preparing editable metadata (pyproject.toml) ... error
  error: subprocess-exited-with-error
  
  × Preparing editable metadata (pyproject.toml) did not run successfully.
  │ exit code: 1
  ╰─&gt; [18 lines of output]
      Traceback (most recent call last):
        File &quot;/Users/cthoyt/.virtualenvs/biopragmatics/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 353, in &lt;module&gt;
          main()
        File &quot;/Users/cthoyt/.virtualenvs/biopragmatics/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 335, in main
          json_out['return_val'] = hook(**hook_input['kwargs'])
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/Users/cthoyt/.virtualenvs/biopragmatics/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 181, in prepare_metadata_for_build_editable
          return hook(metadata_directory, config_settings)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/private/var/folders/6k/r2gmmc213vl6h7bv20x624xw0000gn/T/pip-build-env-3lz54y_v/overlay/lib/python3.12/site-packages/uv/_build_backend.py&quot;, line 110, in prepare_metadata_for_build_editable
          return call(args, config_settings)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/private/var/folders/6k/r2gmmc213vl6h7bv20x624xw0000gn/T/pip-build-env-3lz54y_v/overlay/lib/python3.12/site-packages/uv/_build_backend.py&quot;, line 36, in call
          result = subprocess.run([find_uv_bin()] + args, stdout=subprocess.PIPE)
                                   ^^^^^^^^^^^^^
        File &quot;/private/var/folders/6k/r2gmmc213vl6h7bv20x624xw0000gn/T/pip-build-env-3lz54y_v/overlay/lib/python3.12/site-packages/uv/_find_uv.py&quot;, line 36, in find_uv_bin
          raise FileNotFoundError(path)
      FileNotFoundError: /Users/cthoyt/Library/Python/3.12/bin/uv
      [end of output]
  
  note: This error originates from a subprocess, and is likely not a problem with pip.
error: metadata-generation-failed

× Encountered error while generating package metadata.
╰─&gt; See above for output.

note: This is an issue with the package mentioned above, not pip.
hint: See above for details.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @konstin by @charliermarsh on 2024-12-18 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-12-18 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @charliermarsh on 2024-12-18 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "build backend: issue locating uv executable when installing with pip" to "build backend: `find_uv_bin` fails with pip" by @konstin on 2024-12-18 19:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2024-12-20 09:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:51 UTC
    </footer>
</body>
</html>
