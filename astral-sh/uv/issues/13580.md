```yaml
number: 13580
title: "`uv --offline self update` ignores --offline flag."
type: issue
state: closed
author: collinanderson
labels:
  - bug
  - good first issue
assignees: []
created_at: 2025-05-21T16:29:21Z
updated_at: 2025-05-27T03:29:59Z
url: https://github.com/astral-sh/uv/issues/13580
synced_at: 2026-01-10T01:57:31Z
```

# `uv --offline self update` ignores --offline flag.

---

_Issue opened by @collinanderson on 2025-05-21 16:29_

### Summary

`uv --offline self update` ignores `--offline` flag.

```
$ uv --offline self update
info: Checking for updates...
success: You're on the latest version of uv (v0.7.6)
```

`--offline` is a "Global option" and therefore it should make `uv self update` fail.

### Platform

Linux 6.8.0-60-generic x86_64 GNU/Linux

### Version

uv 0.7.6

### Python version

Python 3.13.2

---

_Label `bug` added by @collinanderson on 2025-05-21 16:29_

---

_Label `good first issue` added by @zanieb on 2025-05-21 17:11_

---

_Comment by @dangdennis on 2025-05-22 13:24_

Heya. I’ll check this out. 

Implementation plan:
1. Pass the global network settings to the called func
2. Bail out early with a Failure. Print a message to the user.
3. add a snapshot test. 

An issue I have to figure out is actually enabling the use of ‘self update’ via ‘cargo run -- self update --offline’ during my manual testing. Or perhaps there’s some test bootstrapping that sidesteps that. 

---

_Comment by @Gankra on 2025-05-22 17:17_

> An issue I have to figure out is actually enabling the use of ‘self update’ via ‘cargo run -- self update --offline’ during my manual testing. Or perhaps there’s some test bootstrapping that sidesteps that.

We can eagerly error before the "hey you can't run self update here" check in this case, side-stepping the issue.

---

_Comment by @dangdennis on 2025-05-26 16:46_

Discovered that you _can_ set cargo features with `cargo run`.

Running `cargo run --features "self-update" -- self update --offline` takes the execution path I needed. Looking to see how we write integration tests.

---

_Referenced in [dangdennis/uv#1](../../dangdennis/uv/pulls/1.md) on 2025-05-26 17:48_

---

_Referenced in [astral-sh/uv#13663](../../astral-sh/uv/pulls/13663.md) on 2025-05-26 17:49_

---

_Closed by @Gankra on 2025-05-27 03:29_

---
