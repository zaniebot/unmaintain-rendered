<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bug: compile with --python-platform linux does not consider manylinux  - astral-sh/uv #5106</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Bug: compile with --python-platform linux does not consider manylinux</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/5106">#5106</a>
        opened by <a href="https://github.com/jbw-vtl">@jbw-vtl</a>
        on 2024-07-16 14:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jbw-vtl">@jbw-vtl</a> on 2024-07-16 14:32</div>
            <div class="timeline-body"><p>Hi All,</p>
<p>Maybe this is me misunderstanding how the more open <code>--python-platform</code> specifiers <code>windows / linux / macos</code> are expected to function, however ran into a case with <code>uv pip compile --python-platform linux</code> not recognizing a manylinux wheel.</p>
<pre><code class="language-text">uv==0.2.24
python==3.11.9
Windows
</code></pre>
<pre><code class="language-text"># requirements.in
connectorx==0.3.3
</code></pre>
<pre><code class="language-bash">uv pip compile requirements.in --python-version 3.11 --python-platform linux -v
</code></pre>
<pre><code class="language-text">DEBUG uv 0.2.24
DEBUG Starting Python discovery for Python 3.11
DEBUG Looking for exact match for request Python 3.11
DEBUG Searching for Python 3.11 in system path or `py` launcher
DEBUG Found cpython 3.11.9 at `...\.venv\Scripts\python.exe` (active virtual environment)
DEBUG Using Python 3.11.9 interpreter at ...\.venv\Scripts\python.exe for builds
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.11.9
DEBUG Solving with target Python version: 3.11.0
DEBUG Adding direct dependency: connectorx==0.3.3
DEBUG Found fresh response for: https://&lt;internal-nexus&gt;/repository/pypi-group/simple/connectorx/
DEBUG Searching for a compatible version of connectorx (==0.3.3)
  x No solution found when resolving dependencies:
  `-&gt; Because connectorx==0.3.3 has no wheels are available with a matching Python implementation and you require connectorx==0.3.3, we can conclude that the requirements are unsatisfiable.
</code></pre>
<p>The repo however has a manylinux_2_28_x86_84 wheel.
<img src="https://github.com/user-attachments/assets/40268185-309e-4a18-bdb5-8ac01d76d8ca" alt="image" /></p>
<p>Running with a more granular scoping of the below executes successfully.</p>
<pre><code class="language-bash">uv pip compile requirements.in --python-version 3.11 --python-platform x86_64-manylinux_2_28 -v
</code></pre>
<pre><code class="language-text">DEBUG uv 0.2.24
DEBUG Starting Python discovery for Python 3.11
DEBUG Looking for exact match for request Python 3.11
DEBUG Searching for Python 3.11 in system path or `py` launcher
DEBUG Found cpython 3.11.9 at `...\.venv\Scripts\python.exe` (active virtual environment)
DEBUG Using Python 3.11.9 interpreter at ...\.venv\Scripts\python.exe for builds
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.11.9
DEBUG Solving with target Python version: 3.11.0
DEBUG Adding direct dependency: connectorx==0.3.3
DEBUG Found fresh response for: https://&lt;internal-nexus&gt;/repository/pypi-group/simple/connectorx/
DEBUG Searching for a compatible version of connectorx (==0.3.3)
DEBUG Selecting: connectorx==0.3.3 (connectorx-0.3.3-cp311-cp311-manylinux_2_28_x86_64.whl)
DEBUG No cache entry for: https://&lt;internal-nexus&gt;/repository/pypi-group/packages/connectorx/0.3.3/connectorx-0.3.3-cp311-cp311-manylinux_2_28_x86_64.whl#sha256=f430c359e7977818f90ac8cce3bb7ba340469dcabee13e4ac7926f80e34e8c4d
WARN Range requests not supported for connectorx-0.3.3-cp311-cp311-manylinux_2_28_x86_64.whl; streaming wheel
DEBUG No cache entry for: https://&lt;internal-nexus&gt;/repository/pypi-group/packages/connectorx/0.3.3/connectorx-0.3.3-cp311-cp311-manylinux_2_28_x86_64.whl#sha256=f430c359e7977818f90ac8cce3bb7ba340469dcabee13e4ac7926f80e34e8c4d
DEBUG Tried 1 versions: connectorx 1
DEBUG Split  took 1.902s
Resolved 1 package in 1.90s
# This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in --python-version 3.11 --python-platform x86_64-manylinux_2_28
connectorx==0.3.3
    # via -r requirements.in
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-16 14:33</div>
            <div class="timeline-body"><p>I believe this is intentional. <code>--linux</code> is an alias for <code>x86_64-manylinux_2_17</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-16 14:34</div>
            <div class="timeline-body"><p>If you want to target a higher <code>manylinux</code> version (i.e., lower compatibility), what you're doing above is correct -- passing (e.g.) <code>manylinux_2_28</code> explicitly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jbw-vtl">@jbw-vtl</a> on 2024-07-16 14:42</div>
            <div class="timeline-body"><p>Interesting that makes sense.</p>
<p>Is this something we could add to the documentation?
Been looking around a bit online but not clear to me <code>linux</code> is an alias for <code>x86_64-manylinux_2_17</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @zanieb on 2024-07-16 14:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-16 14:53</div>
            <div class="timeline-body"><p><code>uv help pip compile</code> shows:</p>
<blockquote>
<ul>
<li>linux:                      An alias for <code>x86_64-unknown-linux-gnu</code>, the default target for Linux</li>
</ul>
</blockquote>
<p>We could add some documentation on cross-platform locking to <code>docs/pip/compile.md</code> though (not a live doc yet)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-16 14:59</div>
            <div class="timeline-body"><p>The README does have:</p>
<pre><code>For example, if you're running uv on macOS, but want to resolve for Linux, you can run
`uv pip compile --python-platform=linux requirements.in` to produce a `manylinux2014`-compatible
resolution.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jbw-vtl">@jbw-vtl</a> on 2024-07-16 15:11</div>
            <div class="timeline-body"><p>Tried upgrading uv to the latest version just now, <code>uv help</code> does not seem to be available.<br />
<code>uv help pip compile</code> failed with <code>error: program not found</code></p>
<p>Either way, for now using the more specific python-platform is working well.
Thank you very much for the prompt replies, closing the issue</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jbw-vtl on 2024-07-16 15:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-16 15:25</div>
            <div class="timeline-body"><p>@jbw-vtl that sounds like a bug, would you mind opening a report? If you use <code>uv help pip compile --no-pager</code> I presume it will work</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jbw-vtl">@jbw-vtl</a> on 2024-07-16 16:10</div>
            <div class="timeline-body"><p>will do, thanks</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:36 UTC
    </footer>
</body>
</html>
