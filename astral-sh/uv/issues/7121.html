<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Command `uv pip sync requirements.txt` remove pip in venv create with `uv venv --seed` - astral-sh/uv #7121</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Command `uv pip sync requirements.txt` remove pip in venv create with `uv venv --seed`</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7121">#7121</a>
        opened by <a href="https://github.com/arthurc0102">@arthurc0102</a>
        on 2024-09-06 10:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/arthurc0102">@arthurc0102</a> on 2024-09-06 10:48</div>
            <div class="timeline-body"><p>Version info (on macOS)</p>
<pre><code>❯ uv --version
uv 0.4.6 (84f25e8cf 2024-09-05)
</code></pre>
<p>Content of requirements.in</p>
<pre><code>ruff
</code></pre>
<p>Create venv</p>
<pre><code>❯ uv --verbose venv --seed
DEBUG uv 0.4.6
DEBUG Searching for Python interpreter in managed installations or system path
DEBUG Searching for managed installations at `/Users/user/.local/share/uv/python`
DEBUG Found managed installation `cpython-3.12.5-macos-aarch64-none`
DEBUG Found `cpython-3.12.5-macos-aarch64-none` at `/Users/user/.local/share/uv/python/cpython-3.12.5-macos-aarch64-none/bin/python3` (managed installations)
Using Python 3.12.5
Creating virtualenv with seed packages at: .venv
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.12.5
DEBUG Solving with target Python version: &gt;=3.12.5
DEBUG Adding direct dependency: pip*
DEBUG Found fresh response for: https://pypi.org/simple/pip/
DEBUG Searching for a compatible version of pip (*)
DEBUG Selecting: pip==24.2 [compatible] (pip-24.2-py3-none-any.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/d4/55/90db48d85f7689ec6f81c0db0622d704306c5284850383c090e6c7195a5c/pip-24.2-py3-none-any.whl.metadata
DEBUG Tried 1 versions: pip 1
DEBUG Split specific environment resolution took 0.001s
DEBUG Installing in pip==24.2 in /Users/user/Desktop/ppp-project/.venv
DEBUG Requirement already cached: pip==24.2
DEBUG Installing build requirement: pip==24.2
 + pip==24.2
Activate with: source .venv/bin/activate
</code></pre>
<p>Generate requirements.txt</p>
<pre><code>❯ uv --verbose pip compile requirements.in -o requirements.txt
DEBUG uv 0.4.6
DEBUG Starting Python discovery for any Python
DEBUG Looking for exact match for request any Python
DEBUG Searching for Python interpreter in managed installations or system path
DEBUG Found `cpython-3.12.5-macos-aarch64-none` at `/Users/user/Desktop/ppp-project/.venv/bin/python3` (active virtual environment)
DEBUG Using Python 3.12.5 interpreter at .venv/bin/python3 for builds
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.12.5
DEBUG Solving with target Python version: &gt;=3.12.5
DEBUG Adding direct dependency: ruff*
DEBUG Found fresh response for: https://pypi.org/simple/ruff/
DEBUG Searching for a compatible version of ruff (*)
DEBUG Selecting: ruff==0.6.4 [preference] (ruff-0.6.4-py3-none-macosx_11_0_arm64.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/a6/fd/8784e3bbd79bc17de0a62de05fe5165f494ff7d77cb06630d6428c2f10d2/ruff-0.6.4-py3-none-macosx_11_0_arm64.whl.metadata
DEBUG Tried 1 versions: ruff 1
DEBUG Split specific environment resolution took 0.004s
Resolved 1 package in 4ms
# This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in -o requirements.txt
ruff==0.6.4
    # via -r requirements.in
</code></pre>
<p>Run sync</p>
<pre><code>❯ uv --verbose pip sync requirements.txt
DEBUG uv 0.4.6
DEBUG Searching for Python interpreter in system path
DEBUG Found `cpython-3.12.5-macos-aarch64-none` at `/Users/user/Desktop/ppp-project/.venv/bin/python3` (virtual environment)
DEBUG Using Python 3.12.5 environment at .venv/bin/python3
DEBUG Acquired lock for `.venv`
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.12.5
DEBUG Solving with target Python version: &gt;=3.12.5
DEBUG Adding direct dependency: ruff==0.6.4
DEBUG Found fresh response for: https://pypi.org/simple/ruff/
DEBUG Searching for a compatible version of ruff (==0.6.4)
DEBUG Selecting: ruff==0.6.4 [compatible] (ruff-0.6.4-py3-none-macosx_11_0_arm64.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/a6/fd/8784e3bbd79bc17de0a62de05fe5165f494ff7d77cb06630d6428c2f10d2/ruff-0.6.4-py3-none-macosx_11_0_arm64.whl.metadata
DEBUG Tried 1 versions: ruff 1
DEBUG Split specific environment resolution took 0.004s
Resolved 1 package in 4ms
DEBUG Requirement already cached: ruff==0.6.4
DEBUG Unnecessary package: pip==24.2
DEBUG Uninstalled pip (442 files, 51 directories)
Uninstalled 1 package in 32ms
Installed 1 package in 2ms
 - pip==24.2
 + ruff==0.6.4
DEBUG Released lock at `/Users/user/Desktop/ppp-project/.venv/.lock`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-06 12:36</div>
            <div class="timeline-body"><p>I’ll take a look, we special-case this so pip shouldn’t be removed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-06 16:43</div>
            <div class="timeline-body"><p>I misremembered -- we preserve &quot;seed&quot; packages only if the virtualenv was created by a tool <em>other</em> than uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arthurc0102">@arthurc0102</a> on 2024-09-07 02:53</div>
            <div class="timeline-body"><p>Can uv keep &quot;seed&quot; packages if create venv by <code>uv venv --seed</code>? or add a flag to <code>uv pip sync</code> command?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-07 16:41</div>
            <div class="timeline-body"><p>Yeah we probably should? I'm not sure why we wouldn't want to.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2024-09-07 16:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Stannislav">@Stannislav</a> on 2024-09-15 14:28</div>
            <div class="timeline-body"><p>+1 to never remove seed packages by default. I think wanting to sync them is more of an edge case than not wanting it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-15 14:31</div>
            <div class="timeline-body"><p>We'll need to track this state, presumably in the <code>pyvenv.cfg</code>? We don't currently</p>
<pre><code>❯ uv venv --seed
Using Python 3.11.10
Creating virtualenv with seed packages at: .venv
 + pip==24.2
 + setuptools==74.1.2
 + wheel==0.44.0
Activate with: source .venv/bin/activate
❯ cat .venv/pyvenv.cfg
home = /Users/zb/.local/share/uv/python/cpython-3.11.10-macos-aarch64-none/bin
implementation = CPython
uv = 0.4.9
version_info = 3.11.10
include-system-site-packages = false
relocatable = false
prompt = uv
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-15 15:25</div>
            <div class="timeline-body"><p>Like, track the fact that we created the env with seed packages there?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-15 15:29</div>
            <div class="timeline-body"><p>I can do that, not too hard.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-09-15 16:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-15 22:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-15 22:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 04:47:47 UTC
    </footer>
</body>
</html>
