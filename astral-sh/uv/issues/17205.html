<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Please add support for single-file packages - astral-sh/uv #17205</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Please add support for single-file packages</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/17205">#17205</a>
        opened by <a href="https://github.com/gottadiveintopython">@gottadiveintopython</a>
        on 2025-12-21 10:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gottadiveintopython">@gottadiveintopython</a></div>
            <div class="timeline-body"><h1>Sammary</h1>
<p>The <code>uv build</code> command doesn't seem to support a single-file module layout (i.e. a non-<code>__init__.py</code> module) like the following:</p>
<pre><code>&lt;project-root&gt;
  ├── pyproject.toml
  └── src
       └── a_module.py
</code></pre>
<p>I would like <code>uv build</code> to support this layout.</p>
<h1>Steps to Reproduce</h1>
<ol>
<li>Run <code>$ uv init --lib mylib</code> to generate the following structure (git-related files omitted):</li>
</ol>
<pre><code>./mylib/README.md
./mylib/.python-version
./mylib/src/mylib/py.typed
./mylib/src/mylib/__init__.py
./mylib/pyproject.toml
</code></pre>
<ol start="2">
<li>Remove the package directory and replace it with a single-file module:</li>
</ol>
<pre><code class="language-shell">$ rm -R ./mylib/src/mylib
$ touch ./mylib/src/mylib.py
</code></pre>
<p>The resulting structure is:</p>
<pre><code>./mylib/README.md
./mylib/.python-version
./mylib/src/mylib.py
./mylib/pyproject.toml
</code></pre>
<p>At this point, <code>$ uv sync</code> fails:</p>
<pre><code>$ cd ./mylib
$ uv sync
</code></pre>
<pre><code>Using CPython 3.13.8
Creating virtual environment at: .venv
Resolved 1 package in 3ms
  × Failed to build `mylib @ file:///path/to/mylib`
  ╰─▶ Expected a Python module at: src/mylib/__init__.py
</code></pre>
<p><code>$ uv build</code> fails too:</p>
<pre><code>Building source distribution (uv build backend)...
  × Failed to build `/path/to/mylib`
  ╰─▶ Expected a Python module at: src/mylib/__init__.py

</code></pre>
<ol start="3">
<li>But, adding the following option to the <code>pyproject.toml</code> makes <code>$ uv sync</code> work:</li>
</ol>
<pre><code>[tool.uv.build-backend]
namespace = true
</code></pre>
<pre><code>Installed 1 package in 0.81ms
 ~ mylib==0.1.0 (from file:///path/to/mylib)
</code></pre>
<p>But <code>$ uv build</code> still fails:</p>
<pre><code>Building source distribution (uv build backend)...
Building wheel from source distribution (uv build backend)...
  × Failed to build `/path/to/mylib`
  ├─▶ Failed to walk source tree: /home/my-username/.cache/uv/sdists-v9/.xxxxxxxxx/mylib-0.1.0
  ├─▶ IO error for operation on /home/my-username/.cache/uv/sdists-v9/.xxxxxxxxx/mylib-0.1.0/src/mylib: No such file or directory (os error 2)
  ╰─▶ No such file or directory (os error 2)
</code></pre>
<h1>Tested Environment</h1>
<ul>
<li>uv 0.9.2</li>
<li>Linux Mint 22.1</li>
</ul>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @gottadiveintopython on 2025-12-21 10:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-21 14:21</div>
            <div class="timeline-body"><p>Related</p>
<ul>
<li>https://github.com/astral-sh/uv/pull/11325</li>
</ul>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:33:44 UTC
    </footer>
</body>
</html>
