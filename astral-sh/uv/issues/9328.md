```yaml
number: 9328
title: torch in tool.uv.source violate the pyproject.toml schema
type: issue
state: closed
author: Xiao-Chenguang
labels:
  - bug
  - documentation
assignees: []
created_at: 2024-11-21T16:31:13Z
updated_at: 2024-11-21T22:37:09Z
url: https://github.com/astral-sh/uv/issues/9328
synced_at: 2026-01-10T01:57:21Z
```

# torch in tool.uv.source violate the pyproject.toml schema

---

_Issue opened by @Xiao-Chenguang on 2024-11-21 16:31_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

Minimal Example (as in the [official doc](https://docs.astral.sh/uv/guides/integration/pytorch/#using-a-pytorch-index)):
```toml
[project]
name = "project"
version = "0.1.0"
requires-python = ">=3.12.0"
dependencies = [
  "torch>=2.5.1",
  "torchvision>=0.20.1",
]

[tool.uv.sources]
torch = [
    { index = "pytorch-cpu", marker = "platform_system != 'Darwin'" },
]
torchvision = [
    { index = "pytorch-cpu", marker = "platform_system != 'Darwin'" },
]

[[tool.uv.index]]
name = "pytorch-cpu"
url = "https://download.pytorch.org/whl/cpu"
explicit = true
```

With this configuration and `Even Better TOML` extension in vscode, there are warnings that `[{"index":"pytorch-cpu","marker":"platform_system != 'Darwin'"}] is not valid under any of the given schemas`

- uv version: 0.5.4
- platform: macos

---

_Comment by @charliermarsh on 2024-11-21 16:59_

Sorry, I need to update SchemaStore.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-11-21 16:59_

---

_Label `bug` added by @charliermarsh on 2024-11-21 16:59_

---

_Comment by @charliermarsh on 2024-11-21 16:59_

(What you have there is correct; the schema on SchemaStore is just stale.)

---

_Label `documentation` added by @charliermarsh on 2024-11-21 16:59_

---

_Comment by @charliermarsh on 2024-11-21 18:04_

See: https://github.com/SchemaStore/schemastore/pull/4224

---

_Closed by @charliermarsh on 2024-11-21 22:37_

---
