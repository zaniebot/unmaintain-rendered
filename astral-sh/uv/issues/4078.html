<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support directories passed via --index-url - astral-sh/uv #4078</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support directories passed via --index-url</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/4078">#4078</a>
        opened by <a href="https://github.com/ericmarkmartin">@ericmarkmartin</a>
        on 2024-06-05 22:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ericmarkmartin">@ericmarkmartin</a></div>
            <div class="timeline-body"><p>The pip install docs say the following <code>--index-url</code> (emphasis mine)</p>
<blockquote>
<p>This should point to a repository compliant with PEP 503 ... <em>or a local directory laid out in the same format</em></p>
</blockquote>
<p>Empirically, pip install does work with either a path passed in for <code>--index-url</code> (though in this case it warns about the lack of scheme) or a file-scheme url.</p>
<p>Currently, when passed a directory for <code>--index-url</code>, <code>uv</code> complains about it being a <code>relative URL without a base</code>. When passed a file scheme url, it encounters a reqwest error in the request builder: <code>URL scheme is not allowed</code>.</p>
<p>Given that pip warns when given a naked directory, it seems okay to not support this, but I have a use case that would benefit from support for the file scheme urls.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-05 22:35</div>
            <div class="timeline-body"><p>What is the advantage of using <code>--index-url</code> over <code>--find-links</code> for searching from a local directory?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ericmarkmartin">@ericmarkmartin</a> on 2024-06-05 22:36</div>
            <div class="timeline-body"><p>I&#x27;ll also note that I&#x27;m happy to work on a patch if folks think this would be okay to add, but I might need a bit of guidance. I&#x27;m aware that uv supports installation of requirements specified with file scheme urls, but I&#x27;m new to this codebase and could probably benefit from some pointers on how to leverage that code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-05 23:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ericmarkmartin">@ericmarkmartin</a> on 2024-06-06 00:17</div>
            <div class="timeline-body"><blockquote>
<p>What is the advantage of using <code>--index-url</code> over <code>--find-links</code> for searching from a local directory?</p>
</blockquote>
<p>As I understand it, <code>--find-links</code> only works for a flat index, so the distributions would have to be immediate descendants of whatever path you pass.</p>
<blockquote>
<p>If a path, the target must be a directory that contains package as wheel files (<code>.whl</code>) or source distributions (<code>.tar.gz</code> or <code>.zip</code>) at the top level.</p>
</blockquote>
<p>I want to be able to pass a parent directory of this, e.g. <code>foo</code> where <code>foo/numpy</code> holds <code>numpy</code> wheels.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-06 00:25</div>
            <div class="timeline-body"><p>Why is it important, though, that you can pass in a parent directory with HTML files, rather than dumping the artifacts into a flat directory? I&#x27;m just trying to understand why it&#x27;s necessary to support before committing to it.</p>
<p>FWIW it seems reasonable to support, but it kinda depends on how much complexity it adds.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-11 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AbaoFromCUG">@AbaoFromCUG</a> on 2024-12-13 14:56</div>
            <div class="timeline-body"><p>I have the same question. I&#x27;m also curious about the reason behind this design. My directory doesn&#x27;t contain an index.html.
Why  should we create an index.html inside the directory.  In my opinion,   a naked directory is enough.</p>
<p>Are there any tools that can help me generate index.html?</p>
My case
<p>I have some wheels, I want to generate requirements.txt with</p>
<pre><code>uv pip compile  -o requirements.txt --default-index=/path/to/wheels  requirements.in 
</code></pre>
<pre><code>/path/to/wheels/
               - a
                 - a-1.0.0.whl
                 - a-2.0.0.whl
               - b
                 - b-1.0.0.whl
                 - b-2.0.0.whl

</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:31:28 UTC
    </footer>
</body>
</html>
