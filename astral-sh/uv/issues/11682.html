<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support &quot;only-binary&quot;configuration and UV_ONLY_PROJECT environment variable at project level - astral-sh/uv #11682</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support &quot;only-binary&quot;configuration and UV_ONLY_PROJECT environment variable at project level</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11682">#11682</a>
        opened by <a href="https://github.com/jdputschadi">@jdputschadi</a>
        on 2025-02-21 02:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jdputschadi">@jdputschadi</a> on 2025-02-21 02:41</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Please allow using &quot;only-binary&quot; via persistent configuration, similar to the way &quot;no-binary&quot; is supported at that level, allowing it to be used/applied with &quot;uv sync&quot; and &quot;uv run&quot;.</p>
<p>&quot;only-binary&quot; has the helpful feature that it will fall back to an older wheel during resolution if needed instead of attempting to build a package.</p>
<p>Thanks,</p>
<p>Jeff.</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @jdputschadi on 2025-02-21 02:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sanmai-NL">@sanmai-NL</a> on 2025-03-11 14:59</div>
            <div class="timeline-body"><p>Related to https://github.com/astral-sh/uv/issues/11963</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sanmai-NL">@sanmai-NL</a> on 2025-03-11 15:04</div>
            <div class="timeline-body"><p>@lengau Am I correct to find that uv doesn't support configuring to not build dependencies from source, but allow to build the current <code>pyproject.toml</code> packages?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sanmai-NL">@sanmai-NL</a> on 2025-03-11 15:09</div>
            <div class="timeline-body"><p>Something like this doesn't work with a <code>pyproject.toml</code> that defines &quot;mypackage&quot;.</p>
<pre><code class="language-toml">[tool.uv]
no-binary-package = [
  &quot;mypackage&quot;,
  &quot;parse&quot;,
]
no-build = true
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sanmai-NL">@sanmai-NL</a> on 2025-04-01 08:02</div>
            <div class="timeline-body"><p>@lengau Your implementation in #11963 seems to only allow setting no-build, not switching it:</p>
<pre><code class="language-console">$ env UV_NO_BUILD=0 uv build
Building source distribution...
  × Failed to build `/Users/myuser/myproduct`
  ╰─▶ Building source distributions is disabled
</code></pre>
<p>I think it would be more useful if it's a real option (and documented clearly).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sanmai-NL">@sanmai-NL</a> on 2025-04-01 08:05</div>
            <div class="timeline-body"><p>Aside, I find this UI rather confusing that a subcommand that signals an intent then must be made to work by overriding the config using a subcommand specific option with the same name. This work-around to the issue I'm reporting here does work though.</p>
<pre><code class="language-console">$ uv --build build
error: unexpected argument '--build' found

  tip: 'build --build' exists

Usage: uv [OPTIONS] &lt;COMMAND&gt;

For more information, try '--help'.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-01 20:28</div>
            <div class="timeline-body"><p>That error message is because <code>--build</code> / <code>--no-build</code> are available on most commands</p>
<p>https://github.com/astral-sh/uv/blob/ac2dcd658e7e4d526b069c879325f37afb77d1f2/crates/uv-cli/src/lib.rs#L4974-L5027</p>
<p>I don't quite follow the rest of your question @sanmai-NL ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/12607.html">astral-sh/uv#12607</a> on 2025-04-01 20:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-01 20:32</div>
            <div class="timeline-body"><p>We won't support <code>UV_ONLY_PROJECT</code> in the <code>pyproject.toml</code> as it's a sync option, but <code>only-binary</code> is a thing as <code>no-build</code> and <code>no-build-package</code> https://docs.astral.sh/uv/reference/settings/#no-build</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @zanieb on 2025-04-01 20:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-04-01 20:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-04-01 20:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:01 UTC
    </footer>
</body>
</html>
