<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv run and pyproject configuration - astral-sh/uv #7313</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv run and pyproject configuration</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7313">#7313</a>
        opened by <a href="https://github.com/patrickporto">@patrickporto</a>
        on 2024-09-11 21:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/patrickporto">@patrickporto</a></div>
            <div class="timeline-body"><p>I searched some similar issue but I didn&#x27;t find anything.</p>
<p>I have the following structure in my project:</p>
<pre><code>workspace
├──  packages
│   ├── package-a
│   │    ├── pyproject.toml
│   └──  package-b
│          └── pyproject.toml
└──  pyproject.toml 

</code></pre>
<p>I have installed <code>pytest</code> and <code>pytest-env</code> at <code>package-a</code>. After that, I put the following configuration on package-a&#x27;s pyproject.toml:</p>
<pre><code>[tool.pytest_env]
AWS_ACCESS_KEY_ID = &quot;&quot;
AWS_SECRET_ACCESS_KEY = &quot;&quot;
AWS_REGION = &quot;&quot;
</code></pre>
<p>Finally I have tried to execute <code>uv run --package package-a pytest</code> from workspace root when I got a error for it didn&#x27;t find the configuration on pyproject.toml. I only got execute this one if it is executed on package folder.</p>
<p>uv platform: Linux
uv version: 0.4.9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sirosc">@sirosc</a> on 2024-09-13 17:59</div>
            <div class="timeline-body"><p>Are you using uv&#x27;s <a href="https://docs.astral.sh/uv/concepts/workspaces/">workspace</a> feature or using the term &quot;workspace&quot; to refer to a parent folder/repo?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/patrickporto">@patrickporto</a> on 2024-09-13 22:00</div>
            <div class="timeline-body"><blockquote>
<p>Are you using uv&#x27;s <a href="https://docs.astral.sh/uv/concepts/workspaces/">workspace</a> feature or using the term &quot;workspace&quot; to refer to a parent folder/repo?</p>
</blockquote>
<p>I am using workspace feature as it is documented</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-14 00:34</div>
            <div class="timeline-body"><p>This may depend on how pytest discovers that configuration. If it has to be in the current working directory specifically, then you may have to run <code>uv run pytest</code> from <code>./packages/package-a</code> instead of the workspace root, since we can&#x27;t control pytest&#x27;s config discovery. Does that work?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-14 00:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/patrickporto">@patrickporto</a> on 2024-09-17 01:39</div>
            <div class="timeline-body"><p>@charliermarsh I think a good way could be consider package as root on execute <code>uv run --package package-a pytest</code>. I don&#x27;t believe that there is any use case for using pyproject.toml on workspace root instead of package. What do you think about setting package as the root on execution?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 21:51</div>
            <div class="timeline-body"><p>I don&#x27;t think we can change the working directory, it&#x27;d break relative paths which kind of defeats the purpose of working from the workspace root.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 21:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 21:52</div>
            <div class="timeline-body"><p>Maybe you can use <code>uv --directory &lt;path&gt;</code>?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:33:57 UTC
    </footer>
</body>
</html>
