<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Failed to parse uv.lock file - astral-sh/uv #11701</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Failed to parse uv.lock file</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11701">#11701</a>
        opened by <a href="https://github.com/AnanyaRaval">@AnanyaRaval</a>
        on 2025-02-21 19:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/AnanyaRaval">@AnanyaRaval</a> on 2025-02-21 19:10</div>
            <div class="timeline-body"><h3>Question</h3>
<h5>Summary</h5>
<p>I am getting the following error while using <code>uv run file.py</code>  -</p>
<pre><code class="language-bash">error: Failed to parse `uv.lock`
  Caused by: Dependency `numpy` has a missing `source` field but has more than one matching package. 
</code></pre>
<p>Manually searching the file, I see only one place where <code>numpy</code> is mentioned without <code>source</code> field. This package was added before multiple versions of numpy were introduced in the project.</p>
<pre><code>[[package]]
name = &quot;tableone&quot;
version = &quot;0.9.1&quot;
source = { registry = &quot;https://pypi.org/simple&quot; }
dependencies = [
    { name = &quot;jinja2&quot; },
    { name = &quot;numpy&quot; },
    { name = &quot;openpyxl&quot; },
    { name = &quot;pandas&quot; },
    { name = &quot;scipy&quot; },
    { name = &quot;statsmodels&quot; },
    { name = &quot;tabulate&quot; },
]
</code></pre>
<h4>Context</h4>
<p>It occurred after I pulled the latest <code>uv.lock</code> file from remote repository. It was pushed after running <code>uv pip install scikit-survival</code> (<code>uv add</code> was throwing an error for not finding <code>numpy</code> even when it was installed). I'd appreciate any help in fixing this issue.</p>
<p>Attaching <code>pyproject.toml</code> and <code>uv.lock</code> files.</p>
<p><a href="https://github.com/user-attachments/files/18914154/uv.lock.txt">uv.lock.txt</a>
<a href="https://github.com/user-attachments/files/18914171/pyproject.toml.txt">pyproject.toml.txt</a></p>
<h3>Platform</h3>
<p>Ubuntu 18.04.6 LTS</p>
<h3>Version</h3>
<p>uv 0.6.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @AnanyaRaval on 2025-02-21 19:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-03-01 00:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-01 01:45</div>
            <div class="timeline-body"><p>Hmm. I can reproduce this by running <code>uv lock</code>, but if I <code>rm uv.lock</code>, <code>uv lock</code> succeeds -- so I can't reproduce it &quot;from scratch&quot;. Is there any chance there was a merge or rebase conflict that was resolved incorrectly on the lockfile?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-03-14 00:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-14 00:39</div>
            <div class="timeline-body"><p>Closing due to lack of follow-up, but happy to help if this gets revived.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gnowland">@gnowland</a> on 2025-07-23 19:08</div>
            <div class="timeline-body"><p>Running <code>rm uv.lock</code> and <code>uv lock</code> resolved this for me. BTW running <code>uv lock --refresh</code> worked on one machine but not another, so the more robust solution is to nuke the lockfile and recreate from scratch (as is often the case when working with cache!)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:35:23 UTC
    </footer>
</body>
</html>
