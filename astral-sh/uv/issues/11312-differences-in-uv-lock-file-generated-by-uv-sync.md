---
number: 11312
title: Differences in uv.lock File Generated by uv sync Across Different Platforms
type: issue
state: closed
author: junxy
labels:
  - bug
assignees: []
created_at: 2025-02-07T11:03:33Z
updated_at: 2025-02-12T17:14:06Z
url: https://github.com/astral-sh/uv/issues/11312
synced_at: 2026-01-10T01:25:03Z
---

# Differences in uv.lock File Generated by uv sync Across Different Platforms

---

_Issue opened by @junxy on 2025-02-07 11:03_

### Summary

Hi there,
When executing `uv sync` on different platforms, the `uv.lock` file is automatically updated. The main observed differences are:
- On Windows, the entries end with a `/`.
- On macOS, the entries do not end with a `/`.
- Linux has not been tested.

Additionally, when using `uv run python --version`, this difference also causes the `uv.lock` file to be updated.

```diff
...
 [[package]]
 name = "aiohappyeyeballs"
 version = "2.4.4"
-source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple" }
+source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple/" }
 sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/7f/55/e4373e888fdacb15563ef6fa9fa8c8252476ea071e96fb46defac9f18bf2/aiohappyeyeballs-2.4.4.tar.gz", hash = "sha256:5fdd7d87889c63183afc18ce9271f9b0a7d32c2303e394468dd45d514a757745", size = 21977 }
...
```

`pyproject.toml`
```toml
#...
[[tool.uv.index]]
url = "https://pypi.tuna.tsinghua.edu.cn/simple"
default = true
#...
```

### Platform

macOS 14 arm64, Windows 11 x86_64

### Version

uv 0.5.29 (ca73c4754 2025-02-05)

### Python version

Python 3.12.3

---

_Label `bug` added by @junxy on 2025-02-07 11:03_

---

_Comment by @charliermarsh on 2025-02-07 13:58_

Sorry, I can't replicate this. Are you sure you aren't including a trailing slash in one context but not the other?

E.g.:

```
â¯ uv add --index https://pypi.tuna.tsinghua.edu.cn/simple/ iniconfig
Using CPython 3.13.0
Creating virtual environment at: .venv
Resolved 2 packages in 2ms
Installed 1 package in 2ms
 + iniconfig==2.0.0

â¯ cat uv.lock
version = 1
requires-python = ">=3.13.0"

[[package]]
name = "bar"
version = "0.1.0"
source = { virtual = "." }
dependencies = [
    { name = "iniconfig" },
]

[package.metadata]
requires-dist = [{ name = "iniconfig", specifier = ">=2.0.0" }]

[[package]]
name = "iniconfig"
version = "2.0.0"
source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple/" }
sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3", size = 4646 }
wheels = [
    { url = "https://pypi.tuna.tsinghua.edu.cn/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374", size = 5892 },
]
```


Versus:

```
â¯ uv add --index https://pypi.tuna.tsinghua.edu.cn/simple iniconfig
Using CPython 3.13.0
Creating virtual environment at: .venv
Resolved 2 packages in 2.09s
Prepared 1 package in 836ms
Installed 1 package in 3ms
 + iniconfig==2.0.0

â¯ cat uv.lock
version = 1
requires-python = ">=3.13.0"

[[package]]
name = "foo"
version = "0.1.0"
source = { virtual = "." }
dependencies = [
    { name = "iniconfig" },
]

[package.metadata]
requires-dist = [{ name = "iniconfig", specifier = ">=2.0.0" }]

[[package]]
name = "iniconfig"
version = "2.0.0"
source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple" }
sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3", size = 4646 }
wheels = [
    { url = "https://pypi.tuna.tsinghua.edu.cn/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374", size = 5892 },
]
```

---

_Comment by @charliermarsh on 2025-02-07 14:02_

We can consider normalizing the trailing slash either way, though.

---

_Assigned to @charliermarsh by @charliermarsh on 2025-02-07 14:03_

---

_Comment by @junxy on 2025-02-07 16:11_

@charliermarsh I may not have explained myself clearly. The presence or absence of a trailing `/` in `--index https://pypi.tuna.tsinghua.edu.cn/simple/` yields consistent results in the same environment. The inconsistency arises in different environments: I've noticed that the results differ between Windows and macOS. I'm not sure if this is related to `Python 3.12.3`. I will test the method you provided later to see if I can reproduce the issue.

---

_Comment by @charliermarsh on 2025-02-07 16:59_

Got it. I'll test that out later today.

---

_Comment by @charliermarsh on 2025-02-07 21:33_

I don't think I can reproduce this. At least, these tests passed on all platforms: https://github.com/astral-sh/uv/pull/11332.

---

_Label `bug` removed by @charliermarsh on 2025-02-07 21:57_

---

_Label `needs-mre` added by @charliermarsh on 2025-02-07 21:57_

---

_Comment by @junxy on 2025-02-08 04:12_

@charliermarsh I can confirm that this issue only occurs on the Windows platform, and I have found a way to reproduce it:

```ps1
> mkdir test1
> cd test1
> uv init

> uv add --index https://pypi.tuna.tsinghua.edu.cn/simple iniconfig
Using CPython 3.13.1
Creating virtual environment at: .venv
Resolved 2 packages in 4ms
Installed 1 package in 15ms
 + iniconfig==2.0.0

> cat uv.lock
version = 1
requires-python = ">=3.13"

[[package]]
name = "iniconfig"
version = "2.0.0"
source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple" }
sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3", size = 4646 }
wheels = [
    { url = "https://pypi.tuna.tsinghua.edu.cn/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374", size = 5892 },
]

[[package]]
name = "test1"
version = "0.1.0"
source = { virtual = "." }
dependencies = [
    { name = "iniconfig" },
]

[package.metadata]
requires-dist = [{ name = "iniconfig", specifier = ">=2.0.0" }]

# âœ… So far, everything seems normal.

# ðŸ”¨ One more time
> uv sync
Resolved 2 packages in 5ms
Audited 1 package in 0.02ms

# ðŸ”¨ Checking again, and there is a change
> cat uv.lock
version = 1
requires-python = ">=3.13"

[[package]]
name = "iniconfig"
version = "2.0.0"
# ðŸ‘‡
source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple/" }
sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3", size = 4646 }
wheels = [
    { url = "https://pypi.tuna.tsinghua.edu.cn/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374", size = 5892 },
]

[[package]]
name = "test1"
version = "0.1.0"
source = { virtual = "." }
dependencies = [
    { name = "iniconfig" },
]

[package.metadata]
requires-dist = [{ name = "iniconfig", specifier = ">=2.0.0" }]

# ðŸ”¨ Checking the pyproject.toml, you'll find that it adds a `/`, even when using: uv add --index https://pypi.tuna.tsinghua.edu.cn/simple iniconfig 
> cat pyproject.toml
[project]
name = "test1"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
    "iniconfig>=2.0.0",
]

[[tool.uv.index]]
# ðŸ‘‡
url = "https://pypi.tuna.tsinghua.edu.cn/simple/"
default = true

# ðŸ”¨ Manually modify pyproject.toml to remove the `/`
> cat pyproject.toml
[project]
name = "test1"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
    "iniconfig>=2.0.0",
]

[[tool.uv.index]]
# ðŸ‘‡
url = "https://pypi.tuna.tsinghua.edu.cn/simple"
default = true

# ðŸ”¨ One more time
> rm uv.lock
> uv sync
> cat uv.lock
version = 1
requires-python = ">=3.13"

[[package]]
name = "iniconfig"
version = "2.0.0"
# ðŸ‘‡ Still adds a `/` 
source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple/" }
sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3", size = 4646 }
wheels = [
    { url = "https://pypi.tuna.tsinghua.edu.cn/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374", size = 5892 },
]

[[package]]
name = "test1"
version = "0.1.0"
source = { virtual = "." }
dependencies = [
    { name = "iniconfig" },
]

[package.metadata]
requires-dist = [{ name = "iniconfig", specifier = ">=2.0.0" }]
```

**When I compared it using the Docker container `ghcr.io/astral-sh/uv:0.5-python3.12-bookworm`, I was unable to reproduce the issue.**

Summary: 
1. When using `uv add --index https://pypi.tuna.tsinghua.edu.cn/simple iniconfig`, the first execution works correctly (the `uv.lock` does not have a trailing `/`). However, the configuration in `pyproject.toml` under `[[tool.uv.index]]` will automatically add a trailing `/`. On subsequent executions of `uv sync`, this leads to inconsistency (the `uv.lock` now has a trailing `/`).
2. If the `[[tool.uv.index]]` URL is manually added without a trailing `/`, executing `uv sync` will result in a `uv.lock` that contains a trailing `/`, which creates a mismatch with the configuration in `pyproject.toml`.
3. A temporary workaround is to add a trailing `/` to the `[[tool.uv.index]]` URL in the `pyproject.toml` configuration file. This adjustment can help prevent the bug from being triggered.




---

_Comment by @charliermarsh on 2025-02-09 20:01_

Thanks for the clear write-up. Unfortunately I can't reproduce this on my own Windows machine... I'm not seeing any such trailing slash added to the `pyproject.toml`, and the `uv.lock` doesn't contain a trailing slash after re-running `uv sync`. Are you certain you're on the latest version of uv?

---

_Comment by @junxy on 2025-02-10 06:17_

@charliermarsh Thanks for your confirmation. I am using the latest version of `uv`. I just re-downloaded it from `https://github.com/astral-sh/uv/releases/download/0.5.29/uv-x86_64-pc-windows-msvc.zip`. On another machine running `Microsoft Windows 10 (22H2) [Version 10.0.19045.5371]`, I was unable to reproduce the issue. However, on my original machine with `Microsoft Windows 11 (23H2) [Version 10.0.22631.4751]`, I can consistently reproduce the problem. I'm not sure if it's related to this specific version of Windows or if there might be an issue with my environment. I will test it on another Windows machine later.

---

_Comment by @junxy on 2025-02-12 09:08_

Just when I was about to give up, I found the root of the problem, which seems to be independent of the operating system, as it can also be reproduced on Linux. I had forgotten that I set an environment variable at some point: `UV_DEFAULT_INDEX=https://pypi.tuna.tsinghua.edu.cn/simple/` (with a trailing slash) (ã„’oã„’)~ 

Probably found these problems, may be the same reason: 
1. The update handling of `uv.lock` and `pyproject.toml` is inconsistent when executing `uv add --index`. (`uv.lock` -> `--index`, `pyproject.toml` -> `UV_DEFAULT_INDEX`)
2. The `default = true` in `[[tool.uv.index]]` in `pyproject.toml` also affects which index is used.
3. Modifying the URL in `[[tool.uv.index]]` in `pyproject.toml` to include a trailing slash and executing `uv sync` may require deleting `uv.lock` to update, potentially influenced by `UV_DEFAULT_INDEX`.

The logic here is a bit complex, so I will demonstrate directly(Use the official UV Docker image to maintain a consistent environment):

```bash
> docker pull ghcr.io/astral-sh/uv:0.5-python3.12-bookworm
> docker run --rm -it ghcr.io/astral-sh/uv:0.5-python3.12-bookworm bash
> uv -V
# latest
uv 0.5.30
> mkdir test && cd test && uv init
Initialized project `test`

# ðŸ‘‡
> export UV_DEFAULT_INDEX=https://pypi.tuna.tsinghua.edu.cn/simple/   # ðŸ”´ with trailing slash

> uv add --index https://pypi.tuna.tsinghua.edu.cn/simple iniconfig   # ðŸŸ¢ without trailing slash
Using CPython 3.12.9 interpreter at: /usr/local/bin/python3.12
Creating virtual environment at: .venv
Resolved 2 packages in 81ms
Prepared 1 package in 63ms
Installed 1 package in 4ms
 + iniconfig==2.0.0

> cat pyproject.toml
[project]
name = "test"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.12"
dependencies = [
    "iniconfig>=2.0.0",
]

[[tool.uv.index]]
# ðŸ”´ with trailing slash - same as UV_DEFAULT_INDEX
url = "https://pypi.tuna.tsinghua.edu.cn/simple/"
default = true

> cat uv.lock
version = 1
requires-python = ">=3.12"

[[package]]
name = "iniconfig"
version = "2.0.0"
# ðŸŸ¢ without trailing slash - same as `uv add --index`
source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple" }
sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3", size = 4646 }
wheels = [
    { url = "https://pypi.tuna.tsinghua.edu.cn/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374", size = 5892 },
]

[[package]]
name = "test"
version = "0.1.0"
source = { virtual = "." }
dependencies = [
    { name = "iniconfig" },
]

[package.metadata]
requires-dist = [{ name = "iniconfig", specifier = ">=2.0.0" }]

> git add .
ðŸ‘‰ 1: inconsistent VS `uv add --index`
> uv sync
Resolved 2 packages in 2ms
Audited 1 package in 0.01ms
```

```diff
# git diff | cat
diff --git a/uv.lock b/uv.lock
index 52e98f1..877856d 100644
--- a/uv.lock
+++ b/uv.lock
@@ -4,7 +4,7 @@ requires-python = ">=3.12"
 [[package]]
 name = "iniconfig"
 version = "2.0.0"
# changed to ðŸ”´with / ends - same as UV_DEFAULT_INDEX
-source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple" }
+source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple/" }
 sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3", size = 4646 }
 wheels = [
     { url = "https://pypi.tuna.tsinghua.edu.cn/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374", size = 5892 },
```

```bash
> git add .
# ðŸ‘‰ 3: Modify pyproject.toml to remove the trailing slash and check if uv.lock changes
> sed -i 's#url = "https://pypi.tuna.tsinghua.edu.cn/simple/"#url = "https://pypi.tuna.tsinghua.edu.cn/simple"#g' pyproject.toml
> uv sync  # uv.lock will not change
> rm uv.lock # Delete uv.lock
> uv sync  # uv.lock still will not change
```

```diff
# git diff | cat
diff --git a/pyproject.toml b/pyproject.toml
index db79f42..9e3cc3c 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -9,5 +9,5 @@ dependencies = [
 ]

 [[tool.uv.index]]
-url = "https://pypi.tuna.tsinghua.edu.cn/simple/"
+url = "https://pypi.tuna.tsinghua.edu.cn/simple"
 default = true
```

```bash
# ðŸ‘‰ 2: Modify pyproject.toml to comment out default = true
> sed -i 's#default = true#\# default = true#g' pyproject.toml
> uv sync  # uv.lock will not change
# Executing `uv sync` will update the `uv.lock` file with the need to delete it.
> rm uv.lock # Delete uv.lock
> uv sync  # uv.lock has changed
```

```diff
# git diff | cat
diff --git a/pyproject.toml b/pyproject.toml
index 9e3cc3c..ff1fcb4 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -10,4 +10,4 @@ dependencies = [

 [[tool.uv.index]]
 url = "https://pypi.tuna.tsinghua.edu.cn/simple"
-default = true
+# default = true
diff --git a/uv.lock b/uv.lock
index 877856d..52e98f1 100644
--- a/uv.lock
+++ b/uv.lock
@@ -4,7 +4,7 @@ requires-python = ">=3.12"
 [[package]]
 name = "iniconfig"
 version = "2.0.0"
-source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple/" }
+source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple" }
 sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3", size = 4646 }
 wheels = [
     { url = "https://pypi.tuna.tsinghua.edu.cn/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374", size = 5892 },
```
```bash
# full
> cat pyproject.toml
[project]
name = "test"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.12"
dependencies = [
    "iniconfig>=2.0.0",
]

[[tool.uv.index]]
# ðŸŸ¢ without trailing slash
url = "https://pypi.tuna.tsinghua.edu.cn/simple"
# default = true

> cat uv.lock
version = 1
requires-python = ">=3.12"

[[package]]
name = "iniconfig"
version = "2.0.0"
# ðŸŸ¢ without trailing slash
source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple" }
sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3", size = 4646 }
wheels = [
    { url = "https://pypi.tuna.tsinghua.edu.cn/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374", size = 5892 },
]

[[package]]
name = "test"
version = "0.1.0"
source = { virtual = "." }
dependencies = [
    { name = "iniconfig" },
]

[package.metadata]
requires-dist = [{ name = "iniconfig", specifier = ">=2.0.0" }]

> env | grep UV
# ðŸ”´ with trailing slash
UV_DEFAULT_INDEX=https://pypi.tuna.tsinghua.edu.cn/simple/

```

If the environment variable is set to `UV_DEFAULT_INDEX=https://pypi.tuna.tsinghua.edu.cn/simple` (without a trailing slash), the same operations can still reproduce the issue, but the results will be exactly the opposite.


```bash
# additional
# ðŸ‘‰ 3: Modify pyproject.toml to another index url.
# Executing `uv sync` will update the `uv.lock` file without the need to delete it.
# Previously, it was necessary to delete uv.lock for the file to be updated, which seems to be related to whether UV_DEFAULT_INDEX is the same (regardless of the trailing slash).
> git add .
> sed -i 's#url = "https://pypi.tuna.tsinghua.edu.cn/simple"#url = "https://mirrors.aliyun.com/pypi/simple"#g' pyproject.toml
```
```diff
# git diff | cat
diff --git a/pyproject.toml b/pyproject.toml
index ff1fcb4..47bab81 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -9,5 +9,5 @@ dependencies = [
 ]

 [[tool.uv.index]]
-url = "https://pypi.tuna.tsinghua.edu.cn/simple"
+url = "https://mirrors.aliyun.com/pypi/simple"
 # default = true
diff --git a/uv.lock b/uv.lock
index 52e98f1..051897a 100644
--- a/uv.lock
+++ b/uv.lock
@@ -4,10 +4,10 @@ requires-python = ">=3.12"
 [[package]]
 name = "iniconfig"
 version = "2.0.0"
-source = { registry = "https://pypi.tuna.tsinghua.edu.cn/simple" }
-sdist = { url = "https://pypi.tuna.tsinghua.edu.cn/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3", size = 4646 }
+source = { registry = "https://mirrors.aliyun.com/pypi/simple" }
+sdist = { url = "https://mirrors.aliyun.com/pypi/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3" }
 wheels = [
-    { url = "https://pypi.tuna.tsinghua.edu.cn/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374", size = 5892 },
+    { url = "https://mirrors.aliyun.com/pypi/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374" },
 ]

 [[package]]
```

```bash
> git add .
> sed -i 's#url = "https://mirrors.aliyun.com/pypi/simple"#url = "https://mirrors.aliyun.com/pypi/simple/"#g' pyproject.toml
> uv sync
```

```diff
# git diff | cat
diff --git a/pyproject.toml b/pyproject.toml
index 47bab81..73b6704 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -9,5 +9,5 @@ dependencies = [
 ]

 [[tool.uv.index]]
-url = "https://mirrors.aliyun.com/pypi/simple"
+url = "https://mirrors.aliyun.com/pypi/simple/"
 # default = true
diff --git a/uv.lock b/uv.lock
index 051897a..d00bcc2 100644
--- a/uv.lock
+++ b/uv.lock
@@ -4,7 +4,7 @@ requires-python = ">=3.12"
 [[package]]
 name = "iniconfig"
 version = "2.0.0"
-source = { registry = "https://mirrors.aliyun.com/pypi/simple" }
+source = { registry = "https://mirrors.aliyun.com/pypi/simple/" }
 sdist = { url = "https://mirrors.aliyun.com/pypi/packages/d7/4b/cbd8e699e64a6f16ca3a8220661b5f83792b3017d0f79807cb8708d33913/iniconfig-2.0.0.tar.gz", hash = "sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3" }
 wheels = [
     { url = "https://mirrors.aliyun.com/pypi/packages/ef/a6/62565a6e1cf69e10f5727360368e451d4b7f58beeac6173dc9db836a5b46/iniconfig-2.0.0-py3-none-any.whl", hash = "sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374" },


```



---

_Comment by @charliermarsh on 2025-02-12 15:37_

Okay thanks. This actually does make sense, I think, but perhaps we can do better here.

---

_Label `needs-mre` removed by @charliermarsh on 2025-02-12 15:58_

---

_Label `bug` added by @charliermarsh on 2025-02-12 15:58_

---

_Referenced in [astral-sh/uv#11451](../../astral-sh/uv/pulls/11451.md) on 2025-02-12 16:12_

---

_Closed by @charliermarsh on 2025-02-12 17:14_

---
