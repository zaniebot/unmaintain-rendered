<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv cache prune not pruning? - astral-sh/uv #16551</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv cache prune not pruning?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16551">#16551</a>
        opened by <a href="https://github.com/sergiocallegari">@sergiocallegari</a>
        on 2025-11-02 09:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sergiocallegari">@sergiocallegari</a></div>
            <div class="timeline-body">Summary
<p>Tried to install a package that brings in tons of dependencies with <code>uv tool</code>. I did <code>uv tool install openai-whisper</code> that brings in several GBs of CUDA even on non-nvidia hardware. Once done with it, I uninstalled the tool. However there seems to be no way to get rid of the nvidia stuff from the cache with <code>uv cache prune</code>. The detection logic says that there is nothing &quot;unused&quot;.</p>
Platform
<p>Manjaro linux X86-64</p>
Version
<p>uv 0.9.7</p>
Python version
<p>python 3.13.9 (managed)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/sergiocallegari">@sergiocallegari</a> on 2025-11-02 09:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-11-02 17:56</div>
            <div class="timeline-body"><p><code>uv cache prune</code> does <em>not</em> remove dependencies that are no longer used in your project (we don&#x27;t track usages like that). It removes other ephemeral resources from the cache.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/samypr100">@samypr100</a> on 2025-11-03 03:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/samypr100">@samypr100</a> on 2025-11-03 03:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-11-03 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sergiocallegari">@sergiocallegari</a> on 2025-11-03 20:32</div>
            <div class="timeline-body"><p>The manual says &quot;uv cache prune removes all <em>unused</em> cache entries&quot;, from which I probably came to wrong conclusions. Sorry for the noise. It then talks about &quot;unreachable objects&quot;. My understanding was that files in the cache get hard-linked into the virtual environments created by the projects and by the tools and that when the link count goes back to 1 the items are in the cache only and can be removed. Is this understanding wrong? Is there some doc where &quot;unreachable&quot; is better clarified?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:40:53 UTC
    </footer>
</body>
</html>
