```yaml
number: 10687
title: how to get uv to run my app on a read-only volume?
type: issue
state: open
author: straz
labels:
  - question
assignees: []
created_at: 2025-01-16T17:15:58Z
updated_at: 2025-01-19T02:07:40Z
url: https://github.com/astral-sh/uv/issues/10687
synced_at: 2026-01-10T01:57:24Z
```

# how to get uv to run my app on a read-only volume?

---

_Issue opened by @straz on 2025-01-16 17:15_

My `Dockerfile` implements a `FastAPI` web server, as follows:
```
...
RUN uv sync
CMD ["uv", "run", "--no-dev", "uvicorn", "myapp.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

The `/app` volume is read-only for safety reasons. At startup, python imports `site`, whose [documentation](https://docs.python.org/3/library/site.html) says

> **This module is automatically imported during initialization.** The automatic import can be suppressed using the interpreterâ€™s [-S](https://docs.python.org/3/using/cmdline.html#cmdoption-S) option.

`site` attempts to write to this path, and fails because the volume is read-only: 
`/app/.venv/lib/python3.11/site-packages/_myapp_back_end.pth`

How do I get `uv` to be aware of running code on read-only volumes? Can `uv` suppress this by somehow calling python with the `-S` parameter?


---

_Comment by @zanieb on 2025-01-16 17:34_

You can probably use `uv run --no-dev python -S -m uvicorn ...`

It looks like there's an editable package or something writing the `.pth`? You could try not using an editable install or using a different build backend?

---

_Label `question` added by @zanieb on 2025-01-16 17:34_

---

_Comment by @straz on 2025-01-16 21:07_

Thank you @zanieb . I'll try your suggestion `uv run --no-dev python -S -m uvicorn ...`

The `.pth` file is being written by [site](https://docs.python.org/3/library/site.html), and it's not editable.
The only configurable option apparently is to use `python -S`.

Is fair to suggest creating a FAQ question for how to run `uv` on a read-only volume? I've also figured out I need to suppress or redirect `.cache`.

---

_Comment by @zanieb on 2025-01-16 21:22_

`.pth` files are generally used to power editable dependencies, e.g., `uv pip install --editable ./foo`. Why is `site` to writing this file in the first place?

> Is fair to suggest creating a FAQ question for how to run uv on a read-only volume? I've also figured out I need to suppress or redirect .cache.

I'm not sure yet. I think I need to understand more about what's going on. This isn't really a uv-specific problem.

---

_Comment by @straz on 2025-01-19 02:07_

Thanks for your help. I have no idea what makes `site` try to write a file - the doc page for `site` isn't particularly clear about this.

I'll try following the multistage [uv dockerfile example](https://github.com/astral-sh/uv-docker-example/blob/main/multistage.Dockerfile) which doesn't invoke `uv` in the deployed (read-only) stage.

---
