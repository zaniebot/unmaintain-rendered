<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is it possible to run workspace only dependencies command? - astral-sh/uv #9470</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is it possible to run workspace only dependencies command?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9470">#9470</a>
        opened by <a href="https://github.com/bepuca">@bepuca</a>
        on 2024-11-27 14:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bepuca">@bepuca</a></div>
            <div class="timeline-body"><p>I am working with workspaces and they work great.</p>
<p>One thing I'd like to do is to make sure that my code in one workspace is not leaking dependencies from another workspace. For now, I can ensure this by running the following commands:</p>
<pre><code class="language-shell">uv sync --package &quot;&lt;my_package&gt;&quot; --no-dev
uv run --package &quot;$component&quot; --no-dev python &quot;packages/&lt;my_package&gt;/something.py&quot;
uv sync
</code></pre>
<p>The problem with that is that it uninstalls and reinstalls stuff and is a bit slow, specially on the second sync. Is there an easy way to run it in ephemeral venv or something? Maybe it is but I could not find it. What would be the recommended way to do this?</p>
<p>Thank you very much!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-27 14:55</div>
            <div class="timeline-body"><p>I think if you use <code>uv run --isolated ...</code> we will use a separate environment.</p>
<p>How slow is the second sync?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bepuca">@bepuca</a> on 2024-11-27 15:30</div>
            <div class="timeline-body"><p>I knew I was missing something, thank you for the prompt reply. This works brilliantly.</p>
<p>The second sync is not super slow, maybe 10s, but one gets used to fast with <code>uv</code> ⚡ ⚡ ⚡</p>
<p>This project is amazing! (closing as issue is solved)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @bepuca on 2024-11-27 15:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-27 15:33</div>
            <div class="timeline-body"><p>Wonderful.</p>
<p>If you want to share some more details about that second sync, we can look into that too. 10s is slower than I'd expect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bepuca">@bepuca</a> on 2024-11-27 15:44</div>
            <div class="timeline-body"><p>Well, it basically reinstalls almost everything from scratch. What takes time is not the resolving but is the actual download + installs (and considering, this is quite fast). I am working inside a docker container and I have uv link mode copy (not sure if that is important info). Maybe the cache is messed up due to the setup.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-27 15:47</div>
            <div class="timeline-body"><p>Having a copy link mode would definitely slow things down. I'm not sure if we can do much better in an image, that makes more sense to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bepuca">@bepuca</a> on 2024-11-27 15:50</div>
            <div class="timeline-body"><p>It is fine, still like this is miles away from anything I used before. I can live with this speed. I see also that after one <code>--isolate</code> run, the subsequent ones reuse, which makes things fast too.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:28:35 UTC
    </footer>
</body>
</html>
