<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>skip username and password during pyx upload when user is already authenticated to pyx - astral-sh/uv #15758</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>skip username and password during pyx upload when user is already authenticated to pyx</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/15758">#15758</a>
        opened by <a href="https://github.com/JTP3XP">@JTP3XP</a>
        on 2025-09-09 15:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/JTP3XP">@JTP3XP</a> on 2025-09-09 15:51</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>This is a change in behavior from the alpha build to the v0.8.15 version. On the alpha build, when already authenticated to pyx, the upload command would not ask for a username and password:</p>
<pre><code>$ uv publish dist/...-2.0.0-py3-none-any.whl --publish-url https://api.pyx.dev/v1/upload/.../main
Publishing 1 file to https://api.pyx.dev/v1/upload/.../main
Uploading ...-2.0.0-py3-none-any.whl (16.6KiB)
</code></pre>
<p>This behavior felt great - the upload just runs without further input.</p>
<p>On v0.8.15 we get a username and password prompt that we can just continue past without providing any input and the upload works as before:</p>
<pre><code>$ uv publish dist/...-2.0.0-py3-none-any.whl --publish-url https://api.pyx.dev/v1/upload/.../main --verbose
DEBUG uv 0.8.15
Publishing 1 file to https://api.pyx.dev/v1/upload/.../main
DEBUG Using request timeout of 900s
Enter username ('__token__' if using a token):
Enter password:
Uploading ...-2.0.0-py3-none-any.whl (16.6KiB)
DEBUG Hashing dist/...-2.0.0-py3-none-any.whl
DEBUG Performing validation request for https://api.pyx.dev/v1/upload/.../main
DEBUG Using HTTP Basic authentication
DEBUG Access token is up-to-date (`2025-09-09T16:10:58Z`)
DEBUG Response code for https://api.pyx.dev/v1/upload/.../main/validate: 200 OK
DEBUG Using HTTP Basic authentication
DEBUG Response code for https://api.pyx.dev/v1/upload/../main: 200 OK
INFO Upload succeeded
</code></pre>
<p>I think the current behavior is not intuitive, because after running <code>uv auth login pyx.dev</code>, we technically do have a token, so the response <code>Enter username ('__token__' if using a token):</code> might make the user think they should enter <code>__token__</code> and then provide the token, but this is not necessary (though it works, regardless of whether or not the token is provided in the password field).</p>
<h3>Example</h3>
<p>My use case is very simple, so maybe there are situations this would break down, but for me the most intuitive result to running <code>uv publish</code> after authenticating to pyx would be that uv sees my publish url is <code>...pyx.dev...</code> and uses the token I have saved for <code>pyx.dev</code> to attempt the upload without further input from me.</p>
<p>If the username and password prompt makes sense to keep even with pyx authentication complete and a pyx publish url, then maybe we could have an option, like <code>--non-interactive</code> when we think uv will be able to figure out the credentials on its own.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @JTP3XP on 2025-09-09 15:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-09 15:52</div>
            <div class="timeline-body"><p>Sorry about that, will fix today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-09-09 15:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-09 15:53</div>
            <div class="timeline-body"><p>(I think this was an unintentional regression, likely my fault.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/15759.html">astral-sh/uv#15759</a> on 2025-09-09 16:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-09-09 16:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JTP3XP">@JTP3XP</a> on 2025-09-09 16:15</div>
            <div class="timeline-body"><p>Thanks for the fast response! h/t to @cmccabe2 for noticing this first</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-09 19:03</div>
            <div class="timeline-body"><p>We'll get this out today.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:05 UTC
    </footer>
</body>
</html>
