<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚Äúwarning: pyproject.toml does not contain `project` table‚Äù, though there is a [project] section - astral-sh/uv #5068</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>‚Äúwarning: pyproject.toml does not contain <code>project</code> table‚Äù, though there is a [project] section</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/5068">#5068</a>
        opened by <a href="https://github.com/MacLake">@MacLake</a>
        on 2024-07-15 10:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MacLake">@MacLake</a></div>
            <div class="timeline-body"><p>Since uv 0.2.5 up until the current version 0.2.24 I get the following warning every time I let uv resolve dependencies:</p>
<pre><code class="language-shell">$ uv pip compile -v -U ../../pyproject.toml --extra=dev -o dev-requirements.txt
warning: pyproject.toml does not contain `project` table: `/home/jens/develop`
DEBUG No workspace root found, using project root
DEBUG Starting interpreter discovery for any Python
DEBUG Looking for exact match for request any Python
DEBUG Searching for Python interpreter in all sources
DEBUG Found CPython 3.11.9 at `/home/jens/.virtualenvs/djangocms3.11/bin/python3` (active virtual environment)
DEBUG Using Python 3.11.9 interpreter at /home/jens/.virtualenvs/djangocms3.11/bin/python3 for builds
DEBUG Using registry request timeout of 30s
DEBUG Solving with target Python version 3.11.9
DEBUG Adding direct dependency: django*
[‚Ä¶]
</code></pre>
<p>There definitely is a <code>[project]</code> section in my <code>pyproject.toml</code>. My project root is in <code>/home/jens/develop/djangocms/</code>, <code>pyproject.toml</code>. is in that directory. The django and requirements files are in <code>/home/jens/develop/djangocms/src/django_cms</code>.  The warning also shows when I execute uv in the project root directory. It‚Äôs strange that the warning refers to the directory one level above the project root: <code>/home/jens/develop</code>.</p>
<p>My system is a current Manjaro Gnome, in my virtualenv I use Python 3.11.9 (for compatibility with the current Debian stable)..</p>
<p>Apart from the warning everything works fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-07-15 10:54</div>
            <div class="timeline-body"><p>Can you share the <code>pyproject.toml</code>, does it contain <code>name</code> and <code>version</code> field?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MacLake">@MacLake</a> on 2024-07-15 11:01</div>
            <div class="timeline-body"><p>Yes, sure, here it is (I just changed the e-mail address):</p>
<pre><code class="language-toml">[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;

[project]
name = &quot;django-cms-for-phi&quot;
dynamic = [&quot;version&quot;]
description = 'Websites for the Passive House Institute'
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.11&quot;
keywords = []
authors = [
    { name = &quot;Jens-Erik Weber&quot;, email = &quot;Jens-Erik.Weber@xxxxxx.xx&quot; },
]
classifiers = [
    &quot;Programming Language :: Python&quot;,
    &quot;Programming Language :: Python :: 3.11&quot;,
    &quot;Programming Language :: Python :: 3.12&quot;,
    &quot;Framework :: Django CMS&quot;,
    &quot;Framework :: Django CMS :: 3.11&quot;,

]
dependencies = [
    # *: package written for PHI and outsourced as an own pip package
    &quot;Django&quot;,
    &quot;django-autocomplete-light&quot;,
    &quot;django_auth_ldap&quot;,  # LDAP login
    &quot;django-ckeditor&quot;,  # TODO: Do we still need this?
    &quot;django-cleanup&quot;,  # Deletes old files
    &quot;django-cms&lt;4&quot;,  # Lean enterprise content management powered by Django.
    &quot;django-countries&quot;,  # Provides a country field for Django models.
    &quot;django-email-obfuscator&quot;,  # A Django template filter to protect email addresses from crawlers
    &quot;django-extensions&quot;,  # Extensions for Django
    &quot;django-filer&quot;,  # A file management application for django
    &quot;django-logentry-admin&quot;,   # Show all LogEntry objects in the Django admin site.
    &quot;djangocms-link&quot;,  # Adds a link plugin to django CMS
    &quot;django-modeltranslation&quot;,  # Translates Django models using a registration approach. TODO: replace with django-parler
    &quot;django-nested-admin&quot;,  # Django admin classes that allow for nested inlines
    &quot;django-nested-inline&quot;, # Recursive nesting of inline forms for Django Admin, Django 4.0 compatibility
    &quot;django-parler&quot;,  # Model translations
    &quot;django-select2&quot;,  # Select2 option fields for Django (autocomplete)
    &quot;django-softhyphen&quot;,  # hyphenating HTML
    &quot;django-templated-email&quot;,  # A Django oriented templated / transaction email abstraction
    &quot;aldryn-boilerplates&quot;,  # Needed for django CMS extensions, remove if not required anymore
    &quot;aldryn_apphooks_config&quot;,  # Needed for django CMS extensions, remove if not required anymore
    &quot;djangocms-blog&quot;,  # The blog application for django CMS
    &quot;djangocms-column&quot;,  # Remove if not required anymore
    &quot;djangocms-events&quot;,  # Events list and calendar for django CMS *
    &quot;djangocms-file&quot;,  # Adds file plugin to django CMS
    &quot;djangocms-fomantic-ui&gt;=0.0.2b5&quot;,  # Fomantic UI for django CMS *
    &quot;djangocms-photo-gallery&quot;,  # *
    &quot;djangocms-googlemap&quot;,  # Adds Google Maps plugins to django CMS.
    &quot;djangocms-history&quot;,  # Adds undo/redo functionality to django CMS
    &quot;djangocms-icon&quot;,  # Adds icon plugin to django CMS
    &quot;djangocms_katex&quot;,  # Provides plugin to render formulae in django CMS
    'djangocms-leaflet',  # Leaflet/OSM plugin *
    &quot;djangocms-page-sitemap&quot;,  # django CMS page extension to handle sitemap customization
    &quot;djangocms-picture&quot;,  # Adds an image plugin to django CMS
    &quot;djangocms-snippet&quot;,  # Adds snippet plugin to django CMS
    &quot;djangocms-style&quot;,  # Adds style plugin to django CMS
    &quot;djangocms-text-ckeditor&quot;,  # Text Plugin for django CMS with CKEditor support
    &quot;djangocms-video&quot;,  # Adds video plugin to django CMS, TODO: Do we still need this?
    &quot;easy-thumbnails&quot;,  # Easy thumbnails for Django
    &quot;gunicorn&quot;,  # WSGI HTTP Server for UNIX
    &quot;nh3&quot;,  # Ammonia HTML sanitizer Python binding
    &quot;html2text&quot;, # Turn HTML into equivalent Markdown-structured text. https://github.com/Alir3z4/html2text/
    &quot;Markdown&quot;,  # Python implementation of John Gruber's Markdown.
    &quot;psycopg[binary]&quot;,  # PostgreSQL database adapter for Python
    &quot;PyJWT&quot;, # JSON Web Token implementation in Python (for Zoom  API in tickets app)
    &quot;python-ldap&quot;,
    &quot;reportlab&quot;, #  PDF library http://www.reportlab.com/ (for abstracts)
    &quot;requests&quot;,  # Python HTTP for Humans
    &quot;udm-rest-client&quot;,  # For Univention UDM REST API, login
    &quot;django-debug-toolbar&quot;, #  debug information about the current request/response
    &quot;pip-tools&quot;, # pip-tools keeps your pinned dependencies fresh.
    &quot;uv&quot;,  # An extremely fast Python package installer and resolver, written in Rust.
]

[project.optional-dependencies]
dev = [
    &quot;yapf&quot;, # A formatter for Python code
    &quot;isort&quot;, # A Python utility / library to sort Python imports.
    &quot;flake8&quot;, # the modular source code checker: pep8 pyflakes and co
    &quot;ruff&quot;, # An extremely fast Python linter and code formatter, written in Rust.
    &quot;pre-commit&quot;, # A framework for managing and maintaining multi-language pre-commit hooks.
    &quot;MonkeyType&quot;, # Generating type annotations from sampled production types
    &quot;mypy&quot;, # Optional static typing for Python
    &quot;safety&quot;, # Checks installed dependencies for known vulnerabilities and licenses.
    &quot;ipython-genutils&quot;, # Vestigial utilities from IPython http://ipython.org
    &quot;ptpython&quot;, # Python REPL build on top of prompt_toolkit https://github.com/prompt-toolkit/ptpython
    &quot;pipdeptree&quot;, # Command line utility to show dependency tree of packages
    &quot;coverage&quot;, # Code coverage measurement for Python
]

[project.urls]
Documentation = &quot;https://gitea.passiv.net/PHI/djangocms/src/branch/master/README.md&quot;
Issues = &quot;https://gitea.passiv.net/PHI/djangocms/issues&quot;
Source = &quot;https://gitea.passiv.net/PHI/djangocms&quot;

[tool.hatch.version]
path = &quot;__about__.py&quot;

[tool.hatch.envs.default]
dependencies = [
    &quot;coverage[toml]&gt;=6.5&quot;,
    &quot;pytest&quot;,
]
[tool.hatch.envs.default.scripts]
test = &quot;pytest {args:tests}&quot;
test-cov = &quot;coverage run -m pytest {args:tests}&quot;
cov-report = [
    &quot;- coverage combine&quot;,
    &quot;coverage report&quot;,
]
cov = [
    &quot;test-cov&quot;,
    &quot;cov-report&quot;,
]

[[tool.hatch.envs.all.matrix]]
python = [&quot;3.11&quot;, &quot;3.12&quot;]

[tool.hatch.envs.lint]
detached = true
dependencies = [
    &quot;black&gt;=23.1.0&quot;,
    &quot;mypy&gt;=1.0.0&quot;,
    &quot;ruff&gt;=0.0.243&quot;,
]
[tool.hatch.envs.lint.scripts]
typing = &quot;mypy --install-types --non-interactive {args:django_cms_for_phi tests}&quot;
style = [
    &quot;ruff {args:.}&quot;,
    &quot;black --check --diff {args:.}&quot;,
]
[tool.hatch.metadata]
allow-direct-references = true

fmt = [
    &quot;black {args:.}&quot;,
    &quot;ruff --fix {args:.}&quot;,
    &quot;style&quot;,
]
all = [
    &quot;style&quot;,
    &quot;typing&quot;,
]

[tool.yapf]
based_on_style = &quot;facebook&quot;
SPLIT_BEFORE_BITWISE_OPERATOR = true
SPLIT_BEFORE_ARITHMETIC_OPERATOR = true
SPLIT_BEFORE_LOGICAL_OPERATOR = true
SPLIT_BEFORE_DOT = true

[tool.yapfignore]
ignore_patterns = [
]

[tool.black]
line-length = 120
skip-string-normalization = true

[tool.ruff]
line-length = 120
# Enumerate all fixed violations.
show-fixes = true

[tool.ruff.lint]
select = [
    &quot;E&quot;,  # pycodestyle error
    &quot;W&quot;,  # pycodestyle warning
    &quot;F&quot;,  # Pyflakes
    &quot;I&quot;,  # isort
    &quot;UP&quot;,  # pyupgrade
    &quot;DJ&quot;,  # flake8-django
]
ignore = [
]
unfixable = [
    &quot;F841&quot;,  # unused variable
]
[tool.ruff.lint.isort]
known-first-party = [&quot;django_cms_for_phi&quot;]

[tool.ruff.lint.per-file-ignores]
&quot;*/migrations/*&quot; = [&quot;E501&quot;]  # Line too long
&quot;*settings*.py&quot; = [&quot;F403&quot;, &quot;F405&quot;]  # star imports

[tool.coverage.run]
source_pkgs = [&quot;django_cms_for_phi&quot;, &quot;tests&quot;]
branch = true
parallel = true
omit = [
    &quot;django_cms_for_phi/__about__.py&quot;,
]

[tool.coverage.paths]
django_cms_for_phi = [&quot;django_cms_for_phi&quot;, &quot;*/django-cms-for-phi/django_cms_for_phi&quot;]
tests = [&quot;tests&quot;, &quot;*/django-cms-for-phi/tests&quot;]

[tool.coverage.report]
exclude_lines = [
    &quot;no cov&quot;,
    &quot;if __name__ == .__main__.:&quot;,
    &quot;if TYPE_CHECKING:&quot;,
]

[tool.pip-tools]
generate-hashes = false

[tool.rye]
managed = true
virtual = true
# Should be the same as dev in [project.optional-dependencies]
dev-dependencies = [
    &quot;yapf&quot;, # A formatter for Python code
    &quot;isort&quot;, # A Python utility / library to sort Python imports.
    &quot;flake8&quot;, # the modular source code checker: pep8 pyflakes and co
    &quot;ruff&quot;, # An extremely fast Python linter and code formatter, written in Rust.
    &quot;pre-commit&quot;, # A framework for managing and maintaining multi-language pre-commit hooks.
    &quot;MonkeyType&quot;, # Generating type annotations from sampled production types
    &quot;mypy&quot;, # Optional static typing for Python
    &quot;safety&quot;, # Checks installed dependencies for known vulnerabilities and licenses.
    &quot;ipython-genutils&quot;, # Vestigial utilities from IPython http://ipython.org
    &quot;ptpython&quot;, # Python REPL build on top of prompt_toolkit https://github.com/prompt-toolkit/ptpython
    &quot;pipdeptree&quot;, # Command line utility to show dependency tree of packages
    &quot;coverage&quot;, # Code coverage measurement for Python
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-15 13:16</div>
            <div class="timeline-body"><p>Thanks, likely due to <code>dynamic = [&quot;version&quot;]</code>. Will adjust.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-15 13:24</div>
            <div class="timeline-body"><p>Umm, do you have a <code>pyproject.toml</code> in a directory <em>above</em> your project that's missing a <code>project</code> table?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-15 13:25</div>
            <div class="timeline-body"><p>I can't reproduce by running on the <code>pyproject.toml</code> above.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/skshetry">@skshetry</a> on 2024-07-16 13:02</div>
            <div class="timeline-body"><p>@charliermarsh, we get the same warning on a monorepo where we have a <code>pyproject.toml</code> for <code>ruff</code> config at the root of the repository. I get this warning when I try to <code>uv pip install</code> from the project's directory. The root config does not have <code>[project]</code> table.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-16 13:04</div>
            <div class="timeline-body"><p>@skshetry - I think in that case the warning is &quot;working as intended&quot;, but perhaps we need to reconsider showing it at all.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-16 13:05</div>
            <div class="timeline-body"><p>(If you don't have a &quot;project&quot;, it might make sense to use a <code>ruff.toml</code> instead of a <code>pyproject.toml</code>?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/skshetry">@skshetry</a> on 2024-07-16 13:22</div>
            <div class="timeline-body"><p>Although that would be the right approach, not everyone on my team prefers using <code>ruff.toml</code>, as they don't want to have special configuration file for each tool. I understand the implication of having a <code>pyproject.toml</code> file, but I did not expect <code>uv</code> to raise a warning for the parent configuration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MacLake">@MacLake</a> on 2024-07-17 06:32</div>
            <div class="timeline-body"><blockquote>
<p>Umm, do you have a <code>pyproject.toml</code> in a directory <em>above</em> your project that's missing a <code>project</code> table?</p>
</blockquote>
<p>Yes, that was causing the warning. Thanks for pointing me to this. I must have put it temporarily there and forgot about it, and this <code>pyproject.toml</code> actually didn‚Äôt have a <code>[project]</code>  table. After deleting it, the warning has gone.</p>
<p>Anyway, I wonder if it makes sense that it uv traverses directories above the project root to search for another <code>pyproject.toml</code> . Versions before 0.2.5 don‚Äôt show this warning.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-07-17 07:06</div>
            <div class="timeline-body"><p>We're traversing upwards to find a workspace root, to support workspace dependencies and a per-workspace lockfile and venv (currently preview features).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-17 17:44</div>
            <div class="timeline-body"><p>I guess we should display the full path to the <code>pyproject.toml</code> instead of the parent directory to help make this warning clearer?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-07-17 19:46</div>
            <div class="timeline-body"><p>#5069 should have fixed that part</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-17 19:58</div>
            <div class="timeline-body"><p>I think we probably need to make this a <code>warn!</code> rather than <code>warn_user!</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-18 03:33</div>
            <div class="timeline-body"><p>Yeah tracing seems reasonable to me üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">tracing</span> added by @zanieb on 2024-07-18 03:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @zanieb on 2024-07-18 03:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-07-18 14:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-07-18 18:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:25:36 UTC
    </footer>
</body>
</html>
