<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[feat] `uv python upgrade` or `uv python install --upgrade` - astral-sh/uv #7892</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[feat] <code>uv python upgrade</code> or <code>uv python install --upgrade</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7892">#7892</a>
        opened by <a href="https://github.com/baggiponte">@baggiponte</a>
        on 2024-10-03 09:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/baggiponte">@baggiponte</a> on 2024-10-03 09:15</div>
            <div class="timeline-body"><p>Ciao! New python versions are coming out and I wonder if uv can behave a bit more like <code>mise</code> or other devtools in that it can upgrade the python versions. For example, @hynek teased a video about how he uses <a href="https://pypi.org/project/MOPUp/"><code>MOPup</code></a> to keep his Python versions updated ~~and it would be fun to ruin his plans once again~~.</p>
<p>Jokes aside, I think it might be useful to either have a way to see if local python versions are outdated (<code>uv python list --outdated</code>?) and possibly a <code>uv python install --upgrade</code>. For example, I think <code>uv python install --upgrade 3.12</code> automatically downloads the 3.12 release from yesterday (3.12.7 was released) and, if I have an older one, removes that (since the user is explicitly asking for an update).</p>
<p>Currently, <code>uv python install 3.12</code> does not download anything if there is a 3.12 version already installed on the machine.</p>
<p>This can be a bit of a pain to implement in that it requires all tools installed with a specific python version to a. be reinstalled or b. be modified to point to the new python path.</p>
<p>I searched the issue tab but could not find a similar issue. Feel free to close.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/j178">@j178</a> on 2024-10-03 14:08</div>
            <div class="timeline-body"><p>This gonna be pretty tricky, as managed Python installations are tied to specific locations based on installation key, which include the full version information. Not only the installed tools, but all venvs created using that Python installation, all of which would need to be recreated as well.</p>
<p>I'm thinking to introduce an intermediary layer between the user and the specific Python installation, called <code>alias</code> for the time.</p>
<p>Proposed operations:</p>
<p><code>uv python alias &lt;alias&gt; &lt;python-request&gt;</code>: Create/update an alias. This would create an alias to a Python installation based on the resolved Python request. To upgrade or switch the alias to another Python installation, simply rerun the command with a different <code>&lt;python-request&gt;</code>.</p>
<p>Implementation details:</p>
<ul>
<li>Aliases would be created as symbolic links to Python interpreters (managed or system) in <code>~/.local/share/uv/python/alias/</code>.</li>
<li>The <code>--python &lt;python-request&gt;</code> option should support these aliases.</li>
<li>Python discovery needs to be updated to include alias lookup, potentially with higher priority.</li>
<li>Removal of aliases can be handled by the existing <code>uv python uninstall</code> command.</li>
<li>Listing aliases can be incorporated into the <code>uv python list --with-aliases</code> command.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-03 14:15</div>
            <div class="timeline-body"><p>There are a couple related issues</p>
<ul>
<li>#7287</li>
<li>#4718</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/baggiponte">@baggiponte</a> on 2024-10-03 14:38</div>
            <div class="timeline-body"><blockquote>
<p>Not only the installed tools, but all venvs created using that Python installation, all of which would need to be recreated as well.</p>
</blockquote>
<p>Completely forgot about this. You are totally right, this is going to be a total PITA to implement ðŸ˜±  I <em>think</em> that if a user deliberately invokes the command should be aware of the consequences (for venvs at least; perhaps not for tools) and might be informed via a message. But I also see reasons against doing this :)</p>
<p>I guess that, as a starter, it <em>could</em> be handy if <code>uv python install 3.12</code> would install the latest version, if there's a new one not yet installed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-03 14:51</div>
            <div class="timeline-body"><p>@baggiponte if you use <code>uv python install 3.12 --reinstall</code> we will upgrade it â€” we can add an <code>--upgrade</code> option that only reinstalls on upgrade though. Otherwise <code>uv python install 3.12</code> will exit happily if the request is satisfied, in the same way as <code>uv pip install ruff</code> if you already have <code>ruff</code> installed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/baggiponte">@baggiponte</a> on 2024-10-03 17:15</div>
            <div class="timeline-body"><blockquote>
<p>@baggiponte if you use <code>uv python install 3.12 --reinstall</code> we will upgrade it â€” we can add an <code>--upgrade</code> option that only reinstalls on upgrade though. Otherwise <code>uv python install 3.12</code> will exit happily if the request is satisfied, in the same way as <code>uv pip install ruff</code> if you already have <code>ruff</code> installed.</p>
</blockquote>
<p>I guess, problem solved:</p>
<pre><code class="language-bash">uv python install --reinstall 3.{9,10,11,12}
Searching for Python versions matching: Python 3.10
Found existing installation for Python 3.10: cpython-3.10.14-macos-aarch64-none
Searching for Python versions matching: Python 3.11
Found existing installation for Python 3.11: cpython-3.11.9-macos-aarch64-none
Searching for Python versions matching: Python 3.12
Found existing installation for Python 3.12: cpython-3.12.5-macos-aarch64-none
Searching for Python versions matching: Python 3.9
Found existing installation for Python 3.9: cpython-3.9.19-macos-aarch64-none
Installed 4 versions in 11.25s
 - cpython-3.9.19-macos-aarch64-none
 + cpython-3.9.20-macos-aarch64-none
 - cpython-3.10.14-macos-aarch64-none
 + cpython-3.10.15-macos-aarch64-none
 - cpython-3.11.9-macos-aarch64-none
 + cpython-3.11.10-macos-aarch64-none
 - cpython-3.12.5-macos-aarch64-none
 + cpython-3.12.6-macos-aarch64-none
</code></pre>
<p>I'm kinda happy with this. If you think it makes sense, I'd be willing to document this behaviour in the docs ðŸ˜Š</p>
<p>EDIT:</p>
<p>of course, after this I ran <code>uv tool upgrade --all</code> and it rightfully complained:</p>
<pre><code>Failed to upgrade `argcomplete`: `argcomplete` is not installed; run `uv tool install argcomplete` to install
Failed to upgrade `asitop`: `asitop` is not installed; run `uv tool install asitop` to install
Failed to upgrade `azure-cli`: `azure-cli` is not installed; run `uv tool install azure-cli` to install
Failed to upgrade `commitizen`: `commitizen` is not installed; run `uv tool install commitizen` to install
Failed to upgrade `cookiecutter`: `cookiecutter` is not installed; run `uv tool install cookiecutter` to install
Failed to upgrade `huggingface-hub`: `huggingface-hub` is not installed; run `uv tool install huggingface-hub` to install
Failed to upgrade `jupytext`: `jupytext` is not installed; run `uv tool install jupytext` to install
Failed to upgrade `mypy`: `mypy` is not installed; run `uv tool install mypy` to install
Failed to upgrade `pytest`: `pytest` is not installed; run `uv tool install pytest` to install
Failed to upgrade `ruff`: `ruff` is not installed; run `uv tool install ruff` to install
</code></pre>
<p>I tried <code>uv tool upgrade --all --reinstall</code> but it did not work. I wonder if it made sense to have a sort of &quot;symmetry&quot;/combination of the two flags?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssbarnea">@ssbarnea</a> on 2024-12-27 12:22</div>
            <div class="timeline-body"><p>Clearly we would want one single command that could upgrade all pythons that will be idempotent (not do anything if newer versions are not found).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jtfmumm on 2025-06-20 14:17</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:44 UTC
    </footer>
</body>
</html>
