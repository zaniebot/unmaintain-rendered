<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv build does not validate entry points in &quot;project.scripts&quot; - astral-sh/uv #14210</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv build does not validate entry points in &quot;project.scripts&quot;</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/14210">#14210</a>
        opened by <a href="https://github.com/stmlange">@stmlange</a>
        on 2025-06-23 06:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/stmlange">@stmlange</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hello UV-Team,
first of all - thanks for the amazing uv-tool!
Maybe this is something I'm missing, but it seems that a &quot;uv build&quot; does not validate or verify the entry points in &quot;project.scripts&quot; that may be defined in a <code>pyproject.toml</code>.</p>
<p>Consider for example:</p>
<ol>
<li>create new project using <code>uv init --package dummy</code></li>
<li>change &quot;project.scripts&quot; in <code>pyproject.toml</code> to</li>
</ol>
<pre><code>[project.scripts]
dummy = &quot;dummy:main&quot;
dummy_one = &quot;dummy:main_does_not_exist&quot;
dummy_two = &quot;dummy.example:main_does_not_exist&quot;
</code></pre>
<ol start="3">
<li>Install project into venv:</li>
</ol>
<pre><code>uv build
uv venv
.venv\Scripts\activate
uv pip install dist\dummy-0.1.0-py3-none-any.whl
</code></pre>
<ol start="4">
<li>Trying to use the non-existent <code>dummy_one</code> or <code>dummy_two</code> will fail:</li>
</ol>
<pre><code>λ .venv\Scripts\dummy_one
Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
    from dummy import main_does_not_exist
ImportError: cannot import name 'main_does_not_exist' from 'dummy' 
</code></pre>
<p>and</p>
<pre><code>λ .venv\Scripts\dummy_two
Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
    from dummy.example import main_does_not_exist
ModuleNotFoundError: No module named 'dummy.example'
</code></pre>
<p>Goal: validate and ensure entry points can be used</p>
<h3>Platform</h3>
<p>Windows</p>
<h3>Version</h3>
<p>uv 0.7.2 (481d05d8d 2025-04-30)</p>
<h3>Python version</h3>
<p>Python 3.13.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @stmlange on 2025-06-23 06:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @konstin on 2025-06-23 08:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @konstin on 2025-06-23 08:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-06-23 08:35</div>
            <div class="timeline-body"><p>I don't think it's possible properly to validate these at build time, as it possible to set symbols dynamically at runtime, scripts need to be tested through integration tests instead.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stmlange">@stmlange</a> on 2025-06-23 09:12</div>
            <div class="timeline-body"><p>Thanks for your feedback!
Yeah there might be some corner cases where people add entry scripts dynamically, but couldn't a uv build validate at least the ones that are are actually hard-coded (statically) in the pyproject.toml?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @konstin on 2025-06-23 09:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @konstin on 2025-06-23 09:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-06-23 09:46</div>
            <div class="timeline-body"><p>For the validation, it would make more sense for the build backend such as hatchling (which includes scripts and files) to validate these than for uv to open the wheel and check it. This would only cover a part of the ways an entrypoint can be broken, so I'd rather recommend executing entrypoints as parts of the test suite, which does cover missing files and symbols and the other problems too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/paveldikov">@paveldikov</a> on 2025-12-22 18:12</div>
            <div class="timeline-body"><p>In the meantime, I have been able to use a type checker to implement this type of validation (currently <code>mypy</code>, but I imagine <code>ty</code> will be up to the task too).</p>
<p>Basically, for each entrypoint, generate a <code>from ... import ...</code> one-liner, then feed that into a type-checker with a strongly abridged set of validation rules (to stop it from getting tripped on unrelated issues, or waste a bunch of time consuming third-party modules), and then post-process any errors coming from the type checker.</p>
<p>IMHO: I do think this should eventually be a first-class part of a linter, preferably <code>ruff</code>, although that is currently type-unaware (and all type-aware functionality is for <code>ty</code> use only.)</p>
<p>See also this proposal I made for a <code>PROJ</code> set of <code>ruff</code> rules: https://github.com/astral-sh/ruff/discussions/17771</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:31:52 UTC
    </footer>
</body>
</html>
