```yaml
number: 11199
title: "Improve incompatible `.python-version` error message suggestion"
type: issue
state: open
author: edmorley
labels:
  - enhancement
  - error messages
assignees: []
created_at: 2025-02-03T22:14:34Z
updated_at: 2025-02-03T22:25:39Z
url: https://github.com/astral-sh/uv/issues/11199
synced_at: 2026-01-10T01:57:25Z
```

# Improve incompatible `.python-version` error message suggestion

---

_Issue opened by @edmorley on 2025-02-03 22:14_

### Summary

Currently with uv `0.5.26`, if the Python version in `.python-version` is incompatible with the `requires-python` in `pyproject.toml` an error like the the following is shown (added by #9590):

```
$ uv init --python 3.13 testcase-uv && cd $_
Initialized project `testcase-uv` at `/Users/emorley/src/testcase-uv`
$ echo '3.12' > .python-version
$ uv sync
Using CPython 3.12.8 interpreter at: /opt/homebrew/opt/python@3.12/bin/python3.12
error: The Python request from `.python-version` resolved to Python 3.12.8, which is incompatible with the
project's Python requirement: `>=3.13`. Use `uv python pin` to update the `.python-version` file to a
compatible version.
```

However, if I take the error message literally, and run just `uv python pin`, I then am shown this:

```
$ uv python pin
3.12
warning: The pinned Python version `3.12` is incompatible with the project `requires-python` value of `>=3.13`.
```

Instead I need to have either:
1. Run `uv python pin 3.13`
2. Or, have updated `requires-python` in `pyproject.toml` instead

### Example


I think what would help, is some/all of:
1. The original error message to instead say: ```Use `uv python pin VERSION` ...``` - where for bonus points `VERSION` is the actual compatible version number rather than just a static placeholder.
2. For `uv python pin` to either have an update option (eg `uv python pin --update` or `uv python pin --compatible`) which is then mentioned in both of the error/warning messages output above. Or else for the bare `uv python pin` command to update the `.python-version` file automatically/after prompting.
3. (For bonus points) The original `uv sync` error message to explain where the `>=3.13` version came from (ie: `requires-python` in `pyproject.toml`) - since I imagine there will be users who used `uv init` and have no idea that it's set there.

Origin of the current wordings:
https://github.com/astral-sh/uv/blob/efbc77bc3743d8cccf07d7a169cd19239638a59b/crates/uv/src/commands/project/mod.rs#L97
https://github.com/astral-sh/uv/blob/dd7cd2e86a6d26f6efacd64de4201a5d43a028de/crates/uv/src/commands/python/pin.rs#L288


---

_Label `enhancement` added by @edmorley on 2025-02-03 22:14_

---

_Assigned to @zanieb by @zanieb on 2025-02-03 22:17_

---

_Comment by @zanieb on 2025-02-03 22:19_

Agree these should be better.

As a minor note, I was thinking of using `--update` for updating a discovered file (which may be in a parent directory) rather than creating a new one: https://github.com/astral-sh/uv/blob/434706389b0a03bed30bfe25dbe5a1b478ee5695/crates/uv/src/commands/python/pin.rs#L129

---

_Comment by @edmorley on 2025-02-03 22:21_

(Btw feel free to treat this and the next few error message UX type issues I'll be filing as low priority - they are for random things I ran into whilst writing integration tests / trying to break things etc, rather than blockers)

---

_Comment by @zanieb on 2025-02-03 22:23_

It's so hard to extract a suggestible value from an arbitrary `requires-python` value. We may need to do something like... only suggest when it's a simple lower bound expression? Probably doable if someone digs into it â€” I presume that's why we're not doing it now though.

---

_Label `error messages` added by @zanieb on 2025-02-03 22:23_

---

_Unassigned @zanieb by @zanieb on 2025-02-03 22:23_

---

_Comment by @edmorley on 2025-02-03 22:25_

Maybe static `<VERSION>` type placeholder it is then ðŸ˜† 

---
