<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can't pin existing version of numpy - astral-sh/uv #12549</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Can't pin existing version of numpy</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12549">#12549</a>
        opened by <a href="https://github.com/RyanBlace">@RyanBlace</a>
        on 2025-03-30 03:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/RyanBlace">@RyanBlace</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I can't figure out a shorter way of making this happen, so here it goes:</p>
<p>❯ uv init -p 3.8.20
Initialized project <code>testuv</code></p>
<p>❯ uv add scipy==1.7.3
Using CPython 3.8.20
Creating virtual environment at: .venv
Resolved 3 packages in 308ms
Prepared 2 packages in 9.12s
Installed 2 packages in 248ms</p>
<ul>
<li>numpy==1.22.4</li>
<li>scipy==1.7.3</li>
</ul>
<p>❯ uv add numpy==1.20.0
Resolved 3 packages in 14ms
Uninstalled 1 package in 105ms
Installed 1 package in 124ms</p>
<ul>
<li>numpy==1.22.4</li>
</ul>
<ul>
<li>numpy==1.20.0</li>
</ul>
<p>❯ uv add xgboost==2.0.0
Resolved 4 packages in 15ms
Installed 1 package in 12ms</p>
<ul>
<li>xgboost==2.0.0</li>
</ul>
<p>❯ uv tree
Resolved 4 packages in 0.95ms
testuv v0.1.0
├── numpy v1.20.0
├── scipy v1.7.3
│   └── numpy v1.20.0
└── xgboost v2.0.0
├── numpy v1.20.0
└── scipy v1.7.3 (<em>)
(</em>) Package tree already displayed</p>
<p>❯ uv remove numpy
Resolved 4 packages in 14ms
Audited 3 packages in 0.01ms</p>
<p>❯ uv tree
Resolved 4 packages in 1ms
testuv v0.1.0
├── scipy v1.7.3
│   └── numpy v1.20.0
└── xgboost v2.0.0
├── numpy v1.20.0
└── scipy v1.7.3 (<em>)
(</em>) Package tree already displayed</p>
<p>❯ uv add pandas==1.3.5
Resolved 9 packages in 19ms
Installed 4 packages in 298ms</p>
<ul>
<li>pandas==1.3.5</li>
<li>python-dateutil==2.9.0.post0</li>
<li>pytz==2025.2</li>
<li>six==1.17.0</li>
</ul>
<p>❯ uv tree
Resolved 9 packages in 1ms
testuv v0.1.0
├── pandas v1.3.5
│   ├── numpy v1.20.0
│   ├── python-dateutil v2.9.0.post0
│   │   └── six v1.17.0
│   └── pytz v2025.2
├── scipy v1.7.3
│   └── numpy v1.20.0
└── xgboost v2.0.0
├── numpy v1.20.0
└── scipy v1.7.3 (<em>)
(</em>) Package tree already displayed</p>
<p>❯ uv add numpy==1.20.0
× No solution found when resolving dependencies for split (python_full_version &gt;= '3.10'):
╰─▶ Because only the following versions of numpy{python_full_version &gt;= '3.10'} are available:
numpy{python_full_version &gt;= '3.10'}&lt;=1.21.0
numpy{python_full_version &gt;= '3.10'}==1.21.1
numpy{python_full_version &gt;= '3.10'}==1.21.2
numpy{python_full_version &gt;= '3.10'}==1.21.3
numpy{python_full_version &gt;= '3.10'}==1.21.4
numpy{python_full_version &gt;= '3.10'}==1.21.5
numpy{python_full_version &gt;= '3.10'}==1.21.6
numpy{python_full_version &gt;= '3.10'}==1.22.0
numpy{python_full_version &gt;= '3.10'}==1.22.1
numpy{python_full_version &gt;= '3.10'}==1.22.2
numpy{python_full_version &gt;= '3.10'}==1.22.3
numpy{python_full_version &gt;= '3.10'}==1.22.4
numpy{python_full_version &gt;= '3.10'}==1.23.0
numpy{python_full_version &gt;= '3.10'}==1.23.1
numpy{python_full_version &gt;= '3.10'}==1.23.2
numpy{python_full_version &gt;= '3.10'}==1.23.3
numpy{python_full_version &gt;= '3.10'}==1.23.4
numpy{python_full_version &gt;= '3.10'}==1.23.5
numpy{python_full_version &gt;= '3.10'}==1.24.0
numpy{python_full_version &gt;= '3.10'}==1.24.1
numpy{python_full_version &gt;= '3.10'}==1.24.2
numpy{python_full_version &gt;= '3.10'}==1.24.3
numpy{python_full_version &gt;= '3.10'}==1.24.4
numpy{python_full_version &gt;= '3.10'}==1.25.0
numpy{python_full_version &gt;= '3.10'}==1.25.1
numpy{python_full_version &gt;= '3.10'}==1.25.2
numpy{python_full_version &gt;= '3.10'}==1.26.0
numpy{python_full_version &gt;= '3.10'}==1.26.1
numpy{python_full_version &gt;= '3.10'}==1.26.2
numpy{python_full_version &gt;= '3.10'}==1.26.3
numpy{python_full_version &gt;= '3.10'}==1.26.4
numpy{python_full_version &gt;= '3.10'}==2.0.0
numpy{python_full_version &gt;= '3.10'}==2.0.1
numpy{python_full_version &gt;= '3.10'}==2.0.2
numpy{python_full_version &gt;= '3.10'}==2.1.0
numpy{python_full_version &gt;= '3.10'}==2.1.1
numpy{python_full_version &gt;= '3.10'}==2.1.2
numpy{python_full_version &gt;= '3.10'}==2.1.3
numpy{python_full_version &gt;= '3.10'}==2.2.0
numpy{python_full_version &gt;= '3.10'}==2.2.1
numpy{python_full_version &gt;= '3.10'}==2.2.2
numpy{python_full_version &gt;= '3.10'}==2.2.3
numpy{python_full_version &gt;= '3.10'}==2.2.4
and pandas==1.3.5 depends on numpy{python_full_version &gt;= '3.10'}&gt;=1.21.0, we can conclude that pandas==1.3.5 depends on numpy&gt;=1.21.0.
And because your project depends on numpy==1.20.0 and pandas==1.3.5, we can conclude that your project's requirements are unsatisfiable.</p>
<pre><code>  hint: Pre-releases are available for `numpy` in the requested range (e.g., 2.2.0rc1), but pre-releases weren't enabled (try: `--prerelease=allow`)</code></pre>
<p>help: If you want to add the package regardless of the failed resolution, provide the <code>--frozen</code> flag to skip locking and syncing.</p>
<p>─────────</p>
<p>As you can see, numpy is currently 1.20.0, but I can't add that to the pyproject.toml.</p>
<h3>Platform</h3>
<p>Microsoft Windows [Version 10.0.19045.5608]</p>
<h3>Version</h3>
<p>uv 0.6.10 (f2a2d982b 2025-03-25)</p>
<h3>Python version</h3>
<p>uv init -p 3.8.20</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @RyanBlace on 2025-03-30 03:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-30 15:27</div>
            <div class="timeline-body"><p>I think this is right. You've pinned <code>pandas==1.3.5</code>, and now you're trying to pin <code>numpy==1.20.0</code> on <em>all</em> platforms. But Pandas has <code>Requires-Dist: numpy (&gt;=1.21.0) ; python_version &gt;= &quot;3.10&quot;</code>. So now you've asked for an invalid set of requirements for Python 3.10 and later.</p>
<p><code>uv tree</code> shows 1.20.0 because it shows the resolved dependencies for <em>your</em> machine by default. (You can run <code>uv tree --universal</code> to view all dependencies for all platforms.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2025-03-30 15:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2025-03-30 15:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-30 15:31</div>
            <div class="timeline-body"><p>If you don't care about Python 3.10 or later, you could do something like:</p>
<pre><code class="language-toml">[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.8&quot;
dependencies = [
    &quot;numpy==1.20.0&quot;,
    &quot;pandas==1.3.5&quot;,
]

[tool.uv]
environments = [&quot;python_full_version == '3.8.*'&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-03-30 15:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-03-30 15:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:30:41 UTC
    </footer>
</body>
</html>
