<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove (or ensure) git system requirement - astral-sh/uv #4847</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Remove (or ensure) git system requirement</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/4847">#4847</a>
        opened by <a href="https://github.com/wyattscarpenter">@wyattscarpenter</a>
        on 2024-07-06 17:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/wyattscarpenter">@wyattscarpenter</a> on 2024-07-06 17:07</div>
            <div class="timeline-body"><p>As far as I can tell, Git is required to be installed on the host system in order for pip git sources to work. This is bad, from a software engineering perspective, because a program should not require other programs in order to work. It is also bad because when you install <code>uv</code> using <code>pip</code>, you do not get <code>git</code> as well (which would be another way of avoiding the dependency failure).</p>
<p>This behavior is understandable, because pip also works like this, but unless using the git executable as pip would is crucial for compatibility reasons, I think uv should just support the git operations itself (and also, I guess, the Mercurial, Subversion, and Bazaar operations, detailed on https://pip.pypa.io/en/stable/topics/vcs-support/). As I understand it, the required operations are basically just downloading and unpacking the repo, so it shouldn't be that hard™.</p>
<h2>Example</h2>
<pre><code class="language-sh">$ pip install -U uv #this doesn't install git or anything.
# (I've omitted the output of this command for brevity.)

$ uv --version
uv 0.2.21 (ebfe6d8fc 2024-07-03)

$ echo &quot;mypy\nblack @ git+https://github.com/psf/black&quot; &gt;requirements.txt

$ uv venv &amp;&amp; uv pip install -r requirements.txt
Using Python 3.12.3 interpreter at: [redacted]
Creating virtualenv at: .venv
Activate with: .venv\Scripts\activate
Updating https://github.com/psf/black (HEAD)                                                                            error: Failed to download and build: `black @ git+https://github.com/psf/black`
  Caused by: Git operation failed
  Caused by: could not execute process `git init` (never executed)
  Caused by: program not found

$ uv venv &amp;&amp; uv pip install -r requirements.txt #switching to a machine where git is installed and on the path, for comparison, and it works fine
Using Python 3.10.12 interpreter at: /usr/bin/python3
Creating virtualenv at: .venv
Activate with: source .venv/bin/activate
 Updated https://github.com/psf/black (7e2afc9)                                                                                                                                                                                              Resolved 9 packages in 29.34s
   Built black @ git+https://github.com/psf/black@7e2afc9bfdc4ec4bc3297aaa16a62d575249a5e0                                                                                                                                                   Downloaded 1 package in 7.92s
Installed 9 packages in 1m 40s
 + black==24.4.3.dev23+g7e2afc9 (from git+https://github.com/psf/black@7e2afc9bfdc4ec4bc3297aaa16a62d575249a5e0)
 + click==8.1.7
 + mypy==1.10.1
 + mypy-extensions==1.0.0
 + packaging==24.1
 + pathspec==0.12.1
 + platformdirs==4.2.2
 + tomli==2.0.1
 + typing-extensions==4.12.2
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2024-07-06 17:45</div>
            <div class="timeline-body"><p>I was under the impression that this PR(https://github.com/astral-sh/uv/pull/3833) remove embedded Git support.
You should be able to understand the Git issue from the description of that PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-06 19:00</div>
            <div class="timeline-body"><p>We may eventually move to <a href="https://github.com/Byron/gitoxide">gitoxide</a> if it grows to fit our needs, but otherwise this is sort of a non-goal right now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @charliermarsh on 2024-07-06 19:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-06 19:18</div>
            <div class="timeline-body"><p>Our git operations are definitely non-trivial too as we need to support resolving all sorts of references, various authentication schemes, and optimizations like sparse checkouts. Once a suitable library is available we could consider support again but the system <code>git</code> client gives the most complete set of functionality.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Remove git system requirement" to "Remove (or ensure) git system requirement" by @wyattscarpenter on 2024-07-08 09:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Henkhogan">@Henkhogan</a> on 2024-10-10 17:41</div>
            <div class="timeline-body"><p>I am confused about the README of uv saying</p>
<blockquote>
<p>uv's Git implementation is based on <a href="https://github.com/rust-lang/cargo">Cargo</a>.</p>
</blockquote>
<p>and then cargo's README</p>
<blockquote>
<p>Optional system libraries:</p>
<p>The build will automatically use vendored versions of the following libraries. However, if they are provided by the system and can be found with pkg-config, then the system libraries will be used instead:</p>
<p><a href="https://curl.se/libcurl/">libcurl</a> — Used for network transfers.
<strong><a href="https://libgit2.org/">libgit2</a> — Used for fetching git dependencies.</strong>
<a href="https://www.libssh2.org/">libssh2</a> — Used for SSH access to git repositories.
<a href="https://zlib.net/">libz</a> (aka zlib) — Used for data compression.
It is recommended to use the vendored versions as they are the versions that are tested to work with Cargo.</p>
</blockquote>
<p>Thus I expected there would be no need to have git installed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-10 17:45</div>
            <div class="timeline-body"><p>We don't use libgit2 anymore, it doesn't support enough functionality. Originally, we copied much of Cargo's implementation though — Cargo can fallback to git if you ask it to.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:58 UTC
    </footer>
</body>
</html>
