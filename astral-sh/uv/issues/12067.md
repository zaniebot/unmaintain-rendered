```yaml
number: 12067
title: "Proposal: remove default-groups option"
type: issue
state: closed
author: rsyring
labels:
  - needs-decision
assignees: []
created_at: 2025-03-08T15:57:36Z
updated_at: 2025-08-14T15:55:27Z
url: https://github.com/astral-sh/uv/issues/12067
synced_at: 2026-01-10T01:57:27Z
```

# Proposal: remove default-groups option

---

_Issue opened by @rsyring on 2025-03-08 15:57_

refs: https://github.com/astral-sh/uv/issues/11691
refs: https://github.com/astral-sh/uv/issues/10934
refs: https://github.com/astral-sh/uv/pull/11690

I think uv should consider deprecating and then removing [default-groups](https://docs.astral.sh/uv/concepts/projects/dependencies/#default-groups) in favor of promoting, through best practices and documentation, the use of include groups instead:

```toml
dev = [
    {include-group = "tests"},
    {include-group = "pre-commit"},
    {include-group = "nox"},
    "hatch>=1.14.0",
    "ruff>=0.9.6",
]
# Used by nox
pre-commit = [
    'pre-commit>=4.1.0',
    'pre-commit-uv>=4.1.4',
]
# Used by nox
tests = [
    'pytest>=8.3.4',
]
# Used by CI
nox = [
    'nox>=2025.2.9',
]
```

This would remove a couple CLI options related to default groups, the possible related [confusion/surprise](https://github.com/astral-sh/uv/issues/10934#issuecomment-2708355378) between default groups and the dev group as the default, and presumably simplify the code base.

Unless otherwise called for by cli options, the `dev` group is always installed by default.  If you want other groups installed by default, then use `include-group` with the dev group as demonstrated above.

If moving forward with this proposal, I'd also suggest that the template that is generated by `project init` use a `include-group` in the `pyproject.toml` that is generated.

---

_Comment by @zanieb on 2025-03-08 17:46_

I think I'm a -1 on this. Group inclusions are different than defining a default set of groups to sync, and I'm pretty hesitant to special case the dev group _further_. Curious what others think though.

---

_Label `needs-decision` added by @zanieb on 2025-03-08 17:46_

---

_Comment by @rsyring on 2025-03-08 19:04_

Fair enough.  

>  Group inclusions are different than defining a default set of groups to sync

I agree.  But doesn't promoting `include-group` for `dev` solve the same problem as `default-groups`?  Or, maybe the better question is, what is the scenario where the use of `default-groups` can't be solved well by `include-group`?  And, is that scenario common enough and/or important enough to justify the default groups concept?

> I'm pretty hesitant to special case the dev group further. 

I don't know that this increases the special casing further.  All this would do is remove ambiguity around the potential for `dev` or _something else_ to be the default group(s).  It would just always be `dev` by default, which is a simpler mental model, config, and CLI interface.

I admit the one place you lose flexibility is if your default groups don't map well mentally to a "dev" environment.  I just wonder how often that is.  Everywhere else I use `uv sync` besides a local dev environment is all scripted (nox, CI, etc.).  In that case, I don't care about the default b/c it's easy to specify on the CLI what group(s) is/are desired.  I would assume usage patterns that differ are the exception rather than the rule.

You could try and un-special-case dev and promote a "default group" mental model and lose the `--dev` special case and have the dev group dependency default move from `dev` to `default` .  The shorthand CLI option for adding then doesn't feel right: `uv add --default` is confusing b/c it's not obvious the default means default dependency group and not the default as you'd get without a group, i.e. a plain `uv add`.

---

My main reason for this proposal is to simplify the mental model, config, and CLI interface while not losing any real flexibility (b/c of the availability of `include-group`).  When I was reworking the docs for #11690, it took longer than I felt it should to understand all the different incantations of dependency groups.  uv has seven different CLI options for dealing with dependency groups.  That seems like a lot to me especially with the way using a group works (see discussion in #11691).

The main thing I came away from in that effort was that the combination of default dependency groups and the special cased dev group seemed technically sound but, potentially, practically unnecessary.  Hence this discussion.  But if my concern for the mental complexity around groups and the numerous CLI options isn't shared, then I'm probably just wasting our collective time with this proposal.  In which case, please close this issue as there are plenty of others that need attention. :)

Thanks.

---

_Comment by @senthil10 on 2025-08-14 14:28_

I came across this issue/thread randomly and would like to share my opinion (as an user). I agree with @zanieb, `include-group` and `default-groups` are intended to do different things. 

Of course one can achieve what `default-groups` does by using `include-group` within `dev` dependancy group, but this is only suitable and works as longs as the `dev` stays as a default dependency group and the user also wishes it to be.

In the current project I am working on, we prefer `dev` **not** to be a default dependancy group but instead an optional one. With `default-groups` setting this can be done easily or otherwise we will have to remember and always add `--no-dev` or `--no-default-groups` option.

---

_Comment by @zanieb on 2025-08-14 14:47_

(Thanks for being understanding @rsyring)

---

_Closed by @zanieb on 2025-08-14 14:47_

---

_Comment by @rsyring on 2025-08-14 15:55_

Np.  In hindsight, it wasn't a good proposal for the reasons described here.  :)

---
