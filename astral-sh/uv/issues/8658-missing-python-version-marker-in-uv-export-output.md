```yaml
number: 8658
title: "Missing Python version marker in `uv export` output for dependency in a group"
type: issue
state: closed
author: nsoranzo
labels:
  - bug
assignees: []
created_at: 2024-10-29T12:47:55Z
updated_at: 2024-10-29T13:41:28Z
url: https://github.com/astral-sh/uv/issues/8658
synced_at: 2026-01-12T15:59:31Z
```

# Missing Python version marker in `uv export` output for dependency in a group

---

_@nsoranzo_

I have a `pyproject.toml` with a dependency group (thanks for adding support for this!) that contains a dependency that should only be installed for Python >=3.9 while our project support Python >=3.8 , here's the simplified version:

```yaml
[project]
name = "foo"
version = "0.1.0"
requires-python = ">=3.8"
dependencies = [
    "packaging",
]

[dependency-groups]
foo = [
    "rucio-clients>=33.6.0 ; python_version>='3.9'",
]
```

When I export the `foo` dependencies to the `requirements.txt` format, the `python_full_version >= '3.9'` marker is missing for rucio-clients:

```shell
$ uv export --no-hashes --only-group=foo
Using CPython 3.12.7 interpreter at: /usr/bin/python3.12
Resolved 19 packages in 1ms
# This file was autogenerated by uv via the following command:
#    uv export --no-hashes --only-group=foo
attrs==24.2.0 ; python_full_version >= '3.9'
certifi==2024.8.30 ; python_full_version >= '3.9'
charset-normalizer==3.4.0 ; python_full_version >= '3.9'
decorator==5.1.1 ; python_full_version >= '3.9'
dogpile-cache==1.3.3 ; python_full_version >= '3.9'
idna==3.10 ; python_full_version >= '3.9'
jsonschema==4.23.0 ; python_full_version >= '3.9'
jsonschema-specifications==2024.10.1 ; python_full_version >= '3.9'
pbr==6.1.0 ; python_full_version >= '3.9'
referencing==0.35.1 ; python_full_version >= '3.9'
requests==2.32.3 ; python_full_version >= '3.9'
rpds-py==0.20.0 ; python_full_version >= '3.9'
rucio-clients==35.4.1
stevedore==5.3.0 ; python_full_version >= '3.9'
tabulate==0.9.0 ; python_full_version >= '3.9'
typing-extensions==4.12.2 ; python_full_version >= '3.9' and python_full_version < '3.11'
urllib3==2.2.3 ; python_full_version >= '3.9'
```

Note that if I move `rucio-clients` from the `foo` dependency group into the main list of `dependencies`, the marker is exported as expected:

```yaml
[project]
name = "foo"
version = "0.1.0"
requires-python = ">=3.8"
dependencies = [
    "packaging",
    "rucio-clients>=33.6.0 ; python_version>='3.9'",
]
```

```shell
$ uv export --no-hashes 
Using CPython 3.12.7 interpreter at: /usr/bin/python3.12
Resolved 19 packages in 142ms
# This file was autogenerated by uv via the following command:
#    uv export --no-hashes
attrs==24.2.0 ; python_full_version >= '3.9'
certifi==2024.8.30 ; python_full_version >= '3.9'
charset-normalizer==3.4.0 ; python_full_version >= '3.9'
decorator==5.1.1 ; python_full_version >= '3.9'
dogpile-cache==1.3.3 ; python_full_version >= '3.9'
idna==3.10 ; python_full_version >= '3.9'
jsonschema==4.23.0 ; python_full_version >= '3.9'
jsonschema-specifications==2024.10.1 ; python_full_version >= '3.9'
packaging==24.1
pbr==6.1.0 ; python_full_version >= '3.9'
referencing==0.35.1 ; python_full_version >= '3.9'
requests==2.32.3 ; python_full_version >= '3.9'
rpds-py==0.20.0 ; python_full_version >= '3.9'
rucio-clients==35.4.1 ; python_full_version >= '3.9'
stevedore==5.3.0 ; python_full_version >= '3.9'
tabulate==0.9.0 ; python_full_version >= '3.9'
typing-extensions==4.12.2 ; python_full_version >= '3.9' and python_full_version < '3.11'
urllib3==2.2.3 ; python_full_version >= '3.9'
```

---

_Label `bug` added by @charliermarsh on 2024-10-29 12:50_

---

_Comment by @charliermarsh on 2024-10-29 12:50_

Thanks, that does look like a bug.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-10-29 12:50_

---

_Closed by @charliermarsh on 2024-10-29 13:41_

---

_Closed by @charliermarsh on 2024-10-29 13:41_

---
