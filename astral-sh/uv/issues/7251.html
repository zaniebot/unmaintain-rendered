<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduce multiple, named-workspaces for a single project - astral-sh/uv #7251</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Introduce multiple, named-workspaces for a single project</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/7251">#7251</a>
        opened by <a href="https://github.com/goraje">@goraje</a>
        on 2024-09-10 11:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/goraje">@goraje</a></div>
            <div class="timeline-body"><p><strong>Introduction</strong>
In our project we are dealing with the situation where we develop multiple Python packages and store them in a single monorepo. The packages that we are working on can essentially be divided into two groups (each of which could constitute a separate workspace), with some of the packages (workspace members) being common between the two groups. A simplified layout of the monorepo would look as follows.</p>
<pre><code>.
├── package1_groupA
│   ├── README.md
│   ├── pyproject.toml
│   └── src
│       └── package1_groupa
│           └── __init__.py
├── package1_groupB
│   ├── README.md
│   ├── pyproject.toml
│   └── src
│       └── package1_groupb
│           └── __init__.py
├── package2_groupA
│   ├── README.md
│   ├── pyproject.toml
│   └── src
│       └── package2_groupa
│           └── __init__.py
├── package_common
│   ├── README.md
│   ├── pyproject.toml
│   └── src
│       └── package_common
│           └── __init__.py
└── pyproject.toml
</code></pre>
<p><strong>What would we like to achieve?</strong>
We would like to define two distinct workspaces on the root level of the monorepo with the ability to create two separate lockfiles.
This can be achieved currently, however in a roundabout way by storing the workspace definitions in dedicated subdirectories since the lockfiles are going to get overwritten by executing <code>uv lock</code> even if we had two separate <code>uv.toml</code>'s and used <code>uv --config-file</code>.</p>
<p><strong>Proposal</strong>
Introduction of named workspaces with adjustable lockfile names could  give the users the ability to customize how they want to group dependencies for different combinations of members, which would be a very useful feature for monorepo users that would facilitate using <code>uv</code> in scenarios similar to the one described above.  For example while taking into the account the layout shown in the introduction we could envision having a definition similar to:</p>
<pre><code># pyproject.toml

[tool.uv.workspace.group_a]
members = [&quot;package_common&quot;, &quot;*_groupA&quot;]
lockfile = &quot;uv-groupA.lock&quot;

[tool.uv.workspace.group_b]
members = [&quot;package_common&quot;, &quot;*_groupB&quot;]
lockfile = &quot;uv-groupB.lock&quot;
</code></pre>
<p>followed with the hypothetical ability to sync a chosen workspace eh&gt;</p>
<pre><code>uv sync --workspace group_a
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brendan-morin">@brendan-morin</a> on 2025-09-23 17:18</div>
            <div class="timeline-body"><p>I think this makes sense and seems to be a similar but  more thought out approach to my comment here: https://github.com/astral-sh/uv/issues/6356#issuecomment-2305264377.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:27:01 UTC
    </footer>
</body>
</html>
