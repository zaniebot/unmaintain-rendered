<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flaking Windows workspace tests - astral-sh/uv #6789</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Flaking Windows workspace tests</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6789">#6789</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-08-29 03:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>I've seen a few new flakes on Windows. Maybe since https://github.com/astral-sh/uv/pull/6680</p>
<p>e.g. <a href="https://github.com/astral-sh/uv/actions/runs/10607440812/job/29399888848?pr=6784">here</a></p>
<pre><code>━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Snapshot Summary ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Snapshot: uv_run_isolate
Source: E:\uv:533
───────────────────────────────────────────────────────────────────────────────
Expression: snapshot
───────────────────────────────────────────────────────────────────────────────
-old snapshot
+new results
────────────┬──────────────────────────────────────────────────────────────────
    0       │-success: true
    1       │-exit_code: 0
          0 │+success: false
          1 │+exit_code: 2
    2     2 │ ----- stdout -----
    3       │-Success
    4     3 │ 
    5     4 │ ----- stderr -----
    6     5 │ Using Python 3.12.[X] interpreter at: [PYTHON-3.12]
    7     6 │ Creating virtualenv at: .venv
    8     7 │ Resolved 8 packages in [TIME]
    9       │-Prepared 7 packages in [TIME]
   10       │-Installed 7 packages in [TIME]
   11       │- + albatross==0.1.0 (from file://[TEMP_DIR]/albatross-root-workspace)
   12       │- + anyio==4.3.0
   13       │- + bird-feeder==1.0.0 (from file://[TEMP_DIR]/albatross-root-workspace/packages/bird-feeder)
   14       │- + idna==3.6
   15       │- + seeds==1.0.0 (from file://[TEMP_DIR]/albatross-root-workspace/packages/seeds)
   16       │- + sniffio==1.3.1
   17       │- + tqdm==4.66.2
          8 │+error: Failed to prepare distributions
          9 │+  Caused by: Failed to fetch wheel: bird-feeder @ file://[TEMP_DIR]/albatross-root-workspace/packages/bird-feeder
         10 │+  Caused by: Build backend failed to build wheel through `build_editable()` with exit code: 1
         11 │+--- stdout:
         12 │+
         13 │+--- stderr:
         14 │+Traceback (most recent call last):
         15 │+  File &quot;&lt;string&gt;&quot;, line 11, in &lt;module&gt;
         16 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/build.py&quot;, line 83, in build_editable
         17 │+    return os.path.basename(next(builder.build(directory=wheel_directory, versions=['editable'])))
         18 │+                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
         19 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/interface.py&quot;, line 90, in build
         20 │+    self.metadata.validate_fields()
         21 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/core.py&quot;, line 260, in validate_fields
         22 │+    self.core.validate_fields()
         23 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/core.py&quot;, line 1352, in validate_fields
         24 │+    getattr(self, attribute)
         25 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/core.py&quot;, line 1223, in dependencies
         26 │+    self._dependencies = list(self.dependencies_complex)
         27 │+                              ^^^^^^^^^^^^^^^^^^^^^^^^^
         28 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/core.py&quot;, line 1174, in dependencies_complex
         29 │+    from packaging.requirements import InvalidRequirement, Requirement
         30 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/requirements.py&quot;, line 7, in &lt;module&gt;
         31 │+    from ._parser import parse_requirement as _parse_requirement
         32 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/_parser.py&quot;, line 10, in &lt;module&gt;
         33 │+    from ._tokenizer import DEFAULT_RULES, Tokenizer
         34 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/_tokenizer.py&quot;, line 6, in &lt;module&gt;
         35 │+    from .specifiers import Specifier
         36 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/specifiers.py&quot;, line 16, in &lt;module&gt;
         37 │+    from .utils import canonicalize_version
         38 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/utils.py&quot;, line 8, in &lt;module&gt;
         39 │+    from .tags import Tag, parse_tag
         40 │+  File &quot;[CACHE_DIR]/builds-v0/[TMP]/tags.py&quot;, line 26, in &lt;module&gt;
         41 │+    from . import _manylinux, _musllinux
         42 │+  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1360, in _find_and_load
         43 │+  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 1331, in _find_and_load_unlocked
         44 │+  File &quot;&lt;frozen importlib._bootstrap&gt;&quot;, line 935, in _load_unlocked
         45 │+  File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 991, in exec_module
         46 │+  File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 1128, in get_code
         47 │+  File &quot;&lt;frozen importlib._bootstrap_external&gt;&quot;, line 1186, in get_data
         48 │+PermissionError: [Errno 13] Permission denied: 'E:\/tmp-uv\/[TMP]/_musllinux.py'
         49 │+---
────────────┴──────────────────────────────────────────────────────────────────
Stopped on the first failure. Run `cargo insta test` to run all snapshots.
test test_uv_run_isolate ... FAILED

failures:

failures:
    test_uv_run_isolate
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @zanieb on 2024-08-29 03:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by @zanieb on 2024-08-29 03:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-03 14:48</div>
            <div class="timeline-body"><p>Closing in favor of #6940</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-09-03 14:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:26:39 UTC
    </footer>
</body>
</html>
