<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&quot;uv pip install&quot; not installing packages from workspace/path sources - astral-sh/uv #11989</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>&quot;uv pip install&quot; not installing packages from workspace/path sources</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11989">#11989</a>
        opened by <a href="https://github.com/djcopley">@djcopley</a>
        on 2025-03-05 21:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/djcopley">@djcopley</a> on 2025-03-05 21:13</div>
            <div class="timeline-body"><h3>Question</h3>
<p>Hey everyone, I am attempting to work the uv workspaces flow into my monorepo, but I'm running into some unexpected behavior.</p>
<p>My <code>pyproject.toml</code>:</p>
<pre><code class="language-toml">[tool.uv.workspace]
members = [&quot;packages/package-a&quot;]

[tool.uv.sources]
package-a = { workspace = true }
package-b = { path = &quot;packages/package-b&quot;, editable = true }
</code></pre>
<p>When I run <code>uv pip install package-a</code> or <code>uv pip install package-b</code>, I get</p>
<pre><code>No solution found when resolving dependencies:
-&gt; Because package_a was not found in the package registry and you require package_a, we can conclude that your requirements are unsatisfiable.
</code></pre>
<p>Does the <code>pip install</code> interface not consider <code>uv.sources</code> workspace or path? It seems to be considering my <code>{ index = &quot;alternative&quot; }</code> sources.</p>
<hr />
<p>For additional context, I'm trying to integrate uv with my existing hatch environment workflow which uses uv pip install for synchronizing its virtual environment.</p>
<h3>Platform</h3>
<p>Ubuntu 22.04 x86_64</p>
<h3>Version</h3>
<p>uv 0.5.29</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @djcopley on 2025-03-05 21:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-05 21:22</div>
            <div class="timeline-body"><p>Are you looking for <code>uv pip install .</code> instead? <code>uv pip install &lt;package&gt;</code> doesn't read your <code>pyproject.toml</code> at all.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/djcopley">@djcopley</a> on 2025-03-05 21:26</div>
            <div class="timeline-body"><p>It seems to read it for uv configuration at the very least. It respects the configuration of <code>tool.uv.native-tls</code> and <code>tool.uv.index</code>. Alternate for <code>uv.toml</code> I'm guessing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-05 21:29</div>
            <div class="timeline-body"><p>Yeah sorry, it will read configuration from there but not &quot;metadata&quot; as split in the reference https://docs.astral.sh/uv/reference/settings/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/djcopley">@djcopley</a> on 2025-03-05 21:36</div>
            <div class="timeline-body"><p>Dang. I was hoping <code>tool.uv.sources</code> would just be part of the current projects configuration. Am I misunderstanding this help text generated by <code>uv pip install -h</code>?:</p>
<p><img width="1445" alt="Image" src="https://github.com/user-attachments/assets/496b7ab6-8b25-4b06-9219-7dd212294bbe" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-05 21:41</div>
            <div class="timeline-body"><p>Yeah so like.. if you do <code>uv pip install &lt;your-project&gt;</code> we'll respect sources, but if you're just installing arbitrary packages, we will not.</p>
<pre><code>❯ cat pyproject.toml
[project]
name = &quot;example&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.13.0&quot;
dependencies = [
    &quot;anyio&gt;=4.8.0&quot;,
]

[tool.uv.sources]
anyio = { path = &quot;../foo&quot; }

❯ uv pip install .
  × Failed to build `anyio @ file:///Users/zb/workspace/uv/foo`
  ╰─▶ /Users/zb/workspace/uv/foo does not appear to be a Python project, as neither `pyproject.toml` nor `setup.py` are
      present in the directory

❯ uv pip install . --no-sources
Using Python 3.13.0 environment at: /Users/zb/workspace/uv/.venv
Resolved 4 packages in 13ms
Installed 4 packages in 3ms
 + anyio==4.8.0
 + example==0.1.0 (from file:///Users/zb/workspace/uv/example)
 + idna==3.10
 + sniffio==1.3.1
</code></pre>
<p>We could consider allowing sources to propagate to installation of standalone packages, but the <code>sources</code> table is intended to apply to direct dependencies of the current <em>project</em> not arbitrary packages.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/djcopley">@djcopley</a> on 2025-03-08 00:11</div>
            <div class="timeline-body"><p>That makes good sense to me and thanks for the response. In my particular case, hatch environments use the <code>uv pip</code> interface with custom resolution to synchronize the environment. If it fits within the greater uv environment, I think it would be convenient if project sources were honored. Especially since you can reference workspace items in the <code>[dependency-groups]</code> table, and it would be nice for those to still work when <code>uv pip install --group</code> drops.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @djcopley on 2025-04-04 02:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:01 UTC
    </footer>
</body>
</html>
