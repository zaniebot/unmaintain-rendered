```yaml
number: 4113
title: "`uv pip sync` should maybe have a `--no-remove` flag?"
type: issue
state: closed
author: thejcannon
labels:
  - needs-decision
  - cli
assignees: []
created_at: 2024-06-06T20:12:51Z
updated_at: 2024-06-07T03:52:59Z
url: https://github.com/astral-sh/uv/issues/4113
synced_at: 2026-01-10T01:57:09Z
```

# `uv pip sync` should maybe have a `--no-remove` flag?

---

_Issue opened by @thejcannon on 2024-06-06 20:12_

ðŸ‘‹ Howdy!

At $work we use a global lockfile to manage dependencies, so `uv pip sync` naturally is a great fit for keeping the transient environment up-to-date with regard to the lockfile as we travel forward and backwards in time (via git ops).

_However_, we also support people installing certain dependencies for one-off tooling or prototyping and I'd hate to tell them to run `uv pip sync` and those deps dissapear.

I understand that havign some kind of `--no-remove` flag is likely not _truly_ what we want (because the env will maybe become bloated over time, or maybe there's conflicting deps, or maybe we're leaving a dep with a security concern) but I think it handles the use-case well-enough that it's worth trying out.

---

_Comment by @zanieb on 2024-06-06 23:03_

What if we have other ways to managing one-off tooling and prototyping? e.g. `uv tool` (#3560) or `uv run --with <one-off-package>`? 

---

_Comment by @thejcannon on 2024-06-07 01:43_

I expected this answer ðŸ˜„ I'd love to see those. I'm not 100% certain I'd be able to convince all of the folks I support (some of which aren't engineers, and don't know what `uv` is, or that it's used under the hood for our common tooling) to always use the totally-awesome-`uv`-thing.

---

_Label `needs-decision` added by @charliermarsh on 2024-06-07 02:50_

---

_Label `cli` added by @charliermarsh on 2024-06-07 02:50_

---

_Comment by @charliermarsh on 2024-06-07 02:50_

I think `pip install --no-deps` will... basically do what you want? Internally it's like, exactly this.

---

_Comment by @zanieb on 2024-06-07 02:56_

We'll probably expose something like this, it was in our original designs. I'm just curious to see how far we can get without exposing it by, e.g., building better APIs and want to learn more about the stories behind it. Centrally managing environment state seems like a fair use case, especially if the downstream users have access to `pip`. You could still definitely break their environment with a sync operation though (or the sync could fail).

---

_Comment by @charliermarsh on 2024-06-07 02:58_

To be clear, I meant `uv pip install --no-deps`.

---

_Comment by @thejcannon on 2024-06-07 03:52_

Oh...... yeeeeeaaaaaaahhhh I think you're right ðŸ¤¦ 

---

_Closed by @thejcannon on 2024-06-07 03:52_

---
