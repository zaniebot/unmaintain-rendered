<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`install --require-hashes`'s &quot;all requirement must have a hash&quot; error can be better - astral-sh/uv #3054</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>install --require-hashes</code>&#x27;s &quot;all requirement must have a hash&quot; error can be better</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/3054">#3054</a>
        opened by <a href="https://github.com/bluetech">@bluetech</a>
        on 2024-04-16 07:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bluetech">@bluetech</a></div>
            <div class="timeline-body"><p>This is in continuation of #3052.</p>
<p>When <code>uv pip install --require-hashes</code> is used and a dependency is pinned but doesn&#x27;t specify a hash, this error is emitted:</p>
<pre><code>error: In `--require-hashes` mode, all requirement must have a hash, but none were provided for: setuptools==69.5.1
</code></pre>
<p>In comparison, pip emits this error:</p>
<pre><code>ERROR: Hashes are required in --require-hashes mode, but they are missing from some requirements. Here is a list of those requirements along with the hashes their downloaded archives actually had. Add lines like these to your requirements files to prevent tampering. (If you did not enable --require-hashes manually, note that it turns on automatically when any package has a hash.)
    setuptools==69.5.1 --hash=sha256:c636ac361bc47580504644275c9ad802c50415c7522212252c033bd15f301f32
</code></pre>
<p>The pip error message is more helpful because it gives the expected hash and allows to quickly copy/paste the line.</p>
<p>BTW: the uv error has a minor typo &quot;all requirement&quot; instead of &quot;all requirement<strong>s</strong>&quot;</p>
<hr>
<p>Version: uv 0.1.32</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;`install --require-hashes`&#x27;s &quot;all requirement must have a hash&quot; can be better&quot; to &quot;`install --require-hashes`&#x27;s &quot;all requirement must have a hash&quot; error can be better&quot; by <a href="https://github.com/bluetech">@bluetech</a> on 2024-04-16 08:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-16 13:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-16 13:20</div>
            <div class="timeline-body"><p>Thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-16 13:20</div>
            <div class="timeline-body"><p>I assume they only show this variant of the error when the requirement is pinned to an exact version?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluetech">@bluetech</a> on 2024-04-16 16:25</div>
            <div class="timeline-body"><blockquote>
<p>I assume they only show this variant of the error when the requirement is pinned to an exact version?</p>
</blockquote>
<p>Yes, only when pinned but missing hash.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:30:48 UTC
    </footer>
</body>
</html>
