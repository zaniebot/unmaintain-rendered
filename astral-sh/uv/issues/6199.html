<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip recompile requirements.txt` - astral-sh/uv #6199</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv pip recompile requirements.txt`</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6199">#6199</a>
        opened by <a href="https://github.com/arthur-st">@arthur-st</a>
        on 2024-08-19 11:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/arthur-st">@arthur-st</a> on 2024-08-19 11:13</div>
            <div class="timeline-body"><p>It would be helpful for DRY management of the compiled dependency graphs if <code>uv</code> would have a simple command like <code>uv pip recompile</code> or some such to re-run <code>uv pip compile</code> header in the autogenerated file, if it's present.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ChannyClaus">@ChannyClaus</a> on 2024-08-19 16:58</div>
            <div class="timeline-body"><p>probably should be a flag for <code>uv pip compile</code> rather than a entirely new command if we were to go down this path? more importantly, would having this option be significantly better than having a separate shell script or an equivalent to encode the exact invocation of the <code>uv pip compile</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arthur-st">@arthur-st</a> on 2024-08-19 17:10</div>
            <div class="timeline-body"><p>I could certainly see a flag being the right option here, as I'm by no means a UX expert of some sort.</p>
<p>Regarding having a separate script, though, I would say that my intent/preferred outcome would be to make the generated dependency specifications being the single source of truth about themselves. Since <code>uv pip compile</code> includes the specific <code>uv pip compile</code> invocation used to generate a particular file in its header by default already, the single source of truthiness is largely there. Being able to &quot;re-run&quot; the file, e.g., to refresh <code>foo~=1.2.3</code> style pins from upstream, would serve to eliminate potential errors from having multiple copies of that invocation in different places.</p>
<p>Additionally, for development work on a project with a complex <code>uv pip compile</code> chain, it would be nice to have a way to re-run it that can be typed quickly, without having to set up or share a helper shell beforehand.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-19 17:11</div>
            <div class="timeline-body"><p>I'd generally prefer users put those settings in a <code>uv.toml</code> or <code>pyproject.toml</code> file rather than relying on reading them from the header</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arthur-st">@arthur-st</a> on 2024-08-19 17:16</div>
            <div class="timeline-body"><p>As in, a <code>pyproject.toml</code> file that has syntax vaguely like:</p>
<pre><code class="language-toml">[uv.compile.targets]

prod = &quot;uv pip compile requirements.in prod.in -o requirements-prod.txt&quot;
dev = &quot;uv pip compile requirements.in prod.in dev.in -o requirements-dev.txt&quot;
</code></pre>
<p>Which you would then get to call like <code>uv pip compile -t prod</code> to make up something? That would work, I feel, and I think you have the right of it with placing this closer to other project build-adjacent settings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2024-08-20 13:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-20 14:04</div>
            <div class="timeline-body"><p>I more meant, like:</p>
<pre><code class="language-toml">[tool.uv.pip]
index-url = &quot;...&quot;
no-binary = &quot;...&quot;
output-file = &quot;...&quot;
</code></pre>
<p>I.e., define the settings you would typically provide on the CLI. But if you want multiple different invocations (e.g., multiple different output files) then yeah, it won't handle everything for you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arthur-st">@arthur-st</a> on 2024-08-20 14:08</div>
            <div class="timeline-body"><p>Right, that's where I'm coming from, that I have projects with multiple output files that have different input configurations. Fair enough, instrumenting this on our end is not really a problem â€” just would've been nice to simply run <code>recompile</code> on arbitrary files and call it a day on that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-17 02:43</div>
            <div class="timeline-body"><p>I think I'm going to close this as not planned for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-03-17 02:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:33 UTC
    </footer>
</body>
</html>
