<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv run` with only project and a dependency group - astral-sh/uv #11985</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv run` with only project and a dependency group</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11985">#11985</a>
        opened by <a href="https://github.com/nbaju1">@nbaju1</a>
        on 2025-03-05 17:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nbaju1">@nbaju1</a> on 2025-03-05 17:51</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I have a project with project dependencies and dependency groups. Is it possible to use <code>uv run</code> only installing the project it self (not its dependencies) and the dependencies from a dependency group? <code>uv run --only-group some-deps</code> will not install the project, as far as I know.</p>
<p>I want to be able to run a script with a subset of the main dependencies. Most other parts of the project requires the project dependencies, so really don't want to inverse the configuration and end up having to run 95% of the scripts with a <code>--with</code> flag.</p>
<h3>Platform</h3>
<p>Not relevant</p>
<h3>Version</h3>
<p>0.6.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @nbaju1 on 2025-03-05 17:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-05 18:05</div>
            <div class="timeline-body"><p>This isn't supported. It sort of sounds like this is a use-case for https://peps.python.org/pep-0771/ where your other dependencies should be declared as optional (but still installed by default).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-05 18:06</div>
            <div class="timeline-body"><p>We do support <code>uv sync --no-install-project</code> and could support <code>uv sync --only-install-project</code>, but I'm a little hesitant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nbaju1">@nbaju1</a> on 2025-03-05 18:11</div>
            <div class="timeline-body"><p>Poetry's <code>--only</code> flag has this behavior, i.e. installs a dependency group and the project it self. Has been very useful for us, so would appreciate if you would consider implementing such a feature in uv as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-05 18:12</div>
            <div class="timeline-body"><p>Only the project and not its dependencies is a bit strange. Doesn't the project need its own dependencies...?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nbaju1">@nbaju1</a> on 2025-03-05 18:16</div>
            <div class="timeline-body"><p>This particular project is various scripts we run in a CI pipeline. A couple of the scripts only require a subset of the dependencies. Since some of the main dependencies are quite large, it has been quite beneficial for us to be able to only install this subset along side the project. I guess the massively reduced installation time with uv negates much of the need for this for us though, but still find it generally useful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nbaju1">@nbaju1</a> on 2025-03-05 18:25</div>
            <div class="timeline-body"><blockquote>
<p>We do support <code>uv sync --no-install-project</code> and could support <code>uv sync --only-install-project</code>, but I'm a little hesitant.</p>
</blockquote>
<p>Not that Poetry necessarily is a source of truth for this, but they have a <code>--only-root</code> flag for this behavior.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-05 18:26</div>
            <div class="timeline-body"><p>I would recommend using <code>dependency-groups</code> and <code>default-groups</code> instead of <code>project.dependencies</code> Then <code>--only-group</code> will do what you want. You can have a dependency on the project in dependency groups (just use the name).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nbaju1">@nbaju1</a> on 2025-03-05 18:38</div>
            <div class="timeline-body"><p>Will have to check if that has any unwanted effects on our dependency scanning tools, but thanks for the suggestion!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @nbaju1 on 2025-03-05 18:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:01 UTC
    </footer>
</body>
</html>
