<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Impossible to use a virtualenv created against an interpreter not named python - astral-sh/uv #7521</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Impossible to use a virtualenv created against an interpreter not named python</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/7521">#7521</a>
        opened by <a href="https://github.com/Muream">@Muream</a>
        on 2024-09-18 22:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Muream">@Muream</a></div>
            <div class="timeline-body">

<p>Hello,
This is going to be more of a question than a bug</p>
<p>I am in a situation where I need to create a virtualenv against a python executable named <code>mayapy</code> instead of <code>python</code>
When I run this sort of command <code>uv run -p &quot;C:\Program Files\Autodesk\Maya2024\bin\mayapy.exe&quot; hello.py</code>
I run into this error <code>No Python at &#x27;&quot;C:\Program Files\Autodesk\Maya2024\bin\python.exe&#x27;</code></p>
<p>Here&#x27;s the full output of the command:</p>
<pre><code>uv run -p &quot;C:\Program Files\Autodesk\Maya2024\bin\mayapy.exe&quot; --verbose hello.py
DEBUG uv 0.4.9
DEBUG Found project root: `C:\Users\muream\projects\maya\test-mayapy-venv`
DEBUG No workspace root found, using project root
DEBUG Discovered project `test-mayapy-venv` at: C:\Users\muream\projects\maya\test-mayapy-venv
DEBUG Checking for Python interpreter at path `C:\Program Files\Autodesk\Maya2024\bin\mayapy.exe`
Using Python 3.10.8 interpreter at: C:\Program Files\Autodesk\Maya2024\bin\mayapy.exe
Creating virtualenv at: .venv
DEBUG Using request timeout of 30s
DEBUG Starting clean resolution
DEBUG Found static `pyproject.toml` for: test-mayapy-venv @ file:///C:/Users/muream/projects/maya/test-mayapy-venv
DEBUG No workspace root found, using project root
DEBUG Solving with installed Python version: 3.10.8
DEBUG Solving with target Python version: &gt;=3.7
DEBUG Adding direct dependency: test-mayapy-venv*
DEBUG Searching for a compatible version of test-mayapy-venv @ file:///C:/Users/muream/projects/maya/test-mayapy-venv (*)
DEBUG Tried 1 versions: test-mayapy-venv 1
DEBUG Split universal resolution took 0.001s
Resolved 1 package in 7ms
DEBUG Using request timeout of 30s
Audited in 0.01ms
DEBUG Using Python 3.10.8 interpreter at: C:\Users\muream\projects\maya\test-mayapy-venv\.venv\Scripts\python.exe
DEBUG Running `python hello.py`
No Python at &#x27;&quot;C:\Program Files\Autodesk\Maya2024\bin\python.exe&#x27;
DEBUG Command exited with code: 103
</code></pre>
<p>I&#x27;m wondering what you&#x27;d recommend doing in this kind of situation?</p>
<p>This is not an issue unique to uv, I&#x27;ve had the same problem with poetry and I imagine venv/virtualenv would also struggle with this.
I can create this symlink as a bandaid <code>Maya2024\bin\python.exe -&gt; Maya2024\bin\mayapy.exe</code> but while it does work, it&#x27;s not ideal.</p>
<p>I realize this is very much an edge case but unfortunately I have to use this interpreter as the base for the virtualenv as it comes with all of Maya&#x27;s own libraries and it has been historically very hard to create virtual environments with this interpreter</p>
<p>I also apologize for this being hard to repro as you would need access to Autodesk Maya</p>
<p>I am running on Windows 11, mainly with Nushell but I have the same issue with Powershell.
And I&#x27;m using uv <code> 0.4.9</code></p>
<p>Let me know if you need any more information or if you need me to try anything</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Impossible to create a virtualenv against an interpreter not named python&quot; to &quot;Impossible to use a virtualenv created against an interpreter not named python&quot; by <a href="https://github.com/Muream">@Muream</a> on 2024-09-18 22:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-18 23:35</div>
            <div class="timeline-body"><p>Does <code>C:\Program Files\Autodesk\Maya2024\bin\mayapy.exe -c &quot;import sys; print(sys.executable)&quot;</code> show <code>python.exe</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Muream">@Muream</a> on 2024-09-19 07:19</div>
            <div class="timeline-body"><p>Looks like it returns the path to mayapy.exe</p>
<pre><code>$ &quot;C:\Program Files\Autodesk\Maya2024\bin\mayapy.exe&quot; -c &quot;import sys; print(sys.executable)&quot;
C:\Program Files\Autodesk\Maya2024\bin\mayapy.exe
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Muream">@Muream</a> on 2024-09-19 10:18</div>
            <div class="timeline-body"><p>I realized I was behind on a few updates, I tried again with <code>uv 0.4.12</code> and the issue is still the same</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-19 11:02</div>
            <div class="timeline-body"><p>Thanks sounds like a bug of some sort then.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-19 11:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">virtualenv</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-19 11:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:34:09 UTC
    </footer>
</body>
</html>
