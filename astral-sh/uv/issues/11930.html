<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upgrading tool while in use fails without uv recognizing the failed update on subsequent upgrade attempts - astral-sh/uv #11930</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Upgrading tool while in use fails without uv recognizing the failed update on subsequent upgrade attempts</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/11930">#11930</a>
        opened by <a href="https://github.com/nbaju1">@nbaju1</a>
        on 2025-03-03 18:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nbaju1">@nbaju1</a> on 2025-03-03 18:14</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Steps to reproduce:</p>
<ol>
<li>Run <code>uv tool install ruff@0.9.1</code></li>
<li>Modify the uv-receipt.toml file for ruff incrementing the specifier to 0.9.2.</li>
<li>Open e.g. Cursor (or some IDE/program that use the ruff binary in the bin folder).</li>
<li>Run <code>uv tool upgrade ruff</code>.</li>
<li>Run <code>ruff --version</code></li>
<li>Repeat step 4.</li>
</ol>
<p>Output of step 4.</p>
<pre><code>error: Failed to upgrade ruff
  Caused by: Failed to install entrypoint
  Caused by: failed to copy file from C:\Users\&lt;user&gt;\AppData\Roaming\uv\tools\ruff\Scripts\ruff.exe to C:\Users\&lt;user&gt;\.local\bin\ruff.exe: The process cannot access the file because it is being used by another process. (os error 32)
</code></pre>
<p>Output of step 5:</p>
<pre><code>ruff 0.9.1
</code></pre>
<p>Output of step 6 (specifier still says 0.9.2 in uv-receipt.toml):</p>
<pre><code>Nothing to upgrade
</code></pre>
<h3>Platform</h3>
<p>Windows 11 x64</p>
<h3>Version</h3>
<p>0.6.3</p>
<h3>Python version</h3>
<p>Python 3.12.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @nbaju1 on 2025-03-03 18:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Upgrading tools while in use fails without uv recognizing the failed update" to "Upgrading tool while in use fails without uv recognizing the failed update on subsequent upgrade attempts" by @nbaju1 on 2025-03-03 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/14520.html">astral-sh/uv#14520</a> on 2025-07-09 14:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:26 UTC
    </footer>
</body>
</html>
