```yaml
number: 372
title: Hash non-index files while downloading
type: issue
state: closed
author: konstin
labels:
  - performance
assignees: []
created_at: 2023-11-09T10:41:21Z
updated_at: 2024-04-10T19:58:34Z
url: https://github.com/astral-sh/uv/issues/372
synced_at: 2026-01-10T01:57:00Z
```

# Hash non-index files while downloading

---

_Issue opened by @konstin on 2023-11-09 10:41_

We need to record the hashes of non-index files, which we can do while downloading them:

https://github.com/astral-sh/puffin/blob/fbe28d3b7c51ed5bf27e4af7a7e1efde66b5114a/crates/install-wheel-rs/src/wheel.rs#L116-L144

This means that we need to download all url wheels after the resolve step to get the hashes, so we can also directly download and unpack them into the cache

---

_Label `performance` added by @charliermarsh on 2023-11-09 14:23_

---

_Added to milestone `Future` by @charliermarsh on 2023-11-09 14:23_

---

_Comment by @charliermarsh on 2023-11-09 14:23_

Is the hash checking optional? That was my impression.

---

_Comment by @konstin on 2023-11-09 15:59_

I meant for recording hashes in the requirements.txt lockfile, which is a commonly requested feature (in this case it ensures that the wheel you installed matches the wheel that is locked or was built from the same source distribution)

---

_Assigned to @charliermarsh by @charliermarsh on 2024-04-10 16:55_

---

_Comment by @charliermarsh on 2024-04-10 19:58_

We now do this.

---

_Closed by @charliermarsh on 2024-04-10 19:58_

---
