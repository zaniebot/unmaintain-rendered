```yaml
number: 12131
title: uv build cannot find files specified with relative paths in force-include
type: issue
state: closed
author: leon1995
labels:
  - question
assignees: []
created_at: 2025-03-12T07:53:19Z
updated_at: 2025-03-12T20:58:27Z
url: https://github.com/astral-sh/uv/issues/12131
synced_at: 2026-01-10T01:57:27Z
```

# uv build cannot find files specified with relative paths in force-include

---

_Issue opened by @leon1995 on 2025-03-12 07:53_

### Summary

When I specify a relative path in [`[tool.hatch.build.force-include]`](https://hatch.pypa.io/1.13/config/build/#forced-inclusion), because I want to include files that are relative to the python package in the package itself. This may happen when I specify a path source which is contained in the same git repo but I want to include in my package.
Here is a minimal example using the `uv.lock` file.
```toml
[tool.hatch.build.force-include]
"../repo/uv.lock" = "uv.lock"
```
However, this results in a `FileNotFoundError`, because the relative path is not resolved using the current working directory but rather the one from uvÂ´s cache
```
Traceback (most recent call last):
  File "<string>", line 11, in <module>
  File "C:\Users\<user>\AppData\Local\uv\cache\builds-v0\.tmpUCXVKr\Lib\site-packages\hatchling\build.py", line 58, in build_wheel
    return os.path.basename(next(builder.build(directory=wheel_directory, versions=['standard'])))
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\<user>\AppData\Local\uv\cache\builds-v0\.tmpUCXVKr\Lib\site-packages\hatchling\builders\plugin\interface.py", line 155, in build
    artifact = version_api[version](directory, **build_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\<user>\AppData\Local\uv\cache\builds-v0\.tmpUCXVKr\Lib\site-packages\hatchling\builders\wheel.py", line 477, in build_standard
    for included_file in self.recurse_included_files():
  File "C:\Users\<user>\AppData\Local\uv\cache\builds-v0\.tmpUCXVKr\Lib\site-packages\hatchling\builders\plugin\interface.py", line 177, in recurse_included_files
    yield from self.recurse_forced_files(self.config.get_force_include())
  File "C:\Users\<user>\AppData\Local\uv\cache\builds-v0\.tmpUCXVKr\Lib\site-packages\hatchling\builders\plugin\interface.py", line 237, in recurse_forced_files
    raise FileNotFoundError(msg)
FileNotFoundError: Forced include not found: C:\Users\<user>\AppData\Local\uv\cache\sdists-v8\.tmpVCcwYy\repo\uv.lock
  x Failed to build `C:\path\to\repo`
  |-> The build backend returned an error
  `-> Call to `hatchling.build.build_wheel` failed (exit code: 1)
      hint: This usually indicates a problem with the package or the build environment
```
Using `hatch` directly it works
```
uv pip install hatch
hatch build
```

### Platform

MSYS_NT-10.0-22621 3.5.4-cbe555e0.x86_64 x86_64 Msys

### Version

uv 0.6.6 (c1a0bb85e 2025-03-12)

### Python version

Python 3.11.6

---

_Label `bug` added by @leon1995 on 2025-03-12 07:53_

---

_Comment by @konstin on 2025-03-12 10:33_

In Python, package build can go in one or two steps: For the one step, we go from source directory to wheel. For the two steps, first the source directory is built into a source distribution (`.tar.gz`), then the source distribution is unpacked into a temporary directory and built into a wheel. That means files from above the `pyproject.toml` need to be included into the source distribution already, and then used by relative path when building the wheel (which fails in your case).

Your `uv build` makes the two step build, which ensures that the built source distribution is valid. You'll probably need to configure the force-includes differently for source dist and wheel, this depends on hatchling's logic.

---

_Label `bug` removed by @konstin on 2025-03-12 10:33_

---

_Label `question` added by @konstin on 2025-03-12 10:33_

---

_Closed by @charliermarsh on 2025-03-12 20:58_

---
