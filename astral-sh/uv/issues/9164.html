<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turn `--verify-hashes` on by default - astral-sh/uv #9164</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Turn `--verify-hashes` on by default</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9164">#9164</a>
        opened by <a href="https://github.com/hauntsaninja">@hauntsaninja</a>
        on 2024-11-16 09:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/hauntsaninja">@hauntsaninja</a> on 2024-11-16 09:40</div>
            <div class="timeline-body"><p>This would technically be a breaking change, so might need to wait for uv 0.6 (although &quot;I have a hash but I expect it to not be checked&quot; seems pretty niche). It's surprising to me that hashes are ignored by default and it's bad to have security related surprises</p>
<pre><code>λ cat r.txt
pypyp==1.2.0 --hash=sha256:0000000000000000000000000000000000000000000000000000000000000000

λ uv pip install -r r.txt
Using Python 3.11.8 environment at /Users/shantanu/code/venvs/openai-fppa
Resolved 1 package in 26ms
Installed 1 package in 14ms
 + pypyp==1.2.0

λ uv pip uninstall pypyp 
Using Python 3.11.8 environment at /Users/shantanu/code/venvs/openai-fppa
Uninstalled 1 package in 62ms
 - pypyp==1.2.0

λ uv pip install -r r.txt --verify-hashes 
Using Python 3.11.8 environment at /Users/shantanu/code/venvs/openai-fppa
Resolved 1 package in 18ms
error: Failed to prepare distributions
  Caused by: Failed to download `pypyp==1.2.0`
  Caused by: Hash mismatch for `pypyp==1.2.0`

Expected:
  sha256:0000000000000000000000000000000000000000000000000000000000000000

Computed:
  sha256:45e2a0fbe5b7b5bb0be7e95bcb5b23d43ddae8c561410c9c336e6773005c70b1
</code></pre>
<p>See also https://github.com/astral-sh/uv/issues/3305</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hauntsaninja">@hauntsaninja</a> on 2024-11-16 09:41</div>
            <div class="timeline-body"><p>Note pip compatibility isn't really an argument here, since in the above example pip will automatically infer <code>--require-hashes</code>:</p>
<pre><code>λ pip install -r r.txt                 
Collecting pypyp==1.2.0 (from -r r.txt (line 1))
  Using cached pypyp-1.2.0-py3-none-any.whl (15 kB)
ERROR: THESE PACKAGES DO NOT MATCH THE HASHES FROM THE REQUIREMENTS FILE. If you have updated the package versions, please update the hashes. Otherwise, examine the package contents carefully; someone may have tampered with them.
    pypyp==1.2.0 from https://files.pythonhosted.org/packages/e0/6c/6a9eac381dd1f0d2e878ad6213fca24cfe5b3846db46b26d620301ac7624/pypyp-1.2.0-py3-none-any.whl (from -r r.txt (line 1)):
        Expected sha256 0000000000000000000000000000000000000000000000000000000000000000
             Got        45e2a0fbe5b7b5bb0be7e95bcb5b23d43ddae8c561410c9c336e6773005c70b1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-16 16:41</div>
            <div class="timeline-body"><p>Yeah I think <code>--verify-hashes</code> should pretty clearly be the default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">security</span> added by @charliermarsh on 2024-11-16 16:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-16 16:41</div>
            <div class="timeline-body"><p>I think it's fine for this to go out in a patch release, personally.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-16 17:09</div>
            <div class="timeline-body"><p>(PR welcome or I'll get to it in the near future ofc.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9170.html">astral-sh/uv#9170</a> on 2024-11-17 01:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-18 01:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../opendatahub-io/notebooks/pulls/1998.html">opendatahub-io/notebooks#1998</a> on 2025-08-19 11:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:32 UTC
    </footer>
</body>
</html>
