<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip install &quot;NAME @ git+https://URL&quot;` prints extraneous warning - astral-sh/uv #6002</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv pip install &quot;NAME @ git+https://URL&quot;` prints extraneous warning</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6002">#6002</a>
        opened by <a href="https://github.com/gotmax23">@gotmax23</a>
        on 2024-08-11 05:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/gotmax23">@gotmax23</a> on 2024-08-11 05:47</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<pre><code class="language-console">$ cat /etc/redhat-release 
Fedora release 40 (Forty)
$ python --version                        
Python 3.12.4
$ uv --version
uv 0.2.35
$ uv pip install 'fedrq @ git+https://git.sr.ht/~gotmax23/fedrq@main'
 Updated https://git.sr.ht/~gotmax23/fedrq (951199b)
Resolved 11 packages in 541ms
░░░░░░░░░░░░░░░░░░░░ [0/11] Installing wheels...
warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance. If this is intentional, use `--link-mode=copy` to suppress this warning.

hint: If the cache and target directories are on different filesystems, hardlinking may not be supported.
Installed 11 packages in 10ms
[result truncated]
</code></pre>
<p>uv should understand that I am attempting to install from a git repository and not print errors about caching. The command still succeeds and installs the package, but uv should accept this standard dependency specification without warnings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-11 15:08</div>
            <div class="timeline-body"><p>I don't think this warning has anything to do with the use of a Git repository. We clone the Git repository into the cache and unzip wheels wheels into the cache, then attempt to link them into the environment. In this case, the warning looks correct in notifying you that your cache is not co-located with your environment and we must fallback to a slow copy operation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-08-11 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gotmax23">@gotmax23</a> on 2024-08-11 16:46</div>
            <div class="timeline-body"><p>I have been using uv on this system for months, and this is the only time I've seen this error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-11 18:51</div>
            <div class="timeline-body"><p>We added it somewhat recently. What's the location of <code>uv cache dir</code>, and of the directory you're working in?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/colinlaney">@colinlaney</a> on 2024-08-11 20:05</div>
            <div class="timeline-body"><p>The hint in this warning makes a lot of sense. The basic source of the warning is that the target directory is mounted from somewhere (NFS or Docker volume) other than the cache directory or vice versa.
It is a good point that the user is notified on how to improve the performance of the installation process.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gotmax23">@gotmax23</a> on 2024-08-11 20:16</div>
            <div class="timeline-body"><p><code>uv cache dir</code> and the venv directory are on the same filesystem. I have no idea why this issue popped up, but I can no longer reproduce it, so I guess I'll close this ticket.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @gotmax23 on 2024-08-11 20:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:32 UTC
    </footer>
</body>
</html>
