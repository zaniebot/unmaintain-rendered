<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `--system` flag to `uv sync` command to use it in Docker - astral-sh/uv #7344</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add `--system` flag to `uv sync` command to use it in Docker</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/7344">#7344</a>
        opened by <a href="https://github.com/rfsan">@rfsan</a>
        on 2024-09-12 20:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/rfsan">@rfsan</a> on 2024-09-12 20:49</div>
            <div class="timeline-body"><p>I have the current Dockerfile</p>
<pre><code class="language-Dockerfile">FROM python:3.12-slim
ENV PYTHONUNBUFFERED=1
RUN apt-get update &amp;&amp; \
    apt-get install -y git libgomp1 &amp;&amp; \
    rm -rf /var/lib/apt/lists/*
ARG CODE=/app
WORKDIR $CODE
COPY pyproject.toml uv.lock ./
RUN --mount=from=ghcr.io/astral-sh/uv,source=/uv,target=/bin/uv \
    uv sync --frozen --no-cache --compile-bytecode --no-dev
COPY src/ src/
CMD [&quot;.venv/bin/python&quot;, &quot;-m&quot;, &quot;src.api_sample&quot;]
</code></pre>
<p>I would like to install the dependencies using the system Python so that the final command is <code>CMD [&quot;python&quot;, &quot;-m&quot;, &quot;src.api_sample&quot;]</code></p>
<p>I tried using <code>uv pip install -r pyproject.toml --system</code> but this approach does not use the <code>uv.lock</code> file</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Xdynix">@Xdynix</a> on 2024-09-12 22:37</div>
            <div class="timeline-body"><blockquote>
<p>To force uv to use the system Python, provide the <code>--python-preference only-system</code> option.</p>
</blockquote>
<p>Maybe consider this?</p>
<p>Ref: <a href="https://docs.astral.sh/uv/concepts/python-versions/#adjusting-python-version-preferences">https://docs.astral.sh/uv/concepts/python-versions/#adjusting-python-version-preferences</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-13 01:45</div>
            <div class="timeline-body"><p>Please see https://docs.astral.sh/uv/guides/integration/docker/#using-the-environment and https://docs.astral.sh/uv/concepts/projects/#configuring-the-project-environment-path</p>
<p>This use-case should be resolved by https://github.com/astral-sh/uv/pull/6834</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-09-13 01:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-09-13 01:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2024-09-13 01:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8085.html">astral-sh/uv#8085</a> on 2024-10-10 14:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
