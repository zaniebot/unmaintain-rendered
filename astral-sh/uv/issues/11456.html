<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guide folks to WinGet by default for Windows installations in README - astral-sh/uv #11456</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Guide folks to WinGet by default for Windows installations in README</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/11456">#11456</a>
        opened by <a href="https://github.com/localden">@localden</a>
        on 2025-02-12 18:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/localden">@localden</a> on 2025-02-12 18:02</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Currently, the <code>README</code> is guiding folks to run a PowerShell script, bypassing the local execution policy. This is <em>generally</em> considered a bad practice because it conditions users to run arbitrary code without controls. Recommend switching to <code>winget</code> as the default for Windows, especially since this is already covered <a href="https://docs.astral.sh/uv/getting-started/installation/#winget">in the documentation</a>.</p>
<p>Happy to open a PR for this as well - should be an easy fix.</p>
<p>This is also related to #11021, but is just not covered in the README</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @localden on 2025-02-12 18:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11457.html">astral-sh/uv#11457</a> on 2025-02-12 18:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/localden">@localden</a> on 2025-02-12 18:17</div>
            <div class="timeline-body"><p>@zanieb wanted to bring the conversation here since the PR is closed.</p>
<p>How can I help the team maintain an official <code>winget</code> package? For Windows, <code>winget</code> should now be the default package manager (it's built into the OS), and behind the scenes it can effectively do what your PowerShell script does.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-12 18:34</div>
            <div class="timeline-body"><p>Thanks for switching to the issue — seems better to chat here and I'm happy to talk about it.</p>
<p>A couple functional concerns (other team members may have more):</p>
<ol>
<li><code>uv self update</code> is powered by our installer, I think this is valuable to our users and I don't want to have to recommend they switch installation methods <em>after the fact</em> to get access to the command.</li>
<li>The installer will warn if the installed executable is shadowed by another, this is important for our users who can easily end up with multiple versions of uv from different sources.</li>
</ol>
<p>Do you have thoughts about those?</p>
<p>Regarding maintaining an official <code>winget</code> package, I think we'd be willing to get involved but I haven't maintained a package there before so I'm not sure how much effort this would be. cc @Gankra</p>
<p>It looks like in, e.g., https://github.com/microsoft/winget-pkgs/pull/226972, it can take some iterative work to get a release out? I would be disappointed if our recommended installation method on Windows took significantly longer to get new versions than other channels.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-02-12 18:55</div>
            <div class="timeline-body"><p>Sorry if this is a naive question (coming from someone only occasionally developing on windows), but how universally available is winget compared to our requirements for a powershell installation? Are there cases where a user would have to install winget manually first, for example for a server or containers?</p>
<p>Are there any other differences, for example related to PATH precedence or permissions we have to consider with a winget installation?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/localden">@localden</a> on 2025-02-12 19:08</div>
            <div class="timeline-body"><p>I'll tag in @crutkas here as the PM driving the Windows developer story (which includes <code>winget</code>).</p>
<p>I fully agree that changing installers would be <em>super</em> jarring. I suspect that if one would use <code>winget</code> to install, then <code>uv self update</code> will not work at all in the <a href="https://github.com/astral-sh/uv/blob/3f6a7f987928424fa8340015b39e3ca485431514/crates/uv/src/commands/self_update.rs#L52C37-L52C48">current implementation</a>, given that the executable paths will be completely different? If the updater is able to determine reliably that a package is sourced from <code>winget</code> on Windows (although I recognize that this is likely a Windows-specific code path that might not be optimal for a generic script), would it be able to rely on the built-in package manager to update?</p>
<p>In terms of package maintenance, I don't want to overly trivialize it, but it's <a href="https://github.com/microsoft/winget-pkgs/blob/master/manifests/a/astral-sh/uv/0.5.29/astral-sh.uv.installer.yaml">essentially a manifest</a> that needs to define the artifacts that you already provide through your releases. There is <a href="https://github.com/microsoft/winget-create">tooling available</a> that simplifies the process.</p>
<p>To @konstin's question, <code>winget</code> should be available starting with <a href="https://devblogs.microsoft.com/commandline/windows-package-manager-1-0/">Windows 10 version 1809</a> (Windows 10 October 2018 Update) and later. It is possible in certain scenarios that <code>winget</code> is not on the box and it will require the user to install it first (e.g., older versions of Windows).</p>
<p>I'll let the <code>winget</code> folks (@crutkas can bring in additional experts) to chime in on specific technical details, such as <code>PATH</code> precendence and permission model.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-12 19:18</div>
            <div class="timeline-body"><blockquote>
<p>... would it be able to rely on the built-in package manager to update?</p>
</blockquote>
<p>Maybe. I know, for example, that the <code>fly</code> CLI will self-update with HomeBrew — but we haven't investigated that at all yet. The installer already is implementing some platform-specific logic.</p>
<p>A related question: are there people on your team that would invest into making this work well enough for us to recommend it as the default? If so, that would be helpful for prioritization.</p>
<p>I basically agree with the premise that it'd be great to avoid bypassing system policies for the installer to work consistently.</p>
<p>I also worry a little about installing to a different path. Installing to a consistent location across platforms is generally a better experience for our users. But, more importantly, <code>uv tool install</code> needs to install executable entrypoints <em>somewhere</em> and if it's the same location as <code>uv</code> itself is installed in then it's already on the <code>PATH</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-02-12 19:37</div>
            <div class="timeline-body"><p>Adding context: the prebuilt &quot;trampoline&quot; binaries we ship on Windows currently rely on a being able to set the utf8 codepage in manifests, which is apparently <a href="https://github.com/astral-sh/uv/pull/11049#issuecomment-2624563587">already making us require win10 1903</a> which I consider acceptable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-02-12 21:13</div>
            <div class="timeline-body"><blockquote>
<ol>
<li><code>uv self update</code> is powered by our installer, I think this is valuable to our users and I don't want to have to recommend they switch installation methods <em>after the fact</em> to get access to the command.</li>
</ol>
</blockquote>
<p>Related:
<a href="https://github.com/astral-sh/uv/issues/9421">Add uv self install</a>
<a href="https://github.com/astral-sh/uv/issues/9871">Add uv self uninstall</a></p>
<p>I think it is worth considering <code>winget</code> as the method to download the <code>uv</code> binary, and then utilize <code>uv</code> itself to perform its own installation.</p>
<p>IMO, <code>uv self update</code> should not rely on an untracked/cached powershell script somewhere on the system.</p>
<p><code>winget</code> plays nicely with programs that can update themselves. I've updated programs manually and noticed that <code>winget</code> then reports those new versions properly. uv may need to update a few registry keys to play nicely with this (or show an entry in the Control Panel programs list), but the <code>winget</code> devs will know way more on the subject.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-02-12 21:20</div>
            <div class="timeline-body"><p><code>winget</code> manifests can specify several things such as the software license, installer download URL, and arguments that should be passed to the installer depending on the scope (i.e., user or machine).</p>
<p>In this case, <code>winget</code> should just download <code>uv.exe</code> and then call <code>uv.exe self install --user</code> if launched in an unprivileged terminal/process (user scope) and <code>uv.exe self install --system</code> if launched in a privileged terminal/process (machine scope).</p>
<p>Example configs:</p>
<ul>
<li><a href="https://github.com/microsoft/winget-pkgs/blob/master/manifests/g/Git/Git/2.47.1.2/Git.Git.installer.yaml">Git</a></li>
<li><a href="https://github.com/microsoft/winget-pkgs/blob/master/manifests/p/Python/Python/3/13/3.13.2/Python.Python.3.13.installer.yaml">Python</a></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-12 21:24</div>
            <div class="timeline-body"><blockquote>
<p>IMO, uv self update should not rely on an untracked/cached powershell script somewhere on the system.</p>
</blockquote>
<p>It doesn't, but our updater relies on metadata about the installation that the installer writes.</p>
<blockquote>
<p>... and then utilize uv itself to perform its own installation.</p>
</blockquote>
<p>This is.. interesting. I'm not necessarily opposed to that, but it'd be a significant shift in how we're distributing uv (and Ruff) and  I'm not sure we have the resources to work on that right now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-02-12 21:30</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>IMO, uv self update should not rely on an untracked/cached powershell script somewhere on the system.</p>
</blockquote>
<p>It doesn't, but our updater relies on metadata about the installation that the installer writes.</p>
</blockquote>
<p>Ah okay, this makes a lot more sense... thanks for correcting my assumption!</p>
<blockquote>
<blockquote>
<p>... and then utilize uv itself to perform its own installation.</p>
</blockquote>
<p>This is.. interesting. I'm not necessarily opposed to that, but it'd be a significant shift in how we're distributing uv (and Ruff) and I'm not sure we have the resources to work on that right now.</p>
</blockquote>
<p>That's completely understandable. Overall, I love the portability of uv. An MSI or EXE installer seems like it would be overkill.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Paciupa">@Paciupa</a> on 2025-02-13 02:18</div>
            <div class="timeline-body"><p>WinGet packages actually are not real packages. They are yaml manifests created according to <a href="https://github.com/microsoft/winget-pkgs/tree/master/doc/manifest/schema/1.9.0">schema</a> with meta information including Installer URL. And there is no repository with binary files, only tons of yamls on <a href="https://github.com/microsoft/winget-pkgs">GitHub</a>. To add the program or a new version in WinGet, someone (developer, bot or user) has to  just create a PR with the correct meta.</p>
<p>A lot of software isn't represented in WinGet, a lot of updated with bots like <a href="https://github.com/SpecterShell/Dumplings/blob/main/Tasks/astral-sh.uv/Script.ps1">uv</a> that just parse software sites or regular users that use tools like <a href="https://github.com/russellbanks/Komac">Komac</a> and a few are updated by developers like <a href="https://github.com/vim/vim-win32-installer/blob/master/.github/workflows/winget_stable.yml">vim</a> or <a href="https://github.com/sxyazi/yazi/blob/main/.github/workflows/publish.yml">yazi</a> with <a href="https://github.com/marketplace/actions/winget-releaser">winget-releaser</a> GitHub action.</p>
<p>WinGet allows consistently upgrade all software with just one command <code>winget upgrade --all</code>. But its logic is limited: check dependencies, check new version, download and execute installer. In case of archive like uv it checks Visual C++ Redistributable (install it if needed), downloads and unpacks zip from GitHub release, adds uv and uvx in $PATH and adds records into the Registry. So I think additional uv installer logic like manipulation with Cargo stuff can be a problem.</p>
<p>I propose at least to publish a new version in WinGet using <a href="https://github.com/marketplace/actions/winget-releaser">winget-releaser</a> by adding it in uv CI.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Trenly">@Trenly</a> on 2025-02-13 09:43</div>
            <div class="timeline-body"><p>Currently, the manifest over at winget-pkgs specifies that the application is a portable application inside of a zip file. What this means is that WinGet handles the &quot;installation&quot; of the package by extracting the contents of the zip file, adding the executable to PATH, and (most importantly) creates the registry entries to make it appear in Control Panel / Add and Remove Programs.</p>
<p>The registry entries are the most important part for users of WinGet, as they are what WinGet uses to determine the installed version of an application.</p>
<p>It would be possible to change the manifest at winget-pkgs to call <code>uv.exe self install &lt;--user|--machine&gt;</code>, <em>but</em> that would be dependent upon</p>
<ol>
<li><code>uv.exe</code> writing <em>and updating</em> its own registry entries</li>
<li>The updated install method passing all of the security scans at winget-pkgs</li>
<li>The behavior actually being compiled into the exe and not just the exe using a script included in the zip file (winget-pkgs has a strict no-scripts-as-installers policy)</li>
</ol>
<hr />
<p>Regarding releasing new versions to / through WinGet, it is fairly straightforward as others have mentioned. The most reliable way is to have a GitHub action triggered on release that uses winget-create (Microsoft's own tool) to push a PR up to the winget-pkgs repository.</p>
<p>This really only requires</p>
<ol>
<li>The URLs to download the installer</li>
<li>The package version</li>
<li>A GitHub access token for creating the PR</li>
</ol>
<p>This creates the mmanifest (i.e metadata files) and raises them as a PR into winget-pkgs.</p>
<hr />
<p>Once a PR is created at winget-pkgs, the pipelines there will run a series of validations using the new manifest to ensure the application installs successfully. This is where the iterations @zanieb mentioned come in. First, the installers must pass a SmartScreen check - if the URLs to download the application don’t have enough reputation on SmartScreen, the install fails (but, retrying every 12 hours or so means it usually succeeds eventually, once the URLs have gone through SmartScreen's process). After that, the application is installed and a number of malware checks are performed. Finally, the installed application is launched to be sure that it was installed and runs without issue, then a final system scan is performed.</p>
<p>If any of the validations fail, the PR is prevented from merging and the new version would not be available. If the validations succeed, a moderator must review the PR to ensure the quality of the metadata in the manifest. After passing the pipeline and being approved by a moderator, the manifest enters the publishing queue and is generally published within the next hour.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/denelon">@denelon</a> on 2025-02-13 21:06</div>
            <div class="timeline-body"><p>Perfect description @Trenly. @crutkas and I work together on &quot;Developer Experiences&quot;. I'm the PM for WinGet if there are any questions, but it looks like all the information has been shared here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-03-08 00:51</div>
            <div class="timeline-body"><p>Minor update: we plan to integrate WinGet into our publish process for uv and ruff (with presumably <a href="https://github.com/marketplace/actions/winget-releaser">winget-releaser</a>), so we can ensure the package's definitions are properly maintained and hopefully enabling us to shepherding any failures in winget-pkgs PRs so that releases don't stall out for days.</p>
<p>Making it the <em>preferred</em> option over the powershell installer will follow if we're happy enough with the result, and when we have time to prioritize remaining UX holes like <code>uv self update</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/crutkas">@crutkas</a> on 2025-03-08 01:23</div>
            <div class="timeline-body"><p>@Gankra  one thing we do with PowerToys is actually manage our releases via a github action. Winget releaser is a option as well.</p>
<p>Here is PowerToys does: https://github.com/microsoft/PowerToys/blob/main/.github/workflows/package-submissions.yml</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/crutkas">@crutkas</a> on 2025-03-08 01:28</div>
            <div class="timeline-body"><p>if it would be good to have a quick chat to see if we can help, please email us and happy to set up time.  crutkas@microsoft.com</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/localden">@localden</a> on 2025-08-06 00:28</div>
            <div class="timeline-body"><p>Just checking in here @Gankra @crutkas - anything we can help with to get the <code>winget</code> ball rolling?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-06 13:50</div>
            <div class="timeline-body"><p>We just don't have the resources to dedicate to driving this forward at the moment, though we remain interested. I started prototyping <code>uv self install</code> and <code>uv self update</code> implementations which do not rely on axo / cargo-dist, but I think it'd be a long tail of work to reach feature parity.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SimonMerrett">@SimonMerrett</a> on 2025-11-14 09:41</div>
            <div class="timeline-body"><p>I'd just like to add my support for a better WinGet experience. It has been a brilliant tool for me as I dip into package-managed life. Unfortunately, I have not been able to successfully install it using WinGet it as a non-admin user, despite installing it with machine scope from the local admin account and trying to manually set Path environment variable. Not trying to add an issue to another one, but just context in case &quot;better experience&quot; doesn't give any clues as to what direction to take development.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:25 UTC
    </footer>
</body>
</html>
