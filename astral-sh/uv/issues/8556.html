<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pip install - r requirements.txt behave diffrently than uv pip install - r requirements.txt - astral-sh/uv #8556</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>pip install - r requirements.txt behave diffrently than uv pip install - r requirements.txt</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/8556">#8556</a>
        opened by <a href="https://github.com/samuelgarcia">@samuelgarcia</a>
        on 2024-10-25 07:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/samuelgarcia">@samuelgarcia</a> on 2024-10-25 07:46</div>
            <div class="timeline-body"><p>In a fresh env created by <code>python -m venv</code> or relatively <code>uv venv</code>.
<code>pip install - r requirements.txt</code> behave diffrently than <code>uv pip install - r requirements.txt</code></p>
<p>For me, this <code>requirements.txt</code> give me differents results:</p>
<pre><code>numpy&lt;2
jupyterlab
PySide6&lt;6.8
numba
zarr
hdbscan
pyqtgraph
ipywidgets
ipympl
ephyviewer
spikeinterface[full,widgets]
spikeinterface-gui
kilosort
</code></pre>
<p>with pip + venv I have spikeinterface version 0.101.2 (the latest and what I want)
with uv pip I have spikeinterface version 0.100.6 (an older version)</p>
<p>the work around was to change the requirements.txt to this</p>
<pre><code>spikeinterface[full,widgets]
numpy&lt;2
jupyterlab
PySide6&lt;6.8
numba
zarr
hdbscan
pyqtgraph
ipywidgets
ipympl
ephyviewer
spikeinterface-gui
kilosort
</code></pre>
<p>Any idea why ? uv and pip resolve version diffrently for the first case ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-25 13:30</div>
            <div class="timeline-body"><p>pip and uv have different package resolvers, and can both produce valid resolutions that are different. There's an <a href="https://docs.astral.sh/uv/concepts/resolution/#basic-examples">example</a> of this in the documentation.</p>
<p>Changing the order of your requirements changes the priority uv uses to determine which package version to solve next.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-10-25 13:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zm711">@zm711</a> on 2024-10-25 15:19</div>
            <div class="timeline-body"><p>Hey @zanieb thanks for the quick answer. I read the example you linked and I couldn't find any explicit line where it mentions that the order of requirements changes the priority. I think that is great information to know as we try to switch over to using <code>uv</code> for everything. Maybe I read too fast, which header is that information under? It's great that it's a quick fix :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samuelgarcia">@samuelgarcia</a> on 2024-10-25 15:27</div>
            <div class="timeline-body"><p>Hi @zanieb.
Thanks at  lot for this anwser. I will read this doc more carfully, I think we can close this issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hauntsaninja">@hauntsaninja</a> on 2024-10-27 06:36</div>
            <div class="timeline-body"><p>A more intuitive workaround is to just add a lower bound to the package in your requirements.txt if you know some version is too old</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-27 13:57</div>
            <div class="timeline-body"><p>Sorry that document doesn't discuss prioritization, just shows how resolutions can differ but be valid. There's a note about prioritization <a href="https://docs.astral.sh/uv/pip/compatibility/#package-priority">here</a> but we don't discuss it at length.</p>
<p>As Shantanu suggests, adding a lower bound is best practice.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-27 13:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zm711">@zm711</a> on 2024-10-27 16:09</div>
            <div class="timeline-body"><p>Thanks for the help! We really appreciate it!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
