<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for pre-releases in Python version requests - astral-sh/uv #7270</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for pre-releases in Python version requests</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7270">#7270</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-09-10 19:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-10 19:03</div>
            <div class="timeline-body"><p>e.g. now that we have https://github.com/astral-sh/uv/pull/7263 we supply a release candidate but we don't support <code>--python 3.13rc2</code> (that's parsed as an executable name)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-09-10 19:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @zanieb on 2024-09-10 19:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">uv python</span> added by @zanieb on 2024-09-10 19:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeleppane">@mikeleppane</a> on 2024-09-11 11:58</div>
            <div class="timeline-body"><p>Hi. I'm checking this out.</p>
<p>Question: Should we only focus on release candidates or also on alpha and beta releases?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-11 13:21</div>
            <div class="timeline-body"><p>Sweet.</p>
<p>I think we should support all the prerelease kinds. We have a type for this at <code>pep440::version::Prerelease</code>.</p>
<p>There's a bit of structure design work here too. <code>VersionRequest</code> is currently defined as:</p>
<pre><code class="language-rust">pub enum VersionRequest {
    #[default]
    Any,
    Major(u8),
    MajorMinor(u8, u8),
    MajorMinorPatch(u8, u8, u8),
    Range(VersionSpecifiers),
}
</code></pre>
<p>I think we'll want to add an <code>Option&lt;Prerelease&gt;</code> to the <code>Major</code>, <code>MajorMinor</code>, and <code>MajorMinorPatch</code> variants (as opposed to introducing new variants like <code>MajorPrerelease</code>), but I'm not sure if that's the best way to do it without trying.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeleppane">@mikeleppane</a> on 2024-09-11 15:13</div>
            <div class="timeline-body"><p>Okay, great! Something along those lines I already managed to discover.</p>
<blockquote>
<p>I think we'll want to add an Option<Prerelease> to the Major, MajorMinor, and MajorMinorPatch variants (as opposed to introducing new variants like MajorPrerelease), but I'm not sure if that's the best way to do it without trying.</p>
</blockquote>
<p>Yeah, let's see which one is the best solution.</p>
<p>To clarify, these are the prerelease variants that need to be covered (according to <a href="https://peps.python.org/pep-0440/">PEP 440</a>):</p>
<pre><code class="language-bash">X.YaN   # Alpha release
X.YbN   # Beta release
X.YrcN  # Release Candidate
</code></pre>
<p>Regarding the variants, if we introduce a new variant, will only one suffice, like <code>MajorMinorPrerelease</code>? Or is there a use case for <code>Major(u8, Option&lt;Prerelease&gt;)</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-11 18:27</div>
            <div class="timeline-body"><p>Hm. <code>3.13rc2</code> seems valid as well as <code>3.13.0rc2</code>. In the first, the <code>0</code> is implied. In contrast, <code>3.13.1rc1</code> seems wrong as does <code>3rc2</code>. So maybe we do just want <code>MajorMinorPrerelease</code>. I wonder if we should support <code>3.13rc</code> and select the latest release candidate? Or generally support requesting whatever pre-release is available?</p>
<p>Note I made some changes around pre-releases in https://github.com/astral-sh/uv/pull/7290 and #7300</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-18 17:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:45 UTC
    </footer>
</body>
</html>
