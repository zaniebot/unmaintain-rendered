```yaml
number: 14523
title: "UV seems unable to handle package changing from SemVer to CalVer (e.g.: s3fs)"
type: issue
state: closed
author: pdpark-wex
labels:
  - question
  - needs-mre
assignees: []
created_at: 2025-07-09T15:23:44Z
updated_at: 2025-07-09T16:54:54Z
url: https://github.com/astral-sh/uv/issues/14523
synced_at: 2026-01-10T01:57:33Z
```

# UV seems unable to handle package changing from SemVer to CalVer (e.g.: s3fs)

---

_Issue opened by @pdpark-wex on 2025-07-09 15:23_

### Summary

s3fs changed from semantic versioning (SemVer) to calendar versioning (CalVer): https://github.com/fsspec/s3fs/tags?after=2021.11.0

If I don't pin s3fs to the latest CalVer, it picks version 0.4.2.
I can pin it to the current latest version or later with "s3fs>=2025.5.1" and it will resolve properly and use the latest version of s3fs.

### Platform

Darwin 24.4.0 arm64

### Version

uv 0.7.19 (Homebrew 2025-07-02)

### Python version

Python 3.12.8

---

_Label `bug` added by @pdpark-wex on 2025-07-09 15:23_

---

_Comment by @zanieb on 2025-07-09 15:26_

Please provide a reproduction as described in #9452

---

_Comment by @zanieb on 2025-07-09 15:26_

```
❯ uv venv
Using CPython 3.13.2
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
❯ uv pip install s3fs
Resolved 19 packages in 459ms
Prepared 4 packages in 46ms
Installed 19 packages in 69ms
 + aiobotocore==2.23.0
 + aiohappyeyeballs==2.6.1
 + aiohttp==3.12.13
 + aioitertools==0.12.0
 + aiosignal==1.4.0
 + attrs==25.3.0
 + botocore==1.38.27
 + frozenlist==1.7.0
 + fsspec==2025.5.1
 + idna==3.10
 + jmespath==1.0.1
 + multidict==6.6.3
 + propcache==0.3.2
 + python-dateutil==2.9.0.post0
 + s3fs==2025.5.1
 + six==1.17.0
 + urllib3==2.5.0
 + wrapt==1.17.2
 + yarl==1.20.1
```

---

_Label `bug` removed by @zanieb on 2025-07-09 15:26_

---

_Label `question` added by @zanieb on 2025-07-09 15:26_

---

_Label `needs-mre` added by @zanieb on 2025-07-09 15:26_

---

_Comment by @pdpark-wex on 2025-07-09 16:03_

See attached file with output of command: `uv lock --native-tls --verbose > uv_lock.txt 2>&1`

[uv_lock.txt](https://github.com/user-attachments/files/21146424/uv_lock.txt)


---

_Comment by @zanieb on 2025-07-09 16:15_

It looks like there's a dependency conflict with `botocore` and `aiobotocore` that causes us to backtrack to an older version. It doesn't have anything to do with calver, just the resolver trying to solve constraints consistent with your system. I can't provide more details without an actual reproducible example.

Adding a lower bound on `s3fs` is a reasonable way to inform the resolver you don't want an old version of it.

Does it persist with `uv lock --upgrade`? 

---

_Comment by @pdpark-wex on 2025-07-09 16:40_

Here's the relevant contents of my `pyproject.toml` file - let me know if you need anything to reproduce.

```
[project]
name = "my_project"
version = "0.1.0"
requires-python = "~=3.12.0"
dependencies = [
    "selenium",
    "GitPython",
    "pandas",
    "pyarrow",
    "s3fs",
    "boto3"
]

[project.optional-dependencies]
dev = [
    "pytest",
    "pytest-mock",
    "ipykernel",
    "notebook",
    "ruff",
    "invoke"
]

[tool.setuptools.packages.find]
exclude = ["tests"]
namespaces = false
```


---

_Comment by @pdpark-wex on 2025-07-09 16:40_

"Does it persist with uv lock --upgrade?"
Yes

---

_Comment by @zanieb on 2025-07-09 16:48_

This is likely just a backtracking issue as described in https://github.com/astral-sh/uv/issues/8157

You should include lower bounds on your dependencies.

---

_Closed by @pdpark-wex on 2025-07-09 16:54_

---
