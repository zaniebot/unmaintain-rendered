```yaml
number: 12071
title: "[Question] Using `uvx` and PEP723"
type: issue
state: closed
author: anzhi0708
labels:
  - question
assignees: []
created_at: 2025-03-09T03:31:17Z
updated_at: 2025-03-11T04:36:28Z
url: https://github.com/astral-sh/uv/issues/12071
synced_at: 2026-01-10T01:57:27Z
```

# [Question] Using `uvx` and PEP723

---

_Issue opened by @anzhi0708 on 2025-03-09 03:31_

### Question

Suppose I installed a certain command using `uvx` and then ran a script. The script provides a list of dependencies using the PEP 723 standard.

```bash
me@MacBook-Air ~/dev> head -n 19 test_my_sdk.py
# /// script
# dependencies = [
#     "chardet>=5.2.0",
#     "colorama>=0.4.6",
#     "httpx>=0.28.1",
#     "openpyxl>=3.1.5",
#     "pandas>=2.2.3",
#     "typer>=0.15.2",
#     "rich",
#     "memory_profiler"
# ]
# ///

```

- Installing `memory_profile`:

```bash
uv tool install --with matplotlib memory-profiler
```

Now, I can use `uv run` to execute this script, and `uv` will automatically manage the dependencies declared in the script. However, if I use the `mprof` command from the recently installed `memory_profiler` to run the script, it reports missing dependencies (e.g., `pandas`, which is declared at the beginning of the script). It seems that the installed command only includes dependencies specified with `--with`, but not others. If I want to run this script using the newly installed `mprof` command, do I need to list all dependencies with `--with` when installing it? Like `uv tool install --with matplotlib --with httpx --with colorama --with chardet --with openpyxl --with pandas --with typer --with rich memory-profiler`?

### Platform

_No response_

### Version

_No response_

---

_Label `question` added by @anzhi0708 on 2025-03-09 03:31_

---

_Comment by @zanieb on 2025-03-09 15:32_

Yeah unfortunately that's what you'd need to do now

I think you want https://github.com/astral-sh/uv/issues/6542

You can workaround specifying all the dependencies with something like

```
uv export --script example.py | uvx --with-requirements - --from memory-profiler mprof
```

---

_Comment by @anzhi0708 on 2025-03-11 04:36_

Thanks!

---

_Closed by @anzhi0708 on 2025-03-11 04:36_

---
