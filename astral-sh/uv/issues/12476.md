```yaml
number: 12476
title: Reproducibility for isolated build environments via exclude newer?
type: issue
state: open
author: hauntsaninja
labels:
  - enhancement
assignees: []
created_at: 2025-03-26T03:55:22Z
updated_at: 2025-04-01T20:20:53Z
url: https://github.com/astral-sh/uv/issues/12476
synced_at: 2026-01-10T01:57:28Z
```

# Reproducibility for isolated build environments via exclude newer?

---

_Issue opened by @hauntsaninja on 2025-03-26 03:55_

I am a big fan of `--exclude-newer`. In many situations, it can give you 90% of the reproducibility you want for 10% of the UX overhead.

It occurs to me it could be neat to integrate this when building sdists. When creating the build environment to build an sdist from PyPI, we could install build dependencies with `--exclude-newer` equal to the release date of the sdist.

One wrinkle we might want is `exclude_newer = max(release_date_of_sdist, release_date_of_target_python_version)`. This will also increase your odds of support on new Python versions and Python upgrades are a natural time to lose environment reproducibility.

I think the 100% solution for reproducible build environments is really tricky and has a lot of UX overhead. But this could be a promising 90% solution

---

_Label `enhancement` added by @hauntsaninja on 2025-03-26 03:55_

---

_Renamed from "Better reproducibility for isolated build environments?" to "Reproducibility for isolated build environments via exclude newer?" by @hauntsaninja on 2025-03-26 03:55_

---

_Comment by @zanieb on 2025-04-01 19:03_

I kind of like this... cc @Gankra / @charliermarsh 

We're pretty likely to ship locking of build dependencies in the near future though.

---

_Comment by @charliermarsh on 2025-04-01 19:11_

Yeah it's pretty clever. Maybe as a setting? It shouldn't be too hard to implement, honestly.

---

_Comment by @Gankra on 2025-04-01 19:13_

Oh this is indeed a nice simple approach...

---

_Assigned to @Gankra by @Gankra on 2025-04-01 19:13_

---

_Comment by @zanieb on 2025-04-01 20:02_

I'm unsure if we should pursue it if locking by default is attainable.

---

_Comment by @Gankra on 2025-04-01 20:20_

I was picturing it as a hammer to make a (usable) lockfile possible to construct at all, in cases where the resolver can't figure out what to do. Possibly I'm overestimating the places you need that though.

---
