<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Should `uv add --dev &lt;packages&gt;` move packages out of `dependencies`? - astral-sh/uv #14463</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Should <code>uv add --dev &lt;packages&gt;</code> move packages out of <code>dependencies</code>?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14463">#14463</a>
        opened by <a href="https://github.com/stdedos">@stdedos</a>
        on 2025-07-04 20:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/stdedos">@stdedos</a> on 2025-07-04 20:06</div>
            <div class="timeline-body"><h3>Question</h3>
<p>For e.g.</p>
<pre><code class="language-toml">dependencies = [
    &quot;addict&quot;,
    &quot;fabric&quot;,
    &quot;mypy&gt;=1.11&quot;,
    &quot;pylint~=3.0&quot;,
    &quot;questionary&quot;,
]

[dependency-groups]
# Empty
</code></pre>
<p>is there a reason why <code>uv add --dev mypy pylint</code> wouldn't simply / with-new-constraints move the packages in question</p>
<pre><code class="language-toml">dependencies = [
    &quot;addict&quot;,
    &quot;fabric&quot;,
    &quot;questionary&quot;,
]

[dependency-groups]
dev = [
    &quot;mypy&gt;=1.11&quot;,
    &quot;pylint~=3.0&quot;,
]
</code></pre>
<p>and instead give</p>
<pre><code class="language-toml">dependencies = [
    &quot;addict&quot;,
    &quot;fabric&quot;,
    &quot;mypy&gt;=1.11&quot;,
    &quot;pylint~=3.0&quot;,
    &quot;questionary&quot;,
]

[dependency-groups]
dev = [
    &quot;mypy&gt;=1.16.1&quot;,
    &quot;pylint&gt;=3.3.7&quot;,
]
</code></pre>
<p>?</p>
<p>I did a cursory read of https://github.com/astral-sh/uv/issues?q=sort%3Aupdated-desc%20is%3Aissue%20%22--dev%22%20add (first 3 pages) - I couldn't pattern-match my question</p>
<p>&quot;I think <code>npm i</code> does this (i.e. moves the package between dependencies and devDependencies)&quot; - but it's being a long time since I last invoked <code>npm</code> ðŸ˜“</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @stdedos on 2025-07-04 20:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-07-07 14:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-07-07 19:32</div>
            <div class="timeline-body"><p>Hmm, I think that wouldn't quite be right here, though I see the appeal. It can actually make sense to duplicate MyPy between the two groups, since it's possible to both (1) install the project without its dev dependencies, and (2) install only the dev dependencies but not the project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-07-07 19:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stdedos">@stdedos</a> on 2025-07-07 19:55</div>
            <div class="timeline-body"><blockquote>
<p>It can actually make sense to duplicate MyPy between the two groups, since it's possible to both (1) install the project without its dev dependencies, and (2) install only the dev dependencies but not the project.</p>
</blockquote>
<p>I am ... getting confused how that makes sense ðŸ˜…</p>
<p>Do you mean that &quot;said installations&quot; are exclusive (i.e. you can ONLY pick one of them &quot;at a time&quot;)?</p>
<blockquote>
<p>(1) install the project without its dev dependencies</p>
</blockquote>
<p>Ofc, and that's why mypy-by-accident-on-deps is not right to stay there</p>
<blockquote>
<p>(2) install only the dev dependencies but not the project</p>
</blockquote>
<p>I use the &quot;install project editable&quot; flow in my development - so I don't understand this.</p>
<p>Would you mind elaborating why one would clone the project, NOT install its deps, but install is dev-deps? ðŸ˜•
... or am I missing something?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-07-07 19:58</div>
            <div class="timeline-body"><p>Yeah, it's an intentional part of the <code>dependency-groups</code> design that you can install <em>just</em> a group and <em>not</em> the project itself. It could apply to, e.g., dev dependencies: you might want to install a development dependency (like Ruff) which doesn't require the project itself to be useful, then run that development dependency over the project. We have the <code>--only-group</code> flag for this purpose.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stdedos">@stdedos</a> on 2025-07-07 21:26</div>
            <div class="timeline-body"><p>I see, thank you for the explanation ðŸ˜€</p>
<p>You don't need to spend more time - but for the record that still makes little sense to me.
(apart, ofc, from the &quot;Yeah, it's an intentional part of the dependency-groups design&quot; - which is pretty clear ðŸ˜…)</p>
<p>Idk about Ruff, but for MyPy it doesn't make sense:
Having e.g. <code>pandas</code> (or a code+typing package) it <em>can be</em> a requirement for MyPy to finish checking successfully - otherwise said library will &quot;resolve&quot; to <code>Any</code> - hence, it won't be type-checkable.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:03 UTC
    </footer>
</body>
</html>
