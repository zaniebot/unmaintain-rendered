---
number: 14953
title: specify python version on uv export command output
type: issue
state: open
author: Vitalii-Kh95
labels:
  - question
assignees: []
created_at: 2025-07-29T13:10:28Z
updated_at: 2025-07-30T16:10:52Z
url: https://github.com/astral-sh/uv/issues/14953
synced_at: 2026-01-10T01:25:51Z
---

# specify python version on uv export command output

---

_Issue opened by @Vitalii-Kh95 on 2025-07-29 13:10_

### Question

Sorry if the question is noob. But can I specify python version in requirements.txt. file? Scenario is next: I want to **not** include uv.lock in my git repo and use requirements.txt instead, so that I shouldn't have install uv on deploying. Shouldn't I enforce python version constraint then? I used poetry before transitioning to uv and with poetry I got exported requirements.txt file looking like this:
```
asgiref==3.8.1 ; python_version >= "3.12" and python_version < "4.0"
django-cors-headers==4.7.0 ; python_version >= "3.12" and python_version < "4.0"
django-taggit==6.1.0 ; python_version >= "3.12" and python_version < "4.0"
django==5.2.1 ; python_version >= "3.12" and python_version < "4.0"
djangorestframework==3.16.0 ; python_version >= "3.12" and python_version < "4.0"
gunicorn==23.0.0 ; python_version >= "3.12" and python_version < "4.0"
packaging==25.0 ; python_version >= "3.12" and python_version < "4.0"
pillow==11.2.1 ; python_version >= "3.12" and python_version < "4.0"
sqlparse==0.5.3 ; python_version >= "3.12" and python_version < "4.0"
tzdata==2025.2 ; python_version >= "3.12" and python_version < "4.0" and sys_platform == "win32"
```

Now I think it's reasonable I should be able to do the same with uv export but it seems it's impossible or I miss something.

### Platform

_No response_

### Version

_No response_

---

_Label `question` added by @Vitalii-Kh95 on 2025-07-29 13:10_

---

_Comment by @zanieb on 2025-07-29 16:26_

We should export the file with markers for the Python version. I don't know what the question is?

```
❯ uv init example
Initialized project `example` at ...
❯ cd example
❯ uv add "anyio; python_version < '3.14'"
Using CPython 3.13.2
Creating virtual environment at: .venv
Resolved 4 packages in 88ms
Prepared 3 packages in 99ms
Installed 3 packages in 4ms
 + anyio==4.9.0
 + idna==3.10
 + sniffio==1.3.1
❯ uv export
Resolved 4 packages in 0.98ms
# This file was autogenerated by uv via the following command:
#    uv export
anyio==4.9.0 ; python_full_version < '3.14' \
    --hash=sha256:673c0c244e15788651a4ff38710fea9675823028a6f08a5eda409e0c9840a028 \
    --hash=sha256:9f76d541cad6e36af7beb62e978876f3b41e3e04f2c1fbf0884604c0a9c4d93c
    # via example
idna==3.10 ; python_full_version < '3.14' \
    --hash=sha256:12f65c9b470abda6dc35cf8e63cc574b1c52b11df2c86030af0ac09b01b13ea9 \
    --hash=sha256:946d195a0d259cbba61165e88e65941f16e9b36ea6ddb97f00452bae8b1287d3
    # via anyio
sniffio==1.3.1 ; python_full_version < '3.14' \
    --hash=sha256:2f6da418d1f1e0fddd844478f41680e794e6051915791a034ff65e5f100525a2 \
    --hash=sha256:f4324edc670a0f49750a81b895f35c3adb843cca46f0530f79fc1babb23789dc
    # via anyio

```

---

_Comment by @Vitalii-Kh95 on 2025-07-30 05:16_

Honestly, I don't know what you talking about either:
```
$ uv export --no-hashes --no-dev
Resolved 52 packages in 2ms
# This file was autogenerated by uv via the following command:
#    uv export --no-hashes --no-dev
asgiref==3.9.1
    # via
    #   django
    #   django-cors-headers
django==5.2.4
    # via
    #   django-cors-headers
    #   django-taggit
    #   djangorestframework
    #   portfolio
django-cors-headers==4.7.0
    # via portfolio
django-taggit==6.1.0
    # via portfolio
djangorestframework==3.16.0
    # via portfolio
gunicorn==23.0.0
    # via portfolio
packaging==25.0
    # via gunicorn
pillow==11.3.0
    # via portfolio
sqlparse==0.5.3
    # via django
tzdata==2025.2 ; sys_platform == 'win32'
    # via django
```

Wild guess. It depends on how packages are added?. I don't think I need to specify python version when I use uv add, to get python constraint in uv export, that is, it doesn't make sense to me. Shouldn't it be resolved automatically?
Btw I though didn't use uv add at all. I migrated to uv using https://github.com/mkniewallner/migrate-to-uv I think. But I can say for sure I got python resolved for me when I used poetry's export command, that's probably why I expected the same behavior with uv.

---

_Comment by @zanieb on 2025-07-30 12:00_

Why don't you share your `pyproject.toml`?

I don't think we propagate your `requires-python` range to each requirement in the `requirements.txt`, if that's what you're asking about? We propagate Python versions markers when they matter for a single dependency, but don't apply a blanket marker to all of them?

---

_Comment by @Vitalii-Kh95 on 2025-07-30 15:36_

Sorry I didn't provide it before. I am not well familiar with the tool. Here's the pyproject.toml. As you see there's some specification about which python version to use, but it might be a leftover from when pyproject.toml was used by poetry and is currently ignored by uv, right?
`pyproject.toml`
```
[project]
name = "portfolio"
version = "0.1.0"
description = ""
authors = [{ name = "***", email = "***" }]
requires-python = "~=3.12"
readme = "README.md"
dependencies = [
    "django>=5,<6",
    "djangorestframework",
    "django-cors-headers",
    "django-taggit>=6.1.0,<7",
    "pillow>=11.0.0,<12",
    "gunicorn>=23.0.0,<24",
]

[dependency-groups]
dev = [
    "faker>=30.8.1,<31",
    "pytest>=8.3.4,<9",
    "httpx>=0.28.1,<0.29",
    "pandas>=2.2.3,<3",
    "django-extensions>=4.1",
    "werkzeug>=3.1.3",
    "pyopenssl>=25.1.0",
    "ipython>=9.4.0",
]

[tool.uv]
package = false
default-groups = [
    "dev",
]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"
```

---

_Comment by @zanieb on 2025-07-30 15:40_

We will respect the `requires-python` lower bound, e.g., when we solve we require that packages support Python 3.12. However, we don't emit that in the `requirements.txt` because you _could_ install those requirements on a different Python version. The `requires-python` is a property of  the `portfolio` package, not those child dependencies.

---

_Comment by @Vitalii-Kh95 on 2025-07-30 15:56_

Thank you for your answer. If it's possible, could you give me more thorough explanation, as I am not that experienced developer and I didn't understand your reasoning. You said: "we don't emit that in the requirements.txt because you could install those requirements on a different Python version" but isn't it the purpose to put as much constraints as possible to make sure everything will work correctly on different device? What if my codebase has code incompatible with lesser python version. And it would work as expected on developer device but will not at client. Why the different approach with uv.lock/pyproject and requirements.txt? Don't they serve basically the same purpose?
And also if you have spare time, could you tell me shortly how you'd managed such scenario? I can explain why I decided to stick with requirements.txt on "production": no need to install additional tools and simplicity.

---

_Comment by @zanieb on 2025-07-30 16:10_

I'm sorry I don't really have the time to go through all of that, we have too many pressing issues to work on. Briefly...

With those markers emitted by Poetry, if the Python version is not in the range at install time, the install command will succeed, but no packages will be installed. That's not what you want. If those dependencies can't be used with the given Python version, you want the command to fail. That's what happens if the markers are not emitted.

The `requirements.txt` format has no way to specify the required Python version. You can only _omit_ dependencies depending on the Python version. That's why you shouldn't use it.

---
