```yaml
number: 3200
title: "uv doesn't reinstall editable package when non-editable package is requested"
type: issue
state: closed
author: danielhollas
labels:
  - bug
assignees: []
created_at: 2024-04-22T21:15:48Z
updated_at: 2024-04-23T19:03:45Z
url: https://github.com/astral-sh/uv/issues/3200
synced_at: 2026-01-10T01:57:07Z
```

# uv doesn't reinstall editable package when non-editable package is requested

---

_Issue opened by @danielhollas on 2024-04-22 21:15_

Consider the following sequence 

```console
$ git clone https://github.com/aiidateam/aiida-core && cd aiida-core
$ uv venv --seed
$ uv pip install --no-deps -e .
   Built file:///home/hollas/atmospec/aiida-core                                                                                                                                                                   Built 1 editable in 170ms
Resolved 1 package in 0.71ms
Installed 1 package in 1ms
 + aiida-core==2.5.1.post0 (from file:///home/hollas/atmospec/aiida-core)
```

Running editable install for the second time re-installs the package, which is nice:

```console
$ uv pip install --no-deps -e .
Built 1 editable in 183ms
Resolved 1 package in 0.93ms
Installed 1 package in 4ms
 - aiida-core==2.5.1.post0 (from file:///home/hollas/atmospec/aiida-core)
 + aiida-core==2.5.1.post0 (from file:///home/hollas/atmospec/aiida-core)
```

However, trying to install the package in non-editable mode does not re-install it

```console
$ uv pip install --no-deps .
Resolved 1 package in 1ms
Audited 1 package in 0.04ms
```



uv version 0.1.36


---

_Comment by @charliermarsh on 2024-04-23 13:20_

Hmm interesting. Makes sense to force a reinstall here I suppose.

---

_Label `enhancement` added by @charliermarsh on 2024-04-23 13:20_

---

_Comment by @danielhollas on 2024-04-23 14:22_

My understanding was that while the editable mode generally tries to emulate the actual installation, it is not guaranteed to be perfect so I think reinstalling is the only correct option here. Citing from [PEP 660](https://peps.python.org/pep-0660/#terminology-and-goals) 

> Depending on the way build backends implement this specification, some minor differences may be visible such as the presence of additional files that are in the source tree and would not be part of a regular install. Build backends are encouraged to document such potential differences.

---

_Label `enhancement` removed by @charliermarsh on 2024-04-23 18:12_

---

_Label `bug` added by @charliermarsh on 2024-04-23 18:12_

---

_Comment by @charliermarsh on 2024-04-23 18:12_

I'll label it as a bug.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-04-23 18:21_

---

_Referenced in [astral-sh/uv#3219](../../astral-sh/uv/pulls/3219.md) on 2024-04-23 18:53_

---

_Closed by @charliermarsh on 2024-04-23 19:03_

---
