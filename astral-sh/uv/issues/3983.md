```yaml
number: 3983
title: Locking in a workspace should lock the entire workspace
type: issue
state: closed
author: charliermarsh
labels:
  - preview
assignees: []
created_at: 2024-06-03T13:34:41Z
updated_at: 2024-06-06T19:09:46Z
url: https://github.com/astral-sh/uv/issues/3983
synced_at: 2026-01-10T01:57:08Z
```

# Locking in a workspace should lock the entire workspace

---

_Issue opened by @charliermarsh on 2024-06-03 13:34_

If you run `uv lock` in a workspace, we should lock the entire workspace, creating a single shared lockfile.

---

_Label `preview` added by @charliermarsh on 2024-06-03 13:34_

---

_Comment by @charliermarsh on 2024-06-03 13:34_

\cc @konstin -- I think you wrote a TODO for this.

---

_Assigned to @konstin by @konstin on 2024-06-03 14:18_

---

_Comment by @idlsoft on 2024-06-04 02:38_

I think it would also be useful to have an MD5 checkum of the original dependencies.
Something like
```
# md5:albatross cc83132c0988b1cc87db8aad990d7649fef2a09e7c5d450bc3b44bc779bee51a
# md5:albatross:test 6b81ef26a9447316237f1c5a3debd7d131411c1f1a28d490f57de1f33400e369
```
This way commands like `venv --no-lock`  can complain about stale locks.
A dedicated `check-lock` command would also be nice.

We do this currently with `rye` so people don't forget to run `lock` after modifying `pyproject.toml`.
The implementation is bit hacky, but it's a good sanity check.

---

_Referenced in [astral-sh/uv#4016](../../astral-sh/uv/pulls/4016.md) on 2024-06-04 17:19_

---

_Closed by @charliermarsh on 2024-06-06 19:09_

---
