<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make importing from root easy - astral-sh/uv #17013</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make importing from root easy</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/17013">#17013</a>
        opened by <a href="https://github.com/davidgilbertson">@davidgilbertson</a>
        on 2025-12-06 05:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/davidgilbertson">@davidgilbertson</a></div>
            <div class="timeline-body">Summary
<p>A common use case is to have an &#x27;application&#x27; type project (not a library), and to allow importing of shared code, like <code>from utils import my_util</code>, where <code>utils</code> is a directory at the top level of the project.</p>
Background - the current pain
<p>This is <em>possible</em> right now, but for such a common requirement you really need to dig quite deep to work out how to get it working. It took me a while to work out that the minimum I needed was a file <code>.venv/Lib/site-packages/my_project.pth</code> that contained my root directory path, which is added to <code>sys.path</code>.
And that any top-level directory that I want to import (<code>utils</code>, <code>common</code>, etc) should have an <code>__init__.py</code> file in it.</p>
<p>To get this working, my <code>pyconfig.toml</code> looks like this:</p>
<pre><code>[build-system]
requires = [&quot;uv_build&gt;=0.9.15,&lt;0.10.0&quot;]
build-backend = &quot;uv_build&quot;

[tool.uv.build-backend]
module-root = &quot;&quot;
module-name = []
</code></pre>
<p>I&#x27;m not even sure that <code>module-name = []</code> is valid, but it works. I can make that <code>module-name = [&quot;utils&quot;, &quot;common&quot;]</code> but it doesn&#x27;t change the <code>.pth</code> file and it&#x27;s not DRY.
Part of what makes this difficult is that when you get into the docs of any of the build tools it all assumes you&#x27;re distributing a wheel so nothing really clicks and you get this feeling that you&#x27;re doing things the wrong way.</p>
Suggested solution
<p>So my feature request is to support a property in <code>pyproject.toml</code> that does the job in one line. Like <code>enable_imports = true</code>. And when I <code>uv sync</code> such a project, it says &quot;ah, this user wants to do top-level imports, we&#x27;ll create a <code>.pth</code> file with the project root for them, they&#x27;ll be so happy!&quot;.
Or maybe even take the view that the <em>default</em> behaviour for an application should be to add that <code>.pth</code> file, the downside is pretty low (a user has an import that would otherwise fail, but succeeds because it matches a directory in the project root with an <code>__init__.py</code> file in it).</p>
Example
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/davidgilbertson">@davidgilbertson</a> on 2025-12-06 05:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-16 11:47</div>
            <div class="timeline-body"><p>Can you share for project structure you have? I tried reproducing it but it works for me: https://github.com/konstin/uv-17013-top-level-utils</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidgilbertson">@davidgilbertson</a> on 2025-12-16 20:05</div>
            <div class="timeline-body"><p>Importing from root will work fine from a file that&#x27;s also at the top level, but try importing from utils or common from within a subdirectory.
Also you won&#x27;t be able replicate in PyCharm Python Console which helps by adding the root for to sys.path</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidgilbertson">@davidgilbertson</a> on 2025-12-16 20:59</div>
            <div class="timeline-body"><p>OK I checked out your repo. I&#x27;m not sure what you&#x27;re saying, what is it that you&#x27;re trying to replicate exactly?</p>
<p>Some points to clarify:</p>
<ul>
<li>Yes, by configuring <code>[build-system]</code> and <code>[tool.uv.build-backend]</code> with just the right values in <code>pyproject.toml</code>, you will be able to import from top-level directories.</li>
<li>Your config has <code>module-name = [&quot;top_level_utils&quot;, &quot;common&quot;, &quot;utils&quot;]</code> which works, but means every time you add a new top-level directory you also need to add it to the config and re-build the project. Duplication of work and not ideal.</li>
<li>Even without this, in your repo if you imported from within <code>main.py</code> that would work because it&#x27;s at the top level.</li>
<li>Without the config of build system and backend settings, importing from <code>utils</code> or <code>common</code> (from anywhere but a file at the project root) would fail.</li>
</ul>
<p>So the thing to replicate is that there&#x27;s no way to allow imports from top-level directories that doesn&#x27;t require several lines of config that probably most people would need to search the docs for each time they want to do it.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:14 UTC
    </footer>
</body>
</html>
