<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configure constraints file in config files - astral-sh/uv #7336</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Configure constraints file in config files</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/7336">#7336</a>
        opened by <a href="https://github.com/robertschweizer">@robertschweizer</a>
        on 2024-09-12 16:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/robertschweizer">@robertschweizer</a> on 2024-09-12 16:43</div>
            <div class="timeline-body"><p>Thanks a lot for this great project!</p>
<p>It would be cool if <code>uv.toml</code> and <code>pyproject.toml</code> allowed specifying</p>
<pre><code class="language-toml">constraint = &quot;https://host.local/my-global-constraints.txt
</code></pre>
<p><code>uv</code> currently only allows passing this as environment variable or with the <code>--constraint</code> CLI argument.</p>
<p>In our team, we have a shared global constraints file that's used by all our projects. This way we can quickly exclude broken upstream package versions across all our projects.</p>
<p>With pip, we set the <code>PIP_CONSTRAINT</code> variable in all CI pipelines, and for local development, every engineer has <code>constraint = https://host.local/my-global-constraints.txt</code> in their global <code>pip.conf</code> file. With <code>uv</code>, this is not possible right now. If it were supported in config files, we might just configure it in every project's <code>pyproject.toml</code>.</p>
<p>The same thing would be useful for us in build constraints.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-12 16:57</div>
            <div class="timeline-body"><p>This is roughly a duplicate of https://github.com/astral-sh/uv/issues/6518</p>
<p>You probably want to read the discussion there regarding constraints from URLs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2024-09-12 16:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pabarcgar">@pabarcgar</a> on 2024-09-13 09:22</div>
            <div class="timeline-body"><p>Hi @zanieb , thank you for the quick reply. The issue @robertschweizer mentions is for projects we build using 'uv pip install'.  In #6518 you say that 'constraint-dependencies' setting is applied to every single uv command and therefore passing a URL to it is not desirable.</p>
<p>Would it be possible to support 'constraint' and 'build-constraint' settings in the [tool.uv.pip] pyproject.toml section instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-13 13:06</div>
            <div class="timeline-body"><p>I'm pretty sure that <code>constraint-dependencies</code> in <code>[tool.uv]</code> is respected within the current workspace for <code>uv pip</code> commands. So if the <code>pyproject.toml</code> in the current directory has:</p>
<pre><code class="language-toml">[tool.uv]
constraint-dependencies = [&quot;anyio&gt;3&quot;]
</code></pre>
<p>Then <code>uv pip</code> commands in that directory will respect the <code>anyio&gt;3</code> constraint.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pabarcgar">@pabarcgar</a> on 2024-09-13 17:42</div>
            <div class="timeline-body"><p>Hi @charliermarsh , thank you for your reply, I think you are right, but what we need is to be able to pass an URL. In the related issue #6518 this is discussed, but URL support is dismissed because that config is used for every uv command and that URL would be accessed unnecessarily. That is reasonable, and that is why we ask to add 'constraint' settings in the [tool.uv.pip] (so the URL is only accessed for URL commands). Does it make sense?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-20 00:39</div>
            <div class="timeline-body"><p>Let's combine with #6518.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-20 00:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6518.html">astral-sh/uv#6518</a> on 2025-04-10 10:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
