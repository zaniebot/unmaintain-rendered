<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to test my project against multiple major library versions? - astral-sh/uv #13903</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to test my project against multiple major library versions?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13903">#13903</a>
        opened by <a href="https://github.com/dimaqq">@dimaqq</a>
        on 2025-06-08 21:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dimaqq">@dimaqq</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>My library is supposed to work against several major versions of a dependency/tool.</p>
<p>While I can declare that, I'm struggling to come up with a workflow to choose a specific dep/tool major version form the lock file at install time.</p>
<p>I'm using <code>uv + tox-uv + tox</code> with <code>dependency_groups</code> in tox.ini.</p>
<p>Here's roughly what I'd like to do:</p>
<pre><code class="language-toml">[dependency-groups]
...
j2 = [
    &quot;juju~=2.9&quot;,
]
j3 = [
    &quot;juju~=3.6&quot;,
]
</code></pre>
<p>And then either <code>dependency_group = j2</code> or possibly <code>uv sync --all-groups --constraint &quot;juju~=2.9&quot;</code></p>
<h3>Platform</h3>
<p>macos, linux</p>
<h3>Version</h3>
<p>uv 0.7.12 (Homebrew 2025-06-06)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @dimaqq on 2025-06-08 21:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-06-11 12:11</div>
            <div class="timeline-body"><p>Does <code>--resolution lowest-direct</code> work for this? By once using the regular resolution and once <code>--resolution lowest-direct</code>, you can test the oldest and newest supported versions.</p>
<p>If you want to use regular dependencies/dependency-groups, you need to define conflict groups so uv knows they are mutually exclusive.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-11 13:18</div>
            <div class="timeline-body"><p>https://docs.astral.sh/uv/concepts/projects/config/#conflicting-dependencies</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dimaqq">@dimaqq</a> on 2025-06-12 01:24</div>
            <div class="timeline-body"><p>Yes, I think I can work around this with conflicts, thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dimaqq">@dimaqq</a> on 2025-06-12 01:26</div>
            <div class="timeline-body"><p>P.S. resolution lowest is probably not the answer.</p>
<p>What I originally envisioned was smth like <code>juju ~= 2.9 OR juju ~= 3.6</code> where versions like 3.3 and 3.4 are explicitly not allowed. But then I'd probably want to test against both <em>latest</em> 2.x and latest 3.x; so &quot;lowest&quot; is not the answer.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tapetersen">@tapetersen</a> on 2025-06-13 10:38</div>
            <div class="timeline-body"><p>I also find myself wanting this and especially being able to lock the resolutions for the different &quot;profiles&quot; for reproducible ci-builds.
Using conflicting dependency-groups for some explicit cases works but I find myself wanting to do the same with <code>--resolution {lowest-direct,highest}</code> and have only been able to figure out how to do that with exporting to <code>requirements</code> or <code>pylock.toml</code> (I can open a separate issue for that if desired but I already see a couple that are touching on the subject of multiple lockfiles/resolutions indirectly)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dimaqq">@dimaqq</a> on 2025-09-22 06:56</div>
            <div class="timeline-body"><p>https://docs.astral.sh/uv/concepts/projects/config/#conflicting-dependencies is a workable solution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dimaqq on 2025-09-22 06:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:31:42 UTC
    </footer>
</body>
</html>
