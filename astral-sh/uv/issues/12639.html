<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Constraints files with spaces - astral-sh/uv #12639</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Constraints files with spaces</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/12639">#12639</a>
        opened by <a href="https://github.com/henryiii">@henryiii</a>
        on 2025-04-02 21:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/henryiii">@henryiii</a> on 2025-04-02 21:09</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><code>uv pip</code> doesn't support constraint files with spaces:</p>
<pre><code class="language-console">$ echo &quot;pytest~=7&quot; &gt; &quot;constraints file.txt&quot;
$ uv pip install pytest -c &quot;constraints file.txt&quot;
error: File not found: `constraints`
</code></pre>
<p>While pip does:</p>
<pre><code class="language-console">$ .venv/bin/pip install pytest -c &quot;constraints file.txt&quot;
ERROR: Invalid requirement: 'pytest~=7': Expected end or semicolon (after name and no valid version specifier)
    pytest~=7
          ^ (from line 1 of constraints file.txt)
</code></pre>
<p>(Ignore the fact I don't know how to write a constraint file, oops)</p>
<p>Note this is different than <code>PIP_CONSTRAINT</code>, which does not support spaces, and instead requires URIs since spaces are used to input multiple files.</p>
<p>I was trying to use uv in more places in cibuildwheel and ran into this, we test paths with spaces since they are common on Windows. https://github.com/pypa/cibuildwheel/pull/2322</p>
<h3>Platform</h3>
<p>All</p>
<h3>Version</h3>
<p>uv 0.6.10 (Homebrew 2025-03-26) (and others)</p>
<h3>Python version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @henryiii on 2025-04-02 21:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-02 21:13</div>
            <div class="timeline-body"><p>Yeah we use the same syntax here and in the constraints environment variable, I think. What seems like it might be right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2025-04-02 21:54</div>
            <div class="timeline-body"><p>You can do <code>-c</code> multiple times. Sadly, you can't do that with an environment variable, so that's why the spaces are required there (I don't like using spaces there, but pip couldn't change it due to backcompat). But it shouldn't be in the command line, spaces are supported there!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-03 12:57</div>
            <div class="timeline-body"><p>Clap doesn't have any way for us to differentiate in the parsing here. We'd need something like https://github.com/clap-rs/clap/discussions/3796.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pypa/cibuildwheel/pulls/2322.html">pypa/cibuildwheel#2322</a> on 2025-04-03 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/15806.html">astral-sh/uv#15806</a> on 2025-09-12 10:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">external</span> added by @zanieb on 2025-11-09 03:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:03 UTC
    </footer>
</body>
</html>
