<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>types-protobuf pyi files are not put into venv - astral-sh/uv #16714</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>types-protobuf pyi files are not put into venv</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16714">#16714</a>
        opened by <a href="https://github.com/trajano">@trajano</a>
        on 2025-11-13 02:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/trajano">@trajano</a> on 2025-11-13 02:04</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I have types-protobuf as a transitive dependency and pyright works.  In VS Code it falls into the <code>typeshed-fallback</code> version.</p>
<p>However, in PyCharm, the pyright/typeshed-fallback doesn't work.</p>
<p>Checking out the .venv I don't see the pyi files in <code>site-packages/google/protobuf</code> folder.</p>
<p>I tried</p>
<pre><code>uv add --dev types-protobuf
uv add types-protobuf
</code></pre>
<p>But either way, the files do not appear and PyCharm notes it as a typing error.</p>
<h3>Platform</h3>
<p>windows</p>
<h3>Version</h3>
<p>uv 0.9.7 (0adb44480 2025-10-30)</p>
<h3>Python version</h3>
<p>Python 3.14.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @trajano on 2025-11-13 02:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trajano">@trajano</a> on 2025-11-13 02:07</div>
            <div class="timeline-body"><pre><code>pip install --force-reinstall  types-protobuf # not uv pip
</code></pre>
<p>Does add</p>
<pre><code>.venv/Lib/site-packages/google-stubs/protobuf/timestamp_pb2.pyi
</code></pre>
<p>With that PyCharm works as expected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-11-13 02:09</div>
            <div class="timeline-body"><p>I can't reproduce this:</p>
<pre><code>❯ uv add types-protobuf
Using CPython 3.14.0
Creating virtual environment at: .venv
Resolved 2 packages in 123ms
Prepared 1 package in 89ms
Installed 1 package in 1ms
 + types-protobuf==6.32.1.20251105

❯ ls .venv/lib/python3.14/site-packages/google-stubs/protobuf
__init__.pyi            empty_pb2.pyi           source_context_pb2.pyi
any_pb2.pyi             field_mask_pb2.pyi      struct_pb2.pyi
api_pb2.pyi             internal                symbol_database.pyi
compiler                json_format.pyi         text_format.pyi
descriptor_database.pyi message_factory.pyi     timestamp_pb2.pyi
descriptor_pb2.pyi      message.pyi             type_pb2.pyi
descriptor_pool.pyi     py.typed                util
descriptor.pyi          reflection.pyi          wrappers_pb2.pyi
duration_pb2.pyi        runtime_version.pyi
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trajano">@trajano</a> on 2025-11-13 02:16</div>
            <div class="timeline-body"><p>Weird seems to work after clearing everything.  I also updated to 0.9.9 just now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @trajano on 2025-11-13 02:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:14 UTC
    </footer>
</body>
</html>
