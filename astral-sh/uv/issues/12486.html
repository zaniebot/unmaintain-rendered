<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>error: failed to remove file on runtime with a read-only filesystem - astral-sh/uv #12486</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>error: failed to remove file on runtime with a read-only filesystem</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/12486">#12486</a>
        opened by <a href="https://github.com/spk">@spk</a>
        on 2025-03-26 14:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/spk">@spk</a> on 2025-03-26 14:15</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Using <a href="https://upsun.com/">upsun</a> trying to build a crewai template application with <code>uv sync --frozen --no-dev</code> this works fine on build but when we try to run the application with the dependencies install from build on runtime with a read-only filesystem I have the error:</p>
<pre><code>uv run --no-dev crewai flow kickoff
Running the Flow
error: failed to remove file `/app/.venv/lib/python3.12/site-packages/../../../bin/kickoff`: Read-only file system (os error 30)
An error occurred while running the flow: Command '['uv', 'run', 'kickoff']' returned non-zero exit status 2.
</code></pre>
<p>Using logging doesn't help</p>
<pre><code>RUST_LOG=trace ./.venv/bin/crewai flow kickoff
[...]
TRACE Comparing installed with source: Registry(InstalledRegistryDist { name: PackageName(&quot;hyperframe&quot;), version: &quot;6.1.0&quot;, path: &quot;/app/.venv/lib/python3.12/site-packages/hyperframe-6.1.0.dist-info&quot;, cache_info: None }) Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;6.1.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: Url { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }) }), conflict: None }
DEBUG Requirement already installed: hyperframe==6.1.0
error: failed to remove file `/app/.venv/lib/python3.12/site-packages/../../../bin/kickoff`: Read-only file system (os error 30)
An error occurred while running the flow: Command '['uv', 'run', 'kickoff']' returned non-zero exit status 2.
</code></pre>
<p>Also just doing a python --version fails:</p>
<pre><code>web@app.0:~$ uv run python --version
error: failed to remove file `/app/.venv/lib/python3.12/site-packages/../../../bin/kickoff`: Read-only file system (os error 30)
</code></pre>
<p>Any idea why uv tries to remove this file?</p>
<h3>Platform</h3>
<p>Upsun - Linux 6.6.30-0psh1 x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.6.10</p>
<h3>Python version</h3>
<p>3.12.9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @spk on 2025-03-26 14:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-01 18:54</div>
            <div class="timeline-body"><p>It looks like they're invoking uv inside crewai?</p>
<blockquote>
<p>An error occurred while running the flow: Command '['uv', 'run', 'kickoff']'</p>
</blockquote>
<p>I'm not sure what's going on there. You might need to open an issue upstream.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-04-01 18:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-04-01 18:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">external</span> added by @zanieb on 2025-04-01 18:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/spk">@spk</a> on 2025-04-18 12:15</div>
            <div class="timeline-body"><p>Yep you're right seem related with crewai sorry for the noise</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @spk on 2025-04-18 12:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:03 UTC
    </footer>
</body>
</html>
