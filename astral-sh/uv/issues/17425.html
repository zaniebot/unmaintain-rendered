<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Too strict PEP508 validation for URLs without file extension - astral-sh/uv #17425</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Too strict PEP508 validation for URLs without file extension</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/17425">#17425</a>
        opened by <a href="https://github.com/ppalucha">@ppalucha</a>
        on 2026-01-12 20:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ppalucha">@ppalucha</a></div>
            <div class="timeline-body">Summary
<p>Hi, package pyro-api contains following URL in test dependencies (extra_requires):</p>
<pre><code>pyro-ppl@https://api.github.com/repos/pyro-ppl/pyro/tarball/dev
</code></pre>
<p>See https://github.com/pyro-ppl/pyro-api/blob/0.1.2/setup.py</p>
<p>I know the comment in setup.py says to remove these lines before uploading to PyPI, however I don&#x27;t think this comment is correct. The above URL is fine, can be downloaded (creates a tar.gz file) and satisfies the PEP508 grammar (I checked it using code like at <a href="https://github.com/astral-sh/uv/issues/8326">astral-sh/uv#8326</a>#issuecomment-2423123210_)</p>
<p>Note: I don&#x27;t want to discuss if it makes sense to provide a non-pinned, no-hash, mutable URL as a requirement.</p>
<p>After building a wheel pyro-abi 0.1.2 directly from the source code (without commenting out the test extras), I can install the resulting wheel using &#x27;pip&#x27;.</p>
<p>However, installation with uv fails:</p>
<pre><code>× Failed to read `pyro-api @ file:///tmp/pyro_api-0.1.2-py3-none-any.whl`
├─▶ Couldn&#x27;t parse metadata of pyro_api-0.1.2-py3-none-any.whl from pyro-api @ file:///work/lbuild-out/pyro_api-0.1.2-py3-none-any.whl
 ╰─▶ Expected direct URL (`https://api.github.com/repos/pyro-ppl/pyro/tarball/dev`) to end in a supported file extension: `.whl`, `.tar.gz`, `.zip`, `.tar.bz2`,
 `.tar.lz`, `.tar.lzma`, `.tar.xz`, `.tar.zst`, `.tar`, `.tbz`, `.tgz`, `.tlz`, or `.txz`
 pyro-ppl@ https://api.github.com/repos/pyro-ppl/pyro/tarball/dev ; extra == &quot;test&quot;
</code></pre>
<p>I believe the requirement of the file extension is too strict and not justified by PEP508 (or PEP 440).
My expectation is that <code>pyro-ppl@https://api.github.com/repos/pyro-ppl/pyro/tarball/dev</code> should be accepted as a proper requirement URL.</p>
Platform
<p>Linux 6.10.14-linuxkit aarch64 GNU/Linux</p>
Version
<p>uv 0.9.22 (82a6a66b8 2026-01-06)</p>
Python version
<p>3.13.8</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/ppalucha">@ppalucha</a> on 2026-01-12 20:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ppalucha">@ppalucha</a> on 2026-01-12 22:38</div>
            <div class="timeline-body"><p>I proposed a PR that fixes it, assuming we agree this is the right direction: <a href="https://github.com/astral-sh/uv/pull/17426">astral-sh/uv#17426</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/konstin">@konstin</a> on 2026-01-13 07:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/konstin">@konstin</a> on 2026-01-13 07:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2026-01-16 15:55</div>
            <div class="timeline-body"><p>Can you use a regular git dependency for this?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:31 UTC
    </footer>
</body>
</html>
