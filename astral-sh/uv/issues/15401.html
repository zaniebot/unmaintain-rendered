<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UV binary not working on Raspberry Pi 5 when installed from Snap or Homebrew Linux - astral-sh/uv #15401</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UV binary not working on Raspberry Pi 5 when installed from Snap or Homebrew Linux</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/15401">#15401</a>
        opened by <a href="https://github.com/jace">@jace</a>
        on 2025-08-21 07:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jace">@jace</a> on 2025-08-21 07:11</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Following up from #10942, I've found two more UV binary releases broken on a Raspberry Pi 5, from Snap (v0.8.10) and Homebrew Linux (v0.8.12). Same jemalloc error. The curl install script <em>does work</em> and is what I'm using for now.</p>
<p>Note: Despite Homebrew's warning about arm64 not being supported with bottles, it poured uv from a bottle.</p>
<p><img width="981" height="380" alt="Homebrew arm64 warning" src="https://github.com/user-attachments/assets/db20354e-62c6-4f47-9d88-ba582d8d9c6b" />
<img width="980" height="984" alt="Homebrew uv jemalloc error" src="https://github.com/user-attachments/assets/569b7cb3-d827-4e1e-bd45-353bf0ab80ec" /></p>
<p>Snap:</p>
<p><img width="961" height="227" alt="Snap uv jemalloc error" src="https://github.com/user-attachments/assets/f4a2b64b-1020-4ec8-a8ec-bfcb782ea31f" /></p>
<h3>Platform</h3>
<p>Debian 12 on Raspberry Pi 5 arm64 (Linux 6.12.34+rpt-rpi-2712 aarch64 GNU/Linux)</p>
<h3>Version</h3>
<p>0.8.10 and 0.8.12</p>
<h3>Python version</h3>
<p>3.11.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @jace on 2025-08-21 07:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-21 10:57</div>
            <div class="timeline-body"><p>It sounds like they're not packaging uv correctly for that platform.</p>
<p>See https://github.com/astral-sh/uv/issues/4647#issuecomment-2200020378 and https://github.com/gnzlbg/jemallocator/issues/170#issuecomment-1503228963</p>
<p>https://github.com/astral-sh/uv/blob/9c9efc89578bc9fd96502a0d084a77aa718b2355/.github/workflows/build-binaries.yml#L417-L419</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">external</span> added by @zanieb on 2025-08-21 10:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../lengau/uv-snap/issues/10.html">lengau/uv-snap#10</a> on 2025-08-21 11:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-08-21 11:51</div>
            <div class="timeline-body"><p>Note that we don't control the uv snap, that's why we only recommend the installation methods at https://docs.astral.sh/uv/getting-started/installation/.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-08-21 13:41</div>
            <div class="timeline-body"><blockquote>
<p>Note: Despite Homebrew's warning about arm64 not being supported with bottles, it poured uv from a bottle.</p>
</blockquote>
<p>FWIW, this is probably because you either have Homebrew's developer mode enabled or you've explicitly set <code>HOMEBREW_ARM64_TESTING</code>: Homebrew <em>does</em> have ARM64 Linux support, but it's currently in beta per https://github.com/Homebrew/brew/issues/19208.</p>
<p>The relevant check is here:</p>
<p>https://github.com/Homebrew/brew/blob/e910f91124dc0bb84368e183288629a2b83a817d/Library/Homebrew/extend/os/linux/diagnostic.rb#L82-L93</p>
<p>That being said, you're right about this being a bad build ðŸ™‚ -- @zanieb's pointer makes sense to me as a fix, so I'll look at getting that upstreamed into Homebrew's bottle build.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../Homebrew/homebrew-core/pulls/234353.html">Homebrew/homebrew-core#234353</a> on 2025-08-21 14:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-08-21 14:03</div>
            <div class="timeline-body"><p>I've opened https://github.com/Homebrew/homebrew-core/pull/234353 on homebrew-core with the prospective fix.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jace">@jace</a> on 2025-08-21 15:40</div>
            <div class="timeline-body"><p>Thanks for the quick response! This is my first day using Homebrew Linux â€“ I may have accidentally turned on developer mode.</p>
<p>I had the same error with difftastic but building that from source fixed it (reported https://github.com/Wilfred/difftastic/issues/872). Thought I'd try building uv too, but after three freezes I've learnt 8 GB RAM + default 200 MB swap isn't enough. ðŸ˜…</p>
<p>I'm setting up cross-platform dotfiles and learning there's no good abstraction for package managers. It's already sprawling with macOS/brew, Termux/pkg, Ubuntu/apt+snap, RPiOS/apt+<del>snap</del>+brew+curl|sh. I have one more to go with Armbian for Rockchip64 SBCs.</p>
<p>The dream: <code>(brew|pkg|sudo apt) install [package list]</code> and no special cases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-08-21 15:57</div>
            <div class="timeline-body"><p>No problem! It looks like the brew rebuild has gone through; could you do a <code>brew update &amp;&amp; brew reinstall uv</code> and see if it works for you now?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jace">@jace</a> on 2025-08-21 16:41</div>
            <div class="timeline-body"><p>Yes! It works! Would it be too much to ask for the same fix for difftastic and fd? Those are the other two with the same jemalloc error on my Pi.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-08-21 16:45</div>
            <div class="timeline-body"><blockquote>
<p>Yes! It works! Would it be too much to ask for the same fix for difftastic and fd? Those are the other two with the same jemalloc error on my Pi.</p>
</blockquote>
<p>Glad to hear it!</p>
<p>Neither of those is an Astral project, JFYI. But I'll be able to look at those later today potentially. In the mean time, if you file an issue for those on homebrew-core's issue tracker, another maintainer might be able to get to them first.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @woodruffw on 2025-08-21 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pkgxdev/pantry/issues/10413.html">pkgxdev/pantry#10413</a> on 2025-09-05 14:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:05 UTC
    </footer>
</body>
</html>
