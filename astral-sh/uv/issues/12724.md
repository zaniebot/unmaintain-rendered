```yaml
number: 12724
title: Google colab issue
type: issue
state: closed
author: AznamirWoW
labels:
  - bug
  - external
assignees: []
created_at: 2025-04-07T18:06:30Z
updated_at: 2025-04-29T06:38:08Z
url: https://github.com/astral-sh/uv/issues/12724
synced_at: 2026-01-10T01:57:29Z
```

# Google colab issue

---

_Issue opened by @AznamirWoW on 2025-04-07 18:06_

### Summary

Something broke uv install today on Google Colab

``# @title Install
!sudo apt update
!sudo apt install python3.10
!sudo update-alternatives --install /usr/bin/python3 python3 /usr/bin/python3.10 1
!sudo update-alternatives --set python3 /usr/bin/python3.10
!curl -sS https://bootstrap.pypa.io/get-pip.py | python3
import sys
sys.path.append('/usr/local/lib/python3.10/dist-packages')
!pip install uv
from IPython.display import clear_output
print("Installing requirements...")
!uv pip install -r requirements.txt -q``

After running this cell instead of installing the requirements it errors out with

Installing requirements...
error: File not found: `/backend-container/containers/requirements.constraints`

### Platform

Linux 6.1.85+ x86_64 GNU/Linux  (Google Colab)

### Version

0.6.12

### Python version

3.10

---

_Label `bug` added by @AznamirWoW on 2025-04-07 18:06_

---

_Comment by @charliermarsh on 2025-04-07 19:13_

Is that some sort of environment variable set within Google Colab?

---

_Comment by @AznamirWoW on 2025-04-07 19:57_

> Is that some sort of environment variable set within Google Colab?

it is a file uv tries to access, I could get past it by creating empty files

!mkdir /backend-container
!mkdir /backend-container/containers
!touch /backend-container/containers/build.constraints
!touch /backend-container/containers/requirements.constraints

---

_Comment by @NourEldin-Osama on 2025-04-07 20:56_

> > Is that some sort of environment variable set within Google Colab?
> 
> it is a file uv tries to access, I could get past it by creating empty files
> 
> !mkdir /backend-container !mkdir /backend-container/containers !touch /backend-container/containers/build.constraints !touch /backend-container/containers/requirements.constraints

I can confirm that this workaround is working

---

_Referenced in [googlecolab/colabtools#5237](../../googlecolab/colabtools/issues/5237.md) on 2025-04-08 04:32_

---

_Comment by @updiversity on 2025-04-08 09:32_

I confirm as well

---

_Comment by @ivanbelenky on 2025-04-08 16:23_

Confirmed as well, workaround it works. I wonder if this is related to them upgrading from 3.10 --> 3.11

---

_Label `external` added by @konstin on 2025-04-08 17:26_

---

_Comment by @konstin on 2025-04-08 17:29_

Google Colab is setting some uv-related environment variables, that seem to have broken with the a Colab update. The Colab team is tracking this internally (https://github.com/googlecolab/colabtools/issues/5237#issuecomment-2786440777).

As workaround, you can prefix commands with `UV_CONSTRAINT= UV_BUILD_CONSTRAINT= `,

```
!UV_CONSTRAINT= UV_BUILD_CONSTRAINT= uv pip install datasets
```

---

_Comment by @NourEldin-Osama on 2025-04-08 19:39_

Thanks for the fast and helpful reply, @konstin !

I tested your workaround, and it works â€” but I have to add ```!UV_CONSTRAINT= UV_BUILD_CONSTRAINT=``` to every ```uv pip install``` command.

See the image below:

![Image](https://github.com/user-attachments/assets/a17216f0-199d-4ec0-be39-5a321a892a9f)

To apply your workaround globally for all commands, I did this:

```python
import os

os.environ["UV_CONSTRAINT"] = os.environ["UV_BUILD_CONSTRAINT"] = ""
```
This makes every ```uv pip install``` command work without needing to add the variables manually.

---

_Assigned to @konstin by @Gankra on 2025-04-10 14:43_

---

_Comment by @AznamirWoW on 2025-04-10 19:11_

the file creation workaround does not work any more, now requires this

``!UV_CONSTRAINT= UV_BUILD_CONSTRAINT= UV_PRERELEASE=if-necessary-or-explicit uv pip install -r requirements.txt -q``

---

_Comment by @AznamirWoW on 2025-04-16 05:24_

current workaround is to add `--prerelease if-necessary-or-explicit` to `uv pip install`

---

_Comment by @parthsdoshi on 2025-04-29 04:13_

I believe this issue can be closed given the latest comment:
https://github.com/googlecolab/colabtools/issues/5237#issuecomment-2822818163 

---

_Closed by @konstin on 2025-04-29 06:38_

---
