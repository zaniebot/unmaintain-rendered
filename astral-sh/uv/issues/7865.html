<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bundle Python Interpreter in virtual environments - astral-sh/uv #7865</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Bundle Python Interpreter in virtual environments</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/7865">#7865</a>
        opened by <a href="https://github.com/Turakar">@Turakar</a>
        on 2024-10-02 09:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Turakar">@Turakar</a></div>
            <div class="timeline-body"><p>For system wide installations of applications build with <code>uv</code>, it would be nice to have an option to build an execution environment which is self contained and does not rely on the user&#x27;s local files (<code>~/.local/share/uv</code>). My usecase for this would be an application that I want to install to a server for system-wide usage. At the moment, you can achieve this with the following commands (with some path adjustments):</p>
<pre><code>uv venv --no-cache
uv pip install --no-cache -r requirements.lock
cp -r ~/.local/share/uv/python/cpython-3.12.5-linux-x86_64-gnu python
rm .venv/bin/python
ln -s python/bin/python3.12 .venv/bin/python

# To run the program
.venv/bin/python &lt;your script.py&gt;
</code></pre>
<p>I.e., you can replace the symlinked python interpreter by a bundled copy.</p>
<p>I am not entirely sure how this should be implemented. In a first simple step, one could add a <code>--bundle-python</code> flag to <code>uv venv</code> which copies the downloaded Python interpreter to, e.g., <code>.venv/python</code> and uses it instead of a path in <code>~/.local/share/uv</code>.</p>
<p>However, you can take this idea further, up to a <code>uv install</code> command which would do something similar to <code>make install</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Turakar">@Turakar</a> on 2024-10-02 11:28</div>
            <div class="timeline-body"><p>Ok, you can kinda do this already by passing <code>UV_PYTHON_INSTALL_DIR</code> <a href="https://docs.astral.sh/uv/configuration/environment/">(docs)</a> to <code>uv venv</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Turakar">@Turakar</a> on 2024-10-02 11:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-02 14:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Bundle Python Interpreter&quot; to &quot;Bundle Python Interpreter in virtual environments&quot; by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-02 14:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-02 14:45</div>
            <div class="timeline-body"><p>I think we want to add this feature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-02 14:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-02 14:45</div>
            <div class="timeline-body"><p>Related</p>
<ul>
<li>https://github.com/astral-sh/uv/issues/6970</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danielgafni">@danielgafni</a> on 2024-10-02 15:40</div>
            <div class="timeline-body"><p>Ohh til <code>UV_PYTHON_INSTALL_DIR</code> exists.</p>
<p>I was looking for this parameter in CLI <code>--help</code> and it&#x27;s not mentioned there.</p>
<p>Perhaps</p>
<ol>
<li>The env var should be mentioned in <code>uv python *</code> docs</li>
<li><code>uv python install *</code> commands should take an <code>--install-dir</code> argument?</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-02 16:03</div>
            <div class="timeline-body"><p>Yes we should mention it in the help documentation. I&#x27;d also be down to accept a target directory in the CLI.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danielgafni">@danielgafni</a> on 2024-10-04 08:32</div>
            <div class="timeline-body"><p>Ok, I started working on this in #7920. Does <code>--install-dir</code> name work?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexwilson1">@alexwilson1</a> on 2025-01-29 19:47</div>
            <div class="timeline-body"><p>Bundling Python into .venv using UV_PYTHON_INSTALL_DIR does not work because when .venv is not empty (contains Python) the installation gives this error:</p>
<p><code>error: Project virtual environment directory cannot be used because it is not a compatible environment but cannot be recreated because it is not a virtual environment</code></p>
<p>--bundle-python would be ideal</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ginkgo97">@ginkgo97</a> on 2025-02-04 05:48</div>
            <div class="timeline-body"><p>Will the option <code>--install-dir</code> or the env <code>UV_PYTHON_INSTALL_DIR</code> be able to be configured in <code>uv.toml</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kevinmarks-b">@kevinmarks-b</a> on 2025-04-09 16:24</div>
            <div class="timeline-body"><p>I&#x27;m trying to do this to get the Python binary into an RPM for deployment on AWS.
However, it seems impossible to get uv to see the python installed in a nearby directory with <code>UV_PYTHON_INSTALL_DIR</code> - even if I do as the OP did and symlink it to the install, it destroys that version and reinstalls when I use <code>uv run</code> to the ~/.local/share/uv/python/ one instead.
Now I&#x27;m trying to do this in a make file, so <code>UV_PYTHON_INSTALL_DIR</code> may not persist into the runtime. Is there a way to make uv find it?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:34:26 UTC
    </footer>
</body>
</html>
