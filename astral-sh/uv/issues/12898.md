```yaml
number: 12898
title: "â“ Question: Installation Failure on Feature Branch â€” Is it Me or the Package?"
type: issue
state: open
author: brupelo
labels:
  - question
assignees: []
created_at: 2025-04-15T14:50:28Z
updated_at: 2025-04-22T10:34:25Z
url: https://github.com/astral-sh/uv/issues/12898
synced_at: 2026-01-10T01:57:29Z
```

# â“ Question: Installation Failure on Feature Branch â€” Is it Me or the Package?

---

_Issue opened by @brupelo on 2025-04-15 14:50_

### Question

Hi folks,

Today I ran into a strange build failure while trying to install a feature branch of [uvicorn](https://github.com/EliseevEgor/uvicorn/tree/terminate_windows_process) locally using `uv`.

Iâ€™ve had a few package install issues recently that seemed to trace back to [packaging](https://pypi.org/project/packaging/#history) version mismatches, and in those cases, pinning an older version solved it. But this one seems more involved.

Hereâ€™s what I did:

```bash
> rm -rf .venv
> uv venv --python=3.11.11
> .venv\Scripts\activate
> uv pip install -e . --refresh
```

But I got this error:

```
Ã— Failed to build `uvicorn @ file:///D:/sources/github/uvicorn/uvicorn`
â”œâ”€â–¶ The build backend returned an error
â•°â”€â–¶ Call to `hatchling.build.prepare_metadata_for_build_editable` failed (exit code: 1)

TypeError: _Version.__new__() got an unexpected keyword argument 'epoch'
```

From the stack trace, it seems like the issue is inside `packaging.version`, likely triggered by Hatchling trying to parse the version string.

---

### ðŸ¤” My environment

- Using `uv` for clean env setup (so theoretically no leftovers)
- Python 3.11.11
- Installed from a fresh clone of the [PR](https://github.com/encode/uvicorn/pull/2532) branch
- `uv pip install -e . --refresh` to ensure clean metadata/build
- Iâ€™ve also tried uninstalling and reinstalling Python itself

---

### ðŸ’¡ Questions

1. Could this be a caching issue with `uv` or the build backend (Hatchling)?
2. Is this a known issue with the current `packaging` version? If so, is there a recommended workaround?
3. Whatâ€™s the best strategy to confirm this is *not* a problem with the PR or `uvicorn`, but with the packaging/build stack?

Thanks in advance for any guidance â€” and happy to provide more debug info if needed.

### Platform

Windows 10

### Version

uv 0.5.21 (c306e46e1 2025-01-18)

---

_Label `question` added by @brupelo on 2025-04-15 14:50_

---

_Referenced in [Kludex/uvicorn#1972](../../Kludex/uvicorn/issues/1972.md) on 2025-04-15 14:58_

---

_Comment by @konstin on 2025-04-22 10:34_

This is indeed a problem with the build backend (hatchling) and not uv, I would ask the hatchling developers about it, maybe they know something.

If you want to test different packaging versions, you can install specific versions of hatchling and packaging and then build with build isolation disabled.

---
