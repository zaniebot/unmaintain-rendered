<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support `pip freeze --exclude-editable` - astral-sh/uv #2738</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support `pip freeze --exclude-editable`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/2738">#2738</a>
        opened by <a href="https://github.com/charlesnicholson">@charlesnicholson</a>
        on 2024-03-30 17:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charlesnicholson">@charlesnicholson</a> on 2024-03-30 17:34</div>
            <div class="timeline-body"><p><code>pip freeze --exclude-editable</code> emits a requirements file that contains all packages installed in the venv, without the editable installs. This can be handy when shipping a bunch of wheels as a deployment, where the editable-installed source packages in the venv get wheeled and shipped with the frozen requirements file. That way you can ship the first-party wheels with a frozen manifest of all third-party wheels at the time the first-party wheels were created, and the venv can be deterministically recreated.</p>
<p><code>uv</code> on main doesn't support this at time of writing; could it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hmc-cs-mdrissi">@hmc-cs-mdrissi</a> on 2024-03-31 00:02</div>
            <div class="timeline-body"><p>This sounds very similar to <a href="https://github.com/astral-sh/uv/issues/1415">unsafe-package</a> flag and maybe adding a similar flag for pip freeze would resolve this usage. One common use case for --unsafe-package is to remove editable packages by name (or any other package needed outside of frozen file).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charlesnicholson">@charlesnicholson</a> on 2024-03-31 00:23</div>
            <div class="timeline-body"><p>The value of <code>--exclude-editable</code> is that you don't have to name your packages. In our case it's much more work to collect the names of all of our python packages spread through our repo and submodules so that we can pass them as arguments to <code>--exclude-editable</code>. I'd much rather just call <code>VIRTUAL_ENV=my_venv uv pip freeze --exclude-editable</code>.</p>
<p>Also, the semantics feel different- we're not excluding our editable installations because they're &quot;unsafe&quot;, we're excluding them so that we can get a perfect list of pinned versions of third-party packages that our packages depend on.</p>
<p>So, having <code>--unsafe-package</code> does also sound useful but it also feels like a different use case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hmc-cs-mdrissi">@hmc-cs-mdrissi</a> on 2024-03-31 01:15</div>
            <div class="timeline-body"><p>Unsafe is just historical naming. The name history has to do with originally only fixed set of packages were excluded and users could not avoid emitting others. The code evolved from that but intent of excluding them is unrelated to “safety”. The flag’s actual purpose is solely way for user to specify exclusions. I can say this with confidence as I was one who implemented the original pip-compile flag. Uv also calls it separate name that doesn’t mention unsafe.</p>
<p>Yes it does require you to name all of your editables once. My own use case for that flag was solely to remove editables but instead of designing flag for very specific thing it was easier to make a broader flag that had that power.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2740.html">astral-sh/uv#2740</a> on 2024-03-31 08:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @charliermarsh on 2024-03-31 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-31 17:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:57 UTC
    </footer>
</body>
</html>
