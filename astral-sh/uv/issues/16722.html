<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv prefers managed free-threaded Python over unmanaged non-freethreaded Python - astral-sh/uv #16722</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv prefers managed free-threaded Python over unmanaged non-freethreaded Python</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16722">#16722</a>
        opened by <a href="https://github.com/lengau">@lengau</a>
        on 2025-11-13 14:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/lengau">@lengau</a> on 2025-11-13 14:30</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I have a non-freethreaded copy of Python 3.14 installed from my distro and free-threaded Python 3.14 installed managed with uv:</p>
<pre><code>lengau@ratel:~$ uv python list
cpython-3.15.0a1-linux-x86_64-gnu                 &lt;download available&gt;
cpython-3.15.0a1+freethreaded-linux-x86_64-gnu    &lt;download available&gt;
cpython-3.14.0-linux-x86_64-gnu                   /usr/bin/python3.14
cpython-3.14.0-linux-x86_64-gnu                   &lt;download available&gt;
cpython-3.14.0+freethreaded-linux-x86_64-gnu      .local/bin/python3.14t -&gt; .local/share/uv/python/cpython-3.14.0+freethreaded-linux-x86_64-gnu/bin/python3.14t
cpython-3.14.0+freethreaded-linux-x86_64-gnu      .local/share/uv/python/cpython-3.14.0+freethreaded-linux-x86_64-gnu/bin/python3.14t
cpython-3.13.9-linux-x86_64-gnu                   /usr/bin/python3.13
cpython-3.13.9-linux-x86_64-gnu                   /usr/bin/python3 -&gt; python3.13
cpython-3.13.9-linux-x86_64-gnu                   /usr/bin/python -&gt; python3
cpython-3.13.9-linux-x86_64-gnu                   &lt;download available&gt;
cpython-3.13.9+freethreaded-linux-x86_64-gnu      &lt;download available&gt;
...
</code></pre>
<p>When I run <code>uv sync --python=3.14</code>, it prefers the freethreaded Python that's uv-managed over the distro-managed Python 3.14. However, since I don't have freethreaded Python 3.13 downloaded, it correctly uses the distro copy of that.</p>
<p>So if I delete the virtual environment in a repo, I get:</p>
<pre><code>$ uv sync --python=3.13  # uses /usr/bin/python3.13
$ uv sync --python=3.14  # uses managed python3.14t
$ uv sync --python=3.14t # uses managed python3.14t
</code></pre>
<p>This also results in a weird situation when I install the non-freethreaded version of Python 3.14 managed:</p>
<pre><code>$ uv sync --python=3.13  # uses /usr/bin/python3.13
$ uv sync --python=3.14  # uses managed python3.14
$ uv sync --python=3.14t # uses managed python3.14t
$ uv sync --python=3.14  # **remains** on managed python3.14t
</code></pre>
<p>The behaviour I would expect here is that swapping from python 3.14t to 3.14 would switch to the non-freethreaded version (or that we have a way to specify the non-freethreaded version even with both being managed).</p>
<h2>Workaround</h2>
<p>The workaround here is pretty easy, though somewhat inconvenient: specify the specific Python binary by getting the value from <code>uv python list</code>. E.g. <code>uv sync --python=/usr/bin/python3.14</code></p>
<h3>Platform</h3>
<p>Kubuntu 26.04 amd64</p>
<h3>Version</h3>
<p>uv 0.9.9 (4fac4cb7e 2025-11-12)  # (Installed from the snap)</p>
<h3>Python version</h3>
<p>n/a</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @lengau on 2025-11-13 14:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2025-11-15 02:37</div>
            <div class="timeline-body"><p>Actually, this is the expected behavior, not a bug.</p>
<h4>The relevant information is as follows:</h4>
<p>Changelog for Version 0.9.0</p>
<blockquote>
<p>Previously, free-threaded variants of Python were considered experimental and required explicit opt-in (i.e., with 3.14t) for usage. Now uv will allow use of free-threaded Python 3.14+ interpreters without explicit selection. The GIL-enabled build of Python will still be preferred, e.g., when performing an installation with uv python install 3.14. However, e.g., if a free-threaded interpreter comes before a GIL-enabled build on the PATH, it will be used. This change does not apply to free-threaded Python 3.13 interpreters, which will continue to require opt-in.</p>
</blockquote>
<ul>
<li>https://github.com/astral-sh/uv/pull/16142</li>
</ul>
<p>Changelog for Version 0.9.8</p>
<ul>
<li>https://github.com/astral-sh/uv/pull/16537</li>
</ul>
<p>Therefore, you should submit a feature request to allow UV to change the default selection behavior.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-15 13:37</div>
            <div class="timeline-body"><p>Yeah @FishAlchemist is right that this is intended, though I'm sort of regretting the change.</p>
<p>Does using <code>+gil</code> work for you?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:14 UTC
    </footer>
</body>
</html>
