```yaml
number: 13861
title: Support for project tool/plugin dependencies in pyproject.toml
type: issue
state: open
author: rabader
labels:
  - enhancement
assignees: []
created_at: 2025-06-05T14:54:20Z
updated_at: 2025-06-06T16:56:47Z
url: https://github.com/astral-sh/uv/issues/13861
synced_at: 2026-01-10T01:57:31Z
```

# Support for project tool/plugin dependencies in pyproject.toml

---

_Issue opened by @rabader on 2025-06-05 14:54_

### Summary

I have a project that has dependencies from a private google artifact registry repo. When a new user clones the repo and runs "uv sync" to create a venv, it will fail (without much information for why it failed), unless they first pre-install keyring and the Artifact registry plugin with:


```
# Pre-install keyring and Artifact Registry plugin from the public PyPI
uv tool install keyring --with keyrings.google-artifactregistry-auth

# Enable keyring authentication
export UV_KEYRING_PROVIDER=subprocess

# Set the username for the index
export UV_INDEX_PRIVATE_REGISTRY_USERNAME=oauth2accesstoken
```

I already have a section in my pyproject.toml file which includes:
```
[tool.uv]
keyring-provider = "subprocess"
```

In poetry, they include this functionality:
```
[tool.poetry.requires-plugins]
keyring = "^23.9.0"
"keyrings.google-artifactregistry-auth" = "^1.1.0"
```
- with the above included in your pyproject.toml in poetry, running the "sync" command first ensures that your poetry installation has the necessary plugins included, and if not, installs them FIRST, before attempting to sync, which would take care of this problem. This request is to add that functionality into uv as well.

### Example

Add support for a new section in uv pyproject.toml file that's something like this:
```
[uv.tool]
required-plugins = [
    keyring = "^23.9.0",
    "keyrings.google-artifactregistry-auth" = "^1.1.0"
]
```
And the uv sync command should first check your uv install to determine if the required plugins are installed before attempting to sync, and if not, should install the required plugins, before proceeding to sync/create the venv.

---

_Label `enhancement` added by @rabader on 2025-06-05 14:54_

---

_Renamed from "Support for project tool dependencies in pyproject.toml" to "Support for project tool/plugin dependencies in pyproject.toml" by @rabader on 2025-06-05 14:54_

---

_Comment by @zanieb on 2025-06-05 14:56_

Thanks for sharing your use-cases! 

Related

- #3560 

We've also discussed a static definition of keyring environments specifically.

---

_Comment by @rabader on 2025-06-05 15:02_

Thanks for taking a look! For now, I'm working around this with instructions in a README file, but it would be great if we could ensure that the same tool versions are being used on all of our devs' systems.

And just to add a bit more clarity, the order seems to matter here. I can't just add the keyrings packages as dependencies (uv sync fails). The tools need to be installed before syncing.

---
