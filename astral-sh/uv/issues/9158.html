<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>auto completion didn't work with zsh and oh my zsh - astral-sh/uv #9158</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>auto completion didn't work with zsh and oh my zsh</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9158">#9158</a>
        opened by <a href="https://github.com/amirreza8002">@amirreza8002</a>
        on 2024-11-16 01:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/amirreza8002">@amirreza8002</a> on 2024-11-16 01:17</div>
            <div class="timeline-body"><p>running
<code>echo 'eval &quot;$(uv generate-shell-completion zsh)&quot;' &gt;&gt; ~/.zshrc</code>
did not start auto-completion
this was done weeks ago and never once worked</p>
<p>what i have done now, is</p>
<pre><code>cd $ZSH_CUSTOM/plugins
touch uv.plugin.zsh
uv generate-shell-completion zsh &gt;&gt; uv.plugin.zsh
</code></pre>
<p>and then adding <code>uv</code> to <code>plugin</code> section of <code>.zshrc</code></p>
<p>but i think something like <a href="https://python-poetry.org/docs/#oh-my-zsh">poetry</a>'s way should be implemented</p>
<p>let me know what you think</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/toyourheart163">@toyourheart163</a> on 2024-11-16 04:49</div>
            <div class="timeline-body"><p>update ohmyzsh or make a uv folder</p>
<p>step 1</p>
<pre><code class="language-bash">cd $ZSH_CUSTOM/plugins
mkdir uv &amp;&amp; cd uv  # add this line
uv generate-shell-completion zsh &gt; uv.plugin.zsh
</code></pre>
<p>step 2</p>
<pre><code class="language-bash">exec zsh
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amirreza8002">@amirreza8002</a> on 2024-11-16 05:45</div>
            <div class="timeline-body"><blockquote>
<p>mkdir uv &amp;&amp; cd uv  # add this line</p>
</blockquote>
<p>well actualy it's not necessery
i'm not even sure if it should be there, haven't tested, i went with the way that omz maintainer had written</p>
<p>also you need to add <code>uv</code> to <code>.zshrc</code>'s <code>plugin</code> section</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/toyourheart163">@toyourheart163</a> on 2024-11-16 12:43</div>
            <div class="timeline-body"><p>you are right. don't need to <code>mkdir uv</code></p>
<p>but <code>echo 'eval &quot;$(uv generate-shell-completion zsh)&quot;' &gt;&gt; ~/.zshrc</code> work for me.</p>
<h3>Maybe you should show <code>your ~/.zshrc</code> or upgrade <code>zsh</code></h3>
<p>If you update your ohmyzsh. there's a plugin uv in <code>~/.oh-my-zsh/plugins/uv</code> you can test by</p>
<pre><code class="language-bash">cd ~/.oh-my-zsh/plugins
mv uv{,.bak}
</code></pre>
<p>then</p>
<pre><code class="language-bash">echo 'eval &quot;$(uv generate-shell-completion zsh)&quot;' &gt;&gt; ~/.zshrc
exec zsh
</code></pre>
<h3>my zsh version</h3>
<pre><code class="language-bash">zsh --version
# zsh 5.9 (aarch64-unknown-linux-android) 
</code></pre>
<h3>my <code>~/.zshrc</code></h3>
<pre><code class="language-bash">export ZSH=&quot;$HOME/.oh-my-zsh&quot;
ZSH_THEME=&quot;ys&quot;
source $ZSH/oh-my-zsh.sh
eval &quot;$(uv generate-shell-completion zsh)&quot;
</code></pre>
<p>if you update ohmyzsh. you can add uv to plugins</p>
<pre><code class="language-bash"># ~/.zshrc
plugins=(git uv)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amirreza8002">@amirreza8002</a> on 2024-11-16 23:02</div>
            <div class="timeline-body"><p>zsh is installed via pacman and is at latest version
OMZ auto updates and is at latest version</p>
<p>running <code>echo 'eval &quot;$(uv generate-shell-completion zsh)&quot;' &gt;&gt; ~/.zshrc</code> did not work for me</p>
<p><code>uv generate-shell-completion zsh &gt;&gt; ~/.zshrc</code> did work, but it added too many lines to my file
so i did what i described</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-20 23:57</div>
            <div class="timeline-body"><p>To clarify, is the issue with stock zsh or only with zsh + omz enabled? It sounds like it's omz related only, but I might be wrong.</p>
<p>Does stock zsh not work with the <a href="https://docs.astral.sh/uv/getting-started/installation/#shell-autocompletion">documented</a> steps?</p>
<p>Can you provide a reproducible configuration steps (e.g. zsh + omz install + plugins + uv command that doesn't auto-complete)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @samypr100 on 2024-11-20 23:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amirreza8002">@amirreza8002</a> on 2024-11-21 01:20</div>
            <div class="timeline-body"><pre><code>sudo pacman -S zsh
sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;
echo 'eval &quot;$(uv generate-shell-completion zsh)&quot;' &gt;&gt; ~/.zshrc
</code></pre>
<pre><code>plugins=(
    git
    poetry
    asdf
    zsh-autosuggestions
  )
</code></pre>
<p>nothing i used worked with auto-complation</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-21 02:21</div>
            <div class="timeline-body"><p>@amirreza8002 Thanks.</p>
<p>Using <code>uv 0.5.4</code> and <code>zsh 5.9</code>, I tried <code>echo 'eval &quot;$(uv generate-shell-completion zsh)&quot;' &gt;&gt; ~/.zshrc</code> and reloaded the shell.</p>
<p>I tried on stock zsh and it works as expected.
I also tried with omz using above and it also seems to work as expected. Note, only tried with <code>git</code> and <code>zsh-autosuggestions</code> plugins.</p>
<pre><code class="language-zsh">‚ûú  ~ uv &lt;TAB or ^I&gt;
add                        -- Add dependencies to the project
build                      -- Build Python packages into source distributions and wheels
build-backend              -- The implementation of the build backend
cache                      -- Manage uv's cache
clean                      -- Clear the cache, removing all entries or those linked to specific packages
export                     -- Export the project's lockfile to an alternate format
generate-shell-completion  -- Generate shell completion
help                       -- Display documentation for a command
init                       -- Create a new project
lock                       -- Update the project's lockfile
pip                        -- Manage Python packages with a pip-compatible interface
publish                    -- Upload distributions to an index
python                     -- Manage Python versions and installations
remove                     -- Remove dependencies from the project
run                        -- Run a command or script
self                       -- Manage the uv executable
sync                       -- Update the project's environment
tool                       -- Run and install commands provided by Python packages
tree                       -- Display the project's dependency tree
venv                       -- Create a virtual environment
version                    -- Display uv's version
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amirreza8002">@amirreza8002</a> on 2024-11-21 02:37</div>
            <div class="timeline-body"><p>hi
seems like i had older uv version, it got fixed with an update.
tho the docs at the time were the same, perhaps it's been fixed in later versions</p>
<p>sorry for the false alarm üôè</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-21 02:50</div>
            <div class="timeline-body"><p>Thanks for checking and following up. I will proceed to close the issue üòÑ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @samypr100 on 2024-11-21 02:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:31 UTC
    </footer>
</body>
</html>
