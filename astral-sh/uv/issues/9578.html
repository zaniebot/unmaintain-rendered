<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How do I build a package which depends on another local package, for later use in a Docker container? - astral-sh/uv #9578</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How do I build a package which depends on another local package, for later use in a Docker container?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/9578">#9578</a>
        opened by <a href="https://github.com/NicholasPini">@NicholasPini</a>
        on 2024-12-02 14:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/NicholasPini">@NicholasPini</a> on 2024-12-02 14:44</div>
            <div class="timeline-body"><p>I have a bunch of parallel projects: each of these is it's own uv project. These project can depend on one another. Ultimately, I want to build a wheel file from a project, and use it in a Dockerfile to build the environment. Here is the problem: if project A depends on project B, this will be reflected in the wheel file, but then when I do</p>
<pre><code class="language-docker">RUN uv pip install --no-cache-dir ./*.whl
</code></pre>
<p>in my Dockerfile, it fails because it does not find package B in the registry. I don't want to import the source files of project B directly in the Docker image to avoid having to rebuild every time: I only want the dependencies necessary for A and B to work. The source files are going to be pulled from S3.</p>
<p>I thought about not making A depend on B, and just add B later in the container, but this means developing the project A without being able to rely on the linter to know if some dependencies is available because it's already in B, and having to install B's dependencies after having built the Docker image, which is suboptimal.</p>
<p>Note that I require the packages to be separated, thus I cannot use workspaces.</p>
<p>Is there a solution?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gary-wall-hpe">@gary-wall-hpe</a> on 2024-12-02 14:48</div>
            <div class="timeline-body"><p>When you build A, where do you put the whl build artifact?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NicholasPini">@NicholasPini</a> on 2024-12-02 14:51</div>
            <div class="timeline-body"><blockquote>
<p>When you build A, where do you put the whl build artifact?</p>
</blockquote>
<p>I leave the default path, which is the <code>dist</code> folder inside the project A folder. The dependencies of project B is declared as <code>../project_B</code>, because A and B are both in the same main folder, at the same level.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gary-wall-hpe">@gary-wall-hpe</a> on 2024-12-02 14:55</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>When you build A, where do you put the whl build artifact?</p>
</blockquote>
<p>I leave the default path, which is the <code>dist</code> folder inside the project A folder. The dependencies of project B is declared as <code>../project_B</code>, because A and B are both in the same main folder, at the same level.</p>
</blockquote>
<p>As I humbly understand, the index URL is the only place it will look to resolve unless you explicitly tell it where to find the file. But if you truly want to separate projects having a custom index you publish built artifacts to would give you flexibility.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NicholasPini">@NicholasPini</a> on 2024-12-02 15:01</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<blockquote>
<p>When you build A, where do you put the whl build artifact?</p>
</blockquote>
<p>I leave the default path, which is the <code>dist</code> folder inside the project A folder. The dependencies of project B is declared as <code>../project_B</code>, because A and B are both in the same main folder, at the same level.</p>
</blockquote>
<p>As I humbly understand, the index URL is the only place it will look to resolve unless you explicitly tell it where to find the file. But if you truly want to separate projects having a custom index you publish built artifacts to would give you flexibility.</p>
</blockquote>
<p>I believe I can add the <code>--find-links</code> option to <code>uv build</code> and pass the local dependencies' paths. Problem is, I believe that it would still fail as soon as I try to install the wheel file inside the docker container.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-02 15:58</div>
            <div class="timeline-body"><p>Why not use <code>--find-links</code> during <code>uv pip install</code> too?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NicholasPini">@NicholasPini</a> on 2024-12-02 16:22</div>
            <div class="timeline-body"><blockquote>
<p>Why not use <code>--find-links</code> during <code>uv pip install</code> too?</p>
</blockquote>
<p>I get a <code>relative URL without a base</code> error. I tried both an absolute path, and a relative path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-02 16:32</div>
            <div class="timeline-body"><p>Can you share a minimal example of this whole thing as a GitHub repository? I don't think we'll be able to help without a concrete demonstration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JuR-0">@JuR-0</a> on 2025-04-27 17:41</div>
            <div class="timeline-body"><p>@NicholasPini Did you solve your issue? I have a similar use case where I have a local dependency and a docker deployment. Couldn't find a solution. Any help would be appreciated</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NicholasPini">@NicholasPini</a> on 2025-04-27 18:10</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/NicholasPini">@NicholasPini</a> Did you solve your issue? I have a similar use case where I have a local dependency and a docker deployment. Couldn't find a solution. Any help would be appreciated</p>
</blockquote>
<p>Kinda? I don't use wheel files anymore. I copy the same exact folder structure into my dockerfile, with all necessary python projects and their toml/lock files, skipping the actual source code (except the <strong>init</strong>.py files, these are necessary).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JuR-0">@JuR-0</a> on 2025-04-28 08:10</div>
            <div class="timeline-body"><blockquote>
<p>Kinda? I don't use wheel files anymore. I copy the same exact folder structure into my dockerfile, with all necessary python projects and their toml/lock files, skipping the actual source code (except the <strong>init</strong>.py files, these are necessary).</p>
</blockquote>
<p>Seems like a hassle for something that shouldn't be. Thanks for your answer I'll see if I can make it work on my end</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:42 UTC
    </footer>
</body>
</html>
