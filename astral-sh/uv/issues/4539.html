<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Installing requirement fails when installing from pyproject.toml - astral-sh/uv #4539</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Installing requirement fails when installing from pyproject.toml</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/4539">#4539</a>
        opened by <a href="https://github.com/BenediktMaag">@BenediktMaag</a>
        on 2024-06-26 08:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BenediktMaag">@BenediktMaag</a></div>
            <div class="timeline-body"><p>Installing the example plugin works when directly declaring it in the prompt:</p>
<p>❯ : uv pip install pyplugin --extra-index-url file:\C:\temp\simple<br>
Resolved 1 package in 11ms
Installed 1 package in 19ms</p>
<ul>
<li>pyplugin==0.2.0</li>
</ul>
<p>When moving the dependency into the pyproject.toml installation fails:
&lt;pyproject.toml&gt;:
dependencies = [
&quot;pyplugin&quot;,
]</p>
<p>❯ : uv pip install -r pyproject.toml --extra-index-url file:\C:\temp\simple\ -vv
0.000081s DEBUG uv uv 0.2.15
uv_requirements::specification::from_source source=pyproject.toml
0.005812s DEBUG uv_toolchain::discovery Searching for Python interpreter in system toolchains
0.006456s DEBUG uv_toolchain::discovery Found cpython 3.12.0 at <code>C:\temp\test_install\.venv\Scripts\python.exe</code> (active virtual environment)
0.006673s DEBUG uv::commands::pip::install Using Python 3.12.0 environment at .venv\Scripts\python.exe
0.007163s DEBUG uv_fs Acquired lock for <code>.venv</code>
uv_client::linehaul::linehaul
0.007894s DEBUG uv_client::base_client Using request timeout of 30s
uv_resolver::flat_index::from_entries
0.010077s DEBUG uv_fs Acquired lock for <code>\\?\C:\Users\MaagB\AppData\Local\uv\cache\built-wheels-v3\path\e548fe00fa7297cc</code>
uv_distribution::source::build_metadata dist=file:///C:/temp/test_install/
0.014681s   0ms DEBUG uv_distribution::source Preparing metadata for: file:///C:/temp/test_install/
0.014935s   0ms DEBUG uv_distribution::source No static <code>PKG-INFO</code> available for: file:///C:/temp/test_install/ (MissingPkgInfo)
0.015387s   0ms DEBUG uv_distribution::source No static <code>pyproject.toml</code> available for: file:///C:/temp/test_install/ (PyprojectToml(FieldNotFound(&quot;project&quot;)))
uv_dispatch::setup_build version_id=&quot;file:///C:/temp/test_install/&quot;, subdirectory=None
0.016701s   1ms  INFO uv_virtualenv::bare Ignoring empty directory
uv_resolver::resolver::solve
uv_resolver::resolver::solve_tracked
0.050176s   0ms DEBUG uv_resolver::resolver Solving with installed Python version: 3.12.0
uv_resolver::resolver::choose_version package=root
uv_resolver::resolver::get_dependencies_forking package=root, version=0a0.dev0
uv_resolver::resolver::get_dependencies package=root, version=0a0.dev0
0.050989s   0ms DEBUG uv_resolver::resolver Adding direct dependency: setuptools&gt;=40.8.0
uv_resolver::resolver::process_request request=Versions setuptools
uv_resolver::resolver::choose_version package=setuptools
uv_client::registry_client::simple_api package=setuptools
uv_resolver::resolver::process_request request=Prefetch setuptools &gt;=40.8.0
error: Failed to build: <code>file:///C:/temp/test_install/</code>
Caused by: Failed to install requirements from setup.py build (resolve)
Caused by: No solution found when resolving: setuptools&gt;=40.8.0
Caused by: failed to read from file <code>C:\temp\simple\setuptools\index.html</code>
Caused by: The system cannot find the path specified. (os error 3)</p>
<p>Im not sure where the resolver receives the dependency to setuptools.
The plugin is compiled with maturin init and no changes.</p>
<p>A minimal setup can be found here, github doesnt allow .7z files (maturin init compiled as 0.1.0 and 0.2.0):
https://we.tl/t-WOJyEdOD1L</p>
<p>❯ : uv --version
uv 0.2.15 (bfc342da9 2024-06-24)
Windows 11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BenediktMaag">@BenediktMaag</a> on 2024-06-26 08:36</div>
            <div class="timeline-body"><p>Actually i found the error. I forgot to put the dependencies under [project].
Once i move them the error is more understandable from:</p>
<p>❯ : uv pip install -r pyproject.toml --extra-index-url file:\C:\temp\simple<br>
error: Failed to build: <code>file:///C:/temp/test_install/</code>
Caused by: Failed to install requirements from setup.py build (resolve)
Caused by: No solution found when resolving: setuptools&gt;=40.8.0
Caused by: failed to read from file <code>C:\temp\simple\setuptools\index.html</code>
Caused by: The system cannot find the path specified. (os error 3)</p>
<p>to
❯ : uv pip install -r pyproject.toml --extra-index-url file:\C:\temp\simple<br>
error: Failed to parse: <code>pyproject.toml</code>
Caused by: TOML parse error at line 1, column 1
|
1 | [project]
| ^^^^^^^^^^
missing field <code>name</code></p>
<p>and once i add name and version it works:
❯ : uv pip install -r pyproject.toml --extra-index-url file:\C:\temp\simple<br>
Resolved 1 package in 10ms
Installed 1 package in 14ms</p>
<ul>
<li>pyplugin==0.2.0</li>
</ul>
<p>IMO this can be closed but you might consider improving the error message to hint no dependencies found in project.dependencies</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-26 11:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-26 12:03</div>
            <div class="timeline-body"><p>Thanks! Can you share the full contents of the <code>pyproject.toml</code> that was initially failing? Need to figure out the right heuristic because (e.g.) projects that use Poetry won&#x27;t have a <code>project</code> table either.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BenediktMaag">@BenediktMaag</a> on 2024-06-26 12:17</div>
            <div class="timeline-body"><p>Either:
❯ : bat pyproject.toml -n
1 [tool.uv.pip]
2 extra-index-url = [&quot;file:\\C:\temp\simple\&quot;]
❯ : uv pip install -r pyproject.toml
error: Failed to parse metadata from built wheel
Caused by: metadata field Name not found</p>
<p>Or empty pyproject and:
❯ : uv pip install -r pyproject.toml --extra-index-url file:\C:\temp\simple<br>
error: Failed to build: <code>file:///C:/temp/test_install/</code>
Caused by: Failed to install requirements from setup.py build (resolve)
Caused by: No solution found when resolving: setuptools&gt;=40.8.0
Caused by: failed to read from file <code>C:\temp\simple\setuptools\index.html</code>
Caused by: The system cannot find the path specified. (os error 3)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BenediktMaag">@BenediktMaag</a> on 2024-06-26 12:18</div>
            <div class="timeline-body"><p>Initially i tried it with:
❯ : bat pyproject.toml -n
1 dependencies = [
2     &quot;pyplugin&quot;
3 ]</p>
<p>but that seems to be ignored then anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-26 12:20</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thisnotebooksuser">@thisnotebooksuser</a> on 2025-08-11 20:38</div>
            <div class="timeline-body"><p>Hello. I am having the same problem. I am trying to install axolotl v12.0.1 using the command:
uv pip install --no-build-isolation axolotl[deepspeed,flash-attn]
uv version is 0.8.8.
Message:
&quot;Resolved 235 packages in 850ms.
Failed to continue download and build &#x27;axolotl-contribs-mit==0.0.5&#x27;
Failed to parse metadata from built wheel
Metadata field not found
help: &#x27;axolotl-contribs-mit&#x27; (v0.0.5) was included because &#x27;axolotl&#x27; (v12.0.1) depends on &#x27;axolotl-contribts-mit&#x27;.
The issue is confusing and I can&#x27;t seem to make sense of it... If anyone could help me, I&#x27;d really appreciate it. Thanks in advance.
Ubuntu 22.04.5 LTS.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-11 20:49</div>
            <div class="timeline-body"><p>@thisnotebooksuser that&#x27;s pretty weird, does that reproduce consistently?</p>
<p>I can&#x27;t reproduce with, e.g.,</p>
<pre><code>docker run -it astral/uv:bookworm-slim bash -c &quot;uv venv &amp;&amp; uv pip install axolotl-contribs-mit==0.0.5 --no-deps&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thisnotebooksuser">@thisnotebooksuser</a> on 2025-08-12 15:24</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/thisnotebooksuser">@thisnotebooksuser</a> that&#x27;s pretty weird, does that reproduce consistently?</p>
<p>I can&#x27;t reproduce with, e.g.,</p>
<pre><code>docker run -it astral/uv:bookworm-slim bash -c &quot;uv venv &amp;&amp; uv pip install axolotl-contribs-mit==0.0.5 --no-deps&quot;
</code></pre>
</blockquote>
<p>Your command, uv pip install axolotl-contribs-mit==0.0.5 --no-deps, is in fact working. After that, it was possible to install the library without any errors. I&#x27;m curious as to how that could have worked, though, when the original command I posted still doesn&#x27;t. I figure I must study more, as I&#x27;m a tech newbie as of now. I thank you greatly!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-12 18:16</div>
            <div class="timeline-body"><p>Perhaps because you disabled build isolation? Maybe you want <code>--no-build-isolation-package axolotl</code>? Why were you disabling  it?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:31:44 UTC
    </footer>
</body>
</html>
