<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is it possible to create two different wheels using the same pyproject.toml? - astral-sh/uv #13486</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is it possible to create two different wheels using the same pyproject.toml?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13486">#13486</a>
        opened by <a href="https://github.com/Garrus990">@Garrus990</a>
        on 2025-05-16 09:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Garrus990">@Garrus990</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p><em>Context</em>
I'm using <code>uv</code> to run jobs on Databricks. The jobs are wheel-based, so I am building a wheel file and this file is used by DBX clusters to install the required packages in specified versions. My job comprises two tasks, each of which could have its own wheel delivered, which would be beneficial for cluster set-up time as I wouldn't have to install unnecessary packages (that are required in one task and not in the other), some of which can be quite big (pytorch).</p>
<p><em>Question</em>
Is it possible now or would it be possible to have a way to build two different wheels from the same pyproject.toml by using some parameters? I know I can specify packages in optional-dependencies, but the DBX runner uses (I assume) <code>pip install package</code> and I have no way of requesting installation of <code>pip install package[pytorch]</code> which could save me some time for the tasks where pytorch is not required. If that would be possible I could build two wheels, one slim and one with all the bells and whistles and supply them to each task independently.</p>
<h3>Platform</h3>
<p>Ubuntu 22.04</p>
<h3>Version</h3>
<p>0.5.24</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @Garrus990 on 2025-05-16 09:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-16 09:45</div>
            <div class="timeline-body"><p>The decision what a wheel contains is up to the build backend (e.g., hatchling), but it is expected that the built wheel is consistent, as other tool might break if it isn't. uv assumes that optional dependencies are used for this case, so we don't have a solution for this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Garrus990">@Garrus990</a> on 2025-05-16 10:47</div>
            <div class="timeline-body"><p>Makes sense, I was just hoping that in the future there may be an option like <code>--make-group-non-optional</code> that would, for the time of wheel creation, mark one of the groups as &quot;core&quot; published dependencies. But I guess that wouldn't be very pythonic. Thanks for help!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Garrus990 on 2025-05-16 10:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:31:22 UTC
    </footer>
</body>
</html>
