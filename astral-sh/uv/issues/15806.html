<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unable to pass a path containing spaces to the `--env-file` option of `uv run` - astral-sh/uv #15806</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Unable to pass a path containing spaces to the <code>--env-file</code> option of <code>uv run</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/15806">#15806</a>
        opened by <a href="https://github.com/angelo-peronio">@angelo-peronio</a>
        on 2025-09-12 10:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/angelo-peronio">@angelo-peronio</a></div>
            <div class="timeline-body">Summary
<p>I am not able to pass a path containing spaces to the <code>--env-file</code> option of <code>uv run</code>, both on Windows and on Linux. Passing the same path to the <code>--directory</code> option works as expected, instead. Might be related to #12639. Am I missing something obvious?</p>
On Windows / PowerShell
<ul>
<li>Platform: Microsoft Windows 11 Version 24H2 (OS Build 26100.4946) x86_64</li>
<li>Shell: PowerShell 7.5.2</li>
<li><code>uv</code> version: uv 0.8.17 (10960bc13 2025-09-10)</li>
<li>Python version: Python 3.13.7 (main, Sep  2 2025, 14:16:00) [MSC v.1944 64 bit (AMD64)]</li>
</ul>
<pre><code>PS&gt; mkdir &quot;path with spaces&quot;
PS&gt; &quot;TEST=Success!&quot; | Out-File &#x27;.\path with spaces\.env&#x27;

PS&gt; uv run -vvv --env-file=&quot;path with spaces\.env&quot; python -c &#x27;import os; print(os.environ[&quot;TEST&quot;])&#x27;
DEBUG uv 0.8.17 (10960bc13 2025-09-10)
TRACE Error trace: No environment file found at: `spaces\.env`
error: No environment file found at: `spaces\.env`
</code></pre>
<p>The &quot;obvious&quot; escape attempts did not work:</p>
<pre><code>PS&gt; uv run --env-file=&#x27;path with spaces\.env&#x27; python -c &#x27;import os; print(os.environ[&quot;TEST&quot;])&#x27;
error: No environment file found at: `spaces\.env`

PS&gt; uv run --env-file=path` with` spaces\.env python -c &#x27;import os; print(os.environ[&quot;TEST&quot;])&#x27;
error: No environment file found at: `spaces\.env`

PS&gt; uv run &quot;--env-file=&#x27;path with spaces\.env&#x27;&quot; python -c &#x27;import os; print(os.environ[&quot;TEST&quot;])&#x27;
error: No environment file found at: `spaces\.env&#x27;`
</code></pre>
<p>A path with no whitespaces works as expected:</p>
<pre><code>PS&gt; mkdir path-without-spaces
PS&gt; &quot;TEST=Success!&quot; | Out-File .\path-without-spaces\.env
PS&gt; uv run --env-file=path-without-spaces\.env python -c &#x27;import os; print(os.environ[&quot;TEST&quot;])&#x27;
Success!
</code></pre>
<p>Interestingly, <code>uv run --directory</code> works as expected:</p>
<pre><code>PS&gt; uv run --directory=&quot;path with spaces&quot; pwsh -Command pwd

Path
----
C:\cache\test\mre\path with spaces
</code></pre>
On Linux / bash
<ul>
<li>Platform: Linux 6.6.87.2-microsoft-standard-WSL2 x86_64 GNU/Linux</li>
<li>Shell: GNU bash, version 5.2.21(1)-release (x86_64-pc-linux-gnu)</li>
<li><code>uv</code> version: uv 0.8.17</li>
<li>Python version: Python 3.12.3 (main, Aug 14 2025, 17:47:21) [GCC 13.3.0]</li>
</ul>
<p>I observed the same behavior on Linux WSL:</p>
<pre><code>$&gt; mkdir &#x27;path with spaces&#x27;
$&gt; echo TEST=Success! &gt; path\ with\ spaces/.env
$&gt; uv run -vvv --env-file=path\ with\ spaces/.env python -c &#x27;import os; print(os.environ[&quot;TEST&quot;])&#x27;
DEBUG uv 0.8.17
TRACE Error trace: No environment file found at: `spaces/.env`
error: No environment file found at: `spaces/.env`

$&gt; uv run --env-file=&#x27;path with spaces/.env&#x27; python -c &#x27;import os; print(os.environ[&quot;TEST&quot;])&#x27;
error: No environment file found at: `spaces/.env`

$&gt; uv run --env-file=&quot;path with spaces/.env&quot; python -c &#x27;import os; print(os.environ[&quot;TEST&quot;])&#x27;
error: No environment file found at: `spaces/.env`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/angelo-peronio">@angelo-peronio</a> on 2025-09-12 10:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-12 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-12 15:39</div>
            <div class="timeline-body"><p>It&#x27;s because you can provide multiple values by space-delimiting. Let me see if there&#x27;s a way to escape it in Clap...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-12 15:45</div>
            <div class="timeline-body"><p>It doesn&#x27;t look like there&#x27;s any way to fix it natively in Clap, but I will add our own escaping.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-12 22:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/angelo-peronio">@angelo-peronio</a> on 2025-09-18 11:38</div>
            <div class="timeline-body"><p>It works, thank you!</p>
<p>For reference: in the path passed to <code>--env-file</code>, one needs to use forward slashes <code>/</code> as path separators, and escape whitespaces with backward slashes <code>\</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:40:20 UTC
    </footer>
</body>
</html>
