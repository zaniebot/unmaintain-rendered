<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv lock` should work even if `UV_FROZEN` is set - astral-sh/uv #12783</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv lock</code> should work even if <code>UV_FROZEN</code> is set</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/12783">#12783</a>
        opened by <a href="https://github.com/jacob-bush-shopify">@jacob-bush-shopify</a>
        on 2025-04-09 14:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jacob-bush-shopify">@jacob-bush-shopify</a> on 2025-04-09 14:15</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Currently, if <code>UV_FROZEN=true</code> is set in your environment <code>uv lock</code> succeeds and prints no output.</p>
<p>I would expect one of:</p>
<ul>
<li><code>uv lock</code> to update the <code>uv.lock</code> file because that is what the command does.</li>
<li><code>uv lock</code> to print a warning that <code>UV_FROZEN=true</code> so that I know why it did not update the <code>uv.lock</code> file.</li>
</ul>
<h3>Example</h3>
<p>If <code>UV_FROZEN=true</code> the command succeeds and prints no output:</p>
<pre><code>❯ uv lock
❯ echo $?
0
</code></pre>
<p>This can be worked around by explicitly disabling the environment variable</p>
<pre><code>❯ UV_FROZEN=false uv lock
Resolved 259 packages in 2.26s
warning: The package `typer==0.15.2` does not have an extra named `all`
warning: `aiohttp==3.11.14` is yanked (reason: &quot;Regression: https://github.com/aio-libs/aiohttp/issues/10617&quot;)
Updated &lt;INTERNAL_PACKAGE&gt; v3.4.0 -&gt; v3.5.0rc2
</code></pre>
<p>I would prefer <code>uv lock</code> to ignore the <code>UV_FROZEN</code> configuration because I am explicitly updating the lock file (rather than <code>uv sync</code> or <code>uv run</code> which implicitly update the lock file).</p>
<p>If this is not possible I would love a warning instead of no output</p>
<pre><code>❯ uv lock
warning: The `uv.lock` file was not updated because `UV_FROZEN=true`.
</code></pre>
<p>I would not necessarily expect or want this warning on <code>uv sync</code> or <code>uv run</code> (though I would leave that decision up to the developers/maintainers).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @jacob-bush-shopify on 2025-04-09 14:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:59 UTC
    </footer>
</body>
</html>
