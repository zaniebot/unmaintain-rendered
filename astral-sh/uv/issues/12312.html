<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question: why are dev dependency-groups of workspace members not being installed? - astral-sh/uv #12312</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Question: why are dev dependency-groups of workspace members not being installed?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12312">#12312</a>
        opened by <a href="https://github.com/RensDimmendaal">@RensDimmendaal</a>
        on 2025-03-19 13:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/RensDimmendaal">@RensDimmendaal</a> on 2025-03-19 13:38</div>
            <div class="timeline-body"><h3>Question</h3>
<p>Environment
UV Version: <code>uv 0.6.8 (c1ef48276 2025-03-18)</code>
Python Version: 3.13.0
OS: Mac OS</p>
<h2>Issue Description</h2>
<p>I've set up a UV workspace with multiple packages that each have their own dev dependencies defined in the [dependency-groups] section. When I run commands that should install dev dependencies, only the root workspace's dev dependencies get installed, but the dev dependencies from the workspace members are missing.</p>
<p>Could someone please tell me if I am doing something wrong or if I perhaps have the wrong expectation of what can be accomplished with workspaces and/or dependency-groups?</p>
<h2>Steps to Reproduce</h2>
<p>dir tree:</p>
<pre><code>.
├── README.md
├── hello.py
├── pyproject.toml
├── uv.lock
└── ws
    └── my-ws-member
        ├── README.md
        ├── hello.py
        └── pyproject.toml
</code></pre>
<p><code>./pyproject.toml</code>:</p>
<pre><code>[project]
name = &quot;test-ws&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.13.0&quot;
dependencies = [&quot;my-ws-member&quot;]

[tool.uv.sources]
my-ws-member = { workspace = true }

[tool.uv.workspace]
members = [&quot;ws/*&quot;]

[dependency-groups]
dev = [
    &quot;pytest&gt;=8.3.5&quot;,
]
</code></pre>
<p><code>./ws/my-ws-member/pyproject.toml</code>:</p>
<pre><code>[project]
name = &quot;my-ws-member&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.13.0&quot;
dependencies = [
    &quot;httpx&gt;=0.28.1&quot;,
]

[dependency-groups]
dev = [
    &quot;black&gt;=25.1.0&quot;,
]
</code></pre>
<p>ran commands from root dir: <code>uv sync</code></p>
<p><code>uv tree</code> output:</p>
<pre><code>test-ws v0.1.0
├── my-ws-member v0.1.0
│   ├── httpx v0.28.1
│   │   ├── anyio v4.9.0
│   │   │   ├── idna v3.10
│   │   │   └── sniffio v1.3.1
│   │   ├── certifi v2025.1.31
│   │   ├── httpcore v1.0.7
│   │   │   ├── certifi v2025.1.31
│   │   │   └── h11 v0.14.0
│   │   └── idna v3.10
│   └── black v25.1.0 (group: dev)
│       ├── click v8.1.8
│       ├── mypy-extensions v1.0.0
│       ├── packaging v24.2
│       ├── pathspec v0.12.1
│       └── platformdirs v4.3.6
└── pytest v8.3.5 (group: dev)
    ├── iniconfig v2.0.0
    ├── packaging v24.2
    └── pluggy v1.5.0
</code></pre>
<p><code>uv pip freeze</code>:</p>
<pre><code>anyio==4.9.0
certifi==2025.1.31
h11==0.14.0
httpcore==1.0.7
httpx==0.28.1  # &lt;-- workspace member's dependency is included
idna==3.10
iniconfig==2.0.0
packaging==24.2
pluggy==1.5.0
pytest==8.3.5. # &lt;-- workspace root's dev dependency-group is included
sniffio==1.3.1
</code></pre>
<p>What I would expect is also <code>black</code> the dev group-dependency from <code>my-ws-member</code> to also be included. And I'm puzzled why it is not</p>
<h3>Platform</h3>
<p>macOS Darwin 24.2.0 arm64uv</p>
<h3>Version</h3>
<p>uv 0.6.8 (c1ef48276 2025-03-18)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @RensDimmendaal on 2025-03-19 13:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Why are dev dependency-groups of workspace members not being installed?" to "Question: Why are dev dependency-groups of workspace members not being installed?" by @RensDimmendaal on 2025-03-19 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Question: Why are dev dependency-groups of workspace members not being installed?" to "Question: why are dev dependency-groups of workspace members not being installed?" by @RensDimmendaal on 2025-03-19 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-19 15:42</div>
            <div class="timeline-body"><p>This is intentional. <code>uv sync</code> installs the workspace root by default, and so you get the workspace root's dev dependencies. If you want the dev dependency for a member, you should <code>uv sync -p</code> that member. Just like you wouldn't want to import one of the member's dependencies from the root package without declaring it as a dependency yourself, you shouldn't be accessing dev dependencies on members like that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-19 15:43</div>
            <div class="timeline-body"><p>You can run <code>uv sync --all-packages</code> to install the root <em>and</em> all members, which I believe would install all of their dev dependencies too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RensDimmendaal">@RensDimmendaal</a> on 2025-03-19 21:46</div>
            <div class="timeline-body"><p>@charliermarsh thank you so much for the quick reply. <code>uv sync --all-packages</code> was indeed the command that I had missed. Thanks again, I really enjoy using uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @RensDimmendaal on 2025-03-19 21:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:02 UTC
    </footer>
</body>
</html>
