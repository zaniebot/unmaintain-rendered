<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv add tensorflow` Fails in Python 3.9 - astral-sh/uv #9840</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv add tensorflow` Fails in Python 3.9</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9840">#9840</a>
        opened by <a href="https://github.com/caipeter888">@caipeter888</a>
        on 2024-12-12 14:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/caipeter888">@caipeter888</a> on 2024-12-12 14:09</div>
            <div class="timeline-body"><h2>Description</h2>
<p>In <code>uv 0.5.8</code>, the command <code>uv add tensorflow</code> fails in a Python 3.9 environment due to an issue with the package <code>tensorflow-io-gcs-filesystem</code>. However, the command  <code>uv pip install tensorflow</code> works successfully.</p>
<h2>Environment</h2>
<ul>
<li>uv version: <code>uv 0.5.8 (80d41671b 2024-12-11)</code></li>
<li>System: <code>Windows 11 24H2 26100.2454</code></li>
<li>Python version: <code>cpython-3.9.20-windows-x86_64-none    D:\Users\user\AppData\Roaming\uv\python\cpython-3.9.20-windows-x86_64-none\python.exe</code></li>
</ul>
<h2>Steps to Reproduce</h2>
<ol>
<li><p>Cache Cleaning:</p>
<pre><code>Z:\&gt;uv cache clean
No cache found at: D:\Users\user\AppData\Local\uv\cache
</code></pre>
</li>
<li><p>Create Python 3.9 Project:</p>
<pre><code>Z:\&gt;uv init --python 3.9 tensorflow-project
Initialized project `tensorflow-project` at `Z:\tensorflow-project`

Z:\&gt;cd tensorflow-project
</code></pre>
</li>
<li><p>Attempt to Add TensorFlow Using <code>uv add tensorflow</code>:</p>
<pre><code>Z:\tensorflow-project&gt;uv add tensorflow
Using CPython 3.9.20
Creating virtual environment at: .venv
Resolved 41 packages in 2.29s
error: Distribution `tensorflow-io-gcs-filesystem==0.37.1 @ registry+https://pypi.org/simple` can't be installed because it doesn't have a source distribution or wheel for the current platform
</code></pre>
</li>
<li><p>Verbose Output:</p>
<pre><code>Z:\tensorflow-project&gt;uv add tensorflow --verbose &gt;output.txt 2&gt;&amp;1
</code></pre>
<p>See <code>output.txt</code> for the verbose output.</p>
<p><a href="https://github.com/user-attachments/files/18112648/output.txt">output.txt</a></p>
</li>
<li><p>Successfully Install TensorFlow Using <code>uv pip install tensorflow</code>:</p>
<pre><code>Z:\tensorflow-project&gt;uv pip install tensorflow
Resolved 41 packages in 1.26s
Prepared 41 packages in 48.81s
warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.
         If the cache and target directories are on different filesystems, hardlinking may not be supported.
         If this is intentional, set `export UV_LINK_MODE=copy` or use `--link-mode=copy` to suppress this warning.
Installed 41 packages in 20.56s

+ absl-py==2.1.0
+ astunparse==1.6.3
+ certifi==2024.8.30
+ charset-normalizer==3.4.0
+ flatbuffers==24.3.25
+ gast==0.6.0
+ google-pasta==0.2.0
+ grpcio==1.68.1
+ h5py==3.12.1
+ idna==3.10
+ importlib-metadata==8.5.0
+ keras==3.7.0
+ libclang==18.1.1
+ markdown==3.7
+ markdown-it-py==3.0.0
+ markupsafe==3.0.2
+ mdurl==0.1.2
+ ml-dtypes==0.4.1
+ namex==0.0.8
+ numpy==2.0.2
+ opt-einsum==3.4.0
+ optree==0.13.1
+ packaging==24.2
+ protobuf==5.29.1
+ pygments==2.18.0
+ requests==2.32.3
+ rich==13.9.4
+ setuptools==75.6.0
+ six==1.17.0
+ tensorboard==2.18.0
+ tensorboard-data-server==0.7.2
+ tensorflow==2.18.0
+ tensorflow-intel==2.18.0
+ tensorflow-io-gcs-filesystem==0.31.0
+ termcolor==2.5.0
+ typing-extensions==4.12.2
+ urllib3==2.2.3
+ werkzeug==3.1.3
+ wheel==0.45.1
+ wrapt==1.17.0
+ zipp==3.21.0

Z:\tensorflow-project&gt;uv run python -c &quot;import tensorflow as tf;print(tf.reduce_sum(tf.random.normal([1000, 1000])))&quot;
2024-12-12 22:03:45.312946: I tensorflow/core/util/port.cc:153] oneDNN custom operations are on. You may see slightly different numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the environment variable `TF_ENABLE_ONEDNN_OPTS=0`.
2024-12-12 22:03:46.816076: I tensorflow/core/util/port.cc:153] oneDNN custom operations are on. You may see slightly different numerical results due to floating-point round-off errors from different computation orders. To turn them off, set the environment variable `TF_ENABLE_ONEDNN_OPTS=0`.
2024-12-12 22:03:48.965224: I tensorflow/core/platform/cpu_feature_guard.cc:210] This TensorFlow binary is optimized to use available CPU instructions in performance-critical operations.
To enable the following instructions: AVX2 AVX512F AVX512_VNNI AVX512_BF16 FMA, in other operations, rebuild TensorFlow with the appropriate compiler flags.
tf.Tensor(-79.78926, shape=(), dtype=float32)
</code></pre>
</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/my1e5">@my1e5</a> on 2024-12-12 14:20</div>
            <div class="timeline-body"><ul>
<li>See https://github.com/astral-sh/uv/issues/9711</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-12 14:21</div>
            <div class="timeline-body"><p>üëç Looks like a case of that tracking issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-12-12 14:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:49 UTC
    </footer>
</body>
</html>
