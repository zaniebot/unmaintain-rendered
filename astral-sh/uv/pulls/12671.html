<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make `--frozen` and `--no-sources` conflicting options - astral-sh/uv #12671</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make <code>--frozen</code> and <code>--no-sources</code> conflicting options</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/12671">#12671</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2025-04-04 12:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Alternatively, we could just warn.</p>
<p>Closes https://github.com/astral-sh/uv/issues/12653.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @charliermarsh on 2025-04-04 12:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @charliermarsh on 2025-04-04 12:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-04 16:28</div>
            <div class="timeline-body"><p>What about other things, like <code>--index</code> and <code>--frozen</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-04-04 16:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-04 16:29</div>
            <div class="timeline-body"><p>Seems like an improvement, should we consider this breaking?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking</span> added by @Gankra on 2025-04-10 19:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.7.0" by @Gankra on 2025-04-10 19:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-04-10 19:59</div>
            <div class="timeline-body"><p>Temporarily marking as breaking so it doesn't slip through the cracks of 0.7.0.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-15 20:51</div>
            <div class="timeline-body"><p>@Gankra can you own looking into what should happen with the other argument conflicts?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @Gankra by @zanieb on 2025-04-21 19:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-04-24 18:35</div>
            <div class="timeline-body"><p>Yeah I <em>think</em> basically every single ResolveInstallerArgs flag logically contradicts with <code>--frozen</code> (still looking through them... there's a lot...).</p>
<p>Funnily enough <code>--index</code> <em>specifically</em> is valid for <em>exactly</em> <code>uv add</code> because it's &quot;recycled&quot; by that command to also mean &quot;and add this this index to the project metadata&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-04-24 19:08</div>
            <div class="timeline-body"><p>Although for a few commands that's actually muddier because there's situations where <code>--frozen</code> is a dynamic noop with a warning (scripts without lockfiles).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-04-24 20:27</div>
            <div class="timeline-body"><p>Ok I think I've convinced myself that while, strictly speaking, a lot of flags like <code>--index</code> could be made exclusive to <code>--frozen</code>, that it's probably not the <em>best</em> idea to do so.</p>
<p>Specifically because a lot of these arguments can be set with environment variables like <code>UV_INDEX=&quot;aaa&quot;</code>, and because we tell clap about them, <em>clap is smart enough to see UV_INDEX is set and error any time you pass <code>--frozen</code></em>.</p>
<p>I could see this being <em>really</em> hostile to any org that's like &quot;ok we setup all our index stuff in environment variables we keep set all the time... and now <code>--frozen</code> is randomly exploding!&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-04-24 20:31</div>
            <div class="timeline-body"><p>As such I'm going to merge this as-is, as a fairly reasonable and conservative tightening.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @Gankra on 2025-04-24 20:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Gankra on 2025-04-24 20:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-04-24 20:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:42:41 UTC
    </footer>
</body>
</html>
