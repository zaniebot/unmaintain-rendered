<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature/add file extension aliases 7365 - astral-sh/uv #7375</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature/add file extension aliases 7365</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/7375">#7375</a>
        opened by <a href="https://github.com/Aditya-PS-05">@Aditya-PS-05</a>
        on 2024-09-13 19:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/Aditya-PS-05">@Aditya-PS-05</a> on 2024-09-13 19:31</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This pull request adds support for additional file extension aliases in the SourceDistExtension and ExtensionError enums. The newly supported file extensions include .tbz, .tgz, .txz, .tar.lz, .tar.lzma. These changes align the extensions supported by the SourceDistExtension with those used in Python packaging tools, enhancing compatibility with a broader range of source distribution formats.</p>
<p>closes #7201</p>
<h2>Test Plan</h2>
<p>should be added or updated to verify that the new extensions are correctly recognized as valid source distributions and that errors are correctly raised when unsupported extensions are provided.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-09-13 19:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/distribution-filename/src/extension.rs</code>:73 on 2024-09-13 19:36</div>
            <div class="timeline-body"><p>It might be that <code>.tar</code> is just uncompressed tar without gzip?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Aditya-PS-05">@Aditya-PS-05</a> reviewed on 2024-09-13 19:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Aditya-PS-05">@Aditya-PS-05</a> on <code>crates/distribution-filename/src/extension.rs</code>:73 on 2024-09-13 19:43</div>
            <div class="timeline-body"><p>Thanks for suggestion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Aditya-PS-05 on 2024-09-13 19:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Aditya-PS-05">@Aditya-PS-05</a> reviewed on 2024-09-13 19:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Aditya-PS-05">@Aditya-PS-05</a> on <code>crates/distribution-filename/src/extension.rs</code>:73 on 2024-09-13 19:59</div>
            <div class="timeline-body"><p>Should I need to update the SourceDistExtension enum?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @Aditya-PS-05 on 2024-09-13 20:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Aditya-PS-05 on 2024-09-13 20:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-09-13 20:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/distribution-filename/src/extension.rs</code>:73 on 2024-09-13 20:07</div>
            <div class="timeline-body"><p>I believe so, yeah.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-09-14 00:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/distribution-filename/src/extension.rs</code>:73 on 2024-09-14 00:33</div>
            <div class="timeline-body"><p>Do you want some help finishing this off?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Aditya-PS-05">@Aditya-PS-05</a> reviewed on 2024-09-14 07:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Aditya-PS-05">@Aditya-PS-05</a> on <code>crates/distribution-filename/src/extension.rs</code>:73 on 2024-09-14 07:38</div>
            <div class="timeline-body"><p>Yeah I need some help,</p>
<p>in extension.rs file:</p>
<pre><code>pub enum SourceDistExtension {
    Zip,
    TarGz,
    TarBz2,
    TarXz,
    Tar,
    TarZst,
    TarLz,
    TarLzma,
}
</code></pre>
<pre><code>match extension {
            &quot;zip&quot; =&gt; Ok(Self::Zip),
            &quot;gz&quot; if is_tar(path.as_ref()) =&gt; Ok(Self::TarGz),
            &quot;tgz&quot; =&gt; Ok(Self::TarGz),
            &quot;tar&quot; =&gt; Ok(Self::Tar),
            &quot;bz2&quot; | &quot;tbz&quot; if is_tar(path.as_ref()) =&gt; Ok(Self::TarBz2),
            &quot;xz&quot; | &quot;txz&quot; | &quot;tlz&quot; | &quot;tar.lz&quot; | &quot;tar.lzma&quot; if is_tar(path.as_ref()) =&gt; {
                Ok(Self::TarXz)
            }
            &quot;zst&quot; if is_tar(path.as_ref()) =&gt; Ok(Self::TarZst),
            _ =&gt; Err(ExtensionError::SourceDist),
        }
</code></pre>
<pre><code>impl Display for SourceDistExtension {
    fn fmt(&amp;self, f: &amp;mut Formatter&lt;'_&gt;) -&gt; std::fmt::Result {
        match self {
            Self::Zip =&gt; f.write_str(&quot;zip&quot;),
            Self::TarGz =&gt; f.write_str(&quot;tar.gz&quot;),
            Self::TarBz2 =&gt; f.write_str(&quot;tar.bz2&quot;),
            Self::TarXz =&gt; f.write_str(&quot;tar.xz&quot;),
            Self::Tar =&gt; f.write_str(&quot;tar&quot;),
            Self::TarZst =&gt; f.write_str(&quot;tar.zst&quot;),
            Self::TarLz =&gt; f.write_str(&quot;tar.lz&quot;),
            Self::TarLzma =&gt; f.write_str(&quot;tar.lzma&quot;),
        }
    }
}

// #[derive(Error, Debug)]
pub enum ExtensionError {
    #[error(&quot;`.whl`, `.zip`, `.tar.gz`, `.tgz`, `.tar.bz2`, `.tbz`, `.tar.xz`, `.txz`, `.tar.lz`, `.tar.lzma`, `.tar.zst`&quot;)]
    Dist,
    #[error(&quot;`.zip`, `.tar.gz`, `.tgz`, `.tar.bz2`, `.tbz`, `.tar.xz`, `.txz`, `.tar.lz`, `.tar.lzma`, `.tar.zst`&quot;)]
    SourceDist,
}

</code></pre>
<p>Where am I going wrong, as some tests are being failed. I tried to took inspiration from the pr #7201 as he done the same thing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @Aditya-PS-05 on 2024-09-14 07:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Aditya-PS-05 on 2024-09-14 07:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:01:32 UTC
    </footer>
</body>
</html>
