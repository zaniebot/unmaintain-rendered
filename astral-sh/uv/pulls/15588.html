<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a plain text backend for credential storage - astral-sh/uv #15588</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a plain text backend for credential storage</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/15588">#15588</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-08-30 13:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>Adds a default plain text storage mechanism to <code>uv auth</code>.</p>
<p>While we&#x27;d prefer to use the system store, the &quot;native&quot; keyring support is experimental still and I don&#x27;t want to ship an unusable interface. @geofft also suggested that the story for secure credential storage is much weaker on Linux than macOS and Windows and felt this approach would be needed regardless.</p>
<p>We&#x27;ll switch over to using the native keyring by default in the future. On Linux, we can now fallback to a plaintext store the secret store is not configured, which is a nice property.</p>
<p>Right now, we store credentials in a TOML file in the uv state directory. I expect to also read from the uv config directory in the future, but we don&#x27;t need it immediately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-30 15:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-08-30 15:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-auth/src/credentials.rs</code>:34 on 2025-08-30 15:50</div>
            <div class="timeline-body"><p>Make this serde transparent?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-08-30 15:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-auth/src/middleware.rs</code>:57 on 2025-08-30 15:52</div>
            <div class="timeline-body"><p>I&#x27;d suggest just importing these rather than using fully-qualified paths.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-30 15:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-auth/src/middleware.rs</code>:57 on 2025-08-30 15:59</div>
            <div class="timeline-body"><p>(I&#x27;m always down for that, that&#x27;s just claude being weird)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-08-30 16:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-auth/src/store.rs</code>:181 on 2025-08-30 16:01</div>
            <div class="timeline-body"><p><code>FxHashMap</code> everywhere for consistency IMO.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-08-30 16:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-auth/src/store.rs</code>:192 on 2025-08-30 16:01</div>
            <div class="timeline-body"><p>I would just omit this and use <code>::default</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-auth/src/store.rs</code>:186 on 2025-08-30 16:02</div>
            <div class="timeline-body"><p>I think you can just derive <code>Default</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-08-30 16:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-auth/src/service.rs</code>:19 on 2025-08-30 16:04</div>
            <div class="timeline-body"><p>Is this right? Shouldn&#x27;t it be transparent instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-08-30 16:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-30 16:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-30 16:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-08-30 16:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:53:48 UTC
    </footer>
</body>
</html>
