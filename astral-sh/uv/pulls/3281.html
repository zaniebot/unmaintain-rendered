<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Run resolve/install benchmarks in ci - astral-sh/uv #3281</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Run resolve/install benchmarks in ci</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/3281">#3281</a>
        opened by <a href="https://github.com/ibraheemdev">@ibraheemdev</a>
        on 2024-04-26 16:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a></div>
            <div class="timeline-body">Summary
<p>Runs resolver benchmarks in CI with codspeed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-04-26 19:42</div>
            <div class="timeline-body"><a href="https://codspeed.io/astral-sh/uv/branches/ibraheemdev:benches">CodSpeed Performance Report</a>
Congrats! CodSpeed is installed ğŸ‰
<p><code>ğŸ†•</code> <strong>12 new benchmarks were detected.</strong></p>
<p>You will start to see performance impacts in the reports once the benchmarks are run from your default branch.</p>

  Detected benchmarks

<ul>
<li><code>build_platform_tags[burntsushi-archlinux]</code> (6.3 ms)</li>
<li><code>wheelname_parsing[flyte-long-compatible]</code> (21 Âµs)</li>
<li><code>wheelname_parsing[flyte-long-incompatible]</code> (26.3 Âµs)</li>
<li><code>wheelname_parsing[flyte-short-compatible]</code> (11.9 Âµs)</li>
<li><code>wheelname_parsing[flyte-short-incompatible]</code> (12.2 Âµs)</li>
<li><code>wheelname_parsing_failure[flyte-long-extension]</code> (2.6 Âµs)</li>
<li><code>wheelname_parsing_failure[flyte-short-extension]</code> (2.6 Âµs)</li>
<li><code>wheelname_tag_compatibility[flyte-long-compatible]</code> (2.6 Âµs)</li>
<li><code>wheelname_tag_compatibility[flyte-long-incompatible]</code> (1.8 Âµs)</li>
<li><code>wheelname_tag_compatibility[flyte-short-compatible]</code> (2.5 Âµs)</li>
<li><code>wheelname_tag_compatibility[flyte-short-incompatible]</code> (1.1 Âµs)</li>
<li><code>resolve_warm_jupyter</code> (366.7 ms)</li>
</ul>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-04-26 19:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/bench/benches/uv.rs</code>:85 on 2024-04-26 19:48</div>
            <div class="timeline-body"><p>We can probably use <code>uv venv</code> here instead of <code>virtualenv</code>, just to remove the external dependency.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-04-26 19:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/bench/benches/uv.rs</code>:85 on 2024-04-26 19:48</div>
            <div class="timeline-body"><p>I think we use <code>virtualenv</code> in the benchmark script just because that&#x27;s designed to benchmark uv against other tools, and so it removes one source of (possible) variance.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on <code>crates/bench/benches/uv.rs</code>:24 on 2024-04-26 20:41</div>
            <div class="timeline-body"><p>Should the benchmarks be run on more/different inputs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> reviewed on 2024-04-26 20:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-26 20:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-26 20:45</div>
            <div class="timeline-body"><p>Hmm it doesn&#x27;t look like the benchmarks are running correctly under Codspeed, the performance report is showing the resolve/install benchmarks running in microseconds.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adriencaccia">@adriencaccia</a> on 2024-04-26 21:03</div>
            <div class="timeline-body"><p>Hey @ibraheemdev, I am a co-founder at @CodSpeedHQ!</p>
<blockquote>
<p>Hmm it doesn&#x27;t look like the benchmarks are running correctly under Codspeed, the performance report is showing the resolve/install benchmarks running in microseconds.</p>
</blockquote>
<p>Yes, running arbitrary executables in a benchmark with CodSpeed will not give out relevant results, as most of the compute is done in a new process that is not instrumented.
It would be best to directly call the underlying functions of the library, without relying on the built executable.</p>
<p>For example, calling https://github.com/astral-sh/uv/blob/2af80c28a8e6a2da755ab78f3ea7b028e8b1510c/crates/uv/src/commands/pip_compile.rs#L52 instead of
https://github.com/ibraheemdev/uv/blob/4ebdc40f60562c05559ac6331abe1a56275e2c8b/crates/bench/benches/uv.rs#L41-L42.</p>
<p>Hope that helps you a bit ğŸ˜ƒ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-26 21:06</div>
            <div class="timeline-body"><p>@adriencaccia Thanks! I suspected we would have to do this eventually, but didn&#x27;t realize CodSpeed didn&#x27;t support processing external commands at all.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-26 21:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">benchmarks</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-29 18:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-29 18:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-29 20:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-04-30 04:20</div>
            <div class="timeline-body"><p>Nice, thank you! Open to giving this a shot. Do we have any sense for what the variance/noise will look like?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adriencaccia">@adriencaccia</a> on 2024-04-30 14:44</div>
            <div class="timeline-body"><blockquote>
<p>Nice, thank you! Open to giving this a shot. Do we have any sense for what the variance/noise will look like?</p>
</blockquote>
<p>I tested it out on my fork at <a href="https://github.com/adriencaccia/uv/pull/1">adriencaccia/uv#1</a>, and I have the following variance results for 101 runs on the same commit:</p>
<pre><code>Found 101 runs for adriencaccia/uv (fca26cde1b54f7467267ca4dff7a9b9cb6f10d29)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              (index)                                                                               â”‚  average  â”‚ standardDeviation â”‚ varianceCoefficient â”‚   range   â”‚ rangeCoefficient â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_tag_compatibility::wheelname_tag_compatibility[flyte-short-incompatible] â”‚ &#x27;1.1 Âµs&#x27;  â”‚     &#x27;27.3 ns&#x27;     â”‚       &#x27;2.5%&#x27;        â”‚ &#x27;55.6 ns&#x27; â”‚      &#x27;5.1%&#x27;      â”‚
â”‚  crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_tag_compatibility::wheelname_tag_compatibility[flyte-short-compatible]  â”‚ &#x27;2.5 Âµs&#x27;  â”‚     &#x27;27.3 ns&#x27;     â”‚       &#x27;1.1%&#x27;        â”‚ &#x27;55.6 ns&#x27; â”‚      &#x27;2.2%&#x27;      â”‚
â”‚  crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_tag_compatibility::wheelname_tag_compatibility[flyte-long-compatible]   â”‚ &#x27;2.6 Âµs&#x27;  â”‚     &#x27;27.3 ns&#x27;     â”‚       &#x27;1.0%&#x27;        â”‚ &#x27;55.6 ns&#x27; â”‚      &#x27;2.1%&#x27;      â”‚
â”‚ crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_tag_compatibility::wheelname_tag_compatibility[flyte-long-incompatible]  â”‚ &#x27;1.8 Âµs&#x27;  â”‚     &#x27;13.6 ns&#x27;     â”‚       &#x27;0.7%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;1.5%&#x27;      â”‚
â”‚    crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing_failure::wheelname_parsing_failure[flyte-short-extension]     â”‚ &#x27;2.6 Âµs&#x27;  â”‚     &#x27;13.6 ns&#x27;     â”‚       &#x27;0.5%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;1.1%&#x27;      â”‚
â”‚     crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing_failure::wheelname_parsing_failure[flyte-long-extension]     â”‚ &#x27;2.6 Âµs&#x27;  â”‚     &#x27;13.6 ns&#x27;     â”‚       &#x27;0.5%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;1.1%&#x27;      â”‚
â”‚            crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing::wheelname_parsing[flyte-short-compatible]            â”‚  &#x27;12 Âµs&#x27;  â”‚     &#x27;13.6 ns&#x27;     â”‚       &#x27;0.1%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;0.2%&#x27;      â”‚
â”‚           crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing::wheelname_parsing[flyte-short-incompatible]           â”‚ &#x27;12.2 Âµs&#x27; â”‚     &#x27;13.6 ns&#x27;     â”‚       &#x27;0.1%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;0.2%&#x27;      â”‚
â”‚           crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_build_platform_tags::build_platform_tags[burntsushi-archlinux]           â”‚ &#x27;6.3 ms&#x27;  â”‚     &#x27;13.6 ns&#x27;     â”‚       &#x27;0.0%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;0.0%&#x27;      â”‚
â”‚           crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing::wheelname_parsing[flyte-long-incompatible]            â”‚ &#x27;26.3 Âµs&#x27; â”‚      &#x27;0 ns&#x27;       â”‚       &#x27;0.0%&#x27;        â”‚   &#x27;0 s&#x27;   â”‚      &#x27;0.0%&#x27;      â”‚
â”‚            crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing::wheelname_parsing[flyte-long-compatible]             â”‚  &#x27;21 Âµs&#x27;  â”‚      &#x27;0 ns&#x27;       â”‚       &#x27;0.0%&#x27;        â”‚   &#x27;0 s&#x27;   â”‚      &#x27;0.0%&#x27;      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>It is fairly stable, so you should be able to set a low regression threshold to around 5% ğŸ™‚</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-30 14:51</div>
            <div class="timeline-body"><p>Awesome, thanks so much Adrien!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-30 15:06</div>
            <div class="timeline-body"><p>Hm I don&#x27;t see the resolver benchmarks there â€” I&#x27;d expect the distribution filename benches to be very stable but the resolver ones are probably less so.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-30 15:10</div>
            <div class="timeline-body"><p>Looks like there&#x27;s something wrong and the resolver benches are missing on the latest commit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-30 15:37</div>
            <div class="timeline-body"><p>I forgot to use the <code>codspeed-criterion-compat</code> shim in the <code>uv</code> benchmarks, but it looks like the crate doesn&#x27;t support async runs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adriencaccia">@adriencaccia</a> on 2024-04-30 16:14</div>
            <div class="timeline-body"><p>@ibraheemdev let me know when you want me to run variance checks again on the new benchmarks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-30 16:16</div>
            <div class="timeline-body"><p>@adriencaccia can you run them now? I&#x27;m also curious why benchmarks seem to be running ~15x slower on CodSpeed than locally, is it using an aggregate time instead of per-run?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adriencaccia">@adriencaccia</a> on 2024-04-30 16:29</div>
            <div class="timeline-body"><blockquote>
<p>@adriencaccia can you run them now?</p>
</blockquote>
<p>Alright, I started them. Will post the results once they are done ğŸ˜‰</p>
<blockquote>
<p>I&#x27;m also curious why benchmarks seem to be running ~15x slower on CodSpeed than locally, is it using an aggregate time instead of per-run?</p>
</blockquote>
<p>This is because we run the code with <code>valgrind</code>, it adds a 4x to 10x overhead, sometimes more. But that is how we get those consistent measures and flamegraphs ğŸ˜‰</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adriencaccia">@adriencaccia</a> on 2024-04-30 16:36</div>
            <div class="timeline-body"><p>Results with the new benchmarks:</p>
<pre><code>Found 101 runs for adriencaccia/uv (7bbc18a361ba078e21186db90b98d6b88b3a8a7c)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                              (index)                                                                               â”‚  average   â”‚ standardDeviation â”‚ varianceCoefficient â”‚   range   â”‚ rangeCoefficient â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                               crates/bench/benches/uv.rs::uv::resolve_warm_black::resolve_warm_black                                               â”‚ &#x27;15.3 ms&#x27;  â”‚    &#x27;527.5 Âµs&#x27;     â”‚       &#x27;3.4%&#x27;        â”‚ &#x27;2.3 ms&#x27;  â”‚     &#x27;15.0%&#x27;      â”‚
â”‚ crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_tag_compatibility::wheelname_tag_compatibility[flyte-short-incompatible] â”‚  &#x27;1.1 Âµs&#x27;  â”‚     &#x27;27.5 ns&#x27;     â”‚       &#x27;2.5%&#x27;        â”‚ &#x27;55.6 ns&#x27; â”‚      &#x27;5.1%&#x27;      â”‚
â”‚                                             crates/bench/benches/uv.rs::uv::resolve_warm_jupyter::resolve_warm_jupyter                                             â”‚ &#x27;366.5 ms&#x27; â”‚     &#x27;4.2 ms&#x27;      â”‚       &#x27;1.1%&#x27;        â”‚ &#x27;22.8 ms&#x27; â”‚      &#x27;6.2%&#x27;      â”‚
â”‚  crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_tag_compatibility::wheelname_tag_compatibility[flyte-short-compatible]  â”‚  &#x27;2.5 Âµs&#x27;  â”‚     &#x27;27.5 ns&#x27;     â”‚       &#x27;1.1%&#x27;        â”‚ &#x27;55.6 ns&#x27; â”‚      &#x27;2.2%&#x27;      â”‚
â”‚  crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_tag_compatibility::wheelname_tag_compatibility[flyte-long-compatible]   â”‚  &#x27;2.6 Âµs&#x27;  â”‚     &#x27;27.5 ns&#x27;     â”‚       &#x27;1.0%&#x27;        â”‚ &#x27;55.6 ns&#x27; â”‚      &#x27;2.1%&#x27;      â”‚
â”‚ crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_tag_compatibility::wheelname_tag_compatibility[flyte-long-incompatible]  â”‚  &#x27;1.9 Âµs&#x27;  â”‚     &#x27;13.7 ns&#x27;     â”‚       &#x27;0.7%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;1.5%&#x27;      â”‚
â”‚    crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing_failure::wheelname_parsing_failure[flyte-short-extension]     â”‚  &#x27;2.6 Âµs&#x27;  â”‚     &#x27;13.7 ns&#x27;     â”‚       &#x27;0.5%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;1.1%&#x27;      â”‚
â”‚     crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing_failure::wheelname_parsing_failure[flyte-long-extension]     â”‚  &#x27;2.6 Âµs&#x27;  â”‚     &#x27;13.7 ns&#x27;     â”‚       &#x27;0.5%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;1.1%&#x27;      â”‚
â”‚            crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing::wheelname_parsing[flyte-short-compatible]            â”‚  &#x27;12 Âµs&#x27;   â”‚     &#x27;13.7 ns&#x27;     â”‚       &#x27;0.1%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;0.2%&#x27;      â”‚
â”‚           crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing::wheelname_parsing[flyte-short-incompatible]           â”‚ &#x27;12.2 Âµs&#x27;  â”‚     &#x27;13.7 ns&#x27;     â”‚       &#x27;0.1%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;0.2%&#x27;      â”‚
â”‚           crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_build_platform_tags::build_platform_tags[burntsushi-archlinux]           â”‚  &#x27;6.3 ms&#x27;  â”‚     &#x27;13.7 ns&#x27;     â”‚       &#x27;0.0%&#x27;        â”‚ &#x27;27.8 ns&#x27; â”‚      &#x27;0.0%&#x27;      â”‚
â”‚           crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing::wheelname_parsing[flyte-long-incompatible]            â”‚ &#x27;26.3 Âµs&#x27;  â”‚      &#x27;0 ns&#x27;       â”‚       &#x27;0.0%&#x27;        â”‚   &#x27;0 s&#x27;   â”‚      &#x27;0.0%&#x27;      â”‚
â”‚            crates/bench/benches/distribution_filename.rs::distribution_filename::benchmark_wheelname_parsing::wheelname_parsing[flyte-long-compatible]             â”‚  &#x27;21 Âµs&#x27;   â”‚      &#x27;0 ns&#x27;       â”‚       &#x27;0.0%&#x27;        â”‚   &#x27;0 s&#x27;   â”‚      &#x27;0.0%&#x27;      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>Indeed, it seems that <code>crates/bench/benches/uv.rs::uv::resolve_warm_black::resolve_warm_black</code> is a bit more inconsistent</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-30 16:38</div>
            <div class="timeline-body"><p>Maybe we remove the Black test? It seems like the variance is way higher than the Jupyter test.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-30 17:21</div>
            <div class="timeline-body"><p>I wonder why that is. It shouldn&#x27;t be that different? (as far as variance)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-30 17:24</div>
            <div class="timeline-body"><p>@zanieb It&#x27;s probably that the actual resolve step is faster, so the benchmark is more influenced by other factors (file I/O, etc.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-30 17:39</div>
            <div class="timeline-body"><p>I&#x27;m going to go ahead and merge this with just the jupyter benchmark. We&#x27;ll see how consistent/useful the reports are.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-30 17:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-04-30 17:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:45:05 UTC
    </footer>
</body>
</html>
