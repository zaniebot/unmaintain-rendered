<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>implement `--invert` for `pip tree` - astral-sh/uv #4621</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>implement <code>--invert</code> for <code>pip tree</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/4621">#4621</a>
        opened by <a href="https://github.com/ChannyClaus">@ChannyClaus</a>
        on 2024-06-28 15:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/ChannyClaus">@ChannyClaus</a> on 2024-06-28 15:09</div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>partially resolves https://github.com/astral-sh/uv/issues/4439</p>
<!-- What's the purpose of the change? What does it do, and why? -->

<h2>Test Plan</h2>
<p>existing tests pass + added a couple of new tests with <code>--invert</code>.</p>
<!-- How was it tested? -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on <code>crates/uv/src/commands/pip/tree.rs</code>:202 on 2024-06-28 16:37</div>
            <div class="timeline-body"><p>You can use <code>unwrap_or_default</code> here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on <code>crates/uv/tests/pip_tree.rs</code>:294 on 2024-06-28 16:38</div>
            <div class="timeline-body"><p>Can you add the non-inverted output to these tests too so I can see the difference?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> reviewed on 2024-06-28 16:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ChannyClaus">@ChannyClaus</a> reviewed on 2024-06-28 17:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ChannyClaus">@ChannyClaus</a> on <code>crates/uv/tests/pip_tree.rs</code>:294 on 2024-06-28 17:29</div>
            <div class="timeline-body"><p>the new test is exactly the same as the existing test https://github.com/astral-sh/uv/blob/main/crates/uv/tests/pip_tree.rs#L127-L171 with the only difference <code>--invert</code> (same for the other one)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ChannyClaus">@ChannyClaus</a> on <code>crates/uv/src/commands/pip/tree.rs</code>:202 on 2024-06-28 17:34</div>
            <div class="timeline-body"><p>seems like this gives</p>
<pre><code>error[E0277]: the trait bound `&amp;Vec&lt;PackageName&gt;: std::default::Default` is not satisfied
    --&gt; crates/uv/src/commands/pip/tree.rs:206:14
     |
206  |             .unwrap_or_default()
     |              ^^^^^^^^^^^^^^^^^ the trait `std::default::Default` is not implemented for `&amp;Vec&lt;PackageName&gt;`
</code></pre>
<p>maybe i'm using it wrong?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ChannyClaus">@ChannyClaus</a> reviewed on 2024-06-28 17:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> reviewed on 2024-06-28 19:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on <code>crates/uv/src/commands/pip/tree.rs</code>:202 on 2024-06-28 19:14</div>
            <div class="timeline-body"><p>Ah, sorry. You could use <code>.iter().flatten()</code> instead, but this is fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> reviewed on 2024-06-28 22:18</div>
            <div class="timeline-body"><p>Can you add a test to see how <code>--invert</code> interacts with <code>--no-dedupe</code>? After that this looks good to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ChannyClaus">@ChannyClaus</a> on 2024-06-29 04:06</div>
            <div class="timeline-body"><p>all done üåµ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Peiffap">@Peiffap</a> on 2024-06-29 23:44</div>
            <div class="timeline-body"><p>I haven't looked at the implementation in detail, but is there a reason we want this to be <code>--invert</code> instead of <code>--reverse</code> like in <code>pipdeptree</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ChannyClaus">@ChannyClaus</a> on 2024-06-30 00:36</div>
            <div class="timeline-body"><blockquote>
<p>I haven't looked at the implementation in detail, but is there a reason we want this to be <code>--invert</code> instead of <code>--reverse</code> like in <code>pipdeptree</code>?</p>
</blockquote>
<p>no reason, i just followed the naming convention in <code>cargo tree</code>, but if there's an overall preference for <code>--reverse</code> i'm happy to rename üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-30 03:38</div>
            <div class="timeline-body"><p>I kind of find <code>--invert</code> clearer, but we can provide a hidden alias <code>--reverse</code> for pipdeptree compatibility.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> approved on 2024-07-01 15:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @ibraheemdev on 2024-07-01 15:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @ibraheemdev on 2024-07-01 16:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ibraheemdev on 2024-07-01 16:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:48:47 UTC
    </footer>
</body>
</html>
