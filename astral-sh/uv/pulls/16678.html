<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `uv workspace dir` command - astral-sh/uv #16678</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>uv workspace dir</code> command</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/16678">#16678</a>
        opened by <a href="https://github.com/mikaylathompson">@mikaylathompson</a>
        on 2025-11-11 00:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/mikaylathompson">@mikaylathompson</a> on 2025-11-11 00:30</div>
            <div class="timeline-body"><p>Addresses https://github.com/astral-sh/uv/issues/13636</p>
<p>Prints the path to the workspace root by default, and any of the child packages if requested.</p>
<p>It has a preview flag like <code>workspace metadata</code>, called <code>workspace-dir</code>.</p>
<h2>Summary</h2>
<pre><code>─&gt; uv workspace dir
/Users/mikayla/code/uv/dev-envs

─&gt; uv workspace dir --package foo-proj
/Users/mikayla/code/uv/dev-envs/foo-proj

─&gt; uv workspace dir --package bar-proj
error: Package `bar-proj` not found in workspace.
</code></pre>
<h2>Test Plan</h2>
<p>Unit tests added.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @mikaylathompson on 2025-11-11 16:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-11 16:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/workspace/dir.rs</code>:37 on 2025-11-11 16:50</div>
            <div class="timeline-body"><p>I'm not sure if we should use portable paths here — that'll display a Unix-style path on Windows which matters for something like a TOML file or JSON output but may be weird in this context.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-11 16:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/workspace/dir.rs</code>:22 on 2025-11-11 16:50</div>
            <div class="timeline-body"><p>I think this should be a separate preview flag so we can stabilize things separately</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-11 16:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/lib.rs</code>:1742 on 2025-11-11 16:51</div>
            <div class="timeline-body"><p>I think it's standard to unpack the args here, I don't think we want to pass the CLI type into implementations (just to be consistent)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/workspace_dir.rs</code>:11 on 2025-11-11 16:54</div>
            <div class="timeline-body"><p>We usually read the manifest directory</p>
<p>https://github.com/astral-sh/uv/blob/8b479efd2fd03d5f92ce68e9cd98cf27a23ebc82/crates/uv/tests/it/common/mod.rs#L621-L628</p>
<p>I'd move that part out into a helper in <code>it/common/mod.rs</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-11 16:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-11 16:55</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:6873 on 2025-11-11 16:55</div>
            <div class="timeline-body"><p>I think this needs a comment for the help menu</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-11 16:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:6856 on 2025-11-11 16:57</div>
            <div class="timeline-body"><p>I'd say a bit more</p>
<pre><code class="language-suggestion">    /// Display the path of a workspace member.
    ///
    /// By default, the path to the workspace root directory is displayed.
    /// The `--package` option can be used to display the path to a workspace member instead.
    ///
    /// If used outside of a workspace, i.e., if a `pyproject.toml` cannot be found, uv will exit with an error.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-11 16:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:6853 on 2025-11-11 16:57</div>
            <div class="timeline-body"><p>(My own doc here is bad, I should fix that)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-11 16:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/workspace/dir.rs</code>:44 on 2025-11-11 16:57</div>
            <div class="timeline-body"><p>I wonder if we should use color here? I think we usually use a color for paths.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-11-11 16:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @zanieb on 2025-11-11 16:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @zanieb on 2025-11-11 16:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mikaylathompson">@mikaylathompson</a> reviewed on 2025-11-11 17:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/mikaylathompson">@mikaylathompson</a> on <code>crates/uv/src/commands/workspace/dir.rs</code>:44 on 2025-11-11 17:02</div>
            <div class="timeline-body"><p>Oh, good to know, I'll dig around some other commands and try to match that</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mikaylathompson">@mikaylathompson</a> reviewed on 2025-11-11 17:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/mikaylathompson">@mikaylathompson</a> on <code>crates/uv/src/commands/workspace/dir.rs</code>:37 on 2025-11-11 17:19</div>
            <div class="timeline-body"><p>Ahh, okay, I had not thought about why the JSON behavior would be different, but this makes sense. I'm pulling in more of the approach from <code>python dir</code> and <code>tool dir</code> to update this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-11-11 17:36</div>
            <div class="timeline-body"><!-- __CODSPEED_PERFORMANCE_REPORT_COMMENT__ -->

<h2><a href="https://codspeed.io/astral-sh/uv/branches/mikayla%2Fworkspace-dir?utm_source=github&amp;utm_medium=comment&amp;utm_content=header">CodSpeed Performance Report</a></h2>
<h3>Merging #16678 will <strong>not alter performance</strong></h3>
<p><sub>Comparing <code>mikayla/workspace-dir</code> (e249d84) with <code>main</code> (63ab247)</sub></p>
<h3>Summary</h3>
<p><code>✅ 6</code> untouched</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv/src/commands/workspace/dir.rs</code>:43 on 2025-11-11 18:34</div>
            <div class="timeline-body"><p>This code compiles without the type cast:</p>
<pre><code class="language-suggestion">    let dir = match package_name {
        None =&gt; workspace.install_path(),
        Some(package) =&gt; {
            if let Some(p) = workspace.packages().get(&amp;package) {
                p.root()
            } else {
                bail!(&quot;Package `{package}` not found in workspace.&quot;)
            }
        }
    };
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv/tests/it/workspace_dir.rs</code>:30 on 2025-11-11 18:35</div>
            <div class="timeline-body"><p>nit:</p>
<pre><code class="language-suggestion">/// Workspace dir output when run with `--package`.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-11-11 18:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @mikaylathompson on 2025-11-11 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @mikaylathompson on 2025-11-11 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-11-11 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`workspace dir` command" to "Add `uv workspace dir` command" by @zanieb on 2025-11-11 19:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:32 UTC
    </footer>
</body>
</html>
