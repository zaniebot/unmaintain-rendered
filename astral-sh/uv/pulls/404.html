<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add an option to use Resolvo in lieu of PubGrub - astral-sh/uv #404</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add an option to use Resolvo in lieu of PubGrub</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/404">#404</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-11-13 01:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body">Summary
<p>We&#x27;re interested in exploring <a href="https://github.com/mamba-org/resolvo">resolvo</a>, to give us a point of comparison for <a href="https://github.com/pubgrub-rs/pubgrub">pubgrub-rs</a>. This PR implements a resolver on top of our existing infrastructure, but using resolvo instead of pubgrub-rs.</p>
<p>Specifically, you can now swap out the resolver via the CLI, like so:</p>
<pre><code>cargo run -p puffin-cli -- pip-compile ./scripts/benchmarks/requirements.in --resolver pubgrub
cargo run -p puffin-cli -- pip-compile ./scripts/benchmarks/requirements.in --resolver resolvo
</code></pre>
<p>On <code>./scripts/benchmarks/requirements.in</code>, they produce identical resolutions.</p>
<p>The resolvo-based version is far less fully-featured, since I omitted everything that seemed unnecessary for comparing it to pubgrub-rs. Specifically, the resolvo-based resolver does <em>not</em> support:</p>
<ul>
<li>Pre-fetching. In the PubGrub-based resolver, we aggressively pre-fetch metadata (e.g., when we select a package version, we go ahead and fetch the package-level metadata for all of its dependencies). That&#x27;s harder to do in Resolvo-based resolver, so I just ignored it for now. <strong>As such, we should really only compare cached resolutions for now.</strong></li>
<li>URL dependencies.</li>
<li>Git dependencies.</li>
<li>Pre-release handling (instead, it filters out all pre-releases).</li>
<li>Resolution modes (it always uses the highest-matching version).</li>
</ul>
<p>It does, however, support:</p>
<ul>
<li>Source distributions (yay).</li>
<li>Extras.</li>
</ul>
<p>I don&#x27;t plan to merge this (and am not even looking for a review -- this is more intended to fuel experimentation, so I&#x27;m opening it up here for visibility), though I think it did lead to some good generalizations that I&#x27;ll likely pull-in via separate PRs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-13 14:34</div>
            <div class="timeline-body"><p>(Test failures are expected. I simplified the output format to make it compatible between the two tools.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-04 22:50</div>
            <div class="timeline-body"><p>Let&#x27;s close for now? Relatively stale at this point.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-05 01:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:42:40 UTC
    </footer>
</body>
</html>
