<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow switching out the resolver's IO - astral-sh/uv #517</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow switching out the resolver's IO</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/517">#517</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2023-11-29 19:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-29 19:54</div>
            <div class="timeline-body"><p>I'm working off of @konstin's commit here to implement arbitrary unsat test cases for the resolver.</p>
<p>The entirety of the resolver's io are two functions: Get the version map for a package (PEP 440 version -&gt; distribution) and get the metadata for a distribution. A new trait <code>ResolverIo</code> abstracts these two away and allows replacing the real network requests e.g. with stored responses (https://github.com/pradyunsg/pip-resolver-benchmarks/blob/main/scenarios/pyrax_198.json).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/puffin-resolver/src/resolver.rs</code>:46 on 2023-11-29 20:28</div>
            <div class="timeline-body"><p>More commonly I've sen this kind of thing referred to as (e.g.) <code>ResolverProvider</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-11-29 20:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-30 21:06</div>
            <div class="timeline-body"><p>I'm leaving this as a draft while I build on top of it, I'd like a working test case that uses a stubbed resolver. Unless we want it immediately in which case it's ready... it may be easier to coordinate by merging.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-12-04 07:47</div>
            <div class="timeline-body"><p>I'd merge the provider refactor to avoid merge conflicts</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2023-12-06 17:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-resolver/src/resolver.rs</code>:171 on 2023-12-06 17:18</div>
            <div class="timeline-body"><p>This should be <code>provider</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-resolver/src/resolver.rs</code>:193 on 2023-12-06 17:19</div>
            <div class="timeline-body"><p>Here too it should be provider.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2023-12-06 17:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2023-12-06 17:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2023-12-06 17:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-12-06 17:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 15:45:06 UTC
    </footer>
</body>
</html>
