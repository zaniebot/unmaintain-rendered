<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `METADATA.json` and `WHEEL.json` in uv build backend - astral-sh/uv #15510</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>METADATA.json</code> and <code>WHEEL.json</code> in uv build backend</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/15510">#15510</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-08-25 08:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>https://discuss.python.org/t/pep-819-json-package-metadata/105558</p>
<p>Add an experimental JSON format for METADATA and WHEEL files in the uv build backend to have a reference what it would look like and to demonstrate that the actual change is just a few lines, how much easier it is than the existing email header format.</p>
<p>The change is overwhelmingly adding the preview feature as it's the first preview item in the build backend, writing the actual JSON is only a couple of lines.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @konstin on 2025-08-25 08:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">build-backend</span> added by @konstin on 2025-08-25 08:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-08-25 08:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-build-backend/src/lib.rs</code>:790 on 2025-08-25 08:36</div>
            <div class="timeline-body"><p>We're now writing a trailing newline.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add `METADATA.json` and `WHEEL.json` to build backend" to "Add `METADATA.json` and `WHEEL.json` in uv build backend" by @konstin on 2025-08-25 08:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-08-26 15:32</div>
            <div class="timeline-body"><p>Before merging, we need to extend this to include the full transformations from https://peps.python.org/pep-0566/#json-compatible-metadata</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @konstin on 2026-01-06 12:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2026-01-06 12:09</div>
            <div class="timeline-body"><p>PEP 819 is up, so I'd like to merge this as a preview feature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @EliteTK by @konstin on 2026-01-09 12:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/EliteTK">@EliteTK</a> on <code>crates/uv-build/src/main.rs</code>:50 on 2026-01-09 12:28</div>
            <div class="timeline-body"><p>Reads like the variable name itself is not valid UTF-8.</p>
<p>Maybe (matches the error below)</p>
<pre><code class="language-suggestion">                format!(&quot;Invalid UTF-8 in `{}`&quot;, EnvVars::UV_PREVIEW_FEATURES)
</code></pre>
<p>Or (might not compile as is, might want <code>{:?}</code> instead of <code>.display()</code>):</p>
<pre><code class="language-suggestion">                format!(&quot;Invalid UTF-8 in `{}`: `{}`&quot;, EnvVars::UV_PREVIEW_FEATURES, preview_features.display())
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/EliteTK">@EliteTK</a> on <code>crates/uv-build-backend/src/lib.rs</code>:1826 on 2026-01-09 12:43</div>
            <div class="timeline-body"><p>We should check their contents too maybe?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/EliteTK">@EliteTK</a> on <code>crates/uv-pypi-types/src/metadata/metadata23.rs</code>:322 on 2026-01-09 13:35</div>
            <div class="timeline-body"><p>I'd say leave it as is, but it feels a bit odd to be using <code>Display</code> to handle serialisation for machines rather than humans.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/EliteTK">@EliteTK</a> on <code>crates/uv-pypi-types/src/metadata/metadata23.rs</code>:359 on 2026-01-09 13:47</div>
            <div class="timeline-body"><p>nit: I think this parsing and serialisation belongs in a <code>ProjectUrl</code> type. But I can see how that would be a bit of churn due to the overarching need for <code>IndexMap</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/EliteTK">@EliteTK</a> approved on 2026-01-09 13:51</div>
            <div class="timeline-body"><p>Fun fact:</p>
<p>This PR adds 88 (118) new instances of the word &quot;preview&quot; to uv. For a grand total of 1525 (1935) instances. (Counts in brackets are when just searching for &quot;preview&quot; rather than for words.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2026-01-14 16:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-build-backend/src/lib.rs</code>:1826 on 2026-01-14 16:44</div>
            <div class="timeline-body"><p>Added a separate test</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2026-01-14 18:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2026-01-14 18:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2026-01-14 18:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-14 19:57:05 UTC
    </footer>
</body>
</html>
