<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Rust crate tokio to v1.38.0 - astral-sh/uv #3976</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update Rust crate tokio to v1.38.0</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/3976">#3976</a>
        opened by <a href="https://github.com/renovate">@renovate</a>
        on 2024-06-03 01:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/renovate">@renovate</a></div>
            <div class="timeline-body"><p><a href="https://renovatebot.com"><img src="https://app.renovatebot.com/images/banner.svg" alt="Mend Renovate"></a></p>
<p>This PR contains the following updates:</p>
<p>| Package | Type | Update | Change |
|---|---|---|---|
| <a href="https://tokio.rs">tokio</a> (<a href="https://togithub.com/tokio-rs/tokio">source</a>) | dev-dependencies | minor | <code>1.37.0</code> -&gt; <code>1.38.0</code> |
| <a href="https://tokio.rs">tokio</a> (<a href="https://togithub.com/tokio-rs/tokio">source</a>) | workspace.dependencies | minor | <code>1.37.0</code> -&gt; <code>1.38.0</code> |</p>
<hr>
Release Notes

tokio-rs/tokio (tokio)

<a href="https://togithub.com/tokio-rs/tokio/releases/tag/tokio-1.38.0"><code>v1.38.0</code></a>: Tokio v1.38.0
<p><a href="https://togithub.com/tokio-rs/tokio/compare/tokio-1.37.0...tokio-1.38.0">Compare Source</a></p>
<p>This release marks the beginning of stabilization for runtime metrics. It
stabilizes <code>RuntimeMetrics::worker_count</code>. Future releases will continue to
stabilize more metrics.</p>
Added
<ul>
<li>fs: add <code>File::create_new</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6573">#â€‹6573</a>)</li>
<li>io: add <code>copy_bidirectional_with_sizes</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6500">#â€‹6500</a>)</li>
<li>io: implement <code>AsyncBufRead</code> for <code>Join</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6449">#â€‹6449</a>)</li>
<li>net: add Apple visionOS support (<a href="https://togithub.com/tokio-rs/tokio/pull/6465">#â€‹6465</a>)</li>
<li>net: implement <code>Clone</code> for <code>NamedPipeInfo</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6586">#â€‹6586</a>)</li>
<li>net: support QNX OS (<a href="https://togithub.com/tokio-rs/tokio/pull/6421">#â€‹6421</a>)</li>
<li>sync: add <code>Notify::notify_last</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6520">#â€‹6520</a>)</li>
<li>sync: add <code>mpsc::Receiver::{capacity,max_capacity}</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6511">#â€‹6511</a>)</li>
<li>sync: add <code>split</code> method to the semaphore permit (<a href="https://togithub.com/tokio-rs/tokio/pull/6472">#â€‹6472</a>, <a href="https://togithub.com/tokio-rs/tokio/pull/6478">#â€‹6478</a>)</li>
<li>task: add <code>tokio::task::join_set::Builder::spawn_blocking</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6578">#â€‹6578</a>)</li>
<li>wasm: support rt-multi-thread with wasm32-wasi-preview1-threads (<a href="https://togithub.com/tokio-rs/tokio/pull/6510">#â€‹6510</a>)</li>
</ul>
Changed
<ul>
<li>macros: make <code>#[tokio::test]</code> append <code>#[test]</code> at the end of the attribute list (<a href="https://togithub.com/tokio-rs/tokio/pull/6497">#â€‹6497</a>)</li>
<li>metrics: fix <code>blocking_threads</code> count (<a href="https://togithub.com/tokio-rs/tokio/pull/6551">#â€‹6551</a>)</li>
<li>metrics: stabilize <code>RuntimeMetrics::worker_count</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6556">#â€‹6556</a>)</li>
<li>runtime: move task out of the <code>lifo_slot</code> in <code>block_in_place</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6596">#â€‹6596</a>)</li>
<li>runtime: panic if <code>global_queue_interval</code> is zero (<a href="https://togithub.com/tokio-rs/tokio/pull/6445">#â€‹6445</a>)</li>
<li>sync: always drop message in destructor for oneshot receiver (<a href="https://togithub.com/tokio-rs/tokio/pull/6558">#â€‹6558</a>)</li>
<li>sync: instrument <code>Semaphore</code> for task dumps (<a href="https://togithub.com/tokio-rs/tokio/pull/6499">#â€‹6499</a>)</li>
<li>sync: use FIFO ordering when waking batches of wakers (<a href="https://togithub.com/tokio-rs/tokio/pull/6521">#â€‹6521</a>)</li>
<li>task: make <code>LocalKey::get</code> work with Clone types (<a href="https://togithub.com/tokio-rs/tokio/pull/6433">#â€‹6433</a>)</li>
<li>tests: update nix and mio-aio dev-dependencies (<a href="https://togithub.com/tokio-rs/tokio/pull/6552">#â€‹6552</a>)</li>
<li>time: clean up implementation (<a href="https://togithub.com/tokio-rs/tokio/pull/6517">#â€‹6517</a>)</li>
<li>time: lazily init timers on first poll (<a href="https://togithub.com/tokio-rs/tokio/pull/6512">#â€‹6512</a>)</li>
<li>time: remove the <code>true_when</code> field in <code>TimerShared</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6563">#â€‹6563</a>)</li>
<li>time: use sharding for timer implementation (<a href="https://togithub.com/tokio-rs/tokio/pull/6534">#â€‹6534</a>)</li>
</ul>
Fixed
<ul>
<li>taskdump: allow building taskdump docs on non-unix machines (<a href="https://togithub.com/tokio-rs/tokio/pull/6564">#â€‹6564</a>)</li>
<li>time: check for overflow in <code>Interval::poll_tick</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6487">#â€‹6487</a>)</li>
<li>sync: fix incorrect <code>is_empty</code> on mpsc block boundaries (<a href="https://togithub.com/tokio-rs/tokio/pull/6603">#â€‹6603</a>)</li>
</ul>
Documented
<ul>
<li>fs: rewrite file system docs (<a href="https://togithub.com/tokio-rs/tokio/pull/6467">#â€‹6467</a>)</li>
<li>io: fix <code>stdin</code> documentation (<a href="https://togithub.com/tokio-rs/tokio/pull/6581">#â€‹6581</a>)</li>
<li>io: fix obsolete reference in <code>ReadHalf::unsplit()</code> documentation (<a href="https://togithub.com/tokio-rs/tokio/pull/6498">#â€‹6498</a>)</li>
<li>macros: render more comprehensible documentation for <code>select!</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6468">#â€‹6468</a>)</li>
<li>net: add missing types to module docs (<a href="https://togithub.com/tokio-rs/tokio/pull/6482">#â€‹6482</a>)</li>
<li>net: fix misleading <code>NamedPipeServer</code> example (<a href="https://togithub.com/tokio-rs/tokio/pull/6590">#â€‹6590</a>)</li>
<li>sync: add examples for <code>SemaphorePermit</code>, <code>OwnedSemaphorePermit</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6477">#â€‹6477</a>)</li>
<li>sync: document that <code>Barrier::wait</code> is not cancel safe (<a href="https://togithub.com/tokio-rs/tokio/pull/6494">#â€‹6494</a>)</li>
<li>sync: explain relation between <code>watch::Sender::{subscribe,closed}</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6490">#â€‹6490</a>)</li>
<li>task: clarify that you can&#x27;t abort <code>spawn_blocking</code> tasks (<a href="https://togithub.com/tokio-rs/tokio/pull/6571">#â€‹6571</a>)</li>
<li>task: fix a typo in doc of <code>LocalSet::run_until</code> (<a href="https://togithub.com/tokio-rs/tokio/pull/6599">#â€‹6599</a>)</li>
<li>time: fix test-util requirement for pause and resume in docs (<a href="https://togithub.com/tokio-rs/tokio/pull/6503">#â€‹6503</a>)</li>
</ul>


<hr>
Configuration
<p>ðŸ“… <strong>Schedule</strong>: Branch creation - &quot;before 4am on Monday&quot; (UTC), Automerge - At any time (no schedule defined).</p>
<p>ðŸš¦ <strong>Automerge</strong>: Disabled by config. Please merge this manually once you are satisfied.</p>
<p>â™» <strong>Rebasing</strong>: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.</p>
<p>ðŸ”• <strong>Ignore</strong>: Close this PR and you won&#x27;t be reminded about these updates again.</p>
<hr>
<ul>
<li>[ ] If you want to rebase/retry this PR, check this box</li>
</ul>
<hr>
<p>This PR has been generated by <a href="https://www.mend.io/free-developer-tools/renovate/">Mend Renovate</a>. View repository job log <a href="https://developer.mend.io/github/astral-sh/uv">here</a>.</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/renovate[bot]">@renovate[bot]</a> on 2024-06-03 01:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-03 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-03 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-03 01:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:45:40 UTC
    </footer>
</body>
</html>
