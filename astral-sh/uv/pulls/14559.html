<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enable system keyring integration via `--keyring-provider native` - astral-sh/uv #14559</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Enable system keyring integration via `--keyring-provider native`</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/14559">#14559</a>
        opened by <a href="https://github.com/jtfmumm">@jtfmumm</a>
        on 2025-07-11 08:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/jtfmumm">@jtfmumm</a> on 2025-07-11 08:26</div>
            <div class="timeline-body"><p>This PR uses the <code>uv-keyring</code> crate vendored in #14725 to automatically integrate with the system keyring when the keyring provider is set to &quot;native&quot;.</p>
<p>When this backend is enabled, uv auth middleware will attempt to retrieve missing credentials from the system keyring. It will also store index credentials in the system keyring upon successful authentication, enabling users to provide their credentials for an index once and successfully authenticate on future invocations (though you must currently still provide a username on future invocations, see #10866).</p>
<p>Credentials are stored in the system keyring for a &quot;service&quot;/username pair. For the service, this currently prefixes the index URL with <code>uv-credentials:</code>. This prefix could help prevent collisions but would also be useful for determining which keyring credentials have been set by uv. Note that this is using the index URL rather than the index name for the service.</p>
<p>Left to do:</p>
<ul>
<li>Possibly put automatic storage of credentials behind a <code>--preview</code> flag, unless we think it's enough that you must explicitly configure a <code>native</code> keyring provider (we've discussed making it the default, but that's not the behavior here)</li>
</ul>
<p>Depends on #14725.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jtfmumm">@jtfmumm</a> on <code>crates/uv-auth/src/keyring.rs</code>:56 on 2025-07-11 08:27</div>
            <div class="timeline-body"><p>We could extend this to the Python <code>keyring</code> as well, but for this PR I've limited the scope to the new <code>native</code> backend.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jtfmumm">@jtfmumm</a> on <code>crates/uv-auth/src/middleware.rs</code>:401 on 2025-07-11 08:39</div>
            <div class="timeline-body"><p>This is currently only storing credentials on successful authentication if this is an index URL.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jtfmumm">@jtfmumm</a> reviewed on 2025-07-11 08:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @jtfmumm on 2025-08-07 17:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jtfmumm">@jtfmumm</a> on 2025-09-02 11:41</div>
            <div class="timeline-body"><p>Closed in favor of #15539</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jtfmumm on 2025-09-02 11:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 06:38:42 UTC
    </footer>
</body>
</html>
