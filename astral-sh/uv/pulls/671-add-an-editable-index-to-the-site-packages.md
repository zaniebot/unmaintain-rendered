```yaml
number: 671
title: Add an editable index to the site-packages registry
type: pull_request
state: merged
author: charliermarsh
labels: []
assignees: []
merged: true
base: main
head: charlie/identify-editables
created_at: 2023-12-17T03:33:50Z
updated_at: 2023-12-17T03:44:37Z
url: https://github.com/astral-sh/uv/pull/671
synced_at: 2026-01-10T15:44:44Z
```

# Add an editable index to the site-packages registry

---

_Pull request opened by @charliermarsh on 2023-12-17 03:33_

This PR modifies `SitePackages` to store all distributions in a flat vector, and maintain two indexes (hash maps) from "per-element data for an element in the vector" to "index of that element". This enables us to maintain a map on both package name and editable URL.

---

_Comment by @charliermarsh on 2023-12-17 03:37_

I don't know if this is the right tradeoff, since the number of editables will tend to be quite small vs. the number of total packages, and we now pay for more operations to maintain the hash map. But it also doesn't feel great to iterate over _all_ distributions for every lookup, nor does it feel good to (e.g.) lazily initialize a hash map over the editables, since we actually mutate this data structure and then need a way to keep them in-sync.


---

_Merged by @charliermarsh on 2023-12-17 03:44_

---

_Closed by @charliermarsh on 2023-12-17 03:44_

---

_Branch deleted on 2023-12-17 03:44_

---
