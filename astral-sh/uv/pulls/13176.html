<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use `upload-time` rather than `upload_time` in `uv.lock` - astral-sh/uv #13176</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use <code>upload-time</code> rather than <code>upload_time</code> in <code>uv.lock</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/13176">#13176</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2025-04-28 13:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body">Summary
<p>In <a href="https://github.com/astral-sh/uv/pull/12968">astral-sh/uv#12968</a>, we added support for upload time to <code>uv.lock</code>, but stylized as <code>upload_time</code>. The other keys in <code>uv.lock</code> use kebab casing, as in common in Python formats, so this really should&#x27;ve been <code>upload-time</code>. I want to change it ASAP to minimize churn for users. Any users that already upgraded will of course experience churn in their files a second time. But if we don&#x27;t change it now, we&#x27;ll only increase the surface area of affected users.</p>
<p>So, this PR uses <code>upload-time</code> instead, but continues reading <code>upload_time</code> to make it non-breaking.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/BurntSushi">@BurntSushi</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-28 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/Gankra">@Gankra</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-28 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-28 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-28 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> approved on 2025-04-28 13:41</div>
            <div class="timeline-body"><p>hmm does this need a lock version bump? a previous version of uv will fail to parse <code>upload-time</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-28 13:50</div>
            <div class="timeline-body"><p>I think a previous version will just ignore it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2025-04-28 13:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-04-28 13:51</div>
            <div class="timeline-body"><p>Yeah, as long as the field being missing on a version that knows about the field is fine, then this is fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-04-28 13:53</div>
            <div class="timeline-body"><p>Yeah versions of <code>uv</code> before <code>upload_time</code> will ignore. Versions of <code>uv</code> that know about <code>upload_time</code> but not <code>upload-time</code> will read <code>upload_time</code> but ignore <code>upload-time</code>.</p>
<p>I think the main &quot;bad&quot; thing that can happen is when multiple versions of <code>uv</code> are used to operate on the same lock file. So a newer version of <code>uv</code> with this change would write <code>upload-time</code>, but an older version would ignore that and then probably write <code>upload_time</code>. So then they would ping-pong. But other than that churn, I don&#x27;t think anything bad can happen.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-28 14:27</div>
            <div class="timeline-body"><p>Yeah confirmed old versions can read this (they just ignore it). It&#x27;s only used in the PEP 751 export, so I think that&#x27;s ok.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-28 15:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-28 15:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-04-28 15:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dimaqq">@dimaqq</a> on 2025-05-01 07:12</div>
            <div class="timeline-body"><p>What you probably have not anticipated are lock files checked into version control, where one developer uses slightly older and another slightly newer version of <code>uv</code> and the lock files goes through a ping-pong of <code>-</code> and <code>_</code> for a while.</p>
<p>Then again, this pushes folks to upgrade, that it&#x27;s a win? ðŸ˜†</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Viicos">@Viicos</a> on 2025-05-01 16:06</div>
            <div class="timeline-body"><p>Maybe it&#x27;s worth adding a note in the changelog whenever the lock file&#x27;s version/revision is bumped, together with these kind of changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-01 16:07</div>
            <div class="timeline-body"><p>@dimaqq we did consider that, see <a href="https://github.com/astral-sh/uv/pull/13176">astral-sh/uv#13176</a>#issuecomment-2835330647</p>
<p>@Viicos can you share more about what you want to see in the changelog and how it would help?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Viicos">@Viicos</a> on 2025-05-01 16:12</div>
            <div class="timeline-body"><p>Thanks for answering @zanieb,</p>
<p>in our case we have <code>tool.uv.required-version</code> set in our pyproject, so that all members of the team use the same uv version (or at least the same minimum version). We don&#x27;t have any automated setup to update it but I regularly watch for new uv releases, and so if something like &quot;warning: this uv version changes the lockfile output&quot; is added in the release notes, I can easily catch it and bump our minimum version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-01 17:22</div>
            <div class="timeline-body"><p>Alright. Maybe we can add a dedicated &quot;Lockfile&quot; section â€” I&#x27;m not sure. We really try to avoid any churn here though, so it should be rare.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/michelhe">@michelhe</a> on 2025-05-05 11:46</div>
            <div class="timeline-body"><p>Yeah, we also experienced the format inconsistency issues when working against a committed <code>uv.lock</code> file due to every developer having a different version of uv and used <code>tool.uv.required-version</code> to force everyone to upgrade.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:52:02 UTC
    </footer>
</body>
</html>
