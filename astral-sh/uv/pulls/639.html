<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Preserve verbatim URLs - astral-sh/uv #639</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Preserve verbatim URLs</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/639">#639</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-12-13 21:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR adds a <code>VerbatimUrl</code> struct to preserve verbatim URLs throughout the resolution and installation pipeline. In short, alongside the parsed <code>Url</code>, we also keep the URL as written by the user. This enables us to display the URL exactly as written by the user, rather than the serialized path that we use internally.</p>
<p>This will be especially useful once we start expanding environment variables since, at that point, we'll be able to write the version of the URL that includes the <em>unexpected</em> environment variable to the output file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/pep508-rs/src/verbatim_url.rs</code>:42 on 2023-12-13 21:47</div>
            <div class="timeline-body"><p>The only use-case for this right now is... <code>precise</code>. It's challenging, because with <code>precise</code>, we take a Git URL like <code>git://foo.bar</code> and rewrite it as <code>git://foo.bar@1278caca0</code>, with a specific commit SHA. So now, we need a way to apply that change to the original, verbatim string...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-12-13 21:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2023-12-14 12:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-12-14 15:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-12-14 15:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-12-14 15:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:34:55 UTC
    </footer>
</body>
</html>
