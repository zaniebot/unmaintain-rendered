<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disable PEP 740 attestations for PyPI publishing - astral-sh/uv #16944</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Disable PEP 740 attestations for PyPI publishing</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/16944">#16944</a>
        opened by <a href="https://github.com/woodruffw">@woodruffw</a>
        on 2025-12-03 00:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-12-03 00:35</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This broke the release and I haven't figured out why yet.</p>
<h2>Test Plan</h2>
<p>Blame my past self.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @woodruffw on 2025-12-03 00:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @woodruffw by @woodruffw on 2025-12-03 00:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @woodruffw on 2025-12-03 00:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-12-03 00:44</div>
            <div class="timeline-body"><p>Triage: this is a reusable workflows thing, namely https://github.com/pypi/warehouse/issues/11096 (hello past me).</p>
<p>Specifically, what's happening here is that the attestation is from <code>release.yml @ astral-sh/uv</code>, while the publisher identity on PyPI (which it needs to match) is <code>publish-pypi.yml @ astral-sh/uv</code>. This happens because <code>release.yml</code> is the calling workflow, while <code>publish-pypi.yml</code> is the callee.</p>
<p>Relevant tlog: https://search.sigstore.dev/?logIndex=737467510</p>
<p>Actual error:</p>
<pre><code>DEBUG Response code for https://upload.pypi.org/legacy/: 400 Bad Request
DEBUG Upload error response: {&quot;message&quot;: &quot;The server could not comply with the request since it is either malformed or otherwise incorrect.\n\n\nInvalid attestations supplied during upload: Could not verify the uploaded artifact using the included attestation: Verification failed: Certificate's Build Config URI (&lt;Extension(oid=&lt;ObjectIdentifier(oid=1.3.6.1.4.1.57264.1.18, name=Unknown OID)&gt;, critical=False, value=&lt;UnrecognizedExtension(oid=&lt;ObjectIdentifier(oid=1.3.6.1.4.1.57264.1.18, name=Unknown OID)&gt;, value=b'\\x0cMhttps://github.com/astral-sh/uv/.github/workflows/release.yml@refs/heads/main')&gt;)&gt;) does not match expected Trusted Publisher (publish-pypi.yml @ astral-sh/uv)\n\n&quot;, &quot;code&quot;: &quot;400 Invalid attestations supplied during upload: Could not verify the uploaded artifact using the included attestation: Verification failed: Certificate's Build Config URI (&lt;Extension(oid=&lt;ObjectIdentifier(oid=1.3.6.1.4.1.57264.1.18, name=Unknown OID)&gt;, critical=False, value=&lt;UnrecognizedExtension(oid=&lt;ObjectIdentifier(oid=1.3.6.1.4.1.57264.1.18, name=Unknown OID)&gt;, value=b'\\x0cMhttps://github.com/astral-sh/uv/.github/workflows/release.yml@refs/heads/main')&gt;)&gt;) does not match expected Trusted Publisher (publish-pypi.yml @ astral-sh/uv)&quot;, &quot;title&quot;: &quot;Bad Request&quot;}
error: Failed to publish `wheels_uv_build/uv_build-0.9.15-py3-none-manylinux_2_17_i686.manylinux2014_i686.whl` to https://upload.pypi.org/legacy/
  Caused by: Upload failed with status code 400 Bad Request. Server says: 400 Invalid attestations supplied during upload: Could not verify the uploaded artifact using the included attestation: Verification failed: Certificate's Build Config URI (&lt;Extension(oid=&lt;ObjectIdentifier(oid=1.3.6.1.4.1.57264.1.18, name=Unknown OID)&gt;, critical=False, value=&lt;UnrecognizedExtension(oid=&lt;ObjectIdentifier(oid=1.3.6.1.4.1.57264.1.18, name=Unknown OID)&gt;, value=b'\x0cMhttps://github.com/astral-sh/uv/.github/workflows/release.yml@refs/heads/main')&gt;)&gt;) does not match expected Trusted Publisher (publish-pypi.yml @ astral-sh/uv)
Error: Process completed with exit code 2.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-12-03 00:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-12-03 00:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-12-03 00:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:52:36 UTC
    </footer>
</body>
</html>
