<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a hint for `Requires-Python` - astral-sh/uv #4021</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a hint for <code>Requires-Python</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/4021">#4021</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-06-04 20:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body">Summary
<p>As requested in the originating PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-04 20:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-04 20:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-06-04 20:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:23</div>
            <div class="timeline-body"><p>This reads a little confusing to me, what does this mean? I must use <code>requires-python &gt;=3.7.9</code>? Do I need the upper bound too? Perhaps &quot;narrower&quot; isn&#x27;t intuitive enough for a user-facing message.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-04 20:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:25</div>
            <div class="timeline-body"><p>The simplest explanation is: <code>&gt;=3.7</code> includes versions that aren&#x27;t included in <code>&gt;=3.7.9, &lt;4</code>. You have to use a narrower range, or change the pygls version. What do you suggest?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-06-04 20:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:35</div>
            <div class="timeline-body"><p>Yeah that makes sense. I wonder if you should just say something more like that...</p>
<blockquote>
<p>The <code>Requires-Python</code> (&gt;=3.7) defined in your <code>pyproject.toml</code> includes Python versions that are not supported by the resolved dependencies: pygls&gt;=1.1.0,&lt;=1.2.1 only supports Python &gt;=3.7.9, &lt;4. Use a narrower <code>Requires-Python</code> range or try a different <code>pygls</code> version.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-06-04 20:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:36</div>
            <div class="timeline-body"><p>Sorry I don&#x27;t have any ideas I love here. I was earnestly confused by the current message and imagine users that don&#x27;t understand constraint ranges will be very lost.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-04 20:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:37</div>
            <div class="timeline-body"><p>Totally fair. I will play with it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-06-04 20:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:43</div>
            <div class="timeline-body"><p>Thank you! Some prompts that might be helpful: Is this expected to be common? Is the hint going to be displayed more than once in a failed resolution? How verbose can we be?</p>
<p>Separately... I worry about the upper bound, i.e. Poetry bounds to <code>&lt; 4</code> by default — does that mean if you have a single package published with Poetry in your dependency tree that you are forced to have this upper bound in your project? I don&#x27;t see discussion about this in <a href="https://github.com/astral-sh/uv/pull/3998">astral-sh/uv#3998</a>. I know there are general complaints about Poetry&#x27;s behavior here affecting the ecosystem, I&#x27;m guessing there&#x27;s not much we can do about that though? Happy to move this part of the discussion elsewhere.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:44</div>
            <div class="timeline-body"><p>It will only be displayed once (the fields are ignored when testing uniqueness).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-04 20:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-04 20:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:45</div>
            <div class="timeline-body"><blockquote>
<p>Separately... I worry about the upper bound, i.e. Poetry bounds to &lt; 4 by default — does that mean if you have a single package published with Poetry in your dependency tree that you are forced to have this upper bound in your project?</p>
</blockquote>
<p>Yeah, basically. I don&#x27;t think there&#x27;s anything we can do about this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:45</div>
            <div class="timeline-body"><p>I guess we could special-case things a bit, like... if you have an open-ended <code>Requires-Python</code> requirement, treat it as compatible with <code>&lt; 4</code>. What do you think?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-04 20:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-04 20:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:46</div>
            <div class="timeline-body"><p>Or, alternatively, throw out any <code>&lt; 4</code> on <code>Requires-Python</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-04 20:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:1008 on 2024-06-04 20:46</div>
            <div class="timeline-body"><p>Tracking here: <a href="https://github.com/astral-sh/uv/issues/4022">astral-sh/uv#4022</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-04 20:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-04 20:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-04 20:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:45:42 UTC
    </footer>
</body>
</html>
