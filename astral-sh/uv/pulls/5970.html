<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv/tests: add new 'ecosystem' integration tests - astral-sh/uv #5970</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv/tests: add new &#x27;ecosystem&#x27; integration tests</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/5970">#5970</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2024-08-09 17:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a></div>
            <div class="timeline-body"><p>At a high level, this PR adds a smattering of new tests that
effectively snapshot the output of <code>uv lock</code> for a selection of
&quot;ecosystem&quot; projects. That is, real Python projects for which we expect
<code>uv</code> to work well with.</p>
<p>The main idea with these tests is to get a better idea of how changes
in <code>uv</code> impact the lock files of real world projects. For example,
we&#x27;re hoping that these tests will help give us data for how #5733
differs from #5887.</p>
<p>This has already revealed some bugs. Namely, re-running <code>uv lock</code> for a
second time will produce a different lock file for some projects. So to
prioritize getting the tests added, for those projects, we don&#x27;t do the
deterministic checking.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/konstin">@konstin</a> by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-09 17:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-09 17:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-09 17:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-08-09 18:18</div>
            <div class="timeline-body"><p>Great idea.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-09 18:20</div>
            <div class="timeline-body"><p>Could we note in a README or something what commits these were pulled from for each project?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-08-09 18:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-09 19:05</div>
            <div class="timeline-body"><p>I marked the <code>warehouse</code> and <code>transformers</code> tests to run on Linux only. The former because it seems to rely on running <code>pg_config</code> (so I&#x27;m not sure how one would produce a universal resolution on, say, Windows) and the latter because it times out on macOS/Windows.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-08-09 19:14</div>
            <div class="timeline-body"><p>I love having ecosystem test for the universal resolver!</p>
<p>Are there options to trim them down? 30k lines is a lot.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-09 19:18</div>
            <div class="timeline-body"><p>Alternatively, we could have them in a separate repository and test them in a separate workflow than <code>cargo test</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-09 20:54</div>
            <div class="timeline-body"><blockquote>
<p>I love having ecosystem test for the universal resolver!</p>
<p>Are there options to trim them down? 30k lines is a lot.</p>
</blockquote>
<p>I can&#x27;t think of one. You could compress them, but then you inhibit human readability.</p>
<p>@zanieb I&#x27;m not a huge fan of having them in a separate repo if we can avoid it, mostly because I think it&#x27;s a big pain to have tests hosted elsewhere. Then any updates need multiple PRs. And we&#x27;re already doing that for packse scenarios.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-13 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-13 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-13 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-08-13 13:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:47:17 UTC
    </footer>
</body>
</html>
