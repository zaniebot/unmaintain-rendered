<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow `[project]` to be missing from a `pyproject.toml` - astral-sh/uv #14113</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow `[project]` to be missing from a `pyproject.toml`</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/14113">#14113</a>
        opened by <a href="https://github.com/Gankra">@Gankra</a>
        on 2025-06-17 17:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/Gankra">@Gankra</a> on 2025-06-17 17:39</div>
            <div class="timeline-body"><p>Closes #8666
Closes https://github.com/astral-sh/uv/issues/6838</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-06-17 17:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-workspace/src/workspace.rs</code>:1438 on 2025-06-17 17:42</div>
            <div class="timeline-body"><p>This first commit has an unserious impl because I just want to check in CI if there's any other tests this trips over.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-06-17 17:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv/src/commands/project/run.rs</code>:507 on 2025-06-17 17:44</div>
            <div class="timeline-body"><p>This is the more serious/targeted approach.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-17 17:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/run.rs</code>:3342 on 2025-06-17 17:57</div>
            <div class="timeline-body"><p>We should probably hide this warning when <code>[project]</code> is missing entirely, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-17 17:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/run.rs</code>:3085 on 2025-06-17 17:57</div>
            <div class="timeline-body"><p>Reminder</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-06-17 18:03</div>
            <div class="timeline-body"><p>The difference between the &quot;do it for everything&quot; and &quot;precisely do this just for run&quot; impls are:</p>
<ul>
<li>✅ <code>uv export</code> ...maybe makes sense with a lock for only dependency-groups??</li>
<li>✅ <code>uv sync</code> ...i suppose makes sense because you could sync only dependency-groups?</li>
<li>✅ <code>uv python find</code> ...not clearly useful to me but it has a --no-project flag</li>
<li>✅ <code>uv python pin</code> ...not clearly useful to me but it has a --no-project flag</li>
<li>✅ <code>uv venv</code> ...maybe makes sense? we use the pyproject.toml's location as a way to find where the <code>.venv</code>, i think?</li>
<li>✅ <code>uv add</code> only makes sense with dependency-groups, which the code already explicitly supports/checks!</li>
<li>✅ <code>uv remove</code> only makes sense with dependency-groups, which the code already explicitly supports/checks!</li>
<li>❌ <code>uv version</code> ...doesn't make sense! <code>uv version</code> probably shouldn't be using VirtualProject as much as it does! mea culpa... but really it's potato-potatoh since we already have checks against missing <code>[project]</code> in this command, so it just changes the error message to something more useful?</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-06-17 18:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv/tests/it/run.rs</code>:3342 on 2025-06-17 18:08</div>
            <div class="timeline-body"><p>I'm a bit of two minds because I think we still kinda want to discourage this usecase even if we support it..?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-06-17 19:14</div>
            <div class="timeline-body"><p>I've pushed up a series of commits -- the first adds tests for how each command behaves with this kind of pyproject.toml <em>today</em>, and the every subsequent commit migrates a specific command to use discover_defaulted, allowing the code to support that situation explicitly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-06-17 19:15</div>
            <div class="timeline-body"><p>Notably <code>uv python find</code>, <code>uv python pin</code> and <code>uv venv</code> resulted in no snapshot changes so my tests were probably not doing the right thing (probably running the command in a subdir would do something more interesting?).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-06-17 19:19</div>
            <div class="timeline-body"><p>~~The churn on <code>python_find</code> is interesting...~~
nevermind, copy-paste error, not a thing</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2025-06-18 23:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/karanr-invent">@karanr-invent</a> on 2025-08-20 10:21</div>
            <div class="timeline-body"><p>Any update on this ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-20 23:07</div>
            <div class="timeline-body"><p>It's on my immense todo list.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/karanr-invent">@karanr-invent</a> on 2025-08-21 04:43</div>
            <div class="timeline-body"><blockquote>
<p>It's on my immense todo list.</p>
</blockquote>
<p>Thanks for all the great work, really appreciate it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Allow project-less pyprojects in more places" to "Allow `[project]` to be missing from a `pyproject.toml`" by @zanieb on 2025-09-17 14:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-09-17 15:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-09-17 15:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-09-17 15:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 06:38:41 UTC
    </footer>
</body>
</html>
