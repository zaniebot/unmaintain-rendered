<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove unused import. - astral-sh/uv #6996</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Remove unused import.</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/6996">#6996</a>
        opened by <a href="https://github.com/garthk">@garthk</a>
        on 2024-09-04 04:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/garthk">@garthk</a> on 2024-09-04 04:32</div>
            <div class="timeline-body"><p><code>_virtualenv.py</code> doesn't need to import <code>__future__.annotations</code>, as it has none.</p>
<p>Removing the import:</p>
<ul>
<li><p>Restores the action of the VIRTUALENV_PATCH on Python 3.6</p>
</li>
<li><p>Eliminates 24 lines of error messages displayed by Python 3.6 when it starts in an environment created by uv:</p>
</li>
</ul>
<pre><code class="language-plaintext">Error processing line 1 of /tmp/tmp.ENwqZ0oeyb/lib/python3.6/site-packages/_virtualenv.pth:

  Traceback (most recent call last):
    File &quot;~/.pyenv/versions/3.6.15/lib/python3.6/site.py&quot;, line 168, in addpackage
      exec(line)
    File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
    File &quot;/tmp/tmp.ENwqZ0oeyb/lib/python3.6/site-packages/_virtualenv.py&quot;, line 3
      from __future__ import annotations
                                       ^
  SyntaxError: future feature annotations is not defined

Remainder of file ignored
</code></pre>
<p>(Python displays the errors above twice.)</p>
<p>I appreciate the Python team no longer support Python 3.6, but RedHat-style Linux distributions will support Python 3.6 in their <code>/usr/libexec/platform-python</code> until <a href="https://access.redhat.com/support/policy/updates/errata#RHEL8_Planning_Guide">releasever 8 expires in 2029</a>. I'm happy for the community to move on, in general, but don't see the harm in helping those who can't.</p>
<p>I'm not yet sure what in the “remainder of file ignored” is necessary for my project's build, as I haven't yet finished digging that from under Hatch. I'll follow up on #6426 when I do, so we can concentrate on getting to the happy cow.</p>
<h2>Test Plan</h2>
<pre><code class="language-sh">( set -eu
  export VIRTUAL_ENV=&quot;$(mktemp -d)&quot;
  ./target/release/uv venv &quot;$VIRTUAL_ENV&quot; --python=python3.6
  ./target/release/uv pip install cowsay        
  $VIRTUAL_ENV/bin/python -m cowsay --text 'Look, a talking cow!' )
</code></pre>
<p>Happy output:</p>
<pre><code class="language-plaintext">Using Python 3.6.15 interpreter at: ~/.local/bin/python3.6
Creating virtualenv at: /tmp/tmp.VHl4XNi3oI
Activate with: source /tmp//tmp.VHl4XNi3oI/bin/activate
Resolved 1 package in 929ms
Installed 1 package in 17ms
 + cowsay==6.0
  ____________________
| Look, a talking cow! |
  ====================
                    \
                     \
                       ^__^
                       (oo)\_______
                       (__)\       )\/\
                           ||----w |
                           ||     ||
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-09-04 13:40</div>
            <div class="timeline-body"><p>Thanks, while we don't support Python 3.6 (as you mention) this still seems like a reasonable thing to do.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-09-04 13:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-04 13:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @charliermarsh on 2024-09-04 13:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/garthk">@garthk</a> on 2024-09-04 22:24</div>
            <div class="timeline-body"><p>Thanks, @charliermarsh, and thanks @zanieb for fixing the snapshot.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-09-04 22:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:01:21 UTC
    </footer>
</body>
</html>
