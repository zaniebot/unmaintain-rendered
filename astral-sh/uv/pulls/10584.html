<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter wheels from lockfile based on architecture - astral-sh/uv #10584</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Filter wheels from lockfile based on architecture</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/10584">#10584</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2025-01-14 03:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-14 03:27</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>After we resolve, we filter out any wheels that aren't applicable for the target platforms. So, e.g., we remove macOS wheels if we find that the user only asked to solve for Windows.</p>
<p>This PR extends the same logic to architectures, so that we filter out ARM-only wheels when the user is only solving for x86, etc.</p>
<p>Closes #10571.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @charliermarsh on 2025-01-14 03:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/lock/mod.rs</code>:90 on 2025-01-14 03:27</div>
            <div class="timeline-body"><p>There... might be other markers to consider here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-01-14 03:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @charliermarsh on 2025-01-14 03:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @BurntSushi removed by @charliermarsh on 2025-01-14 03:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @Gankra by @charliermarsh on 2025-01-14 03:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2025-01-14 03:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-01-14 03:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-platform-tags/src/platform_tag.rs</code>:76 on 2025-01-14 03:31</div>
            <div class="timeline-body"><p>I renamed these, since, e.g., the <code>Self::Any</code> tag is also compatible, but it doesn't get at what we want here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2025-01-14 08:11</div>
            <div class="timeline-body"><p>Do we have or can we add a test that we don't remove wheel from platforms where we don't parse the architecture e.g. a freebsd x86_64 wheel under <code>platform_machine == 'x86_64'</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-14 13:45</div>
            <div class="timeline-body"><p>I guess that would have to go through packse? (Not sure where else to get a FreeBSD wheel.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2025-01-14 13:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-14 14:28</div>
            <div class="timeline-body"><p>Added.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2025-01-14 14:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-01-14 14:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-14 14:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:18 UTC
    </footer>
</body>
</html>
