<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improved `match` statements - astral-sh/uv #15295</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Improved <code>match</code> statements</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/pull/15295">#15295</a>
        opened by <a href="https://github.com/adamnemecek">@adamnemecek</a>
        on 2025-08-15 02:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/adamnemecek">@adamnemecek</a></div>
            <div class="timeline-body"><p>Replacement of #15094.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cache/src/lib.rs</code>:1219 on 2025-08-15 13:26</div>
            <div class="timeline-body"><p>Did you mean to include this here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-15 13:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/adamnemecek">@adamnemecek</a> reviewed on 2025-08-15 15:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on <code>crates/uv-cache/src/lib.rs</code>:1219 on 2025-08-15 15:58</div>
            <div class="timeline-body"><p>You mean the change where I remove the max and use the built-in one? I think so . Should I remove it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on 2025-08-15 15:59</div>
            <div class="timeline-body"><p>What is up  with the failing test?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-15 20:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cache/src/lib.rs</code>:1219 on 2025-08-15 20:30</div>
            <div class="timeline-body"><p>Yeah I guess I don't see what it has to with the match statements? It makes sense to use the built-in max though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/adamnemecek">@adamnemecek</a> reviewed on 2025-08-15 22:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on <code>crates/uv-cache/src/lib.rs</code>:1219 on 2025-08-15 22:23</div>
            <div class="timeline-body"><p>It's only called from inside of match statements, so I am improving match statement logic.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-15 22:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cache/src/lib.rs</code>:1219 on 2025-08-15 22:33</div>
            <div class="timeline-body"><p>I'm sorry but I don't think a change like</p>
<pre><code class="language-diff">-            (Self::None(t1), Self::All(t2)) =&gt; Self::All(max(t1, t2)),
+            (Self::None(t1), Self::None(t2)) =&gt; Self::None(t1.max(t2)),
</code></pre>
<p>has anything to do with the structure of match statements like the rest of the changes here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/adamnemecek">@adamnemecek</a> reviewed on 2025-08-15 22:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on <code>crates/uv-cache/src/lib.rs</code>:1219 on 2025-08-15 22:36</div>
            <div class="timeline-body"><p>The max or the regrouping? The max does, the regrouping is clippy.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-15 22:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cache/src/lib.rs</code>:1219 on 2025-08-15 22:56</div>
            <div class="timeline-body"><p>Specifically the <code>max</code> changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-15 22:57</div>
            <div class="timeline-body"><p>Are you turning on enforcement of this match style?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/adamnemecek">@adamnemecek</a> reviewed on 2025-08-15 22:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on <code>crates/uv-cache/src/lib.rs</code>:1219 on 2025-08-15 22:58</div>
            <div class="timeline-body"><p>Ok. Should I change the title?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on 2025-08-15 22:58</div>
            <div class="timeline-body"><p>I think itâ€™s the default</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-15 23:02</div>
            <div class="timeline-body"><p>We run Clippy so CI would be failing if it was the enforced already?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on 2025-08-15 23:16</div>
            <div class="timeline-body"><p>It was after some of the other changes. If you open the other PR there was one force push to fix that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cache/src/lib.rs</code>:1219 on 2025-08-15 23:59</div>
            <div class="timeline-body"><p>I'd rather have each pull request focused on a single change, so I'd prefer you backed this out so we can consider it separately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-15 23:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-16 00:00</div>
            <div class="timeline-body"><blockquote>
<p>It was after some of the other changes. If you open the other PR there was one force push to fix that.</p>
</blockquote>
<p>I'm sorry, I don't get what you mean? If this is the default and already enforced, why is <a href="https://github.com/astral-sh/uv/actions/runs/17001407277/job/48203760390">clippy passing on main</a>?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:44:23 UTC
    </footer>
</body>
</html>
