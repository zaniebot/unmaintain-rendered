<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Better error message for missing space before semicolon in requirements - astral-sh/uv #1746</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Better error message for missing space before semicolon in requirements</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/1746">#1746</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-02-20 11:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2024-02-20 11:21</div>
            <div class="timeline-body"><p>PEP 508 requires a space between a URL and the semicolon separating it from the markers to disambiguate it from a url ending with a semicolon. This is easy to get wrong because the space is not required after a plain name of PEP 440 specifier. The new error message explicitly points out the missing space.</p>
<p>Fixes #1637</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @konstin on 2024-02-20 11:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/pep508-rs/src/lib.rs</code>:989 on 2024-02-20 12:20</div>
            <div class="timeline-body"><p>This tells you what's gone wrong, but not why we need to issue an error here in the first place. I think if I were a user and I got this message, my immediate question would be, &quot;Well, you obviously understood what I <em>meant</em> here... so why not just do that?&quot;</p>
<p>Maybe something like this? Not sure if there's a more concise way of explaining it:</p>
<pre><code class="language-suggestion">                    message: Pep508ErrorSource::String(&quot;\
Missing space before ';' creates an ambiguous requirement
(Unclear whether the ';' is part of the URL or separates the URL from an environment marker)&quot;.to_string()
                    ),
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2024-02-20 12:20</div>
            <div class="timeline-body"><p>Nice!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-02-20 16:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/pep508-rs/src/lib.rs</code>:989 on 2024-02-20 16:34</div>
            <div class="timeline-body"><p>The reason itself is somewhat counterintuitive since we allow paths too, which unlike urls can contain spaces which we don't support except for the hack with file urls, and because PEP 508 doesn't require a semicolon after a version number for symmetry.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2024-02-20 16:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/pep508-rs/src/lib.rs</code>:987 on 2024-02-20 16:36</div>
            <div class="timeline-body"><p>Can we just make this <code>if let</code> rather than <code>unwrap</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-02-20 16:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2024-02-20 16:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2024-02-20 16:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-02-20 16:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 15:33:43 UTC
    </footer>
</body>
</html>
