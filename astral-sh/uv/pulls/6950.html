<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support file:// URL for `UV_PYTHON_INSTALL_MIRROR` - astral-sh/uv #6950</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support file:// URL for <code>UV_PYTHON_INSTALL_MIRROR</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/6950">#6950</a>
        opened by <a href="https://github.com/eth3lbert">@eth3lbert</a>
        on 2024-09-02 23:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Closes #6319.</p>
<h2>Test Plan</h2>
<p>I tested with <code>file:///mirror</code>, <code>file://localhost/mirror</code>, and <code>http://mirror</code> to confirm that it was working as expected.</p>
<pre><code class="language-shell-session">/private/tmp/mirror-local                                                                                                                                                                      07:08:18
:)  tree mirror 
mirror/
└── 20240814/
   └── cpython-3.12.5+20240814-aarch64-apple-darwin-install_only_stripped.tar.gz
</code></pre>
<img width="626" alt="image" src="https://github.com/user-attachments/assets/9c04224d-305c-47ee-a524-4a6abeb79da4">

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @charliermarsh on 2024-09-03 00:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-09-03 00:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-09-03 00:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-09-03 01:13</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-09-03 01:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-03 01:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-09-03 03:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/aleksarias">@aleksarias</a> on 2025-06-05 20:12</div>
            <div class="timeline-body"><p>I've set the environment variable:</p>
<pre><code class="language-bash">UV_PYTHON_INSTALL_MIRROR='file:///Users/a0274042/PycharmProjects/my-project/python_standalone' 
</code></pre>
<p>and I get the following error when running:</p>
<pre><code class="language-bash">uv sync
error: failed to query metadata of file `/Users/a0274042/PycharmProjects/my-project/backend/python_standalone/20250212/cpython-3.13.2+20250212-aarch64-apple-darwin-install_only_stripped.tar.gz`: No such file or directory (os error 2)
</code></pre>
<p>Is there a reason this is occurring? It looks like uv is finding the file but then is unable to query the metadata... and it's showing an os error for some reason.
The printed path in the error is definitely correct and the tar.gz file lives there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-05 22:53</div>
            <div class="timeline-body"><p>@aleksarias please open a new issue per #9452</p>
<p>Maybe include some <code>ls -lah</code> of the directory? Maybe it's a permissions problem?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hk2281">@hk2281</a> on 2025-06-11 16:21</div>
            <div class="timeline-body"><p>Thanks for the thread — @aleksarias  I ran into the same issue and was able to solve it.</p>
<p>In my case, the local mirror had the following structure:</p>
<pre><code>mirror-local/
└── mirror/
    └── 20240814/
        └── cpython-3.13.2+20240814-&lt;platform&gt;.tar.gz
</code></pre>
<p>However, my Python archive was named with a different date: 20241002.
After I renamed the subdirectory to match the date in the archive filename:</p>
<pre><code>mirror-local/
└── mirror/
    └── 20241002/
        └── cpython-3.13.2+20241002-&lt;platform&gt;.tar.gz
</code></pre>
<p>uv sync worked correctly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/leodevian">@leodevian</a> on 2025-09-08 13:05</div>
            <div class="timeline-body"><p>I encountered this issue as well. It seems that the mirror that is created using <code>scripts/create-python-mirror.py</code> depends on the version of uv as older versions of uv won't request the latest release of python-build-standalone for the same Python versions.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:39:22 UTC
    </footer>
</body>
</html>
