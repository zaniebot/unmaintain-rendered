<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elide traceback when `python -m uv` in interrupted with Ctrl-C on Windows - astral-sh/uv #14715</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Elide traceback when <code>python -m uv</code> in interrupted with Ctrl-C on Windows</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/14715">#14715</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-07-18 12:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>Closes <a href="https://github.com/astral-sh/uv/issues/14704">astral-sh/uv#14704</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-18 12:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-18 12:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geofft">@geofft</a> on 2025-07-18 12:20</div>
            <div class="timeline-body"><p>Is it possible to just turn off Ctrl-C handling and keep waiting for the subprocess? Would that be preferable?</p>
<p>If the child process handles Ctrl-C on its own, the parent process will exit. Consider e.g. <code>py -m uv run python</code> to get a REPL. What happens?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jtfmumm">@jtfmumm</a> approved on 2025-07-18 12:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-18 12:45</div>
            <div class="timeline-body"><blockquote>
<p>Is it possible to just turn off Ctrl-C handling and keep waiting for the subprocess? Would that be preferable?</p>
</blockquote>
<p>uhh maybe? it seems more error prone than just hiding this traceback since we don&#x27;t need to perform any other clean-up. Ctrl-C handling on Windows is pretty non-trivial, though I&#x27;m more familiar with it from Rust than Python at the moment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-18 12:48</div>
            <div class="timeline-body"><p>The REPL case is interesting, I&#x27;d appreciate if someone tested it. There&#x27;s some nuance to how the interrupt happens on Windows, so I&#x27;m not sure what will happen.</p>
<p>I last had to deal with this in <a href="https://github.com/astral-sh/uv/pull/11009">astral-sh/uv#11009</a> where we do</p>
<p>https://github.com/astral-sh/uv/blob/088a436efe34ec517d5762545a753ab9424278d8/crates/uv/src/child.rs#L274-L281</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-18 12:48</div>
            <div class="timeline-body"><p>I asked Claude to get a sense of scope... looks yucky https://claude.ai/share/d82556df-c3f8-4e3f-94c2-6febdb782981</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-18 13:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-18 13:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-07-18 13:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-18 13:07</div>
            <div class="timeline-body"><p>I think this is a strict improvement, we should explore the interactive case too though</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:53:11 UTC
    </footer>
</body>
</html>
