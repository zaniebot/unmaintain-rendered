<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rewrite resolver docs - astral-sh/uv #5723</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rewrite resolver docs</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/5723">#5723</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-08-02 11:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>This PR rewrites the resolver concept and adds a resolver internals page targeted at power users.</p>
<p>The new resolution concept documentation has three parts:</p>
<ul>
<li>An introduction for people how never heard of &quot;resolution&quot; before, and a motivating example what it does. I've also shoved the part about equally valid resolutions in there.</li>
<li>Features you commonly use: Non-universal vs. universal resolution, lowest resolution amd pre-releases.</li>
<li>Expert features, we don't advertise them, you'll only need them in complex cases when you already know and i kept them to the reference points you need in this case: Constraints, overrides and exclude-newer.</li>
</ul>
<p>I intentionally didn't lay out any detail of the resolution itself, the idea is that users get a vague sense of &quot;uv has to select fitting versions&quot;, but then they learn the options they have to use and some common failure points without ever coming near SAT or even graphs.</p>
<p>The resolution internals reference page is targeted at power users who need to understand what is going on behind the scenes. It assumes ample prior knowledge and exists to explain the uv-specific behaviors for someone who already understands dependency resolution conceptually and has interacted with their dependency tree before. I had a section on the lockfile but removed it because it found the lockfile to be too self-documenting.</p>
<p>I haven't touched the readme.</p>
<p>Closes #5603
Closes #5238
Closes #5237</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @konstin on 2024-08-02 11:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @konstin on 2024-08-02 11:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @konstin on 2024-08-02 11:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @konstin on 2024-08-02 11:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @konstin on 2024-08-02 11:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @konstin on 2024-08-02 13:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>BENCHMARKS.md</code>:12 on 2024-08-03 13:42</div>
            <div class="timeline-body"><p>We will need to update this separately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-08-03 13:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-08-03 13:43</div>
            <div class="timeline-body"><p>Thanks! I'll post edits separately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-08-03 13:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/concepts/resolution.md</code>:25 on 2024-08-03 13:45</div>
            <div class="timeline-body"><p>There is overlap with the pip page here but it's hard not to have that</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2024-08-03 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-08-03 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-08-03 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>docs/concepts/resolution.md</code>:25 on 2024-08-05 15:49</div>
            <div class="timeline-body"><p>It might make sense to link to the pip page here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>docs/concepts/resolution.md</code>:56 on 2024-08-05 15:53</div>
            <div class="timeline-body"><p>I wonder if it also makes sense to include a note here making explicit the assumptions <code>uv</code> makes. For example, that package metadata doesn't change between platforms for the same version. And crucially, if a package only has an sdist, then universal resolution still may need to build it to get metadata. So e.g., if a Windows-only package whose metadata can only be extracted by building an sdist and building the sdist can only be done on Windows, then that package I believe will prevent universal resolution from non-Linux platforms. (I don't have any real world examples of such a package though.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>docs/concepts/resolution.md</code>:56 on 2024-08-05 16:06</div>
            <div class="timeline-body"><p>This is somewhat addressed in the &quot;expert&quot; docs below. But it might be worth a brief mention here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-08-05 16:06</div>
            <div class="timeline-body"><p>Nice! Looks great. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-05 21:31</div>
            <div class="timeline-body"><p>I'll take @BurntSushi's comments into account.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-08-06 08:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/concepts/resolution.md</code>:56 on 2024-08-06 08:12</div>
            <div class="timeline-body"><p>I think this something we should communicate in the error message (specifically, add a note in the build error when we're on a different platform), it's not something you need to think upfront in the concept docs</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:38:36 UTC
    </footer>
</body>
</html>
