<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propagate credentials for `&lt;index&gt;/simple` to `&lt;index&gt;/...` endpoints - astral-sh/uv #11074</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Propagate credentials for <code>&lt;index&gt;/simple</code> to <code>&lt;index&gt;/...</code> endpoints</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/11074">#11074</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-01-29 17:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-29 17:52</div>
            <div class="timeline-body"><p>Closes https://github.com/astral-sh/uv/issues/11017
Closes https://github.com/astral-sh/uv/issues/8565</p>
<p>Sort of an minimal implementation of https://github.com/astral-sh/uv/issues/4583</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2025-01-29 17:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-29 17:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-distribution-types/src/index.rs</code>:172 on 2025-01-29 17:54</div>
            <div class="timeline-body"><p>Alternatively, we could just push credentials for the URL with <code>/simple</code> stripped and that would cover all imaginable cases?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-29 17:57</div>
            <div class="timeline-body"><p>Needs a test case, but I want to make sure we're aligned this approach is reasonable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Pre-emptively store credentials for `/files` endpoints in `/simple` index URLs" to "Propagate credentials for `<index>/simple` to `<index>/...` endpoints" by @zanieb on 2025-01-29 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2025-01-29 21:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-29 21:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/build_frontend.rs</code>:503 on 2025-01-29 21:53</div>
            <div class="timeline-body"><p>We could omit <code>raw_url()</code> in favor of <code>root_url()</code> but I think this is &quot;safer&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2025-01-30 01:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-01-30 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-01-30 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-30 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jzazo">@jzazo</a> on 2025-02-10 16:19</div>
            <div class="timeline-body"><p>Hi! It says at the beginning it's sort of minimal implementation for <a href="https://github.com/astral-sh/uv/issues/4583">#4583</a>. We have latest uv version and we can still not install packages with 401 authentication errors, problem being that package url's are queried. Should this PR fix that issue, or still unsolved? Thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-10 16:20</div>
            <div class="timeline-body"><p>@jzazo Do you have a trailing <code>/</code> on your URL? https://github.com/astral-sh/uv/pull/11336 is not released yet</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jzazo">@jzazo</a> on 2025-02-10 16:26</div>
            <div class="timeline-body"><p>uv tries with a URL where there is a trailing <code>/</code>, ending in <code>.../_packaging/MI/pypi/simple/</code>. But I think uv did not try that URL but this one instead: <code>.../_packaging/MI/pypi/simple/poetry-core/</code> (not sure why trying to locate poetry, might be a relic).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-10 16:43</div>
            <div class="timeline-body"><p>If you remove the trailing <code>/</code> from your index URL config, it should work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-10 16:44</div>
            <div class="timeline-body"><p>Though it doesn't really make sense that this would fix a request to <code>.../_packaging/MI/pypi/simple/poetry-core/</code> since it's not at <code>.../simple/../...</code> like <code>..../files/</code>.</p>
<p>It'd probably be better to just open an issue.. way easier to tell what's going on with all the details.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:19 UTC
    </footer>
</body>
</html>
