<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add bootstrapping and isolation of development Python versions - astral-sh/uv #1105</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add bootstrapping and isolation of development Python versions</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/1105">#1105</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-01-25 19:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>Replaces <a href="https://github.com/astral-sh/puffin/pull/1068">astral-sh/puffin#1068</a> and #1070 which were more complicated than I wanted.</p>
<ul>
<li>Introduces a <code>.python-versions</code> file which defines the Python versions needed for development</li>
<li>Adds a Bash script at <code>scripts/bootstrap/install</code> which installs the required Python versions from <code>python-build-standalone</code> to <code>./bin</code></li>
<li>Checks in a <code>versions.json</code> file with metadata about available versions on each platform and a <code>fetch-version</code> Python script derived from <code>rye</code> for updating the versions</li>
<li>Updates CI to use these Python builds instead of the <code>setup-python</code> action</li>
<li>Updates to the latest packse scenarios which require Python 3.8+ instead of 3.7+ since we cannot use 3.7 anymore and includes new test coverage of patch Python version requests</li>
<li>Adds a <code>PUFFIN_PYTHON_PATH</code> variable to prevent lookup of system Python versions for isolation during development</li>
</ul>
<p>Tested on Linux (via CI) and macOS (locally) ‚Äî presumably it will be a bit more complicated to do proper Windows support.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-25 20:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin-interpreter/src/interpreter.rs</code>:235 on 2024-01-25 20:31</div>
            <div class="timeline-body"><p>I&#x27;d like to improve the error handling here in a follow-up</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 20:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 20:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin-interpreter/src/lib.rs</code>:68 on 2024-01-25 20:32</div>
            <div class="timeline-body"><p>It&#x27;s unclear to me if there&#x27;s a better way to display this</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin-interpreter/src/python_query.rs</code>:33 on 2024-01-25 20:32</div>
            <div class="timeline-body"><p>See #1097 ‚Äî these require each other because we cannot add tests over there until the versions are pinned as written here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 20:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 20:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin/tests/pip_compile_scenarios.rs</code>:257 on 2024-01-25 20:33</div>
            <div class="timeline-body"><p>This package had an invalid tag name and was failing to publish in the last couple packse builds.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 20:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin/tests/pip_compile_scenarios.rs</code>:336 on 2024-01-25 20:33</div>
            <div class="timeline-body"><p>The following is new test coverage from packse for requests that include patch Python versions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/fetch-versions</code>:1 on 2024-01-25 20:35</div>
            <div class="timeline-body"><p>This is a very simplified version of #1068 and the vast majority of it is identical to the Python script Rye uses to inline some Python version metadata.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 20:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 20:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/scenarios/update.py</code>:152 on 2024-01-25 20:36</div>
            <div class="timeline-body"><p>This fixes a minor bug where if you run the scenario update with a different Python version (without actually activating a virtual environment) <code>packse</code> would be missing from the path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 20:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/install</code>:1 on 2024-01-25 20:37</div>
            <div class="timeline-body"><p>This is a bash implementation of #1068 such that we do not require any Python versions to be available to download Python.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 20:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/install</code>:1 on 2024-01-25 20:37</div>
            <div class="timeline-body"><p>I linted this with <code>shellcheck</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 20:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/install</code>:22 on 2024-01-25 20:38</div>
            <div class="timeline-body"><p>Please test me on your system!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add simple bootstrapping of Python versions&quot; to &quot;Add bootstrapping and isolation of Python versions&quot; by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-25 20:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add bootstrapping and isolation of Python versions&quot; to &quot;Add bootstrapping and isolation of development Python versions&quot; by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-25 20:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 21:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin-interpreter/src/interpreter.rs</code>:223 on 2024-01-25 21:26</div>
            <div class="timeline-body"><p>I worry about this name being too close to <code>PYTHONPATH</code> which has a very different meaning.</p>
<p>Considering <code>PUFFIN_PYTHON_EXECUTABLE_PATH</code> but geesh.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>.envrc</code>:3 on 2024-01-25 21:27</div>
            <div class="timeline-body"><p>A little hesitant to check this in, but <code>direnv</code> is a pretty nice way to manage these standards and there&#x27;s no <em>requirement</em> that you use it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 21:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-25 21:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/BurntSushi">@BurntSushi</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-25 21:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/konstin">@konstin</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-25 21:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/puffin-interpreter/src/python_query.rs</code>:171 on 2024-01-25 22:18</div>
            <div class="timeline-body"><p>I like backticks to make clear that it&#x27;s a literal, personally.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/puffin-interpreter/src/python_query.rs</code>:46 on 2024-01-25 22:18</div>
            <div class="timeline-body"><p>Should this return an error? This is effectively a panic.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>scripts/bootstrap/install</code>:1 on 2024-01-25 22:18</div>
            <div class="timeline-body"><p>Can we use <code>install.sh</code> instead of <code>install</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>scripts/bootstrap/install</code>:1 on 2024-01-25 22:21</div>
            <div class="timeline-body"><p>Wow respect. <em>This</em> I could see being written in Rust to avoid the Python dependency... but, now that this is here, let&#x27;s give it a whirl :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>scripts/bootstrap/install</code>:47 on 2024-01-25 22:21</div>
            <div class="timeline-body"><p>Wtf?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>scripts/bootstrap/fetch-versions</code>:1 on 2024-01-25 22:22</div>
            <div class="timeline-body"><p>In that case, I&#x27;m gonna skip reading this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>scripts/bootstrap/fetch-versions</code>:49 on 2024-01-25 22:22</div>
            <div class="timeline-body"><p>One question though - does this download one interpreter per version? Or multiple? How does it choose which one?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>scripts/bootstrap/install</code>:29 on 2024-01-25 22:23</div>
            <div class="timeline-body"><p>I thought you needed <code>-o</code> for pipefail, like <code>set -euo pipefail</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>scripts/bootstrap/install</code>:101 on 2024-01-25 22:23</div>
            <div class="timeline-body"><p>I don&#x27;t know that I feel qualified to review this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>CONTRIBUTING.md</code>:52 on 2024-01-25 22:24</div>
            <div class="timeline-body"><p>We recommend setting it <em>during development</em>, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-01-25 22:24</div>
            <div class="timeline-body"><p>Very impressive.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-25 22:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/puffin-interpreter/src/interpreter.rs</code>:223 on 2024-01-25 22:25</div>
            <div class="timeline-body"><p>I&#x27;m okay with <code>PUFFIN_PYTHON_EXECUTABLE_PATH</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-25 22:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>.envrc</code>:3 on 2024-01-25 22:25</div>
            <div class="timeline-body"><p>Happy to try it. Why does one have <code>export</code> but not the other? Is it intentional?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-25 22:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>.github/workflows/ci.yml</code>:73 on 2024-01-25 22:27</div>
            <div class="timeline-body"><p>Do we need to set <code>PUFFIN_PYTHON_PATH</code> here, or it&#x27;s fine because there are no &quot;other Pythons&quot; on the server?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/install</code>:1 on 2024-01-25 22:41</div>
            <div class="timeline-body"><p>We should definitely write this in Rust in the future. I found Rye&#x27;s implementation to be relatively complicated though (it seemed hard to copy over) and this was a smaller scope than doing it in Rust (for me haha)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>.envrc</code>:3 on 2024-01-25 22:42</div>
            <div class="timeline-body"><p>I don&#x27;t think <code>direnv</code> requires an export of <code>PATH</code> they special case it? Not sure what their intent is there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin-interpreter/src/python_query.rs</code>:171 on 2024-01-25 22:43</div>
            <div class="timeline-body"><p>This is a side-effect of switching to the debug implementation for rendering. <code>OsString</code> doesn&#x27;t implement display. Suggestions?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/install</code>:1 on 2024-01-25 22:43</div>
            <div class="timeline-body"><p>I don&#x27;t love extensions on executables with shebangs but sure.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin-interpreter/src/python_query.rs</code>:46 on 2024-01-25 22:44</div>
            <div class="timeline-body"><p>Probably, yes. I&#x27;m not sure how soon Konsti is going to write Windows version lookup using the registry which would (I think) support this. Happy to do it here though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/install</code>:47 on 2024-01-25 22:47</div>
            <div class="timeline-body"><p>macOS has super old versions of GNU core utilities. You can get the latest with <code>brew install coreutils</code> but it installs them all as <code>g&lt;cmd&gt;</code> to avoid collisions. Pretty silly. I&#x27;ll make the comment a little better haha.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/install</code>:29 on 2024-01-25 22:47</div>
            <div class="timeline-body"><p>Ah that explains why it didn&#x27;t work! Oops.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>CONTRIBUTING.md</code>:52 on 2024-01-25 22:47</div>
            <div class="timeline-body"><p>Yes. I can clarify</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>.github/workflows/ci.yml</code>:73 on 2024-01-25 22:47</div>
            <div class="timeline-body"><p>There are no other Pythons on the server. It may be best practice to set it here too? I&#x27;m not sure if it matters.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-25 22:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>.github/workflows/ci.yml</code>:73 on 2024-01-25 22:50</div>
            <div class="timeline-body"><p>I think it&#x27;s fine not to set.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/fetch-versions</code>:49 on 2024-01-25 22:50</div>
            <div class="timeline-body"><p>This just generates the <code>version.json</code> file which has links to downloads. I believe the flavor preferences section here is used to select a single interpreter flavor <em>per</em> combination of OS, architecture, and Python version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/install</code>:101 on 2024-01-25 22:56</div>
            <div class="timeline-body"><p>As long as you test it I&#x27;m not <em>too</em> worried about the implementation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin-interpreter/src/interpreter.rs</code>:223 on 2024-01-25 22:58</div>
            <div class="timeline-body"><p>I&#x27;ll address this once I merge this full stack to avoid annoying rebases</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-25 22:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>CONTRIBUTING.md</code>:57 on 2024-01-26 13:01</div>
            <div class="timeline-body"><p>Shouldn&#x27;t this be something like</p>
<pre><code>PATH=$PWD/bin:$PATH PUFFIN_PYTHON_PATH=$PWD/bin cargo nextest run ...
</code></pre>
<p>Seems cumbersome to always having to copy those two commands before doing anything when not using direnv</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-interpreter/src/interpreter.rs</code>:223 on 2024-01-26 13:02</div>
            <div class="timeline-body"><p>&quot;path&quot; is so overloaded anyway already</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-interpreter/src/lib.rs</code>:68 on 2024-01-26 13:04</div>
            <div class="timeline-body"><p>If it&#x27;s about thiserror syntax, <code>#[error(&quot;Couldn&#x27;t find {} in PATH&quot;, _0.to_string_lossy())]</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-interpreter/src/python_query.rs</code>:35 on 2024-01-26 13:04</div>
            <div class="timeline-body"><p>The function docstring needs to be updated</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-interpreter/src/python_query.rs</code>:46 on 2024-01-26 13:05</div>
            <div class="timeline-body"><p>I&#x27;d go with an error for now</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>scripts/bootstrap/install.sh</code>:1 on 2024-01-26 13:09</div>
            <div class="timeline-body"><p>This script introduces a jq dependency which needs to be documented. For windows:</p>
<pre><code>winget install jqlang.jq
</code></pre>
<p>or https://jqlang.github.io/jq/download/.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-01-26 13:13</div>
            <div class="timeline-body"><p>The install script errors on windows 11 git bash:</p>
<pre><code>$ scripts/bootstrap/install.sh
which: no grealpath in (/mingw64/bin:/usr/bin:/c/Users/Konstantin/bin:/c/Python37/Scripts:/c/Python37:/c/Program Files (x86)/Intel/iCLS Client:/c/Program Files/Intel/iCLS Client:/c/Windows/system32:/c/Windows:/c/Windows/System32/Wbem:/c/Windows/System32/WindowsPowerShell/v1.0:/c/Program Files (x86)/Intel/Intel(R) Management Engine Components/DAL:/c/Program Files/Intel/Intel(R) Management Engine Components/DAL:/c/Program Files (x86)/Intel/Intel(R) Management Engine Components/IPT:/c/Program Files/Intel/Intel(R) Management Engine Components/IPT:/c/Program Files/Intel/WiFi/bin:/c/Program Files/Common Files/Intel/WirelessCommon:/c/Windows/System32/OpenSSH:/cmd:/c/Program Files/nodejs:/c/ProgramData/chocolatey/bin:/c/Program Files/PowerShell/7:/c/Users/Konstantin/AppData/Local/Programs/Python/Python312/Scripts:/c/Users/Konstantin/AppData/Local/Programs/Python/Python312:/c/Users/Konstantin/AppData/Local/Programs/Python/Python38/Scripts:/c/Users/Konstantin/AppData/Local/Programs/Python/Python38:/c/Users/Konstantin/.cargo/bin:/c/Users/Konstantin/AppData/Local/Microsoft/WindowsApps:/c/Users/Konstantin/AppData/Local/JetBrains/Toolbox/scripts:/c/users/konstantin/.local/bin:/c/Users/Konstantin/AppData/Roaming/npm:/c/Users/Konstantin/AppData/Local/Microsoft/WindowsApps:/c/Users/Konstantin/AppData/Local/Microsoft/WinGet/Packages/BurntSushi.ripgrep.MSVC_Microsoft.Winget.Source_8wekyb3d8bbwe/ripgrep-14.1.0-x86_64-pc-windows-msvc:/c/Users/Konstantin/AppData/Local/Microsoft/WinGet/Packages/jqlang.jq_Microsoft.Winget.Source_8wekyb3d8bbwe)
Installing cpython-3.8.12-mingw64_nt-10.0-22621-x86_64
No matching download for cpython-3.8.12-mingw64_nt-10.0-22621-x86_64
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>.envrc</code>:2 on 2024-01-26 13:32</div>
            <div class="timeline-body"><p>Should these variables be quoted?</p>
<p>(It would be odd for these to require quoting on a Unix system, but if this gets used on Windows, spaces are much more common there IIRC.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>.github/workflows/ci.yml</code>:73 on 2024-01-26 13:32</div>
            <div class="timeline-body"><p>Can you use direnv here instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>scripts/bootstrap/fetch-version-metadata.py</code>:79 on 2024-01-26 13:41</div>
            <div class="timeline-body"><p>I <em>think</em> this can just be <code>&quot;-(%s)$&quot;</code>, although you would need to use <code>_suffix_re.search(...)</code> instead of <code>_suffix_re.match(...)</code> below.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>scripts/bootstrap/install.sh</code>:1 on 2024-01-26 13:45</div>
            <div class="timeline-body"><p>Additionally, I&#x27;m a fan of explicitly checking for dependencies used in a shell script if any outside of core tools are needed. For example, see https://github.com/BurntSushi/dotfiles/blob/2431b0d87614eabc0f022fd3617dcb0e5a5b4de4/bin/backup#L315-L322 and https://github.com/BurntSushi/dotfiles/blob/2431b0d87614eabc0f022fd3617dcb0e5a5b4de4/bin/backup#L341.</p>
<p>It&#x27;s a big quality of life improvement because it avoids the scenario of getting half-way through execution and then getting a &quot;<code>jq</code> not found&quot; error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>scripts/bootstrap/install.sh</code>:1 on 2024-01-26 13:46</div>
            <div class="timeline-body"><p>We could also write this in Python to avoid adding new dependencies. <em>And</em> it might work on Windows. (Although I see some symlinking below...)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>scripts/bootstrap/install.sh</code>:43 on 2024-01-26 13:49</div>
            <div class="timeline-body"><p><code>arch</code> isn&#x27;t a standard command. (It&#x27;s not on my system for example.) I think it is Debian specific. <code>uname --machine</code> might be what you&#x27;re looking for?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2024-01-26 13:50</div>
            <div class="timeline-body"><p>Nice! Does this mean I don&#x27;t need <code>pyenv</code> any more?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-26 14:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/install.sh</code>:1 on 2024-01-26 14:44</div>
            <div class="timeline-body"><p>Ah thanks missed that dependency in my list and I&#x27;m happy to add explicit checks.</p>
<p>I wrote the whole thing in Python first at #1068 ‚Äî but it was annoying that it had more Python requirements and I really didn&#x27;t like bootstrapping Python development with Python.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-26 14:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>.envrc</code>:2 on 2024-01-26 14:44</div>
            <div class="timeline-body"><p>I&#x27;m not sure about the envrc syntax, but probably.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-26 14:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/fetch-version-metadata.py</code>:79 on 2024-01-26 14:45</div>
            <div class="timeline-body"><p>This is copied directly from Rye, hesitant to change?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>scripts/bootstrap/install.sh</code>:43 on 2024-01-26 14:46</div>
            <div class="timeline-body"><p>üëç weird its present on macOS and Ubuntu but can change</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-26 14:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-26 14:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin-interpreter/src/lib.rs</code>:68 on 2024-01-26 14:48</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-26 15:53</div>
            <div class="timeline-body"><p>I plan on addressing this round of feedback then merging since I have a stack on top of this and we really need to codify these versions. The <code>bin</code> folder can be moved elsewhere if you want to use these versions of Python globally on your system (and avoid setting variables when using the project). I don&#x27;t think we&#x27;ll have Windows support initially since I can&#x27;t test it, but I&#x27;m happy to collaborate on it. I can work on it via GitHub Actions in a follow-up if needed.</p>
<blockquote>
<p>Does this mean I don&#x27;t need pyenv any more?</p>
</blockquote>
<p>That&#x27;s the goal!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-26 17:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>.github/workflows/ci.yml</code>:73 on 2024-01-26 17:36</div>
            <div class="timeline-body"><p>Sure</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-26 18:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-26 18:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-01-26 18:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:43:23 UTC
    </footer>
</body>
</html>
