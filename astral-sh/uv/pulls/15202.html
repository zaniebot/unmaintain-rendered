<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add hint for venv in source distribution error - astral-sh/uv #15202</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add hint for venv in source distribution error</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/15202">#15202</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-08-10 13:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2025-08-10 13:42</div>
            <div class="timeline-body"><p>Venvs should not be in source distributions, and on Unix, we now reject them for having a link outside the source directory. This PR adds a hint for that since users were confused (#15096).</p>
<p>In the process, we're differentiating IO errors for format error for uncompression generally.</p>
<p>Fixes #15096</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @konstin on 2025-08-10 13:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-08-10 13:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-extract/src/error.rs</code>:9 on 2025-08-10 13:43</div>
            <div class="timeline-body"><p>The <code>during async read</code> allows us to tell apart the code path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-08-10 17:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv/src/commands/build_frontend.rs</code>:398 on 2025-08-10 17:31</div>
            <div class="timeline-body"><p>The tokio-tar crate has an effectively stringly-types, very nested, everything-is-an-io::Error interface.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Hint about error from venv in source distribution" to "Add hint for venv in source distribution error" by @konstin on 2025-08-18 16:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @konstin on 2025-08-18 16:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-18 17:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-extract/src/error.rs</code>:9 on 2025-08-18 17:19</div>
            <div class="timeline-body"><p>To tell it apart from which case? I would rather not leak that it's async to a user.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-08-18 17:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-08-18 18:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-extract/src/error.rs</code>:9 on 2025-08-18 18:35</div>
            <div class="timeline-body"><p>Telling apart <code>zip</code> errors vs. <code>async-zip</code> errors from user reports. I've made it more sneaky now by using two slightly different strings that effectively say the same but lead us to the correct location when grepping through the code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2025-08-18 22:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-08-18 22:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-08-18 22:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2025-08-19 10:40</div>
            <div class="timeline-body"><p>Looking at https://github.com/astral-sh/tokio-tar/commit/f1488188f1d1b54a73eb0c42a8b8f4b9ee87d688, are you planning to release <code>astral-tokio-tar</code> 0.5.3 and change <code>astral-tokio-tar = { git = &quot;https://github.com/astral-sh/tokio-tar&quot;, rev = &quot;f1488188f1d1b54a73eb0c42a8b8f4b9ee87d688&quot; }</code> back to <code>astral-tokio-tar = { version = &quot;0.5.3&quot; }</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-08-19 10:56</div>
            <div class="timeline-body"><p>Yes, we plan doing a new release in https://github.com/astral-sh/tokio-tar soon.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 06:47:20 UTC
    </footer>
</body>
</html>
