<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>build(uv-cli): Set correct gitdir and head path for worktree - astral-sh/uv #6197</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>build(uv-cli): Set correct gitdir and head path for worktree</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/6197">#6197</a>
        opened by <a href="https://github.com/eth3lbert">@eth3lbert</a>
        on 2024-08-19 03:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a></div>
            <div class="timeline-body">Summary
<p>Resolves #6196 .</p>
Test Plan
<p>Run <code>cargo check</code> multiple times within the worktree and inspect the outputs. There should be no <code>Compiling</code> message after the first check.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on 2024-08-19 04:27</div>
            <div class="timeline-body"><p>Some related info:</p>
<pre><code>:)  tree /Users/eth/workspace/astral-sh -L 1
/Users/eth/workspace/astral-sh/
├── uv/
└── uv-dev/

(devshell) :)  git worktree list
/Users/eth/workspace/astral-sh/uv      20ef94b15 [main]
/Users/eth/workspace/astral-sh/uv-dev  3c313126b [uv-cli-worktree]
</code></pre>
<p>content of <code>.git</code> file in worktree:</p>
<pre><code>(devshell) :)  /bin/cat /Users/eth/workspace/astral-sh/uv-dev/.git
gitdir: /Users/eth/workspace/astral-sh/uv/.git/worktrees/uv-dev
</code></pre>
<p>content of <code>HEAD</code> of worktree:</p>
<pre><code>(devshell) :)  /bin/cat /Users/eth/workspace/astral-sh/uv/.git/worktrees/uv-dev/HEAD
ref: refs/heads/uv-cli-worktree
</code></pre>
<p>content of <code>commondir</code> of worktree:</p>
<pre><code>(devshell) :)  /bin/cat /Users/eth/workspace/astral-sh/uv/.git/worktrees/uv-dev/commondir 
../..
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-19 14:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-23 23:51</div>
            <div class="timeline-body"><p>cc @charliermarsh can you actually review this since you use worktrees?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-23 23:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-23 23:55</div>
            <div class="timeline-body"><p>Sure, no prob.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-23 23:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-29 18:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-29 18:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-29 18:13</div>
            <div class="timeline-body"><p>@eth3lbert I just merged #6825. I ended up submitting that before realizing this PR or #6196 existed. I merged that one over this one because I liked having the logic split out into a separate function. But this overall looked good too. Apologies for the duplicated effort and thank you for noticing this problem and submitting a fix. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on 2024-08-29 18:22</div>
            <div class="timeline-body"><blockquote>
<p>@eth3lbert I just merged #6825. I ended up submitting that before realizing this PR or #6196 existed. I merged that one over this one because I liked having the logic split out into a separate function. But this overall looked good too. Apologies for the duplicated effort and thank you for noticing this problem and submitting a fix. :-)</p>
</blockquote>
<p>All good, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-08-29 18:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:47:30 UTC
    </footer>
</body>
</html>
