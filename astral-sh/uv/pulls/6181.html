<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add license texts for contents of ecosystem/ - astral-sh/uv #6181</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add license texts for contents of ecosystem/</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/6181">#6181</a>
        opened by <a href="https://github.com/musicinmybrain">@musicinmybrain</a>
        on 2024-08-18 13:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2024-08-18 13:23</div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<!-- What's the purpose of the change? What does it do, and why? -->

<p>While the contents of <code>ecosystem/</code> are “merely” <code>pyproject.toml</code> files and one trivial Python script, they are still covered by the licenses of the projects from which they are copied. Not only is maintaining license/copyright statements good practice, but it’s generally specifically required by the particular licenses involved here.</p>
<p>Even though these files are for integration testing only – and therefore do not contribute to the license of the compiled <code>uv</code> executable – they are nevertheless part of the source archive, so distributors and integrators need to consider their license status. For example, I maintain the <code>uv</code> package in Fedora Linux, and I need to consider these licenses because the files would be redistributed in the source RPMs.</p>
<h2>Test Plan</h2>
<!-- How was it tested? -->

<p>N/A – validated by examination of the diff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2024-08-18 13:31</div>
            <div class="timeline-body"><p>I am not sure what to do about <code>prettier</code> complaining about <code>ecosystem/home-assistant-core/LICENSE.md</code>. The license is copied from <code>home-assistant-core</code> upstream, so it should not be modified or reformatted. Maybe I should rename it to <code>ecosystem/home-assistant-core/LICENSE</code>, dropping the somewhat dubious <code>.md</code> extension? That seems safe enough.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-18 13:37</div>
            <div class="timeline-body"><p>There's an ignore file at: https://github.com/astral-sh/uv/blob/main/.prettierignore</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-18 13:37</div>
            <div class="timeline-body"><p>Thanks for taking the time to do this. I'll have @BurntSushi review since he added the tests :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @BurntSushi by @zanieb on 2024-08-18 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @zanieb on 2024-08-18 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2024-08-18 13:41</div>
            <div class="timeline-body"><blockquote>
<p>There's an ignore file at: https://github.com/astral-sh/uv/blob/main/.prettierignore</p>
</blockquote>
<p>Good suggestion – thanks! I added <code>ecosystem/home-assistant-core/LICENSE.md</code> to <code>.prettierignore</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2024-08-18 13:46</div>
            <div class="timeline-body"><p>(I submitted the <code>pretix</code> license – the <code>AGPL-3.0-only</code> portion of which includes a custom exception – <a href="https://gitlab.com/fedora/legal/fedora-license-data/-/issues/559">for review by Fedora Legal</a>. I’ll follow up in a separate issue if it’s found to be problematic.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-19 12:01</div>
            <div class="timeline-body"><blockquote>
<p>For example, I maintain the uv package in Fedora Linux, and I need to consider these licenses because the files would be redistributed in the source RPMs.</p>
</blockquote>
<p>Can you why you're including them in the source RPMs? Why not exclude them?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2024-08-19 12:53</div>
            <div class="timeline-body"><blockquote>
<p>Can you why you're including them in the source RPMs? Why not exclude them?</p>
</blockquote>
<p>The source RPM includes the <code>.spec</code> file that controls how the package is built, the original upstream source archive, and any patches or ancillary files. The original source archive is, e.g., https://github.com/astral-sh/uv/archive/0.2.37/uv-0.2.37.tar.gz (plus three more archives corresponding to the <code>async_zip</code>, <code>pubgrub</code>, and <code>reqwest_middleware</code> forks referenced by git hash in <code>Cargo.toml</code>), and so anything that’s in the git repository is in the source RPM. Note that we do run all of the tests that don’t require network access.</p>
<p>If I wanted to avoid distributing the <code>ecosystem/</code> directory, I would need to use a script to download the source archive from GitHub, remove <code>ecosystem/</code>, and then repack the source archive. Then, I would need to make sure I skipped running the tests that rely on those files; fortunately, those seem to be contained to <code>crates/uv/tests/ecosystem.rs</code>. All of this is perfectly feasible, and I maintain other packages in Fedora where this approach is necessary, but it seems to be a bit of a heavyweight workaround for missing license texts. Alternatively, I <em>might</em> be able to switch to using the PyPI sdist, if it isn’t missing anything else I need.</p>
<p>While I doubt anyone is going to get upset about copying a <code>pyproject.toml</code> file in practice, in principle, maintaining the correct license texts for files copied from other projects and redistributed via GitHub would seem to be something that should matter to the <code>uv</code> project too, regardless of what downstream distribution packagers are doing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-19 13:07</div>
            <div class="timeline-body"><p>I think any tests involving things in the <code>ecosystem</code> directory are going to involve some kind of network I/O. At least, all extant tests do.</p>
<blockquote>
<p>While I doubt anyone is going to get upset about copying a pyproject.toml file in practice, in principle, maintaining the correct license texts for files copied from other projects and redistributed via GitHub would seem to be something that should matter to the uv project too, regardless of what downstream distribution packagers are doing.</p>
</blockquote>
<p>I'm not a lawyer, so I'm not going to try to get into legal stuff here, but my mind is more headed in the direction of whether it's worth putting these tests in a different repository. Like, you really should not need to be getting AGPL license exemptions from lawyers in order to package <code>uv</code>. I don't want that to be a hurdle that folks feel like they need to cross, and if putting these tests in this repository provokes that hurdle, it might be something to rethink.</p>
<p>I suppose this is orthogonal to putting the license files in the repo. Since the legal aspect of this doesn't really change if we put them in another repo.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-19 13:09</div>
            <div class="timeline-body"><p>@charliermarsh I think we should merge this. If problems arise from it, then we can consider moving the tests to a different repository, although I'd really rather not do that. What do you think?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2024-08-19 13:16</div>
            <div class="timeline-body"><p>I think your analysis in https://github.com/astral-sh/uv/pull/6181#issuecomment-2296538198 is very reasonable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2024-08-23 15:51</div>
            <div class="timeline-body"><blockquote>
<p>If I wanted to avoid distributing the <code>ecosystem/</code> directory, I would need to use a script to download the source archive from GitHub, remove <code>ecosystem/</code>, and then repack the source archive. Then, I would need to make sure I skipped running the tests that rely on those files; fortunately, those seem to be contained to <code>crates/uv/tests/ecosystem.rs</code>. All of this is perfectly feasible, and I maintain other packages in Fedora where this approach is necessary, but it seems to be a bit of a heavyweight workaround for missing license texts. […]</p>
</blockquote>
<p>This – combined with applying this PR as a patch – is the approach I’m using to move forward for now, although I hope it won’t be permanent – either because the <code>pretix</code> license is found to be acceptable for Fedora, or because the contents of <code>ecosystem/</code> end up being moved out of this repository.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-08-23 16:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2024-08-23 16:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-08-23 16:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2024-09-22 04:41</div>
            <div class="timeline-body"><blockquote>
<p>(I submitted the <code>pretix</code> license – the <code>AGPL-3.0-only</code> portion of which includes a custom exception – <a href="https://gitlab.com/fedora/legal/fedora-license-data/-/issues/559">for review by Fedora Legal</a>. I’ll follow up in a separate issue if it’s found to be problematic.)</p>
</blockquote>
<p>Just following up to say that the replacement of <code>pretix</code> with <code>saleor</code> in https://github.com/astral-sh/uv/pull/7567 due to https://github.com/astral-sh/uv/issues/7566 is really helpful, as now everything in <code>ecosystem/</code> has standard licenses.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:00:55 UTC
    </footer>
</body>
</html>
