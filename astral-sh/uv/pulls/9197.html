<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build backend: Support data files  - astral-sh/uv #9197</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Build backend: Support data files</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/9197">#9197</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-11-18 13:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>Allow including data files in wheels, configured through <code>pyproject.toml</code>. This configuration is currently only read in the build backend. We&#x27;d only start using it in the frontend when we&#x27;re adding a fast path.</p>
<p>Each data entry is a directory, whose contents are copied to the matching directory in the wheel in <code>&lt;name&gt;-&lt;version&gt;.data/(purelib|platlib|headers|scripts|data)</code>. Upon installation, this data is moved to its target location, as defined by <a href="https://docs.python.org/3.12/library/sysconfig.html#installation-paths">https://docs.python.org/3.12/library/sysconfig.html#installation-paths</a>:</p>
<ul>
<li><code>data</code>: Installed over the virtualenv environment root. Warning: This may override existing files!</li>
<li><code>scripts</code>: Installed to the directory for executables, <code>&lt;venv&gt;/bin</code> on Unix or <code>&lt;venv&gt;\Scripts</code> on Windows. This directory is added to PATH when the virtual environment is activated or when using <code>uv run</code>, so this data type can be used to install additional binaries. Consider using <code>project.scripts</code> instead for starting Python code.</li>
<li><code>headers</code>: Installed to the include directory, where compilers building Python packages with this package as built requirement will search for header files.</li>
<li><code>purelib</code> and <code>platlib</code>: Installed to the <code>site-packages</code> directory. It is not recommended to uses these two options.</li>
</ul>
<p>For simplicity, for now we&#x27;re just defining a directory to be copied for each data directory, while using the glob based include mechanism in the background. We thereby introduce a third mechanism next to the main includes and the PEP 639 mechanism, which is not what we should finalize on.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/konstin">@konstin</a> on 2024-11-18 13:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/BurntSushi">@BurntSushi</a> by <a href="https://github.com/konstin">@konstin</a> on 2024-11-18 13:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cthoyt">@cthoyt</a> on 2024-11-18 17:30</div>
            <div class="timeline-body"><p>@konstin thanks for all of the great work on this. If you ever need some external testers, please ping me!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-build-backend/src/lib.rs</code>:347 on 2024-11-18 18:12</div>
            <div class="timeline-body"><p>Might be more ceremony, but if you need to match on them, I might use an enum for the <code>&amp;&#x27;static str</code> here.</p>
<p>(But if it&#x27;s really just used as a label in string form, I think what you have is totally fine.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2024-11-18 18:13</div>
            <div class="timeline-body"><p>Makes sense to me!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-11-19 10:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-build-backend/src/lib.rs</code>:347 on 2024-11-19 10:59</div>
            <div class="timeline-body"><p>Here, I&#x27;m just mapping the key name to the folder name.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/konstin">@konstin</a> on 2024-11-19 11:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2024-11-19 11:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-11-19 12:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ehrenfeu">@ehrenfeu</a> on 2025-06-06 09:38</div>
            <div class="timeline-body"><p>(Sorry for hijacking this PR thread, please let me know if you prefer me to open a separate issue...)</p>
<p>Quick question: I&#x27;d love to use this feature, but from my brief tests using version <code>0.7.11</code>, this is not yet possible via <code>uv build</code>, correct?</p>
<p>I&#x27;m having an entry like this in my <code>pyproject.toml</code>:</p>
<pre><code>[tool.uv.wheel.data]
data = &quot;conffiles&quot;
</code></pre>
<p>When calling <code>uv build</code> it tells me (output truncated):</p>
<pre><code>warning: Failed to parse `pyproject.toml` during settings discovery:
  TOML parse error at line 22, column 10
     |
  22 | [tool.uv.wheel.data]
     |          ^^^^^
  unknown field `wheel`
</code></pre>
<p>üí°  Which is probably what is stated in the 3rd phrase of this PR issue (at least that&#x27;s my interpretation):</p>
<blockquote>
<p>We&#x27;d only start using it in the frontend when we&#x27;re adding a fast path.</p>
</blockquote>
<p>‚ùì So, is it currently possible somehow to include extra stuff into wheels built by <code>uv</code>, in a similar fashion as through <a href="https://setuptools.pypa.io/en/latest/userguide/datafiles.html">setuptool&#x27;s Data Files</a> fashion? I&#x27;ve spent quite some time reading docs and testing stuff in my project config, without success though...</p>
<p>Many thanks! üíö
~Niko</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ehrenfeu">@ehrenfeu</a> on 2025-06-06 09:40</div>
            <div class="timeline-body"><p>Never mind. Found it <em>right after</em> submitting this message:</p>
<p>https://docs.astral.sh/uv/reference/settings/#build-backend_data</p>
<p>These entries do the job for me:</p>
<pre><code>[tool.uv]
package = true

[tool.uv.build-backend]
data = { &quot;data&quot; = &quot;extra_files&quot; }

[build-system]
requires = [&quot;uv_build&gt;=0.7.11,&lt;0.8.0&quot;]
build-backend = &quot;uv_build&quot;
</code></pre>
<p>Thanks again! üíö
~Niko</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:49:25 UTC
    </footer>
</body>
</html>
