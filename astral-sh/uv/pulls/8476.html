<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make `--allow-insecure-host` a global option - astral-sh/uv #8476</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make <code>--allow-insecure-host</code> a global option</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/8476">#8476</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-10-22 19:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>Not verifying the certificates of certain hosts should be supported for all kinds of HTTPS connections, so we're making it a global option, just like native tls. This fixes the remaining places using a client but were not configuring allow insecure host.</p>
<p>Fixes #6983 (i think)
Closes #6983</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @konstin on 2024-10-22 19:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @konstin on 2024-10-22 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-10-22 19:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-22 19:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/settings.md</code>:1508 on 2024-10-22 19:32</div>
            <div class="timeline-body"><p>Is this supposed to be gone? I think this is breaking</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-22 19:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/cli.md</code>:83 on 2024-10-22 19:33</div>
            <div class="timeline-body"><p>Why did this disappear from the CLI reference?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-22 19:34</div>
            <div class="timeline-body"><p>A couple concerning changes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-23 14:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/reference/settings.md</code>:1508 on 2024-10-23 14:16</div>
            <div class="timeline-body"><p>Good catch</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @konstin on 2024-10-23 14:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @konstin on 2024-10-23 14:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-23 18:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/src/lib.rs</code>:1535 on 2024-10-23 18:45</div>
            <div class="timeline-body"><p>Should we pass in the owned value? We're cloning it at all the sites, aren't we?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-23 18:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/src/settings.rs</code>:84 on 2024-10-23 18:45</div>
            <div class="timeline-body"><p>I think this should be using <code>combine</code> so that we merge the two, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-23 18:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>docs/reference/settings.md</code>:336 on 2024-10-23 18:46</div>
            <div class="timeline-body"><p>Does this now appear multiple times? I see it's already included twice on main...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-23 19:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/reference/settings.md</code>:336 on 2024-10-23 19:04</div>
            <div class="timeline-body"><p>I'm not clear about how the options flow, at least uvx on windows has some duplication (https://github.com/astral-sh/uv/actions/runs/11482045623/job/31954176059?pr=8476), i appreciate guidance on where allow insecure host is supposed to live (or not).</p>
<p>My basic thinking is:</p>
<ul>
<li>It needs to be in the global scope</li>
<li>For backwards compatibility, it also needs to be in the pip scope, and take precedence over the global option.
The latter point seems to thread this option through a lot of other places.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-23 23:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>docs/reference/settings.md</code>:336 on 2024-10-23 23:39</div>
            <div class="timeline-body"><p>Ok, I can take a look at how that's popping up here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-25 01:32</div>
            <div class="timeline-body"><p>@konstin -- The current version I have here <em>is</em> breaking because I removed the separate setting for the <code>uv pip</code> interface. It seems like if a setting is global, it should by definition probably be shared between the two CLIs. What do you think? (We can just ship this with v0.5, it's fine if it's breaking.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-10-25 07:11</div>
            <div class="timeline-body"><p>Shipping this a breaking change with 0.5 sounds fine</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking</span> added by @charliermarsh on 2024-10-25 13:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.5.0" by @charliermarsh on 2024-10-28 19:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Make allow insecure host a global option" to "Make `--allow-insecure-host` a global option" by @charliermarsh on 2024-10-28 19:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-10-28 19:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-10-28 19:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-10-28 19:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-10-28 19:46</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:40:15 UTC
    </footer>
</body>
</html>
