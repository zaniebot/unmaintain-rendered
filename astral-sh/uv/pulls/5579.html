<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make `--directory` a global argument - astral-sh/uv #5579</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make <code>--directory</code> a global argument</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/5579">#5579</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-07-29 23:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:30</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Cargo makes this global (and uses the same technique). It's still hidden so we can always decide to remove it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @charliermarsh on 2024-07-29 23:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @charliermarsh on 2024-07-29 23:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @charliermarsh on 2024-07-29 23:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-07-29 23:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-07-29 23:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-07-29 23:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2024-07-29 23:44</div>
            <div class="timeline-body"><p>Changing directory is a different thing and makes uv run harder to use like that (if you pass relative paths to an uv run command, it might not work so well.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:45</div>
            <div class="timeline-body"><p>What's harder about it? Why is it wrong to resolve paths relative to the provided directory?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:45</div>
            <div class="timeline-body"><p>(I mean, it's easy to change -- we just track a current directory globally in <code>uv-fs</code>, add a setter, and always read from there rather than using <code>CWD</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2024-07-29 23:51</div>
            <div class="timeline-body"><p>I'm thinking that you have something like</p>
<pre><code class="language-bash">$ uv --directory path/to/proj run the_command --flag ./myfile.txt
# &lt;------- uv run part ---------&gt; &lt;-- regular command part  ----&gt;
</code></pre>
<p>Ideally the uv run part should just be transparent. It brings forth the environment in where the program executes. The regular command line part of the command shouldn't have to change.</p>
<p>One reason why it's wrong to resolve myfile.txt relative to the given directory is that the user probably autocompleted it from their current directory. It's hard to use interactively (and hard to use in scripts as well, except there you'd probably just have to remember to abspath everything.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:58</div>
            <div class="timeline-body"><p>That makes sense. I can change it up.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:37:39 UTC
    </footer>
</body>
</html>
