<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make `--directory` a global argument - astral-sh/uv #5579</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make <code>--directory</code> a global argument</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/5579">#5579</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-07-29 23:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body">Summary
<p>Cargo makes this global (and uses the same technique). It&#x27;s still hidden so we can always decide to remove it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-07-29 23:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2024-07-29 23:44</div>
            <div class="timeline-body"><p>Changing directory is a different thing and makes uv run harder to use like that (if you pass relative paths to an uv run command, it might not work so well.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:45</div>
            <div class="timeline-body"><p>What&#x27;s harder about it? Why is it wrong to resolve paths relative to the provided directory?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:45</div>
            <div class="timeline-body"><p>(I mean, it&#x27;s easy to change -- we just track a current directory globally in <code>uv-fs</code>, add a setter, and always read from there rather than using <code>CWD</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2024-07-29 23:51</div>
            <div class="timeline-body"><p>I&#x27;m thinking that you have something like</p>
<pre><code>$ uv --directory path/to/proj run the_command --flag ./myfile.txt
# &lt;------- uv run part ---------&gt; &lt;-- regular command part  ----&gt;
</code></pre>
<p>Ideally the uv run part should just be transparent. It brings forth the environment in where the program executes. The regular command line part of the command shouldn&#x27;t have to change.</p>
<p>One reason why it&#x27;s wrong to resolve myfile.txt relative to the given directory is that the user probably autocompleted it from their current directory. It&#x27;s hard to use interactively (and hard to use in scripts as well, except there you&#x27;d probably just have to remember to abspath everything.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 23:58</div>
            <div class="timeline-body"><p>That makes sense. I can change it up.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:46:59 UTC
    </footer>
</body>
</html>
