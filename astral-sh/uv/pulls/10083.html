<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow the creation of non-activatable envrionments - astral-sh/uv #10083</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow the creation of non-activatable envrionments</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/pull/10083">#10083</a>
        opened by <a href="https://github.com/nathanscain">@nathanscain</a>
        on 2024-12-21 18:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/nathanscain">@nathanscain</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>To resolve #10070 by allow environments to be created without activation scripts in them.</p>
<p>Saves a bit of time when only uv will be used to interact with the environment meant. This is off by default for user-facing environments (<code>uv venv</code> and anything calling <code>get_or_init_environment</code>) and on by default for internal environments so no time is wasted in environments that would never be directly interacted with (tool installs, isolated calls to uv run, package builds with build isolation, etc). Saves a bit of time writing files for everyone in those isolated envrionments, while letting those who want it to go more aggressive.</p>
<h2>Test Plan</h2>
<p>All current tests pass. Will probably need to work with you on how you'd like this tested.</p>
<p>Locally, I have verified that:</p>
<ul>
<li><code>uv venv</code> creates an environment with activation scripts</li>
<li><code>uv venv --not-activatable</code> does not create an environment with activation scripts</li>
<li><code>uv run</code> when there isn't an existing environment, creates one with activation scripts</li>
<li><code>uv run</code> when there is an existing environment without activation scripts, leaves the environment without activation scripts</li>
<li>when the default behavior is to not have activation scripts, <code>uv venv --activatable</code> creates a virtual environment with activation scripts</li>
<li>selecting the environment in vscode appears unaffected by the missing scripts</li>
</ul>
<h2>TODO</h2>
<p>Still need to make this configurable as a <code>uv.toml</code> / <code>pyproject.toml</code> option, but the core behavior is working so I figured I'd throw in draft to make sure I'm on the right path.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:41:08 UTC
    </footer>
</body>
</html>
