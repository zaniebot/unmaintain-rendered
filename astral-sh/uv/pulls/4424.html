<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expose `toolchain-preference` as a CLI and configuration file option - astral-sh/uv #4424</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Expose <code>toolchain-preference</code> as a CLI and configuration file option</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/4424">#4424</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-06-20 14:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>Exposes the option added in #4416. Adds <code>--toolchain-preference</code> and <code>tool.uv.toolchain-preference</code> to configure if system or managed toolchains are preferred. Users can opt-out of managed toolchains or system toolchains entirely as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-20 14:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-20 16:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/BurntSushi">@BurntSushi</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-20 16:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/konstin">@konstin</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-20 16:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-20 16:27</div>
            <div class="timeline-body"><p>Should we bikeshed the name? Should it just be <code>--toolchains</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2024-06-20 17:21</div>
            <div class="timeline-body"><p>LGTM.</p>
<p>As for the name... Is this something that you think will be commonly used on the CLI? If so, I think I&#x27;d favor a shorter name. Otherwise, I like the descriptiveness of <code>--toolchain-preference</code>.</p>
<p>One other possible downside is redundancy here. Namely, <code>--toolchain-preference prefer-system</code> has &quot;prefer&quot; twice in it, but arguably is just as clear if &quot;prefer&quot; only appeared once. Not quite sure what the right answer is there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-20 17:23</div>
            <div class="timeline-body"><blockquote>
<p>One other possible downside is redundancy here. Namely, --toolchain-preference prefer-system has &quot;prefer&quot; twice in it, but arguably is just as clear if &quot;prefer&quot; only appeared once.</p>
</blockquote>
<p>Agree, this is a source of discomfort for me but idk it&#x27;s also very clear.</p>
<p>I don&#x27;t expect this to be used much from the CLI â€” mostly as a persistent configuration option.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-20 17:27</div>
            <div class="timeline-body"><p>I&#x27;m fine adjusting this later if we need to since it&#x27;s in preview.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-20 18:26</div>
            <div class="timeline-body"><p>I guess another option is I drop the <code>prefer</code> prefix so we&#x27;d have</p>
<p><code>toolchain-preference = managed | system | only-managed | only-system | installed-managed</code></p>
<p>which is pretty reasonable too?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-06-20 18:27</div>
            <div class="timeline-body"><blockquote>
<p>I guess another option is I drop the <code>prefer</code> prefix so we&#x27;d have</p>
<p><code>toolchain-preference = managed | system | only-managed | only-system | installed-managed</code></p>
<p>which is pretty reasonable too?</p>
</blockquote>
<p>I think that&#x27;s probably okay. I thought of that too, but wondered whether it might leave folks wondering the difference between <code>managed</code> and <code>only-managed</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-20 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-20 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-20 18:42</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:46:01 UTC
    </footer>
</body>
</html>
