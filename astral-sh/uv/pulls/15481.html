<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cache PyTorch wheels by default - astral-sh/uv #15481</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Cache PyTorch wheels by default</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/15481">#15481</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2025-08-24 13:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-08-24 13:02</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>After chatting with the PyTorch team, it looks like some number of wheels were accidentally uploaded with <code>no-cache,no-store,must-revalidate</code> due to https://github.com/pytorch/pytorch/pull/149218. They're going to correct this for the respective wheels. I've encouraged them to set an immutable caching header for these files, and it might happen. But even if this isn't set, by default we only allow these wheels to be cached for 600s, since the other wheels don't include a <code>Cache-Control</code> header at all (but do include a <code>Last-Modified</code>, so we cache based on our heuristic: <code>Freshness lifetime heuristically assumed because of presence of last-modified header: 600s</code>). This probably leads to tons of unnecessary downloads for users over time. Andrey from the PyTorch team agreed that we should do this.</p>
<p>Closes https://github.com/astral-sh/uv/issues/15480.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @charliermarsh on 2025-08-24 13:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @charliermarsh on 2025-08-24 13:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2025-08-24 13:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @charliermarsh on 2025-08-24 13:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-08-24 15:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2025-08-24 15:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-08-24 15:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-08-24 15:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 06:47:24 UTC
    </footer>
</body>
</html>
