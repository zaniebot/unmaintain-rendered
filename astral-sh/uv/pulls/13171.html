<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reproducible uv build backend across operating systems - astral-sh/uv #13171</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Reproducible uv build backend across operating systems</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/13171">#13171</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-04-28 08:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>The goal of this PR is to support reproducible builds and best-effort platform-independent builds. Previously, while the build backend would build the same source dist and wheel on the same machine, they would look different across different operating systems. This PR fixes the platform-dependent walk dir order by sorting and removes platform-specific permissions from the source dist that had caused those differences.</p>
<p>The reproducibility goal does not extend to platform-dependent filesystem features, such as permissions and links, especially in interaction with Git. Since most users share code across platforms through Git, we're focusing on cross-platform behavior under Git. One of those caveats is intentional: If a file, such as a bash script, has an executable bit, we preserve it. This means that E.g. builds of Git checkout of a repository with an executable shell script in the sources will have different archives on Unix and Windows. Another relevant case are symlinks: By default, Git on Windows replaces symlinks with a file that contains the path to the target file (https://stackoverflow.com/q/5917249/3549270). (This example comes from Cargo, where it means that the package archive is different on Windows when symlinking license from the repository root to a workspace package)</p>
<p>Best reviewed commit-by-commit</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @konstin on 2025-04-28 08:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @konstin on 2025-04-28 08:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Test build backend determinism across machines" to "Reproducible uv build backend across operating systems" by @konstin on 2025-05-03 22:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @konstin on 2025-05-03 23:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by @konstin on 2025-05-03 23:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2025-05-06 15:59</div>
            <div class="timeline-body"><p>Makes sense to me! Thanks for the commit-by-commit PR. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2025-05-06 16:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-05-06 16:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-05-06 16:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:43:02 UTC
    </footer>
</body>
</html>
