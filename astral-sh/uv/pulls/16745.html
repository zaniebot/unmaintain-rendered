<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prevent `uv export` from overwriting `pyproject.toml` - astral-sh/uv #16745</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Prevent `uv export` from overwriting `pyproject.toml`</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/16745">#16745</a>
        opened by <a href="https://github.com/terror">@terror</a>
        on 2025-11-15 08:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/terror">@terror</a> on 2025-11-15 08:25</div>
            <div class="timeline-body"><p>Currently, it's possible for <code>uv export</code> to overwrite someones <code>pyproject.toml</code>. This diff simply rejects project files passed in with <code>-o</code>, so we avoid doing that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv/src/commands/project/export.rs</code>:302 on 2025-11-19 10:57</div>
            <div class="timeline-body"><p>What about this (pseudocode):</p>
<pre><code class="language-suggestion">            &quot;`pyproject.toml` is not a supported output format. Supported formats: {}&quot;, ExportFormat::value_variants()
        .iter()
        .filter_map(|variant| variant.to_possible_value())
        .map(|value| value.get_name())
        .join(&quot;, &quot;);
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-11-19 10:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @konstin on 2025-11-19 10:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/terror">@terror</a> reviewed on 2025-11-20 17:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/terror">@terror</a> on <code>crates/uv/src/commands/project/export.rs</code>:302 on 2025-11-20 17:22</div>
            <div class="timeline-body"><p>Yeah I like this, just pushed up a change.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2025-11-20 18:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @konstin on 2025-11-20 18:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Prevent `uv export` from overwriting pyproject.toml" to "Prevent `uv export` from overwriting `pyproject.toml`" by @konstin on 2025-11-20 18:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/terror">@terror</a> on 2025-11-20 22:13</div>
            <div class="timeline-body"><p>@konstin Just pushed up a change to placate clippy.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2025-11-21 02:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2025-11-21 02:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-11-21 02:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-11-21 02:37</div>
            <div class="timeline-body"><!-- __CODSPEED_PERFORMANCE_REPORT_COMMENT__ -->

<h2><a href="https://codspeed.io/astral-sh/uv/branches/terror%3Aprevent-export-overwrite?utm_source=github&amp;utm_medium=comment&amp;utm_content=header">CodSpeed Performance Report</a></h2>
<h3>Merging #16745 will <strong>degrade performances by 29.69%</strong></h3>
<p><sub>Comparing <code>terror:prevent-export-overwrite</code> (8396e22) with <code>main</code> (d3a9455)</sub></p>
<h3>Summary</h3>
<p><code>❌ 1</code> regression<br />
<code>✅ 5</code> untouched</p>
<blockquote>
<p>:warning: <em>Please fix the performance issues or <a href="https://codspeed.io/astral-sh/uv/branches/terror%3Aprevent-export-overwrite?utm_source=github&amp;utm_medium=comment&amp;utm_content=acknowledge">acknowledge them on CodSpeed</a>.</em></p>
</blockquote>
<h3>Benchmarks breakdown</h3>
<p>|     | Mode | Benchmark | <code>BASE</code> | <code>HEAD</code> | Change |
| --- | ---- | --------- | ------ | ------ | ------ |
| ❌ | Simulation | <a href="https://codspeed.io/astral-sh/uv/branches/terror%3Aprevent-export-overwrite?uri=crates%2Fuv-bench%2Fbenches%2Fuv.rs%3A%3Auv%3A%3Aresolve_warm_airflow%3A%3Aresolve_warm_airflow&amp;runnerMode=Instrumentation&amp;utm_source=github&amp;utm_medium=comment&amp;utm_content=benchmark"><code>resolve_warm_airflow</code></a> | 795.8 ms | 1,131.9 ms | -29.69% |</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:52:32 UTC
    </footer>
</body>
</html>
