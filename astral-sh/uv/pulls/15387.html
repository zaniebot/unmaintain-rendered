<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>feat(ci): build loongarch64 binaries in CI - astral-sh/uv #15387</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>feat(ci): build loongarch64 binaries in CI</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/15387">#15387</a>
        opened by <a href="https://github.com/SkyBird233">@SkyBird233</a>
        on 2025-08-20 07:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/SkyBird233">@SkyBird233</a></div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<!-- What's the purpose of the change? What does it do, and why? -->

<p>This PR adds support for building loongarch64 binaries in CI. As uv itself runs perfectly well on loongarch64 and with the latter's userbase steadily growing, it would be a good idea to ship prebuilt binaries to help them out.</p>
<p>Please note that as Ubuntu is not yet available for loongarch64, I have elected to use a Debian Trixie container maintained by community members. In addition, as Debian's pip does not allow installing modules system-wide, the workflow for loongarch64 installs additional modules in a virtual environment.</p>
<h2>Test Plan</h2>
<!-- How was it tested? -->

<p>Tests are included in CI and the loongarch64 artifacts built in <a href="https://github.com/SkyBird233/uv/actions/runs/17091637376/job/48466486690">this workflow</a> has been smoke tested.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-21 00:52</div>
            <div class="timeline-body"><p>As with https://github.com/astral-sh/python-build-standalone/pull/653 I think we're blocked on clearing this with our lawyers first.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MingcongBai">@MingcongBai</a> on 2025-08-21 01:45</div>
            <div class="timeline-body"><blockquote>
<p>As with <a href="https://github.com/astral-sh/python-build-standalone/pull/653">astral-sh/python-build-standalone#653</a> I think we're blocked on clearing this with our lawyers first.</p>
</blockquote>
<p>Interesting... Just out of curiosity, what legal challenges/processes are we facing with this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/shauneccles">@shauneccles</a> on 2025-08-21 01:49</div>
            <div class="timeline-body"><p>Sanctions is my guess - https://www.tomshardware.com/news/us-govt-blacklists-loongson-and-inspur</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MingcongBai">@MingcongBai</a> on 2025-08-21 02:21</div>
            <div class="timeline-body"><blockquote>
<p>Sanctions is my guess - https://www.tomshardware.com/news/us-govt-blacklists-loongson-and-inspur</p>
</blockquote>
<p>Same guess as mine but was wondering if they could just say it outright.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-21 03:23</div>
            <div class="timeline-body"><p>Yeah, the sanctions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/xen0n">@xen0n</a> on 2025-08-21 12:26</div>
            <div class="timeline-body"><p>My two cents... (Disclaimer: IANAL and I'm Chinese, unaffiliated with Loongson though, so take my words with a grain of salt. I'm just trying to bring some constructive points forward because I am a LoongArch user and community contributor myself.)</p>
<p>Technically the sanctions only affect the company entity, and LoongArch is just an abstract ISA, even though right now all readily available LoongArch CPU models are from Loongson. And the contributor is not a Loongson employee AFAIK. So maybe having anything to do with this PR doesn't imply any relationship with or endorsement of Loongson?</p>
<p>On the other hand, like it or not politics is not going anywhere, and not producing LoongArch binaries wouldn't stop the community from doing so downstream, so maybe the net effect is just making community packagers' and LoongArch daily-drivers' lives harder. Is it possible to both keep being &quot;compliant&quot; and somehow not regress downstream UX when they want to just install <code>uv</code>, like allowing people to specify download mirrors or anything equivalent?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andypost">@andypost</a> on 2025-08-25 11:06</div>
            <div class="timeline-body"><p>Would be great to add this kind of testing as starting with 0.8.13 building <code>uv</code> fails for Alpinelinux on <code>rustix</code>
see the full log https://gitlab.alpinelinux.org/alpine/aports/-/jobs/1985668</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andypost">@andypost</a> on 2025-08-28 22:24</div>
            <div class="timeline-body"><p>0.8.14 fails too</p>
<pre><code>error[E0659]: `STATX_TYPE` is ambiguous
   --&gt; /home/buildozer/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/rustix-1.0.8/src/fs/statx.rs:73:25
    |
73  |         const TYPE = c::STATX_TYPE;
    |                         ^^^^^^^^^^ ambiguous name
    |
    = note: ambiguous because of multiple glob imports of a name in the same module
note: `STATX_TYPE` could refer to the constant imported here
   --&gt; /home/buildozer/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/rustix-1.0.8/src/backend/libc/c.rs:7:16
    |
7   | pub(crate) use libc::*;
    |                ^^^^^^^
    = help: consider adding an explicit import of `STATX_TYPE` to disambiguate
note: `STATX_TYPE` could also refer to the constant imported here
   --&gt; /home/buildozer/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/rustix-1.0.8/src/backend/libc/c.rs:512:16
    |
512 | pub(crate) use statx_flags::*;
    |                ^^^^^^^^^^^^^^
    = help: consider adding an explicit import of `STATX_TYPE` to disambiguate
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SkyBird233">@SkyBird233</a> on 2025-08-29 01:49</div>
            <div class="timeline-body"><p>FYI @andypost, here's the tracking issue for the rustix problem: bytecodealliance/rustix#1496. It appears to be unrelated to uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andypost">@andypost</a> on 2025-08-29 10:44</div>
            <div class="timeline-body"><p>@SkyBird233 thank you, following</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MingcongBai">@MingcongBai</a> on 2025-08-29 13:00</div>
            <div class="timeline-body"><blockquote>
<p>My two cents... (Disclaimer: IANAL and I'm Chinese, unaffiliated with Loongson though, so take my words with a grain of salt. I'm just trying to bring some constructive points forward because I am a LoongArch user and community contributor myself.)</p>
<p>Technically the sanctions only affect the company entity, and LoongArch is just an abstract ISA, even though right now all readily available LoongArch CPU models are from Loongson. And the contributor is not a Loongson employee AFAIK. So maybe having anything to do with this PR doesn't imply any relationship with or endorsement of Loongson?</p>
<p>On the other hand, like it or not politics is not going anywhere, and not producing LoongArch binaries wouldn't stop the community from doing so downstream, so maybe the net effect is just making community packagers' and LoongArch daily-drivers' lives harder. Is it possible to both keep being &quot;compliant&quot; and somehow not regress downstream UX when they want to just install <code>uv</code>, like allowing people to specify download mirrors or anything equivalent?</p>
</blockquote>
<p>Hi @zanieb, were you able to hear back from your lawyers?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-29 13:18</div>
            <div class="timeline-body"><p>I can't comment on that until we have a policy, sorry. We're working on it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MingcongBai">@MingcongBai</a> on 2025-08-29 13:22</div>
            <div class="timeline-body"><blockquote>
<p>I can't comment on that until we have a policy, sorry. We're working on it.</p>
</blockquote>
<p>Good to know, thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-05 21:01</div>
            <div class="timeline-body"><p>We can accept this change.</p>
<p>Before we do, I'm reflecting back on the RISCV changes that broke our release process, e.g., see https://github.com/astral-sh/uv/pull/14009. Do we need to do something here to prevent that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SkyBird233">@SkyBird233</a> on 2025-09-06 04:39</div>
            <div class="timeline-body"><p>Oh that's a point. Since there's no official loongarch64 support in <a href="https://github.com/pypa/manylinux/blob/main/README.rst">pypa/manylinux</a> right now, I'm filtering it out from the PyPI publishing workflow.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @SkyBird233 on 2025-09-06 04:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @SkyBird233 on 2025-09-06 04:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SkyBird233">@SkyBird233</a> on 2025-09-06 04:42</div>
            <div class="timeline-body"><p>My apologies, I accidentally closed the pull request while using the GitHub UI. I have reopened it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-09-06 11:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-09-06 11:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-09-06 11:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:44:27 UTC
    </footer>
</body>
</html>
