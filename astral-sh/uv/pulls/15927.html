<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document why uv discards upper bounds on `requires-python` - astral-sh/uv #15927</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Document why uv discards upper bounds on <code>requires-python</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/15927">#15927</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-09-18 09:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2025-09-18 09:04</div>
            <div class="timeline-body"><p>We're regularly get questions about this. The DPO thread is the best ressource, but it's also a long read, so I summarized some points for uv's decision.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @konstin on 2025-09-18 09:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 12:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:170 on 2025-09-18 12:59</div>
            <div class="timeline-body"><pre><code class="language-suggestion">For most projects, it's not possible to determine whether they will be compatible with a new Python
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:171 on 2025-09-18 12:59</div>
            <div class="timeline-body"><p>maybe?</p>
<pre><code class="language-suggestion">version before it's released, so blocking newer versions in advance would block users from
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 12:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 13:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:172 on 2025-09-18 13:00</div>
            <div class="timeline-body"><pre><code class="language-suggestion">upgrading or testing newer Python versions. The exceptions are packages which use the unstable C ABI
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 13:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:173 on 2025-09-18 13:01</div>
            <div class="timeline-body"><p>&quot;some of which uv handles&quot; is confusing here. Isn't this part of how <em>Python packaging</em> represents this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:178 on 2025-09-18 13:04</div>
            <div class="timeline-body"><p>This paragraph is pretty confusing. Maybe you should say &quot;Transitioning from not using upper bounds to including them is also problematic. For example, when a project adds a new upper bound to <code>requires-python</code>, attempts to install it on a new Python version will resolve to an older version of the project <em>without</em> the bound instead of failing.&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 13:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 13:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:168 on 2025-09-18 13:05</div>
            <div class="timeline-body"><p>&quot;informing uv's choice as a combination of aspects&quot; is confusing to me, what are you trying to say there?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 13:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:165 on 2025-09-18 13:06</div>
            <div class="timeline-body"><p>Should we just say &quot;ignored&quot;? &quot;propagation&quot; is a more complicated idea.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 13:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:182 on 2025-09-18 13:07</div>
            <div class="timeline-body"><p>This paragraph is also confusing :)</p>
<p>Can you tell me more about &quot;would potentially resolve differently for different upper bounds&quot;?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 13:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:189 on 2025-09-18 13:08</div>
            <div class="timeline-body"><p>&quot;This choice on the other hand is a problem for packages that ...&quot;</p>
<p>This is a wordy qualifier.</p>
<p>I'd say something like &quot;Ignoring upper bounds is problematic for packages that ...&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 13:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:195 on 2025-09-18 13:09</div>
            <div class="timeline-body"><p>&quot;reject a version due to a too high Python requirement&quot; is confusing. Maybe &quot;reject a package version when it requires a newer Python version&quot;?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-18 13:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/internals/resolver.md</code>:195 on 2025-09-18 13:11</div>
            <div class="timeline-body"><p>maybe instead of &quot;fork on that Python version&quot; we should just say &quot;fork the resolution to find appropriate package versions for both ranges of Python versions&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Document why uv discards upper bounds" to "Document why uv discards upper bounds on `requires-python`" by @zanieb on 2025-09-18 13:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/reference/internals/resolver.md</code>:168 on 2025-09-23 13:16</div>
            <div class="timeline-body"><p>It's like, go read the full discussion if you think we should change this, these docs won't (can't) cover all of it, but here's a summary of the parts most relevant to uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-09-23 13:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-09-23 14:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/reference/internals/resolver.md</code>:179 on 2025-09-23 14:11</div>
            <div class="timeline-body"><p>This section is basically saying that we tried that with poetry and it wasn't helpful</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-09-23 14:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/reference/internals/resolver.md</code>:183 on 2025-09-23 14:14</div>
            <div class="timeline-body"><p>I'm ignoring the option to split this into two fields here, or other advanced options such as ignoring the upper bound only on the current workspace, this is better documented in the DPO thread, and the other answer is that it's not worth doing that, if we wanted to add new metadata for e.g. the numba case then this should be a new PEP imho, so it's also rather for the DPO discussion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-09-23 14:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/reference/internals/resolver.md</code>:202 on 2025-09-23 14:16</div>
            <div class="timeline-body"><p>The irony that we're using an upper bound on Python here is not lost on me, though for package selection we're only using the lower bound again, the upper bound exists for internal coherence tracking (and for a lockfile optimization where we drop wheels outside the range).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2025-10-09 15:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-10-09 15:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-10-09 15:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Molkree">@Molkree</a> on <code>docs/reference/internals/resolver.md</code>:197 on 2025-10-10 14:09</div>
            <div class="timeline-body"><p>I think there's a typo here, supposed to be</p>
<blockquote>
<p>This means that</p>
</blockquote>
<p>@konstin</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Molkree">@Molkree</a> reviewed on 2025-10-10 14:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-10-10 15:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/reference/internals/resolver.md</code>:197 on 2025-10-10 15:45</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:30 UTC
    </footer>
</body>
</html>
