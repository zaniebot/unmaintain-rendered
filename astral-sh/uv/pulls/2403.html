<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add system install test for Amazon Linux - astral-sh/uv #2403</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add system install test for Amazon Linux</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/2403">#2403</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-03-13 03:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>Supersedes https://github.com/astral-sh/uv/pull/1534</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by @zanieb on 2024-03-13 03:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-13 03:41</div>
            <div class="timeline-body"><p>@charliermarsh this looks legitimately wrong? https://github.com/astral-sh/uv/actions/runs/8259113036/job/22592520139</p>
<p>Same failure over in #2402</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 03:51</div>
            <div class="timeline-body"><p>Not necessarily. It depends on what <code>sys.path</code> is. Where does <code>pip</code> install into? It's possible that that's the right place, and the directory just doesn't exist yet. (I genuinely don't know, I'm just saying it's possible we're wrong to assume the directory has to exist in advance.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-13 03:58</div>
            <div class="timeline-body"><p>In CentOS (I just have the image around locally):</p>
<pre><code>[root@bf9d80fad201 /]# python3 -c &quot;import sys; print(sys.path)&quot;
['', '/usr/lib64/python39.zip', '/usr/lib64/python3.9', '/usr/lib64/python3.9/lib-dynload', '/usr/lib64/python3.9/site-packages', '/usr/lib/python3.9/site-packages']
[root@d4f5af1c6ac6 /]# ls /usr/local/lib/python3.9/site-packages
ls: cannot access '/usr/local/lib/python3.9/site-packages': No such file or directory
[root@d4f5af1c6ac6 /]# python3 -m pip list
Package    Version
---------- -------
pip        20.2.4
setuptools 50.3.2
[root@bf9d80fad201 /]# python3 -m pip install pylint
WARNING: Running pip install with root privileges is generally not a good idea. Try `python3 -m pip install --user` instead.
Collecting pylint
  Downloading pylint-3.1.0-py3-none-any.whl (515 kB)
     |████████████████████████████████| 515 kB 2.2 MB/s 
Collecting mccabe&lt;0.8,&gt;=0.6
  Downloading mccabe-0.7.0-py2.py3-none-any.whl (7.3 kB)
Collecting astroid&lt;=3.2.0-dev0,&gt;=3.1.0
  Downloading astroid-3.1.0-py3-none-any.whl (275 kB)
     |████████████████████████████████| 275 kB 10.6 MB/s 
Collecting tomlkit&gt;=0.10.1
  Downloading tomlkit-0.12.4-py3-none-any.whl (37 kB)
Collecting typing-extensions&gt;=3.10.0; python_version &lt; &quot;3.10&quot;
  Downloading typing_extensions-4.10.0-py3-none-any.whl (33 kB)
Collecting platformdirs&gt;=2.2.0
  Downloading platformdirs-4.2.0-py3-none-any.whl (17 kB)
Collecting tomli&gt;=1.1.0; python_version &lt; &quot;3.11&quot;
  Downloading tomli-2.0.1-py3-none-any.whl (12 kB)
Collecting dill&gt;=0.2; python_version &lt; &quot;3.11&quot;
  Downloading dill-0.3.8-py3-none-any.whl (116 kB)
     |████████████████████████████████| 116 kB 11.4 MB/s 
Collecting isort!=5.13.0,&lt;6,&gt;=4.2.5
  Downloading isort-5.13.2-py3-none-any.whl (92 kB)
     |████████████████████████████████| 92 kB 662 kB/s 
Installing collected packages: mccabe, typing-extensions, astroid, tomlkit, platformdirs, tomli, dill, isort, pylint
Successfully installed astroid-3.1.0 dill-0.3.8 isort-5.13.2 mccabe-0.7.0 platformdirs-4.2.0 pylint-3.1.0 tomli-2.0.1 tomlkit-0.12.4 typing-extensions-4.10.0
[root@bf9d80fad201 /]# python3 -m pip show pylint
Name: pylint
Version: 3.1.0
Summary: python code static checker
Home-page: None
Author: None
Author-email: Python Code Quality Authority &lt;code-quality@python.org&gt;
License: GPL-2.0-or-later
Location: /usr/local/lib/python3.9/site-packages
Requires: platformdirs, isort, tomli, dill, astroid, tomlkit, typing-extensions, mccabe
Required-by: 
</code></pre>
<p>Suggests you're right — https://github.com/astral-sh/uv/issues/2404</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 04:00</div>
            <div class="timeline-body"><p>Yeah it does look like <code>pip</code> is installing into the same place. Although why isn't <code>/usr/local/lib/python3.9/site-packages</code> on <code>sys.path</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-13 04:08</div>
            <div class="timeline-body"><p>Oh yeah I read <code>/usr/lib/python3.9/site-packages</code> as <code>/usr/local/lib/...</code> umm I'm not sure :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 04:12</div>
            <div class="timeline-body"><p>Can you check that <code>import pylint</code> or whatever works in that Python?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 04:16</div>
            <div class="timeline-body"><p>Or you can share the Dockerfile and I can debug it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-13 14:13</div>
            <div class="timeline-body"><p><code>[root@d4f5af1c6ac6 /]# python3 -c &quot;import pylint&quot;</code> works</p>
<p>I'm just copy-pasting the setup commands for CentOS from the CI workflow</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-13 14:14</div>
            <div class="timeline-body"><p>Interestingly now the <code>sys.path</code> includes it</p>
<pre><code>[root@d4f5af1c6ac6 /]# python3 -c &quot;import sys; print(sys.path)&quot; 
['', '/usr/lib64/python39.zip', '/usr/lib64/python3.9', '/usr/lib64/python3.9/lib-dynload', '/usr/local/lib/python3.9/site-packages', '/usr/lib64/python3.9/site-packages', '/usr/lib/python3.9/site-packages']
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-13 14:15</div>
            <div class="timeline-body"><p>It gets added when you <code>pip</code> install something :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-13 14:16</div>
            <div class="timeline-body"><p>Or, more concretely, when it exists</p>
<pre><code>[root@f381759817d2 /]# python3 -c &quot;import sys; print(sys.path)&quot;
['', '/usr/lib64/python39.zip', '/usr/lib64/python3.9', '/usr/lib64/python3.9/lib-dynload', '/usr/lib64/python3.9/site-packages', '/usr/lib/python3.9/site-packages']
[root@f381759817d2 /]# mkdir -p '/usr/local/lib/python3.9/site-packages'
[root@f381759817d2 /]# python3 -c &quot;import sys; print(sys.path)&quot;
['', '/usr/lib64/python39.zip', '/usr/lib64/python3.9', '/usr/lib64/python3.9/lib-dynload', '/usr/local/lib/python3.9/site-packages', '/usr/lib64/python3.9/site-packages', '/usr/lib/python3.9/site-packages']
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-13 15:05</div>
            <div class="timeline-body"><p>Done in #2413 instead</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-03-13 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 15:05</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:36:04 UTC
    </footer>
</body>
</html>
