<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Print dependencies in uv pip list. - astral-sh/uv #10886</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Print dependencies in uv pip list.</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/pull/10886">#10886</a>
        opened by <a href="https://github.com/tjni">@tjni</a>
        on 2025-01-23 07:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tjni">@tjni</a></div>
            <div class="timeline-body">Summary
<p>This is controlled by the <code>--requires</code> and <code>--required-by</code> flags and only works when the output format is JSON.</p>
<p>This addresses part of <a href="https://github.com/astral-sh/uv/issues/4711">astral-sh/uv#4711</a>, but I agree with <a href="https://github.com/astral-sh/uv/issues/4711">astral-sh/uv#4711</a>#issuecomment-2205099775 that it belongs in <code>uv pip list</code> instead of <code>uv pip tree</code>. A few notes about this:</p>
<ol>
<li>I picked <code>--requires</code> and <code>--required-by</code> to match the <code>Requires</code> and <code>Required-By</code> fields that appear in the output of <code>uv pip show</code>.</li>
<li>I decided to return the dependencies as objects with a single field called <code>name</code>. This leaves the door open to add more fields to each dependency in the future, such as installed version and requested versions.</li>
</ol>
<p>I&#x27;m hoping to get some early feedback on this PR to test the temperature of this approach, before I proceed. The remaining work as I see it currently includes:</p>
<ul>
<li>[ ] Add tests for this feature.</li>
<li>[ ] Add documentation for this feature.</li>
<li>[ ] Better error messages (e.g. if used with the default column format, perhaps suggest <code>uv pip tree</code> instead).</li>
<li>[ ] Any code review suggestions (I&#x27;m a Rust novice).</li>
</ul>
Test Plan


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/Gankra">@Gankra</a> by <a href="https://github.com/Gankra">@Gankra</a> on 2025-01-23 14:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjni">@tjni</a> on 2025-01-23 20:30</div>
            <div class="timeline-body"><p>As I was doing more research about this, I noticed that <a href="https://github.com/pypa/pip/pull/11097">pypa/pip#11097</a> is prior art, where incorporating arbitrary metadata into the output of <code>pip list</code> was rejected in favor eventually of <code>pip inspect</code>. This brings up the question to us too about where to draw the line about what to include under this command. I&#x27;m not sure.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjni">@tjni</a> on 2025-01-31 08:16</div>
            <div class="timeline-body"><p>Hi team, wondering if youâ€™ve had a chance to think about if this is the right form factor for exposing this information. Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-cli/src/lib.rs</code>:1982 on 2025-02-03 22:30</div>
            <div class="timeline-body"><p>Based on the semantics you&#x27;ve implemented this seems like this should also include <code>conflicts_with = &quot;required_by&quot;</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-cli/src/lib.rs</code>:1985 on 2025-02-03 22:30</div>
            <div class="timeline-body"><p>Hmm what&#x27;s the usecase for having this opt out flag too?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv/src/commands/pip/list.rs</code>:163 on 2025-02-03 22:33</div>
            <div class="timeline-body"><p>I&#x27;d prefer to structure this as</p>
<pre><code>let requires_map = requires.then(|| { ... });
let required_by_map = required_by.then(|| { ... });
</code></pre>
<p>As-is it&#x27;s weird to have this shared variable for two conceptually independent results just because they happen to have the same type. It&#x27;s also not clear to me that these need to be mutually exclusive outputs? (And if that&#x27;s the case, ignore the note above about the cli conflicts_with)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-02-03 22:56</div>
            <div class="timeline-body"><p>Apologies for the delay! I think the basic idea looks reasonable, I mostly have a few quibbles about the structure.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-03 22:59</div>
            <div class="timeline-body"><p>I&#x27;m also wondering about how this fits into our CLI... like <code>uv pip list</code> has flags to show dependencies but this overlaps with <code>uv tree</code> right? There are also requests for things like <code>uv license</code> (<a href="https://github.com/astral-sh/uv/pull/10292">astral-sh/uv#10292</a>) to show license information. I&#x27;m sort of in favor of <code>uv inspect</code> / <code>uv show</code> to see metadata about packages instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-03 23:01</div>
            <div class="timeline-body"><p>I guess more broadly it&#x27;s unclear if we should have <code>uv list</code> which is an alternative to <code>uv tree</code> somehow? I find it confusing already that we have both <code>pip tree</code> and <code>pip list</code> commands.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:50:28 UTC
    </footer>
</body>
</html>
