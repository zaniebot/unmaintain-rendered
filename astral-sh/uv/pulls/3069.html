<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for .tar.bz2 source distributions - astral-sh/uv #3069</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for .tar.bz2 source distributions</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/3069">#3069</a>
        opened by <a href="https://github.com/sergeykolosov">@sergeykolosov</a>
        on 2024-04-16 17:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sergeykolosov">@sergeykolosov</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Source distributions in the .tar.bz2 format are still relatively common within the existing code-bases, namely, the most common examples are the Twisted source distributions up to the version 20.3.0. As quite so often the ability to upgrade Twisted to a more recent version is not available for a given project, we add the support for .tar.bz2 here to still allow <code>uv</code> to be a drop-in replacement for <code>pip</code> in these projects.</p>
<h2>Test Plan</h2>
<p>The feature was tested both by adding the corresponding test coverage, and by directly installing a package of interest under a Python version that doesn't have the corresponding wheel:</p>
<pre><code class="language-sh">cargo run venv -p python3.8
cargo run pip install Twisted==20.3.0 --no-cache
</code></pre>
<p>The <code>--no-cache</code> argument in the example above serves the purpose of cleaning the cached information regarding the unsatisfiability of the requirements, as it may have been cached during some previous attempt to install this package by <code>uv</code> version that didn't implement this feature yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Added support for .tar.bz2 source distributions" to "Add support for .tar.bz2 source distributions" by @sergeykolosov on 2024-04-16 17:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-04-16 17:59</div>
            <div class="timeline-body"><p>Thanks, this looks reasonable to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-04-16 18:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/pip_install.rs</code>:314 on 2024-04-16 18:00</div>
            <div class="timeline-body"><p>Can you change this to use <code>--no-binary twisted</code>, just to be sure that we aren't using the wheel? Also, can you make this a <code>pip sync</code> test instead to avoid the extra work downloading those other packages?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sergeykolosov">@sergeykolosov</a> reviewed on 2024-04-16 18:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sergeykolosov">@sergeykolosov</a> on <code>crates/uv/tests/pip_install.rs</code>:314 on 2024-04-16 18:01</div>
            <div class="timeline-body"><p>Sure, working on it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sergeykolosov">@sergeykolosov</a> reviewed on 2024-04-16 18:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sergeykolosov">@sergeykolosov</a> on <code>crates/uv/tests/pip_install.rs</code>:314 on 2024-04-16 18:28</div>
            <div class="timeline-body"><p>Pushed the changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-04-16 18:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/pip_install.rs</code>:314 on 2024-04-16 18:31</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-04-16 18:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-16 18:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-04-27 19:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:36:37 UTC
    </footer>
</body>
</html>
