<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `--bare` option to `uv init` - astral-sh/uv #11192</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>--bare</code> option to <code>uv init</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/11192">#11192</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-02-03 19:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>People are looking for a less opinionated version of <code>uv init</code>. The goal here is to create a <code>pyproject.toml</code> and nothing else. With the <code>--lib</code> or <code>--package</code> flags, we'll still configure a build backend but we won't create the source tree. This disables things like the default <code>description</code>, author behavior, and VCS.</p>
<p>See</p>
<ul>
<li>https://github.com/astral-sh/uv/issues/8178</li>
<li>https://github.com/astral-sh/uv/issues/7181</li>
<li>https://github.com/astral-sh/uv/issues/6750</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @zanieb on 2025-02-03 19:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/settings.rs</code>:252 on 2025-02-03 19:56</div>
            <div class="timeline-body"><p>This is a little dubious (implementation-wise), but I didn't want to get sucked into refactoring the <code>description</code> handling.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-02-03 19:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2025-02-03 19:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-03 19:56</div>
            <div class="timeline-body"><p>I'll want to add some prose documentation too, but let's see where this goes first.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @zanieb on 2025-02-03 19:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-03 20:19</div>
            <div class="timeline-body"><p>Also open to another name? I'm not sure what though.</p>
<p>Some people in the linked issues think this should be the default and everything else should be opt-in. I'm a little hesitant about that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-02-03 21:02</div>
            <div class="timeline-body"><blockquote>
<p>Some people in the linked issues think this should be the default and everything else should be opt-in. I'm a little hesitant about that.</p>
</blockquote>
<p>I do think this flag/mode is a good baseline for other flags to opt back into features. (<code>--bare --vcs=git ...</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-cli/src/lib.rs</code>:2584 on 2025-02-03 21:05</div>
            <div class="timeline-body"><p>huh, TIL</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> approved on 2025-02-03 21:08</div>
            <div class="timeline-body"><p>Don't have a strong opinion of the name but the impl seems reasonable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-02-03 21:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv/src/commands/project/init.rs</code>:878 on 2025-02-03 21:12</div>
            <div class="timeline-body"><p>Wait hold on shouldn't these be wrapped too (in a few places?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/edmorley">@edmorley</a> reviewed on 2025-02-03 21:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/edmorley">@edmorley</a> on <code>crates/uv-cli/src/lib.rs</code>:2523 on 2025-02-03 21:13</div>
            <div class="timeline-body"><p>I wonder whether <code>--bare</code> should still create a <code>.python-version</code> file (if one doesn't already exist), given how integral it is to the deterministic operation of uv? It seems like most of the feedback about unwanted files/content were about the <code>.py</code> files and directory nesting, rather than the <code>.python-version</code> file - so people might be fine with it left in?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-02-03 21:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:2523 on 2025-02-03 21:15</div>
            <div class="timeline-body"><p>People are sort of constantly complaining about the <code>.python-version</code> file actually :/</p>
<p>It don't think it's <strong>required</strong> for reasonably deterministic action if you have a <code>requires-python</code> in your project. You may be on a different version than someone else, but the lockfile will be consistent.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-02-03 21:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/project/init.rs</code>:878 on 2025-02-03 21:16</div>
            <div class="timeline-body"><p>It happens up at https://github.com/astral-sh/uv/pull/11192/files#diff-a459ffa6a304d440657379d39bdef792a801589e6f6cbf1ae01b50754ab5fa98R262</p>
<p>A little questionable, but makes the <code>--vcs git</code> behavior easier.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/edmorley">@edmorley</a> on <code>crates/uv-cli/src/lib.rs</code>:2523 on 2025-02-03 21:21</div>
            <div class="timeline-body"><blockquote>
<p>People are sort of constantly complaining about the <code>.python-version</code> file actually :/</p>
</blockquote>
<p>Yeah I've seen quite a few comments, but from what I remember they were in other issues (not about <code>uv init</code> defaults), and generally were about lack of understanding why the seemingly duplicate concepts were needed.</p>
<p>I think longer term perhaps campaigning for an additional Python version field to be added to the <code>pyproject.toml</code> spec would resolve the &quot;why do I need another file&quot; concerns, but for now I think having a pinned Python version via a <code>.python-version</code> file really is still important. Otherwise the day after uv adds support for eg Python 3.14, some developers on a project will end up using Python 3.14 (with lack of wheels), whereas others on their team (who may not have updated uv yet) could still be using Python 3.13 etc - leading to only some people seeing build failures (due to building from source), CI failures, lack of dev-prod parity etc.</p>
<p>It's very likely I'm going to make a missing <code>.python-version</code> file a hard error when deploying a uv app on Heroku for example.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/edmorley">@edmorley</a> reviewed on 2025-02-03 21:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-02-03 21:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:2523 on 2025-02-03 21:25</div>
            <div class="timeline-body"><p>Yeah, I think your take is fair.</p>
<p>My primary concern is that it doesn't make much sense to teach <code>--bare</code> if it does more than just create a <code>pyproject.toml</code> with standards-compliant fields. I'd rather add opt-in support via <code>--pin-python</code> and suggest using it.</p>
<p>It seems feasible that there'd be interest in a standard for a Python version pin in the <code>pyproject.toml</code>; especially now that there are dependency groups that do not require <code>[project]</code> metadata. I'm not excited about trying to pitch it though :D I agree this is the obvious long-term solution over a non-standard <code>.python-version</code> file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-02-05 16:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-02-05 16:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-02-05 16:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:41:50 UTC
    </footer>
</body>
</html>
