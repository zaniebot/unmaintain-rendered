<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow comments in `.python-version[s]` - astral-sh/uv #5350</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow comments in <code>.python-version[s]</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/5350">#5350</a>
        opened by <a href="https://github.com/j178">@j178</a>
        on 2024-07-23 16:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/j178">@j178</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Do the same thing as https://github.com/astral-sh/rye/pull/1038.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-23 16:48</div>
            <div class="timeline-body"><p>Check out <code>python_pin.rs</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @j178 on 2024-07-23 17:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/j178">@j178</a> on 2024-07-23 17:32</div>
            <div class="timeline-body"><p>Thanks, I added a test.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-07-23 17:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/python_pin.rs</code>:642 on 2024-07-23 17:46</div>
            <div class="timeline-body"><p>It'd be nice to use a <code>r#</code> string and split this over multiple lines for readability.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-07-23 17:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/python_pin.rs</code>:639 on 2024-07-23 17:47</div>
            <div class="timeline-body"><p>Any reason we need a child directory? The <code>context.temp_dir</code> should be fine, right? Then you don't need to set the working directory.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-07-23 17:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/j178">@j178</a> reviewed on 2024-07-23 17:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/j178">@j178</a> on <code>crates/uv/tests/python_pin.rs</code>:639 on 2024-07-23 17:51</div>
            <div class="timeline-body"><p>I'm testing both <code>.python-version</code> and <code>.python-versions</code> in the same test, so I want to separate them by using different subdirectory, otherwise only one of them will be utilized.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-07-23 17:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/python_pin.rs</code>:639 on 2024-07-23 17:53</div>
            <div class="timeline-body"><p>You could just test the one that has higher precedence first. edit: second* :)</p>
<p>I'd recommend separate tests though over creating subdirectories for mixed state in a single test.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-07-23 18:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>crates/uv/tests/python_pin.rs</code>:638 on 2024-07-23 18:37</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    let content = indoc::indoc! {r&quot;
        3.12
        # 3.11
        3.10
    &quot;};
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-07-23 18:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/python_pin.rs</code>:638 on 2024-07-23 18:54</div>
            <div class="timeline-body"><p>We use r#&quot;...&quot;# all over the place, idk if I have a preference.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-07-23 19:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>crates/uv/tests/python_pin.rs</code>:638 on 2024-07-23 19:24</div>
            <div class="timeline-body"><p>Do you prefer the following format?</p>
<pre><code class="language-rust">    let content = r&quot;
3.12

# 3.11
3.10
&quot;;

</code></pre>
<p>I made that suggestion because of a clippy error, <code>error: unnecessary hashes around raw string literal</code> encountered in the CI<a href="https://github.com/astral-sh/uv/actions/runs/10064000423/job/27820018371#step:5:54">^1</a>, as well as inconsistencies in indentation.</p>
<p>I don't have a strong preference but lean towards indentation with indoc, though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/python_pin.rs</code>:638 on 2024-07-23 19:37</div>
            <div class="timeline-body"><p>Sorry, just using the hashes as a stand-in for our general format (as in the example you shared). We usually skip using indoc to remove indentation since the tests are generally only singly-nested. I don't really have a preference though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-07-23 19:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2024-07-23 19:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-07-23 19:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-07-23 19:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @zanieb on 2024-07-23 19:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-07-23 23:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:38:20 UTC
    </footer>
</body>
</html>
