<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show 'closest' tag in tag incompatibility error messages - astral-sh/uv #10534</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Show &#x27;closest&#x27; tag in tag incompatibility error messages</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/10534">#10534</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2025-01-12 02:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body">Summary
<p>Here&#x27;s an example from <code>torch</code> on my M3:</p>
<pre><code>  × No solution found when resolving dependencies:
  ╰─▶ Because only the following versions of torch are available:
          torch==1.0.0
          torch==1.0.1
          torch==1.1.0
          torch==1.2.0
          torch==1.3.0
          torch==1.3.1
          torch==1.4.0
          torch==1.5.0
          torch==1.5.1
          torch==1.6.0
          torch==1.7.0
          torch==1.7.1
          torch==1.8.0
          torch==1.8.1
          torch==1.9.0
          torch==1.9.1
          torch==1.10.0
          torch==1.10.1
          torch==1.10.2
          torch==1.11.0
          torch==1.12.0
          torch==1.12.1
          torch==1.13.0
          torch==1.13.1
          torch==2.0.0
          torch==2.0.1
          torch==2.1.0
          torch==2.1.1
          torch==2.1.2
          torch==2.2.0
          torch==2.2.1
          torch==2.2.2
          torch==2.3.0
          torch==2.3.1
          torch==2.4.0
          torch==2.4.1
          torch==2.5.0
          torch==2.5.1
      and torch&lt;=2.4.1 has no wheels with a matching Python ABI tag (e.g., `cp313`), we can conclude that torch&lt;=2.4.1 cannot be used.
      And because torch&gt;=2.5.0 has no wheels with a matching platform tag (e.g., `macosx_14_0_arm64`) and you require torch, we can conclude that your requirements are unsatisfiable.

      hint: Wheels are available for `torch` (v2.4.1) with the following ABI tags: `cp38`, `cp39`, `cp310`, `cp311`, `cp312`. The closest match is `cp312-none-macosx_11_0_arm64`.

      hint: Wheels are available for `torch` (v2.5.1) on the following platform: `manylinux1_x86_64`. The closest match is `cp313-cp313-manylinux1_x86_64`.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-12 02:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-01-12 02:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-distribution-types/src/prioritized_distribution.rs</code>:584 on 2025-01-12 02:56</div>
            <div class="timeline-body"><p>This is really, really inefficient... It&#x27;s O(M*N) where M is the number of compatible tags and N is the number of wheels. But like... it will only run once, in the error reporting, so I think it&#x27;s kind of fine?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-13 22:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/konstin">@konstin</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-13 22:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-01-13 22:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/pubgrub/report.rs</code>:1639 on 2025-01-13 22:46</div>
            <div class="timeline-body"><p>I think @konsti had a nice suggestion, to say something like: &quot;A wheel exists for a different architecture&quot; (<a href="https://github.com/astral-sh/uv/issues/2777">astral-sh/uv#2777</a>#issuecomment-2588264790)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-13 23:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/pip_compile.rs</code>:13952 on 2025-01-13 23:07</div>
            <div class="timeline-body"><p>I&#x27;m not sure these help.</p>
<p>In this example, I get confused by the additional tags (e.g., <code>cp310</code>). Maybe it&#x27;d be helpful as &quot;The closest match to your platform (e.g., ...) is ...&quot;, but I&#x27;m not sure I follow the user experience this solves.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-13 23:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/pip_compile.rs</code>:13952 on 2025-01-13 23:08</div>
            <div class="timeline-body"><p>Separately, how is <code>cp310-cp310-win_amd64</code> the closest match to <code>manylinux_2_17_x86_64</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-13 23:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/pip_install_scenarios.rs</code>:4135 on 2025-01-13 23:08</div>
            <div class="timeline-body"><p>I imagine one wheel platform is rare, but should we show a closest match in this case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-01-13 23:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/it/pip_compile.rs</code>:13952 on 2025-01-13 23:26</div>
            <div class="timeline-body"><p>It should probably be <code>cp310-cp310-manylinux_2_27_x86_64 </code>. You don&#x27;t find that helpful?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-13 23:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/pip_compile.rs</code>:13952 on 2025-01-13 23:32</div>
            <div class="timeline-body"><p>I don&#x27;t think so. Maybe if I <em>also</em> had a Python compatibility error? I&#x27;m just not sure what I could do with that information, and a quick scan of the available tags is already showing where I&#x27;ve gone wrong.</p>
<p>What does knowing the closest tag change? Does it make a particular action clearer?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-14 03:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-14 03:33</div>
            <div class="timeline-body"><p>Just gonna close this. Other more impactful things to improve in these errors.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:50:16 UTC
    </footer>
</body>
</html>
