```yaml
number: 15959
title: Allow upgrading prerelease versions of the same minor Python version
type: pull_request
state: merged
author: zsol
labels:
  - bug
  - preview
  - uv python
assignees: []
merged: true
base: main
head: zsol/jj-nnvrymrotuon
created_at: 2025-09-20T11:39:26Z
updated_at: 2025-09-22T16:59:49Z
url: https://github.com/astral-sh/uv/pull/15959
synced_at: 2026-01-12T16:12:02Z
```

# Allow upgrading prerelease versions of the same minor Python version

---

_@zsol_

Turns out if the minor versions matched we returned false from `is_upgrade_of` instead of continuing to compare prerelease versions.

Closes #15955.

Note: test cases were initially generated by Claude - I tried making them shorter.

## Test plan

```
❯ cargo run -- -v python upgrade 3.14
[...]
DEBUG Inspecting existing executable at `/Users/zsol/.local/bin/python3.14`
DEBUG Replacing existing executable for `cpython-3.14.0rc2-macos-aarch64-none` at `/Users/zsol/.local/bin/python3.14` with executable for `cpython-3.14.0rc3-macos-aarch64-none` since it is an upgrade
DEBUG Updated executable at `/Users/zsol/.local/bin/python3.14` to cpython-3.14.0rc3-macos-aarch64-none
Installed Python 3.14.0rc3 in 5.04s
 + cpython-3.14.0rc3-macos-aarch64-none (python3.14)
[...]
❯ uvx python3.14 -V
Python 3.14.0rc3
```


---

_Label `bug` added by @zsol on 2025-09-20 11:41_

---

_Label `preview` added by @zsol on 2025-09-20 11:41_

---

_Label `uv python` added by @zsol on 2025-09-20 11:41_

---

_Marked ready for review by @zsol on 2025-09-20 11:50_

---

_@zanieb approved on 2025-09-22 16:57_

---

_Merged by @zanieb on 2025-09-22 16:59_

---

_Closed by @zanieb on 2025-09-22 16:59_

---

_Branch deleted on 2025-09-22 16:59_

---
