<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document why we ban URLs from index dependencies - astral-sh/uv #15929</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Document why we ban URLs from index dependencies</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/15929">#15929</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-09-18 09:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>Document why we ban URLs from index dependencies, and also what the lookahead resolver does.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @konstin on 2025-09-18 09:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zsol">@zsol</a> reviewed on 2025-09-20 12:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zsol">@zsol</a> on <code>docs/reference/internals/resolver.md</code>:184 on 2025-09-20 12:31</div>
            <div class="timeline-body"><p>it took me several takes to parse this bit, it could use a bit of restructuring. At the very least:</p>
<pre><code class="language-suggestion">plain package name, or a URL dependency: everything with a `{name} @ {url}` or a `git`,` url`,
`path`, or `workspace` source, or put differently, all Git, remote file, local file or local path
dependencies.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zsol">@zsol</a> reviewed on 2025-09-20 12:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zsol">@zsol</a> on <code>docs/reference/internals/resolver.md</code>:192 on 2025-09-20 12:34</div>
            <div class="timeline-body"><p>nit: might want to turn &quot;override&quot;, &quot;constraint&quot;, and maybe &quot;workspace member&quot; into a link that explains how to do these</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zsol">@zsol</a> reviewed on 2025-09-20 12:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zsol">@zsol</a> on <code>docs/reference/internals/resolver.md</code>:198 on 2025-09-20 12:34</div>
            <div class="timeline-body"><pre><code class="language-suggestion">auditing which URLs can be accessed. For example, when only using one index URL and no URL
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zsol">@zsol</a> on <code>docs/reference/internals/resolver.md</code>:205 on 2025-09-20 12:36</div>
            <div class="timeline-body"><pre><code class="language-suggestion">error: foo cannot be fulfilled, there is a resolver error. If URLs on index packages were allowed,
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zsol">@zsol</a> reviewed on 2025-09-20 12:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zsol">@zsol</a> reviewed on 2025-09-20 12:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zsol">@zsol</a> on <code>docs/reference/internals/resolver.md</code>:209 on 2025-09-20 12:42</div>
            <div class="timeline-body"><p>In other words: this is a limitation of uv's resolver implementation. In order to keep resolution time (and memory usage I assume) reasonably low, it assumes that the version universe is fixed during resolution, and no new versions can be discovered <em>during</em> the process.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zsol">@zsol</a> approved on 2025-09-20 12:43</div>
            <div class="timeline-body"><p>I think the first and last paragraphs could use a bit of refactoring, but otherwise lgtm</p>
<p><a href="https://gitme.me/image?url=https%3A%2F%2Fmedia3.giphy.com%2Fmedia%2FeEXxfHQJ0dWOrctI55%2Fgiphy.gif&token=nice" data-gitmeme-token="nice"><img src="https://media3.giphy.com/media/eEXxfHQJ0dWOrctI55/giphy.gif" title="Created by gitme.me with /nice"
        alt="nice"/></a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-09-23 14:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/reference/internals/resolver.md</code>:209 on 2025-09-23 14:53</div>
            <div class="timeline-body"><p>We could theoretically make it possible by fetching everything ahead of time and checking, but having to check every version reachable ruins performance. iirc no package manager supports this, it's not really possible to write a performant tool if you can't be incremental, just from the cost of looking at all packages.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/reference/internals/resolver.md</code>:209 on 2025-09-23 15:15</div>
            <div class="timeline-body"><p>It's hard to explain it with an example here to avoid having to explain the concept of resolution in the SAT sense and how you can't derive that a package-version in incompatible from a range of its dependency being exhaustively incompatible and how that's required to make both fast conclusions and to conclude failure for incompatible dependencies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-09-23 15:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2025-09-25 10:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-09-25 10:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-09-25 10:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:44:48 UTC
    </footer>
</body>
</html>
