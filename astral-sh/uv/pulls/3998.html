<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Respect `Requires-Python` in universal resolution - astral-sh/uv #3998</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Respect <code>Requires-Python</code> in universal resolution</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/3998">#3998</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-06-03 21:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body">Summary
<p>Closes #3982.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-03 21:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-03 22:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-03 23:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:994 on 2024-06-03 23:09</div>
            <div class="timeline-body"><p>Not a particularly clear message but it&#x27;s roughly the same as <code>echo &quot;pygls&gt;=1.1.0&quot; | cargo run pip compile --python-version 3.7 -</code> before any of my changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-03 23:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/konstin">@konstin</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-03 23:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-04 01:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:994 on 2024-06-04 01:17</div>
            <div class="timeline-body"><p>Here&#x27;s Poetry:</p>
<pre><code>The current project&#x27;s Python requirement (&gt;=3.7) is not compatible with some of the required packages Python requirement:
  - pygls requires Python &gt;=3.7.9,&lt;4, so it will not be satisfied for Python &gt;=3.7,&lt;3.7.9 || &gt;=4
  - pygls requires Python &gt;=3.7.9,&lt;4, so it will not be satisfied for Python &gt;=3.7,&lt;3.7.9 || &gt;=4
  - pygls requires Python &gt;=3.7.9,&lt;4, so it will not be satisfied for Python &gt;=3.7,&lt;3.7.9 || &gt;=4
  - pygls requires Python &gt;=3.7.9,&lt;4, so it will not be satisfied for Python &gt;=3.7,&lt;3.7.9 || &gt;=4
  - pygls requires Python &gt;=3.7.9,&lt;4, so it will not be satisfied for Python &gt;=3.7,&lt;3.7.9 || &gt;=4
  - pygls requires Python &gt;=3.8, so it will not be satisfied for Python &gt;=3.7,&lt;3.8
  - pygls requires Python &gt;=3.8, so it will not be satisfied for Python &gt;=3.7,&lt;3.8

Because no versions of pygls match &gt;1.1.0,&lt;1.1.1 || &gt;1.1.1,&lt;1.1.2 || &gt;1.1.2,&lt;1.2.0 || &gt;1.2.0,&lt;1.2.1 || &gt;1.2.1,&lt;1.3.0 || &gt;1.3.0,&lt;1.3.1 || &gt;1.3.1
 and pygls (1.1.0) requires Python &gt;=3.7.9,&lt;4, pygls is forbidden.
And because pygls (1.1.1) requires Python &gt;=3.7.9,&lt;4, pygls is forbidden.
And because pygls (1.1.2) requires Python &gt;=3.7.9,&lt;4
 and pygls (1.2.0) requires Python &gt;=3.7.9,&lt;4, pygls is forbidden.
And because pygls (1.2.1) requires Python &gt;=3.7.9,&lt;4
 and pygls (1.3.0) requires Python &gt;=3.8, pygls is forbidden.
So, because pygls (1.3.1) requires Python &gt;=3.8
 and poetry-test depends on pygls (&gt;=1.1.0), version solving failed.

  â€¢ Check your dependencies Python requirement: The Python requirement can be specified via the `python` or `markers` properties

    For pygls, a possible solution would be to set the `python` property to &quot;&gt;=3.7.9,&lt;4&quot;
    For pygls, a possible solution would be to set the `python` property to &quot;&gt;=3.7.9,&lt;4&quot;
    For pygls, a possible solution would be to set the `python` property to &quot;&gt;=3.7.9,&lt;4&quot;
    For pygls, a possible solution would be to set the `python` property to &quot;&gt;=3.7.9,&lt;4&quot;
    For pygls, a possible solution would be to set the `python` property to &quot;&gt;=3.7.9,&lt;4&quot;
    For pygls, a possible solution would be to set the `python` property to &quot;&gt;=3.8&quot;
    For pygls, a possible solution would be to set the `python` property to &quot;&gt;=3.8&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-resolver/src/python_requirement.rs</code>:85 on 2024-06-04 07:54</div>
            <div class="timeline-body"><p>Added the missing try_from conversion method for that in <a href="https://github.com/astral-sh/uv/pull/4010">astral-sh/uv#4010</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv/tests/lock.rs</code>:994 on 2024-06-04 08:00</div>
            <div class="timeline-body"><p>We should add a hint here that &quot;requested Python version&quot; refers to the version you declared in your pyproject.toml and that - unlike everything else - that version needs to stricter than the one in your dependencies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2024-06-04 08:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-04 13:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:994 on 2024-06-04 13:44</div>
            <div class="timeline-body"><p>Will do in a separate PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-04 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-04 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-04 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-04 13:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/python_requirement.rs</code>:85 on 2024-06-04 13:59</div>
            <div class="timeline-body"><p>Thx.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:45:41 UTC
    </footer>
</body>
</html>
