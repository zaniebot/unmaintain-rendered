<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add hint on build backend import with preview disabled - astral-sh/uv #9691</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add hint on build backend import with preview disabled</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/9691">#9691</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-12-06 17:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>See #9686</p>
<pre><code>‚ùØ uv run python -c &quot;import uv; uv.build_sdist&quot;
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/Users/zb/workspace/uv/python/uv/__init__.py&quot;, line 45, in __getattr__
    raise AttributeError(err)
AttributeError: Using `uv.build_sdist` is not allowed. The uv build backend requires preview mode to be 
                enabled, e.g., via the `UV_PREVIEW=1` environment variable.

‚ùØ uv run python -c &quot;import uv; uv.foo&quot;
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/Users/zb/workspace/uv/python/uv/__init__.py&quot;, line 48, in __getattr__
    raise AttributeError(err)
AttributeError: module 'uv' has no attribute 'foo'

‚ùØ uv run python -c &quot;import uv; uv.find_uv_bin&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @zanieb on 2024-12-06 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>python/uv/__init__.py</code>:44 on 2024-12-06 17:36</div>
            <div class="timeline-body"><p>If you're hitting this branch, you need <code>UV_PREVIEW=1</code>, that's e.g. with <code>python -m build</code>. For <code>uv build</code>, you usually want <code>--preview</code> which goes through the direct path, except for <code>uv build --force-pep517</code>, in which case you need <code>UV_PREVIEW=1</code>, which is why I had just put &quot;Use <code>UV_PREVIEW=1</code> and <code>--preview</code>&quot; on top of the docs.</p>
<p>We could also set preview through PEP 517 config settings, but that seems even worse.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2024-12-06 17:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2024-12-06 19:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-12-06 19:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>python/uv/__init__.py</code>:44 on 2024-12-06 19:33</div>
            <div class="timeline-body"><p>Just to confirm, is this asking for a change to what I wrote here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-12-06 19:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>python/uv/__init__.py</code>:44 on 2024-12-06 19:59</div>
            <div class="timeline-body"><p>I was only adding context on why this preview feature is complicated beyond the usual &quot;Add <code>--preview</code> to use&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-12-06 20:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>python/uv/__init__.py</code>:44 on 2024-12-06 20:07</div>
            <div class="timeline-body"><p>üëç sounds good, that makes sense to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2024-12-06 20:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-12-06 20:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-12-06 20:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:40:56 UTC
    </footer>
</body>
</html>
