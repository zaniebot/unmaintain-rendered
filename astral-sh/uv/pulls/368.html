<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add proper caching for pypi metadata fetching kinds - astral-sh/uv #368</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add proper caching for pypi metadata fetching kinds</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/368">#368</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-11-08 20:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>I intend this to become the main form of caching for puffin: You can make http requests, you tranform the data to what you really need, you have control over the cache key, and the cache is always json (or anything else much faster we want to replace it with as long as it's serde!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-11-09 00:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/puffin-client/src/client.rs</code>:216 on 2023-11-09 00:47</div>
            <div class="timeline-body"><p>So in theory we could change this to be a &quot;thin&quot; type rather than the full <code>Metadata21</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-11-09 10:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-client/src/client.rs</code>:216 on 2023-11-09 10:29</div>
            <div class="timeline-body"><p>Yes, that's very much intended here</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-11-09 10:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-cache/src/digest.rs</code>:5 on 2023-11-09 10:33</div>
            <div class="timeline-body"><p>This fixes a <code>cargo doc</code> warning</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @konstin on 2023-11-09 10:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>Cargo.toml</code>:17 on 2023-11-10 02:19</div>
            <div class="timeline-body"><p>Can we use a dedicated ref instead of a branch, for immtuability?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/puffin-cache/src/digest.rs</code>:5 on 2023-11-10 02:19</div>
            <div class="timeline-body"><p>Hmm, that's strange?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/puffin-dev/src/wheel_metadata.rs</code>:36 on 2023-11-10 02:21</div>
            <div class="timeline-body"><p>Is this a behavior change, or you just find it clearer?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>scripts/benchmarks/requirements/mst.in</code>:1 on 2023-11-10 02:21</div>
            <div class="timeline-body"><p>(Nit: maybe spell out the full name in the filename, for consistency?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-11-10 02:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-10 02:21</div>
            <div class="timeline-body"><p>Nice work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-11-10 09:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-cache/src/digest.rs</code>:5 on 2023-11-10 09:23</div>
            <div class="timeline-body"><p>It complained that the linked symbol is private</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-11-10 09:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-dev/src/wheel_metadata.rs</code>:36 on 2023-11-10 09:56</div>
            <div class="timeline-body"><p>I'd say it makes <code>RegistryClient</code> consistent with the rest of the codebase, which already uses a non-optional cache dir</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>Cargo.toml</code>:17 on 2023-11-10 10:54</div>
            <div class="timeline-body"><p>Done, will update when it's merged to upstream</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-11-10 10:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2023-11-10 11:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2023-11-10 11:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-11-10 11:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:34:42 UTC
    </footer>
</body>
</html>
