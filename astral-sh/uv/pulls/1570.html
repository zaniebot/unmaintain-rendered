<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support `venv --prompt` - astral-sh/uv #1570</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support <code>venv --prompt</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/1570">#1570</a>
        opened by <a href="https://github.com/methane">@methane</a>
        on 2024-02-17 04:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/methane">@methane</a></div>
            <div class="timeline-body">Summary
<p>This PR adds the <code>--prompt</code> option to <code>venv</code> subcommand.</p>
<p>The default behavior for <code>uv venv</code> is to create a virtual environment in the current directory with <code>.venv</code> name. This is different from <code>venv</code> / <code>virtualenv</code> where a user always needs to provide the virtual environment path. This allows us to define our own behavior in the default scenario (<code>uv venv</code>). We&#x27;ve decided to use the current directory&#x27;s name in that case.</p>
<p>Workflows:
| Command | Virtual Environment Name | Prompt |
|--------|--------|--------|
| <code>uv venv</code> | <code>.venv</code> (default) | Current directory name |
| <code>uv venv project</code> | <code>project</code> | <code>project</code> |
| <code>uv venv --prompt .</code> | <code>.venv</code> | Current directory name |
| <code>uv venv --prompt foobar</code> | <code>.venv</code> | <code>foobar</code> |
| <code>uv venv project --prompt foobar</code> | <code>project</code> | <code>foobar</code> |</p>
<p>Fixes #1445</p>
Test Plan
<p>This is my first Rust code and I don&#x27;t know how to write tests yet.
I just checked the behavior manually:</p>
<pre><code>$ cargo build
$ mkdir t
$ cd t
$ ../target/debug/uv venv -p 3.11
$ rg -w t .venv/bin/acti*
.venv/bin/activate.csh
13:setenv VIRTUAL_ENV &#x27;/Users/inada-n/work/uv/t/.venv&#x27;
20:if (&#x27;t&#x27; != &quot;&quot;) then
21:    setenv VIRTUAL_ENV_PROMPT &#x27;t&#x27;
23:    setenv VIRTUAL_ENV_PROMPT &quot;$VIRTUAL_ENV:t:q&quot;
38:    # in which case, $prompt is undefined and we wouldn&#x27;t

.venv/bin/activate
48:VIRTUAL_ENV=&#x27;/Users/inada-n/work/uv/t/.venv&#x27;
59:    VIRTUAL_ENV_PROMPT=&quot;t&quot;

.venv/bin/activate.fish
61:set -gx VIRTUAL_ENV &#x27;/Users/inada-n/work/uv/t/.venv&#x27;
73:if test -n &#x27;t&#x27;
74:    set -gx VIRTUAL_ENV_PROMPT &#x27;t&#x27;

.venv/bin/activate.ps1
40:if (&quot;t&quot; -ne &quot;&quot;) {
41:    $env:VIRTUAL_ENV_PROMPT = &quot;t&quot;

.venv/bin/activate.nu
6:# but then simply `deactivate` won&#x27;t work because it is just an alias to hide
35:    let virtual_env = &#x27;/Users/inada-n/work/uv/t/.venv&#x27;
50:    let virtual_env_prompt = (if (&#x27;t&#x27; | is-empty) {
53:        &#x27;t&#x27;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-02-17 04:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/main.rs</code>:1019 on 2024-02-17 04:27</div>
            <div class="timeline-body"><p>We should probably avoid getting the cwd if the prompt is not set to <code>.</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-02-17 04:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/main.rs</code>:1021 on 2024-02-17 04:28</div>
            <div class="timeline-body"><p>We try not to <code>unwrap()</code> in user-facing code, is there a safe way to get what you&#x27;re looking for here?</p>
<p>Will this be a confusing user experience if this ends up being <code>None</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> had review dismissed on 2024-02-17 04:30</div>
            <div class="timeline-body"><p>Thanks for your pull request! I have some comments to start.</p>
<p>I&#x27;m not sure what the best way to test this is either, you can see our current <code>venv</code> tests at https://github.com/astral-sh/uv/blob/main/crates/uv/tests/venv.rs ‚Äî I&#x27;d look into adding a snapshot there.</p>
<p>Here&#x27;s a resource about our snapshotting tool: https://insta.rs/docs/cli/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-17 04:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-17 04:30</div>
            <div class="timeline-body"><p>Also congrats on your first Rust pull request ‚ù§Ô∏è</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/methane">@methane</a> reviewed on 2024-02-17 05:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/methane">@methane</a> on <code>crates/uv/src/main.rs</code>:1019 on 2024-02-17 05:00</div>
            <div class="timeline-body"><p>I am totally newbie to Rust so I don&#x27;t know how to handle this lifetime issue.</p>
<pre><code>            let prompt = if args.prompt == &quot;.&quot; {
                match env::current_dir() {
                    Ok(cwd) =&gt; match cwd.file_name() {
                        Some(b) =&gt; b.to_str(),
                        None =&gt; None,
                    },
                    Err(_) =&gt; None,
                }
            } else {
                Some(args.prompt.as_str())
            };
</code></pre>
<pre><code>error[E0597]: `cwd` does not live long enough
    --&gt; crates/uv/src/main.rs:1021:38
     |
1019 |             let prompt = if args.prompt == &quot;.&quot; {
     |                 ------ borrow later stored here
1020 |                 match env::current_dir() {
1021 |                     Ok(cwd) =&gt; match cwd.file_name() {
     |                        ---           ^^^ borrowed value does not live long enough
     |                        |
     |                        binding `cwd` declared here
...
1024 |                     },
     |                     - `cwd` dropped here while still borrowed
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/uv/src/main.rs</code>:656 on 2024-02-17 05:18</div>
            <div class="timeline-body"><p>If I understand this correctly, then we would always default the prompt value to use the current directory name. This is different from the original behavior. What we want is:</p>
<ol>
<li>If the <code>--prompt</code> flag isn&#x27;t present, use the virtual environment name as the prompt value (what we currently do)</li>
<li>If the <code>--prompt</code> value is &quot;.&quot;, use the current directory name</li>
<li>Otherwise, use whatever the value is provided by the user</li>
</ol>
<p>This implementation is missing (1) behavior. This means that we would want to have an <code>Option&lt;String&gt;</code> here instead. If it&#x27;s <code>None</code>, then we&#x27;d go with (1) otherwise we&#x27;d go with either (2) or (3). You will need to change other references accordingly.</p>
<pre><code>    /// The prompt used in shells.
    #[clap(long)]
    prompt: Option&lt;String&gt;,
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/uv/src/main.rs</code>:1033 on 2024-02-17 05:28</div>
            <div class="timeline-body"><p>I think this logic should reside in <code>gourgeist::create_bare_venv</code> so that the behavior remains the same through the API and CLI similar to how the <a href="https://docs.python.org/3/library/venv.html#venv.EnvBuilder"><code>venv.EnvBuilder</code></a> does in standard library.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/gourgeist/src/main.rs</code>:37 on 2024-02-17 05:29</div>
            <div class="timeline-body"><p>This isn&#x27;t strictly required in this PR but I think it would be useful to provide the flag in the <code>gourgeist</code> CLI interface as well. You&#x27;ll find the argument struct in this file itself which can then be passed here.</p>
<p>This would allow you to test your implementation using the <code>gourgeist</code> CLI:</p>
<pre><code>cargo run --bin gourgeist -- ...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/gourgeist/src/bare.rs</code>:220 on 2024-02-17 05:31</div>
            <div class="timeline-body"><p>We don&#x27;t really want to add the entry in the <code>pyvenv.cfg</code> file is the user pass in  the <code>--prompt</code> flag. That&#x27;s the behavior of <code>venv</code> / <code>virtualenv</code>. I think we should match that for compatibility.</p>
<p>What you can do here is to add a new parameter to <code>write_cfg</code> below which would be an <code>Option</code> and then update the function to add the entry if it&#x27;s <code>Some</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/gourgeist/src/bare.rs</code>:168 on 2024-02-17 05:32</div>
            <div class="timeline-body"><p>nit: use <code>VIRTUAL_PROMPT</code> to match the original script. You&#x27;ll need to update the references in all of the activation scripts.</p>
<p>https://github.com/pypa/virtualenv/blob/fa283474fd199e3836f8b2c99510190c6b77e2bc/src/virtualenv/activation/bash/activate.sh#L58</p>
<pre><code>            .replace(&quot;{{ VIRTUAL_PROMPT }}&quot;, prompt)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> requested changes on 2024-02-17 05:37</div>
            <div class="timeline-body"><p>Thanks for creating this PR!</p>
<p>I was just playing around with <code>venv</code> / <code>virtualenv</code> when I saw this PR. That helped me understand what the original behavior is which means you don&#x27;t need to fiddle around with other tools ;)</p>
<p>There are a few changes required to be compatible with the <code>--prompt</code> flag from other tools.</p>
<p>From the implementation side, I&#x27;m not exactly sure but you might want to play around with either using <code>Option&lt;&amp;str&gt;</code> or <code>Option&lt;String&gt;</code> type for the prompt parameter in the <code>gourgeist::create_bare_venv</code> function. This is because we need to get the prompt value from the current working directory if it&#x27;s <code>Some(&quot;.&quot;)</code> which could lead into ownership problems. Feel free to ping me if you face any, I&#x27;m happy to help :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/dhruvmanila">@dhruvmanila</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-17 05:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/methane">@methane</a> reviewed on 2024-02-17 06:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/methane">@methane</a> on <code>crates/uv/src/main.rs</code>:656 on 2024-02-17 06:40</div>
            <div class="timeline-body"><blockquote>
<ul>
<li>If the <code>--prompt</code> flag isn&#x27;t present, use the virtual environment name as the prompt value (what we currently do)</li>
</ul>
</blockquote>
<p>There is an important difference between venv/virtualenv and uv venv.</p>
<p>venv/virtualenv was born before <code>.venv</code> become convention so they have mandatory ENV_DIR argument. It is natural to use ENV_DIR as the default prompt name.</p>
<p>On the other hand, uv venv uses <code>.venv</code> as ENV_DIR by default. But &quot;.venv&quot; is not good for default prompt.</p>
<p>How about changing default prompt by <code>name</code>? <code>prompt = if name == &quot;.venv&quot; { cwd.file_name() } else { name }</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/methane">@methane</a> on 2024-02-17 07:32</div>
            <div class="timeline-body">When name is specified
<pre><code>~/work/uv/t (git)-[support-prompt] % ../target/debug/uv venv -p 3.11 hoge
Using Python 3.11.7 interpreter at /opt/homebrew/opt/python@3.11/bin/python3.11
Creating virtualenv at: hoge
~/work/uv/t (git)-[support-prompt] % grep prompt hoge/pyvenv.cfg
prompt = hoge
</code></pre>
When name is omitted (.venv)
<pre><code>~/work/uv/t (git)-[support-prompt] % ../target/debug/uv venv -p 3.11
Using Python 3.11.7 interpreter at /opt/homebrew/opt/python@3.11/bin/python3.11
Creating virtualenv at: .venv
~/work/uv/t (git)-[support-prompt] % grep prompt .venv/pyvenv.cfg
prompt = t
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/methane">@methane</a> on <code>crates/uv/src/main.rs</code>:1033 on 2024-02-17 13:23</div>
            <div class="timeline-body"><p>I moved &quot;.&quot; to basename(cwd) logic to create_bare_venv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/methane">@methane</a> reviewed on 2024-02-17 13:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/methane">@methane</a> reviewed on 2024-02-17 13:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/methane">@methane</a> on <code>crates/gourgeist/src/bare.rs</code>:220 on 2024-02-17 13:31</div>
            <div class="timeline-body"><p>I changed <code>write_cfg()</code> to:</p>
<pre><code>        if !value.is_empty() {
            writeln!(f, &quot;{key} = {value}&quot;)?;
        }
</code></pre>
<p>&quot;prompt =&quot; is not written when promt is None.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-02-17 16:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/uv/src/main.rs</code>:656 on 2024-02-17 16:34</div>
            <div class="timeline-body"><blockquote>
<p>venv/virtualenv was born before <code>.venv</code> become convention so they have mandatory ENV_DIR argument. It is natural to use ENV_DIR as the default prompt name.</p>
</blockquote>
<p>Good point. Thanks for giving me the context on your decision.</p>
<blockquote>
<p>On the other hand, uv venv uses <code>.venv</code> as ENV_DIR by default. But &quot;.venv&quot; is not good for default prompt.</p>
</blockquote>
<p>This is why <code>--prompt</code> will exist ;)</p>
<p>What happens when a user provided a custom name for the virtual environment directory but the prompt still defaults to the current directory?</p>
<pre><code>$ cargo run --bin uv -- venv hello
    Finished dev [unoptimized + debuginfo] target(s) in 0.13s
     Running `target/debug/uv venv hello`
Using Python 3.12.1 interpreter at /Users/dhruv/.pyenv/versions/3.12.1/bin/python3.12
Creating virtualenv at: hello

$ source hello/bin/activate

$ bat .venv/pyvenv.cfg | grep prompt
prompt = uv

$ echo $VIRTUAL_ENV_PROMPT 
hello
</code></pre>
<p>I thought about what you&#x27;ve proposed but I still think we should stick with the original behavior for compatibility reason, not just with virtualenv / venv but with other tools which uses this information from either <code>VIRTUAL_ENV_PROMPT</code> or <code>pyvenv.cfg</code> file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/methane">@methane</a> reviewed on 2024-02-17 17:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/methane">@methane</a> on <code>crates/uv/src/main.rs</code>:656 on 2024-02-17 17:35</div>
            <div class="timeline-body"><blockquote>
<p>What happens when a user provided a custom name for the virtual environment directory but the prompt still defaults to the current directory?</p>
</blockquote>
<p>Then, current PR doesn&#x27;t set prompt. Activation script uses the venv directory name. This is same to venv/virtualenv.</p>
<pre><code>$ ../target/debug/uv venv -p 3.11 hello
Using Python 3.11.7 interpreter at /opt/homebrew/opt/python@3.11/bin/python3.11
Creating virtualenv at: hello

$ grep prompt hello/pyvenv.cfg

$ source hello/bin/activate

$ echo $VIRTUAL_ENV_PROMPT
hello
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/methane">@methane</a> reviewed on 2024-02-17 17:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/methane">@methane</a> on <code>crates/uv/src/main.rs</code>:656 on 2024-02-17 17:37</div>
            <div class="timeline-body"><p>The only difference in this PR from original virtualenv/venv is:</p>
<ul>
<li>if target directory is <code>.venv</code> (default), and</li>
<li>if prompt is not specified,</li>
<li>uv assumes <code>--prompt .</code> is specified.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-18 09:40</div>
            <div class="timeline-body"><p>Nice. We now also support batch files. Could you add the same logic to the activation.bat file?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-02-19 10:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/uv/src/main.rs</code>:656 on 2024-02-19 10:06</div>
            <div class="timeline-body"><p>Oh sorry, my example was incorrect. Yours is right.</p>
<p>I thought about this and I think what you proposed is a good default behavior:</p>
<ul>
<li>By default, use the current working directory as the prompt value</li>
<li>If the virtual environment path is provided, then use that as the prompt value</li>
<li>If <code>--prompt</code> is given<ul>
<li>Value is <code>.</code>, use current working directory name</li>
<li>Otherwise, use the value provided</li>
</ul>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/gourgeist/src/bare.rs</code>:37 on 2024-02-19 10:09</div>
            <div class="timeline-body"><p>This is probably good enough but I think it would be safe to use an additional argument. This creates a clear separation that all the <code>data</code> values are always present and that only <code>prompt</code> is optional. This will also avoid any future bugs where we avoid adding an entry just because the value is empty.</p>
<pre><code>fn write_cfg(f: &amp;mut impl Write, data: &amp;[(&amp;str, String); 8, prompt: Option&lt;String&gt;]) -&gt; io::Result&lt;()&gt; {
    for (key, value) in data {
        writeln!(f, &quot;{key} = {value}&quot;)?;
	}
	if let Some(prompt) = prompt {
		writeln!(f, &quot;prompt = {prompt}&quot;);
	}
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/uv/src/main.rs</code>:654 on 2024-02-19 10:12</div>
            <div class="timeline-body"><p>nit: to make it clear that this is an alternative to the default value used.</p>
<pre><code>    /// Provide an alternative prompt prefix for this environment
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/uv/src/main.rs</code>:1022 on 2024-02-19 10:18</div>
            <div class="timeline-body"><p>Can we use a <code>const</code> value here so as to avoid updating the default environment name in multiple places (in <code>VenvArgs</code>, and here)?</p>
<pre><code>const DEFAULT_VENV_NAME: &amp;str = &quot;.venv&quot;;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/gourgeist/src/bare.rs</code>:127 on 2024-02-19 10:55</div>
            <div class="timeline-body"><p>As <code>prompt</code> is now an <code>Option&lt;String&gt;</code>:</p>
<pre><code>    let prompt = match prompt {
        Some(&quot;.&quot;) =&gt; env::current_dir()?
            .file_name()
            .map(|name| name.to_string_lossy().to_string()),
        Some(p) =&gt; Some(p.to_string()),
        None =&gt; None,
    };
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/gourgeist/src/bare.rs</code>:185 on 2024-02-19 10:56</div>
            <div class="timeline-body"><p>Based on my suggestion of using <code>Option&lt;String&gt;</code>:</p>
<pre><code>            .replace(&quot;{{ VIRTUAL_PROMPT }}&quot;, prompt.as_deref().unwrap_or(&quot;&quot;))
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> approved on 2024-02-19 11:00</div>
            <div class="timeline-body"><p>I like the default behavior that you proposed. With that in mind, this is the final set of review comments and then it should be good to go.</p>
<p>It&#x27;s mainly a simplification of using <code>Option</code> to avoid using <code>is_empty</code> for every entry in <code>pyvenv.cfg</code>. This is to keep the invariant that other entries are always going to be written to the file while <code>prompt</code> is optional.</p>
<p>Thanks for your patience!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-02-19 11:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/uv/src/main.rs</code>:654 on 2024-02-19 11:05</div>
            <div class="timeline-body"><p>Can we add a description of what the promot is and what it is used for?</p>
<p>It also seems that the prompt value <code>.</code> has a special meaning that it uses the current working directory which isn&#x27;t clear otherwise. It also seems to default to <code>.</code> if you use <code>.venv</code> which might be surprising to users.</p>
<p>Is defaulting to <code>.</code> to use the current directory name the same as in pip? I wonder if we could come up with a design that uses less &quot;magical&quot; values</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-02-19 11:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/gourgeist/src/bare.rs</code>:67 on 2024-02-19 11:07</div>
            <div class="timeline-body"><p>Nit: It could make sense to define a custom <code>Prompt</code> enum instead of using <code>Option</code> that is explicit about the <code>.</code> meaning:</p>
<pre><code>enum Prompt {
	// Use the name of the directory containing the `.venv` as prompt
	DirectoryName,

	// Use this fixed name
	Static(Strring),

	// Don&#x27;t use a prompt
	None
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/methane">@methane</a> reviewed on 2024-02-19 12:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/methane">@methane</a> on <code>crates/uv/src/main.rs</code>:1022 on 2024-02-19 12:54</div>
            <div class="timeline-body"><p>Where is the best place for the const?</p>
<img alt="image" src="https://github.com/astral-sh/uv/assets/199592/d75cf8bb-c354-4471-940b-1378b4242974">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-02-19 19:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/uv/src/main.rs</code>:654 on 2024-02-19 19:04</div>
            <div class="timeline-body"><p>I&#x27;ve expanded the CLI docs with the default behavior which depends on the venv name and also with the list of possible values.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-02-19 19:13</div>
            <div class="timeline-body"><p>@methane Thanks a lot for initiating this effort! I made some small tweaks at the end to accommodate Micha&#x27;s recommendation:</p>
<ol>
<li>Expanding the CLI flag documentation</li>
<li>Using a custom enum <code>Prompt</code></li>
<li>Updated the PR description to list down the workflow</li>
</ol>
<p>Congrats on landing your first PR and welcome to Astral! ü•≥</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-02-19 19:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-02-19 19:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-02-20 04:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/frague59">@frague59</a> on 2024-02-21 21:00</div>
            <div class="timeline-body"><p>Great job guys !</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:43:41 UTC
    </footer>
</body>
</html>
