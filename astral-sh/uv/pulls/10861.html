<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add dependency-group cli flags to `uv pip install` and `uv pip compile` (`--group`, `--no-group`, `--only-group`, `--all-groups`) - astral-sh/uv #10861</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add dependency-group cli flags to <code>uv pip install</code> and <code>uv pip compile</code> (<code>--group</code>, <code>--no-group</code>, <code>--only-group</code>, <code>--all-groups</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/10861">#10861</a>
        opened by <a href="https://github.com/Gankra">@Gankra</a>
        on 2025-01-22 14:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a></div>
            <div class="timeline-body"><p>Ultimately this is a lot of settings plumbing and a couple minor pieces of Actual Logic (which are so simple I have to assume there&#x27;s something missing, but maybe not!).</p>
<p>Note this &quot;needlessly&quot; use DevDependencyGroup since it costs nothing, is more futureproof, and lets us maintain one primary interface (we just pass <code>false</code> for all the dev arguments).</p>
<p>Fixes #8590
Fixes #8969</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-01-22 14:57</div>
            <div class="timeline-body">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-01-22 15:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-settings/src/settings.rs</code>:1075 on 2025-01-22 15:06</div>
            <div class="timeline-body"><p>Whether these were supposed to pass through the shared PipOptions and not a side-thing was an uncertainty for me. Overall I assumed they&#x27;re equivalentish to the <code>extra</code> settings and those are here, so, seems fine?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:1033 on 2025-01-22 17:02</div>
            <div class="timeline-body"><p>Do we respect <code>default-groups</code> in the <code>uv pip</code> interface? I would think not (without thinking about it too hard)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:1035 on 2025-01-22 17:02</div>
            <div class="timeline-body"><p>Presumably just copy/paste, but we should swap these lines (throughout).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-configuration/src/dev.rs</code>:172 on 2025-01-22 17:05</div>
            <div class="timeline-body"><p>I&#x27;m not entirely sure about the correctness of this. Is this relying on some assumptions about the construction of <code>GroupsSpecification</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-requirements/src/sources.rs</code>:185 on 2025-01-22 17:05</div>
            <div class="timeline-body"><p>I don&#x27;t think groups can be defined in <code>setup.py</code> or <code>setup.cfg</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-requirements/src/sources.rs</code>:185 on 2025-01-22 17:06</div>
            <div class="timeline-body"><p>(Requires some documentation updates too)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-settings/src/settings.rs</code>:1075 on 2025-01-22 17:07</div>
            <div class="timeline-body"><p>Seems right to me, though the option abstractions are not my forte.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/pip_install.rs</code>:8375 on 2025-01-22 17:10</div>
            <div class="timeline-body"><p>What happens if multiple <code>pyproject.toml</code> files are provided? What happens if a group is present in one but not the other? If a group is present in both?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/reference/settings.md</code>:1726 on 2025-01-22 17:13</div>
            <div class="timeline-body"><p>Honestly I&#x27;m not sure why we support requesting extras in settings file like this. It seems correct to match the extras options for groups though?</p>
<p>Perhaps @charliermarsh understands the use-case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-22 17:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-01-22 17:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-configuration/src/dev.rs</code>:172 on 2025-01-22 17:23</div>
            <div class="timeline-body"><p>It is, but it&#x27;s a relatively mundane assumption imo.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-01-22 17:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-requirements/src/sources.rs</code>:185 on 2025-01-22 17:24</div>
            <div class="timeline-body"><p>Which docs? Happy to update &#x27;em.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-22 17:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-configuration/src/dev.rs</code>:172 on 2025-01-22 17:24</div>
            <div class="timeline-body"><p>Might be worth a comment saying what the assumption is, but don&#x27;t feel strongly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-22 17:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-requirements/src/sources.rs</code>:185 on 2025-01-22 17:25</div>
            <div class="timeline-body"><p>Basically everywhere it says &quot;Only applies to <code>pyproject.toml</code>, <code>setup.py</code>, and <code>setup.cfg</code> sources.&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-22 17:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/pip_install.rs</code>:8375 on 2025-01-22 17:26</div>
            <div class="timeline-body"><p>Similarly, what about <code>uv pip install &lt;dir&gt; --group &lt;name&gt;</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-01-22 18:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv/tests/it/pip_install.rs</code>:8375 on 2025-01-22 18:00</div>
            <div class="timeline-body"><p>I believe as currently implemented we:</p>
<ul>
<li>don&#x27;t complain if we fail to find a group in the toml</li>
<li>would independently match and include groups from every toml</li>
</ul>
<p>This falls out of the implementation basically being &quot;for each sourcefile, for each group in that sourcefile, if the selector built from cli flags matches the name of this group, append that group to the requirements&quot;.</p>
<p>not sure about the dir usecase</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-22 18:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/pip_install.rs</code>:8375 on 2025-01-22 18:06</div>
            <div class="timeline-body"><p>I think we should fail (or at the very least, warn) if we cannot find a group.</p>
<p>I don&#x27;t mind including groups from every toml, but we should have test coverage.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-22 18:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/pip_install.rs</code>:8375 on 2025-01-22 18:07</div>
            <div class="timeline-body"><p>We fail in <code>uv sync</code> fwiw</p>
<pre><code>❯ uv sync --group test
error: Group `test` is not defined in the project&#x27;s `dependency-group` table
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-01-22 18:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-cli/src/lib.rs</code>:1033 on 2025-01-22 18:57</div>
            <div class="timeline-body"><p>I pushed a commit removing this again, assuming you&#x27;re right.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-01-22 18:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-cli/src/lib.rs</code>:1035 on 2025-01-22 18:57</div>
            <div class="timeline-body"><p>Done.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-01-22 19:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-requirements/src/sources.rs</code>:185 on 2025-01-22 19:00</div>
            <div class="timeline-body"><p>Pushed a commit restricting to toml and updating all the doc strings, assuming you&#x27;re right.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-01-22 19:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-cli/src/lib.rs</code>:1033 on 2025-01-22 19:03</div>
            <div class="timeline-body"><p>Holy hell github&#x27;s UI is haunted and won&#x27;t let me unselect this textbox or cancel it, and constantly scrolls me back here, even if I refresh. I&#x27;m going to submit this comment here to see if that frees me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-01-22 19:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv-cli/src/lib.rs</code>:1033 on 2025-01-22 19:03</div>
            <div class="timeline-body"><p>Oh my god no it keeps making a new one it DEMANDS ELABORATION on this critical discussion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:1033 on 2025-01-22 19:09</div>
            <div class="timeline-body"><p>:D</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-22 19:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-22 19:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-requirements/src/sources.rs</code>:185 on 2025-01-22 19:09</div>
            <div class="timeline-body"><p>They definitely cannot be defined outside a <code>pyproject.toml</code> — the spec is just for that file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-01-22 20:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/uv/tests/it/pip_install.rs</code>:8375 on 2025-01-22 20:35</div>
            <div class="timeline-body"><p>Added warnings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add dependency-group cli flags to `uv pip install` and `uv pip compile` (`--group`, `--no-group`, `--no-default-groups`, `--only-group`, `--all-groups`)&quot; to &quot;Add dependency-group cli flags to `uv pip install` and `uv pip compile` (`--group`, `--no-group`, `--only-group`, `--all-groups`)&quot; by <a href="https://github.com/Gankra">@Gankra</a> on 2025-01-23 03:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/Gankra">@Gankra</a> on 2025-01-23 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Gankra">@Gankra</a> on 2025-01-23 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-23 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qvalentin">@qvalentin</a> on 2025-01-23 14:12</div>
            <div class="timeline-body"><p>Thanks @Gankra</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2025-01-23 16:54</div>
            <div class="timeline-body"><p>Not that this is does not match the proposed API for <code>pip</code>, so <code>pip</code> and <code>uv pip</code> would diverge. <a href="https://github.com/pypa/pip/pull/13065">pypa/pip#13065</a> is going to be merged soon.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-01-23 17:06</div>
            <div class="timeline-body"><p>Wow incredible timing. This won&#x27;t get released in uv until we&#x27;re happy with our interop story (will back this out if need be).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-23 17:08</div>
            <div class="timeline-body"><p>This is intended to be compatible with the proposed <code>pip</code> interface, i.e., we can implement it once it&#x27;s released. We have to deal with a bit more complexity because we allow <code>-r pyproject.toml</code> which <code>pip</code> has said they will not support.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Filimoa">@Filimoa</a> on 2025-01-31 15:19</div>
            <div class="timeline-body"><p>Is there another way of compiling development groups dependencies into a requirements.txt if this is no longer planned? I don&#x27;t see anything in the docs or issues so just wondering if it&#x27;s possible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-31 15:24</div>
            <div class="timeline-body"><p>If you use <code>uv lock</code>, you can then <code>uv export</code> into a <code>requirements.txt</code> today. (We still plan to ship this, we just deferred it for a bit.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2025-01-31 15:51</div>
            <div class="timeline-body"><p>And <a href="https://github.com/pypa/pip/pull/13065">pypa/pip#13065</a> should be about ready to go in, it&#x27;s already got an approval. You can also use <code>uvx dependency-groups &gt; requirements.txt</code> if you want them unlocked.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:50:26 UTC
    </footer>
</body>
</html>
