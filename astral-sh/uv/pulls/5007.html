<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `--no-pager` option in `help` command - astral-sh/uv #5007</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>--no-pager</code> option in <code>help</code> command</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/5007">#5007</a>
        opened by <a href="https://github.com/silvanocerza">@silvanocerza</a>
        on 2024-07-12 13:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/silvanocerza">@silvanocerza</a></div>
            <div class="timeline-body">Summary
<p>Fixes #4941.</p>
<p>This PR adds a <code>--no-pager</code> option in <code>help</code> command to explicitly disable the pager.</p>
<p>I noted that the template used for the text printed when calling <code>help</code> with no argument or option doesn&#x27;t show any option. It made sense before this PR since <code>help</code> didn&#x27;t have any available option. Though I&#x27;m unsure if it makes sense to update the template as it would make it extremely verbose as all the global options would be shown too.</p>
<p>I leave the decision to you.</p>
Test Plan
<p>I ran <code>cargo run -- help</code> to verify <code>--isolated</code> was visible and it.
I ran clippy with <code>cargo clippy --workspace --all-targets --all-features --locked -- -D warnings</code> as CI does.</p>
<p>I also ran tests locally with:</p>
<pre><code>cargo nextest run \
            --features python-patch \
            --workspace \
            --status-level skip --failure-output immediate-final --no-fail-fast -j 12 --final-status-level slow
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-07-12 14:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/help.rs</code>:70 on 2024-07-12 14:20</div>
            <div class="timeline-body"><p>Maybe we should collapse these into a <code>should_page</code> bool haha it&#x27;s getting kind of long.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-12 14:26</div>
            <div class="timeline-body"><blockquote>
<p>I noted that the template used for the text printed when calling help with no argument or option doesn&#x27;t show any option.</p>
</blockquote>
<p>Hm yeah this is tough. We may need to manually write out the help template so it includes the options for the command? Unless there&#x27;s a way to turn off the global options (I don&#x27;t think there is)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-07-12 14:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/help.rs</code>:673 on 2024-07-12 14:27</div>
            <div class="timeline-body"><p>We never page for the root command so <code>--no-pager</code> should have no effect here (we also can&#x27;t page during snapshots so it&#x27;s kind of moot).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-07-12 14:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-12 14:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-12 14:29</div>
            <div class="timeline-body"><p>Thanks for contributing! Congrats on the first pull request :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/silvanocerza">@silvanocerza</a> reviewed on 2024-07-12 15:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/silvanocerza">@silvanocerza</a> on <code>crates/uv/tests/help.rs</code>:673 on 2024-07-12 15:05</div>
            <div class="timeline-body"><p>Should I remove the test then?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/silvanocerza">@silvanocerza</a> reviewed on 2024-07-12 15:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/silvanocerza">@silvanocerza</a> on <code>crates/uv/src/commands/help.rs</code>:70 on 2024-07-12 15:05</div>
            <div class="timeline-body"><p>Will do! üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/silvanocerza">@silvanocerza</a> on 2024-07-12 15:07</div>
            <div class="timeline-body"><blockquote>
<p>Hm yeah this is tough. We may need to manually write out the help template so it includes the options for the command? Unless there&#x27;s a way to turn off the global options (I don&#x27;t think there is)</p>
</blockquote>
<p>Looking at the <a href="https://docs.rs/clap/latest/clap/struct.Command.html#method.help_template">template documentation</a> doesn&#x27;t seem like there&#x27;s a way to separate them. üòï</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-07-12 15:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/help.rs</code>:673 on 2024-07-12 15:09</div>
            <div class="timeline-body"><p>Seems nice to confirm that the option exists and works. Maybe just add a comment noting that we can&#x27;t actually check if the pager is used?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/silvanocerza">@silvanocerza</a> on 2024-07-12 15:17</div>
            <div class="timeline-body"><p>Fixed all the things you pointed out.</p>
<p>I also rebased to bring the changes from #5005 or the new test would have failed right after merging in <code>main</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-12 16:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-12 16:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-07-13 08:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:46:31 UTC
    </footer>
</body>
</html>
