<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support syncing for virtual workspaces - astral-sh/uv #4555</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support syncing for virtual workspaces</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/4555">#4555</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-06-26 17:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body">Summary
<p>Right now, <code>uv sync</code> and <code>uv run</code> fail when run from a virtual workspace. This PR adds support by syncing the entire workspace environment.</p>
<p>Closes <a href="https://github.com/astral-sh/uv/issues/4541">astral-sh/uv#4541</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-26 17:01</div>
            <div class="timeline-body"><p>Does this even make sense? A virtual workspace doesn&#x27;t have any &quot;dependencies&quot;. So what does it mean to run a command in a virtual workspace?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-26 17:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-26 17:14</div>
            <div class="timeline-body"><p>I guess that&#x27;s the crucial question: should you be able to <code>uv run</code> in a virtual workspace. The virtual workspace has no package, so it has no dependencies. It&#x27;s not represented in the lockfile at all. So how would we sync it, if not by syncing the entire workspace?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mjclarke94">@mjclarke94</a> on 2024-06-26 23:39</div>
            <div class="timeline-body"><p>Could the run command make sense in the context of integration/cross-package tests?</p>
<p>Say you had a virtual workspace containing several namespace packages with their own isolated unit test suites. You could come up with a set of tests which only make sense in the context of having several of these packages installed at once.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-06-27 08:26</div>
            <div class="timeline-body"><p>The original design for workspaces to be centered around <code>uv run</code>, so that when you run an entrypoint from a package or a command in a package you would get only the dependencies from that package. My preferred way of handling this would be:</p>
<ul>
<li>Add <code>uv sync --package</code> (work like <code>--extra</code>, also <code>--all-packages</code>), that works like <code>uv run --package</code></li>
<li>Add a <code>tool.uv.default-packages = [&quot;...&quot;, &quot;...&quot;]</code> setting (<a href="https://github.com/astral-sh/uv/issues/3625">astral-sh/uv#3625</a>) for virtual workspaces that sets the default packages to install when running <code>uv sync</code> or <code>uv run</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 14:10</div>
            <div class="timeline-body"><p>This got solved separately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 14:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:46:08 UTC
    </footer>
</body>
</html>
