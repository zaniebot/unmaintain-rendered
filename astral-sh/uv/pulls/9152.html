<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add --gui-script flag for running Python scripts with pythonw.exe on … - astral-sh/uv #9152</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add --gui-script flag for running Python scripts with pythonw.exe on …</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/9152">#9152</a>
        opened by <a href="https://github.com/rajko-rad">@rajko-rad</a>
        on 2024-11-15 14:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/rajko-rad">@rajko-rad</a> on 2024-11-15 14:58</div>
            <div class="timeline-body"><p>Addresses #6805</p>
<h2>Summary</h2>
<p>This PR adds a <code>--gui-script</code> flag to <code>uv run</code> that allows running Python scripts with <code>pythonw.exe</code> on Windows, regardless of file extension. This solves the issue where users need to maintain duplicate <code>.py</code> and <code>.pyw</code> files to run the same script with and without a console window.</p>
<p>The implementation follows the pattern established by the existing <code>--script</code> flag, but uses <code>pythonw.exe</code> instead of <code>python.exe</code> on Windows. On non-Windows platforms, the flag is present but returns an error indicating it's Windows-only functionality.</p>
<p>Changes:</p>
<ul>
<li>Added <code>--gui-script</code> flag (Windows-only)</li>
<li>Added Windows test to verify GUI script behavior</li>
<li>Added non-Windows test to verify proper error message</li>
<li>Updated CLI documentation</li>
</ul>
<h2>Test Plan</h2>
<p>The changes are tested through:</p>
<ol>
<li><p>New Windows-specific test that verifies:</p>
<ul>
<li>Script runs successfully with <code>pythonw.exe</code> when using <code>--gui-script</code></li>
<li>Console output is suppressed in GUI mode but visible in regular mode</li>
<li>Same script can be run both ways without modification</li>
</ul>
</li>
<li><p>New non-Windows test that verifies:</p>
<ul>
<li>Appropriate error message when <code>--gui-script</code> is used on non-Windows platforms</li>
</ul>
</li>
<li><p>Documentation updates to clearly indicate Windows-only functionality</p>
</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-11-15 15:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @konstin on 2024-11-15 15:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-15 20:31</div>
            <div class="timeline-body"><p>You can add an ignore for that Clippy complaint, if you want — or we will. We generally take our time about splitting those bools out into a struct.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-11-18 15:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/run.rs</code>:2777 on 2024-11-18 15:42</div>
            <div class="timeline-body"><p>Should this be using <code>--gui-script</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-18 15:49</div>
            <div class="timeline-body"><p>Nice! I made some minor tweaks and have one blocking question.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/samypr100">@samypr100</a> reviewed on 2024-11-21 00:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/samypr100">@samypr100</a> on <code>crates/uv/tests/it/run.rs</code>:2777 on 2024-11-21 00:43</div>
            <div class="timeline-body"><p>Agreed, but would this pass with exit code 0 on a headless windows CI run?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by @samypr100 on 2024-11-21 00:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rajko-rad">@rajko-rad</a> on 2024-11-21 15:56</div>
            <div class="timeline-body"><blockquote>
<p>You can add an ignore for that Clippy complaint, if you want — or we will. We generally take our time about splitting those bools out into a struct.</p>
</blockquote>
<p>Perfect thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/rajko-rad">@rajko-rad</a> reviewed on 2024-11-21 15:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/rajko-rad">@rajko-rad</a> on <code>crates/uv/tests/it/run.rs</code>:2777 on 2024-11-21 15:57</div>
            <div class="timeline-body"><p>you are right, and I'm slightly confused why/how we passed tests with that typo... Changing now and will see how it behaves!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rajko-rad">@rajko-rad</a> on 2024-11-22 20:02</div>
            <div class="timeline-body"><blockquote>
<p>Nice! I made some minor tweaks and have one blocking question.</p>
</blockquote>
<p>Ok, blocking question addressed! For some reason I am getting a linting error that I think isn't real, see below?
Lint error:
<img src="https://github.com/user-attachments/assets/63209259-b371-4e2e-90a5-5a80af541d6f" alt="image" /></p>
<p>Current codebase
<img src="https://github.com/user-attachments/assets/75de4579-b38f-4f86-9ae7-d3031d469b34" alt="image" /></p>
<p>There isn't a double space, not sure what is causing the error...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-27 16:00</div>
            <div class="timeline-body"><p>The difference is some trailing whitespace</p>
<img width="596" alt="Screenshot 2024-11-27 at 10 00 39 AM" src="https://github.com/user-attachments/assets/b52bc216-df26-406f-b3ab-b949553ef839">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-11-27 16:01</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-10 20:35</div>
            <div class="timeline-body"><p>Just got super confused that this wasn't merged — not sure what happened there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2024-12-10 20:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-12-10 20:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:14 UTC
    </footer>
</body>
</html>
