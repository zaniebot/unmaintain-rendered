<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set file timestamp from mirror source - astral-sh/uv #17137</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Set file timestamp from mirror source</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/pull/17137">#17137</a>
        opened by <a href="https://github.com/keestux">@keestux</a>
        on 2025-12-15 22:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/keestux">@keestux</a> on 2025-12-15 22:09</div>
            <div class="timeline-body"><p>The create-python-mirror.py script will now set the timestamp of the downloaded files.</p>
<!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>Set the timestamp of the downloaded files as found on the originating server.</p>
<h2>Test Plan</h2>
<p>Basically run the mirror script and afterwards check the timestamp of newly
downloaded files. The timestamps will be different from the current time.
Files that were already present (with correct checksum) will not be changed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-16 09:08</div>
            <div class="timeline-body"><p>Why do we need the file timestamp for it if we already have the SHA check?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/keestux">@keestux</a> on 2025-12-16 09:27</div>
            <div class="timeline-body"><blockquote>
<p>Why do we need the file timestamp for it if we already have the SHA check?</p>
</blockquote>
<p>It's a convenience. I'm copying the downloaded files to some other location with <code>rsync -ia ...</code>, the output will be more informative if unchanged files are skipped. Also, if I want to clean up old files I need useful timestamps.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-16 10:11</div>
            <div class="timeline-body"><p>I wouldn't manually backdate the timestamps of files, since it can break e.g. the rsync workflow you mentioned, where rsync would then skip those files even though they were actually updated. Since the file doesn't change after the first download, rsync shouldn't re-copy it.</p>
<p>Regarding cleaning up files, it seems that the timestamp is the wrong measure for this (especially backdated ones), and should rather be based on what files the deployment needs.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:52:39 UTC
    </footer>
</body>
</html>
