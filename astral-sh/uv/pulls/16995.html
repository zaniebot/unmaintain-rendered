<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ignore pyproject index username in lockfile comparison - astral-sh/uv #16995</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Ignore pyproject index username in lockfile comparison</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/pull/16995">#16995</a>
        opened by <a href="https://github.com/jkipper">@jkipper</a>
        on 2025-12-05 07:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/jkipper">@jkipper</a> on 2025-12-05 07:43</div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>Pyproject.toml index url may contain a username while lockfile doesn't. Treat it as the same index to prevent unintended package updates</p>
<p>Fixes #16436</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-06 00:27</div>
            <div class="timeline-body"><p>Do you have an integration test, e.g., for <code>uv lock</code> that demonstrates that this fixes https://github.com/astral-sh/uv/issues/16436 ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkipper">@jkipper</a> on 2025-12-08 14:58</div>
            <div class="timeline-body"><p>Not directly, turns out I did not add the part that actually caused the issue in that. Still not sure why I found that correlation but it's not happening that way anymore and the username part is what I was actually seeing. (I originally reported that issue)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-08 17:04</div>
            <div class="timeline-body"><p>Sorry I don't quite understand what you mean.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkipper">@jkipper</a> on 2025-12-08 18:12</div>
            <div class="timeline-body"><p>I reported that issue based on my observation that it was related to which sort of packaging was used, but the upgrade was actually caused by adding a username to an index.</p>
<p>So this fixes the linked issue, but the actual cause wasn't included when I reported it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-08 18:35</div>
            <div class="timeline-body"><p>I think we need an integration test case that demonstrates the change in behavior this pull request causes, i.e., at the <code>uv lock</code> level</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkipper">@jkipper</a> on 2025-12-09 14:11</div>
            <div class="timeline-body"><p>Got it. Added one now.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:31 UTC
    </footer>
</body>
</html>
