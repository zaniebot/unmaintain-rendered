<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for respecting `VIRTUAL_ENV` in project commands via `--active` - astral-sh/uv #11189</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for respecting <code>VIRTUAL_ENV</code> in project commands via <code>--active</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/11189">#11189</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-02-03 18:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>I think <code>UV_PROJECT_ENVIRONMENT</code> is too complicated for use-cases where the user wants to sync to the active environment. I don't see a compelling reason not to make opt-in easier. I see a lot of questions about how to deal with this warning in the issue tracker, but it seems painful to collect them here for posterity.</p>
<p>A notable behavior here â€” we'll treat this as equivalent to <code>UV_PROJECT_ENVIRONMENT</code> so... if you point us to a valid virtual environment that needs to be recreated for some reason (e.g., new Python version request), we'll happily delete it and start over.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @zanieb on 2025-02-03 18:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-03 18:56</div>
            <div class="timeline-body"><p>I'm also considering support for <code>UV_PROJECT_ENVIRONMENT=ACTIVE</code>, <code>UV_PROJECT_ENVIRONMENT=VIRTUAL_ENV</code>, or <code>UV_PROJECT_USE_ACTIVE</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2025-02-03 19:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @zanieb on 2025-02-03 19:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danielhollas">@danielhollas</a> on 2025-02-05 10:27</div>
            <div class="timeline-body"><p>Another advantage of a dedicated flag is discoverability via command help. I was not aware of UV_PROJECT_ENVIRONMENT until now. <code>uv sync --help | grep UV_PROJECT</code> returns nothing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-05 15:17</div>
            <div class="timeline-body"><p>Well, <code>UV_PROJECT_ENVIRONMENT</code> was intended to unblock people in edge-cases, it wasn't intended for use in normal workflows.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2025-02-05 15:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-05 15:22</div>
            <div class="timeline-body"><p>I think we should add this to the docs too before shipping.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-02-05 16:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-02-05 16:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-02-05 16:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zmeir">@zmeir</a> on 2025-02-06 06:55</div>
            <div class="timeline-body"><p>Thank you for this @zanieb !</p>
<p>I've been hit by this &quot;issue&quot; several times. From what I've seen, this mostly happens (to me at least) when I'm working on a project with a virtual env created by PyCharm - it creates <code>venv</code> by default, but <code>UV_PROJECT_ENVIRONMENT</code> defaults to <code>.venv</code>. And so I get this warning, delete <code>.venv</code>, and run the command again with <code>UV_PROJECT_ENVIRONMENT=venv</code>.<br />
This will definitely help ðŸ˜ƒ</p>
<p>One follow-up question though:<br />
Is it possible to set <code>--active</code> as the default via config? Alternatively, is it possible to change the default <code>UV_PROJECT_ENVIRONMENT</code> via config?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:41:50 UTC
    </footer>
</body>
</html>
