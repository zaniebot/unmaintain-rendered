<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for development dependencies - astral-sh/uv #4036</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for development dependencies</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/4036">#4036</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-06-05 02:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-05 02:54</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Externally, development dependencies are currently structured as a flat list of PEP 580-compatible requirements:</p>
<pre><code class="language-toml">[tool.uv]
dev-dependencies = [&quot;werkzeug&quot;]
</code></pre>
<p>When locking, we lock all development dependencies; when syncing, users can provide <code>--dev</code>.</p>
<p>Internally, though, we model them as dependency groups, similar to Poetry, PDM, and <a href="https://peps.python.org/pep-0735">PEP 735</a>. This enables us to change out the user-facing frontend without changing the internal implementation, once we've decided how these should be exposed to users.</p>
<p>A few important decisions encoded in the implementation (which we can change later):</p>
<ol>
<li>Groups are enabled globally, for all dependencies. This differs from extras, which are enabled on a per-requirement basis. Note, however, that we'll only discover groups for uv-enabled packages anyway.</li>
<li>Installing a group requires installing the base package. We rely on this in PubGrub to ensure that we resolve to the same version (even though we only expect groups to come from workspace dependencies anyway, which are unique). But anyway, that's encoded in the resolver right now, just as it is for extras.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @charliermarsh on 2024-06-05 02:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @charliermarsh on 2024-06-05 03:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @charliermarsh on 2024-06-05 03:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @charliermarsh on 2024-06-05 03:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-05 03:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-distribution/src/metadata.rs</code>:39 on 2024-06-05 03:20</div>
            <div class="timeline-body"><p>I find the terminology here really confusing -- that we have both extras and dependency groups -- but, what can we do? I'm honestly considering using <code>dev_dependencies</code> everywhere internally instead of dependency groups.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-resolver/src/lock.rs</code>:401 on 2024-06-05 14:31</div>
            <div class="timeline-body"><p>Nit: <code>#[serde(rename_all = &quot;kebab-case&quot;)]</code> on the struct</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-resolver/src/resolution/graph.rs</code>:39 on 2024-06-05 14:35</div>
            <div class="timeline-body"><p>Nit: Can you add a comment which one is which</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv/tests/lock.rs</code>:1396 on 2024-06-05 14:41</div>
            <div class="timeline-body"><p>Nit: This is verbose</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2024-06-05 14:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-05 15:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:1396 on 2024-06-05 15:08</div>
            <div class="timeline-body"><p>What is verbose? Like I should use a different test case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-06-05 15:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv/tests/lock.rs</code>:1396 on 2024-06-05 15:39</div>
            <div class="timeline-body"><p>If you have a test on hand with less wheels generating a shorter inline snapshot, it would make the file easier to follow, but it's not blocking or anything</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-05 15:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/lock.rs</code>:1396 on 2024-06-05 15:59</div>
            <div class="timeline-body"><p>Yes totally. I just couldn't tell if you were commenting on the test itself or the lockfile format.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-05 16:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/resolution/graph.rs</code>:39 on 2024-06-05 16:30</div>
            <div class="timeline-body"><p>I decided to introduce a separate type.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-06 01:20</div>
            <div class="timeline-body"><p>I decided to rework the terminology (internally) to center on development dependencies (even though it still supports groups internally), since that's the only thing they're actually used for right now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-06-06 01:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-06-06 01:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-06 01:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:54:20 UTC
    </footer>
</body>
</html>
