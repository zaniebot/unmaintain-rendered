<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ignore pre-release versions in `uv init --script` - astral-sh/uv #15747</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ignore pre-release versions in <code>uv init --script</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/15747">#15747</a>
        opened by <a href="https://github.com/sharkdp">@sharkdp</a>
        on 2025-09-09 08:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Ignore managed pre-release versions of Python for purposes of creating a <code>requires-python</code> constraint when running <code>uv init --script</code>. This makes the behavior consistent with <code>uv init</code> for normal projects.</p>
<h2>Test Plan</h2>
<p>Added a regression test that makes sure that the constraint is <code>requires-python = &quot;&gt;=3.13&quot;</code>, even though a pre-release version of 3.14 is installed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @sharkdp on 2025-09-09 08:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-09 11:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/edit.rs</code>:928 on 2025-09-09 11:19</div>
            <div class="timeline-body"><p>We probably shouldn't churn all these</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-09 11:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-python/src/discovery.rs</code>:418 on 2025-09-09 11:19</div>
            <div class="timeline-body"><p>Why do we assume managed? I think we want to change that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-09 11:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-python/src/discovery.rs</code>:418 on 2025-09-09 11:20</div>
            <div class="timeline-body"><p>This would be the cause of https://github.com/astral-sh/uv/pull/15747/files#r2333143886</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-09 11:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:908 on 2025-09-09 11:21</div>
            <div class="timeline-body"><p>We'll need to mark this test with the <code>python-patch</code> feature to indicate it tests behavior for specific patch version. The distros run the test suite against their Python versions and need to exclude the test.</p>
<p>I probably would not pin 3.13.2 and 3.11.11 and instead just use 3.13 and 3.11, since it's not necessary for the semantics of the test and we'll just need to remember bump them in the future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-09-09 11:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-python/src/discovery.rs</code>:413 on 2025-09-09 11:22</div>
            <div class="timeline-body"><p>What motivated this change?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-09-09 13:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/uv/tests/it/init.rs</code>:908 on 2025-09-09 13:04</div>
            <div class="timeline-body"><p>I added the <code>python-patch</code> gating. Not sure if it's still required though. I removed the patch versions from <code>3.13</code> and <code>3.12</code>, but <code>3.14.0rc2</code> still includes <code>0</code> as a patch version, I guess?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/uv/tests/it/init.rs</code>:908 on 2025-09-09 13:14</div>
            <div class="timeline-body"><p>Confirmed by Zanie</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-09-09 13:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @sharkdp on 2025-09-09 13:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-09-10 19:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-09-10 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-09-10 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-09-10 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-10 19:35</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:44:40 UTC
    </footer>
</body>
</html>
