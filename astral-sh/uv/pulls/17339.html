<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Only write portable paths in RECORD - astral-sh/uv #17339</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Only write portable paths in RECORD</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/17339">#17339</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2026-01-06 20:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>The spec allows both, but we're already using forward paths for paths that are not created by uv.</p>
<p>See</p>
<ul>
<li>https://github.com/astral-sh/uv/issues/14446</li>
<li>https://github.com/python/importlib_metadata/issues/528</li>
</ul>
<p>Closes #14446</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @konstin on 2026-01-06 20:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/EliteTK">@EliteTK</a> on <code>crates/uv/tests/it/pip_install.rs</code>:13697 on 2026-01-06 23:02</div>
            <div class="timeline-body"><p>Might be nonsense but: Maybe we should also that there <em>are</em> forward slashes (e.g. that we didn't accidentally just remove all slashes)?</p>
<pre><code class="language-suggestion">    assert!(record_lines.iter().any(|line| line.contains(&quot;/my_script&quot;)));
    assert!(record_lines.iter().any(|line| line.contains(&quot;/project.h&quot;)));
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/EliteTK">@EliteTK</a> approved on 2026-01-06 23:08</div>
            <div class="timeline-body"><p>I read some of the background on this, but despite the fact that we were conformant before and are conformant now, it seems like a breaking change...?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2026-01-07 08:34</div>
            <div class="timeline-body"><blockquote>
<p>I read some of the background on this, but despite the fact that we were conformant before and are conformant now, it seems like a breaking change...?</p>
</blockquote>
<p>Both are valid formats for transporting the same information, we're only really changing the normalization of the data we write, so no workflows should break (plus we fix importlib.metadata compatibility)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/EliteTK">@EliteTK</a> on 2026-01-07 09:52</div>
            <div class="timeline-body"><p>I didn't mean to imply that we shouldn't change it, I think this is strictly a good change. I just mean that, just like <code>importlib.metadata</code> relied on pip's decision to always use portable paths, someone might have relied on uv's decision to use windows paths on windows.</p>
<p>But, having thought about it a bit more, I agree it's probably too unlikely to make much noise about it beyond the issue title (which is perfectly clear as is).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2026-01-07 10:02</div>
            <div class="timeline-body"><p>That's true; Given that pip always wrote portable paths, I hope that no parser reads just the uv format in a non-portable way. With the spec allowing portable paths and Windows applications usually understanding forward slashes, I'm confident enough that we don't need to consider this a breaking change.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2026-01-07 15:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2026-01-07 19:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2026-01-07 19:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2026-01-07 19:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:45:45 UTC
    </footer>
</body>
</html>
