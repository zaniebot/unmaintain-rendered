<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Limit `uv auth login pyx.dev` retries to 60s - astral-sh/uv #16498</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Limit <code>uv auth login pyx.dev</code> retries to 60s</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/16498">#16498</a>
        opened by <a href="https://github.com/woodruffw">@woodruffw</a>
        on 2025-10-29 15:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/woodruffw">@woodruffw</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Without this, a user who does <code>uv auth login ...</code> will retry against the service's status endpoint forever. This probably isn't what they intended (they probably walked away from their machine), so we end their login initiation session after 60 retries. Since we do a retry every second, this gives them no less than a minute to complete a login (which should be more than enough).</p>
<h2>Test Plan</h2>
<p>We don't have browser-negotiated login tests at the moment in CI, but I've tested this locally:</p>
<pre><code class="language-console">% ./target/debug/uv auth login pyx.dev
Logging in with https://api.pyx.dev/auth/cli/login/REDACTED
error: Login session timed out
</code></pre>
<p>(That took well over a minute, so 60s is a lower bound assuming a very optimal network roundtrip on each poll.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @woodruffw on 2025-10-29 15:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @woodruffw by @woodruffw on 2025-10-29 15:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-10-29 15:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-10-29 15:27</div>
            <div class="timeline-body"><p>With explicit timeout:</p>
<pre><code> ./target/debug/uv auth login pyx.dev
Logging in with https://api.pyx.dev/auth/cli/login/REDACTED
error: Login session timed out after 60 seconds
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "auth/login: limit the number of status retries" to "Limit the number of `uv login login` retries to 60s" by @konstin on 2025-10-29 15:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @konstin on 2025-10-29 15:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-10-29 15:33</div>
            <div class="timeline-body"><p>I'll fix that clippy issue in another PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-10-29 15:35</div>
            <div class="timeline-body"><p>Clippy is a required check, we require it for merging. If you push another commit with it, the auto-merge will go through.</p>
<p>(I've update the PR title for the changelog)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Limit the number of `uv login login` retries to 60s" to "Limit `uv auth login pyx.dev` retries to 60s" by @zanieb on 2025-10-29 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-10-29 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-10-29 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-10-29 15:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:45:09 UTC
    </footer>
</body>
</html>
