<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Pyodide support - astral-sh/uv #12731</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add Pyodide support</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/12731">#12731</a>
        opened by <a href="https://github.com/hoodmane">@hoodmane</a>
        on 2025-04-07 21:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hoodmane">@hoodmane</a></div>
            <div class="timeline-body"><p>This includes some initial work on adding Pyodide support (issue #12729). It is enough to get</p>
<pre><code>uv pip compile -p /path/to/pyodide --extra-index-url file:/path/to/simple-index
</code></pre>
<p>to work which should already be quite useful.</p>
<h2>Test Plan</h2>
<ul>
<li>added a unit test for <code>pyodide_platform</code></li>
<li>integration tested manually with:</li>
</ul>
<pre><code>cargo run pip install \
-p /home/rchatham/Documents/programming/tmp/pyodide-venv-test/.pyodide-xbuildenv-0.29.3/0.27.4/xbuildenv/pyodide-root/dist/python \
--extra-index-url file:/home/rchatham/Documents/programming/tmp/pyodide-venv-test/.pyodide-xbuildenv-0.29.3/0.27.4/xbuildenv/pyodide-root/package_index \
--index-strategy unsafe-best-match --target blah --no-build \
numpy pydantic
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-04-08 08:40</div>
            <div class="timeline-body"><!-- __CODSPEED_PERFORMANCE_REPORT_COMMENT__ -->

<!-- __CODSPEED_INSTRUMENTATION_PERFORMANCE_REPORT_COMMENT__ -->

<h2><a href="https://codspeed.io/astral-sh/uv/branches/hoodmane%3Apyodide-support">CodSpeed Instrumentation Performance Report</a></h2>
<h3>Merging #12731 will <strong>not alter performance</strong></h3>
<p><sub>Comparing <code>hoodmane:pyodide-support</code> (e9e37be) with <code>main</code> (37e22e4)</sub></p>
<h3>Summary</h3>
<p><code>‚úÖ 12</code> untouched benchmarks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoodmane">@hoodmane</a> on 2025-04-08 08:58</div>
            <div class="timeline-body"><p>Uh oh tests are failing because of a pypi outage.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @zanieb on 2025-04-08 17:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-10 09:26</div>
            <div class="timeline-body"><p>The micro-benchmark regression is probably a fluke but is fine otherwise too, as long as the resolver benchmarks don't change</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @konstin on 2025-04-10 09:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoodmane">@hoodmane</a> on 2025-04-10 10:26</div>
            <div class="timeline-body"><p>Thanks @konstin. I'll add an integration test and then mark this ready for review.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-10 16:00</div>
            <div class="timeline-body"><p>We keep seeing that microbenchmark false positive. I don't know what's up with it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @hoodmane on 2025-05-08 22:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoodmane">@hoodmane</a> on 2025-05-08 22:12</div>
            <div class="timeline-body"><p>Okay I added an integration test and it is working:
https://github.com/astral-sh/uv/actions/runs/14916812495/job/41904275552?pr=12731</p>
<p>So this is ready for review.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>.github/workflows/ci.yml</code>:1313 on 2025-05-09 08:49</div>
            <div class="timeline-body"><p>Should we add a version bound to <code>pyodide-build</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>.github/workflows/ci.yml</code>:1319 on 2025-05-09 08:50</div>
            <div class="timeline-body"><p>This has been merged</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-configuration/src/target_triple.rs</code>:229 on 2025-05-09 09:19</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    Aarch64Manylinux240,

    /// A wasm32 target using the the pyodide 2024 platform.
    #[cfg_attr(feature = &quot;clap&quot;, value(name = &quot;wasm32-pyodide2024&quot;))]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-09 09:36</div>
            <div class="timeline-body"><p>Where does the 2024 in pyodide 2024 come from? I couldn't find it in the docs or the GitHub page.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-python/python/get_interpreter_info.py</code>:520 on 2025-05-09 09:41</div>
            <div class="timeline-body"><p>Can you add a dedicated error, something that says that emscripten is only support with pyodide?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-configuration/src/target_triple.rs</code>:589 on 2025-05-09 09:43</div>
            <div class="timeline-body"><p>Is there a specific reason for this value?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-configuration/src/target_triple.rs</code>:632 on 2025-05-09 09:43</div>
            <div class="timeline-body"><p>Can you add a comment that this is the emscripten version, so future reviewers know what is emscripten and what is pyodide?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-05-09 09:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoodmane">@hoodmane</a> on 2025-05-16 03:12</div>
            <div class="timeline-body"><p>Thanks for the review @konstin !</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hoodmane">@hoodmane</a> reviewed on 2025-05-17 15:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/hoodmane">@hoodmane</a> on <code>crates/uv-configuration/src/target_triple.rs</code>:589 on 2025-05-17 15:48</div>
            <div class="timeline-body"><p>Not really but it's what Emscripten puts in this field. Added a comment and a link to Emscripten's libc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/hoodmane">@hoodmane</a> on <code>crates/uv-configuration/src/target_triple.rs</code>:632 on 2025-05-17 15:53</div>
            <div class="timeline-body"><p>Added.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hoodmane">@hoodmane</a> reviewed on 2025-05-17 15:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoodmane">@hoodmane</a> on 2025-05-17 16:06</div>
            <div class="timeline-body"><blockquote>
<p>Where does the 2024 in pyodide 2024 come from? I couldn't find it in the docs or the GitHub page.</p>
</blockquote>
<p>It's vaguely documented here:
https://pyodide.org/en/stable/development/abi.html#pyodide-2024-0</p>
<p>Also the Pyodide packaging pep:
https://peps.python.org/pep-0783/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2025-05-19 07:21</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoodmane">@hoodmane</a> on 2025-06-03 15:37</div>
            <div class="timeline-body"><p>@zanieb would appreciate review on this when you have a chance.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-03 16:39</div>
            <div class="timeline-body"><p>ü§¶‚Äç‚ôÄÔ∏è thanks for the poke</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-06-03 16:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-06-03 17:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-06-03 17:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoodmane">@hoodmane</a> on 2025-06-03 18:54</div>
            <div class="timeline-body"><p>Thanks @zanieb and @konstin!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-06-03 18:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-06-24 00:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-platform-tags/src/platform_tag.rs</code>:268 on 2025-06-24 00:54</div>
            <div class="timeline-body"><p>@hoodmane -- Should this not be <code>emscripten_3_1_58_wasm32</code>, for <code>pyodide_2024_0</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-06-24 01:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-platform-tags/src/platform_tag.rs</code>:268 on 2025-06-24 01:21</div>
            <div class="timeline-body"><p>I put up a PR here, I may be mistaken though: https://github.com/astral-sh/uv/pull/14226</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-06-24 01:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-platform-tags/src/platform_tag.rs</code>:268 on 2025-06-24 01:32</div>
            <div class="timeline-body"><p>Ah okay, I'm seeing that the wheels in <code>pyodide config get package_index</code> <em>do</em> use this pyodide tag. Should we support both?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:42:43 UTC
    </footer>
</body>
</html>
