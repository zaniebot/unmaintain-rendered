<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `uv add --no-editable` - astral-sh/uv #5246</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>uv add --no-editable</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/5246">#5246</a>
        opened by <a href="https://github.com/j178">@j178</a>
        on 2024-07-20 12:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/j178">@j178</a> on 2024-07-20 12:37</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Resolves #5241</p>
<h2>Test Plan</h2>
<pre><code class="language-sh"># create a workspace with sub-packages `pkg-a` and `pkg-b`

$ cd ./pkg-b
$ cargo run -- add ./pkg-a --no-editable

$ cat ./pyproject.toml
[project]
name = &quot;pkg-b&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
dependencies = [
    &quot;pkg-a&quot;,
]

[tool.uv]
dev-dependencies = []

[tool.uv.sources]
pkg-a = { workspace = true, editable = false }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-07-20 13:11</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @charliermarsh on 2024-07-20 13:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @charliermarsh on 2024-07-20 13:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-07-20 13:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-07-20 13:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-20 15:51</div>
            <div class="timeline-body"><p>@charliermarsh this was implemented intentionally as <code>--editable</code> and <code>--editable=true</code> / <code>--editable=false</code> to match the syntax you'd use in the pyproject.toml. I don't prefer <code>--no-editable</code>.</p>
<p>cc @ibraheemdev</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-20 15:55</div>
            <div class="timeline-body"><p>I don't understand why you would use <code>--editable=true</code>, that's so surprising!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-20 15:58</div>
            <div class="timeline-body"><p>Oh, you're saying <code>--editable</code> already worked, but it <em>also</em> supported <code>--editable=true</code> and <code>--editable=false</code>? I don't know, that's also not as intuitive to me given that we don't have that pattern anywhere else in the CLI.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-20 16:08</div>
            <div class="timeline-body"><p>Yeah because of <code>default_missing_value = &quot;true&quot;</code>.</p>
<p>I know it's not aligned with the rest of the CLI â€” but it does directly match the <code>sources</code> definition. I don't know if I feel particularly strongly, but wanted to flag that this wasn't an oversight. I'm not sure why, but <code>--no-editable</code> doesn't feel like it encodes the meaning as clearly (although it is more intuitive given our <em>existing</em> patterns).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-20 16:09</div>
            <div class="timeline-body"><p>Ok I defer to others on this (you and @ibraheemdev). I also don't feel strongly. I thought the original report was that you had to do <code>--editable=true</code> which I knew every user would get wrong :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-20 16:12</div>
            <div class="timeline-body"><p>Maybe the most user-friendly thing is to support <code>--editable</code> / <code>--no-editable</code> and <code>--editable=true</code> / <code>--editable=false</code>. It's not like there's something else we'll want the flag for.</p>
<p>Are there other booleans that would make sense as <code>--&lt;name&gt;=false</code> (instead of <code>--no-&lt;name&gt;</code>)?</p>
<p>I'll think on this. Unsure if we should revert in the meantime.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-07-22 14:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2024-07-22 18:10</div>
            <div class="timeline-body"><p>Sorry for this one then.</p>
<p>I'll chime in and say the reason I reported the bug was this interaction (uv 0.2.24):</p>
<pre><code>&gt; uv add --editable ./sibling/
error: invalid value './sibling/' for '--editable [&lt;EDITABLE&gt;]'
</code></pre>
<p>So just <code>--editable</code> worked in some places but not before the name of the dependency.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-22 18:12</div>
            <div class="timeline-body"><p>Ahh yeah. That's actually a pretty big footgun in my opinion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-22 18:42</div>
            <div class="timeline-body"><p>Ah okay sold. Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:37:38 UTC
    </footer>
</body>
</html>
