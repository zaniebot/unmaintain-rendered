<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Skip existing, second iteration: Check the index before uploading - astral-sh/uv #8531</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Skip existing, second iteration: Check the index before uploading</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/8531">#8531</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-10-24 15:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2024-10-24 15:59</div>
            <div class="timeline-body"><p>Implementation of https://github.com/astral-sh/uv/issues/7917#issuecomment-2408636016:</p>
<p>The user can pass <code>--check-url &lt;index url&gt;</code>. For each file given to upload, uv checks whether the file is already on the index. If the filename does not exist, uv will upload the file. If the filename does exist and the file on the index is the exact same as the local file (hash match), we skip the upload as there's nothing to do. If the file exists and mismatches with different content, we error: There is an inconsistency, and uv does not upload in this case.</p>
<p>The upload itself may then error or succeed. If it errors, we check the index URL again: Maybe there was a parallel upload of the same file, and the other upload was quicker (avoid TOCTOU errors). We then apply the same logic: If the filename does exist and the file on the index is the same (hash match), it's ok, there was an upload race. If the file exists and mismatches, we error: There is an inconsistency, and uv does not upload in this case. I'm not sure yet if we should do the second check only if the error is one of the twine-recognized file-already-existed conditions; i tend to think we can just do the second check on any error.</p>
<p>This enables re-trying publish, but it still requires the author of a package to ensure that they only try to publish each version from a specific commit. We impose this requirement to avoid situations where different files in a version were built from different sources, which breaks a fundamental assumption in uv.</p>
<p>The name <code>--check-url</code> is up for bike shedding. I'm hesitant to call it <code>--index</code> because it's different from <code>--index</code> in resolve or install commands (only one index, caching turned off).</p>
<p>The test script previously only did step 1, now it also checks skip existing behavior.</p>
<ol>
<li>An upload with a fresh version succeeds.</li>
<li>If we're using PyPI, uploading the same files again succeeds.</li>
<li>Skip existing works and reports the files as skipped.</li>
</ol>
<p>Follow-up: Test that skip existing error when the hashes mismatch.</p>
<p>Fixes #7917</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @konstin on 2024-10-24 15:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @konstin on 2024-10-24 15:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-24 16:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-client/src/registry_client.rs</code>:291 on 2024-10-24 16:01</div>
            <div class="timeline-body"><p>This is the minimally invasive change. An alternative would be making the <code>Cache</code> an <code>Arc&lt;Mutex&lt;Cache&gt;&gt;</code>, acknowledging that we're editing externally mutable state.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-24 16:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-client/src/registry_client.rs</code>:148 on 2024-10-24 16:01</div>
            <div class="timeline-body"><p>Avoid the cost for creating another client.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-publish/src/lib.rs</code>:448 on 2024-10-24 16:02</div>
            <div class="timeline-body"><p>Do we need the index url here or will it do the right thing without it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-24 16:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-24 16:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-publish/src/lib.rs</code>:653 on 2024-10-24 16:03</div>
            <div class="timeline-body"><p>We scrap the index-specific twine code entirely and do the skip existing checks for any bad status</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @konstin on 2024-10-28 09:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-28 12:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-publish/src/lib.rs</code>:448 on 2024-10-28 12:32</div>
            <div class="timeline-body"><p>It depends. Was the client created with <em>only</em> this index as the set of locations? It seems right to pass it in though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-28 12:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-cli/src/lib.rs</code>:4815 on 2024-10-28 12:33</div>
            <div class="timeline-body"><p>Why does this take an index, rather than a bool?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-28 12:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-client/src/registry_client.rs</code>:291 on 2024-10-28 12:36</div>
            <div class="timeline-body"><p>This seems off... Can we not create an entirely new client with a fresh cache?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-28 12:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-cli/src/lib.rs</code>:4815 on 2024-10-28 12:47</div>
            <div class="timeline-body"><p>It's the story documented in https://github.com/astral-sh/uv/issues/7917#issuecomment-2402208639 and https://github.com/astral-sh/uv/issues/7917#issuecomment-2408636016: An index may react arbitrarily to a file with a filename that does already exist: PyPI for example checks if the hash matches and then return a plain OK as for a fresh upload, while other registries error even when re-uploading the same file. By proactively checking the simple index over relying on unspecified, inconsistent behaviour, <code>uv publish</code> behaves consistently across registries, while also preventing one case of uploading inconsistent wheel/source dist combinations. In cases where we skip an upload, it is also faster than a twine-style skip existing bool.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-28 13:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-cli/src/lib.rs</code>:4815 on 2024-10-28 13:10</div>
            <div class="timeline-body"><p>But why do we need to provide the index here? Because you need to be able to query for metadata, and the publish URL isn't sufficient?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-28 13:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-cli/src/lib.rs</code>:4815 on 2024-10-28 13:16</div>
            <div class="timeline-body"><p>There could e.g. be multiple index URLs, and we can't compute the index URL from the publish URL, so you need to manually provide the index URL that matches the publish URL. Making it explicit here seemed like a clear interface.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-cli/src/lib.rs</code>:4815 on 2024-10-28 13:59</div>
            <div class="timeline-body"><p>I'm not overly attached to doing it this way, i mainly picked it because it seemed like a clear, explainable design.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-28 13:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-28 14:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:4808 on 2024-10-28 14:13</div>
            <div class="timeline-body"><p>This last sentence is a bit unclear.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-28 14:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:4810 on 2024-10-28 14:13</div>
            <div class="timeline-body"><p>I'd say something like &quot;The exact behavior will vary based on implementation details of the index. When uploading to PyPI, ...&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-28 14:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:4815 on 2024-10-28 14:14</div>
            <div class="timeline-body"><p>Won't this be surprising when coming from another tool like <code>twine</code> where this is a bool? Should we call it something else?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-28 14:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-cli/src/lib.rs</code>:4815 on 2024-10-28 14:36</div>
            <div class="timeline-body"><p>As I've said above, the name is open for bike shedding. I like it for being self explaining (<code>uv publish --skip-existing https://example.org/simple</code> means to skip any files existing on https://example.org/simple when publishing) and for not being confused with the regular index API.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-28 21:49</div>
            <div class="timeline-body"><p>It'd be nice if we could re-use the new index settings to improve the publishing experience for uv-managed projects (which I think is the key use-case we should be focusing on). For example:</p>
<pre><code class="language-toml">[[index]]
name = &quot;example&quot;
url = &quot;https://pypi.org/simple&quot;
publish-url = &quot;https://upload.pypi.org/legacy&quot;
</code></pre>
<p>with <code>uv publish --index example</code> we'd have all the information we need for <code>--skip-existing</code> to remain a boolean flag. I think a change like that would require quite a bit of discussion though, and I don't want to derail improvements here, so my goal is to question if there's a way to do this that's consistent with other tooling and provides a path to a better experience in the long run?</p>
<p>Could we have <code>--skip-existing</code> work as as a boolean flag and provide an optional flag for an index URL (e.g., <code>--query-url</code>) to improve its behavior? It's not clear to me if <code>--skip-existing</code> should fail when used with non-PyPI indexes without an additional <code>--query-url</code> or just operate on a best-effort basis and provide a hint on failure.</p>
<p>As a closing note, I worry about optimizing the <code>--skip-existing</code> behavior for non-PyPI servers. I think if someone is using a non-standard server than it's reasonable to provide an additional flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-10-29 09:09</div>
            <div class="timeline-body"><blockquote>
<p>with <code>uv publish --index example</code> we'd have all the information we need for <code>--skip-existing</code> to remain a boolean flag. I think a change like that would require quite a bit of discussion though, and I don't want to derail improvements here, so my goal is to question if there's a way to do this that's consistent with other tooling and provides a path to a better experience in the long run?</p>
</blockquote>
<p>I like the <code>uv publish --index example</code>: It's concise, it has toml configuration and it pairs the publish URL with the index URL directly. We should provide both a named index option and individual options, so I'm fine with adding <code>--index</code> in a follow-up.</p>
<blockquote>
<p>Could we have <code>--skip-existing</code> work as as a boolean flag and provide an optional flag for an index URL (e.g., <code>--query-url</code>) to improve its behavior? It's not clear to me if <code>--skip-existing</code> should fail when used with non-PyPI indexes without an additional <code>--query-url</code> or just operate on a best-effort basis and provide a hint on failure.</p>
<p>As a closing note, I worry about optimizing the <code>--skip-existing</code> behavior for non-PyPI servers. I think if someone is using a non-standard server than it's reasonable to provide an additional flag.</p>
</blockquote>
<p>We should provide consistent publish experience no matter the server behavior. There is no guarantee a server behaves a certain way (or changes that way), and only an index URL gives us confidence when checking.</p>
<p>We can't consider non-PyPI servers non-standard, there is no standard (that would be the long-awaited Upload API 2.0), and I believe we shouldn't consider internal index users second class. All implementations exist in a back-and-forth between twine as client and the various servers: Twine itself contains special casing for their skip existing implementation for various servers (https://github.com/pypa/twine/blob/c512bbf166ac38239e58545a39155285f8747a7b/twine/commands/upload.py#L58-L72). An advantage of the skip existing with URL in that it means no more special casing heuristics.</p>
<p>The boolean skip existing option can't differentiate between matching and mismatching re-uploads, which is crucial to catch mismatching uploads, and it also doesn't allow skipping uploads of files that are already uploaded. Since users will need to know their index URL anyway for using the uploaded package, we can make this <code>--query-url</code> mandatory, which here is called <code>--skip-existing</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-29 17:55</div>
            <div class="timeline-body"><blockquote>
<p>We can't consider non-PyPI servers non-standard, there is no standard (that would be the long-awaited Upload API 2.0), and I believe we shouldn't consider internal index users second class.</p>
</blockquote>
<p>I think you're picking at the language here. I think we can consider servers that are not <em>the official Python package index</em> as unofficial. I don't think they need to be second-class, but the they're already secondary, e.g., <code>uv publish</code> uses PyPI by default.</p>
<p>Can you clarify the existing behaviors for me, i.e., for twine? A repeated upload with the same hash to PyPI results in an OK so <code>--skip-existing</code> isn't needed, that's just the default behavior? Other indexes do inconsistent things, i.e., erroring so <code>--skip-existing</code> needs to ignore special-cased error messages?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-10-29 19:06</div>
            <div class="timeline-body"><p>Skip existing makes twine ignore all error responses matching https://github.com/pypa/twine/blob/c512bbf166ac38239e58545a39155285f8747a7b/twine/commands/upload.py#L58-L72. See also https://github.com/astral-sh/uv/issues/7917#issuecomment-2402208639 for more cross index testing.</p>
<h2>GitLab</h2>
<p><strong>Uploading the same file for the same name</strong></p>
<pre><code>twine upload --repository-url https://gitlab.com/api/v4/projects/61853105/packages/pypi scripts/publish/astral-test-token/dist/astral_test_token-0.1.730-py3-none-any.whl
</code></pre>
<p>Error 400 Bad Request</p>
<pre><code>twine upload --repository-url --skip-existing https://gitlab.com/api/v4/projects/61853105/packages/pypi scripts/publish/astral-test-token/dist/astral_test_token-0.1.730-py3-none-any.whl
</code></pre>
<p>Ok</p>
<p><strong>Uploading a different file for the same name</strong></p>
<pre><code>twine upload --repository-url https://gitlab.com/api/v4/projects/61853105/packages/pypi scripts/publish/astral-test-token-modified/dist/astral_test_token-0.1.730-py3-none-any.whl
</code></pre>
<p>Error 400 Bad Request</p>
<pre><code>twine upload --repository-url --skip-existing https://gitlab.com/api/v4/projects/61853105/packages/pypi scripts/publish/astral-test-token-modified/dist/astral_test_token-0.1.730-py3-none-any.whl
</code></pre>
<p>Ok</p>
<h2>PyPI</h2>
<p>Using PyPI instead of GitLab gives a slightly different pattern:</p>
<p><strong>Uploading the same file for the same name</strong></p>
<pre><code>twine upload -r testpypi scripts/publish/astral-test-token/dist/astral_test_token-0.1.730-py3-none-any.whl
</code></pre>
<p>OK</p>
<pre><code>twine upload -r testpypi --skip-existing scripts/publish/astral-test-token/dist/astral_test_token-0.1.730-py3-none-any.whl
</code></pre>
<p>Ok</p>
<p><strong>Uploading a different file for the same name</strong></p>
<pre><code>twine upload -r testpypi scripts/publish/astral-test-token-modified/dist/astral_test_token-0.1.730-py3-none-any.whl
</code></pre>
<p>Error 400 Bad Request</p>
<pre><code>twine upload -r testpypi --skip-existing scripts/publish/astral-test-token-modified/dist/astral_test_token-0.1.730-py3-none-any.whl
</code></pre>
<p>Ok</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-29 23:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-client/src/registry_client.rs</code>:291 on 2024-10-29 23:10</div>
            <div class="timeline-body"><p>My thought was avoiding that, so we only have to do a revalidation request. Is there an advantage in using a temp cache here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-10-29 23:18</div>
            <div class="timeline-body"><p>The main design constraint here is that i feel strongly that the behavior should be consistent across all indexes, and I've picked the design with a mandatory index URL since it was the only one that could provide this consistency.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-29 23:29</div>
            <div class="timeline-body"><p>So.. in a future world where we use <code>--index</code> instead of <code>--publish-url</code>, does <code>--skip-existing</code> become the default behavior? Is there a world in which you would not want to skip existing, identical objects? (Trying to inform a decision on the flag name)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-10-29 23:41</div>
            <div class="timeline-body"><p>Yes, i'm planning to add <code>--index</code> and make skip existing the default behavior with this; I couldn't come up with any case where we didn't want to skip existing, identical objects if we can.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-30 19:23</div>
            <div class="timeline-body"><p>I think if <code>--skip-existing</code> will be the default future behavior, I think we we want to call this something else. Concretely, I think <code>--check-url &lt;URL&gt;</code> is the clearest corollary to <code>--publish-url</code>. Additionally, we may want to add a <code>--skip-existing</code> boolean flag which errors and suggests the correct usage like we do for unimplemented behaviors in <code>uv pip</code>. Once we add support for <code>--index</code>, <code>--skip-existing</code> can just warn that it has no effect when we have an implicit <code>--check-url</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-31 13:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:4823 on 2024-10-31 13:33</div>
            <div class="timeline-body"><p>Maybe rephrase now?</p>
<pre><code class="language-suggestion">    /// Check an index URL for existing files to skip duplicate uploads.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-10-31 13:35</div>
            <div class="timeline-body"><p>Thanks for your patience. I'm not sure re. @charliermarsh's comments about the client.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-31 13:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-publish/src/lib.rs</code>:704 on 2024-10-31 13:36</div>
            <div class="timeline-body"><p>This isn't quite descriptive</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-31 13:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-client/src/registry_client.rs</code>:291 on 2024-10-31 13:40</div>
            <div class="timeline-body"><p>I don't mean a temp cache. I mean a new <code>Cache</code> object that points to the same storage, but with a replaced <code>Refresh</code>. The advantage is we avoid this strange API.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-31 13:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-publish/src/lib.rs</code>:421 on 2024-10-31 13:48</div>
            <div class="timeline-body"><p>I think I'd prefer that this method <em>not</em> take an <code>Option</code>, and we just don't call it if <code>index_client</code> is <code>None</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-10-31 13:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-client/src/registry_client.rs</code>:291 on 2024-10-31 13:56</div>
            <div class="timeline-body"><p>I can demonstrate what I mean with a refactor if it's not clear.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2024-10-31 15:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2024-10-31 15:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-10-31 15:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:13 UTC
    </footer>
</body>
</html>
