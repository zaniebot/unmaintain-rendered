<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update astral-sh/setup-uv action to v6 - astral-sh/uv #13162</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update astral-sh/setup-uv action to v6</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/13162">#13162</a>
        opened by <a href="https://github.com/renovate">@renovate</a>
        on 2025-04-28 02:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/renovate">@renovate</a> on 2025-04-28 02:46</div>
            <div class="timeline-body"><p>This PR contains the following updates:</p>
<p>| Package | Type | Update | Change |
|---|---|---|---|
| <a href="https://redirect.github.com/astral-sh/setup-uv">astral-sh/setup-uv</a> | action | major | <code>v5.4.2</code> -&gt; <code>v6.0.0</code> |</p>
<hr />
<h3>Release Notes</h3>
<details>
<summary>astral-sh/setup-uv (astral-sh/setup-uv)</summary>

<h3><a href="https://redirect.github.com/astral-sh/setup-uv/releases/tag/v6.0.0"><code>v6.0.0</code></a>: ðŸŒˆ activate-environment and working-directory</h3>
<p><a href="https://redirect.github.com/astral-sh/setup-uv/compare/v5.4.2...v6.0.0">Compare Source</a></p>
<h5>Changes</h5>
<p>This version contains some breaking changes which have been gathering up for a while. Lets dive into them:</p>
<ul>
<li><a href="#activate-environment">Activate environment</a></li>
<li><a href="#working-directory">Working Directory</a></li>
<li><a href="#default-cache-dependency-glob">Default <code>cache-dependency-glob</code></a></li>
<li><a href="#use-default-cache-dir-on-self-hosted-runners">Use default cache dir on self hosted runners</a></li>
</ul>
<h5>Activate environment</h5>
<p>In previous versions using the input <code>python-version</code> automatically activated a venv at the repository root.
This led to some unwanted side-effects, was sometimes unexpected and not flexible enough.</p>
<p>The venv activation is now explicitly controlled with the new input <code>activate-environment</code> (false by default):</p>
<pre><code class="language-yaml">- name: Install the latest version of uv and activate the environment
  uses: astral-sh/setup-uv@v6
  with:
    activate-environment: true
- run: uv pip install pip
</code></pre>
<p>The venv gets created by the <a href="https://docs.astral.sh/uv/pip/environments/"><code>uv venv</code></a> command so the python version is controlled by the <code>python-version</code> input or the files <code>pyproject.toml</code>, <code>uv.toml</code>, <code>.python-version</code> in the <code>working-directory</code>.</p>
<h5>Working Directory</h5>
<p>The new input <code>working-directory</code> controls where we look for <code>pyproject.toml</code>, <code>uv.toml</code> and <code>.python-version</code> files
which are used to determine the version of uv and python to install.</p>
<p>It can also be used to control where the venv gets created.</p>
<pre><code class="language-yaml">- name: Install uv based on the config files in the working-directory
  uses: astral-sh/setup-uv@v6
  with:
    working-directory: my/subproject/dir
</code></pre>
<blockquote>
<p>[!CAUTION]</p>
<p>The inputs <code>pyproject-file</code> and <code>uv-file</code> have been removed.</p>
</blockquote>
<h5>Default <code>cache-dependency-glob</code></h5>
<p><a href="https://redirect.github.com/ssbarnea">@â€‹ssbarnea</a> found out that the default <code>cache-dependency-glob</code> was not suitable for a lot of users.</p>
<p>The old default</p>
<pre><code class="language-yaml">cache-dependency-glob: |
  **/requirements*.txt
  **/uv.lock
</code></pre>
<p>is changed and should cover over 99.5% of use cases:</p>
<pre><code class="language-yaml">cache-dependency-glob: |
  **/*(requirements|constraints)*.(txt|in)
  **/pyproject.toml
  **/uv.lock
</code></pre>
<blockquote>
<p>[!NOTE]</p>
<p>This shouldn't be a breaking change. The only thing you may notice is that your caches get invalidated once.</p>
</blockquote>
<h5>Use default cache dir on self hosted runners</h5>
<p>The directory where uv stores its cache was always set to a directory in <code>RUNNER_TEMP</code>. For self-hosted runners this made no sense as this gets cleaned after every run and led to slower runs than necessary.</p>
<p>On self-hosted runners <code>UV_CACHE_DIR</code> is no longer set and the <a href="https://docs.astral.sh/uv/concepts/cache/#cache-directory">default cache directory</a> is used instead.</p>
<h5>ðŸš¨ Breaking changes</h5>
<ul>
<li>Change default cache-dependency-glob <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/352">#â€‹352</a>)</li>
<li>No default UV_CACHE_DIR on selfhosted runners <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/380">#â€‹380</a>)</li>
<li>new inputs activate-environment and working-directory <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/381">#â€‹381</a>)</li>
</ul>
<h5>ðŸ§° Maintenance</h5>
<ul>
<li>chore: update known checksums for 0.6.16 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/378">#â€‹378</a>)</li>
<li>chore: update known checksums for 0.6.15 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/377">#â€‹377</a>)</li>
</ul>
<h5>ðŸ“š Documentation</h5>
<ul>
<li>bump to v6 in README <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/382">#â€‹382</a>)</li>
<li>log info on venv activation <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/375">#â€‹375</a>)</li>
</ul>
</details>

<hr />
<h3>Configuration</h3>
<p>ðŸ“… <strong>Schedule</strong>: Branch creation - &quot;before 4am on Monday&quot; (UTC), Automerge - At any time (no schedule defined).</p>
<p>ðŸš¦ <strong>Automerge</strong>: Disabled by config. Please merge this manually once you are satisfied.</p>
<p>â™» <strong>Rebasing</strong>: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.</p>
<p>ðŸ”• <strong>Ignore</strong>: Close this PR and you won't be reminded about this update again.</p>
<hr />
<ul>
<li>[ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box</li>
</ul>
<hr />
<p>This PR was generated by <a href="https://mend.io/renovate/">Mend Renovate</a>. View the <a href="https://developer.mend.io/github/astral-sh/uv">repository job log</a>.</p>
<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzOS4yNTcuMyIsInVwZGF0ZWRJblZlciI6IjM5LjI1Ny4zIiwidGFyZ2V0QnJhbmNoIjoibWFpbiIsImxhYmVscyI6WyJpbnRlcm5hbCJdfQ==-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @renovate[bot] on 2025-04-28 02:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2025-04-28 08:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-04-28 08:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-04-28 08:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:23 UTC
    </footer>
</body>
</html>
