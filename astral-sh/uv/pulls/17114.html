<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enforce latest-version in `@latest` requests - astral-sh/uv #17114</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Enforce latest-version in <code>@latest</code> requests</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/17114">#17114</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2025-12-12 22:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-12 22:43</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Given <code>uv tool install {name}@latest</code>, we make revalidation requests for <code>{name}</code>, but we don't actually add a &quot;latest&quot; constraint when resolving -- we just assume that since the package is unpinned, and we're fetching the latest available versions, the resolver will select the latest version.</p>
<p>However, imagine a package in which the latest version requires Python 3.13 or later, but prior versions support Python 3.9 and up. If we happen to select Python 3.9 ahead of resolution, and the user requests <code>{name}@latest</code>, we would backtrack to the non-latest version due to the Python mismatch.</p>
<p>This PR modifies <code>uv tool install</code> and <code>uv tool run</code> to first determine the latest version, then provide it as a constraint when resolving.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2025-12-12 22:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @charliermarsh on 2025-12-12 22:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @charliermarsh on 2025-12-12 22:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-12-12 22:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/src/commands/tool/install.rs</code>:709 on 2025-12-12 22:44</div>
            <div class="timeline-body"><p>(Looking for a nicer way to do this.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @charliermarsh on 2025-12-12 22:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @charliermarsh on 2025-12-12 23:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-12-13 15:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2025-12-13 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-12-13 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-12-13 15:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:33 UTC
    </footer>
</body>
</html>
