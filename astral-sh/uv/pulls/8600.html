<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>feat: add environment variable to disable progress output - astral-sh/uv #8600</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>feat: add environment variable to disable progress output</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/8600">#8600</a>
        opened by <a href="https://github.com/zzztimbo">@zzztimbo</a>
        on 2024-10-26 19:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/zzztimbo">@zzztimbo</a> on 2024-10-26 19:58</div>
            <div class="timeline-body"><p>The changes in this commit introduce the <code>UV_NO_PROGRESS</code> environment variable as an alternative way to control progress output suppression in uv-cli, equivalent to using the <code>--no-progress</code> flag. This enhancement simplifies configuration in CI environments and automated scripts by eliminating the need to detect whether the script is running in a CI environment.</p>
<p>Previously, disabling progress output required either passing the <code>--no-progress</code> flag directly or implementing script logic to detect CI environments and conditionally add the flag. With this change, users can now simply set <code>UV_NO_PROGRESS=true</code> in their environment to achieve the same effect.</p>
<p>The changes include:</p>
<ul>
<li>Adding the <code>UV_NO_PROGRESS</code> environment variable to the <code>EnvVars</code> struct in <code>crates/uv-static/src/env_vars.rs</code>.</li>
<li>Updating the <code>GlobalArgs</code> struct in <code>crates/uv-cli/src/lib.rs</code> to include a new <code>no_progress</code> field that is bound to the <code>UV_NO_PROGRESS</code> environment variable.</li>
<li>Adding documentation for the new <code>UV_NO_PROGRESS</code> environment variable in <code>docs/configuration/environment.md</code>.</li>
</ul>
<h2>Test Plan</h2>
<p>After creating a uv project using <code>uv init</code> in a temp directory in this project:</p>
<pre><code>cargo run cache clean &amp;&amp; cargo run venv &amp;&amp; UV_NO_PROGRESS=false cargo run sync 
cargo run cache clean &amp;&amp; cargo run venv &amp;&amp; cargo run sync  
</code></pre>
<p>produce the expected default behavior</p>
<pre><code>cargo run cache clean &amp;&amp; cargo run venv &amp;&amp; UV_NO_PROGRESS=false cargo run sync  
</code></pre>
<p>produces the same behavior as having the <code>--no-progress</code> flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-27 00:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:235 on 2024-10-27 00:44</div>
            <div class="timeline-body"><p>Is there a reason it overrides with <code>no_progress</code>? Do you mean <code>&quot;progress&quot;</code> there?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-10-27 00:45</div>
            <div class="timeline-body"><p>Thanks for the detailed description!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @zanieb on 2024-10-27 00:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zzztimbo">@zzztimbo</a> reviewed on 2024-10-27 17:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zzztimbo">@zzztimbo</a> on <code>crates/uv-cli/src/lib.rs</code>:235 on 2024-10-27 17:17</div>
            <div class="timeline-body"><p>Good point. I did a copy paste of the <code>preview</code> field and didn't think very hard. I removed the <code>overrides_with</code> parameter because there isn't a <code>progress</code> field.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @zzztimbo on 2024-10-27 17:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-10-27 19:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-10-27 19:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:02:11 UTC
    </footer>
</body>
</html>
