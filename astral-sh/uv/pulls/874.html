<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Only write to rust cache in CI from main branch - astral-sh/uv #874</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Only write to rust cache in CI from main branch</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/874">#874</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-01-10 20:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-10 20:51</div>
            <div class="timeline-body"><p>Each cache entry is ~1 GB of our allotted 10 GB for the repository which is quite a bit. We're probably losing cache entries all the time since we add an entry per commit per pull request.</p>
<p>Saving the cache takes ~3 minutes (<a href="https://github.com/astral-sh/puffin/actions/runs/7479909295/job/20358124969">example</a>), it's probably just slowing down CI. It's ~25% of our test runtime and ~50% of our clippy runtime.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @zanieb on 2024-01-10 21:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-01-10 21:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-10 21:04</div>
            <div class="timeline-body"><p>The effect of this may be complicated in cases where the cache does not need to be updated (i.e. the key is unchanged). Easy to revert if we're not seeing consistent improvements though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2024-01-10 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-01-10 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-01-10 21:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 15:39:25 UTC
    </footer>
</body>
</html>
