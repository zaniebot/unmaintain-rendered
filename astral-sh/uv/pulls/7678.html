<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add command to bump .python-version(s) files to latest patch version - astral-sh/uv #7678</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add command to bump .python-version(s) files to latest patch version</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/7678">#7678</a>
        opened by <a href="https://github.com/tfsingh">@tfsingh</a>
        on 2024-09-25 05:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tfsingh">@tfsingh</a></div>
            <div class="timeline-body"><p>This PR adds a command (<code>uv python patch</code>) which bumps the distributions listed in .python-versions(s) files to the latest patch version available.</p>
<p>The general strategy for finding the latest patch is to</p>
<ol>
<li>check downloads</li>
<li>fallback to system versions</li>
</ol>
<p>Note that tests may not be deterministic as patches are added â€” this has been documented. I picked Python versions that I believe should be installed on CI runners (based on this):</p>
<img alt="image" src="https://github.com/user-attachments/assets/61995225-1beb-49a4-bc1d-c37c050ff862">

<p>Closes #7569.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-25 14:38</div>
            <div class="timeline-body"><p>I think I&#x27;d spell this as a flag for <code>uv python pin</code> like <code>--upgrade</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/tfsingh">@tfsingh</a> on 2024-09-26 01:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tfsingh">@tfsingh</a> on 2024-09-26 01:40</div>
            <div class="timeline-body"><p>@zanieb @charliermarsh Any thoughts on how to best address the discrepancy in the Windows runners installing Python <code>3.8.10</code>, while Ubuntu/Mac install <code>3.8.12</code>? Looks like I shouldn&#x27;t modify the CI script to specify a patch:</p>
<blockquote>
<p>We do not test with Python patch versions on Windows, so we can use <code>setup-python</code> instead of our bootstrapping code, this is much faster on the extremely slow GitHub Windows runners.</p>
</blockquote>
<p>My thought is to use a cfg! clause to skip the test on windows. I checked if we could potentially modify the version used by mac/ubuntu (<code>3.8.12</code>) to <code>3.8.10</code>, but the runners don&#x27;t seem to install <code>3.8.10</code> on Windows every time (see <a href="https://github.com/astral-sh/uv/actions/runs/11043536499/job/30677981665">this</a> job, where <code>3.10.11</code> was installed).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-26 12:11</div>
            <div class="timeline-body"><p>I would mark the test as requiring the <code>python-patch</code> feature</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tfsingh">@tfsingh</a> on 2024-09-26 17:23</div>
            <div class="timeline-body"><p>Thanks for the tip! Should be ready for a pass (failure seems unrelated)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/tfsingh">@tfsingh</a> on 2024-12-02 05:32</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:48:26 UTC
    </footer>
</body>
</html>
