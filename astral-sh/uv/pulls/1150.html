<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>puffin-client: add SimpleMetadataRaw - astral-sh/uv #1150</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>puffin-client: add SimpleMetadataRaw</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/1150">#1150</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2024-01-27 13:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a></div>
            <div class="timeline-body"><p>This adds what is effectively an owned wrapper around
<code>Archived&lt;SimpleMetadata&gt;</code>. Normally, an <code>Archived&lt;SimpleMetadata&gt;</code>
has to be used behind a pointer (since it has a lifetime
attached to its underlying byte buffer), but we create a
wrapper around it that owns the underlying buffer and provides
free access to the archived type.</p>
<p>This in effect creates an anchor point for the archived type
and lets us pass it around easily. (There has to be an anchor
point for it somewhere.)</p>
<p>An alternative to this approach would be to store it as a file
backed memory map. But in practice, we're dealing with small
files, and just reading them on to the heap is likely to be
faster. (Memory maps also have wildly different perf characteristics
across platforms.)</p>
<p>Note that this commit just defines the type. It isn't actually
used anywhere yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @BurntSushi on 2024-01-27 13:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @BurntSushi on 2024-01-27 13:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">performance</span> added by @BurntSushi on 2024-01-27 13:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/puffin-client/src/rkyvutil.rs</code>:15 on 2024-01-28 15:34</div>
            <div class="timeline-body"><p>I feel dumb asking this, but why <code>/*!</code> instead of <code>//!</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-01-29 01:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-01-29 14:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/puffin-client/src/rkyvutil.rs</code>:15 on 2024-01-29 14:36</div>
            <div class="timeline-body"><p>No particularly strong reason. If rustfmt could normalize everything to <code>//!</code> I'd have no issue with that hah. Just a stylistic thing that I've always used. I find not having <code>//!</code> at the beginning of each line nicer, especially for module docs which tend to be a lot longer.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @BurntSushi on 2024-01-29 14:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2024-01-29 14:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-01-29 14:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:35:22 UTC
    </footer>
</body>
</html>
