<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add basic sdist builder - astral-sh/uv #104</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add basic sdist builder</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/104">#104</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-10-16 12:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2023-10-16 12:34</div>
            <div class="timeline-body"><p>This adds a basic sdist builder that has been tested with two source distributions, one with a PEP 517 backend and one with setup.py.</p>
<p>It uses pip for requirements installation atm, lacks testing in all directions, lacks checks for recursive requirements, can't pass in already resolved versions, doesn't support prepare metadata for build to allow resolution to continue without doing the actual (native) build, error messages are mediocre, etc.</p>
<pre><code class="language-console">$ RUST_LOG=puffin_build=debug puffin-build --wheels wheels downloads/tqdm-4.66.1.tar.gz
2023-10-16T12:28:35.503182Z DEBUG build_sdist{path=&quot;downloads/tqdm-4.66.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}: puffin_build: Building downloads/tqdm-4.66.1.tar.gz
2023-10-16T12:28:35.521780Z  INFO build_sdist{path=&quot;downloads/tqdm-4.66.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}:extract_archive: puffin_build: close time.busy=18.4ms time.idle=16.7µs
2023-10-16T12:28:35.845096Z DEBUG build_sdist{path=&quot;downloads/tqdm-4.66.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}:resolve_and_install: puffin_build: Calling pip to install build dependencies
2023-10-16T12:28:37.668660Z  INFO build_sdist{path=&quot;downloads/tqdm-4.66.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}:resolve_and_install: puffin_build: close time.busy=1.82s time.idle=13.2µs
2023-10-16T12:28:37.668744Z DEBUG build_sdist{path=&quot;downloads/tqdm-4.66.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}: puffin_build: Calling `setuptools.build_meta.get_requires_for_build_wheel()`
2023-10-16T12:28:38.159205Z  INFO build_sdist{path=&quot;downloads/tqdm-4.66.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}:run_python_script{python_interpreter=&quot;/tmp/.tmpm4cTra/venv/bin/python&quot;}: puffin_build: close time.busy=490ms time.idle=13.0µs
2023-10-16T12:28:38.159304Z DEBUG build_sdist{path=&quot;downloads/tqdm-4.66.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}: puffin_build: Calling `setuptools.build_meta.build_wheel()`
2023-10-16T12:28:38.501732Z  INFO build_sdist{path=&quot;downloads/tqdm-4.66.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}:run_python_script{python_interpreter=&quot;/tmp/.tmpm4cTra/venv/bin/python&quot;}: puffin_build: close time.busy=342ms time.idle=15.2µs
2023-10-16T12:28:38.522700Z  INFO build_sdist{path=&quot;downloads/tqdm-4.66.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}: puffin_build: close time.busy=3.02s time.idle=16.2µs
Wheel built to /home/konsti/projects/puffin/crates/puffin-build/wheels/tqdm-4.66.1-py3-none-any.whl
2023-10-16T12:28:38.522772Z DEBUG puffin_build: Took 3020ms
$ puffin-build --wheels wheels downloads/geoextract-0.3.1.tar.gz
2023-10-16T12:28:40.884622Z DEBUG build_sdist{path=&quot;downloads/geoextract-0.3.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}: puffin_build: Building downloads/geoextract-0.3.1.tar.gz
2023-10-16T12:28:40.887743Z  INFO build_sdist{path=&quot;downloads/geoextract-0.3.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}:extract_archive: puffin_build: close time.busy=2.97ms time.idle=12.6µs
2023-10-16T12:28:41.469738Z  INFO build_sdist{path=&quot;downloads/geoextract-0.3.1.tar.gz&quot; base_python=&quot;/usr/bin/python3&quot;}: puffin_build: close time.busy=585ms time.idle=15.3µs
Wheel built to /home/konsti/projects/puffin/crates/puffin-build/wheels/geoextract-0.3.1-py3-none-any.whl
2023-10-16T12:28:41.469814Z DEBUG puffin_build: Took 585ms
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2023-10-16 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2023-10-16 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-10-16 12:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 15:50:52 UTC
    </footer>
</body>
</html>
