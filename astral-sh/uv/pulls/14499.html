<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Added an automatic sourcing utility called &quot;Envy&quot; to CLI  - astral-sh/uv #14499</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Added an automatic sourcing utility called &quot;Envy&quot; to CLI</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/pull/14499">#14499</a>
        opened by <a href="https://github.com/DragonflyRobotics">@DragonflyRobotics</a>
        on 2025-07-07 22:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/DragonflyRobotics">@DragonflyRobotics</a></div>
            <div class="timeline-body">Summary
<p>Firstly, I am a daily user of <code>uv</code> and enjoy its all encompassing features. I am a first time contributor to this project so please let me know of any modifications, improvements, or suggestions. I always struggled sourcing my environment since many projects had multiple environments, often with different names and locations. Sourcing them was always a struggle. I made &quot;Envy&quot; as a CLI tool to automatically find environments in the current directory (recursively) and auto source them. If there are multiple, it will open a FZF session to help the user quickly select one making the development process simpler. Considering that <code>uv</code> is a broad spectrum Python tool, I thought it would be best utilized as a component of <code>uv</code>.</p>
<p>In addition to the software changes, this project will require users to have <code>fzf</code> installed and add <code> eval &quot;$(&lt;PATH_TO_UV&gt; envy init zsh)&quot;</code> in their shell init (in this case <code>zsh</code>). This function will create a shell function called <code>envy</code> that can be used to auto source environments.</p>
<p>I have only added functionality for <code>zsh</code> at the moment but if this seems like a viable contribution to <code>uv</code>, I can certainly add support for other POSIX and non-POSIX shells that are most common. This also applies to cross-platform support since this only supports Linux at the present. The modification isn&#x27;t difficult, just tedious.</p>
<p>This partially inspired from <code>zoxide</code> project that reducing typing and clutter in the terminal. I think this could also be expanded to help with other environment functions although the exact functions are still in progress. Any ideas on that regard would be appreciated.</p>
Usage
<p>There are two modes of use:
<code>envy</code> - This mode will auto source if only a single environment is found in the current directory OR open <code>fzf</code> if multiple are found.
<code>envy -j</code> - This mode will auto source regardless of the number of environments to the one closest in file path to the user&#x27;s working directory.</p>
<p>The actual feature resides in <code>uv envy</code> and <code>uv envy -j</code> which will print anything that must be run in the current shell with <code>&lt;ENVY&gt; COMMAND</code>. But using the <code>envy</code> shell function, all <code>&lt;ENVY&gt;</code> commands will be run allowing the current shell to be sourced.</p>
<p>Please let me know if you are interested in adding this handy feature to <code>uv</code>. I would be very grateful as would other Python users suffering from this inconvenience. If you would like to change any component of this project (including the name if it out-of-place from <code>uv</code> UX ideas) please let me know.</p>
Test Plan
<p>I have created test cases for the shell integration and environment search to the code. <code>cargo test -p uv-envy</code> will run these tests. The environment search is tested via <code>tempfile</code> to emulate directory structure. Unfortunately, there is no straight-forward way to test the sourcing functionality. Additionally, all tests under <code>uv</code> that pertain to my modifications (particularly the help menu) have been updated.</p>
Note
<p>Due to a slight typo on my end, my <code>uv-envy</code> crate files only appear in the latest commit. I truly apologize for the mistake and inconvenience.
Also, for testing purposes, the path in the <code>init.rs</code> for the <code>zsh</code> template points to a hardcoded location on my system. That should be updated for testing to the debug binary location and eventually the <code>uv</code> installation directory (using <code>which uv</code>) but I haven&#x27;t done that yet for ease of testing.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:53:02 UTC
    </footer>
</body>
</html>
