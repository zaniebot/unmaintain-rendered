<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Breaking] Install in `~/.local/bin` instead of cargo home - astral-sh/uv #2236</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Breaking] Install in <code>~/.local/bin</code> instead of cargo home</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/2236">#2236</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-03-06 09:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p><code>uv</code> is not part of the rust toolchain nor is it usually installed or managed by cargo. Similarly, i expect that the majority of users does not have cargo installed. We should instead use a not-rust-associated directory for binaries.</p>
<p>I chose <code>~/.local/bin</code>, which is mentioned in <a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html">XDG Base Directory Specification</a> and also used by pipx.</p>
<blockquote>
<p>User-specific executable files may be stored in $HOME/.local/bin. Distributions should ensure this directory shows up in the UNIX $PATH environment variable, at an appropriate place.</p>
</blockquote>
<p>As testing strategy, i&#x27;d create a prerelease and test windows and linux(es), while i&#x27;d need someone to test mac.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/konstin">@konstin</a> on 2024-03-06 09:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-06 13:32</div>
            <div class="timeline-body"><p>How does this work across platforms? Like what happens on Windows?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-03-06 15:57</div>
            <div class="timeline-body"><p>Windows currently uses <code>C:\Users\Ferris\.cargo\bin</code>, i expect this to switch to <code>C:\Users\Ferris\.local\bin</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-03-06 15:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-06 20:47</div>
            <div class="timeline-body"><p>For what it&#x27;s worth, I don&#x27;t have a <code>~\.local\bin</code> on my Windows machine, but it does look like pipx uses that. Will the installer add it to PATH?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-03-06 20:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-06 20:56</div>
            <div class="timeline-body"><p>I&#x27;m cool with the directory but will it cause <em>problems</em> when used alongside <code>pipx</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-06 20:57</div>
            <div class="timeline-body"><p>Should it be <code>~/.astral/bin</code>...?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-03-07 09:50</div>
            <div class="timeline-body"><blockquote>
<p>Should it be ~/.astral/bin...?</p>
</blockquote>
<p>If everybody did that it would require a PATH entry per vendor, which imo would be bad. Normally installing into <code>~/.astral</code> and symlinking into PATH would be an option, but that doesn&#x27;t work on windows. I could see installing it into <code>~/.cargo-dist/bin</code> or <code>~/.axo/bin</code> if that helps with the updater. Note that i&#x27;m not opposed to putting stuff into <code>$XDG_*/astral</code> - we should do that - i&#x27;m only advocating for this PATH convention.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-03-07 14:21</div>
            <div class="timeline-body"><p>I&#x27;ve realized this will break people who rely on the current installation location. I&#x27;d bundle this with other bigger changes (v0.2 probably) if possible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Install in `~/.local/bin` instead of cargo home&quot; to &quot;[Breaking] Install in `~/.local/bin` instead of cargo home&quot; by <a href="https://github.com/konstin">@konstin</a> on 2024-03-07 14:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-07 14:24</div>
            <div class="timeline-body"><p>Yeah I think this has some upside but also has the potential to be pretty disruptive.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">do-not-merge</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-07 14:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woutervh">@woutervh</a> on 2024-03-08 00:58</div>
            <div class="timeline-body"><p>I don&#x27;t care whatever <em>default</em> location is choosen, as long as you can choose to override it yourself.
see <a href="https://github.com/astral-sh/uv/issues/2087">astral-sh/uv#2087</a></p>
<p>My personal preference is <code>~/bin</code> because I don&#x27;t want executables hidden away in hidden folders multiple levels deep.
Why?</p>
<p>If I need to support non technical people on windows with a non-working python-executable in some virtualenv,
I would often need to start explaining them  to &quot;Open File Explorer from the taskbar. Select View &gt; Options &gt; Change folder and search options. Select the View tab and, in Advanced settings, select Show hidden files, folders, and drives and OK.&quot;  Just to be able to start seeing a folder.</p>
<p><code>~/.local/bin</code> is just another personal preference.  In 20 years I only encountered a handful installers that use it. i never actively used pipx.  It&#x27;s OK as a <em>default</em>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sondr3">@sondr3</a> on 2024-03-08 12:31</div>
            <div class="timeline-body"><p>Just chiming in to say that I dislike tools that don&#x27;t use XDG directories for caches, binaries and configs, they are a standard for a reason. <code>~/.local/bin</code> is <em>not</em> personal preference, it&#x27;s where binaries should be installed on Linux (and macOS). My <code>config.fish</code> is littered with directory checks to add binaries to my <code>$PATH</code> for umpteen tools and languages. The same issue in <a href="https://github.com/rust-lang/cargo/issues/1734"><code>cargo</code></a> is one of the issues with the most upvotes. <code>ghcup</code> (<code>rustup</code> for Haskell) solves this by symlinking binaries into <code>~/.local/bin</code> from it&#x27;s own <code>~/.ghcup/bin</code> which could be a alternative solution? This way the old setup keeps working but for new users you don&#x27;t need to check and add a new path to your machine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mitsuhiko">@mitsuhiko</a> on 2024-03-08 12:56</div>
            <div class="timeline-body"><p>For what it&#x27;s worth with rye i went through various different choices and I ended up with one path for all platforms instead of messing with the XDG stuff or trying to find suitable locations on all platforms. It&#x27;s super confusing when you need to look into different places depending on which machine you are on. I also with with <code>~/.rye/shims</code> as a place on the path since rye is installing further tools. I fully expect that a future uv will be in the same position and will need to bring it&#x27;s own folder onto the path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-03-08 13:56</div>
            <div class="timeline-body"><p>@woutervh Is <code>.local</code> a hidden folder for you on windows? It looks non-hidden on mine.</p>
<p><img src="https://github.com/astral-sh/uv/assets/6826232/eda3659b-58cb-41ff-9c06-7736226320ed" alt="grafik"></p>
<p>@mitsuhiko What made you choose that over <code>.local/bin</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woutervh">@woutervh</a> on 2024-03-08 14:12</div>
            <div class="timeline-body"><p>Rye is a good example:  via RYE_HOME, a user can still override the default directory and choose their own location
(and I use it, many thanks @mitsuhiko)</p>
<p>@konstin  .dotfiles are not hidden on windows? You are right, my mistake.</p>
<blockquote>
<p>Just chiming in to say that I dislike tools that don&#x27;t use XDG directories for caches, binaries and configs,
For system-managed applications I agree,  but for virtualenv-based tools even XDG should only be a default that can be overridden.</p>
</blockquote>
<p>the goal of using venv is isolation from other venvs,
then imagine a venv-based tool insisting taking its config from the hardcoded location:</p>
<ul>
<li>venv-app-v1/bin/app</li>
<li>venv-app-v2/bin/app</li>
<li>venv-app-v3/bin/app</li>
</ul>
<p>all reading ~/config//config</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mitsuhiko">@mitsuhiko</a> on 2024-03-08 14:26</div>
            <div class="timeline-body"><blockquote>
<p>@mitsuhiko What made you choose that over <code>.local/bin</code>?</p>
</blockquote>
<p><code>rye tools install</code> installs additional binaries. Those need to be placed somewhere. If I were to put them into <code>~/.local/bin</code> I would start to muck around in a folder that is not fully under rye&#x27;s control. Similar motivation to <code>~/.cargo/bin</code> I assume.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-03-08 16:37</div>
            <div class="timeline-body"><p>What would you think about (sym)linking those binaries to <code>~/.local/bin</code>, from the background that it&#x27;s the XDG standard that users are expected to have in PATH while rye&#x27;s shim directory requires modifying dotfiles?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-13 19:18</div>
            <div class="timeline-body"><p>We might want to take into account toolchain management design considerations e.g. <code>rustup</code> / <code>cargo</code> do <em>not</em> have shims in <code>~/.local/bin</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-03-13 19:31</div>
            <div class="timeline-body"><p>For me it comes down to a somewhat philosophical distinction: Do we consider <code>uv</code> a tool that gets installed, so it goes where all the installed tools go, or do we consider it a &quot;system&quot; application manager with its own domain that can reasonably expect people to change their PATH for it. Note that people have asking cargo to <a href="https://github.com/rust-lang/cargo/issues/1734">use the xdg directories</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alldevic">@alldevic</a> on 2024-05-11 12:08</div>
            <div class="timeline-body"><p>In Windows, why not use %APPDATA% folder for specific user and Program Files for everyone?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2024-05-21 16:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-21 16:07</div>
            <div class="timeline-body"><p>I think we should change this someday still</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-05-21 16:26</div>
            <div class="timeline-body"><p>I&#x27;m also strongly in favor of getting out of the cargo brand. If we want to change it, i believe we need to do it in breaking release before <code>uv tool</code> support lands, the sooner the better before external dependencies on the uv install location are created.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-21 17:12</div>
            <div class="timeline-body"><p>@charliermarsh Why were you opposed to doing it in 0.2.0?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-21 17:14</div>
            <div class="timeline-body"><p>I just didn&#x27;t consider it an important change and hadn&#x27;t had time to think through the consequences. How will this interact with tool installs? Do we know?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-21 17:15</div>
            <div class="timeline-body"><p>By &quot;important&quot;, I mean &quot;pressing&quot; or &quot;time-sensitive&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-21 17:32</div>
            <div class="timeline-body"><p>I don&#x27;t see how it interacts with tool installs. I agree it&#x27;s not pressing but I agree with Konsti that there is some time sensitivity in that the longer we wait there may be increased reliance on this install location downstream.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-21 17:33</div>
            <div class="timeline-body"><p>The interaction point is: where will binaries <em>installed by uv</em> be placed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-21 17:34</div>
            <div class="timeline-body"><p>True that&#x27;s a consideration and an open question.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:44:07 UTC
    </footer>
</body>
</html>
