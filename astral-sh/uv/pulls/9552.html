<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build backend: Default excludes - astral-sh/uv #9552</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Build backend: Default excludes</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/9552">#9552</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-12-01 11:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>When adding excludes, we usually don&#x27;t want to include python cache files. On the contrary, I haven&#x27;t seen any project in my ecosystem research that would want any of <code>__pycache__</code>, <code>*.pyc</code>, <code>*.pyo</code> to be included. By moving them behind a <code>default-excludes</code> toggle, they are always active even when defining custom excludes, but can be deactivated if the user so chooses.</p>
<p>With includes and excludes being this small again, we can roll back the include-exclude anchored difference to always using anchored globs (i.e. you would need to use <code>**/build-*.h</code> below).</p>
<p>A pyproject.toml with custom settings with the change applied:</p>
<pre><code>[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
readme = &quot;README.md&quot;
license-files = [&quot;LICENSE*&quot;, &quot;third-party-licenses/*&quot;]

[tool.uv.build-backend]
# A file we need for the source dist -&gt; wheel step, but not in the wheel itself (currently unused)
source-include = [&quot;data/build-script.py&quot;]
# A temporary or generated file we want to ignore
source-exclude = [&quot;/src/foo/not-packaged.txt&quot;]
# Headers are build-only
wheel-exclude = [&quot;build-*.h&quot;]

[tool.uv.build-backend.data]
scripts = &quot;scripts&quot;
data = &quot;assets&quot;
headers = &quot;header&quot;

[build-system]
requires = [&quot;uv&gt;=0.5.5,&lt;0.6&quot;]
build-backend = &quot;uv&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/konstin">@konstin</a> on 2024-12-01 11:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-12-01 11:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-build-backend/src/metadata.rs</code>:738 on 2024-12-01 11:35</div>
            <div class="timeline-body"><p>I&#x27;m staging the real docs here</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/BurntSushi">@BurntSushi</a> by <a href="https://github.com/konstin">@konstin</a> on 2024-12-01 11:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/konstin">@konstin</a> on 2024-12-01 11:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/konstin">@konstin</a> on 2024-12-01 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2024-12-01 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-12-01 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-12-03 14:18</div>
            <div class="timeline-body"><p>Makes sense to me.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:49:37 UTC
    </footer>
</body>
</html>
