<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avoid early error for transistive constraints - astral-sh/uv #1621</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Avoid early error for transistive constraints</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/1621">#1621</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-02-18 02:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body">Summary
<p>If a constraint causes some requirement in a dependency to yield the empty set, we should avoid early termination. (I believe we do this right now because the error messages are better.) This is different than if you have (e.g.) two direct requirements with conflicting versions, which <em>should</em> error immediately.</p>
<p>Closes <a href="https://github.com/astral-sh/uv/issues/1522">astral-sh/uv#1522</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-18 02:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-02-18 02:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/pip_compile.rs</code>:3594 on 2024-02-18 02:25</div>
            <div class="timeline-body"><p>I need to improve this case before merging.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-18 02:25</div>
            <div class="timeline-body"><p>@zanieb - I think this is the thing that would&#x27;ve been solved by that PR you had at one point to allow returning multiple versions (i.e., to avoid this eager merging).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-18 02:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-18 07:53</div>
            <div class="timeline-body"><p>I&#x27;m not sure which one you&#x27;re referring to anymore :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-18 12:59</div>
            <div class="timeline-body"><p>@zanieb - Found it! <a href="https://github.com/astral-sh/uv/pull/383">astral-sh/uv#383</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-18 21:17</div>
            <div class="timeline-body"><p>Oh gosh we probably still want that don&#x27;t we... ðŸ˜­</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-18 21:20</div>
            <div class="timeline-body"><p>Yeah I think it would indirectly solve this problem</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-18 21:20</div>
            <div class="timeline-body"><p>(Like in theory it would make this PR redundant and avoid the bad error message I commented on in the PR.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-18 21:21</div>
            <div class="timeline-body"><p>I think the main blocker there was the URL dependency stuff and I think you had a better solution for that than me? Maybe you should take a look at it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-19 18:03</div>
            <div class="timeline-body"><p>@zanieb - Yeah I can take this on. I have to prioritize some other things over it first. Do you think this is worth merging as-is even with the bad error message? Defer to you on that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-02-19 18:15</div>
            <div class="timeline-body"><p>I&#x27;ll take the incremental improvement.</p>
<p>Is there a test case covering a successful resolution for the bug? It looks like the new test case does not succeed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-21 18:13</div>
            <div class="timeline-body"><p>Closing in favor of <a href="https://github.com/astral-sh/uv/pull/1796">astral-sh/uv#1796</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-21 18:13</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:43:43 UTC
    </footer>
</body>
</html>
