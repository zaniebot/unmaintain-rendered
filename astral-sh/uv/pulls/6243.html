<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Special-case reinstalls in environment update summaries - astral-sh/uv #6243</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Special-case reinstalls in environment update summaries</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/6243">#6243</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-08-20 03:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-20 03:57</div>
            <div class="timeline-body"><p>e.g.</p>
<pre><code>❯ uv pip install httpx==0.26.0 --reinstall-package httpx
Resolved 7 packages in 67ms
Prepared 1 package in 0.95ms
Uninstalled 1 package in 2ms
Installed 1 package in 12ms
 ~ httpx==0.26.0
</code></pre>
<pre><code>❯ uv add httpx==0.26.0
warning: `uv add` is experimental and may change without warning
warning: `uv.sources` is experimental and may change without warning
Resolved 15 packages in 23ms
   Built example @ file:///Users/zb/workspace/example
Prepared 2 packages in 187ms
Uninstalled 2 packages in 2ms
Installed 2 packages in 2ms
 ~ example==0.1.0 (from file:///Users/zb/workspace/example)
 - httpx==0.27.0
 + httpx==0.26.0
</code></pre>
<p>Motivated by trying to reduce the diff for project updates in <code>uv add</code>. I think it makes sense in general though. We'll also want a special output for upgrades in the future, e.g. reducing the <code>httpx</code> changes in the second example to a single line indicating the original and subsequent distribution versions.</p>
<p>I'd like to have</p>
<blockquote>
<p>Reinstalled 1 package in 2ms</p>
</blockquote>
<p>but it seems non-trivial to show the timing for it? I think we'd need to determine what we want to call a &quot;Reinstall&quot; during the operations and split doing them from the rest of the uninstalls and installs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-08-20 03:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @zanieb on 2024-08-20 03:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2024-08-20 14:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @zanieb on 2024-08-20 14:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-20 15:00</div>
            <div class="timeline-body"><p>It looks like we could determine reinstalls and upgrades from the <code>Plan</code>. I've got some follow-up work-in-progress that shifts to doing that, but I don't think it blocks this change.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-08-20 15:08</div>
            <div class="timeline-body"><p>This looks reasonable to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2024-08-20 15:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-08-20 15:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-08-20 15:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:00:58 UTC
    </footer>
</body>
</html>
