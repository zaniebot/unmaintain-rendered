<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiple modules in namespace packages - astral-sh/uv #14460</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Multiple modules in namespace packages</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/14460">#14460</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-07-04 14:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2025-07-04 14:33</div>
            <div class="timeline-body"><p>Support multiple root modules in namespace packages by enumerating them:</p>
<pre><code class="language-toml">[tool.uv.build-backend]
module-name = [&quot;foo&quot;, &quot;bar&quot;]
</code></pre>
<p>This allows applications with multiple root packages without migrating to workspaces. Since those are regular module names (we iterate over them an process each one like a single module names), it allows combining dotted (namespace) names and regular names. It also technically allows combining regular and stub modules, even though this is even less recommends.</p>
<p>We don't recommend this structure (please use a workspace instead, or structure everything in one root module), but it reduces the number of cases that need <code>namespace = true</code>.</p>
<p>Fixes #14435
Fixes #14438</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @konstin on 2025-07-04 14:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">build-backend</span> added by @konstin on 2025-07-04 14:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chirizxc">@chirizxc</a> on 2025-07-05 16:34</div>
            <div class="timeline-body"><p>also fixes #14438</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @konstin on 2025-07-07 10:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @konstin on 2025-07-07 10:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-07-07 10:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/concepts/build-backend.md</code>:151 on 2025-07-07 10:17</div>
            <div class="timeline-body"><p>The clearer explanation would be: Only use this for legacy projects, for a new project, use a layout with a single <code>module-name</code> value, it'll save you and your user from the pain of debugging this later.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @konstin on 2025-07-07 10:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-07 20:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/concepts/build-backend.md</code>:151 on 2025-07-07 20:18</div>
            <div class="timeline-body"><p>I wrote some proposed edits at https://github.com/astral-sh/uv/pull/14494</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-07 20:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-build-backend/src/settings.rs</code>:38 on 2025-07-07 20:24</div>
            <div class="timeline-body"><p>Maybe this should say... &quot;However, we recommend...&quot;?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-build-backend/src/settings.rs</code>:38 on 2025-07-08 15:52</div>
            <div class="timeline-body"><p>Maybe it's beyond the scope of these docs here, but I think it would be useful to expand on the recommendation here. Specifically, saying <em>why</em> we are recommending this and maybe something about the trade-offs here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2025-07-08 15:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-07-09 15:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-build-backend/src/settings.rs</code>:38 on 2025-07-09 15:33</div>
            <div class="timeline-body"><p>The general risk with namespaces is that you can have files overwriting each other (this does happen) and it the provenance of modules isn't immediately clear anymore. When using a namespace package <code>module-name</code> is recommended over <code>namespace = true</code>, since the former checks that the module list is what you intend it to be, while the latter doesn't have that check (see also https://github.com/jwodder/check-wheel-contents, where we cover a number of lints by checking for <code>__init__.py[i]</code> when using <code>module-name</code> (or the defaults) without <code>namespace = true</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2025-07-09 15:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-build-backend/src/settings.rs</code>:38 on 2025-07-09 15:42</div>
            <div class="timeline-body"><p>Yeah I think if some version of that made it into the docs, that would be great.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-07-09 17:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-07-09 17:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-07-09 17:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 06:55:40 UTC
    </footer>
</body>
</html>
