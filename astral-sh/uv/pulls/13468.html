<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Build backend: Case sensitive module discovery - astral-sh/uv #13468</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Build backend: Case sensitive module discovery</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/13468">#13468</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-05-15 13:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2025-05-15 13:59</div>
            <div class="timeline-body"><p>We may run on case-sensitive file systems (Linux, generally) or on case-insensitive file systems (Windows, generally), while modules in Python may be lower or upper case. For robustness over filesystem casing, we require an explicit module name for modules with upper case letters.</p>
<p>Fixes #13419</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @konstin on 2025-05-15 13:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-05-15 14:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-globfilter/src/portable_glob.rs</code>:98 on 2025-05-15 14:00</div>
            <div class="timeline-body"><p>This is the core change, the other changes are in support of that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-build-backend/src/lib.rs</code>:243 on 2025-05-15 14:01</div>
            <div class="timeline-body"><p>Centralized here for normalization</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-05-15 14:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @konstin on 2025-05-15 14:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2025-05-15 16:33</div>
            <div class="timeline-body"><p>I think this LGTM, but my main concern here is doing case insensitive globbing on <em>all</em> file systems. Couldn't that be unexpected behavior?</p>
<p>To try and answer my own question, I think the idea is that you want the build backend to match the same set of files <em>regardless</em> of platform, so that you get consistency. To that end, always doing case insensitive globbing means you fall to the lowest common denominator, so to speak. With that said, couldn't this be quite surprising for users on file systems that are case sensitive?</p>
<p>And should this behavior be documented somewhere?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-15 18:48</div>
            <div class="timeline-body"><blockquote>
<p>To try and answer my own question, I think the idea is that you want the build backend to match the same set of files <em>regardless</em> of platform, so that you get consistency. To that end, always doing case insensitive globbing means you fall to the lowest common denominator, so to speak. With that said, couldn't this be quite surprising for users on file systems that are case sensitive?</p>
</blockquote>
<p>Are there alternatives that have good behavior across platforms? My primary example would be a module called <code>PIL</code>, and I want to build that on Linux, Windows and Mac. Are there any behaviors that can reliably expect across platforms? Part of the problem is that I'm trying to match a path in a directory, instead of opening it; this allows <code>pil</code> to automatically find <code>PIL</code>, because the user may have set the package name to <code>Pil</code> and we normalized it away. Maybe we shouldn't do that and always force configuration for names with uppercase letters?</p>
<blockquote>
<p>And should this behavior be documented somewhere?</p>
</blockquote>
<p>Will do.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-16 09:35</div>
            <div class="timeline-body"><p>I switched strategies, uppercase names need to be declared explicitly in <code>tool.uv.module-name</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-05-16 09:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>docs/configuration/build-backend.md</code>:43 on 2025-05-16 09:35</div>
            <div class="timeline-body"><p>This section will become &quot;Modules and Namespaces&quot; once implemented.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2025-05-16 12:22</div>
            <div class="timeline-body"><p>Nice! I think this seems better to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from " Build backend: Case insensitive module discovery" to " Build backend: Case sensitive module discovery" by @konstin on 2025-05-16 12:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2025-05-16 12:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-05-16 12:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-05-16 12:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:24 UTC
    </footer>
</body>
</html>
