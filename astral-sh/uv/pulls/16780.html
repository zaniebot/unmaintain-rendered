<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CI Perf: fast-build - astral-sh/uv #16780</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>CI Perf: fast-build</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/pull/16780">#16780</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-11-19 18:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2025-11-19 18:03</div>
            <div class="timeline-body"><p><em>No description provided.</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @konstin on 2025-11-19 18:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-11-19 18:55</div>
            <div class="timeline-body"><p>Windows seems unchanged, Linux goes from 6:xx min to 4:xx min</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-19 19:20</div>
            <div class="timeline-body"><p>Can we use this for the binary builds we use for integration tests too?</p>
<p>Is there risk to using these fast builds for tests? Are we going to lose test coverage?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-11-19 19:27</div>
            <div class="timeline-body"><p>The fast-build profile strip debug info, so we'd lose information if we running a coverage tools like coverage.py, but I'm not aware that we're using such a tool. No debug info also means that if there's a crash, we don't get a backtrace, similar to our release builds. If that's a good tradeoff IMHO depends on how much faster it is.</p>
<p>We don't use any functional coverage in our tests though, the binaries are only a bit more optimized and stripped of debuginfo, basically half way between a regular debug builds and full release builds.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-11-19 19:28</div>
            <div class="timeline-body"><blockquote>
<p>Can we use this for the binary builds we use for integration tests too?</p>
</blockquote>
<p>Added, let's see how it goes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-11-28 09:49</div>
            <div class="timeline-body"><p>The optimal profile is different for tests vs. for binary builds: For tests, we want opt level 1 and no debug info, while for binary builds, we only want no debug info, opt level 1 makes the builds slower (e.g. 45s to 1min 15s).</p>
<p>LLM'd plot:</p>
<p><img width="2085" height="1777" alt="image" src="https://github.com/user-attachments/assets/152c6807-2917-492f-be2c-31ab25854d95" /></p>
<p>Another run, different plotting:</p>
<p><img width="2085" height="1777" alt="image" src="https://github.com/user-attachments/assets/482926f0-3578-4142-a4e9-06fea0d53426" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @konstin on 2025-11-28 09:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-12-04 17:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>README.md</code>:199 on 2025-12-04 17:46</div>
            <div class="timeline-body"><pre><code class="language-suggestion"> + cpython-3.12.12-macos-aarch64-none (python3.12)
 + cpython-3.13.9-macos-aarch64-none (python3.13)
 + cpython-3.14.0-macos-aarch64-none (python3.14)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>Cargo.toml</code>:317 on 2025-12-04 17:47</div>
            <div class="timeline-body"><p>If it's oriented for tests should we call it <code>profile.testing</code>? or similar?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-12-04 17:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-12-04 17:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-12-05 15:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>Cargo.toml</code>:317 on 2025-12-05 15:37</div>
            <div class="timeline-body"><p>Yes, I only wanted to avoid the churn here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-12-11 13:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-12-11 13:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-12-11 13:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:31 UTC
    </footer>
</body>
</html>
