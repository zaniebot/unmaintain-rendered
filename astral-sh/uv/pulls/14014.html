<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support installing additional executables in `uv tool install` - astral-sh/uv #14014</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support installing additional executables in <code>uv tool install</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/14014">#14014</a>
        opened by <a href="https://github.com/aaron-ang">@aaron-ang</a>
        on 2025-06-13 05:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/aaron-ang">@aaron-ang</a></div>
            <div class="timeline-body"><p>Close #6314</p>
Summary
<p>Continuing from #7592. Created a new PR to rebase the old branch with <code>main</code>, cleaned up test errors, and improved readability.</p>
Test Plan
<p>Same test cases as in #7592.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/konstin">@konstin</a> on 2025-06-13 10:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-13 11:52</div>
            <div class="timeline-body"><p>Cool, thanks! I&#x27;ll take a look.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-13 13:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/common.rs</code>:281 on 2025-06-13 13:07</div>
            <div class="timeline-body"><p>Nit: We use <code>s</code> as the name pretty consistently in this repository, it&#x27;d be nice to retain the style there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/common.rs</code>:300 on 2025-06-13 13:12</div>
            <div class="timeline-body"><p>It looks like we add all the entries to <code>new_entrypoints</code> so it&#x27;s identical to <code>installed_entrypoints</code>? Should we just return <code>installed_entrypoints</code>? I&#x27;m confused about what this is for.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-13 13:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/common.rs</code>:300 on 2025-06-13 13:17</div>
            <div class="timeline-body"><p>(Nevermind I had the wrong commit checked out locally where <code>installed_entrypoints</code> was not passed in as a mutable ref, let me look at this again...)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-13 13:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-13 13:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/common.rs</code>:300 on 2025-06-13 13:19</div>
            <div class="timeline-body"><p>I think I&#x27;m still confused about <code>new_entrypoints</code>, it&#x27;s not used? Why do we take <code>installed_entrypoints</code> as a mutable ref instead of just returning the entrypoints that we&#x27;ve installed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-13 13:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/common.rs</code>:314 on 2025-06-13 13:20</div>
            <div class="timeline-body"><p>I don&#x27;t think we should return <code>ExitStatus</code> from utilities â€” if this has no return value we should use <code>Ok(())</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-13 13:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/install.rs</code>:627 on 2025-06-13 13:27</div>
            <div class="timeline-body"><p>It&#x27;s sad we need to clone all these. These are just needed for the receipt, right? but we don&#x27;t create a receipt for each extra executable, those are included in the top-level tool receipt?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/aaron-ang">@aaron-ang</a> on <code>crates/uv/src/commands/tool/common.rs</code>:300 on 2025-06-13 18:29</div>
            <div class="timeline-body"><p>my bad. I didn&#x27;t remove <code>new_entrypoints</code> from the refactoring in the previous commit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/aaron-ang">@aaron-ang</a> reviewed on 2025-06-13 18:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/aaron-ang">@aaron-ang</a> on <code>crates/uv/src/commands/tool/install.rs</code>:627 on 2025-06-13 18:38</div>
            <div class="timeline-body"><p>Perhaps we could move the logic of accumulating <code>install_entrypoints</code> into <code>install_executables</code>, which will also reduce cloning.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/aaron-ang">@aaron-ang</a> reviewed on 2025-06-13 18:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/aaron-ang">@aaron-ang</a> on 2025-06-13 23:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/aaron-ang">@aaron-ang</a> on 2025-06-19 23:41</div>
            <div class="timeline-body"><p>rebased with main</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/aaron-ang">@aaron-ang</a> reviewed on 2025-06-27 21:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/aaron-ang">@aaron-ang</a> on <code>crates/uv/src/commands/tool/common.rs</code>:207 on 2025-06-27 21:04</div>
            <div class="timeline-body"><p>We deduplicate and sort the entrypoints, then iterate over them and the root package to install.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/aaron-ang">@aaron-ang</a> on <code>crates/uv/src/commands/tool/common.rs</code>:342 on 2025-06-27 21:09</div>
            <div class="timeline-body"><p>And add a single tool receipt at the end containing all installed entrypoints.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/aaron-ang">@aaron-ang</a> reviewed on 2025-06-27 21:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-17 12:23</div>
            <div class="timeline-body"><p>Thanks for your patience here! I think this is approaching being ready to merge.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 12:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:4424 on 2025-07-17 12:24</div>
            <div class="timeline-body"><p>Sorry if we&#x27;ve discussed this, but should this be <code>comma::CommaSeparatedRequirements</code>? It seems nice to use comma separated values since the flag name is long, and it seems fine to allow requirements rather than package names.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 12:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-tool/src/tool.rs</code>:174 on 2025-07-17 12:25</div>
            <div class="timeline-body"><p>Could we avoid taking a <code>mut</code>? Is there a strong motivation to do so?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 12:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/common.rs</code>:254 on 2025-07-17 12:26</div>
            <div class="timeline-body"><p>Does this mean we&#x27;ll fail if <em>any</em> of the <code>--with-executables-from</code> packages doesn&#x27;t have entry points? It should probably just be a warning hinting to use <code>--with</code> instead if it&#x27;s not the root package.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 12:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/common.rs</code>:254 on 2025-07-17 12:26</div>
            <div class="timeline-body"><p>Could you add a test case for this scenario?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/aaron-ang">@aaron-ang</a> reviewed on 2025-07-17 14:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/aaron-ang">@aaron-ang</a> on <code>crates/uv-tool/src/tool.rs</code>:174 on 2025-07-17 14:49</div>
            <div class="timeline-body"><p>I&#x27;ve reverted this change to remove the <code>mut</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/aaron-ang">@aaron-ang</a> reviewed on 2025-07-17 14:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/aaron-ang">@aaron-ang</a> on <code>crates/uv-cli/src/lib.rs</code>:4424 on 2025-07-17 14:50</div>
            <div class="timeline-body"><p>by requirements do you mean <code>requirements.txt</code>? My understanding is that <code>requirements.txt</code> is only used for <code>pip install</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Support installing additional executables in`uv tool install`&quot; to &quot;Support installing additional executables in `uv tool install`&quot; by <a href="https://github.com/aaron-ang">@aaron-ang</a> on 2025-07-17 14:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 15:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:4424 on 2025-07-17 15:05</div>
            <div class="timeline-body"><p>No, I mean like a <code>RequirementsTxtRequirement</code> (which is a single requirement) rather than a <code>PackageName</code>.</p>
<p>e.g., as handled at</p>
<p>https://github.com/astral-sh/uv/blob/b7db67edc166de7aa7d689b112cd4cb8a4809efc/crates/uv/src/lib.rs#L1239-L1244</p>
<p>maybe using <code>RequirementsSource::from_package</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 15:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:4424 on 2025-07-17 15:20</div>
            <div class="timeline-body"><p>No <code>RequirementsTxtRequirement</code> is similar to <code>PackageName</code> but allows more things. It&#x27;s not a <code>requirements.txt</code> file.</p>
<p>The behavior would be the same, e.g., <code>--with-executables-from foo</code> would work, but you&#x27;d also be able to do multiple values, e.g., <code>--with-executables-from foo,bar</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-30 15:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/lib.rs</code>:1234 on 2025-07-30 15:56</div>
            <div class="timeline-body"><p>It looks like you dropped with <code>with_capacity</code> optimization?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-30 15:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/install.rs</code>:626 on 2025-07-30 15:57</div>
            <div class="timeline-body"><p>I wonder if we should resolve these to <code>PackageName</code> over in <code>uv/src/lib.rs</code> instead so you don&#x27;t need to do this here? Over there, we know they&#x27;re package names.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-30 15:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/lib.rs</code>:1233 on 2025-07-30 15:58</div>
            <div class="timeline-body"><p>I think we probably need some sort of comment here that makes it clear that <code>with_executables_from</code> are being added to <code>with</code>. It&#x27;s easy to miss otherwise.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-30 15:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/install.rs</code>:626 on 2025-07-30 15:59</div>
            <div class="timeline-body"><p>This would help with <a href="https://github.com/astral-sh/uv/pull/14014">astral-sh/uv#14014</a>/files?diff=unified&amp;w=1#r2243165952 too, since the type would be different.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-30 16:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/tool_install.rs</code>:3885 on 2025-07-30 16:03</div>
            <div class="timeline-body"><p>Is this resolved now? Can we drop the cfg?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/aaron-ang">@aaron-ang</a> on 2025-07-30 17:13</div>
            <div class="timeline-body"><p>@zanieb please take a look at my latest commit: <a href="https://github.com/astral-sh/uv/pull/14014/commits/0023e5de36f0dabbdac96a4086c430331cca9ca9"><code>0023e5d</code> (#14014)</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-07-30 19:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-30 19:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-30 19:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:52:37 UTC
    </footer>
</body>
</html>
