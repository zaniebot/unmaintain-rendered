<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fix(cli): conflict `--locked` with `--upgrade` - astral-sh/uv #10836</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>fix(cli): conflict <code>--locked</code> with <code>--upgrade</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/10836">#10836</a>
        opened by <a href="https://github.com/mkniewallner">@mkniewallner</a>
        on 2025-01-22 01:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/mkniewallner">@mkniewallner</a> on 2025-01-22 01:28</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Relates to #10273.</p>
<p>This doesn't solve what is highlighted in https://github.com/astral-sh/uv/issues/10273#issuecomment-2569515066, but I believe this is still an improvement for users not setting <code>upgrade = true</code> in <code>[tool.uv]</code>.</p>
<h2>Test Plan</h2>
<p>Ran commands locally:</p>
<pre><code class="language-shell">$ cargo run --quiet -- lock --locked --upgrade
error: the argument '--check' cannot be used with '--upgrade'

Usage: uv lock --check

For more information, try '--help'.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2025-01-22 01:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @mkniewallner on 2025-01-22 01:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-01-22 03:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-01-22 03:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2025-01-22 03:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-22 03:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-29 14:22</div>
            <div class="timeline-body"><p>per https://github.com/astral-sh/uv/issues/1419#issuecomment-2621372373 people were using this to check if upgrades were available e.g. <code>uv lock --check --upgrade</code> — I think this is pretty reasonable. Should we revert?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-29 14:23</div>
            <div class="timeline-body"><p>Perhaps we need to do a better error message at the same time?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sayandipdutta">@sayandipdutta</a> on 2025-02-07 17:51</div>
            <div class="timeline-body"><blockquote>
<p>per <a href="https://github.com/astral-sh/uv/issues/1419#issuecomment-2621372373">#1419 (comment)</a> people were using this to check if upgrades were available e.g. <code>uv lock --check --upgrade</code> — I think this is pretty reasonable. Should we revert?</p>
</blockquote>
<p>Maybe I am misunderstanding here, but was that actually possible with this command? <code>uv lock --upgrade</code> seems to update the lockfile regardless whether any upgrades were available. I support the use case, in fact, I had the same use case and that is how I discovered this <a href="https://github.com/astral-sh/uv/issues/10273">issue</a>, but I don't think it ever worked that way?</p>
<p><img src="https://github.com/user-attachments/assets/3f7efce9-f822-450e-b0ca-4ec71a598762" alt="image" /></p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:18 UTC
    </footer>
</body>
</html>
