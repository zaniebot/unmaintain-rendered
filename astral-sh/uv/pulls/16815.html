<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clarify 'uv python upgrade' message when no versions exist - astral-sh/uv #16815</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Clarify 'uv python upgrade' message when no versions exist</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/pull/16815">#16815</a>
        opened by <a href="https://github.com/sinsniwal">@sinsniwal</a>
        on 2025-11-21 22:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/sinsniwal">@sinsniwal</a> on 2025-11-21 22:25</div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>Resolves : #16783</p>
<p>That message is only visible if uv found no managed Python installations. If you had Python installed (even if it was fully up-to-date), requests would not be empty, and the code would skip this block and move on to the resolution phase.</p>
<p>The output message &quot;There are no installed versions to upgrade&quot; was ambiguous. It was unclear whether <code>uv</code> could not find any installed versions or if the existing versions were simply already up-to-date as mentioned in issue.</p>
<p>So updated the message to
<code>&quot;No Python installations found; run `uv python install` to install a Python version.</code>
to explicitly indicate when no <code>uv</code>-managed Python installations exist.</p>
<h2>Test Plan</h2>
<p>Updated the existing test snapshot in <code>python_upgrade_without_version</code> to match the new output string. Verified that tests pass locally with <code>cargo test</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-21 22:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/python/install.rs</code>:625 on 2025-11-21 22:28</div>
            <div class="timeline-body"><p>Is this case entirely redundant with the one above?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-21 22:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/python/install.rs</code>:314 on 2025-11-21 22:30</div>
            <div class="timeline-body"><p>I wonder if we should use our <code>hint: ...</code> styling for the second part of the message?</p>
<p>We should style the command with color like we do for other commands in output.</p>
<p>nit: I'd probably say &quot;use&quot; instead of &quot;run&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sinsniwal">@sinsniwal</a> reviewed on 2025-11-21 22:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sinsniwal">@sinsniwal</a> on <code>crates/uv/src/commands/python/install.rs</code>:625 on 2025-11-21 22:51</div>
            <div class="timeline-body"><p>Yes, makes sense. I've applied those changes in the new commit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sinsniwal">@sinsniwal</a> on <code>crates/uv/src/commands/python/install.rs</code>:314 on 2025-11-21 22:52</div>
            <div class="timeline-body"><p>sure , i have added those changes in the new commit, thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sinsniwal">@sinsniwal</a> reviewed on 2025-11-21 22:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-11-21 23:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/python/install.rs</code>:314 on 2025-11-21 23:06</div>
            <div class="timeline-body"><p>The hint formatting I was referring to is like https://github.com/astral-sh/uv/blob/60a811e715d1d1919afd73b0e4dec4c4be8aa3f9/crates/uv-python/src/interpreter.rs#L863-L869</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @zanieb on 2025-11-21 23:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sinsniwal">@sinsniwal</a> reviewed on 2025-11-22 00:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sinsniwal">@sinsniwal</a> on <code>crates/uv/src/commands/python/install.rs</code>:314 on 2025-11-22 00:02</div>
            <div class="timeline-body"><p>Made the changes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sinsniwal">@sinsniwal</a> on 2025-11-24 15:47</div>
            <div class="timeline-body"><p>Hi @zanieb , just following up, have applied the suggestions from the last review.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-24 22:14</div>
            <div class="timeline-body"><p>I can't seem to push to your branch, here are the edits I'd suggest:</p>
<pre><code class="language-diff">commit 72ed47cd2c4f2718628d2102521eda7805a6a534 (HEAD -&gt; sinsniwal/main)
Author: Zanie Blue &lt;contact@zanie.dev&gt;
Date:   Mon Nov 24 16:13:28 2025 -0600

    Review

diff --git a/crates/uv/src/commands/python/install.rs b/crates/uv/src/commands/python/install.rs
index 2b1ee3066..db52b90f4 100644
--- a/crates/uv/src/commands/python/install.rs
+++ b/crates/uv/src/commands/python/install.rs
@@ -249,17 +249,6 @@ pub(crate) async fn install(
         ) {
             is_unspecified_upgrade = true;
 
-            if existing_installations.is_empty() {
-                writeln!(
-                    printer.stderr(),
-                    &quot;No Python installations found.\n{}{} Use `{}` to install a Python version.&quot;,
-                    &quot;hint&quot;.bold().cyan(),
-                    &quot;:&quot;.bold(),
-                    &quot;uv python install&quot;.green()
-                )?;
-                return Ok(ExitStatus::Success);
-            }
-
             // On upgrade, derive requests for all of the existing installations
             let mut minor_version_requests = IndexSet::&lt;InstallRequest&gt;::default();
             for installation in &amp;existing_installations {
@@ -315,13 +304,22 @@ pub(crate) async fn install(
 
     if requests.is_empty() {
         match upgrade {
+            PythonUpgrade::Enabled(PythonUpgradeSource::Upgrade) =&gt; {
+                writeln!(
+                    printer.stderr(),
+                    &quot;No managed Python installations found\n\n{}{} Use `{}` to install a new Python version&quot;,
+                    &quot;hint&quot;.bold().cyan(),
+                    &quot;:&quot;.bold(),
+                    &quot;uv python install&quot;.green()
+                )?;
+            }
             PythonUpgrade::Enabled(PythonUpgradeSource::Install) =&gt; {
                 writeln!(
                     printer.stderr(),
                     &quot;No Python versions specified for upgrade; did you mean `uv python upgrade`?&quot;
                 )?;
             }
-            PythonUpgrade::Disabled | PythonUpgrade::Enabled(PythonUpgradeSource::Upgrade) =&gt; {}
+            PythonUpgrade::Disabled =&gt; {}
         }
         return Ok(ExitStatus::Success);
     }
diff --git a/crates/uv/tests/it/python_upgrade.rs b/crates/uv/tests/it/python_upgrade.rs
index ac0461125..27ea140d4 100644
--- a/crates/uv/tests/it/python_upgrade.rs
+++ b/crates/uv/tests/it/python_upgrade.rs
@@ -106,8 +106,9 @@ fn python_upgrade_without_version() {
     ----- stdout -----
 
     ----- stderr -----
-    No Python installations found.
-    hint: Use `uv python install` to install a Python version.
+    No managed Python installations found
+
+    hint: Use `uv python install` to install a new Python version
     &quot;);
 
     // Install earlier patch versions for different minor versions
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sinsniwal">@sinsniwal</a> on 2025-11-24 23:33</div>
            <div class="timeline-body"><p>I have made the changes. Thank you for the help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sinsniwal">@sinsniwal</a> on 2025-11-28 02:26</div>
            <div class="timeline-body"><p>@zanieb lgtm, can you please review</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:52:33 UTC
    </footer>
</body>
</html>
