<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix nightly cfg checker warnings - astral-sh/uv #3932</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fix nightly cfg checker warnings</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/3932">#3932</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-05-31 09:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>Fixes these two warnings on nightly:</p>
<pre><code>warning: unexpected `cfg` condition name: `codspeed`
 --&gt; crates/bench/src/lib.rs:5:15
  |
5 |     #[cfg(not(codspeed))]
  |               ^^^^^^^^ help: found config with similar value: `feature = &quot;codspeed&quot;`
  |
  = help: expected names are: `clippy`, `debug_assertions`, `doc`, `docsrs`, `doctest`, `feature`, `miri`, `overflow_checks`, `panic`, `proc_macro`, `relocation_model`, `rustfmt`, `sanitize`, `sanitizer_cfi_generalize_pointers`, `sanitizer_cfi_normalize_integers`, `target_abi`, `target_arch`, `target_endian`, `target_env`, `target_family`, `target_feature`, `target_has_atomic`, `target_has_atomic_equal_alignment`, `target_has_atomic_load_store`, `target_os`, `target_pointer_width`, `target_thread_local`, `target_vendor`, `test`, `ub_checks`, `unix`, and `windows`
  = help: consider using a Cargo feature instead
  = help: or consider adding in `Cargo.toml` the `check-cfg` lint config for the lint:
           [lints.rust]
           unexpected_cfgs = { level = &quot;warn&quot;, check-cfg = [&#x27;cfg(codspeed)&#x27;] }
  = help: or consider adding `println!(&quot;cargo::rustc-check-cfg=cfg(codspeed)&quot;);` to the top of the `build.rs`
  = note: see &lt;https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html&gt; for more information about checking conditional configuration
  = note: `#[warn(unexpected_cfgs)]` on by default

warning: unexpected `cfg` condition name: `codspeed`
 --&gt; crates/bench/src/lib.rs:8:11
  |
8 |     #[cfg(codspeed)]
  |           ^^^^^^^^ help: found config with similar value: `feature = &quot;codspeed&quot;`
  |
  = help: consider using a Cargo feature instead
  = help: or consider adding in `Cargo.toml` the `check-cfg` lint config for the lint:
           [lints.rust]
           unexpected_cfgs = { level = &quot;warn&quot;, check-cfg = [&#x27;cfg(codspeed)&#x27;] }
  = help: or consider adding `println!(&quot;cargo::rustc-check-cfg=cfg(codspeed)&quot;);` to the top of the `build.rs`
  = note: see &lt;https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html&gt; for more information about checking conditional configuration
</code></pre>
<pre><code>warning: unexpected `cfg` condition value: `unix`
 --&gt; crates/uv-extract/src/tar.rs:6:16
  |
6 | #[cfg_attr(not(target_os = &quot;unix&quot;), allow(dead_code))]
  |                ^^^^^^^^^^^^^^^^^^
  |
  = note: expected values for `target_os` are: `aix`, `android`, `cuda`, `dragonfly`, `emscripten`, `espidf`, `freebsd`, `fuchsia`, `haiku`, `hermit`, `horizon`, `hurd`, `illumos`, `ios`, `l4re`, `linux`, `macos`, `netbsd`, `none`, `nto`, `openbsd`, `psp`, `redox`, `solaris`, `solid_asp3`, `teeos`, `tvos`, `uefi`, `unknown`, `visionos`, `vita`, `vxworks`, `wasi`, `watchos`, and `windows` and 2 more
  = note: see &lt;https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html&gt; for more information about checking conditional configuration
  = note: requested on the command line with `-W unexpected-cfgs`
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/konstin">@konstin</a> on 2024-05-31 09:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-05-31 09:32</div>
            <div class="timeline-body"><a href="https://codspeed.io/astral-sh/uv/branches/konsti/fix-nightly-lints">CodSpeed Performance Report</a>
Merging #3932 will <strong>improve performances by 6.87%</strong>
<p>Comparing <code>konsti/fix-nightly-lints</code> (9c6364a) with <code>main</code> (081f20c)</p>
Summary
<p><code>⚡ 1</code> improvements
<code>✅ 12</code> untouched benchmarks</p>
Benchmarks breakdown
<p>|     | Benchmark | <code>main</code> | <code>konsti/fix-nightly-lints</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ⚡ | <code>resolve_warm_jupyter</code> | 92.6 ms | 86.6 ms | +6.87% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/konstin">@konstin</a> on 2024-05-31 09:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2024-05-31 09:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-05-31 09:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:45:37 UTC
    </footer>
</body>
</html>
