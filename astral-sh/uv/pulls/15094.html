<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code style improvements - astral-sh/uv #15094</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Code style improvements</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/pull/15094">#15094</a>
        opened by <a href="https://github.com/adamnemecek">@adamnemecek</a>
        on 2025-08-05 21:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/adamnemecek">@adamnemecek</a></div>
            <div class="timeline-body"><p>Continuation of #15074.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-05 21:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-dev/src/generate_cli_reference.rs</code>:135 on 2025-08-05 21:34</div>
            <div class="timeline-body"><p>I actually don&#x27;t think this reads clearer?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-05 21:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-distribution-types/src/index_url.rs</code>:85 on 2025-08-05 21:36</div>
            <div class="timeline-body"><p>I think just <code>inner</code> would be fine here too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/adamnemecek">@adamnemecek</a> reviewed on 2025-08-05 21:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on <code>crates/uv-distribution-types/src/index_url.rs</code>:85 on 2025-08-05 21:39</div>
            <div class="timeline-body"><p>Fixed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/adamnemecek">@adamnemecek</a> reviewed on 2025-08-05 21:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on <code>crates/uv-dev/src/generate_cli_reference.rs</code>:135 on 2025-08-05 21:39</div>
            <div class="timeline-body"><p>Fixed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;additional refactoring&quot; to &quot;Code style improvements&quot; by <a href="https://github.com/konstin">@konstin</a> on 2025-08-06 11:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/konstin">@konstin</a> on 2025-08-06 11:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on 2025-08-12 16:37</div>
            <div class="timeline-body"><p>@charliermarsh @zanieb
Can you please merge this before it gets stale?</p>
<p>Thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-12 17:19</div>
            <div class="timeline-body"><p>I&#x27;m more on the fence about these changes than the other ones you put up. Like, I feel like the changes to <code>crates/uv-resolver/src/lock/mod.rs</code> and <code>crates/uv-distribution-types/src/index_url.rs</code> make a lot of sense but I&#x27;m less sure about all the <code>max</code> changes and <code>vec![]</code> over <code>Vec::default</code> etc. Bundling all these changes together makes it harder to discuss, and the lack of any commentary about the motivation for the changes isn&#x27;t helping. I think if you want to make a stylistic change, e.g., <code>vec![]</code> vs <code>Vec::default</code>, each style difference should be a single pull request so we can discuss whether we want to make that change.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adamnemecek">@adamnemecek</a> on 2025-08-12 17:22</div>
            <div class="timeline-body"><p>I can never the vec stuff. I just have not seen it much,  <code>Vec::new()</code> and <code>vec![]</code> seem to be the norm. Also <code>vec![]</code> is already used all over the place.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-12 17:29</div>
            <div class="timeline-body"><p>The vec stuff is just an example. There are like 4+ categories of stylistic changes here. If we&#x27;re mixing multiple styles and want to consolidate to one, we should have a way to enforce the style.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:53:28 UTC
    </footer>
</body>
</html>
