<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reduce the number of CI checks run on pull requests - astral-sh/uv #17471</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Reduce the number of CI checks run on pull requests</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/17471">#17471</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2026-01-14 17:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>We're hitting GitHub concurrency limits (organization wide limit of 60 jobs), and while we could move to paid runners with high concurrency limits, I'd prefer to stay on the free runners and some of these jobs, e.g., <code>test-system</code>, require GitHub runners.</p>
<p>This moves a bunch of our extended testing behind a label, e.g., <code>test:extended</code> or <code>test:system</code>, and only runs them on <code>main</code> by default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "zb/investigate ci" to "Reduce the number of CI checks run on pull requests" by @zanieb on 2026-01-14 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2026-01-14 17:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>.github/workflows/ci.yml</code>:20 on 2026-01-14 17:27</div>
            <div class="timeline-body"><p>I'm going to refactor all these checks in a follow-up</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2026-01-14 17:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @zanieb on 2026-01-14 17:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zsol">@zsol</a> approved on 2026-01-14 18:15</div>
            <div class="timeline-body"><p>I think we should run the smoke tests on all changes. They seem to be quick enough by reading them (I can't find any historical data for them easily)</p>
<p>Otherwise LGTM</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2026-01-14 18:33</div>
            <div class="timeline-body"><p>Here's a nice Claude summary</p>
<pre><code>
  Job Runtimes by Workflow (from recent main branch run)
  ┌──────────────────┬──────┬────────────┬─────────┐
  │     Workflow     │ Jobs │ Total Time │ Avg/Job │
  ├──────────────────┼──────┼────────────┼─────────┤
  │ test-system      │ 30   │ 32m 58s    │ 1m 05s  │
  ├──────────────────┼──────┼────────────┼─────────┤
  │ test-integration │ 20   │ 15m 33s    │ 0m 46s  │
  ├──────────────────┼──────┼────────────┼─────────┤
  │ test-smoke       │ 6    │ 4m 18s     │ 0m 43s  │
  ├──────────────────┼──────┼────────────┼─────────┤
  │ test-ecosystem   │ 3    │ 1m 10s     │ 0m 23s  │
  └──────────────────┴──────┴────────────┴─────────┘
  Breakdown by Runner Type
  ┌──────────────────┬─────────┬──────┬────────────┐
  │     Workflow     │ Runner  │ Jobs │ Total Time │
  ├──────────────────┼─────────┼──────┼────────────┤
  │ test-system      │ linux   │ 16   │ 16m 16s    │
  ├──────────────────┼─────────┼──────┼────────────┤
  │ test-system      │ windows │ 8    │ 12m 07s    │
  ├──────────────────┼─────────┼──────┼────────────┤
  │ test-system      │ macos   │ 6    │ 4m 35s     │
  ├──────────────────┼─────────┼──────┼────────────┤
  │ test-integration │ linux   │ 12   │ 10m 33s    │
  ├──────────────────┼─────────┼──────┼────────────┤
  │ test-integration │ windows │ 7    │ 4m 47s     │
  ├──────────────────┼─────────┼──────┼────────────┤
  │ test-integration │ macos   │ 1    │ 0m 13s     │
  ├──────────────────┼─────────┼──────┼────────────┤
  │ test-smoke       │ windows │ 2    │ 1m 40s     │
  ├──────────────────┼─────────┼──────┼────────────┤
  │ test-smoke       │ macos   │ 1    │ 1m 28s     │
  ├──────────────────┼─────────┼──────┼────────────┤
  │ test-smoke       │ linux   │ 3    │ 1m 10s     │
  ├──────────────────┼─────────┼──────┼────────────┤
  │ test-ecosystem   │ linux   │ 3    │ 1m 10s     │
  └──────────────────┴─────────┴──────┴────────────┘
  Longest Running Jobs
  ┌───────────────────────────────────────────┬──────────┐
  │                    Job                    │ Duration │
  ├───────────────────────────────────────────┼──────────┤
  │ test-system / pyston on linux             │ 3m 54s   │
  ├───────────────────────────────────────────┼──────────┤
  │ test-system / conda3.11 on windows x86-64 │ 3m 12s   │
  ├───────────────────────────────────────────┼──────────┤
  │ test-system / conda3.8 on windows x86-64  │ 2m 46s   │
  ├───────────────────────────────────────────┼──────────┤
  │ test-system / python3.10 on windows x86   │ 2m 25s   │
  ├───────────────────────────────────────────┼──────────┤
  │ test-integration / uv_build               │ 2m 17s   │
  ├───────────────────────────────────────────┼──────────┤
  │ test-integration / pyenv on wsl           │ 2m 07s   │
  └───────────────────────────────────────────┴──────────┘
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2026-01-14 19:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2026-01-14 19:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2026-01-14 19:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-14 19:57:12 UTC
    </footer>
</body>
</html>
