<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for installing versioned Python executables on Windows - astral-sh/uv #8663</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for installing versioned Python executables on Windows</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/8663">#8663</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-10-29 15:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-29 15:35</div>
            <div class="timeline-body"><p>Incorporating #8637 into #8458</p>
<ul>
<li>Adds <code>python-managed</code> feature selection to Windows CI for <code>python install</code> tests</li>
<li>Adds trampoline sniffing utilities to <code>uv-trampoline-builder</code></li>
<li>Uses a trampoline to install Python executables into the <code>PATH</code> on Windows</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @zanieb on 2024-10-29 15:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @zanieb on 2024-10-31 01:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-31 03:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/common/mod.rs</code>:671 on 2024-10-31 03:37</div>
            <div class="timeline-body"><p>The warning is platform-dependent so let's just put this on the <code>PATH</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2024-10-31 04:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @zanieb on 2024-10-31 04:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-python/src/managed.rs</code>:493 on 2024-10-31 09:39</div>
            <div class="timeline-body"><p>Does this still work when we copy, wouldn't the python interpreter be unable to find its home, esp with pbs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-python/src/managed.rs</code>:508 on 2024-10-31 09:42</div>
            <div class="timeline-body"><p>With the try operator (<code>?</code>), we shouldn't ever take the <code>err.kind() == io::ErrorKind::NotFound</code> result matching branch</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-trampoline-builder/src/lib.rs</code>:92 on 2024-10-31 09:44</div>
            <div class="timeline-body"><p>nit: move the description into the <code>thiserror</code> <code>error</code> attribute</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2024-10-31 09:54</div>
            <div class="timeline-body"><p>The <code>python3.13.exe</code> in PATH works, but IDEs such as pycharm or vs code don't detect it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-31 13:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-python/src/managed.rs</code>:493 on 2024-10-31 13:18</div>
            <div class="timeline-body"><p>This actually will only copy on Windows, I think. I'll update the utility accordingly or not use it here for clarity.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-python/src/managed.rs</code>:508 on 2024-10-31 13:18</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-31 13:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-31 13:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-trampoline-builder/src/lib.rs</code>:92 on 2024-10-31 13:19</div>
            <div class="timeline-body"><p>There are a bunch of these and I wasn't sure it was worth the effort of extra <code>thiserror</code> variants. Wdyt?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-10-31 13:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-trampoline-builder/src/lib.rs</code>:92 on 2024-10-31 13:35</div>
            <div class="timeline-body"><p>I'm always using thiserror: The biggest benefit for me is that moves the error message strings out of the main logic and allows reusing the error in another place.</p>
<p>If needed, it also allows matching on the error type in upstream. I tend to see the error enum variants as almost free of cost. It's less pronounced here since we're already using an error enum (and obviously it makes sense to often pass string snippets into error variants as we do a lot), this is mostly out of experience in maturin where it's all anyhow and <code>.context()</code> and i wished i had used thiserror consistently.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-31 13:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-trampoline-builder/src/lib.rs</code>:92 on 2024-10-31 13:43</div>
            <div class="timeline-body"><p>Yeah the nuanced part here is that I don't think you'd ever want to match on different error cases here, i.e., it's more work for a consumer to match on the errors and they'll have to learn that they need to combine a bunch of these cases when they're semantically equivalent to a caller, but I'll try to move some more into the error variant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-10-31 13:55</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-trampoline-builder/src/lib.rs</code>:92 on 2024-10-31 13:55</div>
            <div class="timeline-body"><p>Actually really satisfying to rewrite these.. lol</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Use trampolines for Python executables on Windows" to "Add support for installing versioned Python executables on Windows" by @zanieb on 2024-10-31 14:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2024-10-31 15:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-31 15:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-10-31 15:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:13 UTC
    </footer>
</body>
</html>
