<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use lockfile versions as resolution preferences - astral-sh/uv #3921</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use lockfile versions as resolution preferences</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/3921">#3921</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-05-30 01:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-30 01:46</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Ensures that we avoid upgrading packages unless <code>--upgrade</code> or similar is passed.</p>
<p>For now, the resolver only respects these for registry distributions.</p>
<p>Closes https://github.com/astral-sh/uv/issues/3918.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @charliermarsh on 2024-05-30 01:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @charliermarsh on 2024-05-30 01:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @charliermarsh on 2024-05-30 01:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-05-30 01:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/lock.rs</code>:56 on 2024-05-30 01:47</div>
            <div class="timeline-body"><p>@BurntSushi - Let me know if you have a preferred way to do this (other than what's here). I expose <code>Distribution</code>, but none of the fields or methods are <code>pub</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-resolver/src/lock.rs</code>:56 on 2024-05-30 13:49</div>
            <div class="timeline-body"><p>I think this looks fine.</p>
<p>The thing I care about <em>most</em> is not exposing representation. I don't mean to say we shouldn't do it, but that's where the biggest benefit is. If we don't expose representation, then it makes it much easier to change that representation in the future. (It's all a trade off.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2024-05-30 14:39</div>
            <div class="timeline-body"><p>This is awesome!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-05-30 17:56</div>
            <div class="timeline-body"><h2><a href="https://codspeed.io/astral-sh/uv/branches/charlie/preferences">CodSpeed Performance Report</a></h2>
<h3>Merging #3921 will <strong>degrade performances by 6.17%</strong></h3>
<p><sub>Comparing <code>charlie/preferences</code> (d7f803b) with <code>main</code> (502e042)</sub></p>
<h3>Summary</h3>
<p><code>⚡ 1</code> improvements
<code>❌ 1</code> regressions
<code>✅ 11</code> untouched benchmarks</p>
<blockquote>
<p>:warning: <em>Please fix the performance issues or <a href="https://codspeed.io/astral-sh/uv/branches/charlie/preferences">acknowledge them on CodSpeed</a>.</em></p>
</blockquote>
<h3>Benchmarks breakdown</h3>
<p>|     | Benchmark | <code>main</code> | <code>charlie/preferences</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ⚡ | <code>resolve_warm_airflow</code> | 1.5 s | 1.4 s | +7.48% |
| ❌ | <code>resolve_warm_jupyter</code> | 80.2 ms | 85.5 ms | -6.17% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-05-30 17:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-30 17:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-05-30 17:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:59:50 UTC
    </footer>
</body>
</html>
