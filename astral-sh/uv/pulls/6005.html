<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support `uv add -r requirements.txt` - astral-sh/uv #6005</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support <code>uv add -r requirements.txt</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/6005">#6005</a>
        opened by <a href="https://github.com/blueraft">@blueraft</a>
        on 2024-08-11 13:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/blueraft">@blueraft</a></div>
            <div class="timeline-body">Summary
<p>Resolves <a href="https://github.com/astral-sh/uv/issues/4537">astral-sh/uv#4537</a></p>
<ul>
<li>First commit avoids overwriting dependencies with different markers.</li>
<li>Second commit supports adding from requirements files.</li>
</ul>
Test Plan
<p><code>cargo test</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/project/remove.rs</code>:98 on 2024-08-11 14:58</div>
            <div class="timeline-body"><p>I don&#x27;t think we should do this cast / change the removal APIs, why was this needed? Removal operates on package names, not full requirements.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-08-11 14:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-08-11 14:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:2363 on 2024-08-11 14:59</div>
            <div class="timeline-body"><p>Not quite &quot;Install&quot; here, can we retain the previous description? It&#x27;d be good to move the &quot;as PEP 508&quot; part to a second line though so it&#x27;s only present in the long help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-08-11 15:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:2372 on 2024-08-11 15:00</div>
            <div class="timeline-body"><p>Should we allow these files? These seem like a bit of a misuse. We don&#x27;t allow them in <code>uv run</code> https://github.com/astral-sh/uv/blob/2822dde8cb24f1486cef59228c723da931690c30/crates/uv/src/commands/project/run.rs#L74-L92</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-08-11 15:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-cli/src/lib.rs</code>:2367 on 2024-08-11 15:01</div>
            <div class="timeline-body"><p>Same as above, not &quot;install&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-11 15:03</div>
            <div class="timeline-body"><p>Could you separate the change to avoid marker collisions from the <code>requirements.txt</code> support? I think they&#x27;ll make more sense to discuss in two pull requests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-11 15:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-11 15:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-08-11 15:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/project/remove.rs</code>:98 on 2024-08-11 15:15</div>
            <div class="timeline-body"><p>I see this probably is related to <a href="https://github.com/astral-sh/uv/pull/6005">astral-sh/uv#6005</a>/commits/0fbde82c7dbe1ac9fd40919d642f5976d2b79d08 now, perhaps we can cast to a <code>Requirement</code> later instead if needed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/blueraft">@blueraft</a> reviewed on 2024-08-11 17:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/blueraft">@blueraft</a> on <code>crates/uv-cli/src/lib.rs</code>:2372 on 2024-08-11 17:36</div>
            <div class="timeline-body"><p>Supporting <code>setup.py</code> and <code>setup.cfg</code> files could be a helpful feature, making it easier for users to transition to the pyproject.toml standard.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-16 17:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-16 17:27</div>
            <div class="timeline-body"><p>Assigning myself.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-cli/src/lib.rs</code>:2372 on 2024-08-16 21:29</div>
            <div class="timeline-body"><p>It&#x27;s possible that this could be a killer feature because you could import Poetry projects this way... But it doesn&#x27;t actually work as-is. I&#x27;m gonna remove it and look at it in a separate PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-08-16 21:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-08-16 21:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-16 21:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-16 21:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:47:19 UTC
    </footer>
</body>
</html>
