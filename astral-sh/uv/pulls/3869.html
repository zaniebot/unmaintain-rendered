<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove special-casing for editable requirements - astral-sh/uv #3869</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Remove special-casing for editable requirements</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/3869">#3869</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-05-27 21:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>There are a few behavior changes in here:</p>
<ul>
<li>We now enforce <code>--require-hashes</code> for editables, like pip. So if you use <code>--require-hashes</code> with an editable requirement, we'll reject it. I could change this if it seems off.</li>
<li>We now treat source tree requirements, editable or not (e.g., both <code>-e ./black</code> and <code>./black</code>) as if <code>--refresh</code> is always enabled. This doesn't mean that we <em>always</em> rebuild them; but if you pass <code>--reinstall</code>, then yes, we always rebuild them. I think this is an improvement and is close to how editables work today.</li>
</ul>
<p>Closes #3844.</p>
<p>Closes #2695.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @charliermarsh on 2024-05-27 21:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @charliermarsh on 2024-05-27 21:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @charliermarsh on 2024-05-27 21:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-cache/src/lib.rs</code>:929 on 2024-05-28 11:36</div>
            <div class="timeline-body"><p>The comment needs updating</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-cache/src/lib.rs</code>:230 on 2024-05-28 11:39</div>
            <div class="timeline-body"><p>That's the <code>Cache</code> instance and not the cache on disk, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-installer/src/satisfies.rs</code>:229 on 2024-05-28 11:42</div>
            <div class="timeline-body"><p>Can we reuse one of the other <code>pyproject.toml</code> types for this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv/tests/pip_sync.rs</code>:4212 on 2024-05-28 11:49</div>
            <div class="timeline-body"><p>Let's say i have some local packages i want to install as editables, and pypi deps i want to install with <code>--require-hashes</code>, does this mean i can't do this anymore?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2024-05-28 11:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-05-28 13:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/pip_sync.rs</code>:4212 on 2024-05-28 13:04</div>
            <div class="timeline-body"><p>Yeah, can’t do this anymore. I can special-case it if we want? It’s consistent with pip so I wasn’t sure.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-05-28 13:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-cache/src/lib.rs</code>:230 on 2024-05-28 13:05</div>
            <div class="timeline-body"><p>Yeah</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-05-28 15:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-installer/src/satisfies.rs</code>:229 on 2024-05-28 15:46</div>
            <div class="timeline-body"><p>I actually <em>like</em> having granular structs for these... It ensures that we don't error when there are errors in irrelevant fields, it makes it clear which fields we depend on for the check, etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-05-28 15:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-28 15:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-05-28 15:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:37:13 UTC
    </footer>
</body>
</html>
