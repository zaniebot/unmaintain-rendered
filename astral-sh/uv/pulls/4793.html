<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avoid hangs before exiting CLI - astral-sh/uv #4793</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Avoid hangs before exiting CLI</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/4793">#4793</a>
        opened by <a href="https://github.com/ibraheemdev">@ibraheemdev</a>
        on 2024-07-03 23:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a></div>
            <div class="timeline-body">Summary
<p>The resolver sometimes starts HTTP requests that end up not being necessary. When dropping the Tokio runtime before exiting we currently wait for those to complete. This can cause noticeable hangs in the CLI, particularly when the runtime is blocked on slow DNS resolution.</p>
<p>Resolves <a href="https://github.com/astral-sh/uv/issues/4599">astral-sh/uv#4599</a>.</p>
Test Plan
<p>This change resolves any reproducible hangs for me locally.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-07-03 23:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/BurntSushi">@BurntSushi</a> by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-07-03 23:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-07-03 23:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-07-03 23:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-03 23:51</div>
            <div class="timeline-body"><p>Nice.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-07-04 00:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2024-07-04 00:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-07-04 00:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:46:21 UTC
    </footer>
</body>
</html>
