<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a universal resolution mode to `pip compile` - astral-sh/uv #4505</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a universal resolution mode to <code>pip compile</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/4505">#4505</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-06-25 01:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This needs more tests and a few more changes, but checkpointing it for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add a universal resolution mode to pip compile" to "Add a universal resolution mode to `pip compile`" by @charliermarsh on 2024-06-25 01:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-06-25 01:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-25 01:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/pip_compile.rs</code>:6350 on 2024-06-25 01:56</div>
            <div class="timeline-body"><p>Need to get the Python version filtering working like we have for <code>uv lock</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @charliermarsh on 2024-06-25 12:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-cli/src/lib.rs</code>:575 on 2024-06-25 12:03</div>
            <div class="timeline-body"><p>:tada:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-cli/src/lib.rs</code>:572 on 2024-06-25 12:04</div>
            <div class="timeline-body"><p>&quot;Python platforms&quot; is likely unclear to the users, we likely need something along the lines of &quot;all operating systems, architectures and supported Python versions, as supported by your dependencies&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2024-06-25 12:06</div>
            <div class="timeline-body"><p>Hyped for supporting this</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-25 12:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/python_requirement.rs</code>:82 on 2024-06-25 12:19</div>
            <div class="timeline-body"><p>I'm a bit unsure of this. It still locks against the target Python version rather than &quot;the target version at minimum.&quot; It's easy to change but not sure what the right semantics are.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @charliermarsh on 2024-06-25 12:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-06-25 12:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-resolver/src/python_requirement.rs</code>:82 on 2024-06-25 12:36</div>
            <div class="timeline-body"><p>My feeling is:</p>
<ul>
<li><code>requires-python</code> if the input is a <code>pyproject.toml</code> (the conjunction of all <code>requires-python</code> values if there are multiple <code>pyproject.toml</code>).</li>
<li>An explicit <code>--requires-python</code> argument.</li>
<li><code>&gt;={{current python}}</code> and inform the user that the should consider passing <code>--requires-python</code> if they want an interpreter independent resolution.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-resolver/src/resolver/mod.rs</code>:200 on 2024-06-25 13:50</div>
            <div class="timeline-body"><p>Nice. You got rid of the <code>MarkerTree::And(vec![])</code>! I think the change is for the better right? My understanding is that now it will always have some non-empty marker expression in universal mode. So that when <code>Requires-Python</code> isn't provided, it will be based on the installed version of Python? Where as previously, there would be no filtering at all.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2024-06-25 13:57</div>
            <div class="timeline-body"><p><img src="https://github.com/astral-sh/uv/assets/456674/f5344c57-c6e8-4b6b-af53-769c69f725b9" alt="that-was-easy-pressing-easy-button-5v06l34nfgfg8q2f" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-06-25 21:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-06-25 21:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-25 21:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:37:42 UTC
    </footer>
</body>
</html>
