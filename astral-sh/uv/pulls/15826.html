<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improve hint for installing meson-python when missing as build backend - astral-sh/uv #15826</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Improve hint for installing meson-python when missing as build backend</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/pull/15826">#15826</a>
        opened by <a href="https://github.com/tobiasdiez">@tobiasdiez</a>
        on 2025-09-14 00:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/tobiasdiez">@tobiasdiez</a> on 2025-09-14 00:56</div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>If a package uses meson-python as backend, it's declared as:</p>
<pre><code>[build-system]
build-backend = 'mesonpy'
requires = ['meson-python']
</code></pre>
<p>Currently, if meson-python is missing, one gets the following hint:</p>
<pre><code>Traceback (most recent call last):
        File &quot;&lt;string&gt;&quot;, line 8, in &lt;module&gt;
          import mesonpy as backend
      ModuleNotFoundError: No module named 'mesonpy'

      hint: This error likely indicates that `sagemath` depends on `mesonpy`, but doesn't declare it as a build
      dependency. If `sagemath` is a first-party package, consider adding `mesonpy` to its `build-system.requires`.
      Otherwise, either add it to your `pyproject.toml` under:

      [tool.uv.extra-build-dependencies]
      sagemath = [&quot;mesonpy&quot;]

      or `uv pip install mesonpy` into the environment and re-run with `--no-build-isolation`.
</code></pre>
<p>which is not quite correct as the build backend/module is called &quot;mesonpy&quot; but the python package one has to install is &quot;meson-python&quot;. This hint is improved in this PR.</p>
<!-- What's the purpose of the change? What does it do, and why? -->

<h2>Test Plan</h2>
<p>I didn't yet had a chance to setup a local dev env for testing this.</p>
<!-- How was it tested? -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-14 04:01</div>
            <div class="timeline-body"><p>We shouldn't hard-code this. The mapping should be performed at https://github.com/astral-sh/uv/blob/35a8dd514ef22d4c71cab430c74af2c1b95fbfe3/crates/uv-build-frontend/src/error.rs#L403-L406</p>
<p>Maybe it's not right in our embedded mapping?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-14 13:00</div>
            <div class="timeline-body"><p>It looks like it's just not present in <code>crates/uv-build-frontend/src/pipreqs/mapping</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-09-23 23:32</div>
            <div class="timeline-body"><blockquote>
<p>It looks like it's just not present in <code>crates/uv-build-frontend/src/pipreqs/mapping</code></p>
</blockquote>
<p>Is it worth adding it to https://github.com/bndr/pipreqs/blob/master/pipreqs/mapping and then syncing/update uv's version?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-24 04:33</div>
            <div class="timeline-body"><p>That seems like the most proper way to do it, yeah.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tobiasdiez">@tobiasdiez</a> on 2025-12-22 12:17</div>
            <div class="timeline-body"><p>I've now created a PR that adds the mapping upstream (https://github.com/bndr/pipreqs/pull/508) and also updated the mapping here in the repo. Is this what you had in mind?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:52:27 UTC
    </footer>
</body>
</html>
