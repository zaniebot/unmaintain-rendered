<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show non-critical Python discovery errors if no other interpreter is found - astral-sh/uv #10716</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Show non-critical Python discovery errors if no other interpreter is found</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/10716">#10716</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-01-17 17:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>Previously, these errors would only be visible in the debug logs as &quot;Skipping bad interpreter ...&quot; which can lead us to making some ridiculous claims like &quot;There is no virtual environment&quot; or &quot;Python is not installed&quot; when really we just failed to query the interpreter for some reason.</p>
<p>We show the first error, sort of arbitrarily — but I think it matches user expectation, i.e., this would be the first Python on your PATH.</p>
<p>Related to #10713</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @zanieb on 2025-01-17 17:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/python_find.rs</code>:32 on 2025-01-17 17:27</div>
            <div class="timeline-body"><p>This looks like a bug in our test context; will address that..</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-17 17:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-17 17:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/python_find.rs</code>:32 on 2025-01-17 17:29</div>
            <div class="timeline-body"><p>https://github.com/astral-sh/uv/pull/10716/commits/677e4730a55b79abf6059f8de647257ece4bedb5</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-17 18:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/pip_sync.rs</code>:66 on 2025-01-17 18:19</div>
            <div class="timeline-body"><p>It's not clear if this is a regression or not — the virtual environment is active but was deleted.</p>
<p>I think we can do better here, but separately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2025-01-17 18:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @zanieb on 2025-01-21 15:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @zanieb on 2025-01-21 15:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-21 18:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-python/src/discovery.rs</code>:728 on 2025-01-21 18:50</div>
            <div class="timeline-body"><p>These messages move to <code>find_python_installation</code> so we can avoid displaying a duplicate &quot;skipping&quot; log if we're going to throw it as an error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-21 18:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-python/src/discovery.rs</code>:998 on 2025-01-21 18:51</div>
            <div class="timeline-body"><p>This is a little annoying... but basically we don't want to show the &quot;skipped&quot; log for the first interpreter if we're going to immediately throw it as an error; but we want to show it in the right position.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-01-21 20:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-python/src/discovery.rs</code>:998 on 2025-01-21 20:58</div>
            <div class="timeline-body"><p>It kind of seems ok to me to log it, then throw it as an error, if it makes the code simpler. I'm having some trouble with it as-is. Like, how does this guard against &quot;first error is non-critical, don't know&quot;, then &quot;second error is non-critical; show first and second&quot;, then we run out of Pythons, exit the loop, and show the first error as an error (again)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-21 21:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-python/src/discovery.rs</code>:998 on 2025-01-21 21:02</div>
            <div class="timeline-body"><p>I'll revert it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2025-01-21 21:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-01-21 21:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-python/src/discovery.rs</code>:998 on 2025-01-21 21:05</div>
            <div class="timeline-body"><p>It's ok if you want to keep it, just feedback as a reader.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-21 21:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-python/src/discovery.rs</code>:998 on 2025-01-21 21:10</div>
            <div class="timeline-body"><p>Naw I was actually confused by the output of <code>grep</code> in the integration test and it's not as bad as I thought.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-21 21:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-python/src/discovery.rs</code>:998 on 2025-01-21 21:10</div>
            <div class="timeline-body"><p>It was hard to write too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-01-21 21:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-01-21 21:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-21 21:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:41:33 UTC
    </footer>
</body>
</html>
