<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Do not suggest --package when --backend is used, but --build-backend - astral-sh/uv #10958</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Do not suggest --package when --backend is used, but --build-backend</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/10958">#10958</a>
        opened by <a href="https://github.com/issokuos">@issokuos</a>
        on 2025-01-25 13:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/issokuos">@issokuos</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Closes #8743</p>
<h2>Test Plan</h2>
<p>Snapshot tests</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @charliermarsh on 2025-01-25 19:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv/tests/it/init.rs</code>:2266 on 2025-01-25 23:29</div>
            <div class="timeline-body"><p>This seems suboptimal. What happens if we make <code>--backend</code> a flag, so it doesn't have a value?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-01-25 23:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/issokuos">@issokuos</a> reviewed on 2025-01-26 00:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/issokuos">@issokuos</a> on <code>crates/uv/tests/it/init.rs</code>:2266 on 2025-01-26 00:00</div>
            <div class="timeline-body"><p>I think that is better. I found this error message annoying  but didn't remember the flag alternative. The other alternative I thought about was making <code>--backend</code> an alias.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Do not suggest --package when --backend is used, but --backend-build" to "Do not suggest --package when --backend is used, but --build-backend" by @issokuos on 2025-01-26 00:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-28 00:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:2266 on 2025-01-28 00:22</div>
            <div class="timeline-body"><p>Yeah I agree this is suboptimal. A flag might make sense but then what happens if you provide a value?</p>
<p>Unfortunately this is sort of the status quo upstream, from what I understood in https://github.com/clap-rs/clap/discussions/5781#discussioncomment-11104839</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-01-28 00:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:2266 on 2025-01-28 00:23</div>
            <div class="timeline-body"><p>I don't really want to make it an alias, it'd be nice to just be able to point people to the canonical name in a way that doesn't cause a bunch of weird behaviors :(</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/issokuos">@issokuos</a> on <code>crates/uv/tests/it/init.rs</code>:2266 on 2025-01-28 10:53</div>
            <div class="timeline-body"><p>Making  this a flag doesn't seem to be an option since it breaks the <code>build-backend</code> option:(</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/issokuos">@issokuos</a> reviewed on 2025-01-28 10:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-29 14:50</div>
            <div class="timeline-body"><p>Perhaps there's an example in Cargo's implementation we could use? Since they make heavy use of this pattern.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/issokuos">@issokuos</a> on 2025-01-29 19:29</div>
            <div class="timeline-body"><blockquote>
<p>Perhaps there's an example in Cargo's implementation we could use? Since they make heavy use of this pattern.</p>
</blockquote>
<p>I used <code>ArgAction</code> like in Cargo to make it work</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-01-29 22:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-29 22:15</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-01-29 22:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-01-29 22:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-30 06:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:41:41 UTC
    </footer>
</body>
</html>
