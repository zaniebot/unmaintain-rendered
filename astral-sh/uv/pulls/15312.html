<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `uv tool list --show-python` to show python version - astral-sh/uv #15312</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>uv tool list --show-python</code> to show python version</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/15312">#15312</a>
        opened by <a href="https://github.com/pythonweb2">@pythonweb2</a>
        on 2025-08-15 15:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/pythonweb2">@pythonweb2</a> on 2025-08-15 15:52</div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>Display information about the python version when using the <code>uv tool list</code> cli command.</p>
<h2>Test Plan</h2>
<p>Added a test that tests the option, and then also a test that tests all of the <code>--show-*</code> options in the command.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pythonweb2">@pythonweb2</a> reviewed on 2025-08-15 15:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/pythonweb2">@pythonweb2</a> on <code>crates/uv-cli/src/lib.rs</code>:4584 on 2025-08-15 15:54</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    /// Whether to display the Python installation used to run each tool.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-15 18:58</div>
            <div class="timeline-body"><p>We'll need a test case in <code>it/tool_list</code> too</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pythonweb2">@pythonweb2</a> on 2025-08-15 21:01</div>
            <div class="timeline-body"><p>I added tests @zanieb and made some changes in where the version gets pulled from. Lmk if it looks OK.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-15 21:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/list.rs</code>:102 on 2025-08-15 21:34</div>
            <div class="timeline-body"><p>Hm. I'm surprised we don't need to read the environment elsewhere here.</p>
<p><code>installed_tools.version(&amp;name, cache)</code> reads the environment. We probably don't want to do that multiple times.
I think might want to get the environment above and re-use it for both of these operations. That'll be more performant and we don't need to handle error cases multiple times.</p>
<p>I'd probably do something like...</p>
<ul>
<li>Add a new <code>ToolEnvironment</code> type that's returned from <code>get_environment</code>. It can just wrap <code>PythonEnvironment</code>. You can implement deref, <code>into_inner</code>, etc. (see other patterns like that) so it's not annoying to work with. There are only a few callsites so this shouldn't be bad.</li>
<li>Move the <code>InstalledTools::version</code> function to <code>ToolEnvironment</code>. There are also only a couple call-sites to update here too.</li>
<li>Now in this function, get the environment once, then derive the tool and interpreter versions from it.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-15 21:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/list.rs</code>:105 on 2025-08-15 21:36</div>
            <div class="timeline-body"><p>I'd just use <code>interpreter.python_full_version()</code>. I think we also probably want to include the implementation name. e.g., <code>CPython 3.13.1</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-15 21:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/list.rs</code>:107 on 2025-08-15 21:36</div>
            <div class="timeline-body"><p>We should skip display of the entire tool if the environment is missing. That should be resolve by the refactor I suggested.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-15 21:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/list.rs</code>:108 on 2025-08-15 21:37</div>
            <div class="timeline-body"><p>We'll want to display this as a warning as done for tool version handling â€” this should also be resolved by the refactor.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-08-15 21:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/tool/list.rs</code>:105 on 2025-08-15 21:37</div>
            <div class="timeline-body"><p>Alternatively we could display <code>[python: &lt;version&gt;]</code>. I don't know if I feel strongly. That'd be consistent with the other displays? but <code>[python: &lt;implementation&gt; &lt;version&gt;]</code> feels too verbose.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/pythonweb2">@pythonweb2</a> on <code>crates/uv/src/commands/tool/list.rs</code>:105 on 2025-08-15 21:46</div>
            <div class="timeline-body"><p>Yeah I thought that <code>[python: ...</code> felt verbose as well. If the implementation is added, is seems like that would be self-explanatory enough.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pythonweb2">@pythonweb2</a> reviewed on 2025-08-15 21:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-10-10 17:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-10-10 17:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:29 UTC
    </footer>
</body>
</html>
