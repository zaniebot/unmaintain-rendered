<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disable line wrapping during scenario tests - astral-sh/uv #784</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Disable line wrapping during scenario tests</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/784">#784</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-01-04 16:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>Adds support for a <code>PUFFIN_NO_WRAP</code> environment variable which disables line wrapping in <code>miette</code> output.</p>
<p>We set this variable in the scenario tests to improve the readability of snapshots.</p>
<p>I contributed the ability to disable line wrapping upstream at https://github.com/zkat/miette/pull/328</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>Cargo.toml</code>:50 on 2024-01-04 17:01</div>
            <div class="timeline-body"><p>See https://github.com/zkat/miette/pull/328</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-04 17:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2024-01-04 17:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-04 18:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/puffin-cli/tests/pip_install_scenarios.rs</code>:98 on 2024-01-04 18:17</div>
            <div class="timeline-body"><p>I know it sounds difficult, but... is there any way we could instead strip the prefix when we generate the error message, so that it's wrapped appropriately to start? Right now, we it feels like we're applying one fixup on top of another rather than solving the problem at the source.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-04 18:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/puffin-cli/tests/pip_install_scenarios.rs</code>:98 on 2024-01-04 18:52</div>
            <div class="timeline-body"><p>I don't think that's worth the complexity. It'd definitely be much more of a hack.</p>
<p>I think disabling the line wrapping during tests is desirable separately from the long package names â€” the line wrapping is generally confusing at 80 characters when reading our error messages in snapshots. Perhaps in the long run, we should focus on improving that formatting such that wrapped messages are easier to read. I think this is the simplest path forward for now and I think I'd want to be able to disable line wrapping in output as a user anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-04 18:54</div>
            <div class="timeline-body"><p>Note the pull request was already accepted / merged upstream.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-01-04 19:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2024-01-04 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-01-04 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-01-04 19:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:35:03 UTC
    </footer>
</body>
</html>
