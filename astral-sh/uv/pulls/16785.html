<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix status messages without TTY - astral-sh/uv #16785</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fix status messages without TTY</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/16785">#16785</a>
        opened by <a href="https://github.com/rzblue">@rzblue</a>
        on 2025-11-20 09:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/rzblue">@rzblue</a> on 2025-11-20 09:54</div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>#12175 changed the behavior of <code>on_request_complete</code> when stderr is not a tty to output <code>Downloading</code>/<code>Uploading</code> (via <code>Direction::as_str</code>). This fixes it to output <code>Downloaded</code>/<code>Uploaded</code> again.</p>
<h2>Test Plan</h2>
<p>Tested locally to verify new output.</p>
<p>Old:</p>
<pre><code>$ uv sync --no-cache 2&gt;&amp;1 | tee /dev/null
Using CPython 3.14.0
Creating virtual environment at: .venv
Resolved 12 packages in 19ms
Downloading numpy (15.8MiB)
Downloading matplotlib (9.4MiB)
Downloading fonttools (4.6MiB)
Downloading pillow (6.7MiB)
Downloading kiwisolver (1.4MiB)
 Downloading kiwisolver
 Downloading fonttools
 Downloading pillow
 Downloading matplotlib
 Downloading numpy
</code></pre>
<p>New:</p>
<pre><code>$ uv sync --no-cache 2&gt;&amp;1 | tee /dev/null
Using CPython 3.14.0
Creating virtual environment at: .venv
Resolved 12 packages in 3ms
Downloading numpy (15.8MiB)
Downloading fonttools (4.6MiB)
Downloading matplotlib (9.4MiB)
Downloading kiwisolver (1.4MiB)
Downloading pillow (6.7MiB)
 Downloaded kiwisolver
 Downloaded pillow
 Downloaded fonttools
 Downloaded matplotlib
 Downloaded numpy
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @konstin on 2025-11-20 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Fix incorrect reporter completion output" to "Fix status messages without TTY" by @konstin on 2025-11-20 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2025-11-20 14:13</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2025-11-20 14:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-11-20 14:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-11-20 14:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:52:32 UTC
    </footer>
</body>
</html>
