<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Read and write `.python-version` in the workspace root - astral-sh/uv #7815</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Read and write <code>.python-version</code> in the workspace root</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/7815">#7815</a>
        opened by <a href="https://github.com/j178">@j178</a>
        on 2024-09-30 16:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/j178">@j178</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR modifies <code>uv init</code> and <code>uv python pin</code> to read and write the Python version file from the discovered workspace root, instead of the current working directory.</p>
<p>It also includes some behavioral changes (noted in the self-review comments). The previous behavior seemed erroneous, but if it wasn't, please instruct me to revert these changes.</p>
<p>Resolves #7806</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/j178">@j178</a> on <code>crates/uv/src/commands/project/init.rs</code>:775 on 2024-09-30 16:48</div>
            <div class="timeline-body"><p>If the version file already exists, but does not contain the requested version, should we update it? (add the version, or replace the existing one)
For now, we keep the existing behavior: if the file exists, we don't update it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/j178">@j178</a> reviewed on 2024-09-30 16:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/j178">@j178</a> on <code>crates/uv/src/commands/python/pin.rs</code>:145 on 2024-09-30 19:06</div>
            <div class="timeline-body"><p>Behavior change: <code>uv python pin</code> now updates the discovered version file, rather than always writing to <code>.python-version</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/j178">@j178</a> on <code>crates/uv/src/commands/python/pin.rs</code>:143 on 2024-09-30 19:09</div>
            <div class="timeline-body"><p>Behavior change: <code>uv python pin</code> now cross-checks the requested version with all versions in the version file, not just the first one. It also avoids updating the version file if the required version already exists. The message updated to &quot;<code>.python-version</code> is already pinned at <code>3.12</code>&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/j178">@j178</a> reviewed on 2024-09-30 19:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @j178 on 2024-09-30 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Don't create .python-version in workspace members" to "Read and write `.python-version` in the workspace root" by @j178 on 2024-09-30 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-09-30 19:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-02 18:14</div>
            <div class="timeline-body"><p>This is going to be a bit complicated as it conflicts with #6370 and #6372</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @j178 on 2024-10-09 09:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @j178 on 2024-11-09 07:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:39:53 UTC
    </footer>
</body>
</html>
