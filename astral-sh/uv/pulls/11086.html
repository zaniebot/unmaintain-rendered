<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use a mirror with upload timestamps for PyTorch - astral-sh/uv #11086</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use a mirror with upload timestamps for PyTorch</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/11086">#11086</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2025-01-30 00:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-30 00:37</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR migrates all of our PyTorch tests to use our own mirror, which includes upload timestamps that we can use to enforce <code>--excludes-newer</code>, making the tests far more stable over time. (Today, if you checkout old versions of <code>uv</code>, many of the PyTorch tests will fail, since the index contents drift over time.)</p>
<p>Some snapshots changed in this PR (see, e.g., <code>universal_nested_overlapping_local_requirement</code>). The underlying reason is that I used the current timestamp when setting upload times in the PyTorch mirror, but those tests read from both the PyTorch <code>--find-links</code> index <em>and</em> PyPI. I guess we don't omit <code>--find-links</code> entries based on <code>--excludes-newer</code>? That might be a bug. But I had to <em>increase</em> the <code>--excludes-newer</code> to include the PyTorch mirror's <code>--find-links</code>, which meant pulling in some newer packages from PyPI too. This is fine: it's a one-time churn, and they'll be stable going forward.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @charliermarsh on 2025-01-30 00:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @charliermarsh on 2025-01-30 00:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @charliermarsh on 2025-01-30 00:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by @charliermarsh on 2025-01-30 00:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-01-30 01:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2025-01-30 01:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-01-30 01:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-30 01:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2025-01-30 10:49</div>
            <div class="timeline-body"><p>:100:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2025-01-30 13:40</div>
            <div class="timeline-body"><p>w00t!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:19 UTC
    </footer>
</body>
</html>
