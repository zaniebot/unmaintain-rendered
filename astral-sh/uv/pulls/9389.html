<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>feat: export --prune - astral-sh/uv #9389</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>feat: export --prune</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/9389">#9389</a>
        opened by <a href="https://github.com/dead10ck">@dead10ck</a>
        on 2024-11-23 21:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/dead10ck">@dead10ck</a> on 2024-11-23 21:49</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This adds a <code>--prune</code> flag to the <code>export</code> command to correspond with the <code>--prune</code> flag of the <code>tree</code> command.</p>
<p>The purpose is for generating a <code>requirements.txt</code> that omits a package and all of that package's unique dependencies. This is useful for cases where the project has a dependency on a common core package, but where that package does not need to be installed in the target environment.</p>
<p>For example, a pyspark job needs spark for development, but when installing into a cluster that already has pyspark installed, it is desirable to omit pyspark's whole dependency tree so that only the unique dependencies that your job needs get installed, and do not risk breaking the pyspark dependencies with something incompatible.</p>
<p>Dev groups cannot always cover this case because there are other projects where this common dependency occurs as a transitive. One example is Airflow providers, which include Airflow itself as a dependency, but it is unnecessary and undesirable to include Airflow's dependency tree in the <code>requirements.txt</code> for your DAGs.</p>
<p>Partly related to #7214, though I'm not sure it covers the ask in that one of having this functionality extend to the project's actual published metadata.</p>
<h2>Test Plan</h2>
<p>An integration test was added, and some manual testing. Let me know if more would be better.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-11-24 01:55</div>
            <div class="timeline-body"><p>This makes sense to me, thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-11-24 01:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-11-24 01:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-11-24 02:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-24 02:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-24 02:15</div>
            <div class="timeline-body"><p>Great PR!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:15 UTC
    </footer>
</body>
</html>
