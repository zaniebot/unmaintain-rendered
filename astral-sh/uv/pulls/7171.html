<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support man pages for `uv tool` - astral-sh/uv #7171</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support man pages for <code>uv tool</code></h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/pull/7171">#7171</a>
        opened by <a href="https://github.com/eth3lbert">@eth3lbert</a>
        on 2024-09-07 17:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR adds support for man pages for <code>uv tool</code> by treating <code>entrypoints</code> and <code>manpages</code> as tool <code>resources</code> and changing a series of related functions. The receipt is also modified to conditionally write <code>manpages</code> tables when <code>manpages</code> exist.
The <code>uv tool install</code> and <code>uv tool uninstall</code> have been tested, but not <code>uv tool upgrade</code> (which might require a more suitable package or methodology). Guidance from reviewers or maintainers would be greatly appreciated.</p>
<p>Some of the following may need confirmation from maintainers or reviewers before implementation:</p>
<ul>
<li>Add the <code>UV_TOOL_MAN_DIR</code> environment variable for specifying the location of manpages.</li>
<li>Show manpage information in the <code>uv tool list</code> command (although pipx also shows manpage information, I'm unsure if we want to include this in the <code>uv tool list</code> command as well).</li>
</ul>
<p>Resolves #4731.</p>
<h2>Test Plan</h2>
<pre><code>cargo test --test tool_dir --test tool_install --test tool_list --test tool_run --test tool_uninstall --test tool_upgrade
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @eth3lbert on 2024-09-07 17:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>crates/uv-tool/src/lib.rs</code>:416 on 2024-09-07 17:36</div>
            <div class="timeline-body"><p>According to https://man7.org/linux/man-pages/man5/manpath.5.html#SEARCH_PATH, <code>&quot;bin/../share/man&quot;</code> should be a valid search path, so we find the manpage directory in this way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>crates/uv-tool/src/lib.rs</code>:416 on 2024-09-07 17:37</div>
            <div class="timeline-body"><p>We might also consider adding <code>UV_TOOL_MAN_DIR</code> and placing it first.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>crates/uv/src/commands/tool/common.rs</code>:78 on 2024-09-07 17:39</div>
            <div class="timeline-body"><p>I'm unsure if we should add something similar for the <code>manpage</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>crates/uv-tool/src/tool.rs</code>:35 on 2024-09-07 17:43</div>
            <div class="timeline-body"><p>The manpages table is currently written only when necessary. We could also always include it if that's deemed more appropriate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-09-07 17:46</div>
            <div class="timeline-body"></div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:39:28 UTC
    </footer>
</body>
</html>
