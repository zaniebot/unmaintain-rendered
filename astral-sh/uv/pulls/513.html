<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Better tracing span - astral-sh/uv #513</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Better tracing span</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/513">#513</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-11-29 10:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>This will help us get better insight into what is happening and how long it takes. I'm particularly interested in how long the different source dist steps take (download, extract, build step(s)), to make better decisions about their caching, which i want to report through tracing.</p>
<p>Example output:</p>
<pre><code class="language-console">$ RUST_LOG=puffin=info cargo run --bin puffin -q -- pip-compile -v --no-cache scripts/requirements/all-kinds.in &gt; /dev/null
  puffin_distribution::source_dist::download_source_dist filename=&quot;werkzeug-3.0.1.tar.gz&quot;, source_dist=werkzeug @ https://files.pythonhosted.org/packages/0d/cc/ff1904eb5eb4b455e442834dabf9427331ac0fa02853bf83db817a7dd53d/werkzeug-3.0.1.tar.gz
  puffin_dispatch::build_source source_dist=&quot;werkzeug @ https://files.pythonhosted.org/packages/0d/cc/ff1904eb5eb4b455e442834dabf9427331ac0fa02853bf83db817a7dd53d/werkzeug-3.0.1.tar.gz&quot;, subdirectory=None
    puffin_build::extract_archive sdist=&quot;werkzeug-3.0.1.tar.gz&quot;
    puffin_dispatch::resolve requirements=&quot;flit-core &lt;4&quot;
    puffin_dispatch::install requirements=&quot;flit-core ==3.9.0&quot;, venv=&quot;/tmp/.tmpgZAEAh/.venv&quot;
    puffin_build::get_requires_for_build_wheel name=&quot;build_wheel&quot;, python_version=3.12
    puffin_build::build package_id=&quot;werkzeug @ https://files.pythonhosted.org/packages/0d/cc/ff1904eb5eb4b455e442834dabf9427331ac0fa02853bf83db817a7dd53d/werkzeug-3.0.1.tar.gz&quot;
      puffin_build::run_python_script name=&quot;build_wheel&quot;, python_version=3.12
  puffin_dispatch::build_source source_dist=&quot;pydantic-extra-types @ git+https://github.com/pydantic/pydantic-extra-types.git@843b753e9e8cb74e83cac55598719b39a4d5ef1f&quot;, subdirectory=None
    puffin_dispatch::resolve requirements=&quot;hatchling&quot;
    puffin_dispatch::install requirements=&quot;hatchling ==1.18.0, trove-classifiers ==2023.11.22, editables ==0.5, pathspec ==0.11.2, pluggy ==1.3.0, packaging ==23.2&quot;, venv=&quot;/tmp/.tmpJjweUn/.venv&quot;
    puffin_build::get_requires_for_build_wheel name=&quot;build_wheel&quot;, python_version=3.12
    puffin_build::build package_id=&quot;pydantic-extra-types @ git+https://github.com/pydantic/pydantic-extra-types.git@843b753e9e8cb74e83cac55598719b39a4d5ef1f&quot;
      puffin_build::run_python_script name=&quot;build_wheel&quot;, python_version=3.12
  puffin_distribution::source_dist::download_source_dist filename=&quot;django-allauth-0.51.0.tar.gz&quot;, source_dist=django-allauth==0.51.0
  puffin_dispatch::build_source source_dist=&quot;django-allauth==0.51.0&quot;, subdirectory=None
    puffin_build::extract_archive sdist=&quot;django-allauth-0.51.0.tar.gz&quot;
    puffin_dispatch::resolve requirements=&quot;wheel, setuptools, pip&quot;
    puffin_dispatch::install requirements=&quot;setuptools ==69.0.2, pip ==23.3.1, wheel ==0.42.0&quot;, venv=&quot;/tmp/.tmplSZisu/.venv&quot;
    puffin_build::build package_id=&quot;django-allauth==0.51.0&quot;
 Resolved 35 packages in 11.71s
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2023-11-29 10:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2023-11-29 10:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-11-29 10:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:34:48 UTC
    </footer>
</body>
</html>
