<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add note on cache growth for self-hosted GitHub runners - astral-sh/uv #5757</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add note on cache growth for self-hosted GitHub runners</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/5757">#5757</a>
        opened by <a href="https://github.com/samypr100">@samypr100</a>
        on 2024-08-04 04:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/samypr100">@samypr100</a></div>
            <div class="timeline-body">Summary
<p>Related discussion: #5731</p>
<p>This adds a warning section for caching on non-ephemeral (e.g. ec2) self hosted github runners.</p>
Test Plan
<p>Prettier was ran on the file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/samypr100">@samypr100</a> on 2024-08-04 05:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-05 13:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/konstin">@konstin</a> on 2024-08-06 08:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2024-08-23 12:07</div>
            <div class="timeline-body"><p>Rendered</p>
<img alt="self_hosted_runners" src="https://github.com/user-attachments/assets/166cf7fa-a8f3-4051-bd56-defb5668a93c">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-09-17 04:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/guides/integration/github.md</code>:289 on 2024-09-17 04:09</div>
            <div class="timeline-body"><pre><code>    ```sh title=&quot;clean-workspace.sh&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-09-17 04:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/guides/integration/github.md</code>:283 on 2024-09-17 04:10</div>
            <div class="timeline-body"><p>What is being referred to here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-09-17 04:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/guides/integration/github.md</code>:275 on 2024-09-17 04:12</div>
            <div class="timeline-body"><pre><code>    When using non-ephemeral self-hosted runners and the default cache directory, the cache can grow over time 
    and become problematic. In such cases, it&#x27;s recommend to move the cache to inside the
</code></pre>
<pre><code></code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/samypr100">@samypr100</a> reviewed on 2024-09-17 12:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/samypr100">@samypr100</a> on <code>docs/guides/integration/github.md</code>:283 on 2024-09-17 12:03</div>
            <div class="timeline-body"><p>Good question, it was a callout to the previous section https://docs.astral.sh/uv/guides/integration/github/#caching</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-09-17 13:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/guides/integration/github.md</code>:283 on 2024-09-17 13:46</div>
            <div class="timeline-body"><p>But would you actually restore the cache in this situation? My understanding is the cache is deleted at the end of each job so what is there to persist and restore? (This confusion has been why this pull request has been lingering, sorry!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/samypr100">@samypr100</a> reviewed on 2024-09-17 16:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/samypr100">@samypr100</a> on <code>docs/guides/integration/github.md</code>:283 on 2024-09-17 16:00</div>
            <div class="timeline-body"><p>Ah I see. That was meant to be optional step (if desired to use github actions cache for a pre-warmed cache). We can easily remove it if its confusing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-09-17 16:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/guides/integration/github.md</code>:283 on 2024-09-17 16:31</div>
            <div class="timeline-body"><pre><code></code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-18 13:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;docs: add warning note on self-hosted github runners&quot; to &quot;Add note on cache growth for self-hosted runners&quot; by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-18 13:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add note on cache growth for self-hosted runners&quot; to &quot;Add note on cache growth for self-hosted GitHub runners&quot; by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-18 13:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-09-18 13:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-18 13:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-18 13:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/samypr100">@samypr100</a> reviewed on 2024-09-18 18:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/samypr100">@samypr100</a> on <code>docs/guides/integration/github.md</code>:291 on 2024-09-18 18:51</div>
            <div class="timeline-body"><p>@zanieb I noticed this was changed üòÖ  This happens at the runner level and not at the job level, so uv will not be at the path (unless installed globally and not via setup-uv) nor the job env vars üòÅ
Hence why it was <code>rm -rf $GITHUB_WORKSPACE/*</code> before</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-09-18 22:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:47:07 UTC
    </footer>
</body>
</html>
