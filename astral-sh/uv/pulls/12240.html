<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support modules with different casing in build backend - astral-sh/uv #12240</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support modules with different casing in build backend</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/12240">#12240</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-03-17 14:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>Match the module name to its module directory with potentially different casing.</p>
<p>For example, a package may have the dist-info-normalized package name <code>pil_util</code>, but the importable module is named <code>PIL_util</code>.</p>
<p>We get the module name either as dist-info-normalized package name, or explicitly from the user. For dist-info-normalizing a package name, the rules are lowercasing, replacing <code>.</code> with <code>_</code> and replace <code>-</code> with <code>_</code>. Since <code>.</code> and <code>-</code> are not allowed in module names, we can check whether a directory name matches our expected module name by lowercasing it.</p>
<p>Fixes #12187</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/konstin">@konstin</a> on 2025-03-17 14:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-03-17 18:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-build-backend/src/wheel.rs</code>:257 on 2025-03-17 18:01</div>
            <div class="timeline-body"><p>You can probably use <code>to_str</code> here since if it&#x27;s not Unicode it would never match, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-03-17 18:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-build-backend/src/wheel.rs</code>:266 on 2025-03-17 18:02</div>
            <div class="timeline-body"><p>I would suggest adding an error for the case in which a matching directory exists, but there&#x27;s no <code>__init__.py</code> file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NourEldin-Osama">@NourEldin-Osama</a> on 2025-03-21 03:32</div>
            <div class="timeline-body"><p>May I ask when this pull request will get merged?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/konstin">@konstin</a> on 2025-03-22 01:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2025-03-23 13:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-23 13:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-23 13:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-03-23 13:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:51:23 UTC
    </footer>
</body>
</html>
