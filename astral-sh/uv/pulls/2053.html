<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fallback to streaming after `BufError` - astral-sh/uv #2053</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fallback to streaming after <code>BufError</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/2053">#2053</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-02-28 20:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Undecided on whether to merge this. Looking at the linked issue, something is going wrong with the client-server interaction, but I don't know what, who's at fault, or how to fix it. This change would merely fall back to <em>not</em> performing range requests in this case.</p>
<p>See: https://github.com/astral-sh/uv/issues/1710.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @charliermarsh on 2024-02-28 20:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @charliermarsh on 2024-02-28 20:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/humanzz">@humanzz</a> on 2024-02-29 19:29</div>
            <div class="timeline-body"><p>@charliermarsh I'm happy to pull this PR, to build it and try it out in my environment, check the logs and see if the issue still shows up. I'm just wondering if there's any instructions for me to follow. I checked https://github.com/astral-sh/uv/blob/main/CONTRIBUTING.md, but am not sure (again with my Rust ignorance) how the development <code>uv</code> binary can be created. If that knowledge gap of mine can be closed, then I should be able to test that binary out and report back what I've observed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-29 20:50</div>
            <div class="timeline-body"><p>@humanzz - Thanks! You could run <code>cargo build</code> in the <code>uv</code> directory, and then the <code>uv</code> binary will exist at <code>./target/debug/uv</code> (e.g., <code>./target/debug/uv pip install ...</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-01 15:57</div>
            <div class="timeline-body"><p>Can we emit a warning? I'm also a little hesitant but it <em>is</em> more resilient.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/humanzz">@humanzz</a> on 2024-03-04 21:04</div>
            <div class="timeline-body"><p>Unfortunately, whatever testing am doing is not conclusive. I managed to build this PR, and gave it a try a few times... it worked most times, but it still fails from time to time.</p>
<p>I've compared using <code>pip</code> and in the proxy logs I'm definitely not seeing any exceptions, but when using <code>uv</code> I see the exceptions... but sometimes the overall build succeeds, and some times it doesn't.</p>
<p>I got a bit busy a bit, but I'll still try to look into this. The failures are either the already reported <code>BufError</code> or sometimes a
<code>  Ã— No solution found when resolving dependencies:</code>. It's not clear if that might be hiding a <code>BufError</code> under the hood, or these are just completely unrelated issues.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-23 15:07</div>
            <div class="timeline-body"><p>Going to close for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-23 15:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:35:50 UTC
    </footer>
</body>
</html>
