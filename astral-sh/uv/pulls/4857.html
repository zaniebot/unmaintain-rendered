<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docs: Add guide for authenticating to Azure Artifacts - astral-sh/uv #4857</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Docs: Add guide for authenticating to Azure Artifacts</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/4857">#4857</a>
        opened by <a href="https://github.com/benjamin-hodgson">@benjamin-hodgson</a>
        on 2024-07-07 15:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/benjamin-hodgson">@benjamin-hodgson</a></div>
            <div class="timeline-body">Summary
<p>As discussed in #3542 - there has been some confusion about how to get <code>uv</code> to work with ADO Artifacts so I&#x27;m adding a quick guide.</p>
Test Plan
<p>Smoke-tested the examples on my machine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/benjamin-hodgson">@benjamin-hodgson</a> on 2024-07-07 15:29</div>
            <div class="timeline-body"><p>I’ve written the examples using <code>UV_EXTRA_INDEX_URL</code> but of course that’s discouraged because of dependency confusion attacks, lemme know if you think I should change it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add guide for authenticating to Azure Artifacts&quot; to &quot;Docs: Add guide for authenticating to Azure Artifacts&quot; by <a href="https://github.com/benjamin-hodgson">@benjamin-hodgson</a> on 2024-07-07 15:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-07 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-07 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Rogdham">@Rogdham</a> on <code>docs/guides/using-azure-artifacts.md</code>:14 on 2024-07-08 09:17</div>
            <div class="timeline-body"><p>I believe you should also be able to manually add the PAT into <code>keyring</code> (without the <code>artifacts-keyring</code> plugin) and authenticate transparently with Keyring?</p>
<p>Minus the issues we had in #4056 / #4583</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Rogdham">@Rogdham</a> on <code>docs/guides/using-azure-artifacts.md</code>:15 on 2024-07-08 09:18</div>
            <div class="timeline-body"><p>I believe what the <code>artifacts-keyring</code> plugin is doing under the hood is creating a PAT and returning it.</p>
<p>Could you confirm that? Do you think it&#x27;s worth documenting?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Rogdham">@Rogdham</a> reviewed on 2024-07-08 09:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/benjamin-hodgson">@benjamin-hodgson</a> reviewed on 2024-07-09 02:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/benjamin-hodgson">@benjamin-hodgson</a> on <code>docs/guides/using-azure-artifacts.md</code>:15 on 2024-07-09 02:48</div>
            <div class="timeline-body"><p>The <a href="https://github.com/microsoft/artifacts-credprovider">credential provider tool</a> has a few different modes and I don’t know whether <em>all</em> of them wind up creating a PAT behind the scenes. The interactive scenario does seem to.</p>
<p>I wanted to keep this doc relatively short to help people get up and running, but I could link to the repo for the cred-provider so there’s enough of a paper trail for people to learn more, what do you think?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/benjamin-hodgson">@benjamin-hodgson</a> reviewed on 2024-07-09 02:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/benjamin-hodgson">@benjamin-hodgson</a> on <code>docs/guides/using-azure-artifacts.md</code>:14 on 2024-07-09 02:51</div>
            <div class="timeline-body"><p>Haven’t tested that workflow myself and I don’t know how common it would be (seems to me that you’d either use the plugin, if you have the wherewithal to preinstall stuff, or not use Keyring at all?). I can certainly give it a go tomorrow and add a note if you think it’d be worthwhile. Let me know</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Rogdham">@Rogdham</a> reviewed on 2024-07-14 10:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Rogdham">@Rogdham</a> on <code>docs/guides/using-azure-artifacts.md</code>:15 on 2024-07-14 10:27</div>
            <div class="timeline-body"><p>I can confirm that if the following environment variable is set as follows, a PAT is not created behind the scenes:</p>
<pre><code>NUGET_CREDENTIALPROVIDER_VSTS_TOKENTYPE=SelfDescribing
</code></pre>
<p>Here is the relevant help from the credential provider tool (<code>dotnet exec CredentialProvider.Microsoft.dll -h</code>):</p>
<pre><code>Token Type
    NUGET_CREDENTIALPROVIDER_VSTS_TOKENTYPE
        Specify &#x27;Compact&#x27; to generate a Personal Access Token, which may
        have a long validity period as it can easily be revoked from the UI,
        and sends a notification mail on creation.
        Specify &#x27;SelfDescribing&#x27; to generate a shorter-lived JWT token,
        which does not appear in any UI or notifications
        and is more difficult to revoke.
        By default PATs are generated rather than JWTs,
        unless authentication can be performed non-interactively.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/benjamin-hodgson">@benjamin-hodgson</a> on <code>docs/guides/using-azure-artifacts.md</code>:15 on 2024-07-14 13:20</div>
            <div class="timeline-body"><p>Got it. I would prefer to keep this doc as just a high-level getting started guide, I don’t think we should include advanced configuration like that here. I’ve added a link to the cred provider’s GitHub repo in 50f8af659c74ceb8dbbee001746e4efe160b9b66 so people can learn more if they want to.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/benjamin-hodgson">@benjamin-hodgson</a> reviewed on 2024-07-14 13:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Rogdham">@Rogdham</a> reviewed on 2024-07-15 08:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Rogdham">@Rogdham</a> on <code>docs/guides/using-azure-artifacts.md</code>:15 on 2024-07-15 08:59</div>
            <div class="timeline-body"><p>Looks good to me :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-07-15 16:06</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-15 16:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-15 16:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-15 16:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:46:23 UTC
    </footer>
</body>
</html>
