<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add an editable index to the site-packages registry - astral-sh/uv #671</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add an editable index to the site-packages registry</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/671">#671</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-12-17 03:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-17 03:33</div>
            <div class="timeline-body"><p>This PR modifies <code>SitePackages</code> to store all distributions in a flat vector, and maintain two indexes (hash maps) from &quot;per-element data for an element in the vector&quot; to &quot;index of that element&quot;. This enables us to maintain a map on both package name and editable URL.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-17 03:37</div>
            <div class="timeline-body"><p>I don't know if this is the right tradeoff, since the number of editables will tend to be quite small vs. the number of total packages, and we now pay for more operations to maintain the hash map. But it also doesn't feel great to iterate over <em>all</em> distributions for every lookup, nor does it feel good to (e.g.) lazily initialize a hash map over the editables, since we actually mutate this data structure and then need a way to keep them in-sync.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-12-17 03:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-12-17 03:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-12-17 03:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 15:45:06 UTC
    </footer>
</body>
</html>
