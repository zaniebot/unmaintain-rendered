<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow installation of manylinux wheels on riscv64 - astral-sh/uv #8934</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow installation of manylinux wheels on riscv64</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/8934">#8934</a>
        opened by <a href="https://github.com/markdryan">@markdryan</a>
        on 2024-11-08 12:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/markdryan">@markdryan</a></div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>auditwheel is capable of generating riscv64 wheels for manylinux_2_31 and above.  Here we modify uv-platform-tags so that those wheels can be installed using uv.</p>
<p>Fixes: #8889</p>
<h2>Test Plan</h2>
<ul>
<li>ran <code>cargo nextest run</code> locally on an x86 machine</li>
<li>also ran <code>cargo nextest run</code> locally on a riscv64 VM but there were a fair few failures (with and without this patch)</li>
<li>built a riscv64 uv wheel, installed it on a riscv64 VM and checked that I could use the newly built version of uv to install manylinux_2_35_riscv64 wheels.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-08 14:11</div>
            <div class="timeline-body"><p>Are you able to link to any references around the riscv64 / manylinux relationship, for posterity?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-11-08 14:13</div>
            <div class="timeline-body"><p>It's documented in https://github.com/pypa/auditwheel/blob/dd3df250063f520950f7f7c3e30544c701b5ec9c/src/auditwheel/policy/manylinux-policy.json#L329, i wanted to add this for the review</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/markdryan">@markdryan</a> on 2024-11-08 14:40</div>
            <div class="timeline-body"><blockquote>
<p>Are you able to link to any references around the riscv64 / manylinux relationship, for posterity?</p>
</blockquote>
<p>There's a <a href="https://discuss.python.org/t/packaging-support-for-riscv64/58475">thread</a> discussing the status of packaging support for riscv64 in the Python packaging discussion forums.  As far as I'm aware, the situation as of today is that, auditwheel&gt;=6.10 and maturin&gt;=v1.7.1 can create manylinux riscv64 wheels and pip&gt;=24.1 can install them.  Neither the manylinux container images, pypi/wharehouse nor cibuildwheel support riscv64 yet, but this doesn't in itself prevent riscv64 manylinux wheels from being built, installed or uploaded to other registries, such as those provided by gitlab.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2024-11-08 15:57</div>
            <div class="timeline-body"><p>Thanks!</p>
<p>I've confirmed with <code>docker run --rm -it --platform linux/riscv64 ubuntu</code> that <code>uv pip install cmake --only-binary :all: -v --index-url https://gitlab.com/api/v4/projects/riseproject%2Fpython%2Fwheel_builder/packages/pypi/simple</code> picks the manylinux over the linux package after this change</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2024-11-08 15:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2024-11-08 15:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:40:31 UTC
    </footer>
</body>
</html>
