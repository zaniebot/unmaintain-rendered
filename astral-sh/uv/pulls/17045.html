<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement `uv pip freeze --exclude` flag - astral-sh/uv #17045</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Implement `uv pip freeze --exclude` flag</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/pull/17045">#17045</a>
        opened by <a href="https://github.com/gaardhus">@gaardhus</a>
        on 2025-12-09 10:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/gaardhus">@gaardhus</a> on 2025-12-09 10:20</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Implements the <code>--exclude</code> flag to <code>uv pip freeze</code>, which allows to filter unwanted dependencies from the resulting requirements.txt file.</p>
<pre><code class="language-bash">uv pip freeze --exclude pandas
</code></pre>
<p>part of https://github.com/astral-sh/uv/issues/3141</p>
<h2>Test Plan</h2>
<p>Unit test with simple exclusions based on a synced requirements.text.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-12-10 14:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/pip/freeze.rs</code>:89 on 2025-12-10 14:05</div>
            <div class="timeline-body"><p>Why do we do the <code>exclude.is_empty</code> check?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-12-10 14:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/pip/freeze.rs</code>:25 on 2025-12-10 14:05</div>
            <div class="timeline-body"><p>Should this be a hash set instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/settings.rs</code>:2755 on 2025-12-10 14:06</div>
            <div class="timeline-body"><p>I presume we'd transform to a hash set here</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-12-10 14:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/src/commands/pip/freeze.rs</code>:25 on 2025-12-10 14:06</div>
            <div class="timeline-body"><p>https://github.com/astral-sh/uv/pull/17045/files#r2606798282</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-12-10 14:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-12-10 14:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/pip_freeze.rs</code>:595 on 2025-12-10 14:07</div>
            <div class="timeline-body"><p>I might just <code>pip install</code> these packages instead since it's simpler, and you don't need to pin versions because we use exclude-newer in the test suite.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gaardhus">@gaardhus</a> reviewed on 2025-12-11 08:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/gaardhus">@gaardhus</a> on <code>crates/uv/src/commands/pip/freeze.rs</code>:89 on 2025-12-11 08:39</div>
            <div class="timeline-body"><p>redundant indeed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/gaardhus">@gaardhus</a> on <code>crates/uv/tests/it/pip_freeze.rs</code>:595 on 2025-12-11 08:43</div>
            <div class="timeline-body"><p>changed to pip_install, and can also remove pins, however I just adopted that from the other test cases, so unsure how to move forward with that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gaardhus">@gaardhus</a> reviewed on 2025-12-11 08:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gaardhus">@gaardhus</a> reviewed on 2025-12-11 08:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/gaardhus">@gaardhus</a> on <code>crates/uv/src/settings.rs</code>:2783 on 2025-12-11 08:49</div>
            <div class="timeline-body"><p>transform to hash set here seems to be how I can make it work? <code>exclude: exclude.into_iter().collect(),</code></p>
<p>however, like pinning versions in pip_install test, I'm unsure if other similar cases should be changed, i.e. PipListSettings implements a similar exclude argument which is also currently a Vec.</p>
<p>@zanieb</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:06 UTC
    </footer>
</body>
</html>
