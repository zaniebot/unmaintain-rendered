<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>refactor requires-python marker simplification - astral-sh/uv #6268</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>refactor requires-python marker simplification</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/6268">#6268</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2024-08-20 18:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a></div>
            <div class="timeline-body"><p>This commit refactors how deal with <code>requires-python</code> so that instead of
simplifying markers of dependencies inside the resolver, we do it at the
edges of our system. When writing markers to output, we simplify when
there&#x27;s an obvious <code>requires-python</code> context. And when reading markers
as input, we complexity markers with the relevant <code>requires-python</code>
constraint.</p>
<p>There are some lingering problems though:</p>
<ul>
<li>This PR doesn&#x27;t leverage the type system as much as I would hope to
force folks into dealing with marker serialization correctly. It&#x27;s a
very subtle problem and I think we should invest in that, but I think
it would be better in a follow-up PR since this one is already pretty
big.</li>
<li>Some of the snapshot updates are wrong, some are fixing a bug and
still others require investigation to figure out whether they&#x27;re
correct or not.</li>
<li>I side-stepped the issue of <code>MarkerTree</code>&#x27;s hidden state by
implementing requires-python marker simplification in a cursed way:
run <code>restrict_versions</code>, serialize the marker to string form and then
re-parse it. This should ensure any hidden state in the <code>MarkerTree</code>
is removed. Of course, this isn&#x27;t what we should do. I think we should
just remove the hidden state entirely, but I took a shortcut to prove
out the idea.</li>
</ul>
<p>Fixes #6269, Fixes #6412, Fixes #6836</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-08-20 18:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/lock.rs</code>:8666 on 2024-08-20 18:54</div>
            <div class="timeline-body"><p>Yeah — this seems wrong in this context.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-08-20 21:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/lock.rs</code>:8666 on 2024-08-20 21:36</div>
            <div class="timeline-body"><p>Looking at this..</p>
<p>Moving the transformation call so we can see the display before mutation...</p>
<pre><code>diff --git a/crates/uv-resolver/src/error.rs b/crates/uv-resolver/src/error.rs
index 4a38e3e30..dc9eeecf8 100644
--- a/crates/uv-resolver/src/error.rs
+++ b/crates/uv-resolver/src/error.rs
@@ -222,7 +222,6 @@ impl std::fmt::Display for NoSolutionError {
 
         // Transform the error tree for reporting
         let mut tree = self.error.clone();
-        simplify_derivation_tree_markers(&amp;self.python_requirement, &amp;mut tree);
         let should_display_tree = std::env::var_os(&quot;UV_INTERNAL__SHOW_DERIVATION_TREE&quot;).is_some()
             || tracing::enabled!(tracing::Level::TRACE);
 
@@ -230,6 +229,7 @@ impl std::fmt::Display for NoSolutionError {
             display_tree(&amp;tree, &quot;Resolver derivation tree before reduction&quot;);
         }
 
+        simplify_derivation_tree_markers(&amp;self.python_requirement, &amp;mut tree);
         collapse_no_versions_of_workspace_members(&amp;mut tree, &amp;self.workspace_members);
</code></pre>
<p>Using a <code>cargo insta test</code> invocation:</p>
<pre><code>UV_INTERNAL__SHOW_DERIVATION_TREE=1 cit unconditional_overlapping_marker_disjoint_version_constraints
</code></pre>
<p>We get the following trees:</p>
<pre><code>Resolver derivation tree before reduction
  root==0a0.dev0 depends on project*
      project==0.1.0 depends on datasets{python_full_version &gt;= &#x27;3.11&#x27;}&gt;=2.19
      no versions of datasets{python_full_version &gt;= &#x27;3.11&#x27;}&gt;=2.19
    no versions of project&lt;0.1.0 | &gt;0.1.0
Resolver derivation tree after reduction
  project==0.1.0 depends on datasets&gt;=2.19
  no versions of datasets&gt;=2.19
</code></pre>
<p>It looks like your simplifications here are fine, the tree is wrong before then.</p>
<p>Here are the (correct) trees from main:</p>
<pre><code>Resolver derivation tree before reduction
  root==0a0.dev0 depends on project*
      project==0.1.0 depends on datasets&gt;=2.19
      project==0.1.0 depends on datasets&lt;2.19
    no versions of project&lt;0.1.0 | &gt;0.1.0
Resolver derivation tree after reduction
  project==0.1.0 depends on datasets&gt;=2.19
  project==0.1.0 depends on datasets&lt;2.19
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-08-20 21:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/lock.rs</code>:8666 on 2024-08-20 21:45</div>
            <div class="timeline-body"><p>Without <code>UV_EXCLUDE_NEWER</code>,  the message is entirely unhinged.</p>
<pre><code>Resolver derivation tree before reduction
    root==0a0.dev0 depends on project*
        project==0.1.0 depends on datasets{python_full_version &gt;= &#x27;3.11&#x27;}&gt;=2.19
        project==0.1.0 depends on datasets&lt;2.19
        no versions of datasets{python_full_version &gt;= &#x27;3.11&#x27;}&gt;2.19.0, &lt;2.19.1 | &gt;2.19.1, &lt;2.19.2 | &gt;2.19.2, &lt;2.20.0 | &gt;2.20.0, &lt;2.21.0 | &gt;2.21.0
    no versions of project&lt;0.1.0 | &gt;0.1.0
Resolver derivation tree after reduction
    project==0.1.0 depends on datasets&gt;=2.19
    project==0.1.0 depends on datasets&lt;2.19
    no versions of datasets&gt;2.19.0, &lt;2.19.1 | &gt;2.19.1, &lt;2.19.2 | &gt;2.19.2, &lt;2.20.0 | &gt;2.20.0, &lt;2.21.0 | &gt;2.21.0
</code></pre>
<pre><code>× No solution found when resolving dependencies:
╰─▶ Because only the following versions of datasets are available:
        datasets&lt;=2.19.0
        datasets==2.19.1
        datasets==2.19.2
        datasets==2.20.0
        datasets==2.21.0
    and your project depends on datasets&lt;2.19, we can conclude that your project and datasets&gt;=2.19.0 are incompatible.
    And because your project depends on datasets&gt;=2.19, we can conclude that your project&#x27;s requirements are unsatisfiable.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-08-21 18:56</div>
            <div class="timeline-body"><a href="https://codspeed.io/astral-sh/uv/branches/ag/reveal-what-is-hidden">CodSpeed Performance Report</a>
Merging #6268 will <strong>not alter performance</strong>
<p>Comparing <code>ag/reveal-what-is-hidden</code> (92e68dd) with <code>main</code> (4a6bea5)</p>
Summary
<p><code>✅ 14</code> untouched benchmarks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-23 19:04</div>
            <div class="timeline-body"><p>Here is my current state: I still cannot fully explain the diff on the <code>transformers</code> ecosystem test and I haven&#x27;t yet investigated the root cause in the change to the error message.</p>
<p>I&#x27;ve spent a lot of time looking at the <code>transformers</code> test case. I&#x27;ve minimized the <code>pyproject.toml</code> down a bit, although it is still quite a large number of dependencies:</p>
<pre><code>[project]
name = &quot;transformers&quot;
version = &quot;4.39.0.dev0&quot;
requires-python = &quot;&gt;=3.9.0&quot;
dependencies = []

[project.urls]
repository = &quot;https://github.com/huggingface/transformers&quot;

[project.optional-dependencies]
accelerate = [
    &quot;accelerate&gt;=0.21.0&quot;,
]
flax = [
    &quot;flax&gt;=0.4.1,&lt;=0.7.0&quot;,
]
torch-speech = [
    &quot;librosa&quot;,
]
quality = [
    &quot;datasets!=2.5.0&quot;,
]
all = [
    &quot;tensorflow&gt;=2.6,&lt;2.16&quot;,
    &quot;onnxconverter-common&quot;,
    &quot;tensorflow-text&lt;2.16&quot;,
    &quot;jax&gt;=0.4.1,&lt;=0.4.13&quot;,
]
agents = [
    &quot;opencv-python&quot;,
]

[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;
</code></pre>
<p>Then lock this using <code>main</code>. Then <code>mv uv.lock main.lock</code> and re-lock using this PR. You end up with a pretty sizeable diff:</p>
<pre><code>$ diff main.lock pr1.lock | wc -l
434
</code></pre>
<p>Here&#x27;s one example of a difference. This is from <code>main</code>:</p>
<pre><code>[[package]]
name = &quot;tensorflow-macos&quot;
version = &quot;2.15.1&quot;
source = { registry = &quot;https://pypi.org/simple&quot; }
resolution-markers = [
    &quot;python_full_version &lt; &#x27;3.10&#x27; and platform_machine == &#x27;aarch64&#x27; and platform_system == &#x27;Linux&#x27;&quot;,
]
dependencies = [
    { name = &quot;tensorflow-cpu-aws&quot;, marker = &quot;python_full_version &lt; &#x27;3.10&#x27; and platform_machine == &#x27;aarch64&#x27; and platform_system == &#x27;Linux&#x27;&quot; },
]
wheels = [
    { url = &quot;https://files.pythonhosted.org/packages/b3/c8/b90dc41b1eefc2894801a120cf268b1f25440981fcf966fb055febce8348/tensorflow_macos-2.15.1-cp310-cp310-macosx_12_0_arm64.whl&quot;, hash = &quot;sha256:b8f01d7615fe4ff3b15a12f84471bd5344fed187543c4a091da3ddca51b6dc26&quot;, size = 2158 },
    { url = &quot;https://files.pythonhosted.org/packages/bc/11/b73387ad260614ec43c313a630d14fe5522455084abc207fce864aaa3d73/tensorflow_macos-2.15.1-cp311-cp311-macosx_12_0_arm64.whl&quot;, hash = &quot;sha256:58fca6399665f19e599c591c421672d9bc8b705409d43ececd0931d1d3bc6a7e&quot;, size = 2159 },
    { url = &quot;https://files.pythonhosted.org/packages/3a/54/95b9459cd48d92a0522c8dd59955210e51747a46461bcedb64a9a77ba822/tensorflow_macos-2.15.1-cp39-cp39-macosx_12_0_arm64.whl&quot;, hash = &quot;sha256:cca3c9ba5b96face05716792cb1bcc70d84c5e0c34bfb7735b39c65d0334b699&quot;, size = 2158 },
]
</code></pre>
<p>And this is from this branch:</p>
<pre><code>[[package]]
name = &quot;tensorflow-macos&quot;
version = &quot;2.15.1&quot;
source = { registry = &quot;https://pypi.org/simple&quot; }
resolution-markers = [
    &quot;python_full_version &lt; &#x27;3.10&#x27; and platform_machine == &#x27;arm64&#x27; and platform_system == &#x27;Darwin&#x27;&quot;,
]
wheels = [
    { url = &quot;https://files.pythonhosted.org/packages/b3/c8/b90dc41b1eefc2894801a120cf268b1f25440981fcf966fb055febce8348/tensorflow_macos-2.15.1-cp310-cp310-macosx_12_0_arm64.whl&quot;, hash = &quot;sha256:b8f01d7615fe4ff3b15a12f84471bd5344fed187543c4a091da3ddca51b6dc26&quot;, size = 2158 },
    { url = &quot;https://files.pythonhosted.org/packages/bc/11/b73387ad260614ec43c313a630d14fe5522455084abc207fce864aaa3d73/tensorflow_macos-2.15.1-cp311-cp311-macosx_12_0_arm64.whl&quot;, hash = &quot;sha256:58fca6399665f19e599c591c421672d9bc8b705409d43ececd0931d1d3bc6a7e&quot;, size = 2159 },
    { url = &quot;https://files.pythonhosted.org/packages/3a/54/95b9459cd48d92a0522c8dd59955210e51747a46461bcedb64a9a77ba822/tensorflow_macos-2.15.1-cp39-cp39-macosx_12_0_arm64.whl&quot;, hash = &quot;sha256:cca3c9ba5b96face05716792cb1bcc70d84c5e0c34bfb7735b39c65d0334b699&quot;, size = 2158 },
]
</code></pre>
<p>Here&#x27;s another example. From <code>main</code>:</p>
<pre><code>[[package]]
name = &quot;flatbuffers&quot;
version = &quot;24.3.25&quot;
source = { registry = &quot;https://pypi.org/simple&quot; }
resolution-markers = [
    &quot;python_full_version &lt; &#x27;3.10&#x27; and platform_machine == &#x27;aarch64&#x27; and platform_system == &#x27;Linux&#x27;&quot;,
]
</code></pre>
<p>From this branch:</p>
<pre><code>[[package]]
name = &quot;flatbuffers&quot;
version = &quot;24.3.25&quot;
source = { registry = &quot;https://pypi.org/simple&quot; }
resolution-markers = [
    &quot;python_full_version &lt; &#x27;3.10&#x27; and platform_machine == &#x27;arm64&#x27; and platform_system == &#x27;Darwin&#x27;&quot;,
]
</code></pre>
<p>This represents a key thing I don&#x27;t yet understand: <em>why</em> does <code>flatbuffers 24.3.25</code> end up in only one fork? Why doesn&#x27;t it end up in <em>both</em> forks in <em>both</em> cases? I don&#x27;t know.</p>
<p>One thing I do know is that this is related to fork prioritization. If I remove <code>forks.sort()</code> from <code>uv-resolver/src/resolver/mod.rs</code> in <em>both</em> <code>main</code> and this branch, then the differences in the lock file go away.</p>
<p>Because of that, I spent some time trying to making fork prioritization in this branch work in the same way as in <code>main</code>. But I think this is very hard to do because of the different <code>requires-python</code> handling <em>and</em> because of the hidden state for Python versions inside of <code>MarkerTree</code>. I think fork prioritization in this branch, as-is, matches the spirit of what it&#x27;s trying to do: solve for more constraining <code>python_version</code> requirements before less constraining.</p>
<p>Here are my thoughts in summary for where to go from here:</p>
<ul>
<li>Keep trying to discover whether the resolution in this branch is actually incorrect, or if it is just a &quot;different but correct&quot; resolution. If both resolutions are correct, then I&#x27;d be tempted to merge (after fixing the error message issue) since this PR does fix other outstanding bugs.</li>
<li>I am wondering whether <em>both</em> resolutions are actually incorrect, and perhaps there is a deeper unresolved bug that this PR is exacerbating or just letting manifest in a different way. What leads me to this thought is the shenanigans around <code>tensorflow-macos</code> in both lock files. Moreover, in both cases, dependencies like <code>flatbuffers</code> have a version that end up in one single fork, but the fork it ends up in is different between this branch in <code>main</code>. Why is that? Should it be in both in both cases?</li>
<li>I believe it is correct to say that the instigator for all of this is <code>numpy</code>. Because the dependency tree is so large, there are a number of different <code>numpy</code> dependencies with interesting markers. I believe it is the only reason we fork at all in this case.</li>
</ul>
<p>This is rather odd overall</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-30 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-30 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/konstin">@konstin</a> by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-30 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/ibraheemdev">@ibraheemdev</a> by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-30 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-08-30 16:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-resolver/src/requires_python.rs</code>:365 on 2024-08-30 16:17</div>
            <div class="timeline-body"><p>Note that this seems redundant with the recently added <code>markers</code> method. I tried using <code>markers</code> instead, but it actually resulted in a bunch of test failures. There are some subtle differences between my implementation (which revives it from older code) and the new <code>markers</code> method that I haven&#x27;t investigated yet. It looks like it might come down to <code>python_full_version</code> versus <code>python_version</code>. cc @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-30 16:20</div>
            <div class="timeline-body"><p>I think the <code>resolve_warm_jupyter_universal</code> benchmark is pretty noisy. We should probably be good to merge. With that said, this PR does put more pressure on marker ops that could probably be amortized with some refactoring. For example:</p>
<pre><code>impl Forks {
    fn new(
        name_to_deps: BTreeMap&lt;PackageName, Vec&lt;PubGrubDependency&gt;&gt;,
        python_requirement: &amp;PythonRequirement,
    ) -&gt; Forks {
        let python_marker = python_requirement.to_marker_tree();
        let python_marker = python_marker.as_ref();
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-resolver/src/python_requirement.rs</code>:91 on 2024-08-30 17:51</div>
            <div class="timeline-body"><p>target: &quot;If <code>None</code>, the target version is the same as the installed version.&quot;</p>
<p>Shouldn&#x27;t this method always return a marker tree since we always have some minimum Python version?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-resolver/src/resolver/mod.rs</code>:1581 on 2024-08-30 17:53</div>
            <div class="timeline-body"><pre><code>                            Some(Cow::Owned(constraint))
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2024-08-30 18:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/requires_python.rs</code>:365 on 2024-09-01 17:39</div>
            <div class="timeline-body"><p>My implementation actually had a crucial bug in it (#6902).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-09-01 17:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-09-01 17:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/resolver/mod.rs</code>:1581 on 2024-09-01 17:40</div>
            <div class="timeline-body"><p><code>Some(Cow::Owned(constraint.clone()))</code> seems strange, can the <code>.clone</code> be dropped?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-09-01 17:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-09-01 17:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/requires_python.rs</code>:365 on 2024-09-01 17:41</div>
            <div class="timeline-body"><p>Can you try removing my impl&#x27;s usages with this method? (Or use my impl?) Just a brief try after rebase would be appreciated. If you still see failures, let me know.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-09-01 17:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/requires_python.rs</code>:545 on 2024-09-01 17:41</div>
            <div class="timeline-body"><p>Can you document <code>greater</code>? Or make it an enum to self-document a bit?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-09-03 14:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-resolver/src/python_requirement.rs</code>:91 on 2024-09-03 14:51</div>
            <div class="timeline-body"><p>Yup. @charliermarsh&#x27;s recent refactor forced this issue as well (for the better).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-09-03 14:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-resolver/src/resolver/mod.rs</code>:1581 on 2024-09-03 14:51</div>
            <div class="timeline-body"><p>Yup!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-09-03 14:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-resolver/src/requires_python.rs</code>:545 on 2024-09-03 14:52</div>
            <div class="timeline-body"><p>Thankfully I just got rid of this entirely as your <code>markers()</code> implementation (with that bug fix) now works.</p>
<p>(I&#x27;m also not a huge fan of boolean parameters either, but tend to abide them for unexported helpers that are used once or twice in lieu of adding another type. But I don&#x27;t feel too strongly about it.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-09-03 14:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-resolver/src/requires_python.rs</code>:365 on 2024-09-03 14:53</div>
            <div class="timeline-body"><p>Yup, nice fix. It works.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-09-03 17:48</div>
            <div class="timeline-body"><p>I&#x27;ve added regression tests for #6269, #6412 and #6836.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-09-03 22:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-09-03 22:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-09-03 22:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:47:34 UTC
    </footer>
</body>
</html>
