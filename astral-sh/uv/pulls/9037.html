<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make diagnostic methods dynamic on error - astral-sh/uv #9037</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make diagnostic methods dynamic on error</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/9037">#9037</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-11-12 02:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 02:01</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>I need these to accept &quot;any error&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @charliermarsh on 2024-11-12 02:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @charliermarsh on 2024-11-12 02:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2024-11-12 11:45</div>
            <div class="timeline-body"><p>Looks good to me (i'll let andrew have the final word), i just wanted to note that this sounds a lot like the abstraction <code>anyhow::Error</code> builds.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2024-11-12 12:24</div>
            <div class="timeline-body"><p>This LGTM. (What is the motivation?) This is the same way <code>std::io::Error::other</code> works: https://doc.rust-lang.org/std/io/struct.Error.html#method.other</p>
<p>You could use an <code>anyhow::Error</code> here, but the main advantage of that type is to build up a causal error chain. I think we're mostly doing that via <code>thiserror</code>, so I don't see much advantage to using it here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 14:35</div>
            <div class="timeline-body"><p>The motivation here is that I want to be able to pass in either <code>Box&lt;uv_diagnostic::Error&gt;</code> or <code>Arc&lt;uv_diagnostic::Error&gt;</code>... I can't clone, and I can't take a reference because I then need the type to be a field on the inner <code>struct Error</code> I create within these methods, and using a non-static lifetime gives me: <code>non-static lifetimes are not allowed in the source of an error, because std::error::Error requires the source is dyn Error + 'static</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-11-12 15:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-12 15:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-11-12 15:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:14 UTC
    </footer>
</body>
</html>
