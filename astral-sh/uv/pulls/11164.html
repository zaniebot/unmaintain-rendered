<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add ``last updated`` for document - astral-sh/uv #11164</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>last updated</code> for document</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/11164">#11164</a>
        opened by <a href="https://github.com/FishAlchemist">@FishAlchemist</a>
        on 2025-02-02 11:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/FishAlchemist">@FishAlchemist</a></div>
            <div class="timeline-body">Summary
<p><img src="https://github.com/user-attachments/assets/75431f9f-debe-435d-a02e-d216be7a3a01" alt="image">
<img src="https://github.com/user-attachments/assets/2d1b895e-4878-410e-90ff-ff8e932cbf24" alt="image">
Display the last document update time, excluding any automatically generated parts of the document, while ensuring that Google can accurately read and recognize the webpage&#x27;s time.</p>
<p>Note that I do not have permission to update <code>requirements-insiders.txt</code></p>
<p>Google time info</p>
<ul>
<li>https://developers.google.com/search/blog/2019/03/help-google-search-know-best-date-for</li>
<li>https://developers.google.com/search/docs/appearance/structured-data/article#amp</li>
</ul>
<p>Similar <a href="https://github.com/astral-sh/uv/pull/11162">astral-sh/uv#11162</a>
Closes #11148</p>
Test Plan
<p>uvx --with-requirements docs/requirements.txt -- mkdocs serve -f mkdocs.public.yml --strict
<img src="https://github.com/user-attachments/assets/6e8cd609-2e60-489c-97cc-fb28aa3204e0" alt="image">
The correct format is actually <code>2024-08-08T22:01:08Z</code>, but Google Search happens to be lenient and accepts this format.
<img src="https://github.com/user-attachments/assets/2ec8ce98-49ea-403b-bbd2-3d0d5630a562" alt="image"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2025-02-02 11:12</div>
            <div class="timeline-body"><p>I just stepped out, planning to set up Google time and then open a PR when I got back. Unexpectedly, someone beat me to it. See which version you want to use, I just don&#x27;t want my time to be wasted, so I&#x27;m throwing it up for reference.
<a href="https://github.com/astral-sh/uv/pull/11162">astral-sh/uv#11162</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2025-02-02 12:03</div>
            <div class="timeline-body"><p>By the way, the website does not currently support rich results, so even if you set a time, it will not take effect.
https://search.google.com/test/rich-results/result?id=oQWO7tBph2rXt81M4uuAKg&amp;hl=en</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add last updated for doc&quot; to &quot;Add ``last updated`` for document&quot; by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2025-02-02 12:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/FishAlchemist">@FishAlchemist</a> reviewed on 2025-02-02 12:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on <code>mkdocs.public.yml</code>:6 on 2025-02-02 12:12</div>
            <div class="timeline-body"><p>Actually, I don&#x27;t want to specifically target UTC(Default UTC), but unfortunately, <code>git_revision_date_localized_raw_iso_datetime</code> doesn&#x27;t include the timezone offset. So, if you want to change the timezone, you also need to modify the JSON-LD information for Google Search to recognize it.</p>
<p>https://github.com/timvink/mkdocs-git-revision-date-localized-plugin/blob/v1.3.0/src/mkdocs_git_revision_date_localized_plugin/dates.py#L42-L45</p>
<pre><code>&quot;iso_date&quot;: loc_revision_date.strftime(&quot;%Y-%m-%d&quot;),
&quot;iso_datetime&quot;: loc_revision_date.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;),
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/FishAlchemist">@FishAlchemist</a> reviewed on 2025-02-02 12:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on <code>.github/workflows/publish-docs.yml</code>:29 on 2025-02-02 12:54</div>
            <div class="timeline-body"><p>https://github.com/timvink/mkdocs-git-revision-date-localized-plugin?tab=readme-ov-file#note-when-using-build-systems-like-github-actions</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/konstin">@konstin</a> on 2025-02-02 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-02-03 21:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>mkdocs.public.yml</code>:10 on 2025-02-03 21:15</div>
            <div class="timeline-body"><p>Why omit these?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-02-03 21:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>mkdocs.public.yml</code>:10 on 2025-02-03 21:17</div>
            <div class="timeline-body"><p>Perhaps because they&#x27;re generated files? Still seems nice to include the updated time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/FishAlchemist">@FishAlchemist</a> reviewed on 2025-02-04 02:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on <code>mkdocs.public.yml</code>:10 on 2025-02-04 02:58</div>
            <div class="timeline-body"><p>Since they are generated from code, I think their changes should actually follow the version, so let&#x27;s exclude them for now. However, it&#x27;s okay to keep them if you want them to be displayed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-02-04 03:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>mkdocs.public.yml</code>:10 on 2025-02-04 03:07</div>
            <div class="timeline-body"><p>For a reader though, the date updated is still relevant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/FishAlchemist">@FishAlchemist</a> reviewed on 2025-02-04 03:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on <code>mkdocs.public.yml</code>:10 on 2025-02-04 03:10</div>
            <div class="timeline-body"><p>@zanieb Okay, so I just revoked the exclusion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2025-02-04 03:27</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-04 03:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-04 03:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-06-17 06:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:50:39 UTC
    </footer>
</body>
</html>
