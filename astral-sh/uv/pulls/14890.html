<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Rust crate console to 0.16.0 - astral-sh/uv #14890</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update Rust crate console to 0.16.0</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/14890">#14890</a>
        opened by <a href="https://github.com/musicinmybrain">@musicinmybrain</a>
        on 2025-07-25 11:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2025-07-25 11:16</div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<!-- What's the purpose of the change? What does it do, and why? -->

<p>This revisits https://github.com/astral-sh/uv/pull/14364, which was opened by the renovate bot and originally failed with an error I don’t quite understand in https://github.com/astral-sh/uv/pull/14364#issuecomment-3017545431.</p>
<p>Since 852aba4f90988b7bd437573b721062228d504b49 updated to <code>indicatif</code> 0.18, we now already have <code>console</code> 0.16 in the dependency tree. This PR adjusts the direct dependency on <code>console</code> to match.</p>
<p>The only breaking change in <a href="https://github.com/console-rs/console/releases/tag/0.16.0"><code>console</code> 0.16.0</a> is that crates that depend on <code>console</code> with <code>default-features = False</code> may need to explicitly enable the new <code>std</code> feature. This is the case for <code>uv</code>: while I did find that <code>cargo test</code> passes with just the <code>console</code> dependency version adjusted, this is due to <a href="https://doc.rust-lang.org/cargo/reference/features.html#feature-unification">feature unification</a>, i.e., the indirect dependency on <code>console</code> via <code>indicatif</code> 0.18 already requires its <code>std</code> feature. We can see by inspection that <code>uv</code> should also have a direct dependency on <code>console</code> with the <code>std</code> feature. For example, see:</p>
<p>https://github.com/astral-sh/uv/blob/05031becc3762b8b298e98046d6514a6cb6fb244/crates/uv-console/src/lib.rs#L1</p>
<p>and note that <code>Term</code> is gated by the <code>std</code> feature in</p>
<p>https://github.com/console-rs/console/blob/a51fcead7cda1fc6f5ac552a5588aaba8c069639/src/lib.rs#L90-L93</p>
<p>The addition of <code>features = [&quot;std&quot;]</code> is the key difference between this PR and https://github.com/astral-sh/uv/pull/14364.</p>
<h2>Test Plan</h2>
<!-- How was it tested? -->

<p><code>cargo test</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-25 13:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>Cargo.lock</code>:762 on 2025-07-25 13:00</div>
            <div class="timeline-body"><p>Hm why did this change?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-25 13:00</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/musicinmybrain">@musicinmybrain</a> reviewed on 2025-07-25 13:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on <code>Cargo.lock</code>:762 on 2025-07-25 13:06</div>
            <div class="timeline-body"><p>I have no idea! I simply ran <code>cargo update console@0.15.11 console@0.16.0</code> using the system Rust toolchain on an up-to-date Fedora 42 installation. I’m happy to investigate, if you have any ideas.</p>
<p>You could also check out this branch, <code>git reset --hard HEAD~1</code> to drop the commit that updated <code>Cargo.lock</code>, and try doing the <code>Cargo.lock</code> update yourself – maybe you will end up with a different result?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2025-07-25 16:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-07-25 16:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @zanieb on 2025-07-25 16:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 06:47:15 UTC
    </footer>
</body>
</html>
