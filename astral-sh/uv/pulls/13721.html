<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Only show the first match per platform (and architecture) by default in `uv python list`  - astral-sh/uv #13721</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Only show the first match per platform (and architecture) by default in <code>uv python list</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/13721">#13721</a>
        opened by <a href="https://github.com/Gankra">@Gankra</a>
        on 2025-05-29 20:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a></div>
            <div class="timeline-body"><p>This is an alternative to #13701</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-29 20:39</div>
            <div class="timeline-body"><p>Hm... this presumes that all the install problems were fixed by https://github.com/astral-sh/uv/pull/13709 ?</p>
<p>I don't think this removes the need for #13701 because it won't solve the microarchitecture case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-05-29 20:41</div>
            <div class="timeline-body"><p>Confirmed this fixes #13475 if i extend it to also do &quot;x86_32 windows on arm64 windows&quot;</p>
<p>(although in that case the snapshot churns in an annoying way)</p>
<pre><code>    3       │-cpython-3.10.17-[PLATFORM]    &lt;download available&gt;
    4       │-pypy-3.10.16-[PLATFORM]       &lt;download available&gt;
    5       │-graalpy-3.10.0-[PLATFORM]     &lt;download available&gt;
          3 │+cpython-3.10.17-[PLATFORM]      &lt;download available&gt;
          4 │+pypy-3.10.16-[PLATFORM]      &lt;download available&gt;
          5 │+graalpy-3.10.0-[PLATFORM]    &lt;download available&gt;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-05-29 20:42</div>
            <div class="timeline-body"><p>Do you think it would be reasonable to add an --all-microarches flag? Or hide microarches behind --all-arches?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-29 20:49</div>
            <div class="timeline-body"><p>We'll need more sophisticated flags for sure, like <code>--all-arches</code> also doesn't cover the &quot;I want to see all <em>usable</em> architectures&quot; use-case.</p>
<p>For microarchitectures, I think we still want to list the best one by default, the thing there will be that we'll want to change the ordering of microarchitectures based on some preference flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "only conditionally consider os/arch when filtering downloads" to "Only show the first match per platform (and architecture) by default in `uv python list` " by @zanieb on 2025-05-29 20:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-05-29 20:52</div>
            <div class="timeline-body"><blockquote>
<p>For microarchitectures, I think we still want to list the best one by default, the thing there will be that we'll want to change the ordering of microarchitectures based on some preference flag.</p>
</blockquote>
<p>Yeah I think that's the crux of it -- we should regard all these download-preference issues as sorting problems, with the <code>install</code> mode selecting the first item in the list that matches the requirement, and <code>list</code> applying some &quot;don't show more than one&quot; logic.</p>
<p>And then whatever preferences the user applies to prefer v1 are settings that go into the sorter?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-29 20:54</div>
            <div class="timeline-body"><p>I find that fairly compelling.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-05-29 20:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @Gankra on 2025-05-29 21:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Gankra on 2025-05-29 21:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-05-29 21:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:43:20 UTC
    </footer>
</body>
</html>
