<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Build workspace member graph to determine if members are dependencies - astral-sh/uv #14683</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Build workspace member graph to determine if members are dependencies</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/14683">#14683</a>
        opened by <a href="https://github.com/jtfmumm">@jtfmumm</a>
        on 2025-07-17 15:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jtfmumm">@jtfmumm</a></div>
            <div class="timeline-body"><p>This draft PR contains a first pass at building a graph of workspace member dependencies to differentiate members that are graph sources from members that are dependencies. This is for checking whether we should build a member by default (see #14663).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">do-not-merge</span> added by <a href="https://github.com/jtfmumm">@jtfmumm</a> on 2025-07-17 15:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 15:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-workspace/src/workspace.rs</code>:1648 on 2025-07-17 15:38</div>
            <div class="timeline-body"><p>You need to handle optional dependencies and dependency groups, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 15:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-workspace/src/workspace.rs</code>:1680 on 2025-07-17 15:40</div>
            <div class="timeline-body"><p>Isn&#x27;t this type annotation redundant given the return signature?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 15:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-workspace/src/workspace.rs</code>:1639 on 2025-07-17 15:41</div>
            <div class="timeline-body"><p>What is the graph getting us here? Why can&#x27;t we just insert directly into a <code>BTreeMap</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 15:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-workspace/src/workspace.rs</code>:1651 on 2025-07-17 15:41</div>
            <div class="timeline-body"><p>I think we&#x27;re going to want to omit self dependencies, e.g., for <code>add_self</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 15:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-workspace/src/workspace.rs</code>:966 on 2025-07-17 15:43</div>
            <div class="timeline-body"><p>nit: It&#x27;s a little weird to have <code>project.project</code>, e.g., to access the inner <code>Project</code>. It hints the naming might not be quite right.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 15:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-workspace/src/workspace.rs</code>:951 on 2025-07-17 15:44</div>
            <div class="timeline-body"><p>This type only exists for <code>collect_members_only</code>, right? Could we just declare this type locally and keep the public <code>WorkspaceMember</code> flat?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-17 15:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-workspace/src/workspace.rs</code>:966 on 2025-07-17 15:47</div>
            <div class="timeline-body"><p>Would be resolved by <a href="https://github.com/astral-sh/uv/pull/14683">astral-sh/uv#14683</a>#discussion_r2213705998</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/jtfmumm">@jtfmumm</a> on 2025-07-17 20:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:53:10 UTC
    </footer>
</body>
</html>
