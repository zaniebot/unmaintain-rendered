<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document how to use `uv run` with a shebang - astral-sh/uv #6313</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Document how to use `uv run` with a shebang</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/6313">#6313</a>
        opened by <a href="https://github.com/PaarthShah">@PaarthShah</a>
        on 2024-08-21 09:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/PaarthShah">@PaarthShah</a> on 2024-08-21 09:28</div>
            <div class="timeline-body"><!--
Thank you for contributing to uv! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>Add documentation about how to use a shebang (<code>#!/usr/bin/env -S uv run</code>) to run a python script with <code>uv run</code> without actually inputting <code>uv run</code> directly in the shell.</p>
<h2>Test Plan</h2>
<p>Tested locally using <code>uv</code> <code>0.3.0</code> on Pop_OS! 22.04</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @PaarthShah on 2024-08-21 09:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Document how to use 'uv run' with a shebang" to "Document how to use `uv run` with a shebang" by @PaarthShah on 2024-08-21 09:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-08-21 12:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @zanieb on 2024-08-21 12:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ngnpope">@ngnpope</a> on 2024-08-21 17:24</div>
            <div class="timeline-body"><p>Related: https://github.com/astral-sh/ruff/issues/13021#issuecomment-2302585295</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/PaarthShah">@PaarthShah</a> reviewed on 2024-08-21 19:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/PaarthShah">@PaarthShah</a> on <code>docs/guides/scripts.md</code>:1 on 2024-08-21 19:37</div>
            <div class="timeline-body"><p>Please feel very free to nitpick for consistency/readability: I'm not attached to any formatting/phrasing so much as the actual content.</p>
<p>One thing that I wanted to comment on but wasn't sure how to: why the <code>-S</code> is needed in the shebang:</p>
<p>from <code>man env</code>:</p>
<pre><code>       -S, --split-string=S
              process  and split S into separate arguments; used to pass multiple argu‚Äê
              ments on shebang lines
</code></pre>
<p>Basically, since <code>uv run</code> is &quot;multiple arguments&quot; insofar as that <code>run</code> is an argument to <code>uv</code> (along with any others), the <code>-S</code> is needed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/fschulze">@fschulze</a> reviewed on 2024-08-22 07:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/fschulze">@fschulze</a> on <code>docs/guides/scripts.md</code>:1 on 2024-08-22 07:52</div>
            <div class="timeline-body"><p>Only saw this here now, according to https://stackoverflow.com/a/16365367/3748142 <code>/usr/bin/env</code> isn't very portable between different systems.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/PaarthShah">@PaarthShah</a> reviewed on 2024-08-22 08:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/PaarthShah">@PaarthShah</a> on <code>docs/guides/scripts.md</code>:1 on 2024-08-22 08:16</div>
            <div class="timeline-body"><p>@fschulze That answer is very, very outdated (from 2013, edited 2018). It's far more portable nowadays.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-22 14:14</div>
            <div class="timeline-body"><p>Cool. I'm hesitant to merge this until we address https://github.com/astral-sh/uv/issues/6360</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @zanieb by @zanieb on 2024-09-17 19:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ilyagr">@ilyagr</a> on 2024-12-16 08:14</div>
            <div class="timeline-body"><p>This now needs a <code>--script</code> at the end of the shebang line, and probably a warning in the docs about how important it is to avoid https://github.com/astral-sh/uv/issues/6360</p>
<p>~~I also wonder whether it will work if the first argument to the script could be confused with a <code>uv run</code> option. Not sure if there's any way for shebang and <code>env</code> to put <code>--</code> after the script. Maybe this would need a special <code>uv</code> command or behavior.~~</p>
<p><strong>Update:</strong> I don't think my worry from the last paragraph is a real problem. I thought <code>--script</code> takes an argument, so <code>--script prog.py</code> is the same as <code>--script=prog.py</code>, but that is not the case, and  <code>uv help run</code> says that &quot;Arguments following the command (or script) are not interpreted as arguments to uv.&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/andrei-korshikov">@andrei-korshikov</a> on <code>docs/guides/scripts.md</code>:221 on 2025-03-18 09:00</div>
            <div class="timeline-body"><ol>
<li><code>git+https</code> dependencies lead to &quot;Resolving dependencies...&quot; message with ~1 sec delay for network requests on every run, and with <code>--quiet</code> it looks like a strange pause for no reasons. I.e. I think <code>--quiet</code> is opinionated and not good for all cases.</li>
<li>We have infinite recursion without <code>--script</code> option if a script doesn't have <code>.py</code> extension, this should be noted.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/andrei-korshikov">@andrei-korshikov</a> reviewed on 2025-03-18 09:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-11-02 20:10</div>
            <div class="timeline-body"><p>I believe this is now in the docs: https://docs.astral.sh/uv/guides/scripts/#using-a-shebang-to-create-an-executable-file</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-11-02 20:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 06:30:31 UTC
    </footer>
</body>
</html>
