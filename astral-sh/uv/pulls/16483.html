<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use std `home_dir` instead of `home` crate - astral-sh/uv #16483</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use std `home_dir` instead of `home` crate</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/16483">#16483</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2025-10-28 12:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2025-10-28 12:49</div>
            <div class="timeline-body"><p>The <code>home_dir</code> function in std was deprecated for some years for reading <code>HOME</code> on Windows. It has recently been fixed and undeprecated: https://github.com/rust-lang/rust/pull/132515</p>
<p>Conversely, the Cargo maintainers want us to move away from the home crate (https://github.com/rust-lang/cargo/tree/master/crates/home):</p>
<blockquote>
<p>Note: This has been fixed in Rust 1.85 to no longer use the HOME environment variable on Windows. If you are still using this crate for the purpose of getting a home directory, you are strongly encouraged to switch to using the standard library's home_dir instead. It is planned to have the deprecation notice removed in 1.87.</p>
<p>This crate further provides two functions, cargo_home and rustup_home, which are the canonical way to determine the location that Cargo and rustup store their data.</p>
<p>See rust-lang/rust#43321.</p>
<blockquote>
<p>This crate is maintained by the Cargo team, primarily for use by Cargo and Rustup and not intended for external use. This crate may make major changes to its APIs or be deprecated without warning.</p>
</blockquote>
</blockquote>
<p>When https://github.com/lunacookies/etcetera/pull/36 merges, we can remove the home crate from our dependency tree.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @geofft by @konstin on 2025-10-28 12:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @konstin on 2025-10-28 12:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @konstin on 2025-10-28 12:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2025-10-28 13:09</div>
            <div class="timeline-body"><p>w00t!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/utkarshgupta137">@utkarshgupta137</a> on 2025-10-28 13:30</div>
            <div class="timeline-body"><p>Sorry for the delay. I've released v0.11 with the home crate removed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-10-28 13:31</div>
            <div class="timeline-body"><p>Thank you for the quick response and the release!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2025-10-29 16:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2025-10-29 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-10-29 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-10-29 17:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 06:30:36 UTC
    </footer>
</body>
</html>
