<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Don't panic with invalid wheel source - astral-sh/uv #4191</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Don't panic with invalid wheel source</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/4191">#4191</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-06-10 10:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2024-06-10 10:49</div>
            <div class="timeline-body"><p>Remove the panic when there is an invalid wheel source, instead surface the error. This error can only occur when manually editing the lock file, but since it's an external file, we should error and not panic.</p>
<p>This change is helpful since the method needs to be able to error for relative path support.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @konstin on 2024-06-10 10:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-06-10 10:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-resolver/src/lock.rs</code>:1785 on 2024-06-10 10:49</div>
            <div class="timeline-body"><p>@BurntSushi Is there are reason why we implement as of those manually instead of deriving them with thiserror?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-06-10 12:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-06-10 12:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-06-10 12:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-10 12:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-06-10 13:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-resolver/src/lock.rs</code>:1785 on 2024-06-10 13:47</div>
            <div class="timeline-body"><p>No real reason other than my fingers are just very used to typing out the error types. I'm fine if you want to convert over to <code>thiserror</code>.</p>
<p>(I have also been thinking that we might perhaps just want to use an <code>anyhow::Error</code> in most places.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-06-10 13:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-resolver/src/lock.rs</code>:592 on 2024-06-10 13:48</div>
            <div class="timeline-body"><p>I think the original intent here was that these cases were actually impossible as a contract of constructing a <code>Distribution</code>. I wonder if that got flubbed somehow.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/uv-resolver/src/lock.rs</code>:592 on 2024-06-10 13:59</div>
            <div class="timeline-body"><p>Yeah this should be impossible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-06-10 13:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2024-06-10 15:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-resolver/src/lock.rs</code>:592 on 2024-06-10 15:44</div>
            <div class="timeline-body"><p>I wouldn't know a good way to tell serde about this correspondence, any hints?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-06-10 15:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/uv-resolver/src/lock.rs</code>:592 on 2024-06-10 15:51</div>
            <div class="timeline-body"><p>If I can't make the types do it for me, then I usually define a <code>TryFrom</code> impl and point Serde to that. For example: https://github.com/astral-sh/uv/blob/04c4da4e65d61347a19960f1ba94cc26d4d01458/crates/uv-resolver/src/lock.rs#L333</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:54:21 UTC
    </footer>
</body>
</html>
