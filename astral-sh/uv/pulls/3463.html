<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disallow `pyproject.toml` files for non-project configuration - astral-sh/uv #3463</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Disallow <code>pyproject.toml</code> files for non-project configuration</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/3463">#3463</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-05-08 17:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-08 17:11</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>We already <em>don't</em> discover a <code>pyproject.toml</code> in <code>~/.config/uv</code> -- it must be <code>uv.toml</code>. This PR makes the same change for <code>--config-file</code> -- it <em>has</em> to be a <code>uv.toml</code>.</p>
<p>I think this is reasonable and more consistent, though I'm not sure. A <code>pyproject.toml</code> &quot;means&quot; something -- it defines a project itself, in which case we should be using project configuration. But creating a <code>pyproject.toml</code> outside the project and passing it via <code>--config-file</code> seems like an anti-pattern.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @charliermarsh on 2024-05-08 17:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @charliermarsh on 2024-05-08 17:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @charliermarsh on 2024-05-08 17:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-08 18:12</div>
            <div class="timeline-body"><p>Is there another way to change the &quot;root&quot; of the invocation to a different <code>pyproject.toml</code> than the working directory? That might address this use-case. I see <code>--config-file foo/pyproject.toml</code> as a desire to change the target entirely rather than just change the config. What does Cargo do here? It allows <code>--config foo/Cargo.toml</code> afaik.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-08 18:13</div>
            <div class="timeline-body"><p>I think Cargo allows <code>--config foo/config.toml</code>, which isn't the same as a <code>Cargo.toml</code>, unless I'm mistaken?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-08 18:14</div>
            <div class="timeline-body"><p>Oh okay nevermind regarding Cargo you're totally right.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-08 18:14</div>
            <div class="timeline-body"><p>I think... I've never had a need to really internalize the difference.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-08 18:15</div>
            <div class="timeline-body"><p>Yeah I checked the docs https://doc.rust-lang.org/cargo/reference/config.html</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2024-05-08 18:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-05-08 18:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-08 18:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-05-08 18:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 14:38:13 UTC
    </footer>
</body>
</html>
