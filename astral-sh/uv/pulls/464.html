<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Start to move more basic tasks into puffin-dispatch - astral-sh/uv #464</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Start to move more basic tasks into puffin-dispatch</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/464">#464</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-11-20 09:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>Cherry-picked 67dd5b321d9ae99c140ea35c807eb656a499cb83 from #460, avoiding the conflicts from de1d1223e0152d5ec285cf8ea70fdc1a47f86e5f (which should be on main now anyway)</p>
<hr />
<h2>Summary</h2>
<p>This PR unifies the behavior that lived in the resolver's <code>distribution</code> crates with the behaviors that were spread between the various structs in the installer crate into a single <code>Fetcher</code> struct that is intended to manage all interactions with distributions. Specifically, the interface of this struct is such that it can access distribution metadata, download distributions, return those downloads, etc., all with a common cache.</p>
<p>Overall, this is mostly just DRYing up code that was repeated between the two crates, and putting it behind a reasonable shared interface.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-distribution/src/download.rs</code>:119 on 2023-11-20 09:07</div>
            <div class="timeline-body"><p>We should give this a proper error type with context on which wheel is invalid</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/puffin-distribution/src/fetcher.rs</code>:79 on 2023-11-20 09:08</div>
            <div class="timeline-body"><p>The part from here downwards i'll have to change a lot</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-11-20 09:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2023-11-20 11:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-11-28 16:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:34:46 UTC
    </footer>
</body>
</html>
