<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv python install: Detect hard-float support - astral-sh/uv #7725</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv python install: Detect hard-float support</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/pull/7725">#7725</a>
        opened by <a href="https://github.com/kakkoyun">@kakkoyun</a>
        on 2024-09-26 19:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/kakkoyun">@kakkoyun</a> on 2024-09-26 19:35</div>
            <div class="timeline-body"><p>Signed-off-by: Kemal Akkoyun <a href="mailto:kakkoyun@gmail.com">kakkoyun@gmail.com</a></p>
<h2>Summary</h2>
<p>This pull request fixes <a href="https://github.com/astral-sh/uv/issues/6873">#6873</a> by implementing
a mechanism to detect whether the ARM architecture supports the VFP (Vector Floating Point) hardware,
which is critical for selecting the appropriate <code>libc</code> variant.</p>
<p>The detection is based on reading the flags from <code>/proc/cpuinfo</code>.
Specifically, if the <code>vfp</code> flag is present, the system will use the <code>gnueabihf</code> (hard-float ABI) variant;
if not, it will default to <code>gnueabi</code> (soft-float ABI).</p>
<p>For additional context, see the <a href="https://wiki.debian.org/ArmHardFloatPort#VFP">Debian documentation on the ARM Hard Float Port</a>.</p>
<h2>Test Plan</h2>
<ul>
<li>[ ] Verify that the correct <code>libc</code> variant is selected on an ARM system with and without VFP support.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @kakkoyun on 2024-09-26 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @kakkoyun on 2024-09-26 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-09-26 19:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>Cargo.lock</code>:2736 on 2024-09-26 19:38</div>
            <div class="timeline-body"><p>Can we disable the optional <code>chrono</code> feature?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @kakkoyun on 2024-09-26 19:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @konstin by @zanieb on 2024-09-26 20:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-python/src/cpuinfo.rs</code>:22 on 2024-09-27 09:47</div>
            <div class="timeline-body"><p>Can you link the debian docs page here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/uv-python/src/cpuinfo.rs</code>:15 on 2024-09-27 09:49</div>
            <div class="timeline-body"><p>The docstring should mention something about arm, afaik this instruction set does not exist on x86</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2024-09-27 09:49</div>
            <div class="timeline-body"><p>Looks good!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kakkoyun">@kakkoyun</a> reviewed on 2024-09-27 11:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/kakkoyun">@kakkoyun</a> on <code>crates/uv-python/src/cpuinfo.rs</code>:15 on 2024-09-27 11:54</div>
            <div class="timeline-body"><p>That's true. I will add the documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @zanieb on 2024-10-01 18:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2024-10-01 18:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">uv python</span> added by @zanieb on 2024-10-01 18:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kakkoyun">@kakkoyun</a> on 2024-10-02 15:47</div>
            <div class="timeline-body"><p>Quick update: I'm still trying to set up some old RPIs to test this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-29 23:33</div>
            <div class="timeline-body"><p>Replacing with https://github.com/astral-sh/uv/pull/8498</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-29 23:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 13:01:44 UTC
    </footer>
</body>
</html>
