<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>handle an existing shebang in `uv init --script` - astral-sh/uv #14141</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>handle an existing shebang in <code>uv init --script</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/14141">#14141</a>
        opened by <a href="https://github.com/oconnor663">@oconnor663</a>
        on 2025-06-18 22:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-06-18 22:24</div>
            <div class="timeline-body"><p>Closes https://github.com/astral-sh/uv/issues/14085.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @oconnor663 on 2025-06-18 22:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/uv-warnings/src/lib.rs</code>:27 on 2025-06-18 22:26</div>
            <div class="timeline-body"><p>Without the double curlies here, putting two <code>warn_user!</code> invocations back-to-back doesn't compile. My instinct was that I wanted the &quot;warning:&quot; prefix on both lines above, but whether or not we stick with that, this version of these macros is probably more correct.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2025-06-18 22:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 22:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:949 on 2025-06-18 22:28</div>
            <div class="timeline-body"><p>As briefly mentioned above, you should consolidate these into a single multiline message instead of showing &quot;two&quot; warnings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-scripts/src/lib.rs</code>:245 on 2025-06-18 22:29</div>
            <div class="timeline-body"><p>A comment here seems valuable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 22:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:978 on 2025-06-18 22:30</div>
            <div class="timeline-body"><p>Hm, I thought the result should have uv in it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 22:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:939 on 2025-06-18 22:30</div>
            <div class="timeline-body"><p>Is this whitespace intentional? I hadn't seen that before</p>
<pre><code class="language-suggestion">    let contents = &quot;#!/usr/bin/env python3\nprint(\&quot;Hello, world!\&quot;)&quot;;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 22:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 22:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:975 on 2025-06-18 22:31</div>
            <div class="timeline-body"><p>A little manual indentation can go a long way here, since fmt can't handle the macro</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2025-06-18 22:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/uv/tests/it/init.rs</code>:939 on 2025-06-18 22:31</div>
            <div class="timeline-body"><p>I've always been in the habit, and apparently it's always been supported: https://unix.stackexchange.com/a/276845</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:938 on 2025-06-18 22:32</div>
            <div class="timeline-body"><p>What's the child directory doing for us here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 22:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2025-06-18 22:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/uv/tests/it/init.rs</code>:978 on 2025-06-18 22:32</div>
            <div class="timeline-body"><p>~~Oh I was never intending to <em>change</em> the original shebang. My intention here was just not to trash it. I wonder if it would be too opinionated to change it to the one suggested in the warning / <a href="https://docs.astral.sh/uv/guides/scripts/#using-a-shebang-to-create-an-executable-file">our docs</a>.~~</p>
<p>Wait did I make a copy-paste mistake here? Hold that thought.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 22:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv-scripts/src/lib.rs</code>:245 on 2025-06-18 22:33</div>
            <div class="timeline-body"><p>We might want to list a TODO, like providing a nice warning if your uv invocation isn't our recommended shebang.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2025-06-18 22:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/uv/tests/it/init.rs</code>:938 on 2025-06-18 22:33</div>
            <div class="timeline-body"><p>I definitely copy-pasted this from another test without thinking about it :sweat_smile:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:979 on 2025-06-18 22:34</div>
            <div class="timeline-body"><p>I'm not sure I love the newline without a leading comment character, I might include a <code>#</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 22:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 22:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:939 on 2025-06-18 22:36</div>
            <div class="timeline-body"><p>(I find it perturbing, but.. if that's what you like :D)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 22:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:978 on 2025-06-18 22:36</div>
            <div class="timeline-body"><p>This comment is for the snapshot where the initial contents were</p>
<p><code>let contents = &quot;#!/usr/bin/env -S uv run --script\nprint(\&quot;Hello, world!\&quot;)&quot;;</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2025-06-18 22:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2025-06-18 22:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/uv/tests/it/init.rs</code>:978 on 2025-06-18 22:42</div>
            <div class="timeline-body"><p>Ah I think I had this correct in my working copy but neglected to amend the commit before I pushed my branch. Will fix in just a sec.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2025-06-18 22:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/uv/tests/it/init.rs</code>:939 on 2025-06-18 22:45</div>
            <div class="timeline-body"><p><img src="https://github.com/user-attachments/assets/5b179723-c39a-4a25-944a-bf25517aac10" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2025-06-18 23:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/uv/tests/it/init.rs</code>:975 on 2025-06-18 23:21</div>
            <div class="timeline-body"><p>We chatted and decided not to worry too much about test macro formatting here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-06-18 23:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/uv/tests/it/init.rs</code>:975 on 2025-06-18 23:31</div>
            <div class="timeline-body"><p>Yeah I'm a fool.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-06-18 23:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @oconnor663 on 2025-06-19 21:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @oconnor663 on 2025-06-19 21:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-06-19 21:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:26 UTC
    </footer>
</body>
</html>
