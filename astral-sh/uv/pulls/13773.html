<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Rust crate nix to 0.30.0 - astral-sh/uv #13773</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update Rust crate nix to 0.30.0</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/uv/pull/13773">#13773</a>
        opened by <a href="https://github.com/renovate">@renovate</a>
        on 2025-06-02 00:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/renovate">@renovate</a></div>
            <div class="timeline-body"><p>This PR contains the following updates:</p>
<p>| Package | Type | Update | Change |
|---|---|---|---|
| <a href="https://redirect.github.com/nix-rust/nix">nix</a> | workspace.dependencies | minor | <code>0.29.0</code> -&gt; <code>0.30.0</code> |</p>
<hr>
<blockquote>
<p>[!WARNING]
Some dependencies could not be looked up. Check the Dependency Dashboard for more information.</p>
</blockquote>
<hr>
Release Notes

nix-rust/nix (nix)

<a href="https://redirect.github.com/nix-rust/nix/blob/HEAD/CHANGELOG.md#0301---2025-05-04"><code>v0.30.1</code></a>
<p><a href="https://redirect.github.com/nix-rust/nix/compare/v0.30.0...v0.30.1">Compare Source</a></p>
Fixed
<ul>
<li>doc.rs build
(<a href="https://redirect.github.com/nix-rust/nix/pull/2634">#‚Äã2634</a>)</li>
</ul>
<a href="https://redirect.github.com/nix-rust/nix/blob/HEAD/CHANGELOG.md#0300---2025-04-29"><code>v0.30.0</code></a>
<p><a href="https://redirect.github.com/nix-rust/nix/compare/v0.29.0...v0.30.0">Compare Source</a></p>
Added
<ul>
<li>Add socket option <code>IPV6_PKTINFO</code> for BSDs/Linux/Android, also
<code>IPV6_RECVPKTINFO</code> for DragonFlyBSD
(<a href="https://redirect.github.com/nix-rust/nix/pull/2113">#‚Äã2113</a>)</li>
<li>Add <code>fcntl</code>&#x27;s <code>F_PREALLOCATE</code> constant for Apple targets.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2393">#‚Äã2393</a>)</li>
<li>Improve support for extracting the TTL / Hop Limit from incoming packets
and support for DSCP (ToS / Traffic Class).
(<a href="https://redirect.github.com/nix-rust/nix/pull/2425">#‚Äã2425</a>)</li>
<li>Add socket option IP_TOS (nix::sys::socket::sockopt::IpTos) IPV6_TCLASS
(nix::sys::socket::sockopt::Ipv6TClass) on Android/FreeBSD
(<a href="https://redirect.github.com/nix-rust/nix/pull/2464">#‚Äã2464</a>)</li>
<li>Add <code>SeekData</code> and <code>SeekHole</code> to <code>Whence</code> for hurd and apple targets
(<a href="https://redirect.github.com/nix-rust/nix/pull/2473">#‚Äã2473</a>)</li>
<li>Add <code>From</code> trait implementation between <code>SocketAddr</code> and <code>Sockaddr</code>,
<code>Sockaddr6</code> (<a href="https://redirect.github.com/nix-rust/nix/pull/2474">#‚Äã2474</a>)</li>
<li>Added wrappers for <code>posix_spawn</code> API
(<a href="https://redirect.github.com/nix-rust/nix/pull/2475">#‚Äã2475</a>)</li>
<li>Add the support for Emscripten.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2477">#‚Äã2477</a>)</li>
<li>Add fcntl constant <code>F_RDADVISE</code> for Apple target
(<a href="https://redirect.github.com/nix-rust/nix/pull/2480">#‚Äã2480</a>)</li>
<li>Add fcntl constant <code>F_RDAHEAD</code> for Apple target
(<a href="https://redirect.github.com/nix-rust/nix/pull/2482">#‚Äã2482</a>)</li>
<li>Add <code>F_LOG2PHYS</code> and <code>F_LOG2PHYS_EXT</code> for Apple target
(<a href="https://redirect.github.com/nix-rust/nix/pull/2483">#‚Äã2483</a>)</li>
<li><code>MAP_SHARED_VALIDATE</code> was added for all linux targets. &amp; <code>MAP_SYNC</code> was added
for linux with the exclusion of mips architecures, and uclibc
(<a href="https://redirect.github.com/nix-rust/nix/pull/2499">#‚Äã2499</a>)</li>
<li>Add <code>getregs()</code>/<code>getregset()</code>/<code>setregset()</code> for Linux/musl/aarch64
(<a href="https://redirect.github.com/nix-rust/nix/pull/2502">#‚Äã2502</a>)</li>
<li>Add FcntlArgs <code>F_TRANSFEREXTENTS</code> constant for Apple targets
(<a href="https://redirect.github.com/nix-rust/nix/pull/2504">#‚Äã2504</a>)</li>
<li>Add <code>MapFlags::MAP_STACK</code> in <code>sys::man</code> for netbsd
(<a href="https://redirect.github.com/nix-rust/nix/pull/2526">#‚Äã2526</a>)</li>
<li>Add support for <code>libc::LOCAL_PEERTOKEN</code> in <code>getsockopt</code>.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2529">#‚Äã2529</a>)</li>
<li>Add support for <code>syslog</code>, <code>openlog</code>, <code>closelog</code> on all <code>unix</code>.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2537">#‚Äã2537</a>)</li>
<li>Add the <code>TCP_FUNCTION_BLK</code> sockopt, on FreeBSD.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2539">#‚Äã2539</a>)</li>
<li>Implements <code>Into&lt;OwnedFd&gt;</code> for <code>PtyMaster/Fanotify/Inotify/SignalFd/TimerFd</code>
(<a href="https://redirect.github.com/nix-rust/nix/pull/2548">#‚Äã2548</a>)</li>
<li>Add <code>MremapFlags::MREMAP_DONTUNMAP</code> to <code>sys::mman::mremap</code> for linux target.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2555">#‚Äã2555</a>)</li>
<li>Added <code>sockopt_impl!</code> to the public API.  It&#x27;s now possible for users to
define
their own sockopts without needing to make a PR to Nix.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2556">#‚Äã2556</a>)</li>
<li>Add the <code>TCP_FUNCTION_ALIAS</code> sockopt, on FreeBSD.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2558">#‚Äã2558</a>)</li>
<li>Add <code>sys::mman::MmapAdvise</code> <code>MADV_PAGEOUT</code>, <code>MADV_COLD</code>, <code>MADV_WIPEONFORK</code>,
<code>MADV_KEEPONFORK</code> for Linux and Android targets
(<a href="https://redirect.github.com/nix-rust/nix/pull/2559">#‚Äã2559</a>)</li>
<li>Add socket protocol <code>Sctp</code>, as well as <code>MSG_NOTIFICATION</code> for non-Android
Linux targets. (<a href="https://redirect.github.com/nix-rust/nix/pull/2562">#‚Äã2562</a>)</li>
<li>Added <code>from_owned_fd</code> constructor to <code>EventFd</code>
(<a href="https://redirect.github.com/nix-rust/nix/pull/2563">#‚Äã2563</a>)</li>
<li>Add <code>sys::mman::MmapAdvise</code> <code>MADV_POPULATE_READ</code>, <code>MADV_POPULATE_WRITE</code> for
Linux and Android targets
(<a href="https://redirect.github.com/nix-rust/nix/pull/2565">#‚Äã2565</a>)</li>
<li>Added <code>from_owned_fd</code> constructor to
<code>PtyMaster/Fanotify/Inotify/SignalFd/TimerFd</code>
(<a href="https://redirect.github.com/nix-rust/nix/pull/2566">#‚Äã2566</a>)</li>
<li>Added <code>FcntlArg::F_READAHEAD</code> for FreeBSD target
(<a href="https://redirect.github.com/nix-rust/nix/pull/2569">#‚Äã2569</a>)</li>
<li>Added <code>sockopt::LingerSec</code> for Apple targets
(<a href="https://redirect.github.com/nix-rust/nix/pull/2572">#‚Äã2572</a>)</li>
<li>Added <code>sockopt::EsclBind</code> for solarish targets
(<a href="https://redirect.github.com/nix-rust/nix/pull/2573">#‚Äã2573</a>)</li>
<li>Exposed the <code>std::os::fd::AsRawFd</code> trait method for
<code>nix::sys::fanotify::Fanotify</code> struct
(<a href="https://redirect.github.com/nix-rust/nix/pull/2575">#‚Äã2575</a>)</li>
<li>Add support for syslog&#x27;s <code>setlogmask</code> on all <code>unix</code>.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2579">#‚Äã2579</a>)</li>
<li>Added Fuchsia support for <code>ioctl</code>.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2580">#‚Äã2580</a>)</li>
<li>Add <code>sys::socket::SockProtocol::EthIp</code>,
<code>sys::socket::SockProtocol::EthIpv6</code>,
<code>sys::socket::SockProtocol::EthLoop</code>
(<a href="https://redirect.github.com/nix-rust/nix/pull/2581">#‚Äã2581</a>)</li>
<li>Add OpenHarmony target into CI and Update documents.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2599">#‚Äã2599</a>)</li>
<li>Added the TcpMaxSeg <code>setsockopt</code> option for apple targets
(<a href="https://redirect.github.com/nix-rust/nix/pull/2603">#‚Äã2603</a>)</li>
<li>Add <code>FilAttach</code> and <code>FilDetach</code> to socket::sockopt for Illumos
(<a href="https://redirect.github.com/nix-rust/nix/pull/2611">#‚Äã2611</a>)</li>
<li>Add <code>PeerPidfd</code> (<code>SO_PEERPIDFD</code>) to <code>socket::sockopt</code> for Linux
(<a href="https://redirect.github.com/nix-rust/nix/pull/2620">#‚Äã2620</a>)</li>
<li>Added <code>socket::sockopt::AttachReusePortCbpf</code> for Linux
(<a href="https://redirect.github.com/nix-rust/nix/pull/2621">#‚Äã2621</a>)</li>
<li>Add <code>ptrace::syscall_info</code> for linux/glibc
(<a href="https://redirect.github.com/nix-rust/nix/pull/2627">#‚Äã2627</a>)</li>
</ul>
Changed
<ul>
<li>Module sys/signal now adopts I/O safety
(<a href="https://redirect.github.com/nix-rust/nix/pull/1936">#‚Äã1936</a>)</li>
<li>Change the type of the <code>name</code> argument of <code>memfd_create()</code> from <code>&amp;CStr</code> to
<code>&lt;P: NixPath&gt;(name: &amp;P)</code> (<a href="https://redirect.github.com/nix-rust/nix/pull/2431">#‚Äã2431</a>)</li>
<li>Public interfaces in <code>fcntl.rs</code> and <code>dir.rs</code> now use I/O-safe types.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2434">#‚Äã2434</a>)</li>
<li>Module <code>sys/stat</code> now adopts I/O safety.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2439">#‚Äã2439</a>)</li>
<li>Module unistd now adopts I/O safety.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2440">#‚Äã2440</a>)</li>
<li>Module sys/fanotify now adopts I/O safety
(<a href="https://redirect.github.com/nix-rust/nix/pull/2443">#‚Äã2443</a>)</li>
<li>Socket option <code>IpTos</code> has been renamed to <code>Ipv4Tos</code>, the old symbol is
deprecated since 0.30.0 (<a href="https://redirect.github.com/nix-rust/nix/pull/2465">#‚Äã2465</a>)</li>
<li>Rename Flags <code>EventFlag</code> to <code>EvFlags</code>, and <code>MemFdCreateFlag</code> to <code>MFdFlags</code>
(<a href="https://redirect.github.com/nix-rust/nix/pull/2476">#‚Äã2476</a>)</li>
<li>Made <code>nix::sys::socket::UnknownCmsg</code> public and more readable
(<a href="https://redirect.github.com/nix-rust/nix/pull/2520">#‚Äã2520</a>)</li>
<li>recvmsg: take slice for cmsg_buffer instead of Vec
(<a href="https://redirect.github.com/nix-rust/nix/pull/2524">#‚Äã2524</a>)</li>
<li>linkat: allow distinct types for path arguments
(<a href="https://redirect.github.com/nix-rust/nix/pull/2582">#‚Äã2582</a>)</li>
</ul>
Fixed
<ul>
<li>Disable unsupported signals on sparc-linux
(<a href="https://redirect.github.com/nix-rust/nix/pull/2454">#‚Äã2454</a>)</li>
<li>Fix cmsg_len() return type on OpenHarmony
(<a href="https://redirect.github.com/nix-rust/nix/pull/2456">#‚Äã2456</a>)</li>
<li>The <code>ns</code> argument of <code>sys::prctl::set_timerslack()</code> should be of type
<code>c_ulong</code> (<a href="https://redirect.github.com/nix-rust/nix/pull/2505">#‚Äã2505</a>)</li>
<li>Properly exclude NUL characters from <code>OSString</code>s returned by <code>getsockopt</code>.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2557">#‚Äã2557</a>)</li>
<li>Fixes the build on OpenHarmony
(<a href="https://redirect.github.com/nix-rust/nix/pull/2587">#‚Äã2587</a>)</li>
</ul>
Removed
<ul>
<li>Type <code>SigevNotify</code> is no longer <code>PartialEq</code>, <code>Eq</code> and <code>Hash</code> due to the use
of <code>BorrowedFd</code> (<a href="https://redirect.github.com/nix-rust/nix/pull/1936">#‚Äã1936</a>)</li>
<li><code>EventFd::defuse()</code> is removed because it does nothing, <code>EventFd::arm()</code> is
also removed for symmetry reasons.
(<a href="https://redirect.github.com/nix-rust/nix/pull/2452">#‚Äã2452</a>)</li>
<li>Removed the <code>Copy</code> trait from <code>PollFd</code>
(<a href="https://redirect.github.com/nix-rust/nix/pull/2631">#‚Äã2631</a>)</li>
</ul>


<hr>
Configuration
<p>üìÖ <strong>Schedule</strong>: Branch creation - &quot;before 4am on Monday&quot; (UTC), Automerge - At any time (no schedule defined).</p>
<p>üö¶ <strong>Automerge</strong>: Disabled by config. Please merge this manually once you are satisfied.</p>
<p>‚ôª <strong>Rebasing</strong>: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.</p>
<p>üîï <strong>Ignore</strong>: Close this PR and you won&#x27;t be reminded about this update again.</p>
<hr>
<ul>
<li>[ ] If you want to rebase/retry this PR, check this box</li>
</ul>
<hr>
<p>This PR was generated by <a href="https://mend.io/renovate/">Mend Renovate</a>. View the <a href="https://developer.mend.io/github/astral-sh/uv">repository job log</a>.</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/renovate[bot]">@renovate[bot]</a> on 2025-06-02 00:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/renovate[bot]">@renovate[bot]</a> on 2025-06-02 00:56</div>
            <div class="timeline-body">‚ö†Ô∏è Artifact update problem
<p>Renovate failed to update an artifact related to this branch. You probably do not want to merge this PR as-is.</p>
<p>‚ôª Renovate will retry this branch, including artifacts, only when one of the following happens:</p>
<ul>
<li>any of the package files in this branch needs updating, or</li>
<li>the branch becomes conflicted, or</li>
<li>you click the rebase/retry checkbox if found above, or</li>
<li>you rename this PR&#x27;s title to start with &quot;rebase!&quot; to trigger it manually</li>
</ul>
<p>The artifact failure details are included below:</p>
File name: Cargo.lock
<pre><code>Command failed: cargo update --config net.git-fetch-with-cli=true --manifest-path Cargo.toml --package nix@0.29.0 --precise 0.30.1
    Updating crates.io index
error: failed to select a version for the requirement `nix = &quot;^0.29&quot;`
candidate versions found which didn&#x27;t match: 0.30.1
location searched: crates.io index
required by package `homedir v0.3.4`
    ... which satisfies dependency `homedir = &quot;^0.3.3&quot;` (locked to 0.3.4) of package `axoupdater v0.9.0`
    ... which satisfies dependency `axoupdater = &quot;^0.9.0&quot;` (locked to 0.9.0) of package `uv v0.7.9 (/tmp/renovate/repos/github/astral-sh/uv/crates/uv)`

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/konstin">@konstin</a> on 2025-06-02 08:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2025-06-02 08:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-06-02 08:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:52:27 UTC
    </footer>
</body>
</html>
