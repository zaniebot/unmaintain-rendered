<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixing broken build and making tiny improvements - BurntSushi/ripgrep #2147</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fixing broken build and making tiny improvements</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/2147">#2147</a>
        opened by <a href="https://github.com/ink-splatters">@ink-splatters</a>
        on 2022-02-19 02:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ink-splatters">@ink-splatters</a></div>
            <div class="timeline-body"><p>Hi there,</p>
<p>being long-term <code>ripgrep</code> admirer and everyday user, I've come up with those ultra-tiny improvements, besides fixing blocker build issue caused by <code>packed_simd_2</code> which had used now removed feature.</p>
<p>Update, however, has been done using <code>cargo update</code> hence rip previous <code>Cargo.lock</code></p>
<p>Another thing is enabling lto: I've not profiled your tool yet, but basing on my recent experience with custom build of Python (with which I observed perf improvements, at least, in some synthetic benchmarks)[1], I consider this potentially to be
beneficial.</p>
<p>New profile has been created as lto badly slows down the linking, which may not be desirable by default.</p>
<p>Finally - rip warnings :) ( related to code considered dead by rust )</p>
<hr />
<p>[1] FYI Python build details:</p>
<pre><code class="language-shell">    PYTHON_CONFIGURE_OPTS=&quot;--enable-framework&quot; CONFIGURE_OPTS=&quot;--enable-optimizations --with-lto&quot; \
    CPPFLAGS=&quot;-I$(brew --prefix openssl)/include -I$(brew --prefix libffi)/include&quot; \
    LDFLAGS=&quot;-L$(brew --prefix openssl)/lib -L$(brew --prefix libffi)/lib&quot; \
pyenv install 3.9.2
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-07-08 14:04</div>
            <div class="timeline-body"><p>Thanks, but I think I'm going to pass on this for now.</p>
<p>I also generally prefer to make all <code>Cargo.lock</code> changes myself manually. And putting such changes in PRs like this makes them a nightmare to merge in my workflow. (Which is that I have bursts of activity where PRs tend to sit for a while and get stale.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2023-07-08 14:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-09-22 00:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:44:04 UTC
    </footer>
</body>
</html>
