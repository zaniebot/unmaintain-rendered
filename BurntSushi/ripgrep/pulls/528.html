<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove all inline attributes - BurntSushi/ripgrep #528</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Remove all inline attributes</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/528">#528</a>
        opened by <a href="https://github.com/vegai">@vegai</a>
        on 2017-06-26 07:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vegai">@vegai</a></div>
            <div class="timeline-body"><p>Inline attributes don&#x27;t seem to have any effect on performance on my own tests. However, I was unable to properly verify this, as the benchsuite program did not quite work on my box.</p>
<p>Feel free to kill this PR if you know I&#x27;m not right :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-06-26 10:53</div>
            <div class="timeline-body"><p>Undoubtedly, some of these probably should be removed. But if you aren&#x27;t seeing any difference for any of them, then that makes me immediately skeptical. There needs to be a more thorough analysis, because I did put them there for a reason. Namely, at some point in time, I did notice a performance difference.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vegai">@vegai</a> on 2017-06-27 07:14</div>
            <div class="timeline-body"><p>Would it be possible that rustc has improved in a way that makes the explicit inlines obsolete? But I agree that my own benchmarks were primitive and probably did not stress the relevant parts enough.</p>
<p>I&#x27;d be happy to run the benchsuite against this version and a regular release version, but I wasn&#x27;t able to on Arch Linux at least.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-06-27 11:59</div>
            <div class="timeline-body"><p>Out of curiosity, what problem are you trying to solve here? Why do you want to remove these inline attributes?</p>
<blockquote>
<p>Would it be possible</p>
</blockquote>
<p>Anything is possible. :-)</p>
<p>Note that some of these inline attributes will only impact certain invocations of ripgrep. For example, <code>src/decoder.rs</code> is only used when decoding UTF-16, which isn&#x27;t tested by <code>benchsuite</code>.</p>
<blockquote>
<p>I&#x27;d be happy to run the benchsuite against this version and a regular release version, but I wasn&#x27;t able to on Arch Linux at least.</p>
</blockquote>
<p>I use Archlinux. There&#x27;s an example here: http://blog.burntsushi.net/ripgrep/#benchmark-runner --- If you can&#x27;t get it to work, then please file an issue and we can figure it out. Please include more details than &quot;it doesn&#x27;t work.&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DoumanAsh">@DoumanAsh</a> on 2017-07-21 05:26</div>
            <div class="timeline-body"><p>I could test your PR on windows i suppose.
I&#x27;m not really fond on doing manual suggestions to compiler, but sometimes it might be necessary and there is nothing wrong with it.
After all you have inline attributes for a reason.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-07-21 10:47</div>
            <div class="timeline-body"><p>The only way I&#x27;d merge this PR is if there is a careful and thorough analysis of each <code>inline</code> annotation. That&#x27;s what I would do. I think it would be better if we tackled it one at a time, so I&#x27;m going to close this for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-07-21 10:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vegai">@vegai</a> on 2017-07-23 19:12</div>
            <div class="timeline-body"><p>Yeah, agreed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2017-07-23 19:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:16 UTC
    </footer>
</body>
</html>
