<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omit context separators when using a contextless option like -c or -l - BurntSushi/ripgrep #694</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Omit context separators when using a contextless option like -c or -l</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/694">#694</a>
        opened by <a href="https://github.com/okdana">@okdana</a>
        on 2017-11-27 18:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/okdana">@okdana</a></div>
            <div class="timeline-body"><p>Fixes #693.</p>
<p>When <code>rg</code> has been placed in a &#x27;contextless mode&#x27; by the use of <code>--count</code>, <code>--files-with-matches</code>, or <code>--files-without-match</code>, it should omit the context separator even if given a context option like <code>-A</code> or <code>-C</code>. This matches how (e.g.) <code>grep</code> behaves.</p>
<p>Before:</p>
<pre><code>% \rg -cC1 context.separator
complete/_rg:1
--
doc/rg.1.md:1
--
src/app.rs:3
--
src/printer.rs:9
--
src/args.rs:7
</code></pre>
<p>After:</p>
<pre><code>% target/release/rg -cC1 context.separator
complete/_rg:1
doc/rg.1.md:1
src/app.rs:3
src/args.rs:7
src/printer.rs:9
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/okdana">@okdana</a> reviewed on 2017-11-27 18:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/okdana">@okdana</a> on <code>src/args.rs</code>:164 on 2017-11-27 18:58</div>
            <div class="timeline-body"><p>I changed the <code>&gt;0</code> test slightly just so the condition would fit on one line ü§∑‚Äç‚ôÄÔ∏è</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2017-11-29 14:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>src/args.rs</code>:164 on 2017-11-29 14:02</div>
            <div class="timeline-body"><p>Haha nice, we&#x27;ve all been there. But... I actually think this changes behavior. I think if someone did <code>rg -A 9223372036854775808 -B 9223372036854775808 foo</code>, then the sum would wrap to exactly <code>0</code> and therefore not show any context at all. (Do we really care? Probably not...) Probably best to just use the same condition and wrap the conditional (or lift it out of the <code>if</code> into its own intermediate name). Or perhaps even better, put the logic into a method or something. Up to you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/okdana">@okdana</a> reviewed on 2017-11-29 16:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/okdana">@okdana</a> on <code>src/args.rs</code>:164 on 2017-11-29 16:29</div>
            <div class="timeline-body"><p>Oh, i didn&#x27;t think about that. I&#x27;ve switched it back. Let me know if the style is wrong</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2017-11-29 16:40</div>
            <div class="timeline-body"><p>Nice thanks :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-11-29 17:55</div>
            <div class="timeline-body"><p>Bah, looks like darwin is backlogged: https://www.traviscistatus.com/ --- Looks good enough for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-11-29 17:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-11-29 17:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:16 UTC
    </footer>
</body>
</html>
