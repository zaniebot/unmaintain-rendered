<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update crossbeam to 0.3.2 - BurntSushi/ripgrep #732</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update crossbeam to 0.3.2</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/732">#732</a>
        opened by <a href="https://github.com/ghost">@ghost</a>
        on 2018-01-06 12:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ghost">@ghost</a></div>
            <div class="timeline-body"><p>Crossbeam 0.3.0 uses the old auto trait syntax and 0.3.2 switched to the new one. Ripgrep is a part of Rust&#x27;s test suite and, since it depends on crossbeam 0.3.0, it is currently blocking the following PR, which removes the old auto trait syntax in favor of the new one: <a href="https://github.com/rust-lang/rust/pull/46480">rust-lang/rust#46480</a>#issuecomment-355735400</p>
<p>Diff between versions 0.3.0 and 0.3.2: https://github.com/crossbeam-rs/crossbeam/compare/v0.3.0...v0.3.2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-01-06 14:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-01-06 14:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-01-06 14:06</div>
            <div class="timeline-body"><p>@stjepang Cool! Do you pin to a specific commit on ripgrep, or should I prioritize a new release?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2018-01-06 14:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ghost">@ghost</a> on 2018-01-06 14:22</div>
            <div class="timeline-body"><p>Rust&#x27;s test suite pins to a specific commit, so we&#x27;re covered there.</p>
<p>But I still suggest releasing a new version because crossbeam 0.3.0 will not compile with nightly rustc as soon as <a href="https://github.com/rust-lang/rust/pull/46480">rust-lang/rust#46480</a> gets merged. Even worse, I&#x27;m afraid it won&#x27;t compile with stable rustc in the future either (from version 1.25 onwards).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-01-06 14:30</div>
            <div class="timeline-body"><p>So that means newer versions of Rust won&#x27;t be able to compile older versions of ripgrep? That doesn&#x27;t sound good to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-01-06 14:31</div>
            <div class="timeline-body"><p>@stjepang Anyway, thanks so much for the heads up! I&#x27;m glad this won&#x27;t catch me by surprise. :) I will see if I can get the full story at rust-lang/rust.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ghost">@ghost</a> on 2018-01-06 14:37</div>
            <div class="timeline-body"><p>Yes, the problem is that the following will cause a compilation error, even if you disable the <code>nightly</code> feature. The reason is that this syntactic construction errors during the parsing stage, even before the compiler gets to handling attributes.</p>
<pre><code>#[cfg(feature = &quot;nightly&quot;)]
unsafe impl ZerosValid for .. {}
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:16 UTC
    </footer>
</body>
</html>
