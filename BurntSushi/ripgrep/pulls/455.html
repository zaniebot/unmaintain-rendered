<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add snapcraft.yaml - BurntSushi/ripgrep #455</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add snapcraft.yaml</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/455">#455</a>
        opened by <a href="https://github.com/ChrisMacNaughton">@ChrisMacNaughton</a>
        on 2017-04-20 19:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ChrisMacNaughton">@ChrisMacNaughton</a></div>
            <div class="timeline-body"><p><a href="https://snapcraft.io/">Snapcraft</a> makes Linux packaging very simple in a cross-distro
way. This adds the snapcraft.yaml file to setup a snap of ripgrep</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ChrisMacNaughton">@ChrisMacNaughton</a> on 2017-04-20 19:03</div>
            <div class="timeline-body"><p>I have already registered the snap package name ripgrep, will pass ownership of that over and am happy to help with setting up automated builds!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phrohdoh">@phrohdoh</a> on 2017-05-03 18:33</div>
            <div class="timeline-body"><p>Why snapcraft over flatpack?</p>
<p>I know next to nothing about both but there are multiple offerings available and we should probably weight the pros and cons before selecting one (I believe providing both defeats the purpose).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-05-03 18:37</div>
            <div class="timeline-body"><p>This isn&#x27;t the place to debate snapcraft vs flatpak.</p>
<p>While I appreciate this PR, I know nothing about snapcraft/flatpak and I don&#x27;t have any plans to use them in the immediate future, which makes it hard for me to maintain. Is it necessary for <code>snapcraft.yml</code> to be in this repo?</p>
<p>(I did make an exception for Brew since so many people are using it, although even that will eventually go away once SIMD works on stable Rust.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ChrisMacNaughton">@ChrisMacNaughton</a> on 2017-05-04 12:24</div>
            <div class="timeline-body"><p>I&#x27;d rather not discuss one versus the other as well, although a benefit to snaps is that they are available by default on any Ubuntu &gt;= 16.04.</p>
<p>Regarding inclusion in the repository, it is possible to use snaps without including them in the repository but it is a bit easier to deploy into a testing channel with snaps from CI if it&#x27;s in tree.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-05-04 12:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-05-04 12:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-05-04 12:30</div>
            <div class="timeline-body"><p>All right. I&#x27;ll merge this for now and we can see how it goes. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ChrisMacNaughton">@ChrisMacNaughton</a> on 2017-05-04 12:36</div>
            <div class="timeline-body"><p>@BurntSushi Feel free to ping me (or the snapcraft team) if things are needed to help maintaining it :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-02-09 15:19</div>
            <div class="timeline-body"><p>@ChrisMacNaughton I have a question about this if you don&#x27;t mind. I haven&#x27;t updated ripgrep&#x27;s <code>snapcraft.yaml</code> file since I merged this PR. When I went to install ripgrep via snap on my Ubuntu 17.10 machine, I was surprised to see that it installed ripgrep 0.7.1, which is the latest release. How does that work? What specific purpose does the <code>snapcraft.yaml</code> file in this repo serve? I tried reading the Snapcraft docs at snapcraft.io, but I wasn&#x27;t able to discover any answers to my questions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ChrisMacNaughton">@ChrisMacNaughton</a> on 2018-02-09 15:22</div>
            <div class="timeline-body"><p>@BurntSushi looks like somebody is maintaining a build:</p>
<pre><code>$ snap search ripgrep
Name       Version  Developer  Notes  Summary
rg-casept  0.5.2    casept     -      ripgrep combines the usability of ag with the raw speed of grep.
rg         0.7.1    tasdomas   -      a command line search tool
</code></pre>
<p>To me, the best solution would be to actually setup ripgrep to run on the launchpad builders automatically by setting it up at https://build.snapcraft.io</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-02-09 15:27</div>
            <div class="timeline-body"><p>@ChrisMacNaughton I guess I&#x27;m just <em>super</em> confused:</p>
<ol>
<li>The version in ripgrep&#x27;s <code>snapcraft.yaml</code> file is <code>0.5.1</code>, which doesn&#x27;t match either of the versions in your search results.</li>
<li>The <code>snapcraft.yaml</code> file does not seem to contain any instructions on how to actually build ripgrep. How is it working at all?</li>
<li>Earlier in this PR you mentioned that you already registered the name <code>ripgrep</code>, but the two ripgrep related packages in snap appear to be <code>rg-casept</code> and <code>rg</code>.</li>
</ol>
<p>Maybe the answer is that I need to spend more time in the docs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ChrisMacNaughton">@ChrisMacNaughton</a> on 2018-02-09 15:32</div>
            <div class="timeline-body"><ol>
<li>Anybody can create a snapcraft.yaml, and manage the building and publishing it; ideally upstreams (such as ripgrep, here) will publish their own snapcraft.yaml, and can have https://build.snapcraft.io automatically build on push</li>
<li>The magic for snapcraft to know how to build ripgrep is contained <a href="https://github.com/BurntSushi/ripgrep/blob/master/snapcraft.yaml#L10">here</a>, it uses snapcraft&#x27;s <a href="https://docs.snapcraft.io/reference/plugins/rust">Rust plugin</a></li>
<li>As a corollary to 1, anybody can register a name and upload anything to it, I currently have ripgrep (would rather hand control of that over to you, frankly) which means that the others are named more interestingly :-)</li>
</ol>
<p>If you&#x27;d like a more real-time discussion, I am on IRC as well as icey</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-02-09 15:35</div>
            <div class="timeline-body"><p>@ChrisMacNaughton Awesome, OK! I&#x27;m at work, so not on IRC, but I&#x27;d be happy to take over the <code>ripgrep</code> name and get this setup. I&#x27;m not sure what that process looks like though!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:16 UTC
    </footer>
</body>
</html>
