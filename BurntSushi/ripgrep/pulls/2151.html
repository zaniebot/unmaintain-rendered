<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Limit amount of matches during replacement - BurntSushi/ripgrep #2151</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Limit amount of matches during replacement</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/2151">#2151</a>
        opened by <a href="https://github.com/ghost">@ghost</a>
        on 2022-02-24 19:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ghost">@ghost</a></div>
            <div class="timeline-body"><p>The buffer passed to the replace function can be bigger than the original match
and cause extra matches to occur during replacement. This adds an extra replace
function that doesn't allow matches beyond the original range to get replaced.</p>
<p>I've added <code>replace_with_captures_in_range</code> to do this, but I'm not sure if this should be fixed within
<code>replace_with_captures_at</code> itself (as that one isn't always used with a range).</p>
<p>Fixes #2095</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ghost">@ghost</a> on 2022-05-14 07:42</div>
            <div class="timeline-body"><p>Resolved by #2209</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ghost on 2022-05-14 07:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-05-14 16:54</div>
            <div class="timeline-body"><p>Ah I missed this PR! Thanks. I did end up taking a slight different approach by writing the new function as a new internal helper routine instead of making it a new public API in <code>grep-matcher</code>. Probably <code>grep-matcher</code> should evolve its <code>*_at</code> APIs to accept ranges instead of just the starting location. But that's a battle for another day.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 18:28:19 UTC
    </footer>
</body>
</html>
