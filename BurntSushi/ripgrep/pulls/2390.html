<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update dependencies - BurntSushi/ripgrep #2390</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update dependencies</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/2390">#2390</a>
        opened by <a href="https://github.com/stmcginnis">@stmcginnis</a>
        on 2023-01-05 09:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/stmcginnis">@stmcginnis</a></div>
            <div class="timeline-body"><p>This updates a few dependencies to pull in their latest versions for bugfixes and other improvements.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-01-05 12:28</div>
            <div class="timeline-body"><p>I'm sorry, but I don't accept PRs that update dependencies. I always do that myself so that I can see how it changes the dependency tree. It is far too easy to update a version number somewhere and have that result in a new dependency (or whole mess of dependencies) getting pulled into the tree. When that happens, it's not uncommon for me to seek to eliminate that dependency. During this process, I also check that no dependencies with copyleft licenses sneak into the tree.</p>
<p>Moreover, many of the changes here appear to be increasing the minimal versions of dependencies for no particular reason. I usually do that for crates within this repo because there is high coupling between them and it is usually required, but otherwise, if an older version <em>can</em> be used then It seems fine to permit that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2023-01-05 12:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stmcginnis">@stmcginnis</a> on 2023-01-05 12:42</div>
            <div class="timeline-body"><p>No worries! Should I file an issue instead asking for this instead? Just trying to do some of the work.</p>
<p>See https://github.com/bottlerocket-os/bottlerocket-test-system/pull/650#issuecomment-1310849255 for the motivation for wanting to do this. Basically, trying to avoid multiple dependencies on different bstr versions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-01-05 14:21</div>
            <div class="timeline-body"><p>OK, I've put <code>globset 0.4.10</code> up on crates.io with an updated <code>bstr</code> dependency.</p>
<blockquote>
<p>Just trying to do some of the work.</p>
</blockquote>
<p>Yeah unfortunately most of the work here is not in updating version numbers, but doing dependency review. There's exactly one reason why ripgrep has so &quot;few&quot; (if ~80 can be considered few) dependencies and has reasonable compile times: because I spend a lot of time pruning the tree and being careful when updating dependencies. It is <em>very</em> easy for new dependencies to sneak into the tree.</p>
<p>I just went through the process myself for example and was able to remove both <code>num_cpus</code> and <code>crossbeam-utils</code>. The former was flagged because an update brought a new dependency in, and the latter was flagged as a normal part of review.</p>
<p>I don't really know how this can be done by anyone by the maintainers (which is just me at the moment). I'd have to somehow write down and codify my process, but much of it is &quot;just&quot; judgment and opinions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexTMjugador">@AlexTMjugador</a> on 2023-04-29 13:28</div>
            <div class="timeline-body"><p>My two cents here: <a href="https://github.com/EmbarkStudios/cargo-deny"><code>cargo deny</code></a> can be used to automate some of the tedious review tasks of dependency management mentioned.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-04-29 13:31</div>
            <div class="timeline-body"><p>Thank you. I know about <code>cargo deny</code>. It is indeed true that it can automate some parts of my process, but not the time consuming ones.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:44:06 UTC
    </footer>
</body>
</html>
