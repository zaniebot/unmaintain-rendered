<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>printer: implement --max-columns-preview-before - BurntSushi/ripgrep #2683</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>printer: implement --max-columns-preview-before</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/2683">#2683</a>
        opened by <a href="https://github.com/kkocdko">@kkocdko</a>
        on 2023-12-11 16:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kkocdko">@kkocdko</a></div>
            <div class="timeline-body"><p>See #1352 .</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kkocdko">@kkocdko</a> on 2023-12-11 17:27</div>
            <div class="timeline-body"><p>Currently:</p>
<pre><code class="language-sh">rg --max-columns 30 --max-columns-preview --max-columns-preview-before 10 --per-match '=require\('
</code></pre>
<p><img src="https://github.com/BurntSushi/ripgrep/assets/31189892/ccd67b78-c598-4b84-a807-32e824790a21" alt="screenshot_0" /></p>
<p>Should we reduce the tips text length? And replace the &quot;0 more matches&quot; with &quot;[... omitted end of long line]&quot; when per-match enabled?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/kkocdko">@kkocdko</a> on <code>crates/core/flags/defs.rs</code>:3787 on 2023-12-11 22:24</div>
            <div class="timeline-body"><p>Maybe a better name?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/kkocdko">@kkocdko</a> on <code>crates/core/flags/hiargs.rs</code>:68 on 2023-12-11 22:30</div>
            <div class="timeline-body"><p>We can combine this to <code>max_columns_preview: Option&lt;u64&gt;</code>, but will cause breaking changes. Is this acceptable?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/kkocdko">@kkocdko</a> on <code>crates/core/flags/defs.rs</code>:5401 on 2023-12-11 22:30</div>
            <div class="timeline-body"><p>Expose this to cli.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/kkocdko">@kkocdko</a> on <code>crates/printer/src/standard.rs</code>:1384 on 2023-12-11 22:33</div>
            <div class="timeline-body"><p>Compare to the full <code>--column-context-before</code> + <code>--column-context-after</code> support that needs to modify everywhere, the implementation code here is quiet simple.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kkocdko">@kkocdko</a> reviewed on 2023-12-11 22:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kkocdko">@kkocdko</a> on 2024-01-14 14:31</div>
            <div class="timeline-body"><p>Hi, @BurntSushi , what is your opinion about this design? Many people work on JavaScript bundler and web reverse engineering rely on this feature because we needs to deal with very long line and many huge files.</p>
<p>It's fine if you don't like this. I will still maintenance this patch for my friends.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-01-14 14:54</div>
            <div class="timeline-body"><p>Dunno. I haven't reviewed this yet. I find the flag name long and overall unwieldy to use IMO. And I'm immediately skeptical of exposing <code>per-match</code> due to the problems with <code>--vimgrep</code>. (The size of the output is worst case quadratic in the size of the input.)</p>
<p>I don't have any timeline on when I'll review this, sorry.</p>
<p>To be clear, I'm open to adding some kind of feature for this functionality.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-07-04 14:18</div>
            <div class="timeline-body"><p>I think I'm going to pass on this patch. I don't think this is the right way to approach this problem. I think that if we're going to have this functionality, we should do it better than forcing each match to print on its own line. It's a clever hack to keep the implementation simple, I'll give you that, but this isn't something I want to commit to long term.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2025-07-04 14:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:44:12 UTC
    </footer>
</body>
</html>
