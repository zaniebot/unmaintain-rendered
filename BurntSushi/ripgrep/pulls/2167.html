<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ci: fix failing nightly-arm build on ci workflow - BurntSushi/ripgrep #2167</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ci: fix failing nightly-arm build on ci workflow</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/2167">#2167</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2022-03-21 12:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a></div>
            <div class="timeline-body"><p>This commit updates the Ubuntu install script to include brotli and
zstd, which are needed for tests.</p>
<p>We also fix the Ubuntu install script to work in environments that
don't have 'sudo'. Instead of creating a totally separate script, we
preserve a single point of truth for these things and just make the
script a bit more flexible.</p>
<p>NOT seen in this commit is that we have built and updated the arm Docker
image. I'm hoping this fixes the GLIBC version issues we're seeing in
CI.</p>
<p>Fixes #2130, Closes #2132</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-03-21 12:49</div>
            <div class="timeline-body"><p>@arcsi42 I'm going to go ahead with this PR over #2132. I did base this off of #2132, but did however simplify it quite a bit. Namely, I just pushed an updated Docker image and that seems to have fixed things. (To be honest, I'm not quite sure how pinning it inside the <code>Dockerfile</code> would have helped. Because the <code>Cross.toml</code> file in the root of the repo should instruct <code>cross</code> to use my own image anyway.)</p>
<p>I've also keep just one <code>ubuntu-install-packages</code> script by making it a bit more flexible.</p>
<p>Thanks again for doing all of the leg work here and diagnosing the problem! It was a huge help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @BurntSushi on 2022-03-21 12:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2022-03-21 12:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2022-03-21 12:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 18:28:19 UTC
    </footer>
</body>
</html>
