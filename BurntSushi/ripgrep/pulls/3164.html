<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add RISC-V (riscv64gc-unknown-linux-gnu) CI and release artifacts - BurntSushi/ripgrep #3164</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add RISC-V (riscv64gc-unknown-linux-gnu) CI and release artifacts</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/3164">#3164</a>
        opened by <a href="https://github.com/mariano-m13">@mariano-m13</a>
        on 2025-10-04 05:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mariano-m13">@mariano-m13</a></div>
            <div class="timeline-body"><p><strong>This PR adds official riscv64 Linux release artifacts so RISC-V developers can run ripgrep natively without cross-compiling.</strong></p>
Context &amp; Purpose
<p><strong>Why</strong>: ripgrep ships binaries for many platforms but not riscv64. Adding a riscv64 GNU artifact gives day-zero parity for RISC-V dev boards and CI and avoids fragmentation. Microsoft&#x27;s ripgrep-prebuilt already demonstrates feasibility; upstreaming closes the gap and helps hardware teams run standard tools natively without cross-compiling.</p>
<p><strong>Value for RISC-V hardware teams</strong>: Native rg on boards/SoCs speeds bring-up, enables native/emulated CI jobs on riscv64, and signals downstream packagers to follow.</p>
<p><strong>Scope philosophy</strong>: Keep it small and safe â€” CI build + smoke test + GNU release artifacts + a short docs line. No feature changes, no perf guarantees, no musl until explicitly requested.</p>
Changes
<ul>
<li><strong>CI</strong>: Added <code>riscv64gc-unknown-linux-gnu</code> target to the CI workflow matrix, following the same cross-compilation pattern as other architectures (aarch64, armv7, powerpc64, s390x)</li>
<li><strong>Release</strong>: Added <code>riscv64gc-unknown-linux-gnu</code> target to the release workflow with proper stripping and QEMU emulation for generating completions and man pages</li>
<li><strong>Docs</strong>: Added RISC-V Linux installation instructions to README.md with example commands for downloading and installing precompiled binaries</li>
</ul>
Testing &amp; Verification
<p><strong>Local Testing</strong>: Built and tested the riscv64gc-unknown-linux-gnu target locally using <code>cross</code>:</p>
<ul>
<li>Debug build completed successfully in 18.6s</li>
<li>Release build completed successfully in 39.6s</li>
<li>Binary verified as <code>ELF 64-bit LSB pie executable, UCB RISC-V, RVC, double-float ABI</code></li>
<li>Successfully ran <code>rg --version</code> under QEMU emulation: <code>ripgrep 14.1.1</code></li>
<li>Confirmed correct dynamic linking with GNU libc (<code>/lib/ld-linux-riscv64-lp64d.so.1</code>)</li>
</ul>
<p><strong>CI Verification</strong> (on merge):</p>
<ul>
<li>[ ] CI job successfully builds <code>riscv64gc-unknown-linux-gnu</code> target using cross</li>
<li>[ ] CI job runs basic smoke tests under QEMU</li>
<li>[ ] Tagged release includes both <code>.tar.gz</code> and <code>.zip</code> archives for riscv64</li>
<li>[ ] Release artifacts include proper <code>sha256sum.txt</code> checksums</li>
<li>[ ] Binary stripping works correctly via Docker cross container</li>
<li>[ ] Shell completions and man pages are generated via QEMU emulation</li>
</ul>
Notes
<ul>
<li><strong>GNU only</strong>: This PR targets <code>riscv64gc-unknown-linux-gnu</code> (glibc-based). musl support can be added in a future PR if desired</li>
<li><strong>Cross-compilation</strong>: Uses the <code>cross</code> tool with QEMU for testing, consistent with other non-x86 targets</li>
<li><strong>No source changes</strong>: This is purely a CI/release/docs change with zero modifications to Rust code or features</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mariano-m13">@mariano-m13</a> on 2025-10-04 05:29</div>
            <div class="timeline-body"><p>Closing to fix commit author information. Will reopen shortly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/mariano-m13">@mariano-m13</a> on 2025-10-04 05:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-10-04 05:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:20 UTC
    </footer>
</body>
</html>
