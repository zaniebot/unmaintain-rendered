<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cargo: nuke 'simd-accel' from orbit - BurntSushi/ripgrep #2749</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>cargo: nuke 'simd-accel' from orbit</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/2749">#2749</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2024-03-07 14:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a></div>
            <div class="timeline-body"><p>This feature causes nothing but problems and is frequently broken. The
only optimization it was enabling were SIMD optimizations for
transcoding. In particular, for UTF-16 transcoding. This is performed by
the <a href="https://github.com/hsivonen/encoding_rs"><code>encoding_rs</code></a> crate,
which specifically uses unstable portable SIMD APIs instead of the
stable non-portable SIMD APIs.</p>
<p>SIMD optimizations that apply to search have long been making use of
stable APIs, and are automatically enabled when your target supports
them. This is, IMO, the correct user experience and one that
<code>encoding_rs</code> refuses to support. I'm done dealing with it, so
transcoding will only use scalar code until the SIMD optimizations in
<code>encoding_rs</code> work on stable. (This doesn't mean that <code>encoding_rs</code> has
to change. This could also be fixed by stabilizing <code>std::simd</code>.)</p>
<p>Fixes #2748</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @BurntSushi on 2024-03-07 14:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2024-03-07 14:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-03-07 14:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:44:14 UTC
    </footer>
</body>
</html>
