<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get help for a single flag - BurntSushi/ripgrep #2713</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Get help for a single flag</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/2713">#2713</a>
        opened by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a>
        on 2024-01-13 20:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ltrzesniewski">@ltrzesniewski</a></div>
            <div class="timeline-body"><p>This is a little QoL feature I wanted to have for some time.</p>
<p>ripgrep&#x27;s <code>--help</code> output is long, <em>really</em> long. It&#x27;s inconvenient to look for a flag docs in that huge blob of text. This PR adds a feature which lets you output the verbose help of a single flag.</p>
<p>We may discuss about the details, but I had to make a few choices, and I hope the behavior I ended up with is fine. I&#x27;ll be happy to improve it though if needed.</p>
<p>Specifically, now you can use <code>-h</code> or <code>--help</code> along with a <em>single</em> other argument, such as <code>E</code>, <code>-E</code>, <code>encoding</code>, <code>--encoding</code>, <code>no-encoding</code>, <code>--no-encoding</code>, you get the idea. Any two combinations in these two sets will get you the same result: <code>E -h</code> is the same as <code>--help --encoding</code>. Note that <code>-h</code> still gets you the <em>verbose</em> help of the flag, as it didn&#x27;t seem useful to me to output the short help of a single flag.</p>
<p>The idea is that I can start with:</p>
<pre><code>$ rg -h
</code></pre>
<p>Read the short help, then press the up key and just add a <code>p</code> (for instance) to the previous line:</p>
<pre><code>$ rg -h p
</code></pre>
<p>Which outputs:</p>
<pre><code>ripgrep 14.1.0 (rev 648a65f197)
Andrew Gallant &lt;jamslam@gmail.com&gt;

-p, --pretty
    This is a convenience alias for --color=always --heading --line-number.
    This flag is useful when you still want pretty output even if you&#x27;re
    piping ripgrep to another program or file. For example: rg -p foo |
    less -R.
</code></pre>
<p>Also note that currently, if you add a non-existing flag name to <code>-h</code>/<code>--help</code>, it will behave as before and print the whole help. Would you rather have it print an error message instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-01-14 13:11</div>
            <div class="timeline-body"><p>I could have sworn someone proposed this before (and not too long ago), but the main problem this general idea is that it changes how <code>-h/--help</code> works in ways that I think are sub-optimal. In particular, I very specifically make ripgrep behave such that if there is a <code>-h</code> or a <code>--help</code> <em>anywhere</em>, then it stops everything it&#x27;s doing and dumps the help output. That help output should be very easy to provoke, and showing only a subset of output because <code>--help</code> was placed before a flag would be pretty confusing IMO. And in particular, I&#x27;m not aware of others tools doing the same thing. This means that I don&#x27;t believe its conventional. (And ripgrep is kind of already pushing the boundary of conventions here by showing different output for <code>-h</code> and <code>--help</code>.)</p>
<blockquote>
<p>ripgrep&#x27;s <code>--help</code> output is long, <em>really</em> long. It&#x27;s inconvenient to look for a flag docs in that huge blob of text.</p>
</blockquote>
<p>I acknowledge that this is a problem. But I haven&#x27;t seen any exploration of alternatives. For example, I open <code>rg --help</code> in a pager, e.g., <code>rg --help | less</code>. And whether in that mode or in <code>man rg</code>, I use the pager&#x27;s search functionality to find the flag I&#x27;m looking for. From your description of the workflow enabled by this PR, it doesn&#x27;t seem all that different? And the benefit of my workflow is that it composes better with existing tools that folks using ripgrep are likely to know how to use (a pager).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a> on 2024-01-14 13:33</div>
            <div class="timeline-body"><p>This still stops everything else when you add <code>-h</code> or <code>--help</code> anywhere. This changes the behavior only when there are exactly 2 arguments, but yes, after implementing this I realized the convention breaking aspect could be a problem, and I understand this is probably a bad idea in the end.</p>
<p>What would you say about accepting an optional value for <code>-h</code>/<code>--help</code>? This would make <code>rg -h p</code> or <code>rg -h=p</code> print the help for <code>pretty</code>, but <code>rg -h -p</code> would continue to print the full help. This way, it wouldn&#x27;t change the meaning of other flags when <code>-h</code>/<code>--help</code> is specified, so it would remain conventional behavior.</p>
<p>I know I can use a pager, but in my opinion, that&#x27;s not very convenient. The workflow from this PR gets you to the text you want faster.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-01-14 13:44</div>
            <div class="timeline-body"><p>That doesn&#x27;t really work either. Consider <code>rg foo</code> and then you rewrite it as <code>rg -h foo</code>. Since <code>foo</code> is invalid, I feel like the ideal behavior would be to report <code>foo</code> as invalid. But that changes the existing behavior (which I legitimately use today) where it just shows you the full help output. So... for an invalid flag, you could just show the full help output (with maybe a warning at the top? but it seems easy to miss), but that seems like a little bit of a bummer. And then of course, if you are searching for <code>rg ignore-case</code> and then do <code>rg -h ignore-case</code>, there really is no choice other than to show the help output only for the <code>--ignore-case</code> flag.</p>
<blockquote>
<p>I know I can use a pager, but in my opinion, that&#x27;s not very convenient. The workflow from this PR gets you to the text you want faster.</p>
</blockquote>
<p>I think the exact opposite personally...</p>
<p>I&#x27;m not sure I&#x27;m going to budge on changing the behavior of <code>-h/--help</code>. One thing I am maybe more open to is another flag that does what you want here. But that might negatively impact your workflow enough as to not be worth it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a> on 2024-01-14 13:57</div>
            <div class="timeline-body"><p>Why would you rewrite <code>rg foo</code> to <code>rg -h foo</code> instead of <code>rg foo -h</code> by just appending the <code>-h</code> to the existing command? And do you think many other people would add a <code>-h</code> flag in the middle?</p>
<p>I suppose a warning at the bottom could be added (since you wouldn&#x27;t see it at the top), but I&#x27;d say that getting the full help text already tells you that the value is not valid, even if there&#x27;s no warning.</p>
<p>I&#x27;m not sure that adding another flag to the already long list would be a good idea, especially since <code>-H</code> is already assigned. The goal here is to reduce typing after all.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-01-14 14:14</div>
            <div class="timeline-body"><blockquote>
<p>Why would you rewrite <code>rg foo</code> to <code>rg -h foo</code> instead of <code>rg foo -h</code> by just appending the <code>-h</code> to the existing command? And do you think many other people would add a <code>-h</code> flag in the middle?</p>
</blockquote>
<p>Because I might be trying to add a flag between <code>rg</code> and <code>foo</code> and realize that I&#x27;ve forgotten the name or the semantics or whatever. So I just still a <code>-h</code> in there. The point is that I can put it <em>anywhere</em>. This really was an intentional design on my part.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a> on 2024-01-14 14:24</div>
            <div class="timeline-body"><p>Ok, I understand. Let me know if you change your mind or if you get a better idea, I&#x27;ll be happy to implement it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a> on 2024-01-14 14:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gcflymoto">@gcflymoto</a> on 2024-01-14 15:06</div>
            <div class="timeline-body"><p>How about <code>rg --describe -p --encoding</code> ?? I.e., whatever options are given describe all of them. This is a poor man&#x27;s version of asking ChatGPT to explain what a particular ripgrep command line performs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-01-14 15:40</div>
            <div class="timeline-body"><p>That&#x27;s roughly what I meant above with a new flag. But it isn&#x27;t really compatible with the workflow described I think. The idea is that you go from <code>-h</code> to <code>--help flag</code>. Although I guess even then you need to type out another flag name anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a> on 2024-01-14 16:37</div>
            <div class="timeline-body"><p>Yes, this PR only printed the help for a single flag because it handled the special case of 2 command-line arguments, but printing the help of several flags in a single command wouldn&#x27;t be a problem to implement.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a> on 2025-07-29 17:35</div>
            <div class="timeline-body"><p>@BurntSushi since you&#x27;re preparing a new release, I thought again about this PR, and had an idea:</p>
<p>What would you think about <em>having</em> to use the <code>=</code> separator on the <code>-h</code> flag in order to get help about a single flag? e.g. <code>rg -h=p</code> would output help about the <code>-p</code> flag only, while <code>rg -h p</code> would continue to work like today.</p>
<p>I realize this would still be unconventional, but it wouldn&#x27;t introduce a new flag, and it wouldn&#x27;t break the existing behavior. I also now believe the initial proposal wasn&#x27;t very good, but this new idea seems much more reliable, as you wouldn&#x27;t type <code>-h=</code> unintentionally.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-07-29 17:43</div>
            <div class="timeline-body"><p>As a purely practical matter, <code>lexopt</code> (the crate ripgrep uses for CLI arg parsing) doesn&#x27;t seem to let you differentiate between <code>-hp</code> and <code>-h=p</code>. i.e., <code>lexopt</code> abstracts over whether the <code>=</code> is present or not. With that said, I don&#x27;t think that&#x27;s a deal breaker. Having <code>-hp</code> work differently from today is probably a change I could live with.</p>
<p>With that said, I&#x27;m still not overly keen on adding this as a feature to support at all. I really just think folks should pipe the output into a pager or use <code>man rg</code>, and then use the pager&#x27;s search feature to get to where you want. Alternatively, if you <em>really</em> want this workflow, I think the <code>--help</code> and <code>-h</code> output is structured enough that you could write a pretty simple wrapper script to parse what you want and print that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a> on 2025-07-29 18:15</div>
            <div class="timeline-body"><p>Just so you know, I was suggesting this feature from the viewpoint of a Windows user, where there&#x27;s no good built-in pager for instance, so this would&#x27;ve been more useful than on Linux.</p>
<p>But I understand if you&#x27;d rather not have this, especially if there would have been issues with <code>lexopt</code>. Thanks for having considered it.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:19 UTC
    </footer>
</body>
</html>
