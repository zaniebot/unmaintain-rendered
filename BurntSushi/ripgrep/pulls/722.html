<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wincolor: migrate to winapi 0.3 - BurntSushi/ripgrep #722</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>wincolor: migrate to winapi 0.3</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/722">#722</a>
        opened by <a href="https://github.com/steffengy">@steffengy</a>
        on 2017-12-29 22:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/steffengy">@steffengy</a></div>
            <div class="timeline-body"><p><em>No description provided.</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-12-30 13:50</div>
            <div class="timeline-body"><p>@steffengy Thanks for doing this! Some of the extra dependencies that have been added because of this are concerning to me. Why do we now depend on fuschia stuff and the <code>glob</code> crate for example?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/steffengy">@steffengy</a> on 2017-12-30 13:58</div>
            <div class="timeline-body"><p><code>glob</code> is a dev-dependency of <code>globset</code>.
The fuchsia stuff seems to be pulled in through <code>rand &lt;- tempdir &lt;- globset</code>,
which is weird, since <code>target_os</code> shouldn't be fuchsia.</p>
<p>I honestly just did a <code>cargo build</code> after changing the winapi stuff in <code>cargo.toml</code>,</p>
<p>I'll try a <code>cargo build --release</code> and check if that reduces the pulled-in dependencies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/steffengy">@steffengy</a> on 2017-12-30 14:03</div>
            <div class="timeline-body"><p>@BurntSushi
I get the same <code>Cargo.lock</code> after reverting <code>Cargo.lock</code> and just doing a <code>cargo build --release</code>.
Not sure what's going on there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-12-30 14:09</div>
            <div class="timeline-body"><p>@steffengy Strange. I'll take a look.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-12-30 21:02</div>
            <div class="timeline-body"><p>Thanks for doing this! I've rolled this PR into #724.</p>
<p>I don't know why <code>Cargo.lock</code> was getting updated on a <code>cargo build</code>, but it happened for me too. I took that opportunity to update lots of other dependencies as well, which I just combined into one big PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2017-12-30 21:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pravic">@pravic</a> on 2018-01-17 14:35</div>
            <div class="timeline-body"><p>@BurntSushi It would be nice to publish a version with winapi 0.3, since now it looks like a mess when some crates import 0.2 while others have migrated to 0.3.</p>
<p>And I was very confused that <a href="https://crates.io/crates/wincolor/0.1.4">wincolor 0.1.4</a> requires winapi 0.2 (according to crates.io) while the version <a href="https://github.com/BurntSushi/ripgrep/blob/master/wincolor/Cargo.toml">in repository</a> (which is also <em>0.1.4</em>) clearly uses winapi 0.3.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-01-17 15:07</div>
            <div class="timeline-body"><blockquote>
<p>It would be nice to publish a version with winapi 0.3, since now it looks like a mess when some crates import 0.2 while others have migrated to 0.3.</p>
</blockquote>
<p>I'll do it when I can.</p>
<blockquote>
<p>And I was very confused that wincolor 0.1.4 requires winapi 0.2 (according to crates.io) while the version in repository (which is also 0.1.4) clearly uses winapi 0.3.</p>
</blockquote>
<p>Versions don't get bumped until they get released. You should be <a href="https://github.com/BurntSushi/ripgrep/tree/wincolor-0.1.4">looking at tags instead</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pravic">@pravic</a> on 2018-01-17 15:09</div>
            <div class="timeline-body"><p>I see. Thanks.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 18:27:56 UTC
    </footer>
</body>
</html>
