<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>migrate to regex 1.9 - BurntSushi/ripgrep #2549</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>migrate to regex 1.9</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/2549">#2549</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2023-07-05 15:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a></div>
            <div class="timeline-body"><p>This includes slimming down the <code>grep-regex</code> crate substantially now that <code>regex-automata 0.3</code> is available. This also includes rewriting the inner literal extractor. The new extractor can now pluck literals out of more complex regexes such as <code>\s+(Sherlock|[A-Z]atso[a-z]|Moriarty)\s+</code>. The current version of ripgrep doesn&#x27;t do any literal optimizations for that regex in particular.</p>
<p>Interestingly, this PR actually marks the end of ripgrep depending on <code>regex</code> directly for its primary search work load. It now depends on <code>regex-automata</code> directly, which exposes a more expressive API. For example, it lets one build regexes directly from <code>Hir</code>, which is quite useful in ripgrep&#x27;s case because of the transformations it does on <code>Hir</code>. Previously, we had to roundtrip <code>Hir</code> back to the concrete syntax in order to turn it into a <code>regex::Regex</code>, since the <code>regex</code> crate very intentionally has no public dependency on <code>regex-syntax</code>. But <code>regex-automata</code>, as a more internal library that can evolve more rapidly, does have a public dependency on <code>regex-syntax</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-07-05 18:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-07-05 18:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-07-05 18:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:19 UTC
    </footer>
</body>
</html>
