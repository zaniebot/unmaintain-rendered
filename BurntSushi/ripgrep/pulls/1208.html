<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>add option to disable bom sniffing - BurntSushi/ripgrep #1208</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>add option to disable bom sniffing</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/1208">#1208</a>
        opened by <a href="https://github.com/LesnyRumcajs">@LesnyRumcajs</a>
        on 2019-03-04 16:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/LesnyRumcajs">@LesnyRumcajs</a></div>
            <div class="timeline-body"><p>https://github.com/BurntSushi/ripgrep/issues/1207</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-04-06 13:34</div>
            <div class="timeline-body"><p>@LesnyRumcajs Thanks so much for this! I ended up re-working this PR a bit and re-submitted it: #1237. I think I might have no explained the right path to take very well. In particular, a problem here is that <code>EncodingMode</code> was added to the public API of the <code>grep-searcher</code> crate <em>and</em> a breaking change was introduced by changing the method signature of the <code>SearcherBuilder::encoding</code> builder. What I had intended was for <code>EncodingMode</code> to be an internal detail used in ripgrep's core <code>src/args.rs</code>. That's what I meant by &quot;forwarding&quot; the <code>bom_sniffing</code> option that you added to <code>encoding_rs_io</code> up through <code>grep-searcher::SearcherBuilder</code>.</p>
<p>More subtle than that was that when BOM sniffing was disabled, the BOM was still being stripped, and I don't think that's correct since the point of this is to get at the raw bytes directly, even if there's a BOM and including the BOM. This led to uncovering another subtle but in <code>encoding_rs_io</code>, which I fixed in <a href="https://github.com/BurntSushi/encoding_rs_io/commit/4146e3d96a131944fe0e8576e71ad8c951472b11">this commit</a>.</p>
<p>Thanks again for your work on this. Mostly everything you wrote I kept; it just needed to be shuffled around a bit. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2019-04-06 14:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 18:28:07 UTC
    </footer>
</body>
</html>
