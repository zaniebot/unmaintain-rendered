<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>printer: fix duplicative replacement in multiline mode - BurntSushi/ripgrep #2209</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>printer: fix duplicative replacement in multiline mode</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/2209">#2209</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2022-05-11 18:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a></div>
            <div class="timeline-body"><p>This furthers our kludge of dealing with PCRE2&#x27;s look-around in the
printer. Because of our bad abstraction boundaries, we added a kludge to
deal with PCRE2 look-around by extending the bytes we search by a fixed
amount to hopefully permit any look-around to operate. But because of
that kludge, we wind up over extending ourselves in some cases and
dragging along those extra bytes.</p>
<p>We had fixed this for simple searching by simply rejecting any matches
past the end point. But we didn&#x27;t do the same for replacements. So this
commit extends our kludge to replacements.</p>
<p>Thanks to @sonohgong for diagnosing the problem and proposing a fix. I
mostly went with their solution, but adding the new replacement routine
as an internal helper rather than a new APIn in the &#x27;grep-matcher&#x27;
crate.</p>
<p>Fixes #2095, Fixes #2208</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-05-11 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-05-11 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2022-05-11 18:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch restored on 2022-06-10 18:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:19 UTC
    </footer>
</body>
</html>
