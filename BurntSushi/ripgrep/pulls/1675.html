<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simplify release workflow - BurntSushi/ripgrep #1675</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Simplify release workflow</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/1675">#1675</a>
        opened by <a href="https://github.com/murlakatamenka">@murlakatamenka</a>
        on 2020-09-02 10:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/murlakatamenka">@murlakatamenka</a></div>
            <div class="timeline-body"><p>Remove unnecessary steps in the current release workflow to make it simpler and less hacky.</p>
<p>Good reference:</p>
<ul>
<li>https://eugene-babichenko.github.io/blog/2020/05/09/github-actions-cross-platform-auto-releases/</li>
</ul>
<p><a href="https://github.com/murlakatamenka/ripgrep/actions/runs/235810016">Runs successfully</a> across all the platforms.</p>
<hr />
<p>Also relevant thing that I learned alongside:</p>
<blockquote>
<p><code>::set-env name={name}::{value}</code></p>
<p>The action that creates or updates the environment variable does not have access to the new value, but all subsequent actions in a job will have access.</p>
</blockquote>
<p><a href="https://docs.github.com/en/actions/reference/workflow-commands-for-github-actions#setting-an-environment-variable">source</a></p>
<p>Isn't intuitive to me.</p>
<hr />
<p>Workflow file can be additionally formatted for better indentation, I didn't do it to make reviewing easier.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>.github/workflows/release.yml</code>:38 on 2020-09-13 14:36</div>
            <div class="timeline-body"><p>Can you say why this works?</p>
<p>Oh, I see, you moved the logic down below.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2020-09-13 14:38</div>
            <div class="timeline-body"><p>I think this LGTM. I'll merge and tweak this is a bit once I'm ready to do the next release. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/murlakatamenka">@murlakatamenka</a> reviewed on 2020-09-14 14:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/murlakatamenka">@murlakatamenka</a> on <code>.github/workflows/release.yml</code>:38 on 2020-09-14 14:07</div>
            <div class="timeline-body"><p>It's right from the examples of <a href="https://www.github.com/actions/create-release"><code>@actions/create-release</code></a> and <a href="https://www.github.com/actions/upload-release-asset"><code>@actions/upload-release-asset</code></a>. They're smart enough to strip the unnecessary part and leave only tag name. Cannot find the resource where it was mentioned, but it works as we can see :man_shrugging:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2021-06-01 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/murlakatamenka">@murlakatamenka</a> on 2021-06-01 07:32</div>
            <div class="timeline-body"><p>Good to have CI / CD improved since it often serves as a reference. I've seen</p>
<blockquote>
<p>Apparently, this is the right way to get a tag name. Really?</p>
</blockquote>
<p>in many other Rust projects üòÑ</p>
<p>Thanks for the good work, as always üëç</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 18:28:14 UTC
    </footer>
</body>
</html>
