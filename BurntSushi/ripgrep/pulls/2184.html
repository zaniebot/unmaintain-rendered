<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fully optimize cargo release builds and add debuggable release profile - BurntSushi/ripgrep #2184</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fully optimize cargo release builds and add debuggable release profile</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/pull/2184">#2184</a>
        opened by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a>
        on 2022-04-17 17:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/SUPERCILEX">@SUPERCILEX</a></div>
            <div class="timeline-body"><p>See <a href="https://github.com/BurntSushi/ripgrep/issues/595">BurntSushi/ripgrep#595</a>#issuecomment-1100180996</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a> on 2022-04-17 17:48</div>
            <div class="timeline-body"><p>Ah, looks like the tests are using rust 1.52 but this needs 1.57: <a href="https://github.com/rust-lang/cargo/pull/9943">rust-lang/cargo#9943</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a> on 2022-06-20 19:27</div>
            <div class="timeline-body"><p>@BurntSushi is there any interest in this? I&#x27;m wondering if it&#x27;s worth bumping the MSRV.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-06-20 19:31</div>
            <div class="timeline-body"><p>I&#x27;m totally fine to bump the MSRV, up to and including the latest Rust stable release.</p>
<p>In general, I don&#x27;t really look at PRs like this unfortunately until I actually do a ripgrep release. At which point, I&#x27;ll decide whether to bring it in by actually trying it out and playing around with it. If changes need to be made, I&#x27;ll just do them by squashing them into your commit. If I didn&#x27;t do that, then I&#x27;d be context switching all of the time and would get nothing done. Since I became a Dad, my release cycles have become longer.</p>
<p>So this PR might sit for some time. But I might be interested. Hard to say without actually giving it a whirl and seeing what it&#x27;s actually like.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a> on 2022-06-20 19:59</div>
            <div class="timeline-body"><p>Ok, sounds good! I bumped the MSRV so this should be ready to merge if you decide you like it.</p>
<p>BTW, dunno if people have mentioned this before, but a big reason for supporting cargo installation is that you can use <code>rustflags = [&quot;-C&quot;, &quot;target-cpu=native&quot;]</code> which will presumably get you slightly higher performance.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-06-20 23:47</div>
            <div class="timeline-body"><blockquote>
<p>BTW, dunno if people have mentioned this before, but a big reason for supporting cargo installation is that you can use <code>rustflags = [&quot;-C&quot;, &quot;target-cpu=native&quot;]</code> which will presumably get you slightly higher performance.</p>
</blockquote>
<p>Yeah I&#x27;m aware of that. I personally think <code>cargo install</code> is just more about convenience. Setting <code>target-cpu=native</code> is likely to help a little bit in certain workloads, but ripgrep already uses SIMD in its hot paths even when <code>target-cpu</code> is not set at all. I don&#x27;t even bother compiling with <code>target-cpu=native</code> when benchmarking ripgrep. (Partially because I&#x27;ve never really seen it make much of a difference and partially because it&#x27;s an uncommon build configuration.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a> on 2023-02-02 01:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:19 UTC
    </footer>
</body>
</html>
