<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIMD Feature Build Failing as of nightly-2020-09-15 (on x86_64) - BurntSushi/ripgrep #1684</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>SIMD Feature Build Failing as of nightly-2020-09-15 (on x86_64)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1684">#1684</a>
        opened by <a href="https://github.com/danieldjewell">@danieldjewell</a>
        on 2020-09-19 21:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/danieldjewell">@danieldjewell</a></div>
            <div class="timeline-body"><p>Opening issue here after tracking it upstream:</p>
<p>Build of ripgrep failing as of nightly-2020-09-15 because of a build failure in packed_simd: <a href="https://github.com/rust-lang/packed_simd/issues/288">rust-lang/packed_simd#288</a></p>
<p>This, in turn, appears to have been caused by <a href="https://github.com/rust-lang/stdarch/pull/890">rust-lang/stdarch#890</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danieldjewell">@danieldjewell</a> on 2020-09-19 21:55</div>
            <div class="timeline-body"><p>Also see <a href="https://github.com/rust-lang/rust/pull/76295">rust-lang/rust#76295</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-09-19 22:34</div>
            <div class="timeline-body"><p>Thanks, but as you&#x27;ve helpfully linked, this isn&#x27;t really an issue with ripgrep and the <code>simd</code> feature is nightly only for exactly this reason.</p>
<p>In any case, I&#x27;d suggest not using the <code>simd</code> feature unless you know you need it. The only benefit you get is when searching UTF-16 files. (ripgrep uses lots of SIMD in other places, but decoding UTF-16 is maintained by others and refuses to use the non-portable but stable SIMD APIs.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-09-19 22:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wontfix</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-09-19 22:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danieldjewell">@danieldjewell</a> on 2020-09-19 22:42</div>
            <div class="timeline-body"><blockquote>
<p>In any case, I&#x27;d suggest not using the simd feature unless you know you need it. The only benefit you get is when searching UTF-16 files.</p>
</blockquote>
<p>This is great info! Thank you for the clarification.</p>
<p>Perhaps this would be good to add into the readme? Maybe somewhere in here: :grin:</p>
<p>https://github.com/BurntSushi/ripgrep/blob/f511849c818024817df9760ef5cd6709a5e28fe3/README.md#L369-L390</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-09-19 22:53</div>
            <div class="timeline-body"><p>It is already, right in the section you quoted:</p>
<blockquote>
<p>The simd-accel feature enables SIMD support in certain ripgrep dependencies (responsible for transcoding). They are not necessary to get SIMD optimizations for search; those are enabled automatically. Hopefully, some day, the simd-accel feature will similarly become unnecessary.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-09-19 22:53</div>
            <div class="timeline-body"><p>If you think it could be clearer, please submit a PR with a clarification. :)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:10 UTC
    </footer>
</body>
</html>
