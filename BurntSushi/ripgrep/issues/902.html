<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can't run ripgrep on temp files: &quot;No such file or directory&quot; - BurntSushi/ripgrep #902</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Can't run ripgrep on temp files: &quot;No such file or directory&quot;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/902">#902</a>
        opened by <a href="https://github.com/egoldshtrom">@egoldshtrom</a>
        on 2018-04-30 15:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/egoldshtrom">@egoldshtrom</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<pre><code>$ rg --version
ripgrep 0.8.1 (rev c8e9f25b85)
-SIMD -AVX
</code></pre>
<h4>What operating system are you using ripgrep on?</h4>
<p>Ubuntu 16.04</p>
<h4>Describe your question, feature request, or bug.</h4>
<p>When trying to run ripgrep on a file in <code>/tmp</code> I get the error: <code>No such file or directory (os error 2)</code></p>
<h4>If this is a bug, what are the steps to reproduce the behavior?</h4>
<ol>
<li>Create a file in <code>/tmp</code> with some content. I put the following into <code>/tmp/test_file</code>:</li>
</ol>
<pre><code>INFO example text
ERROR something bad
INFO example text2
</code></pre>
<ol start="2">
<li>Try to search for <code>ERROR</code> using ripgrep: <code>rg ERROR /tmp/test_file</code></li>
<li>You should get the output:</li>
</ol>
<pre><code>/tmp/test_file: No such file or directory (os error 2)
No files were searched, which means ripgrep probably applied a filter you didn't expect. Try running again with --debug.
</code></pre>
<h4>If this is a bug, what is the actual behavior?</h4>
<p>ripgrep works for me on other files:</p>
<pre><code>$ rg move config
57:# move focused window
58:bindsym $mod+Shift+h move left
...
</code></pre>
<p>I have permissions to the <code>/tmp</code> file:</p>
<pre><code>$ ls -la /tmp
drwxrwxrwt 15 root        root           139264 Apr 30 10:39 .
...
-rw-rw-r--  1 egoldshtrom egoldshtrom        57 Apr 30 10:32 test_file
...
</code></pre>
<p>I can grep the file or if I pipe the contents into ripgrep I can use ripgrep on it:</p>
<pre><code>$ grep ERROR /tmp/test_file
ERROR something bad

$ cat /tmp/test_file | rg ERROR
ERROR something bad
</code></pre>
<p>But if I try to use ripgrep directly on the file it fails:</p>
<pre><code>$ rg ERROR /tmp/test_file
/tmp/test_file: No such file or directory (os error 2)
No files were searched, which means ripgrep probably applied a filter you didn't expect. Try running again with --debug.

$ sudo rg ERROR /tmp/test_file
/tmp/test_file: No such file or directory (os error 2)
No files were searched, which means ripgrep probably applied a filter you didn't expect. Try running again with --debug.

$ rg ERROR /tmp/test_file --debug
DEBUG/grep::search/grep/src/search.rs:195: regex ast:
Literal {
    chars: [
        'E',
        'R',
        'R',
        'O',
        'R'
    ],
    casei: false
}
DEBUG/grep::literals/grep/src/literals.rs:38: literal prefixes detected: Literals { lits: [Complete(ERROR)], limit_size: 250, limit_class: 10 }
/tmp/test_file: No such file or directory (os error 2)
No files were searched, which means ripgrep probably applied a filter you didn't expect. Try running again with --debug.
</code></pre>
<h4>If this is a bug, what is the expected behavior?</h4>
<p>ripgrep should be able to find and search over files in <code>/tmp</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-30 15:53</div>
            <div class="timeline-body"><p>Did you install ripgreo with snap? If so, please see the README.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/egoldshtrom">@egoldshtrom</a> on 2018-04-30 16:08</div>
            <div class="timeline-body"><p>I did install with snap, based on the README. I don't see anything in the README that explains caveats with snap installs or anything like that.</p>
<p>I installed with <code>sudo snap install --classic rg</code> per the README.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-30 16:57</div>
            <div class="timeline-body"><p>Please try a binary release from Github.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/egoldshtrom">@egoldshtrom</a> on 2018-04-30 18:26</div>
            <div class="timeline-body"><p>It works now, with the <code>.deb</code> binary release.</p>
<p>I guess this means the <code>--classic</code> snap flag doesn't work as hoped? Is that something that can maybe be fixed or at least the README updated to warn snap users?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-04-30 19:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-30 19:27</div>
            <div class="timeline-body"><blockquote>
<p>Is that something that can maybe be fixed</p>
</blockquote>
<p>I don't maintain the snap package because I don't have the time. I've removed the snap installation instructions from the README.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mati865">@mati865</a> on 2018-07-13 10:52</div>
            <div class="timeline-body"><p><code>sudo snap install --classic rg</code> installs snap from <a href="https://github.com/tasdomas/ripgrep-snap">another repository</a> which uses <code>confinement: strict</code>, therefore it ignores <code>--classic</code> flag and you get broken package.</p>
<p>The right command to install it would be:</p>
<pre><code># Remove unofficial broken snap
sudo snap remove rg

sudo snap install --classic ripgrep
# Alias ripgrep.rg as rg
sudo snap alias ripgrep.rg rg
</code></pre>
<p>I tested it and that way it works without issues.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kenorb">@kenorb</a> on 2018-08-07 16:33</div>
            <div class="timeline-body"><p>Same issue when installed <code>ripgrep</code> via Apt (<code>sudo apt-get install ripgrep</code>):</p>
<pre><code>$ rg --version
ripgrep 0.8.1 (rev c8e9f25b85)
$ rg --debug foobar
...
DEBUG/grep::literals/grep/src/literals.rs:38: literal prefixes detected: Literals { lits: [Complete(foobar)], limit_size: 250, limit_class: 10 }
No such file or directory (os error 2)
No such file or directory (os error 2)
...
</code></pre>
<p>I guess the issue is fixed in the latest version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-08-07 16:38</div>
            <div class="timeline-body"><p>@kenorb How are you installing through <code>apt-get</code>? Are you sure the <code>rg</code> binary you're calling is the one installed via <code>apt-get</code>?</p>
<p>This is what happens when I try to install it on my updated Ubuntu 18.04 box:</p>
<pre><code>$ sudo apt-get install ripgrep
Reading package lists... Done
Building dependency tree
Reading state information... Done
E: Unable to locate package ripgrep
</code></pre>
<p>which is what I'd expect to happen.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kenorb">@kenorb</a> on 2018-08-07 17:01</div>
            <div class="timeline-body"><p>I believe so (this is Ubuntu on Windows 10):</p>
<pre><code>$ dpkg -S `which rg`
ripgrep: /usr/bin/rg
$ sudo apt install ripgrep
Reading package lists... Done
Building dependency tree
Reading state information... Done
ripgrep is already the newest version (0.8.1).
$ cat /etc/*-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=16.04
DISTRIB_CODENAME=xenial
$ apt list --installed | grep ripgrep
ripgrep/now 0.8.1 amd64 [installed,local]
$ apt-cache search ripgrep
ripgrep - Line oriented search tool using Rust's regex library. Combines the raw
$ apt show ripgrep | head -n20

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

Package: ripgrep
Version: 0.8.1
Status: install ok installed
Priority: optional
Maintainer: Andrew Gallant &lt;jamslam at gmail.com&gt;
Installed-Size: 37.5 MB
Homepage: https://github.com/BurntSushi/ripgrep
Vcs-Browser: https://github.com/BurntSushi/ripgrep
Vcs-Git: https://github.com/BurntSushi/ripgrep
Standards-Version: 3.9.4
Download-Size: unknown
APT-Manual-Installed: yes
APT-Sources: /var/lib/dpkg/status
Description: Line oriented search tool using Rust's regex library.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-08-07 17:05</div>
            <div class="timeline-body"><p>@kenorb Well, I don't know how that works then. My Ubuntu box can't install ripgrep, and as far as I know, ripgrep isn't available in Ubuntu's standard repository. I think you need to go find the maintainer of whatever package you installed and ask them about it. Maybe you added a ppa? I don't know.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mati865">@mati865</a> on 2018-08-07 17:11</div>
            <div class="timeline-body"><blockquote>
<p>I believe so (this is Ubuntu on Windows 10):</p>
</blockquote>
<p>It explains everything, WSL is still incomplete and only thing ripgrep could do to work there would be removing some of UNIX specific code. It would really hit the performance.</p>
<blockquote>
<p>$ apt list --installed | grep ripgrep
ripgrep/now 0.8.1 amd64 [installed,local]</p>
</blockquote>
<p>@BurntSushi it was deb package installed from GitHub.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alamkhan7">@alamkhan7</a> on 2018-11-10 10:01</div>
            <div class="timeline-body"><p>Same problem in Ubuntu 18.04</p>
<pre><code>$ sudo apt-get install ripgrep
Reading package lists... Done
Building dependency tree
Reading state information... Done
E: Unable to locate package ripgrep

</code></pre>
<p>Solution: Search within 'Y PPA MANAGER', then
$ sudo apt install ripgrep
install successfully.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:31 UTC
    </footer>
</body>
</html>
