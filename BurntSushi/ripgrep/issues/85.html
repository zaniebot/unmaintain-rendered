<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instructions for static builds on linux using master HEAD? - BurntSushi/ripgrep #85</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Instructions for static builds on linux using master HEAD?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/85">#85</a>
        opened by <a href="https://github.com/kaushalmodi">@kaushalmodi</a>
        on 2016-09-25 15:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kaushalmodi">@kaushalmodi</a></div>
            <div class="timeline-body"><p>Hello,</p>
<p>I don&#x27;t develop in rust. I installed the rust compiler just to build the latest rg binaries.</p>
<p>I followed this from the README.md:</p>
<pre><code>$ git clone https://github.com/BurntSushi/ripgrep
$ cd ripgrep
$ cargo build --release
$ ./target/release/rg --version
0.1.17
</code></pre>
<p>So the installed version shows 0.1.17 ..</p>
<p>Is that the 0.1.17 release or is it a build using the latest HEAD of master?</p>
<p>Is that <code>rg</code> binary something that I can easily copy and share with other people? Or is there something else I need to do to create something like <a href="https://github.com/BurntSushi/ripgrep/releases/download/0.1.16/ripgrep-0.1.16-x86_64-unknown-linux-musl.tar.gz">this that you have for version 0.1.16</a>?</p>
<p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-25 15:30</div>
            <div class="timeline-body"><p>It&#x27;s the latest HEAD on master. I guess it would be better to include a commit hash in that, but I&#x27;m not quite sure how.</p>
<p>Also note the binary you&#x27;ve built probably isn&#x27;t fully static. (Run <code>ldd</code> on it.) If you really want a full static build, with all the bells and whistles, you can use this:</p>
<pre><code>RUSTFLAGS=&quot;-C target-cpu=native&quot; rustup run nightly cargo build --target x86_64-unknown-linux-musl --release --features simd-accel
</code></pre>
<p>Note that this requires installing the <a href="https://rustup.rs/">rustup tool</a> (which will manage your Rust installations and targets), and adding the <code>x86_64-unknown-linux-musl</code> target:</p>
<pre><code>rustup target add x86_64-unknown-linux-musl
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kaushalmodi">@kaushalmodi</a> on 2016-09-25 15:36</div>
            <div class="timeline-body"><blockquote>
<p>It&#x27;s the latest HEAD on master.</p>
</blockquote>
<p>Thanks! I just realized that&#x27;s the case because <code>rg --help</code> worked with <code>rg</code> aliased to <code>rg --follow</code> :)</p>
<blockquote>
<p>I guess it would be better to include a commit hash in that, but I&#x27;m not quite sure how.</p>
</blockquote>
<p>That would be awesome! Or if the version showed something like <code>0.1.17dev</code>?</p>
<blockquote>
<p>(Run ldd on it.)</p>
</blockquote>
<p><code>ldd</code> shows the below</p>
<pre><code>kmÂ²~/downloads/:../ripgrep/target/release&gt; ldd ./rg                                        09/25 11:33am
        linux-vdso.so.1 =&gt;  (0x00007fffca9ff000)
        libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f1a201bf000)
        libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f1a1ffa2000)
        libgcc_s.so.1 =&gt; /cad/adi/apps/gnu/linux/x86_64/6/local/gcc/4.9.2/lib64/libgcc_s.so.1 (0x00007f1a1fd8c000)
        libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f1a1f9f7000)
        /lib64/ld-linux-x86-64.so.2 (0x00000033e2800000)
        libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f1a1f773000)
        librt.so.1 =&gt; /lib64/librt.so.1 (0x00007f1a1f56b000)
</code></pre>
<p>But as I am not a software developer, I have no idea how the <code>ldd</code> output would have looked between statically built binary and otherwise.</p>
<blockquote>
<p>Note that this requires installing the rustup tool</p>
</blockquote>
<p>Looks like I will have to pass on that for now. I am glad that I am able to build the latest binaries for now.</p>
<p>Thanks for the prompt replies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kaushalmodi">@kaushalmodi</a> on 2016-09-25 15:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-25 15:44</div>
            <div class="timeline-body"><p>@kaushalmodi Awesome. For reference, <code>ldd</code> looks like this on a fully static executable:</p>
<pre><code>$ curl -LO &#x27;https://github.com/BurntSushi/ripgrep/releases/download/0.1.16/ripgrep-0.1.16-x86_64-unknown-linux-musl.tar.gz&#x27;
$ tar xf ripgrep-0.1.16-x86_64-unknown-linux-musl.tar.gz
$ cd ripgrep-0.1.16-x86_64-unknown-linux-musl
$ ldd rg
        not a dynamic executable
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:00 UTC
    </footer>
</body>
</html>
