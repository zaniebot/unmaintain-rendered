<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>invalid issue - BurntSushi/ripgrep #185</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>invalid issue</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/185">#185</a>
        opened by <a href="https://github.com/lilianmoraru">@lilianmoraru</a>
        on 2016-10-17 14:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/lilianmoraru">@lilianmoraru</a></div>
            <div class="timeline-body"><p>I decided today to test the new <code>arm-unknown-linux-musleabihf</code> target on an ARM device with <code>ripgrep</code>.
The application works but it does not do <code>recursive</code> directory search.
My first guess would be that <code>musl</code> has a bug on ARM(<code>walkdir</code>), but I am not sure, so I open the issue here.</p>
<p>If I search in the folder where the file with the contents is, then it find it.
If I search in the parent folder, than it doesn&#x27;t find it.</p>
<p><code>rg --debug</code> doesn&#x27;t give much info(note that the <code>terminfo</code> error did not appear on another device, but the bug I report was still present):</p>
<pre><code>DEBUG:grep::search: regex ast:
Literal {
    chars: [
        &#x27;S&#x27;,
        &#x27;p&#x27;,
        &#x27;e&#x27;,
        &#x27;e&#x27;,
        &#x27;c&#x27;,
        &#x27;h&#x27;
    ],
    casei: false
}
DEBUG:grep::literals: literal prefixes detected: Literals { lits: [Complete(Speech)], limit_size: 250, limit_class: 10 }
DEBUG:rg::out: error loading terminfo for coloring: could not find a terminfo entry for this terminal
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-17 14:42</div>
            <div class="timeline-body"><p>@lilianmoraru I&#x27;m not able to test this, so unfortunately you&#x27;re on your own. ARM isn&#x27;t something I&#x27;m capable of supporting given the resources I have, but I&#x27;m willing to help in any way I can. In this case, I&#x27;d suggest trying to reproduce the bug against the <code>walkdir</code> crate if there is indeed a problem with something as simple as directory traversal.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-17 22:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lilianmoraru">@lilianmoraru</a> on 2016-10-19 08:24</div>
            <div class="timeline-body"><p>The <a href="https://github.com/BurntSushi/walkdir/blob/master/examples/walkdir.rs">walkdir example</a> works alright on the ARM device.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-22 00:28</div>
            <div class="timeline-body"><p>I don&#x27;t think I read this issue closely enough before.</p>
<p>Could you please come up with a concrete and reproducible example? That way, we can test it on multiple platforms and rule out platform specific bugs. Maybe this is some other bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lilianmoraru">@lilianmoraru</a> on 2016-10-22 11:08</div>
            <div class="timeline-body"><p>This is not reproducible on PC/x86_64.
I had on the ARM device a systemd service that was starting a binary that contained in the name &quot;Speech&quot;.
If I would go directly in <code>/lib/systemd/system/</code> where the file is, and run <code>rg &quot;Speech&quot;</code> it would find it.
If I would then go into <code>/lib/systemd</code> or <code>/lib</code> and run <code>rg &quot;Speech&quot;</code> it would instantly finish without returning anything.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-22 11:57</div>
            <div class="timeline-body"><p>Could you please try to come up with an example that uses mkdir, echo and cat in a fresh directory? As it stands right now, I have no idea how to reproduce your problem.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lilianmoraru">@lilianmoraru</a> on 2016-10-22 15:36</div>
            <div class="timeline-body"><p>I&#x27;ll do better. I&#x27;ll record an <code>asciinema</code>.
But this will be on Monday, when I get back to work...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-22 15:47</div>
            <div class="timeline-body"><p>Thanks, but I don&#x27;t think a recording is necessary. What I&#x27;d like is a precise sequence of commands that I (or anyone else) can run to reproduce your problem. This means either creating the corpus yourself manually (which is ideal, since it will be small and easy to analyze) or using an existing corpus that we can both access easily (for example, a repository on Github). Your system&#x27;s <code>systemd</code> directory wouldn&#x27;t fall into that category, because it&#x27;s setup by your system&#x27;s package manager and isn&#x27;t something I can easily reproduce.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lilianmoraru">@lilianmoraru</a> on 2016-10-22 16:14</div>
            <div class="timeline-body"><p><code>mkdir -p test/1/2/ &amp;&amp; echo &quot;text&quot; &gt; test/1/2/file.txt &amp;&amp; rg &quot;text&quot;</code> - should do it, but I have to test at work to confirm this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-22 19:06</div>
            <div class="timeline-body"><p>@lilianmoraru Thanks. Please also include the output of running <code>strace rg &quot;text&quot;</code>. Thanks. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;ripgrep does not search recursively on ARM target with musleabihf std&quot; to &quot;ripgrep does not follow symbolic links on ARM target with musleabihf std&quot; by <a href="https://github.com/lilianmoraru">@lilianmoraru</a> on 2016-11-14 18:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;ripgrep does not follow symbolic links on ARM target with musleabihf std&quot; to &quot;invalid issue&quot; by <a href="https://github.com/lilianmoraru">@lilianmoraru</a> on 2016-11-14 18:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lilianmoraru">@lilianmoraru</a> on 2016-11-14 18:15</div>
            <div class="timeline-body"><p>Ok, now it is clear why it was not working.
I was searching in <code>/lib/systemd</code> - on PC this folder has other folders and files but on that ARM device, it has only 1 symbolic link(which I was not aware at the time - didn&#x27;t check).
I tried <code>rg -L</code>(also didn&#x27;t know that you need to pass that flag but after identifying the issue and playing on PC with symbolic links, I realized that it had nothing to do with ARM specifically) and it worked alright.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/lilianmoraru">@lilianmoraru</a> on 2016-11-14 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-14 18:21</div>
            <div class="timeline-body"><p>Yay!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-14 19:17</div>
            <div class="timeline-body"><p>@lilianmoraru Thank you so much for following up on this by the way. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lilianmoraru">@lilianmoraru</a> on 2016-11-14 20:47</div>
            <div class="timeline-body"><p>@BurntSushi Yes, sorry it took so long.
I moved to a new project and was very busy for a while...</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:02 UTC
    </footer>
</body>
</html>
