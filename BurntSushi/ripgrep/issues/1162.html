<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ignore crate: Support sorting files by newest/oldest - BurntSushi/ripgrep #1162</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ignore crate: Support sorting files by newest/oldest</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1162">#1162</a>
        opened by <a href="https://github.com/ebkalderon">@ebkalderon</a>
        on 2019-01-14 13:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ebkalderon">@ebkalderon</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p><code>ignore-0.4.4</code></p>
<h4>How did you install ripgrep?</h4>
<p>Installed <code>ignore</code> via crates.io.</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>Arch Linux (4.20.1.arch1-1), macOS 10.14.2</p>
<h4>Describe your question, feature request, or bug.</h4>
<p>Would it be reasonable to add to <code>WalkBuilder</code> a method which allows files to be sorted by their last modified time? This method could be called <code>sort_by_mtime()</code>, or something similar, in the same vein of the other existing <code>sort_by</code> methods. This would be quite handy for attempting to identify the newest or oldest files in a directory, among other things.</p>
<p>Since both <a href="https://doc.rust-lang.org/std/path/struct.PathBuf.html#method.metadata"><code>Path::metadata()</code></a> and <a href="https://doc.rust-lang.org/std/path/struct.PathBuf.html#method.symlink_metadata"><code>Path::symlink_metadata()</code></a> both return a <code>Result</code>, I imagine that this method would accept a closure like:</p>
<pre><code class="language-rust">Fn(&amp;io::Result&lt;SystemTime&gt;, &amp;io::Result&lt;SystemTime&gt;) -&gt; Ordering + Send + Sync + 'static
</code></pre>
<p>It is worth noting that this method is quite different from the existing <code>sort_by</code> methods in that the values being compared are <code>Result</code> which adds a bit of complexity to the API (what <code>Ordering</code> should the closure return if one of the arguments is <code>Err</code>?), and I'm not sure what can be done about that. In my own specific use case, the user is guaranteed to have permissions to all the files being sorted, but obviously that is not the case for everyone.</p>
<p>If anyone has suggestions on how to move forward from here, it would be appreciated. I am also willing to prepare a PR for this, if you would like.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-01-14 13:28</div>
            <div class="timeline-body"><p>You can already do this today. See how ripgrep does it, for example, <a href="https://github.com/BurntSushi/ripgrep/blob/dd396ff34e36fbd5aff9487745842410686e578c/src/args.rs#L434-L460">here</a> and <a href="https://github.com/BurntSushi/ripgrep/blob/dd396ff34e36fbd5aff9487745842410686e578c/src/args.rs#L1582-L1608">here</a>.</p>
<p>I'm not sure what the ideal API looks like, but I'd prefer not to add new <code>sort_by</code> methods for each possible time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2019-01-14 13:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ebkalderon">@ebkalderon</a> on 2019-01-15 04:46</div>
            <div class="timeline-body"><p>Interesting! Thanks for the helpful links. I think I'll pursue an approach similar to how <code>ripgrep</code> does it with <code>sort_by_path()</code> and an external comparator.</p>
<p>Fair enough. I figured it might be too much of a stretch to incorporate as a dedicated <code>sort_by</code> method, but I'm glad to see the operation can still be done without it. Thanks for the help!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ebkalderon on 2019-01-15 04:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:48 UTC
    </footer>
</body>
</html>
