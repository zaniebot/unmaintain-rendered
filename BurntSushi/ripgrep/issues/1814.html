<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>group command line args into affected processing steps - BurntSushi/ripgrep #1814</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>group command line args into affected processing steps</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1814">#1814</a>
        opened by <a href="https://github.com/keithgabryelski">@keithgabryelski</a>
        on 2021-03-07 20:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/keithgabryelski">@keithgabryelski</a></div>
            <div class="timeline-body"><p>I suggest rg --help (and possibly the man page) group output of command line args.
I think sorted alphabetically is great as a default... but an option to see args for
only a certain processing setup (like those affecting input files searched or
those affecting the output format) would help ME narrow down where to look
for the command line arg I know exists but have just forgotten its name/mnemonic</p>
<p>here is MY suggestion (and, yes, I think only the names/mneumonics are needed
for sections like this -- the full description can be looked up in the alphabetical list).</p>
<pre><code>OUTPUT FORMAT
    -0, --null                              
    -A, --after-context &lt;NUM&gt;               
    -B, --before-context &lt;NUM&gt;              
    -C, --context &lt;NUM&gt;                     
    -H, --with-filename                     
    -I, --no-filename                       
    -N, --no-line-number                    
    -b, --byte-offset                       
    -c, --count                             
    -l, --files-with-matches                
    -m, --max-count &lt;NUM&gt;                   
    -n, --line-number                       
    -o, --only-matching                     
    -r, --replace &lt;REPLACEMENT_TEXT&gt;        
        --color &lt;WHEN&gt;                      
        --colors &lt;COLOR_SPEC&gt;...            
        --column                            
        --context-separator &lt;SEPARATOR&gt;     
        --count-matches                     
        --files                             
        --heading                           
        --json                              
        --max-columns-preview               
        --no-heading                        
        --no-messages                       
        --null-data                         
        --passthru                          
        --sort &lt;SORTBY&gt;                     
        --sortr &lt;SORTBY&gt;                    
        --stats                             
        --trim                              
        --vimgrep                           

INPUT FILE SEARCHING
    -F, --fixed-strings                     
    -M, --max-columns &lt;NUM&gt;                 
    -P, --pcre2                             
    -S, --smart-case                        
    -U, --multiline                         
    -a, --text                              
    -e, --regexp &lt;PATTERN&gt;...               
    -i, --ignore-case                       
    -p, --pretty                            
    -q, --quiet                             
    -s, --case-sensitive                    
    -v, --invert-match                      
    -x, --line-regexp                       
    -z, --search-zip
        --binary                            
        --multiline-dotall                  
        --no-pcre2-unicode                  
        --no-unicode                        
        --pre &lt;COMMAND&gt;                     
        --pre-glob &lt;GLOB&gt;...                

INPUT FILES
    -L, --follow                            
    -T, --type-not &lt;TYPE&gt;...                
    -f, --file &lt;PATTERNFILE&gt;...             
    -g, --glob &lt;GLOB&gt;...                    
    -t, --type &lt;TYPE&gt;...                    
    -u, --unrestricted                      
    -w, --word-regexp                       
        --glob-case-insensitive             
        --hidden                            
        --iglob &lt;GLOB&gt;...                   
        --ignore-file &lt;PATH&gt;...             
        --ignore-file-case-insensitive      
        --max-depth &lt;NUM&gt;                   
        --max-filesize &lt;NUM+SUFFIX?&gt;        
        --no-ignore                         
        --no-ignore-dot                     
        --no-ignore-exclude                 
        --no-ignore-files                   
        --no-ignore-global                  
        --no-ignore-messages                
        --no-ignore-parent                  
        --no-ignore-vcs                     
        --no-require-git                    
        --one-file-system                   
        --type-add &lt;TYPE_SPEC&gt;...           
        --type-clear &lt;TYPE&gt;...              

OUTPUT FILE FILTERING
        --files-without-match               
        --include-zero                      

ENGINE
        --auto-hybrid-regex # deprecated
        --block-buffered                    
        --crlf                              
        --debug                             
        --dfa-size-limit &lt;NUM+SUFFIX?&gt;      
    -E, --encoding &lt;ENCODING&gt;               
        --engine &lt;ENGINE&gt;                   
    -h, --help                              
        --line-buffered                     
        --mmap                              
        --no-config                         
        --no-mmap                           
        --path-separator &lt;SEPARATOR&gt;        
        --pcre2-version                     
        --regex-size-limit &lt;NUM+SUFFIX?&gt;    
    -j, --threads &lt;NUM&gt;                     
        --type-list                         
    -V, --version                           



</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-03-08 15:31</div>
            <div class="timeline-body"><p>Thanks for the idea! This was discussed a while ago in #1022, and I ultimately decided not to go through with it. I think the main problem is that the grouping itself can be somewhat difficult to come up with. For example, I think your &quot;ENGINE&quot; group could also be named, &quot;options that don&#x27;t really fit in any of the other groups.&quot;</p>
<p>As you suggest, we <em>could</em> make this grouping non-default and only enable it with an option. (That means it probably wouldn&#x27;t be visible through the man page, since that&#x27;s pretty static.) But we could have, for example, a <code>--help-by-group</code> option that shows this sort of grouping. ripgrep <em>does</em> have a lot of options, so grouping things together is undoubtedly useful.</p>
<p>Having it be non-default has the problem of discoverability. But maybe that shouldn&#x27;t stop us.</p>
<p>In terms of feasibility, I think this probably depends on the arg parser that ripgrep uses (clap). If we can&#x27;t convince it to do this for us, then it might be more work to do and maintain than I&#x27;d want. I&#x27;m pretty sure clap supports grouping and what not, but the question here is whether we can do that <em>conditionally</em> based on the presence or absence of a flag. That will be a bit tricky.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-03-08 15:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-03-08 15:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-07-28 13:37</div>
            <div class="timeline-body"><blockquote>
<p>In terms of feasibility, I think this probably depends on the arg parser that ripgrep uses (clap). If we can&#x27;t convince it to do this for us, then it might be more work to do and maintain than I&#x27;d want. I&#x27;m pretty sure clap supports grouping and what not, but the question here is whether we can do that conditionally based on the presence or absence of a flag. That will be a bit tricky.</p>
</blockquote>
<p>clap3 now has custom argument grouping in help</p>
<ul>
<li>https://github.com/clap-rs/clap/issues/805</li>
<li><a href="https://github.com/clap-rs/clap/pull/1211/files#diff-5f633a6745c60bcdaeada21bbad653dd7dcf6c434cdbd11ccbdac8d231750d3dR1368">example via test</a></li>
</ul>
<p>(its going to be hard going back and documenting all of the features that have been added)</p>
<p>I&#x27;m assuming to make this conditional, you just set or unset <code>UnifiedHelpMessage</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rollup</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-21 00:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-21 04:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:11 UTC
    </footer>
</body>
</html>
