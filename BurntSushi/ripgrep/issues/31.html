<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>git: explicitly added files are ignored - BurntSushi/ripgrep #31</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>git: explicitly added files are ignored</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/31">#31</a>
        opened by <a href="https://github.com/Istvan91">@Istvan91</a>
        on 2016-09-23 19:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Istvan91">@Istvan91</a></div>
            <div class="timeline-body"><p>I&#x27;m not sure if this is in scope of ripgrep, but explicitly added files in git repositories are ignored.</p>
<p>The script</p>
<pre><code>#!/bin/bash
mkdir testfolder
pushd testfolder
    git init
    echo &quot;some text&quot; &gt; testfile
    echo &quot;*&quot; &gt; .gitignore
    git add -f testfile .gitignore
    git commit -m &quot;Initial commit&quot;
    echo &quot;ripgrep:&quot;
    rg some
    echo &quot;git grep:&quot;
    git --no-pager grep some
popd

</code></pre>
<p>yields following output:</p>
<pre><code>Initialized empty Git repository in /full/path/testfolder/.git/
[master (root-commit) 350428e] Initial commit
 2 files changed, 2 insertions(+)
 create mode 100644 .gitignore
 create mode 100644 testfile
ripgrep:
No files were searched, which means ripgrep probably applied a filter you didn&#x27;t expect. Try running again with --debug.
git grep:
testfile:some text
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-24 02:09</div>
            <div class="timeline-body"><p>I don&#x27;t think there&#x27;s a way to fix this without digging deeping into <code>git</code>. We might have to live with it.</p>
<p>Note that you can add files to your <code>.rgignore</code> (soon to be <code>.gitignore</code>) that will override this. You can also whitelist them in your <code>.gitignore</code>, which honestly kind of seems like the right thing to do anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-24 02:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Istvan91">@Istvan91</a> on 2016-09-24 05:43</div>
            <div class="timeline-body"><p>Have you actually evaluated to (optionally) call git and ask for all files? I guess this would also fix all other gitignore related problems.</p>
<p>Though I partially disagree, I leave it like this since ag, silver_searcher and co. can&#x27;t do this as well. (In the future you could mention this limitation in the README.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-24 05:54</div>
            <div class="timeline-body"><p>It just seems like bad juju for <code>rg</code> to have a runtime dependency on another command line tool. Moreover, implementing <em>optional</em> support for it is a recipe for monstrous code complexity and innumerable bugs.</p>
<p>If we really wanted to get serious about this, I&#x27;d probably insist researching something like <code>libgit2</code> to see if we could use that to implement this stuff. Depending on a C library doesn&#x27;t sound great to me either, but slightly more palatable than another command line tool.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-24 23:31</div>
            <div class="timeline-body"><p>I am going to close this because I don&#x27;t see an answer to this problem that I&#x27;m comfortable with. If anything new comes to light, we can revisit it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-24 23:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:00 UTC
    </footer>
</body>
</html>
