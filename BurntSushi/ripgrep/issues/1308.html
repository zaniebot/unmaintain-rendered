<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System immediately freezes on keyboard interrupt / kill - BurntSushi/ripgrep #1308</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>System immediately freezes on keyboard interrupt / kill</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1308">#1308</a>
        opened by <a href="https://github.com/Ethan826">@Ethan826</a>
        on 2019-06-20 16:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Ethan826">@Ethan826</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<pre><code>ripgrep 11.0.1
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)
</code></pre>
How did you install ripgrep?
<p>Using <code>cargo</code>, but I also got the same error when running the <code>brew</code> version.</p>
What operating system are you using ripgrep on?
<p>Mac OS v.10.14.5 (18F132)</p>
Describe your question, feature request, or bug.
<p>Attempting to interrupt <code>ripgrep</code> is causing my system to freeze. This is true both of <code>^C</code> keyboard interrupt and of using another terminal window to issue a <code>kill</code> command for the <code>ripgrep</code> process. The system freeze is immediate and includes the mouse, the spinner at the top of the terminal tab window, etc.</p>
<p>The system remained frozen for perhaps 10 minutes before I restarted it.</p>
If this is a bug, what are the steps to reproduce the behavior?
<p>This occurs on a large directory of Ruby on Rails code. I was searching for the word <code>hello</code>.</p>
If this is a bug, what is the actual behavior?
<p>It isn&#x27;t possible to copy output, as the system immediately and apparently irremediably freezes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-06-20 16:03</div>
            <div class="timeline-body"><p>Sorry, but this bug report is not actionable. The only way I&#x27;d even be able to begin to diagnose this is if you provide the corpus you&#x27;re searching.</p>
<p>From experience, it kind of smells like your system is out of memory, but I am not a macOS user, so I&#x27;m not sure. You&#x27;ll probably need to debug this yourself. Try looking at system stats (such as memory/CPU usage via <code>htop</code> just before the freeze). Try also running ripgrep in single threaded mode, e.g., with the <code>-j1</code> flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-06-20 16:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ethan826">@Ethan826</a> on 2019-06-20 16:08</div>
            <div class="timeline-body"><p>I followed the guidance in the previous &quot;My Mac is freezing&quot; <a href="https://github.com/BurntSushi/ripgrep/issues/975">issue</a>, including having <code>htop</code> running. Memory usage is relatively low, and the crash is nearly instantaneous on sending the interrupt. I will see if I can get it to happen with a corpus that&#x27;s not a proprietary codebase.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ethan826">@Ethan826</a> on 2019-06-20 16:44</div>
            <div class="timeline-body"><p>Was able to reproduce with</p>
<pre><code>git clone https://github.com/torvalds/linux.git
cd linux
rg hello
# ^C
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ethan826">@Ethan826</a> on 2019-06-20 20:17</div>
            <div class="timeline-body"><p>Apparently work has been pushing out BitDefender or messing with its settings in some way, which I&#x27;ve learned is causing coworkers issues with a variety of applications. If my issue isn&#x27;t reproducible, that may be the cause. I will close the issue pending someone&#x27;s reproducing it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Ethan826">@Ethan826</a> on 2019-06-20 20:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-06-20 20:27</div>
            <div class="timeline-body"><p>@Ethan826 Thanks! If you find out anything more about BitDefender or are able to draw any conclusions, then updating this issue would be great for posterity.</p>
<p>FWIW, I was able to checkout the Linux kernel, run your query and <code>^C</code> it successfully on my mac dev box.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ethan826">@Ethan826</a> on 2019-06-25 16:49</div>
            <div class="timeline-body"><p>The security team at work whitelisted the various install locations (i.e. <code>/usr/local/bin/rg</code>, <code>~/.cargo/bin/rg</code>, and in the Homebrew directory somewhere) in the configuration files for BitDefender, and the issue is fixed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-06-25 16:54</div>
            <div class="timeline-body"><p>@Ethan826 Awesome, thanks for the follow up!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ethan826">@Ethan826</a> on 2019-06-25 16:55</div>
            <div class="timeline-body"><p>Thanks for your responsiveness and for making such a great application.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:08 UTC
    </footer>
</body>
</html>
