<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matching arbitrary subdirectory depth in glob pattern - BurntSushi/ripgrep #475</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Matching arbitrary subdirectory depth in glob pattern</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/475">#475</a>
        opened by <a href="https://github.com/alexlafroscia">@alexlafroscia</a>
        on 2017-05-07 20:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/alexlafroscia">@alexlafroscia</a></div>
            <div class="timeline-body"><p>I'm running up against an issue with glob patterns, and am hoping you can let me know what I'm doing wrong.  I sometimes end up in a situation where I want to find something just in my app code, not my tests. So I do something like this, trying to search just my app files:</p>
<pre><code class="language-bash">rg -F 'foobar' -g app/**/*.js
</code></pre>
<p>thinking that it will search for anything with a <code>.js</code> ending that's found in the <code>app/</code> directory, regardless of how many subdirectories deep the file might be (this is how other glob patterns I've used before work, such as <a href="https://github.com/joliss/node-walk-sync"><code>walk-sync</code></a>.</p>
<p>However, it seems like this only matches against files that are <em>exactly</em> one subdirectory deep; anything directly in <code>app</code> isn't found, and anything deeper than one directory below <code>app</code> isn't found. How would I properly format the search to find everything?</p>
<p>I've also tried changing it to something like this, to no avail:</p>
<pre><code class="language-bash">rg -F 'foobar' -tjs -g app/*
rg -F 'foobar' -tjs -g app/**/*
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexlafroscia">@alexlafroscia</a> on 2017-05-07 20:40</div>
            <div class="timeline-body"><p>Aaaand never mind. Path to search can be added as the last parameter, that's exactly what I needed. Whoops!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @alexlafroscia on 2017-05-07 20:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-05-07 21:01</div>
            <div class="timeline-body"><p>For what it's worth, I can't actually reproduce the issue you were facing (which seems like it would be a bug):</p>
<pre><code>[andrew@Cheetah ripgrep-475] mkdir -p foo/bar/baz/quux
[andrew@Cheetah ripgrep-475] echo test &gt; foo/bar/baz/quux/test.js
[andrew@Cheetah ripgrep-475] rg test -g 'foo/**/*.js'
foo/bar/baz/quux/test.js
1:test
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-05-07 21:02</div>
            <div class="timeline-body"><p>Did you perhaps not put the argument to <code>-g</code> in single quotes? If you don't quote it, then your shell will expand it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexlafroscia">@alexlafroscia</a> on 2017-05-07 22:17</div>
            <div class="timeline-body"><p>I'm actually running it from within Vim, so I'm not sure how/if it's being expanded</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexlafroscia">@alexlafroscia</a> on 2017-05-07 22:21</div>
            <div class="timeline-body"><p>Maybe it's the running through Vim that's the issue. I'm seeing different results from the command line now. It's weird to me that these commands yield different numbers...</p>
<pre><code class="language-bash">$ rg this -c -tjs -g app/**/* | wc -l
381

$ rg this -c -tjs -g 'app/**/*' | wc -l
382

$ rg this -c -tjs app/ | wc -l
362
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexlafroscia">@alexlafroscia</a> on 2017-05-07 22:41</div>
            <div class="timeline-body"><p>Huh, I'm having trouble reproducing this now. I'm not sure why it seemed like only one level of subdirectories was being searched, but I wouldn't worry about this. I'll come back and reopen if I come up with a case where I can reliably reproduce the problem.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-05-07 23:32</div>
            <div class="timeline-body"><p>All right, thanks! I did just try this in vim (with quotes around the glob) and couldn't reproduce it.</p>
<p>If you do manage to come back around to this, it would be super helpful if you could reproduce it on a public repo that I could clone so that we know we're searching the same stuff. Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:10 UTC
    </footer>
</body>
</html>
