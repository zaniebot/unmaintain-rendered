<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>glob ignored for items in path - BurntSushi/ripgrep #725</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>glob ignored for items in path</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/725">#725</a>
        opened by <a href="https://github.com/tekumara">@tekumara</a>
        on 2018-01-01 00:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tekumara">@tekumara</a></div>
            <div class="timeline-body"><p>I found the following surprising:</p>
<pre><code>$ echo bar &gt; bar
$ rg -g 'foo' --files *
bar
$ rg -g 'foo' --files bar
bar
</code></pre>
<p>I was expecting the above rg commands to return nothing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-01-01 00:49</div>
            <div class="timeline-body"><p>Interesting, I guess <code>grep</code> has the behavior you would expect:</p>
<pre><code>[andrew@Cheetah ripgrep-725] grep -r test
foo:test
bar:test
[andrew@Cheetah ripgrep-725] grep -r test --include foo
foo:test
[andrew@Cheetah ripgrep-725] grep -r test --include foo *
foo:test
[andrew@Cheetah ripgrep-725] grep test --include foo *
foo:test
[andrew@Cheetah ripgrep-725] grep test --include foo bar
[andrew@Cheetah ripgrep-725]
</code></pre>
<p>I think my thinking here was that if you specified a file on the command line, then that meant you explicitly wanted to search it, so nothing should override it. I suppose that is perhaps not exactly true if you're globbing or getting your file list from some other process.</p>
<p>At the very least, grep's behavior is a strong vote in favor of respecting explicit globs even on explicitly given file paths.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2018-01-01 01:00</div>
            <div class="timeline-body"><p>AFAIK <code>ag</code> behaves the same way as <code>rg</code> here, and i think it makes sense, personally. Glob rules in particular tend to be used for matching against multiple files, so it seems reasonable that an explicit file path (which can only ever match <em>one</em> file, and which the user has to go out of their way to provide) has precedence. It also matches the way ignore rules can be overridden, which makes sense to me too because command-line globs and ignore files are closely related functionality</p>
<p>I can see the other side of it too but that's my intuition anyway</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-01-01 01:09</div>
            <div class="timeline-body"><p>@okdana In the case of <code>rg -g foo bar</code> yeah I see how that makes sense. But doesn't <code>rg -g foo *</code> kind of turn you around in the other direction? And there's also <code>find ./ ... | xargs rg -g foo</code> as well.</p>
<p>But yeah, I don't know what to do here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2018-01-01 01:22</div>
            <div class="timeline-body"><blockquote>
<p>But doesn't rg -g foo * kind of turn you around in the other direction?</p>
</blockquote>
<p>It might, if <code>rg</code> was handling the <code>*</code> ‚Äî¬†but <code>rg</code> doesn't know anything about that, it's a shell feature. By the time <code>rg</code> gets it it could have expanded to a hundred files or just one, and it has no way of telling either way.</p>
<p>Passing <code>*</code> to a recursive search tool in the first place usually stems from a misunderstanding of how either the shell or the tool works, IMO. There are a few cases where it's useful, but 95% of the time it's redundant or even counter-productive.</p>
<blockquote>
<p>And there's also find ./ ... | xargs rg -g foo as well.</p>
</blockquote>
<p>I never thought about that. But i guess if you're already involving <code>find</code> there's no reason not to use its own features (which are usually more powerful than <code>rg</code>'s anyway, tbh) to include/exclude file paths.</p>
<p>ü§∑‚Äç‚ôÄÔ∏è</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-01-01 01:46</div>
            <div class="timeline-body"><p>Yeah, I guess I'm inclined to say this: unless someone can come up with a compelling reason to switch today's behavior, then I'd prefer to stay with what we have today. I do somewhat consider &quot;that's what grep does&quot; to be a strong vote in favor of switching, but I'd like a little more than that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2018-01-01 01:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tekumara">@tekumara</a> on 2018-01-01 22:13</div>
            <div class="timeline-body"><p>It might be nice to have the behaviour documented for those coming from <code>grep</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-01-11 13:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:23 UTC
    </footer>
</body>
</html>
