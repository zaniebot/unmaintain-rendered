<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create alias to fast-edit a result - BurntSushi/ripgrep #304</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Create alias to fast-edit a result</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/304">#304</a>
        opened by <a href="https://github.com/Hywan">@Hywan</a>
        on 2017-01-06 13:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Hywan">@Hywan</a></div>
            <div class="timeline-body"><p>Hello and thanks for this incredible work!</p>
<p>I am wondering if this would be hard to implement something similar to https://github.com/aykamko/tag? I can try if you want. The principle is simple: Generate one alias per results in a temporary file (so <code>e1</code> will open an editor to the first result —file and line—, <code>e2</code> to the second result etc.; e.g. <code>alias e1=&quot;$EDITOR +line file&quot;</code>), source the alias (done by the shell, not by the command itself), that&#x27;s it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-01-06 13:38</div>
            <div class="timeline-body"><p>I don&#x27;t think mucking about with shell aliases is something that belongs in ripgrep. It sounds like a maintenance nightmare. Does it work on Windows? Which shells does it support?</p>
<p>I would, however, be amenable to making ripgrep&#x27;s output format a bit more customizable. However, that will require some refactoring/design work that I&#x27;m not quite ready to tackle yet. That particular issue is tracked by #244.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-01-06 13:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-01-06 13:39</div>
            <div class="timeline-body"><p>Note that it looks like ripgrep support will land in <code>tag</code> at some point: <a href="https://github.com/aykamko/tag/issues/27">aykamko/tag#27</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lukaslueg">@lukaslueg</a> on 2017-01-06 15:42</div>
            <div class="timeline-body"><p>You can do this using <a href="https://github.com/peco/peco">peco</a> and a shell function.</p>
<p>Put this in your .zshrc / .bashrc / whatever:</p>
<pre><code>rg2vim() { vim $(rg -n $1 | peco | awk -F\: &#x27;{print &quot;+&quot;$2,$1}&#x27;) }
</code></pre>
<p>You can then just call <code>rg2vim foobar</code>. Peco will fire up and show you all files that contain <code>foobar</code> and the matching line obtained from rg. You can narrow it down within peco. Hit Enter and Vim will fire up at the exact matching line. Hold your breath in awe.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lukaslueg">@lukaslueg</a> on 2017-01-06 17:38</div>
            <div class="timeline-body"><p>This has the virtue of opening multiple selected files in individual tabs and skipping peco if there is only one match reported by rg. It does a horrible (read:none) job of escaping special characters though. Maybe someone can come up with something better</p>
<pre><code>rg2vim() { vim -c &quot;$(rg -n $1 | peco --select-1 | awk -F\: &#x27;BEGIN {ORS=&quot;|&quot;}; {print (NR==1 ? &quot;e &quot; : &quot;tabe &quot;) $1&quot;|:&quot;$2}&#x27;)&quot; }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Hywan">@Hywan</a> on 2017-01-06 17:39</div>
            <div class="timeline-body"><p>Will try to integrate it into emacs. Have been running Vim for 7 years, I did the switch recently (with evil-mode, miam!).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Hywan">@Hywan</a> on 2017-01-06 19:54</div>
            <div class="timeline-body"><p>peco is a nicer alternative to tag. Thanks for the tips!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Hywan">@Hywan</a> on 2017-01-06 19:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/partounian">@partounian</a> on 2017-12-19 01:59</div>
            <div class="timeline-body"><p>EDIT: Moving the chat to Luke&#x27;s dotfiles. <a href="https://github.com/lukaslueg/dotfiles/issues/1">lukaslueg/dotfiles#1</a></p>
<p>Hey @lukaslueg it&#x27;s been some time from this thread but I noticed this in your dotfiles</p>
<pre><code>rg2vim() {
	vim -c &quot;$(
	FL=0
	while IFS=: read -r fn ln line; do
		if [ &quot;$FL&quot; -eq &quot;0&quot; ]; then
			printf &quot;e %q|&quot; &quot;$fn&quot;
			FL=1
		else
			printf &quot;tabnew %q|&quot; &quot;$fn&quot;
		fi
		printf &quot;:%d|&quot; &quot;$ln&quot;
	done &lt; &lt;(rg -n &quot;$1&quot; | peco --select-1)
	)&quot;
}
</code></pre>
<p>Is this the latest and greatest solution?</p>
<p>EDIT: Also any way to catch a Ctrl-C and prevent vim from opening?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lukaslueg">@lukaslueg</a> on 2017-12-19 08:21</div>
            <div class="timeline-body"><p>I never got around to such details. The &quot;script&quot; does not process Ctrl-C and just falls on it&#x27;s nose if there is no <code>rg</code> or <code>peco</code> binary at all. All I do with it is fire <code>rg</code> and see if something useful comes out at all and then use <code>rg2vim !$</code> to redo the search and load the desired matches into vim.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:03 UTC
    </footer>
</body>
</html>
