<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[globset] support more options on GlobBuilder? - BurntSushi/ripgrep #2229</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[globset] support more options on GlobBuilder?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2229">#2229</a>
        opened by <a href="https://github.com/WindSoilder">@WindSoilder</a>
        on 2022-06-09 02:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/WindSoilder">@WindSoilder</a></div>
            <div class="timeline-body">Describe your feature request
<p>Refer to <a href="https://docs.rs/globset/latest/globset/struct.GlobBuilder.html">GlobBuilder</a>, it supports <a href="https://docs.rs/globset/latest/globset/struct.GlobBuilder.html#method.case_insensitive">case_insensitive</a>, <a href="https://docs.rs/globset/latest/globset/struct.GlobBuilder.html#method.literal_separator">literal_separator</a> and <a href="https://docs.rs/globset/latest/globset/struct.GlobBuilder.html#method.backslash_escape">backslash_escape</a>.</p>
<p>I wonder if it can support more options includes:</p>
<pre><code>/// Whether or not paths that contain components that start with a `.`
/// will require that `.` appears literally in the pattern; `*`, `?`, `**`,
/// or `[...]` will not match. This is useful because such files are
/// conventionally considered hidden on Unix systems and it might be
/// desirable to skip them when listing files.
require_literal_leading_dot: bool

/// if given pattern contains `**`, this flag check if `**` matches hidden directory.
/// For example: if true, `**` will match `.abcdef/ghi`.
recursive_match_hidden_dir: bool
</code></pre>
<p>Which mainly works for hidden directory or hidden file</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-06-09 13:43</div>
            <div class="timeline-body"><p>I&#x27;m sure it can be supported. I didn&#x27;t originally because I wasn&#x27;t convinced of their utility. And more to the point, it somewhat encourages writing non-portable code. Namely, while a leading dot is a convention used on Unix to indicate a hidden file or directory, this convention is less used on Windows. On Windows, whether something is hidden or not is actually a first class property of the file&#x27;s metadata.</p>
<p>On the other hand, globs <em>tend</em> to be written by end users, and in that context, portability isn&#x27;t always needed.</p>
<p>In any case, it would be good to explain why you want these things. What would you use them for if they existed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-06-09 13:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WindSoilder">@WindSoilder</a> on 2022-06-14 03:10</div>
            <div class="timeline-body"><p>Background: I&#x27;m trying to help to make <code>ls</code> command better in <a href="https://www.nushell.sh/book/moving_around.html">nushell</a>, it uses <a href="https://github.com/rust-lang/glob">glob</a> crate.</p>
<p>But it seems that <code>glob</code> doesn&#x27;t support non-UTF8 path, and it would be tricky to make <code>glob</code> support it.  I&#x27;m searching for other replacement, one choice is the <code>globset</code> crate</p>
<p>If we use <code>ls -a **</code>, we would expect <code>recursive_match_hidden_dir</code> to be true and return hidden directories.  Simply use <code>ls **</code> will not return hidden directories (only for unix)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-06-14 12:26</div>
            <div class="timeline-body"><p>If you can find a way to add the things you need along with tests without any major reworking of the code, I&#x27;d accept a patch.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-06-14 12:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-06-14 12:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:12 UTC
    </footer>
</body>
</html>
