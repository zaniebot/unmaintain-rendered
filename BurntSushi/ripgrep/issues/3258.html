<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Globset: A simple way to check whether there are any wildcards - BurntSushi/ripgrep #3258</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Globset: A simple way to check whether there are any wildcards</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/3258">#3258</a>
        opened by <a href="https://github.com/tgross35">@tgross35</a>
        on 2026-01-07 00:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tgross35">@tgross35</a></div>
            <div class="timeline-body"><p>We had a use recently where it would be nice to check whether or not there are any wildcards in a string, to fall back to other matching algorithms if not. Would it be possible to add something like the following?</p>
<pre><code>impl Glob {
    fn contains_wildcard(&amp;self) -&gt; bool;
}
</code></pre>
<p>Could also be a standalone function that takes an <code>&amp;str</code>.</p>
<p>This can kind of be done by checking the output of <code>escape</code>, but that is suboptimal.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2026-01-07 14:18</div>
            <div class="timeline-body"><p>Can you say what the use case is? <code>globset</code> should already do literal matching optimizations.</p>
<p>Note that checking the output of <code>escape</code> could be misleading. e.g., <code>f[[]oo</code> matches <code>f[oo</code> but <code>globset::escape</code> turns it into <code>f[[][[][]]oo</code>. Would you consider <code>f[[]oo</code> as containing a wildcard? Or even <code>f[o]o</code>?</p>
<p>It&#x27;s possible that just checking whether the glob contains a special character (<code>?</code>, <code>*</code>, <code>[</code>, <code>]</code>, <code>{</code>, <code>}</code>) or not via a simple substring test is sufficient. But it depends on the use case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tgross35">@tgross35</a> on 2026-01-07 19:43</div>
            <div class="timeline-body"><blockquote>
<p>Can you say what the use case is? <code>globset</code> should already do literal matching optimizations.</p>
</blockquote>
<p>This came up in triagebot, which used prefix matching but wanted to add glob support without breaking things. The case is kind of resolved currently by adding <code>*</code> to the end of the glob, but that means that e.g. <code>**/foo.rs</code> will also match <code>**/foo.rs.stderr</code>. Probably not a problem for triagebot, but that workaround might not be the desired behavior elsewhere.</p>
<blockquote>
<p>Note that checking the output of <code>escape</code> could be misleading. e.g., <code>f[[]oo</code> matches <code>f[oo</code> but <code>globset::escape</code> turns it into <code>f[[][[][]]oo</code>. Would you consider <code>f[[]oo</code> as containing a wildcard? Or even <code>f[o]o</code>?</p>
</blockquote>
<p>I just meant checking whether the escaped string is different from the input string, as an approximation.</p>
<blockquote>
<p>It&#x27;s possible that just checking whether the glob contains a special character (<code>?</code>, <code>*</code>, <code>[</code>, <code>]</code>, <code>{</code>, <code>}</code>) or not via a simple substring test is sufficient. But it depends on the use case.</p>
</blockquote>
<p>Right, this would work fine. It would just be a convenience for globset to own the set of wildcard characters to look for (though I don&#x27;t expect there to ever be any more), or for this to be a method on <code>Glob</code> that also takes settings into account (e.g. <code>\</code>).</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:15 UTC
    </footer>
</body>
</html>
