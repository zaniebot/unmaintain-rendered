<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>passthru replace - BurntSushi/ripgrep #997</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>passthru replace</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/997">#997</a>
        opened by <a href="https://github.com/LippyBoy">@LippyBoy</a>
        on 2018-07-29 11:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/LippyBoy">@LippyBoy</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>0.81</p>
<h4>How did you install ripgrep?</h4>
<p>releases deb</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>Ubuntu 16.04</p>
<h4>Describe your question, feature request, or bug.</h4>
<p>It would be really great if the replace flag worked with the passthru flag - that is, it will replace everything that matches the regex, but will still output non-matching lines.</p>
<p>I know that you can use sed for this, but ripgrep is much more convenient and user friendly, and also highlighting the replacements is great.</p>
<p>Use cases:</p>
<ol>
<li>Multiple replaces - when you want to replace multiple things, you can't chain ripgreps since strings that aren't matched by the first replace won't be inputted into the second, so it won't replace them</li>
<li>Replacing paths - sometimes I read other people logs, and for the sake of convenience I want to replace their file paths with mine - no problem, just replace the prefix, but of course I can't do it currently in ripgrep since all other logs will be omitted.</li>
<li>This stack overflow question I stumbled upon could have bin solved with this feature: https://stackoverflow.com/questions/51504318/how-to-replace-a-with-o-with-0-in-a-word-list-and-remove-the-unchanged-wor</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-07-29 11:28</div>
            <div class="timeline-body"><p>The replace flag should already be working with passthru. If it isn't, that sounds like a bug. Could you please provide a small reproducible example, asking with actual and expected output?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LippyBoy">@LippyBoy</a> on 2018-07-29 11:33</div>
            <div class="timeline-body"><pre><code>~/rust&gt; rg --version
ripgrep 0.8.1
-SIMD -AVX
~/rust&gt; 
~/rust&gt; rg --passthru --replace b a
error: The argument '--replace &lt;REPLACEMENT_TEXT&gt;' cannot be used with '--passthru'

USAGE:
    
    rg [OPTIONS] PATTERN [PATH ...]
    rg [OPTIONS] [-e PATTERN ...] [-f FILE ...] [PATH ...]
    rg [OPTIONS] --files [PATH ...]
    rg [OPTIONS] --type-list

For more information try --help
~/rust&gt; 
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-07-29 12:19</div>
            <div class="timeline-body"><p>@LippyBoy Hah, nice. I suspect I added that because the implementation simply doesn't support it.</p>
<p>I'll look into adding this as part of libripgrep by not implementing <code>--passthru</code> as a hack.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @BurntSushi on 2018-07-29 12:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">libripgrep</span> added by @BurntSushi on 2018-07-29 12:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "libripgrep" by @BurntSushi on 2018-07-29 12:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-08-20 11:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:38 UTC
    </footer>
</body>
</html>
