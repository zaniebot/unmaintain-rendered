<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Different coloring for context lines - BurntSushi/ripgrep #1496</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Different coloring for context lines</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1496">#1496</a>
        opened by <a href="https://github.com/jaroslawr">@jaroslawr</a>
        on 2020-02-22 10:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jaroslawr">@jaroslawr</a></div>
            <div class="timeline-body"><p>It would be nice to be able to specify different coloring for context lines - lines that do not contain a match but come from application of <code>-A/-B/-C</code> options, e.g. <code>rg --color nomatchline:fg:gray,line:fg:white</code>. This is possible in vanilla grep like this:</p>
<pre><code>GREP_COLORS=&quot;cx=37:&quot; grep -R foo
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-02-22 12:58</div>
            <div class="timeline-body"><p>Can you specify the desired behavior when <code>-v</code> is used and matches in the context lines are highlighted? e.g., This is how ripgrep behaves now:</p>
<p><img src="https://user-images.githubusercontent.com/456674/75092691-4a40fa00-5548-11ea-8738-17576e01ccfe.png" alt="context-color" /></p>
<p>In the second example, <code>bar</code> is highlighted as a <em>match</em> even though it is in a non-matching context line.</p>
<p>I guess it looks like grep combines them?</p>
<p><img src="https://user-images.githubusercontent.com/456674/75092751-fa166780-5548-11ea-98a4-e7d129a72592.png" alt="context-color-grep" /></p>
<p>Not quite sure how I feel about adding yet another color option though. Although I can see how &quot;graying&quot; out the context could lead to a nice effect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @BurntSushi on 2020-02-22 12:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jaroslawr">@jaroslawr</a> on 2020-02-22 14:19</div>
            <div class="timeline-body"><p><code>git grep</code> also has the feature in question and has more understandable options than <code>GREP_COLORS</code>, it provides these color settings:</p>
<ul>
<li><code>match</code> matching text (same as setting matchContext and matchSelected)</li>
<li><code>matchSelected</code> matching text in selected lines</li>
<li><code>matchContext</code> matching text in context lines (I guess covers the <code>-v</code> case you described)</li>
<li><code>selected</code> non-matching text in selected lines</li>
<li><code>context</code> non-matching text in context lines
(per https://git-scm.com/docs/git-config, under &quot;color.grep&quot; section)</li>
</ul>
<p>Taking inspiration from this, I think <code>ripgrep</code> could allow to set one or both of new options: <code>matchSelected</code> and <code>matchContext</code>, which when set would take precedence over the <code>match</code> option. Analogously it could allow to set <code>lineSelected</code> and <code>lineContext</code>, taking precedence over <code>line</code> when set.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:06 UTC
    </footer>
</body>
</html>
