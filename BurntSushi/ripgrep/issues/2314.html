<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Include/exclude searched files with implicit wildcard or regex (ag -G) - BurntSushi/ripgrep #2314</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Include/exclude searched files with implicit wildcard or regex (ag -G)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2314">#2314</a>
        opened by <a href="https://github.com/oandrew">@oandrew</a>
        on 2022-09-28 18:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oandrew">@oandrew</a></div>
            <div class="timeline-body"><h4>Describe your feature request</h4>
<p>First, thanks for ripgrep.</p>
<p>There is one feature in silversearcher (ag) that's holding me back - filter file paths with regex e.g. <code>ag &lt;pattern&gt; -G &lt;regex&gt;</code>.
ripgrep seems to support only globs (I'm guessing for performance reasons?)</p>
<ul>
<li>This means in most cases (partial match somewhere in the path) you have to type extra characters (wildcard + quotes):</li>
</ul>
<pre><code>$ rg -g '*test*' func
$ ag -G test func
</code></pre>
<ul>
<li>some things are not possible to express due to limitations of globs.</li>
</ul>
<p>99% of the time I simply use it to do a partial match, so having something like  <code>rg -G test func</code> as shortcut to <code>rg -g '*test*' func</code> would totally resolve it for me.</p>
<p><strong>So this boils down to:</strong></p>
<ol>
<li>(simple) Could we have a new flag <code>-G &lt;glob&gt;</code> that's similar to <code>-g &lt;glob&gt;</code> but <code>&lt;glob&gt;</code> is implicitly surrounded with wildcards? Then you could avoid typing and escaping <code>*</code> in most cases.
e.g. <code>rg -G test func</code> would be equivalent to <code>rg -g '*test*' func</code></li>
<li>(complex) <code>rg -G &lt;pattern&gt;</code> could accept a regex which would allow other use cases in addition to partial match.</li>
</ol>
<p>Would you consider a PR for the first approach?</p>
<p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-09-28 18:36</div>
            <div class="timeline-body"><p>It would be good to search the tracker first... :-) Dupe of #48, #54, #75, #91 (lots of discussion here), #193, #285.</p>
<p>There's just so many different ways to already do this that I don't see the point of adding a new flag for it. <code>rg --files | rg test</code> can be easily put into an alias or a wrapper shell script. Here's mine:</p>
<p>https://github.com/BurntSushi/dotfiles/blob/2f58eedf3b7f7dae7f0a7cea1a641459e25e5d07/.aliasrc#L111-L121</p>
<p>You could also use a purpose driven tool specifically for searching by file name: https://github.com/sharkdp/fd/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2022-09-28 18:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @BurntSushi on 2022-09-28 18:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wontfix</span> added by @BurntSushi on 2022-09-28 18:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oandrew">@oandrew</a> on 2022-09-28 18:39</div>
            <div class="timeline-body"><p>@BurntSushi  I wasn't referring to file search, but filtering files included in result (<code>rg --glob</code>). I searched the tracker but didn't find anything similar.</p>
<p>Updated the title to be less confusing</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Filter files with implicit wildcard or regex (ag -G)" to "Include/exclude files with implicit wildcard or regex (ag -G)" by @oandrew on 2022-09-28 18:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Include/exclude files with implicit wildcard or regex (ag -G)" to "Include/exclude searched files with implicit wildcard or regex (ag -G)" by @oandrew on 2022-09-28 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-09-28 18:44</div>
            <div class="timeline-body"><p>Ooooo, I see. Sorry, I missed that.</p>
<p>I'll re-open this for now. I don't have time to respond, but I'm not quite inclined to accept this, at least as of now. ripgrep needs its filtering internals (and interface) overhauled at some point, so I'd rather not add anything substantially new to it as of now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @BurntSushi on 2022-09-28 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> removed by @BurntSushi on 2022-09-28 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wontfix</span> removed by @BurntSushi on 2022-09-28 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @BurntSushi on 2022-09-28 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2022-09-28 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/relicode">@relicode</a> on 2023-10-26 06:35</div>
            <div class="timeline-body"><p>Minimalistic POSIX-compatible script with wildcard support:</p>
<pre><code class="language-sh">#!/bin/sh

PATTERN=&quot;$1&quot;
shift

(for DIR in &quot;${@:-.}&quot;; do rg --files &quot;$DIR&quot;; done) | rg &quot;$PATTERN&quot;
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:34 UTC
    </footer>
</body>
</html>
