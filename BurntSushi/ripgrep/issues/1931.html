<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can not match anythings - BurntSushi/ripgrep #1931</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Can not match anythings</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1931">#1931</a>
        opened by <a href="https://github.com/WingDust">@WingDust</a>
        on 2021-07-10 10:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/WingDust">@WingDust</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>13.0.0
Replace this text with the output of <code>rg --version</code>.</p>
<h4>How did you install ripgrep?</h4>
<p>scoop</p>
<p>If you installed ripgrep with snap and are getting strange file permission or
file not found errors, then please do not file a bug. Instead, use one of the
Github binary releases.</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>windows10
Replace this text with your operating system and version.
19043.1083</p>
<h4>Describe your bug.</h4>
<p>Give a high level description of the bug.
Can not match anythings</p>
<h4>What are the steps to reproduce the behavior?</h4>
<p>in <a href="https://rustexp.lpil.uk/">Rustexp</a>
I use Regex :<code>(?U)/\*\\[\s\S]+\\\*/</code> to match
Subject:</p>
<pre><code class="language-text">qweqwe
/*\ 1
|*|  2
|*|  3
|*|  4
|*|  5
|*|  6
\*/ 7
end
222
/*\ 1
|*|  2
|*|  3
|*|  4
|*|  5
|*|  6
\*/ 7
1233
</code></pre>
<p>Get:</p>
<pre><code class="language-text">Some(Captures({
    0: Some(&quot;/*\\ 1\n|*|  2\n|*|  3\n|*|  4\n|*|  5\n|*|  6\n\\*/&quot;),
})),
Some(Captures({
    0: Some(&quot;/*\\ 1\n|*|  2\n|*|  3\n|*|  4\n|*|  5\n|*|  6\n\\*/&quot;),
})),
</code></pre>
<p>Result is what I expect
But When I call <code>rg  '(?U)/\*\\[\s\S]+\\\*/'</code> in local
I have a file with</p>
<pre><code class="language-ts">/*\
|*|
|*| 12132
|*|
\*/

/*\
|*| 11
|*| 11
|*| 11
\*/
</code></pre>
<p><strong>Get nothing !</strong></p>
<h4>What is the actual behavior?</h4>
<p><code>rg '(?U)/\*\\[\s\S]+\\\*/' --debug</code>
Show:</p>
<pre><code class="language-text">DEBUG|grep_regex::literal|crates\regex\src\literal.rs:180: required literal found: &quot;/*\\\\&quot;
DEBUG|grep_regex::matcher|crates\regex\src\matcher.rs:50: extracted fast line regex: (?-u:/\x2a\x5c)
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: gzip: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: gzip: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: lz4: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: brotli: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: uncompress: could not find executable in PATH
DEBUG|globset|crates\globset\src\lib.rs:421: built glob set; 0 literals, 0 basenames, 7 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: gzip: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: gzip: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: lz4: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: brotli: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: uncompress: could not find executable in PATH
DEBUG|globset|crates\globset\src\lib.rs:421: built glob set; 0 literals, 0 basenames, 7 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates\globset\src\lib.rs:421: built glob set; 2 literals, 3 basenames, 2 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./.env: Ignore(IgnoreMatch(Hidden))
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: gzip: could not find executable in PATH
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./.git: Ignore(IgnoreMatch(Hidden))
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./.gitignore: Ignore(IgnoreMatch(Hidden))
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./.vscode: Ignore(IgnoreMatch(Hidden))
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./.yarnrc: Ignore(IgnoreMatch(Hidden))
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: gzip: could not find executable in PATH
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./dist: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./.gitignore&quot;), original: &quot;dist&quot;, actual: &quot;**/dist&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./node_modules: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./.gitignore&quot;), original: &quot;node_modules&quot;, actual: &quot;**/node_modules&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|globset|crates\globset\src\lib.rs:421: built glob set; 0 literals, 12 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./zju-course-scene-change-detection\.git: Ignore(IgnoreMatch(Hidden))
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./zju-course-scene-change-detection\.gitignore: Ignore(IgnoreMatch(Hidden))
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: lz4: could not find executable in PATH
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Style\node_modules: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./.gitignore&quot;), original: &quot;node_modules&quot;, actual: &quot;**/node_modules&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: brotli: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: uncompress: could not find executable in PATH
DEBUG|globset|crates\globset\src\lib.rs:421: built glob set; 0 literals, 0 basenames, 7 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./src\render\dist: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./.gitignore&quot;), original: &quot;dist&quot;, actual: &quot;**/dist&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./src\main\.env.development: Ignore(IgnoreMatch(Hidden))
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: gzip: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: gzip: could not find executable in PATH
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Legacy\.git: Ignore(IgnoreMatch(Hidden))
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Legacy\VideoScale\.vscode: Ignore(IgnoreMatch(Hidden))
DEBUG|globset|crates\globset\src\lib.rs:416: glob converted to regex: Glob { glob: &quot;**/*&quot;, re: &quot;(?-u)^(?:/?|.*/)[^/]*$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: Tokens([RecursivePrefix, ZeroOrMore]) }
DEBUG|globset|crates\globset\src\lib.rs:421: built glob set; 0 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 1 regexes
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Legacy\keyevent\pkg\.gitignore: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./Legacy\\keyevent\\pkg\\.gitignore&quot;), original: &quot;*&quot;, actual: &quot;**/*&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: lz4: could not find executable in PATH
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Legacy\keyevent\pkg\keyevent.d.ts: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./Legacy\\keyevent\\pkg\\.gitignore&quot;), original: &quot;*&quot;, actual: &quot;**/*&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Legacy\keyevent\pkg\keyevent.js: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./Legacy\\keyevent\\pkg\\.gitignore&quot;), original: &quot;*&quot;, actual: &quot;**/*&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: brotli: could not find executable in PATH
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Legacy\keyevent\pkg\keyevent_bg.js: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./Legacy\\keyevent\\pkg\\.gitignore&quot;), original: &quot;*&quot;, actual: &quot;**/*&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Legacy\keyevent\pkg\keyevent_bg.wasm: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./Legacy\\keyevent\\pkg\\.gitignore&quot;), original: &quot;*&quot;, actual: &quot;**/*&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: uncompress: could not find executable in PATH
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Legacy\keyevent\pkg\keyevent_bg.wasm.d.ts: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./Legacy\\keyevent\\pkg\\.gitignore&quot;), original: &quot;*&quot;, actual: &quot;**/*&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|globset|crates\globset\src\lib.rs:421: built glob set; 0 literals, 0 basenames, 7 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Legacy\keyevent\pkg\package.json: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./Legacy\\keyevent\\pkg\\.gitignore&quot;), original: &quot;*&quot;, actual: &quot;**/*&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: gzip: could not find executable in PATH
DEBUG|ignore::walk|crates\ignore\src\walk.rs:1741: ignoring ./Legacy\keyevent\pkg\README.md: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./Legacy\\keyevent\\pkg\\.gitignore&quot;), original: &quot;*&quot;, actual: &quot;**/*&quot;, is_whitelist: false, is_only_dir: false })))
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: gzip: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: lz4: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: brotli: could not find executable in PATH
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:482: uncompress: could not find executable in PATH
DEBUG|globset|crates\globset\src\lib.rs:421: built glob set; 0 literals, 0 basenames, 7 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
</code></pre>
<h4>What is the expected behavior?</h4>
<p>Should match</p>
<pre><code class="language-text">filename
linenumber:/*\
linenumber:|*|
linenumber:|*| 12132
linenumber:|*|
linenumber:\*/

filename
linenumber:/*\
linenumber:|*| 11
linenumber:|*| 11
linenumber:|*| 11
linenumber:\*/
</code></pre>
<p>What do you think ripgrep should have done?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-10 11:06</div>
            <div class="timeline-body"><p>Works just fine here. First test:</p>
<pre><code>$ cat subject1
qweqwe
/*\ 1
|*|  2
|*|  3
|*|  4
|*|  5
|*|  6
\*/ 7
end
222
/*\ 1
|*|  2
|*|  3
|*|  4
|*|  5
|*|  6
\*/ 7
1233

$ rg -U '(?U)/\*\\[\s\S]+\\\*/' subject1
2:/*\ 1
3:|*|  2
4:|*|  3
5:|*|  4
6:|*|  5
7:|*|  6
8:\*/ 7
11:/*\ 1
12:|*|  2
13:|*|  3
14:|*|  4
15:|*|  5
16:|*|  6
17:\*/ 7
</code></pre>
<p>Second test:</p>
<pre><code>$ cat subject2
/*\
|*|
|*| 12132
|*|
\*/

/*\
|*| 11
|*| 11
|*| 11
\*/

$ rg -U '(?U)/\*\\[\s\S]+\\\*/' subject2
1:/*\
2:|*|
3:|*| 12132
4:|*|
5:\*/
7:/*\
8:|*| 11
9:|*| 11
10:|*| 11
11:\*/
</code></pre>
<p>I note that you did not provide a complete reproduction here. In particular, it looks like you're using multiline mode, but your ripgrep commands lack the <code>-U</code> flag. This means it's impossible for me to be confident that you're showing me the commands you're actually running. Are you using a config file? Do you have an alias or wrapper script in play here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2021-07-10 11:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WingDust">@WingDust</a> on 2021-07-10 11:48</div>
            <div class="timeline-body"><p>@BurntSushi Thanks fast response .</p>
<p>I am new come to ripgrep
Don't hava any config yet and alias or wrapper script
<code>rg -U '(?U)/\*\\[\s\S]+\\\*/'</code> work nice
<img src="https://user-images.githubusercontent.com/45911286/125161910-ac3ee580-e1b7-11eb-93ac-62cf48115167.png" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @WingDust on 2021-07-10 11:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-10 11:50</div>
            <div class="timeline-body"><p>To be clear, your first query doesn't work for me without <code>-U</code> either:</p>
<pre><code>$ rg '(?U)/\*\\[\s\S]+\\\*/' subject1
$
</code></pre>
<p>But anyway, glad you figured it out.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:24 UTC
    </footer>
</body>
</html>
