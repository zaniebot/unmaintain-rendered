<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supports excluding only a specific ignore file - BurntSushi/ripgrep #1923</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Supports excluding only a specific ignore file</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1923">#1923</a>
        opened by <a href="https://github.com/maple3142">@maple3142</a>
        on 2021-07-01 18:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/maple3142">@maple3142</a></div>
            <div class="timeline-body">Describe your feature request
<p>My problem is that I use my home directory as a git repo to manage my dotfiles, so there is a <code>~/.gitignore</code> that ignores everything except some files. The problem is <code>rg</code> won&#x27;t work by default in this situation. I use <code>--no-ignore-parent</code> currently as most of my files are organized into subdirectories, but it still make <code>rg</code> not useful in home directory.</p>
<p>I wish ripgrep could have a flag like <code>--no-ignore-file</code> to only ignore a specific ignore file. For example, <code>rg --no-ignore-file ~/.gitignore</code> only ignores <code>~/.gitignore</code> but still respect other <code>.gitignore</code> files in a repo.</p>
<p>Similar issue: <a href="https://github.com/BurntSushi/ripgrep/issues/372">BurntSushi/ripgrep#372</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-01 18:51</div>
            <div class="timeline-body"><p>Can you say why none of the work-arounds in #372 work for you?</p>
<p>Also, FWIW, a while ago I bit the bullet and just enumerated everything I didn&#x27;t want in my <code>~/.gitignore</code>: https://github.com/BurntSushi/dotfiles/blob/master/.gitignore. Not necessarily because of ripgrep, but because I found myself with files that I thought I had added to the source control, but didn&#x27;t actually, because they wouldn&#x27;t show up in <code>git status</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-01 18:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/maple3142">@maple3142</a> on 2021-07-01 19:03</div>
            <div class="timeline-body"><blockquote>
<p>Can you say why none of the work-arounds in #372 work for you?</p>
</blockquote>
<p>My <code>~/.gitignore</code> is like this:</p>
<pre><code>*
!.gitignore
!.zshrc
# others
</code></pre>
<p>And my home directory have folders like <code>projects</code>, <code>workspace</code>...</p>
<p>My current solution is aliasing <code>rg</code> to <code>rg --no-ignore-parent</code>, so that <code>rg [PATTERN]</code> just works if I am in <code>projects</code> or <code>workspace</code>. The downside is <code>rg [PATTERN]</code> still won&#x27;t work in home directory.</p>
<p>If <code>rg</code> could have a <code>--no-ignore-file</code>, aliasing <code>rg</code> to <code>rg --no-ignore-file ~/.gitignore</code> solves this problem perfectly.</p>
<blockquote>
<p>Also, FWIW, a while ago I bit the bullet and just enumerated everything I didn&#x27;t want in my <code>~/.gitignore</code>: <a href="https://github.com/BurntSushi/dotfiles/blob/master/.gitignore?rgh-link-date=2021-07-01T18%3A51%3A53Z">https://github.com/BurntSushi/dotfiles/blob/master/.gitignore</a>. Not necessarily because of ripgrep, but because I found myself with files that I thought I had added to the source control, but didn&#x27;t actually, because they wouldn&#x27;t show up in <code>git status</code>.</p>
</blockquote>
<p>It looks like it is not really different from what I did: exclude everything then include only what I want</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-01 19:05</div>
            <div class="timeline-body"><p>You didn&#x27;t address any of the work-arounds in #372, and my <code>.gitignore</code> is <em>not at all</em> like yours. It has zero <code>!</code> rules, for example.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/maple3142">@maple3142</a> on 2021-07-01 19:25</div>
            <div class="timeline-body"><p>A problem with <code>rg [PATTERN] *</code> is that it also follows a symlink automatically. Since I am using WSL2, I have a symlink <code>winhome</code> to my Windows home directory. But I/O performance across systems is pretty bad, so it should be avoided.
(It really follows symlink even if I didn&#x27;t use <code>--follow</code>, not sure if it is correct behavior.)</p>
<p>Adding <code>![!.]*</code> to <code>~/.ignore</code> works, but isn&#x27;t it more simpler to just ignore a specific ignore file?</p>
<p>As for <code>--no-ignore-parent</code>, I did address this work-around in previous comment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-01 19:35</div>
            <div class="timeline-body"><blockquote>
<p>Adding ![!.]* to ~/.ignore works, but isn&#x27;t it more simpler to just ignore a specific ignore file?</p>
</blockquote>
<p>I don&#x27;t think so. There are already way too many ignore related flags. Everyone wants one for their own use case. It&#x27;s likely a UX failure on my part, but the answer can&#x27;t be to just keep adding more flags.</p>
<p>Since using a <code>~/.ignore</code> file works for you, then I&#x27;m going to close this. Indeed, one of the main purposes of .ignore files is to override .gitignore when there is an impedance mismatch between what&#x27;s tracked by git and what you want to search.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-01 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-01 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wontfix</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-01 19:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:11 UTC
    </footer>
</body>
</html>
