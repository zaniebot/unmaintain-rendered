<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Option not to treat &quot;no files were searched&quot; condition as an error? - BurntSushi/ripgrep #1272</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Option not to treat &quot;no files were searched&quot; condition as an error?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1272">#1272</a>
        opened by <a href="https://github.com/rulatir">@rulatir</a>
        on 2019-04-26 18:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/rulatir">@rulatir</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<p>ripgrep 0.9.0
-SIMD -AVX</p>
How did you install ripgrep?
<p>Inside a docker image based on <code>openresty:bionic</code>:</p>
<pre><code>RUN apt-get update &amp;&amp; \
    apt-get -y install software-properties-common &amp;&amp; \
    add-apt-repository -y --update ppa:x4121/ripgrep &amp;&amp; \
    apt-get -y install git ripgrep
</code></pre>
What operating system are you using ripgrep on?
<pre><code>root@e62e48b00536:/# uname -a
Linux e62e48b00536 4.18.0-17-generic #18-Ubuntu SMP Wed Mar 13 14:34:40 UTC 2019 x86_64 x86_64 x86_64 GNU/Linux
</code></pre>
Describe your question, feature request, or bug.
<pre><code>root@e62e48b00536:/# rg -l -uuu -m1 -f- /cache/platinum 
^KEY: S:[^\t]*\tH:polanica.d\tD:[^\t]*\tU:[^\t]*\tM:[^\t]*$
No files were searched, which means ripgrep probably applied a filter you didn&#x27;t expect. Try running again with --debug.
root@e62e48b00536:/# echo $?
1
root@e62e48b00536:/#
</code></pre>
<p>Feature request: provide an option that will instruct ripgrep to treat the &quot;no files were searched&quot; condition as a normal occurrence and exit with 0 status.</p>
<p>Rationale: I am using ripgrep to crawl nginx proxy cache files and search by different fields in the cache key for the purpose of selective cache purging. It is entirely possible that the cache directory may contain no files (for example if they all have been expired by the server while nobody was visiting the website), and I don&#x27;t want to have to parse natural language that <code>rg</code> prints on stderr just to be sure that the reason for the 1 exit status is &quot;there is nothing to search at the moment&quot; rather than an actual error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rulatir">@rulatir</a> on 2019-04-26 18:40</div>
            <div class="timeline-body"><p>With <code>--no-messages</code> the error message is suppressed, but <code>rg</code> still exits with status 1 in this case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Option to not treat &quot;no files were searched&quot; condition as an error?&quot; to &quot;Option not to treat &quot;no files were searched&quot; condition as an error?&quot; by <a href="https://github.com/rulatir">@rulatir</a> on 2019-04-26 18:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-04-26 19:27</div>
            <div class="timeline-body"><p>I&#x27;m going to have to decline. The exit status is correct, where <code>1</code> is returned when no matches are found. This is consistent with how grep behaves as well. You should be able to work around this by looking at the output itself instead of just the exit status.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-04-26 19:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-04-26 19:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:08 UTC
    </footer>
</body>
</html>
