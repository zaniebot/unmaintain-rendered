<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>file:line:col doesn't play well with `--no-heading --context` - BurntSushi/ripgrep #1024</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>file:line:col doesn't play well with <code>--no-heading --context</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1024">#1024</a>
        opened by <a href="https://github.com/timotheecour">@timotheecour</a>
        on 2018-08-23 08:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/timotheecour">@timotheecour</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>ripgrep 0.9.0 (rev f1e025873f)
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)</p>
<h4>How did you install ripgrep?</h4>
<p>brew install --HEAD ripgrep</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>OSX</p>
<h4>Describe your question, feature request, or bug.</h4>
<pre><code>rg --no-heading -C2 'translatable to any command'
GUIDE.md-6-and that readers have passing familiarity with using command line tools. This
GUIDE.md-7-also assumes a Unix-like system, although most commands are probably easily
GUIDE.md:8:translatable to any command line shell environment.
GUIDE.md-9-
GUIDE.md-10-
</code></pre>
<ul>
<li>the context lines show with <code>-</code> instead of <code>:</code> which doesn't allow to open these using common tools like sublime text (or even with built in commands say on iterm2 which allow you to click on a file to open it), eg:
<code>subl GUIDE.md:8:</code> works
<code>subl GUIDE.md-7-</code> doesn't work ; user needs to edit the cmd line</li>
</ul>
<p>I'd like instead (at least via option --context-header-regular):</p>
<pre><code>rg --no-heading -C2 'translatable to any command'
GUIDE.md:6:-and that readers have passing familiarity with using command line tools. This
GUIDE.md:7:-also assumes a Unix-like system, although most commands are probably easily
GUIDE.md:8:*translatable to any command line shell environment.
GUIDE.md:9:-
GUIDE.md:10:-
</code></pre>
<p>which still shows distinction between main line and context (via * vs -)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-08-23 09:48</div>
            <div class="timeline-body"><p>Huh? Sorry but I don't understand this request. What does : vs - have to do
with opening files? Sounds like a bug in your text editor.</p>
<p>On Thu, Aug 23, 2018, 04:07 Timothee Cour <a href="mailto:notifications@github.com">notifications@github.com</a> wrote:</p>
<blockquote>
<p>What version of ripgrep are you using?</p>
<p>ripgrep 0.9.0 (rev f1e0258
<a href="https://github.com/BurntSushi/ripgrep/commit/f1e025873f2eed114141e69a39dcf92f11b09971">https://github.com/BurntSushi/ripgrep/commit/f1e025873f2eed114141e69a39dcf92f11b09971</a>
)
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)
How did you install ripgrep?</p>
<p>brew install --HEAD ripgrep
What operating system are you using ripgrep on?</p>
<p>OSX
Describe your question, feature request, or bug.</p>
<p>rg --no-heading -C2 'translatable to any command'
GUIDE.md-6-and that readers have passing familiarity with using command line tools. This
GUIDE.md-7-also assumes a Unix-like system, although most commands are probably easily
GUIDE.md:8:translatable to any command line shell environment.
GUIDE.md-9-
GUIDE.md-10-</p>
<ul>
<li>the context lines show with - instead of : which doesn't allow to
open these using common tools like sublime text (or even with built in
commands say on iterm2 which allow you to click on a file to open it), eg:
subl GUIDE.md:8: works
subl GUIDE.md-7- doesn't work ; user needs to edit the cmd line</li>
</ul>
<p>I'd like instead (at least via option --context-header-regular):</p>
<p>rg --no-heading -C2 'translatable to any command'
GUIDE.md:6:-and that readers have passing familiarity with using command line tools. This
GUIDE.md:7:-also assumes a Unix-like system, although most commands are probably easily
GUIDE.md:8:*translatable to any command line shell environment.
GUIDE.md:9:-
GUIDE.md:10:-</p>
<p>which still shows distinction between main line and context (via * vs -)</p>
<p>â€”
You are receiving this because you are subscribed to this thread.
Reply to this email directly, view it on GitHub
<a href="https://github.com/BurntSushi/ripgrep/issues/1024">https://github.com/BurntSushi/ripgrep/issues/1024</a>, or mute the thread
<a href="https://github.com/notifications/unsubscribe-auth/AAb34qPT6a79aXzszZO7zm1zVR_XEgLNks5uTmK3gaJpZM4WJCnN">https://github.com/notifications/unsubscribe-auth/AAb34qPT6a79aXzszZO7zm1zVR_XEgLNks5uTmK3gaJpZM4WJCnN</a>
.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/timotheecour">@timotheecour</a> on 2018-08-23 09:55</div>
            <div class="timeline-body"><p>sublime text (as many other tools) understands <code>subl file</code>, <code>subl file:line</code> and <code>subl file:line:column</code> , and has effect of opening file at given line and column.
it doesn't understand when a <code>-</code> is given in place of a <code>:</code> though (as <code>-</code> is treated as a filename character, not a delimiter)</p>
<p>this leads to 2 issues:</p>
<ul>
<li>when we copy a line of the <code>rg</code> output and paste it after <code>subl </code>, it requires changing the <code>-</code> to <code>:</code> otherwise it won't work</li>
<li>when using semantic history in iterm2 on OSX (which allows clicking on file names output in the terminal), it also won't work:
<img src="https://user-images.githubusercontent.com/2194784/44518907-65475b00-a680-11e8-8f25-1b062840b6f1.png" alt="image" /></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/timotheecour">@timotheecour</a> on 2018-08-23 10:05</div>
            <div class="timeline-body"><p>I see you're replying from email instead of github so you won't see my updated reply ; reposting here:</p>
<p>sublime text (as many other tools) understands <code>subl file</code>, <code>subl file:line</code> and <code>subl file:line:column</code> , and has effect of opening file at given line and column.
it doesn't understand when a <code>-</code> is given in place of a <code>:</code> though (as <code>-</code> is treated as a filename character, not a delimiter)</p>
<p>this leads to 2 issues:</p>
<ul>
<li>when we copy a line of the <code>rg</code> output and paste it after <code>subl </code>, it requires changing the <code>-</code> to <code>:</code> otherwise it won't work</li>
<li>when using semantic history in iterm2 on OSX (which allows clicking on file names output in the terminal), it also won't work:
here's the image:</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/2194784/44518907-65475b00-a680-11e8-8f25-1b062840b6f1.png" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-08-23 10:51</div>
            <div class="timeline-body"><p>I'm going to pass on this. <code>file-line-{match}</code> is the standard grep format for showing contextual lines. I don't think another flag is worth adding to change this behavior. If you want other programs to understand the <code>file-line</code> format, then teach them. If you can't teach them, then write a wrapper script that understands the <code>file-line</code> format and translates it to something they understand.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-08-23 10:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2018-08-23 10:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/timotheecour">@timotheecour</a> on 2019-08-08 22:00</div>
            <div class="timeline-body"><p>@BurntSushi could we please re-open? <code>file-line-match</code> is inherently ambiguous because <code>-</code> is valid in filenames, so there's no reliable way to teach tools without introducing some other issues / corner cases, eg:</p>
<pre><code class="language-txt">compiler/README-10-bar.txt
</code></pre>
<p>is this a file <code>compiler/README-10-bar.txt</code> or <code>compiler/README</code> at line <code>10</code> followed by context <code>bar.txt</code>
there's no way to tell.</p>
<p>Allowing customizing the 1st separator is simple and would solve this; eg:</p>
<pre><code># default:
compiler/README-10-bar.txt
# with rg --contextSep=':'
compiler/README:10-bar.txt
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2019-08-08 22:35</div>
            <div class="timeline-body"><p><code>:</code> is just as valid in file names (at least on UNIX), so that doesn't seem like it would be much better</p>
<p>Anyway, if you use <code>-0</code> the file name will be separated from the line number (or match) by a <code>NUL</code>; the output should be pretty reliably machine-parseable then</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:39 UTC
    </footer>
</body>
</html>
