<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiline mode cannot be enabled or disabled using inline modifiers - BurntSushi/ripgrep #1262</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Multiline mode cannot be enabled or disabled using inline modifiers</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1262">#1262</a>
        opened by <a href="https://github.com/dprobinson">@dprobinson</a>
        on 2019-04-21 23:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dprobinson">@dprobinson</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<p>ripgrep 11.0.1 (rev e7829c05d3)
-SIMD -AVX (compiled)
+SIMD -AVX (runtime)</p>
How did you install ripgrep?
<p>Compiled from source</p>
What operating system are you using ripgrep on?
<p>Arch Linux</p>
Describe your question, feature request, or bug.
<p>It&#x27;s possible to turn case sensitivity (and presumably other modes) on and off using inline modifiers, but this doesn&#x27;t extend to multiline mode &quot;(?m)&quot;.</p>
If this is a bug, what are the steps to reproduce the behavior?
<p>Create the following corpus.txt:</p>
<pre><code>testing
RIP
GREP
again
</code></pre>
<p>With PCRE2 engine:</p>
<pre><code>rg -P &quot;(?m)RIP\nGREP&quot; corpus.txt
</code></pre>
<p>Output (blank - see bug #1261):</p>
<pre><code></code></pre>
<p>With Rust&#x27;s engine:</p>
<pre><code>rg &quot;(?m)RIP\nGREP&quot; corpus.txt
</code></pre>
<p>Output:</p>
<pre><code>the literal &#x27;&quot;\n&quot;&#x27; is not allowed in a regex

Consider enabling multiline mode with the --multiline flag (or -U for short).
When multiline mode is enabled, new line characters can be matched.
</code></pre>
<p>N.B. It&#x27;s not possible to disable multiline mode via inline modifiers either. Eg:</p>
<pre><code>rg -U &quot;(?-m)RIP\nGREP&quot; corpus.txt
</code></pre>
<p>Output:</p>
<pre><code>2:RIP
3:GREP
</code></pre>
<p>When you wouldn&#x27;t expect a match.</p>
If this is a bug, what is the actual behavior?
<p>See above for output. Multiline mode cannot be enabled or disabled using inline modifiers.</p>
If this is a bug, what is the expected behavior?
<p>ripgrep to read the inline modifiers and enable or disable multiline mode for the relevant parts of the provided pattern as directed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-04-21 23:16</div>
            <div class="timeline-body"><p>ripgrep&#x27;s multiline mode is not the same as regex multiline mode. The former just allows patterns to match over multiple lines. The latter just makes anchors match at line boundaries (which is enabled by default for all searches, regardless of whether ripgrep&#x27;s multiline mode is enabled or not). They are entirely orthogonal options.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-04-21 23:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dprobinson">@dprobinson</a> on 2019-04-21 23:28</div>
            <div class="timeline-body"><p>That makes sense. I&#x27;d wondered if this was actually a bug or not, thanks for clarifying!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:08 UTC
    </footer>
</body>
</html>
