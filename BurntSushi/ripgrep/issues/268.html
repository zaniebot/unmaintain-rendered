<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Raise an error on regex with backreference - BurntSushi/ripgrep #268</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Raise an error on regex with backreference</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/268">#268</a>
        opened by <a href="https://github.com/anntzer">@anntzer</a>
        on 2016-12-05 00:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/anntzer">@anntzer</a></div>
            <div class="timeline-body"><p>I understand why rg's design fundamentally prevents support for backreferences, but it'd be nice if rg at least printed an error (warning?) message when a regex with a backreference is passed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-12-05 00:13</div>
            <div class="timeline-body"><p>Doesn't it print an error today?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anntzer">@anntzer</a> on 2016-12-05 00:29</div>
            <div class="timeline-body"><p><code>rg '(foo) \1'</code> prints no error as of 0.3.1 (Arch Linux AUR).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-12-05 01:03</div>
            <div class="timeline-body"><p>Ah right. Unfortunately, <code>\1</code> is actually an <a href="https://doc.rust-lang.org/regex/regex/index.html#escape-sequences">octal escape sequence</a>, so I don't think that can change at the <code>regex</code> level. We could adopt a heuristic that emits a warning message from within ripgrep, but if someone intended to type an octal escape (which seems quite rare), then the warning would be wrong.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2016-12-05 01:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anntzer">@anntzer</a> on 2016-12-05 01:04</div>
            <div class="timeline-body"><p>My guess is that more people are going to get burnt from trying a backreference, but I don't feel strongly about it either.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2016-12-12 12:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-06-01 11:12</div>
            <div class="timeline-body"><p>In light of https://github.com/Microsoft/vscode/issues/27802, I think I should re-open this. I've been thinking a lot about this as I rewrite the regex parser, and I regret that the regex engine supports octal escapes at all. It seems like such an incredibly niche feature that it would be much better to just not support them at all in favor of emitting a better failure mode when someone tries to use backreferences.</p>
<p>With that said, ripgrep could certainly decide not to support octal escapes, even if the underlying regex engine does. The current parser doesn't support this kind of introspection, but my rewrite will. Once that's ready for primetime, I'll disable octal escapes and add a better error message inside ripgrep only.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @BurntSushi on 2017-06-01 11:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-03-14 02:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:41:56 UTC
    </footer>
</body>
</html>
