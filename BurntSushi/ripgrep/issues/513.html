<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rg --pretty 'foo' | less -r - BurntSushi/ripgrep #513</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>rg --pretty 'foo' | less -r</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/513">#513</a>
        opened by <a href="https://github.com/sumonto">@sumonto</a>
        on 2017-06-14 00:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sumonto">@sumonto</a></div>
            <div class="timeline-body"><p>Using Mac</p>
<p>Search any code base with rg for a common term 'foo' in .cpp files.
Make sure the result is at least 1.5 pages.</p>
<p>Move to the end and top multiple times you shall see the output is inconsistent with which file has which occurrences of 'foo'</p>
<p>Might be a hard to repro issue.</p>
<p>---My settings---
rg ()
{
/usr/local/bin/rg --pretty $@ | less -r
}</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-06-14 01:20</div>
            <div class="timeline-body"><blockquote>
<p>Move to the end and top multiple times you shall the o/p is inconsistent with which file has which occurrences of 'foo'</p>
</blockquote>
<p>Sorry, but I don't understand. What is <code>o/p</code>? Does this happen with other utilities that emit colors?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sumonto">@sumonto</a> on 2017-06-14 17:54</div>
            <div class="timeline-body"><p>Fixed my comments + settings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-06-14 17:59</div>
            <div class="timeline-body"><p>Sorry, but I still don't understand. I'll repeat my second question: Does this happen with other utilities that emit colors?</p>
<p>Frankly, it sounds like some weird rendering bug in your terminal or something. But I don't really understand the issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2017-06-14 17:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sumonto">@sumonto</a> on 2017-06-14 18:17</div>
            <div class="timeline-body"><p>Sorry, some how part of my message got clipped.
Make sure there is enough matches to page at least 1-2 times
I don't see this issue with other utilities like grep</p>
<p>$ rg -g '!test' foobar</p>
<h2>Good output</h2>
<p>file1/file/path/file1.cpp
206: xxxxxxfoobarxxx</p>
<p>file2/file/path/file2.cpp
306: xxxxxxfoobarxxx</p>
<p>file3/file/path/file3.cpp
222: xxxxfoobar</p>
<p>file4/file/path/file4.cpp
312: xxxxxxfoobarxxx</p>
<h2>After a few scrolls up/down (using 'gg' or 'shift-g')
Bad output</h2>
<p>file1/file/path/file1.cpp
206: xxxxxxfoobarxxx</p>
<p>file2/file/path/file2.cpp</p>
<p>file3/file/path/file3.cpp</p>
<p>file4/file/path/file4.cpp
312: xxxxxxfoobarxxx</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-06-14 20:02</div>
            <div class="timeline-body"><p>I don't know how to reproduce this. My best guess is that this isn't a problem with ripgrep. But I can't explain it. I'll leave this open for now in case anyone else has any ideas on what this problem is. It would help if you could provide more information about your environment:</p>
<ol>
<li>What version of ripgrep?</li>
<li>Which shell are you using?</li>
<li>What operating system?</li>
<li>What version of <code>less</code> are you using?</li>
<li>What terminal emulator are you using?</li>
<li>Are you using tmux or screen?</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sumonto">@sumonto</a> on 2017-06-15 19:11</div>
            <div class="timeline-body"><p>Thanks, I know it is a difficult repro.</p>
<p>What version of ripgrep? 0.5.2
Which shell are you using? bash
What operating system? Mac OS latest
What version of less are you using? default less with OS
What terminal emulator are you using? iTerm2
Are you using tmux or screen? tmux 2.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-06-15 19:21</div>
            <div class="timeline-body"><p>Does the issue happen outside tmux or in other terminal emulators?</p>
<p>On Jun 15, 2017 3:11 PM, &quot;sumonto&quot; <a href="mailto:notifications@github.com">notifications@github.com</a> wrote:</p>
<p>Thanks, I know it is a difficult repro.</p>
<p>What version of ripgrep? 0.5.2
Which shell are you using? bash
What operating system? Mac OS latest
What version of less are you using? default less with OS
What terminal emulator are you using? iTerm2
Are you using tmux or screen? tmux 2.3</p>
<p>â€”
You are receiving this because you commented.</p>
<p>Reply to this email directly, view it on GitHub
<a href="https://github.com/BurntSushi/ripgrep/issues/513#issuecomment-308839186">https://github.com/BurntSushi/ripgrep/issues/513#issuecomment-308839186</a>,
or mute the thread
<a href="https://github.com/notifications/unsubscribe-auth/AAb34tl4Kuzbihigf8P8mwe73pH1qBOhks5sEYH0gaJpZM4N5Qig">https://github.com/notifications/unsubscribe-auth/AAb34tl4Kuzbihigf8P8mwe73pH1qBOhks5sEYH0gaJpZM4N5Qig</a>
.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/polarathene">@polarathene</a> on 2017-07-25 06:39</div>
            <div class="timeline-body"><p>Be sure to test without any shell frameworks/tools like zsh oh-my-zsh or anything else that modifies the rendering.</p>
<p>I remember the way a zsh theme rendered would have draw issues if you resized the window(even if you set it back to the original size prior).</p>
<p>For reproducing, if you're able to consistently reproduce it on your machine, save the output to an external file, then instead of ripgrep, confirm with running <code>cat</code> on that file and piping to <code>less</code> instead. Supposedly, you'd run into the same issue. Once you're viewing the output in a tool like less I don't see how ripgrep could be responsible for changing what's being rendered?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-10-22 01:30</div>
            <div class="timeline-body"><p>I was never able to reproduce this and I don't have any guesses as to what the problem is, so I'm just going to close it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2017-10-22 01:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:12 UTC
    </footer>
</body>
</html>
