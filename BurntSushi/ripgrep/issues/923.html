<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust 2018 edition warning - BurntSushi/ripgrep #923</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rust 2018 edition warning</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/923">#923</a>
        opened by <a href="https://github.com/sophiajt">@sophiajt</a>
        on 2018-05-20 19:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sophiajt">@sophiajt</a></div>
            <div class="timeline-body"><p>I just noticed that if you build ripgrep with a recent Rust nightly, you get a big warning at the top:</p>
<pre><code>warning: An explicit [[test]] section is specified in Cargo.toml which currently
disables Cargo from automatically inferring other test targets.
This inference behavior will change in the Rust 2018 edition and the following
files will be included as a test target:

* C:\Users\Jonathan\source\ripgrep\tests\hay.rs
* C:\Users\Jonathan\source\ripgrep\tests\workdir.rs

This is likely to break cargo build or cargo test as these files may not be
ready to be compiled as a test target today. You can future-proof yourself
and disable this warning by adding `autotests = false` to your [package]
section. You may also move the files to a location where Cargo would not
automatically infer them to be a target, such as in subfolders.

For more information on this warning you can consult
https://github.com/rust-lang/cargo/issues/5330
</code></pre>
<h4>If this is a bug, what are the steps to reproduce the behavior?</h4>
<p>Build ripgrep with a recent Rust nightly</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-05-20 19:05</div>
            <div class="timeline-body"><p>Thanks! I saw this and have it fixed on my dev branch. :-) It's good to track this though to make sure it gets done.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @BurntSushi on 2018-05-20 19:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-05-20 19:06</div>
            <div class="timeline-body"><p>(We should just set <code>autotests = false</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-06-24 00:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:33 UTC
    </footer>
</body>
</html>
