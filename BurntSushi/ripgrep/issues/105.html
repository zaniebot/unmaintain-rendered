<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>--column emits incorrect column number - BurntSushi/ripgrep #105</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>--column emits incorrect column number</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/105">#105</a>
        opened by <a href="https://github.com/olson-dan">@olson-dan</a>
        on 2016-09-26 18:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/olson-dan">@olson-dan</a></div>
            <div class="timeline-body"><p>Trying to use ripgrep 0.2.0 with vim, I'm using &quot;-n --color=never --column --no-header&quot; as arguments, which lets me use a grepformat string of &quot;%f:%l:%c:%m&quot; to capture output and jump to the matches.</p>
<p>Problem is that the %c match in Vim expects a 0-based column to be output by the grep tool.  The previous grep tool I was using matched this expectation.  Lines are still expected to be 1-based.  Documentation for vim's grepformat strings are here, for reference: http://vimdoc.sourceforge.net/htmldoc/quickfix.html#errorformat</p>
<p>I've not encountered a way to do math on the column number within vim, although it may be possible.   Wondering if you can support a syntax like &quot;--column=0based&quot;, &quot;--column=1based&quot; or some other method to support 0-based columns.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/olson-dan">@olson-dan</a> on 2016-09-26 18:12</div>
            <div class="timeline-body"><p>Just to add a note, checking with ag 0.18.1 (which I had laying around), it also appears to use 0-based columns.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-26 18:13</div>
            <div class="timeline-body"><p>Really? @latortuga claimed 1-based columns in #18.</p>
<p>Looking at your vim docs link, I can't see where columns are specified to be 1-based?</p>
<p>When I use vim, I see its line numbers and column numbers reported as both 1-based.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-26 18:15</div>
            <div class="timeline-body"><p>Ug, it looks like I have a mismatch:</p>
<pre><code>[andrew@Serval tmp] echo 'zztest' &gt; foo
[andrew@Serval tmp] rg --column test foo
1:4:zztest
[andrew@Serval tmp] rg --vimgrep test foo
1:3:zztest
</code></pre>
<p>Which one is correct?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-26 18:17</div>
            <div class="timeline-body"><p>Well, obviously, <code>4</code> is wrong. The answer is either <code>3</code> (1-based) or <code>2</code> (0-based).</p>
<p><code>ag</code> is 1-based:</p>
<pre><code>[andrew@Serval tmp] ag --column test foo
1:3:zztest
[andrew@Serval tmp] ag --vimgrep test foo
foo:1:3:zztest
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/olson-dan">@olson-dan</a> on 2016-09-26 18:17</div>
            <div class="timeline-body"><p>--vimgrep is correct, I didn't see this option earlier.  It solves my problem entirely.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "0-based column support" to "--column emits incorrect column number" by @BurntSushi on 2016-09-26 18:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-26 18:18</div>
            <div class="timeline-body"><p>@olson-dan That's good. Meanwhile, I will re-purpose this issue to fix the off-by-1 error with --column. (How embarrassing.) Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @BurntSushi on 2016-09-26 20:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2016-09-26 23:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:41:44 UTC
    </footer>
</body>
</html>
