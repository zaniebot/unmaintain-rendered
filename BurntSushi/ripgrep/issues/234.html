<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand glob paths on Windows - BurntSushi/ripgrep #234</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Expand glob paths on Windows</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/234">#234</a>
        opened by <a href="https://github.com/troplin">@troplin</a>
        on 2016-11-13 14:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/troplin">@troplin</a></div>
            <div class="timeline-body"><p>On Windows, glob expansion is not done by the shell (cmd.exe), but left to the individual program.
That means, that currently something like this doesn't work:</p>
<pre><code class="language-text">&gt;rg PATTERN *.txt
*.txt: The filename, directory name, or volume label syntax is incorrect. (os error 123)
No files were searched, which means ripgrep probably applied a filter you didn't expect. Try running again with --debug.
</code></pre>
<p>It tries to open a file called <code>*.txt</code>, which obviously doesn't exist.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-13 14:40</div>
            <div class="timeline-body"><p>What do other command line tools like <code>grep</code> do?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2016-11-13 14:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/troplin">@troplin</a> on 2016-11-13 14:45</div>
            <div class="timeline-body"><p><code>grep</code> does work as expected for me.
I installed it with cygwin though, so I'm not sure if this is a cygwin or grep feature.</p>
<p>But all native Windows tools I know do the expansion themselves, at least if it makes sense to expand.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/troplin">@troplin</a> on 2016-11-13 14:48</div>
            <div class="timeline-body"><p>Usually you just use <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx">FindFirstFile</a>/<a href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa364428%28v=vs.85%29.aspx">FindNextFile</a> for this.
Not sure if it uses the exact same rules as unix glob.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-13 15:25</div>
            <div class="timeline-body"><p><em>sigh</em> Indeed, it looks like globbing is done as part of the command line program: https://cygwin.com/ml/cygwin/2009-12/msg01097.html</p>
<p>Other instances of the same problem:</p>
<ul>
<li>https://github.com/kripken/emscripten/issues/1675</li>
<li>http://stackoverflow.com/questions/11557280/filename-globbing-windows-vs-unix</li>
</ul>
<p>I think what this means is that I need to add a glob iterator to <code>globset</code>. Alternatively, we could use the existing iterator in the <code>glob</code> crate, but it doesn't support <code>{a,b}</code> syntax and gets some non-UTF-8 corner cases wrong.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-03-13 00:32</div>
            <div class="timeline-body"><blockquote>
<p>I think what this means is that I need to add a glob iterator to globset. Alternatively, we could use the existing iterator in the glob crate, but it doesn't support {a,b} syntax and gets some non-UTF-8 corner cases wrong.</p>
</blockquote>
<p>The other other alternative is to use the standard Windows APIs for this. It seems like the kinds of globs it supports are not as nice as Unix-style globbing, but perhaps that's what Windows users expect, so it could be defensible to use that.</p>
<p>I don't anticipate working on this soon unfortunately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">icebox</span> added by @BurntSushi on 2017-03-13 00:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/troplin">@troplin</a> on 2017-03-14 20:37</div>
            <div class="timeline-body"><p>I thinks using the Windows API is better than nothing and probably easier to implement.
I might give it a try if I find the time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-03-14 20:53</div>
            <div class="timeline-body"><p>@troplin Thanks! If you do, I would hope to see the Windows logic put behind a separate crate. :-) (Which could live inside ripgrep, or could be yours to maintain.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-02-02 14:13</div>
            <div class="timeline-body"><p>Question: should ripgrep support Unix-style globbing here, or should it use the standard <code>FindFirstFile</code>/<code>FindNextFile</code> APIs, presumably to be consistent with other Windows CLI tools?</p>
<p>cc @retep998 @roblourens</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/roblourens">@roblourens</a> on 2018-02-02 16:59</div>
            <div class="timeline-body"><p>Do the windows APIs support anything besides <code>*</code> and <code>?</code>? It's not clear.</p>
<p>This doesn't affect vscode scenarios, but as a CLI user, I'd prefer more powerful patterns.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sabi0">@sabi0</a> on 2018-09-26 14:05</div>
            <div class="timeline-body"><p>How about <code>-g &lt;GLOB&gt;</code> using Unix-style globs (as it does already) and just <code>&lt;GLOB&gt;</code> falling back to Windows API?</p>
<p>Basically there is already such behavior separation between ripgrep and shell globbing on Linux. And Windows CLI is just an &quot;inferior shell&quot; one might argue. So it would be natural for (emulated) &quot;shell globbing&quot; to work in the shell native way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HerbM">@HerbM</a> on 2018-10-28 21:52</div>
            <div class="timeline-body"><p>FYI:
cmd.exe  does NOT support anything but * and ?  (specifically NOT [a-z] character classes).
PowerShell does support the character classes as part of &quot;wildcards&quot; (what it calls Globbing.</p>
<p>Current -g switch in RipGrep seems to work fine with ?, *, [class]</p>
<p>It does NOT work without the -g (which is as designed but a bit unexpected for a Windows only user.)</p>
<p>Worth putting out a Windows specific warning when the last thing on the line is *.txt or similar and nothing to search, instead of the current warning:</p>
<pre><code>*.txt: The filename, directory name, or volume label syntax is incorrect. (os error 123)</code></pre>
<p>Maybe add,</p>
<pre><code>use '-g FilePattern' for globbing (wildcard file patterns)</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dracan">@dracan</a> on 2020-02-06 19:17</div>
            <div class="timeline-body"><p>+1 for @HerbM's suggestion about mentioning the <code>-g</code> flag with the error message. This would have saved me time Googling how to grep against a file pattern, to eventually find this Github issue.</p>
<p>I've hit this issue before, but due to being in the middle of something, I've just moved over to searching in vscode instead of using RipGrep. I'm guessing that plenty of other Windows users have hit the same issue. Updating the error message would resolve this and make it immediately obvious how to do what the user was trying to do.</p>
<p>ps. Awesome tool btw! This is the only issue I've hit - other than that, it's amazing! Thanks for the great work!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-02-06 21:30</div>
            <div class="timeline-body"><p>@dracan Thanks for the feedback! Funny note though: VS Code's search uses ripgrep. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Taverius">@Taverius</a> on 2020-02-13 08:11</div>
            <div class="timeline-body"><p>Definite +1 for yelling at the operator about -g, at the very least.</p>
<p>Counterpoint though:</p>
<blockquote>
<p>findstr PATTERN *.txt</p>
</blockquote>
<p>Functions as one would expect with glob-expansion ... as does <code>ag</code>.</p>
<p>I know windows path expansions is a pain in the behind, but there's a case to be made for functional parity when even <code>findstr</code> manages it :D</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-02-13 12:09</div>
            <div class="timeline-body"><p>Folks, +1 comments are not all that useful. Instead of basically just saying &quot;me too&quot;, it would help if Windows users could answer questions I've asked. For example: https://github.com/BurntSushi/ripgrep/issues/234#issuecomment-362597070</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sabi0">@sabi0</a> on 2020-02-13 12:13</div>
            <div class="timeline-body"><p>So I suppose you didn't like my proposal from https://github.com/BurntSushi/ripgrep/issues/234#issuecomment-424727971 ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-02-13 12:17</div>
            <div class="timeline-body"><p>I have two answers to my question do far. Both of them are different. Yours is one of them. More input from others would be great. In particular, I would love to hear how existing cli utilities work. Do they use standard unix globbing? Or shell native globbing? And more importantly, do users actually like that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sabi0">@sabi0</a> on 2020-02-13 12:50</div>
            <div class="timeline-body"><p>I believe most utilities use <code>FindFirstFile</code> / <code>FindNextFile</code>. For sure the standard ones like <code>findstr</code>.
But also e.g. <code>pcre2grep</code> and <code>git</code> (see https://github.com/git/git/blob/master/compat/win32/dirent.c).</p>
<p>IMO &quot;consistency&quot; is more important than &quot;liking&quot;. So I would vote for using shell native globbing with <code>FindFirstFile</code> / <code>FindNextFile</code> on Windows.
However, as long as a special <code>-g</code> parameter is considered it would be fine IMO to make it behave consistently across all OSes (i.e. use Unix globbing).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Taverius">@Taverius</a> on 2020-02-13 13:08</div>
            <div class="timeline-body"><p><code>findstr</code> has limitations - it supports <strong>file</strong> globbing but not directory. <code>findstr /s PATTERN path/to/*.file</code> works but <code>findstr /s PATTERN path/*/*.file</code> doesn't.</p>
<p>That would be an acceptable minimum but I would strongly prefer unix parity here so that tools that rely on ripgrep don't need to split code paths for windows.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pfmoore">@pfmoore</a> on 2020-02-26 17:31</div>
            <div class="timeline-body"><blockquote>
<p>Question: should ripgrep support Unix-style globbing here, or should it use the standard FindFirstFile/FindNextFile APIs</p>
</blockquote>
<p>As a Windows user, IMO just <code>*</code> and <code>?</code>. Reasons:</p>
<ul>
<li>They are standard for Windows tools. It's what the MS C runtime does when building argv, so command line users will be used to it.</li>
<li>They are invalid filename characters, so you don't need to worry about escaping mechanisms (which is good, as backslash is unavailable due to it being the path separator).</li>
</ul>
<p>I'd argue for globbing in all elements of the path, not just on the leaf element, and supporting <code>**</code> meaning &quot;one or more levels of subdirectory&quot;, but these are nice to have rather than essential, and are not standard for the CRT, so it's entirely justifiable not to offer them.</p>
<p>Unix style globbing is powerful, and might be a bit more consistent cross-platform, but (a) you'd have to add an escaping mechanism (see above) and (b) not all Unix shells use the exactly same globbing syntax, so it's still not entirely portable. I dont think it's worth it, personally.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-02-26 17:39</div>
            <div class="timeline-body"><p>@pfmoore Thanks for the feedback! I think the two choices here are &quot;support Windows-style globbing using the corresponding winapi calls&quot; or &quot;support Unix-style globbing.&quot; I don't think I'm willing to do some inbetween state.</p>
<p>Also, note that ripgrep already supports Unix-style globbing on Windows with the <code>-g/--glob</code> flag, along with the various gitignore support. This is why the underlying glob library <a href="https://docs.rs/globset/0.4.4/globset/struct.GlobBuilder.html#method.backslash_escape">permits disabling backslash as an escape</a>, which is indeed disabled on Windows by default. Moreover, globs already have an additional escaping mechanism built in. e.g., You can use <code>[*]</code> to refer to a literal <code>*</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SandraEickel">@SandraEickel</a> on 2020-08-27 12:25</div>
            <div class="timeline-body"><p>I have filed issue #1667 after browsing open issues which brought me here.</p>
<p>IMHO the best option would be for ripgrep to behave</p>
<ul>
<li>Windows-like when running from CMD or PowerShell</li>
<li>UNIX-like when running from Git Bash (MINGW64) or CygWin
including input and output of path seperators, nor only globbing mechanisms.</li>
</ul>
<p>So, this is no inbetween state - it is just checking for the type of environment (shell) and behaving accordingly.</p>
<p>There's no RUST for OS/2, but there we have the same situation, the normal OS/2 CMD (or 4OS2) and a UNIX-like environment with Dash (instead of Bash).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/workingjubilee">@workingjubilee</a> on 2023-07-04 21:59</div>
            <div class="timeline-body"><p>I believe ripgrep should not reimplement Unix globbing by default because it creates an incorrect expectation that a responsibility of the shell should be the responsibility of individual programs, demanding everyone repeat the work that the shell is very well capable of doing itself.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-07-04 22:04</div>
            <div class="timeline-body"><p>That's a fair point, but if end users are hitting this problem in a popular shell and there is no work-around for them, then it makes sense to me for ripgrep to expand the globs. AIUI, this is standard for Windows CLI tools? Although I'm not 100% sure on that. It might also help here to enumerate the shells that fail to expand globs. Is it just <code>cmd.exe</code> or is it PowerShell too?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pfmoore">@pfmoore</a> on 2023-07-04 22:31</div>
            <div class="timeline-body"><p>Powershell leaves it to the program as well. It‚Äôs the standard on windows that globbing is done by the individual program - in fact, the C runtime glob-expands argv automatically, so programs written in C get this behaviour without needing any explicit code for it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/workingjubilee">@workingjubilee</a> on 2023-07-04 22:35</div>
            <div class="timeline-body"><p>Is the argv globbing behavior exposed as a user function to call, at least?</p>
<p>It's slightly disappointing to hear PowerShell is afflicted with this. Globbing may start with a string, yes, but morally it expands to generate a list, the kind of nicely-structured data PowerShell likes. e.g. note this deviation between &quot;classic&quot; shell globbing and POSIX-compliant globbing:</p>
<pre><code class="language-quote">    Empty lists
       The nice and simple rule given above: &quot;expand a wildcard pattern
       into the list of matching pathnames&quot; was the original UNIX
       definition.  It allowed one to have patterns that expand into an
       empty list, as in

           xv -wait 0 *.gif *.jpg

       where perhaps no *.gif files are present (and this is not an
       error).  However, POSIX requires that a wildcard pattern is left
       unchanged when it is syntactically incorrect, or the list of
       matching pathnames is empty.  With bash one can force the
       classical behavior using this command:

           shopt -s nullglob

       (Similar problems occur elsewhere.  For example, where old
       scripts have

           rm `find . -name &quot;*~&quot;`

       new scripts require

           rm -f nosuchfile `find . -name &quot;*~&quot;`

       to avoid error messages from rm called with an empty argument
       list.)
</code></pre>
<p>‚Äî<a href="https://man7.org/linux/man-pages/man7/glob.7.html">glob(7) man page</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-07-04 22:45</div>
            <div class="timeline-body"><p>@workingjubilee AIUI, you're supposed to use <a href="https://learn.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-findfirstfilea?redirectedfrom=MSDN"><code>FindFirstFile</code></a> and <a href="https://learn.microsoft.com/en-us/windows/win32/api/fileapi/nf-fileapi-findnextfilea?redirectedfrom=MSDN"><code>FindNextFile</code></a>. The problem with those, IMO, is that the globbing syntax supported is extremely limited. I think it's basically just <code>?</code> and <code>*</code>. Better than nothing I suppose. There is discussion above talking about whether to use the Windows native functions or to just do our own globbing.</p>
<p>@pfmoore</p>
<blockquote>
<p>in fact, the C runtime glob-expands argv automatically</p>
</blockquote>
<p>Is this documented anywhere?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pfmoore">@pfmoore</a> on 2023-07-04 23:07</div>
            <div class="timeline-body"><blockquote>
<p>It's slightly disappointing to hear PowerShell is afflicted with this. Globbing may start with a string, yes, but morally it expands to generate a list, the kind of nicely-structured data PowerShell likes.</p>
</blockquote>
<p>The thing is, it's not a matter of being &quot;afflicted&quot;. It's a design choice - not all arguments are filenames, so why should the shell arbitrarily choose to treat them as such? But regardless of philosophy, it is a reality that Windows shells don't glob arguments, and it's extremely clumsy (probably impossible if you use <code>cmd.exe</code>) to manually glob in the shell so that a program sees a file list. So <em>not</em> globbing in the application is, whether you like it or not, a usability issue for Windows users.</p>
<blockquote>
<p>Is this documented anywhere?</p>
</blockquote>
<p>I found <a href="https://learn.microsoft.com/en-us/cpp/c-language/expanding-wildcard-arguments?view=msvc-170">this</a>. I'm surprised it says it's not the default - maybe MSVC links that in by default and that document is about the C runtime not the compiler. Or maybe my memory is faulty, and it always needed the extra object file linking in. it's been quite a long while since I programmed in C in earnest. But all of that's very much for C, I don't know how or if it would relate to Rust.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/workingjubilee">@workingjubilee</a> on 2023-07-05 17:24</div>
            <div class="timeline-body"><blockquote>
<p>The thing is, it's not a matter of being &quot;afflicted&quot;. It's a design choice - not all arguments are filenames, so why should the shell arbitrarily choose to treat them as such?</p>
</blockquote>
<blockquote>
<p>So not globbing... is, whether you like it or not, a usability issue for Windows users.</p>
</blockquote>
<p>Choose one!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pfmoore">@pfmoore</a> on 2023-07-05 17:59</div>
            <div class="timeline-body"><blockquote>
<p>Choose one!</p>
</blockquote>
<p>Personally, I choose having the application do the globbing on operating systems where that's the norm...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/workingjubilee">@workingjubilee</a> on 2023-07-05 18:01</div>
            <div class="timeline-body"><p>Please go open an issue in the thousands of other application repos where this problem will remain unsolved by addressing it here, then.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-07-05 18:07</div>
            <div class="timeline-body"><p>Can we stop this tit-for-tat? This issue tracker is for ripgrep. I appreciate the argument that it would be better if this were solved in shell, but that is not a trump card IMO. It's just one consideration of many.</p>
<p>This issue is open because I generally think this is worth fixing on ripgrep's side, but I also simultaneously am not currently prioritizing it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pfmoore">@pfmoore</a> on 2023-07-05 18:08</div>
            <div class="timeline-body"><p>Sorry, you're right.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kimiyoribaka">@kimiyoribaka</a> on 2024-09-03 00:00</div>
            <div class="timeline-body"><p>Edit: Oh, Sorry, I just realized after posting that this is the wrong github project. I was trying to follow the discussions for emscripten, and I didn't know that github mentions could link to other projects.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pfmoore">@pfmoore</a> on 2025-05-30 16:19</div>
            <div class="timeline-body"><p>Is there any progress on this? I just hit it again, and came back here to see what the status was, but it looks like there's no change. Is there anything I can do to help (I'm a beginner at Rust, so I don't know how much coding help I can offer üôÅ)?</p>
<p>FWIW, a workaround on Powershell is</p>
<pre><code>rg needle (dir haystack/*.txt)
</code></pre>
<p>which isn't ideal, but at least it's better than pulling out my old copy of grep...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-05-30 16:25</div>
            <div class="timeline-body"><p>I don't think there's a simple solution to this. One of my long term projects is re-working the globbing/gitignore in ripgrep, but it's still pretty early days. It would include a directory iterator which we could leverage for this.</p>
<p>Probably the best work-around is what you have, or using ripgrep's <code>-g/--glob</code> flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pfmoore">@pfmoore</a> on 2025-05-30 16:50</div>
            <div class="timeline-body"><p>Thanks. I'm not sure I understand how <code>--glob</code> would work here? I did a quick check and got an error:</p>
<pre><code>‚ùØ rg ubuntu (dir .github/workflows/*)
C:\Work\Projects\editables\.github\workflows\pre-commit.yml
11:    runs-on: ubuntu-latest

C:\Work\Projects\editables\.github\workflows\publish.yml
8:    runs-on: ubuntu-latest
36:    runs-on: ubuntu-latest
58:    runs-on: ubuntu-latest
99:    runs-on: ubuntu-latest
‚ùØ rg ubuntu -g .github/workflows/*
rg: No files were searched, which means ripgrep probably applied a filter you didn't expect.
Running with --debug will show why files are being skipped.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-05-30 17:01</div>
            <div class="timeline-body"><p>It can't work in all cases because <code>-g/--glob</code> is a filtering mechanism, where as supplying files as arguments explicitly tells ripgrep to search those and only those files. And that in turn overrides any of ripgrep's smart filtering that it's doing. So in your case, ripgrep is likely not descending into <code>.github</code> because it's a hidden directory. But if you tell ripgrep to disable all smart filtering, then it should act like you want. e.g.,</p>
<pre><code>$ git remote -v
origin  git@github.com:BurntSushi/jiff (fetch)
origin  git@github.com:BurntSushi/jiff (push)
$ git rev-parse HEAD
8105228403c45402a5f553a80044d6a64891a8ab
$ rg CROSS
$ rg -g '.github/workflows/*' CROSS
rg: No files were searched, which means ripgrep probably applied a filter you didn't expect.
Running with --debug will show why files are being skipped.
$ rg -uuu -g '.github/workflows/*' CROSS
.github/workflows/ci.yml
401:      CROSS_VERSION: v0.2.5
426:        curl -LO &quot;https://github.com/cross-rs/cross/releases/download/$CROSS_VERSION/cross-x86_64-unknown-linux-musl.tar.gz&quot;
505:      CROSS_VERSION: v0.2.5
521:        curl -LO &quot;https://github.com/cross-rs/cross/releases/download/$CROSS_VERSION/cross-x86_64-unknown-linux-musl.tar.gz&quot;
</code></pre>
<p>For the specific case of including <code>.github</code> (or similar) directories in your searches, you might also consider adding a <code>.ignore</code> or <code>.rgignore</code> explicitly whitelisting it. <a href="https://github.com/BurntSushi/ripgrep/blob/6dfaec03e830892e787686917509c17860456db1/.ignore#L1">I do this in ripgrep's repo for example.</a></p>
<p>I acknowledge this is a non-ideal work-around.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pfmoore">@pfmoore</a> on 2025-05-30 18:52</div>
            <div class="timeline-body"><p>Ah! I'd forgotten <code>.github</code> is ignored by default. That explains it.</p>
<p>With the <code>--glob</code> and <code>(dir ...)</code> workarounds, that's sufficient until the long-term solution comes about. Thanks for your help.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:41:53 UTC
    </footer>
</body>
</html>
