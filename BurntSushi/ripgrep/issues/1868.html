<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Context output options (-A, -B, and -C) do not override the &quot;--passthru&quot; option - BurntSushi/ripgrep #1868</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Context output options (-A, -B, and -C) do not override the &quot;--passthru&quot; option</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1868">#1868</a>
        opened by <a href="https://github.com/lousyd">@lousyd</a>
        on 2021-05-19 15:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/lousyd">@lousyd</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>ripgrep 12.1.1
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)</p>
<h4>How did you install ripgrep?</h4>
<p>dnf install ripgrep</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>GNU/Linux 5.11.18-300.fc34.x86_64 x86_64</p>
<h4>Describe your bug.</h4>
<p>The general approach of configuration and command line options seems to be that if two options conflict, the later one prevails and the earlier one is treated as if it were never given. For example, the &quot;--binary&quot; option will cancel out the &quot;--no-binary&quot; option if it appears later in the configuration file or later on the command line. Similarly, &quot;--text&quot; will override the &quot;--binary&quot; option if it appears later in the configuration file or command line, and vice versa. However, the context output options (-A, -B, and -C) do not similarly override and get overridden by the &quot;--passthru&quot; option. It seems as if they should override each other.</p>
<p>I encountered this when spitting out a bunch of JSON that I wanted to filter through ripgrep. I put together my command line to output the JSON, then piped it to rg with &quot;--passthru&quot; and my pattern. It worked as expected. Then I up-arrowed to get the same command line but added a &quot;-C&quot; to it. I didn't even think about the fact that I hadn't removed the previous &quot;--passthru&quot;. I just thought, conceptually, that I was further refining the command line to filter down the results a little more. It confused me when I still got aaalllll of the JSON.</p>
<h4>What are the steps to reproduce the behavior?</h4>
<pre><code>printf 'line 1\nline 2\nline 3\n' | rg --passthru -B1 3
printf 'line 1\nline 2\nline 3\n' | rg -B1 --passthru 3
</code></pre>
<h4>What is the expected behavior?</h4>
<p>It seems as if the context output options (-A, -B, and -C) should override the &quot;--passthru&quot; option, and vice versa, when given later in the configuration file or command line.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-05-19 15:51</div>
            <div class="timeline-body"><p>Yes, I think I agree.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @BurntSushi on 2021-05-19 15:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rollup</span> added by @BurntSushi on 2021-05-31 01:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2021-06-01 01:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:22 UTC
    </footer>
</body>
</html>
