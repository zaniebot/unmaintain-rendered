<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is there a way to make --files -g recurse into subdirectories? - BurntSushi/ripgrep #436</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is there a way to make --files -g recurse into subdirectories?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/436">#436</a>
        opened by <a href="https://github.com/jmatraszek">@jmatraszek</a>
        on 2017-04-02 21:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jmatraszek">@jmatraszek</a></div>
            <div class="timeline-body"><p>As suggested in #284 I am opening a new issue.</p>
<p>Using <code>linux</code> repo: there are almost 60k files there (<code>find | wc -l</code> reports 59 296).</p>
<p><code>ag -g ''</code> reports 55 292 files and takes 0.8 second. This is the command that will be run by Unite plugin to collect the initial matches.</p>
<p><code>rg --files -g *''*</code> reports 8 files (just the top-level files). So, let's try some other glob: <code>rg --files -g **/*''*</code> reports 965 (files inside top-level directories only). The only way to make <code>rg</code> return all files from the directory is to use <code>shopt -s globstar</code>, then <code>rg --files -g *''*</code> will return all files that should be returned, but it will take 3-4 seconds to run.</p>
<p>This wouldn't be that bad if Unite used this command on each pattern that is entered in its window (<code>ag -g 'Makefile'</code> and <code>rg --files -g *'Makefile'*</code> return (more or less) the same list of files). The problem is that it collects the initial list of files using this command, then just filters it for matches (so using <code>rg</code> only 8 files will be available to choose at the beginning and then, after typing <code>Makefile</code> as the pattern, one file: top-level Makefile).</p>
<p>So, is there a way to make <code>rg</code> recurse into directories (other than enabling <code>globstar</code>)?</p>
<p>P.S. Not a high-priority, I can always fallback to using <code>find</code>/<code>ag</code> in Unite. :) Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-04-02 21:55</div>
            <div class="timeline-body"><p>Why can't you just use <code>rg --files</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jmatraszek">@jmatraszek</a> on 2017-04-02 22:11</div>
            <div class="timeline-body"><p>Wow, this was so simple that I haven't thought of it! xD Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jmatraszek on 2017-04-02 22:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:08 UTC
    </footer>
</body>
</html>
