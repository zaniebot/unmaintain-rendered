<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is --ignore-file having lower precedence than .gitignore intentional? - BurntSushi/ripgrep #901</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is --ignore-file having lower precedence than .gitignore intentional?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/901">#901</a>
        opened by <a href="https://github.com/mqudsi">@mqudsi</a>
        on 2018-04-29 21:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mqudsi">@mqudsi</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<p>rg 0.8.1</p>
What operating system are you using ripgrep on?
<p>Linux/WSL</p>
Describe your question, feature request, or bug.
<p>I&#x27;m curious as to whether the intention to assign ignore files passed in via <code>--ignore-file</code> a <em>lower</em> precedence than an existing <code>.gitignore</code> (or other vcs ignore). This means the only way to exclude a file already included in <code>.gitignore</code> is to use a hardcoded <code>.rgignore</code>/<code>.ignore</code> file or exclude .gitignore entirely with <code>--no-vcs-ignore</code>.</p>
If this is a bug, what are the steps to reproduce the behavior?
<pre><code>mqudsi@ZBook /m/c/U/M/g/r/j/foo&gt; ls
mqudsi@ZBook /m/c/U/M/g/r/j/foo&gt; mkdir bar
mqudsi@ZBook /m/c/U/M/g/r/j/foo&gt; touch bar/baz
mqudsi@ZBook /m/c/U/M/g/r/j/foo&gt; echo &quot;bar&quot; &gt; .gitignore
mqudsi@ZBook /m/c/U/M/g/r/j/foo&gt; echo &quot;!bar&quot; &gt; exclude.txt
mqudsi@ZBook /m/c/U/M/g/r/j/foo&gt; rg --ignore-file exclude.txt --files
mqudsi@ZBook /m/c/U/M/g/r/j/foo&gt; mv exclude.txt .ignore
mqudsi@ZBook /m/c/U/M/g/r/j/foo&gt; rg --files
bar/baz
mqudsi@ZBook /m/c/U/M/g/r/j/foo&gt;
</code></pre>
Rationale
<p>Presume an existing directory tree with valid <code>.gitignore</code>, <code>.rgignore</code>, and <code>.ignore</code> files, and a need to specify a custom <code>rg --files</code> list (for example, to generate a list of files that should be included in a as <code>Makefile</code> dependencies dynamically), which has no bearing on whether or not the user wants to include these files in <code>fd</code> or <code>rg</code> output.</p>
<p>Additionally, consider the case of a 3rd party tool that wishes to exclude certain files from output and generates its output with <code>rg</code>. The only way to force a particular file/directory to be included without allowing all other ignored entities would be to back up a <code>.ignore</code> file (if it exists), and use that filename for its own content, pass in the backuped version of <code>.ignore</code> as <code>--ignore-file</code> (and risk running into this same bug!), run <code>rg</code>, then restore the <code>.ignore</code> (ok, I&#x27;m being dramatic).</p>
<p>Really, it&#x27;s just the idea that anything manually specified for <em>this</em> run should take precedence over a default ignore, the same reason why <code>.rgignore</code> has priority over <code>.gitignore</code> (command-specific, then tool-specific, then repository-specific excludes given priority in that order).</p>
<p>But if there&#x27;s a good reason why this <em>isn&#x27;t</em> currently the case, I apologize and would ask enlightenment.</p>
<p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-29 21:49</div>
            <div class="timeline-body"><p>Yes, it is intended. The point of <code>--ignore-file</code> is to specify a &quot;global&quot; set of ignore rules. The <code>.gitignore</code>/<code>.rgignore</code>/<code>.ignore</code> files are all more specific and apply to a particular directory tree, which is interpreted as overriding the global rules.</p>
<p>If you need to specify rules for a specific run of ripgrep, then use the <code>-g/--glob</code> flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-29 21:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-29 21:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mqudsi">@mqudsi</a> on 2018-04-29 22:02</div>
            <div class="timeline-body"><p>Thanks.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:06 UTC
    </footer>
</body>
</html>
