<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Option for outputting absolute paths - BurntSushi/ripgrep #958</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Option for outputting absolute paths</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/958">#958</a>
        opened by <a href="https://github.com/SigmundVik">@SigmundVik</a>
        on 2018-06-21 11:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/SigmundVik">@SigmundVik</a></div>
            <div class="timeline-body"><p>It would be great if ripgrep had an option that would change the output file paths to be absolute instead of relative.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-21 11:44</div>
            <div class="timeline-body"><p>Why? What problem are you trying to solve?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-21 11:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SigmundVik">@SigmundVik</a> on 2018-07-03 06:02</div>
            <div class="timeline-body"><p>I have a macro in the text editor that I&#x27;m using (SlickEdit) that interprets the content of the clipboard as a file path (and line number if present) and opens the file with that path (and jumps to the line number).</p>
<p>For this macro to work either the path needs to be relative to SlickEdit&#x27;s current working directory, or it needs to be an absolute path.</p>
<p>To support this I have added a TCC alias (TCC is part Take Command, a Windows CMD replacement):</p>
<pre><code>alias rg `(%@if[%TREE_ROOT==none,%DEFAULT_TREE_ROOT%,%TREE_ROOT%]\base-00\exe\rg ^ 
    %$ -n --no-ignore-parent --color never --no-heading . ^
    | b sed &#x27;s/^^/%@replace[\,\\\,%_CWD]\\\/&#x27;)`
</code></pre>
<p>The <code>b</code> alias expands to a Cygwin bin directory, so this alias uses sed to turn the relative paths into absolute paths.  This works fine except that it makes grepping slower and also requires command grouping when redirecting the output:</p>
<pre><code>[Windows] 07:40 0:00:00.34 332514M c:\users\viks\source\repos\consoleapplication1&gt;rg main
C:\Users\VikS\source\repos\ConsoleApplication1\ConsoleApplication1\ConsoleApplication1.cpp:7:int main()
</code></pre>
<pre><code>[Windows] 07:46 0:00:01.23 332513M c:\users\viks\source\repos\consoleapplication1&gt;(rg main) &gt; out.txt 
</code></pre>
<p>The latter command hangs when <code>rg main</code> is not enclosed in parentheses.</p>
<p>So long story short, the problem I am trying to solve is:</p>
<ul>
<li>Better performance when outputting absolute paths for ripgrep (and easier aliases)</li>
<li>Avoid the need of TCC command grouping when redirecting output from my rg alias</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-07-03 10:53</div>
            <div class="timeline-body"><p>@SiggyBar Thanks for elaborating! Unfortunately, I don&#x27;t think this is a good fit for ripgrep. It sounds like you have a decent enough work around for what sounds like a pretty niche problem.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-07-03 10:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wontfix</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-07-03 10:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wpcarro">@wpcarro</a> on 2018-07-11 21:42</div>
            <div class="timeline-body"><p>Would love an absolute path option as well... I have an iTerm integration that&#x27;ll open files in Emacs. It only works with absolute paths though.</p>
<p>Unfortunately piping to <code>realpath</code> isn&#x27;t an option. I could pipe to <code>awk</code> and do some conditional piping to <code>realpath</code>, but this feels dirty.</p>
<p>@BurntSushi is supporting absolute paths totally out of the question?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-07-11 22:02</div>
            <div class="timeline-body"><p>@wpcarro Yes. I&#x27;m sure you can build a suitable work-around.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/timotheecour">@timotheecour</a> on 2018-07-11 23:56</div>
            <div class="timeline-body"><p>@BurntSushi
I also would like an option for outputting absolute paths. I don&#x27;t see how that&#x27;s a niche problem, judging from others mentioning here they have the with the same issue.
in my case, I want to be able to open the file in sublime text (subl) or in fact any editor, and I need the file being shown, eg:</p>
<pre><code>rg -t nim --no-heading format foo*.nim
# no file is shown !! unusable...
2204:  ## It uses the format ``yyyy-MM-dd&#x27;T&#x27;HH-mm-sszzz``.
2208:  result = format(dt, &quot;yyyy-MM-dd&#x27;T&#x27;HH:mm:sszzz&quot;)
... long list
2212:  ## time zone and use the format ``yyyy-MM-dd&#x27;T&#x27;HH-mm-sszzz``.
</code></pre>
<p>subl 2212: # doesn&#x27;t work</p>
<p>with proposed --fullPath:</p>
<pre><code>rg -t nim --no-heading --fullPath format foo*.nim
/abs/path/to/foo.nim:2204:  ## It uses the format ``yyyy-MM-dd&#x27;T&#x27;HH-mm-sszzz``.
...
</code></pre>
<p>subl /abs/path/to/foo.nim:2204: #works</p>
<blockquote>
<p>Yes. I&#x27;m sure you can build a suitable work-around.</p>
</blockquote>
<p>not possible in lots of use cases, eg when using rg through a command that cd&#x27;s to another directory first (so <code>pwd</code> is not the correct thing), or when (as in my example above), no file name is shown at all</p>
<p>The workarounds are massively more complex than adding in the option at the source (say with --fullPath)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-07-12 10:47</div>
            <div class="timeline-body"><blockquote>
<p>I don&#x27;t see how that&#x27;s a niche problem, judging from others mentioning here they have the with the same issue.</p>
</blockquote>
<p>I guess I need to stop using the word &quot;niche&quot; because you aren&#x27;t the first to see it as an invitation to pick at my use of it. The problem is that the word &quot;niche&quot; bundles up quite a bit, and re-litigating this every single time I say &quot;no&quot; to something is <em>seriously</em> tiring. To elaborate, what I&#x27;m saying here is that &quot;this feature, in balance doesn&#x27;t carry its weight.&quot; Namely, that the number of folks clamoring for it, in the context of the problems it solves and in the context of available work arounds, <strong>in my opinion</strong>, do not sufficiently counter balance the work required to implement it, maintain it and the time required to respond to future feature requests and bug reports related to this feature. This is an inherently <strong>subjective</strong> assessment on my part as the maintainer, since the only data I have is my ability to guess based on responses in the issue tracker. Moreover, I find it very difficult to, on occasion, trust the perspective of end users implicitly because they often have tunnel vision and unfairly weight <em>their pet features</em> above all other costs that are, frankly, invisible to them but <em>highly</em> visible to me.</p>
<p>The end result is a delicate balance. As such, I have frequently reversed course on features I was previously opposed to as my calculus changes due to updated data. That could happen for this feature too, but three people asking for it to service use cases that I find down right strange ain&#x27;t gunna do it. Sorry.</p>
<p>For example:</p>
<blockquote>
<p>I want to be able to open the file in sublime text (subl) or in fact any editor</p>
</blockquote>
<p>This just doesn&#x27;t make any sense to me. I do things like this all the time:</p>
<pre><code>$ vim $(rg -l pattern)
</code></pre>
<p>and it <em>just works</em>.</p>
<p>If, for some reason, your particular editor is incapable of dealing with relative file paths (which seems crazy to me, but hey, maybe it&#x27;s a thing), then I really don&#x27;t see why the onus should be on ripgrep to solve that problem. Moreover, ripgrep can already emit absolute file paths because the file paths it does emit are based directly on the file path you give it in the first place. Compare:</p>
<pre><code>$ pwd
/home/andrew/rust/ripgrep

$ rg &#x27;fn is_empty&#x27; | cat
globset/src/lib.rs:    pub fn is_empty(&amp;self) -&gt; bool {
grep-matcher/src/lib.rs:    pub fn is_empty(&amp;self) -&gt; bool {
grep-matcher/src/lib.rs:    fn is_empty(&amp;self) -&gt; bool {
termcolor/src/lib.rs:    pub fn is_empty(&amp;self) -&gt; bool {
ignore/src/gitignore.rs:    pub fn is_empty(&amp;self) -&gt; bool {
ignore/src/types.rs:    pub fn is_empty(&amp;self) -&gt; bool {
ignore/src/overrides.rs:    pub fn is_empty(&amp;self) -&gt; bool {

$ rg &#x27;fn is_empty&#x27; $(pwd) | cat
/home/andrew/rust/ripgrep/globset/src/lib.rs:    pub fn is_empty(&amp;self) -&gt; bool {
/home/andrew/rust/ripgrep/grep-matcher/src/lib.rs:    pub fn is_empty(&amp;self) -&gt; bool {
/home/andrew/rust/ripgrep/grep-matcher/src/lib.rs:    fn is_empty(&amp;self) -&gt; bool {
/home/andrew/rust/ripgrep/termcolor/src/lib.rs:    pub fn is_empty(&amp;self) -&gt; bool {
/home/andrew/rust/ripgrep/ignore/src/gitignore.rs:    pub fn is_empty(&amp;self) -&gt; bool {
/home/andrew/rust/ripgrep/ignore/src/types.rs:    pub fn is_empty(&amp;self) -&gt; bool {
/home/andrew/rust/ripgrep/ignore/src/overrides.rs:    pub fn is_empty(&amp;self) -&gt; bool {
</code></pre>
<blockquote>
<p>eg when using rg through a command that cd&#x27;s to another directory first (so pwd is not the correct thing)</p>
</blockquote>
<p>Sorry, but I don&#x27;t understand this. If you run <code>rg foo</code> without an explicit path, then that&#x27;s equivalent to <code>rg foo ./</code> which is in turn equivalent to <code>rg foo $(pwd)</code> in terms of the directory that is searched.</p>
<blockquote>
<p>or when (as in my example above), no file name is shown at all</p>
</blockquote>
<p>This is entirely expected and matches the standard behavior of <code>grep</code>. If ripgrep only searches one file given by explicit arguments (in this case, your glob must have matched exactly one file), then it does not print the file name by default. You can force the issue with the <code>--with-filename</code> flag. Case in point:</p>
<pre><code>$ rg &#x27;fn is_empty&#x27; ignore/src/git*.rs
165:    pub fn is_empty(&amp;self) -&gt; bool {

$ rg &#x27;fn is_empty&#x27; ignore/src/git*.rs --with-filename
ignore/src/gitignore.rs
165:    pub fn is_empty(&amp;self) -&gt; bool {
</code></pre>
<p>Describing this behavior as &quot;unusable&quot; is seriously unproductive.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SigmundVik">@SigmundVik</a> on 2018-07-12 14:30</div>
            <div class="timeline-body"><p>Thank you for making it clear that ripgrep already can emit absolute file paths.  It is a bit embarrassing that I did not realize this myself..</p>
<p>I changed my alias from</p>
<pre><code>alias rg `%@if[%TREE_ROOT==none,%DEFAULT_TREE_ROOT%,%TREE_ROOT%]\base-00\exe\rg ^
    %$ -n --no-ignore-parent --color never --no-heading . ^
    | b sed &#x27;s/^^/%@replace[\,\\\,%_CWD]\\\/&#x27;)`
</code></pre>
<p>to</p>
<pre><code>alias rg `%@if[%TREE_ROOT==none,%DEFAULT_TREE_ROOT%,%TREE_ROOT%]\base-00\exe\rg ^
    %$ -n --no-ignore-parent --color never --no-heading %_CWD`
</code></pre>
<p>Now it works exacly like I want, and I have no need for the option that I initially asked for.</p>
<p>Thank you for making ripgrep, it is a great tool!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alloc33">@alloc33</a> on 2025-02-14 07:09</div>
            <div class="timeline-body"><p>rg -l -0 my_text | xargs -0 realpath</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:06 UTC
    </footer>
</body>
</html>
