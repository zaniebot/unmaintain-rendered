<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>invoke a pager to display results - BurntSushi/ripgrep #86</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>invoke a pager to display results</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/86">#86</a>
        opened by <a href="https://github.com/c-cube">@c-cube</a>
        on 2016-09-25 17:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/c-cube">@c-cube</a></div>
            <div class="timeline-body"><p>Just tried the tool, it's great (as is the blostpost btw). I'm usually using <code>grep -r foo | less -R</code> for searching (with an alias to get colored output), since there might be several pages of results; <code>rg</code> coloring is nice but is lost if piped into a pager. Would it make sense to invoke a pager automatically if the tool detects that its output is not piped?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-25 17:26</div>
            <div class="timeline-body"><p>You might consider passing the <code>-p</code> flag to <code>rg</code>, which should cause it to retain its formatting.</p>
<p>I'm a little skeptical about actually calling a pager from within <code>rg</code>. That kind of seems like it's doing too much. (I will note though that <code>git grep</code> seems to do it, and it seems smart. It will invoke the pager automatically if there are lots of results.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/c-cube">@c-cube</a> on 2016-09-25 17:28</div>
            <div class="timeline-body"><p>Indeed, I will probably alias <code>rg</code> to <code>rg -p</code>. Still, automatic paging is quite nice :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2016-09-25 19:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ayoshi">@ayoshi</a> on 2016-09-25 19:05</div>
            <div class="timeline-body"><p>BTW, there is a nice way to invoke pager from rust console CLI: https://gitlab.com/imp/pager-rs it does pager instantiation in a quite clever way</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-25 19:12</div>
            <div class="timeline-body"><p>@ayoshi That is pretty slick. It won't work on Windows though. Doing it only on *nix is an option if we decide to proceed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2016-09-26 10:03</div>
            <div class="timeline-body"><p>git does it the same way I believe, makes sure that the pager is the parent process.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JohnVillalovos">@JohnVillalovos</a> on 2016-09-26 17:01</div>
            <div class="timeline-body"><p>+1 from me on having a pager. I like how &quot;git grep&quot; will page the results. Something like that would be nice.</p>
<p>I can do:</p>
<p><code>$ rg -p foo | less -r</code></p>
<p>Mostly works. But it can leave stray colors. As in my prompt becomes green.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-26 17:04</div>
            <div class="timeline-body"><p>@JohnVillalovos If you use <code>less -R</code>, does that help with the stray colors?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JohnVillalovos">@JohnVillalovos</a> on 2016-09-26 17:09</div>
            <div class="timeline-body"><p>@BurntSushi Thanks, that does work :)</p>
<p>More typing than I would like.  /me lazy  ;)  But it works!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-26 17:15</div>
            <div class="timeline-body"><p>@JohnVillalovos Yeah, I have <code>alias less=&quot;less -R&quot;</code> in my <code>.bashrc</code>. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2016-09-26 18:46</div>
            <div class="timeline-body"><p>um I'm trying to make a shell script for that (better than alias, available in more contexts)</p>
<pre><code class="language-sh">#!/bin/sh

rg -p &quot;$@&quot; | less -R
</code></pre>
<p>(chmod +x that thing and call it as <code>rg test</code> to try). This just shows a blank terminal and seems to eat memory. <strong>Warning</strong>: If you reproduce, be sure to Ctrl-C it quick. Am I doing something wrong or what's happening?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2016-09-26 18:49</div>
            <div class="timeline-body"><p>Oh.. oh.. :tired_face:</p>
<p>any brown paper bags available?</p>
<p><em>Hint: I made it spawn itself recursively.</em> sigh.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kugel-">@kugel-</a> on 2016-09-27 08:19</div>
            <div class="timeline-body"><p>I also support this feature, missing it badly from ag and git grep.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nextlogic-ono">@nextlogic-ono</a> on 2016-10-08 20:26</div>
            <div class="timeline-body"><p>@bluss Perhaps as a function instead?
Got this in .zshrc, works well.</p>
<pre><code>function rg()
{
   /usr/local/bin/rg -p &quot;$@&quot; | more -R
}

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2016-10-08 22:57</div>
            <div class="timeline-body"><p>I use this in my bin directory, works well</p>
<pre><code class="language-bash">#!/bin/sh

~/.cargo/bin/rg -p &quot;$@&quot; | less -RFX
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-10 23:48</div>
            <div class="timeline-body"><p>I like @bluss's approach here. I'm not strongly opposed to adding this into <code>ripgrep</code> itself, but it seems better to at least try and get by without doing so.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2016-10-10 23:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssokolow">@ssokolow</a> on 2017-03-13 22:31</div>
            <div class="timeline-body"><p>I just noticed the need for this and augmented my config-file wrapper to also pipe the output through <code>less -RFX</code> if it sees <code>-p</code> in the options.</p>
<p>https://github.com/ssokolow/profile/blob/master/home/.zshrc.d/rg</p>
<p>(Feel free to change that. I just needed something quick and didn't think I'd ever use <code>-p</code> for anything other than making the colors work when piped through <code>less</code>.)</p>
<p>I still think the need for the wrapper is a bit of a wart though, given that, in the abstract, such tools are competing on how convenient they can be and my wrapper feels fundamentally no different than &quot;Oh? You want to ignore stuff in your <code>.gitignore</code>? Well, we offer a command-line flag to ignore things. You're free to write a wrapper.&quot; (Reading <code>--type-add</code> from a config file) or &quot;Oh? You want colored output? Well, the colordiff people showed it can be done in a wrapper.&quot; (pager support)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jason-s">@jason-s</a> on 2017-05-17 14:57</div>
            <div class="timeline-body"><p><code>less</code> doesn't seem to ANSI terminal control sequences on Windows. Would be really nice to have a built-in pager.</p>
<p>I guess what I don't understand behind the philosophy of trying to use external utilities for paging, is that ripgrep already takes care of some presentation issues through the use of ANSI coloring.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-05-17 14:59</div>
            <div class="timeline-body"><blockquote>
<p>Would be really nice to have a built-in pager.</p>
</blockquote>
<p>This is a completely unreasonable request, so I'm just going to nip this one right in the bud: so long as I'm the maintainer, ripgrep will never ever never get a built-in pager.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssokolow">@ssokolow</a> on 2017-05-17 15:02</div>
            <div class="timeline-body"><blockquote>
<p>less doesn't seem to ANSI terminal control sequences on Windows.</p>
</blockquote>
<p>From what I remember, <code>cmd.exe</code> doesn't use ANSI sequences. Last time I looked at making one of my utilities do portable colorization, it seemed that <code>cmd.exe</code> expected you to do text colorization through a side-channel more similar to the &quot;set pen attributes&quot; APIs you find in things like Qt's QPainter.</p>
<p>(Which would mean that <code>less</code> would have to be color-aware enough to parse the input and convert it to an interleaved sequence of text blocks and &quot;set color&quot; API calls.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jason-s">@jason-s</a> on 2017-05-17 15:06</div>
            <div class="timeline-body"><blockquote>
<p>From what I remember, cmd.exe doesn't use ANSI sequences.</p>
</blockquote>
<p>Well, rg itself uses colors just fine, so either it's using some other mechanism for Windows, or Windows does support ANSI terminal sequences.</p>
<p>I've tried updating <code>less</code> to the latest version I can find for Windows (v381 from UnxUpdates.zip in http://unxutils.sourceforge.net/ which does support <code>-R</code> and <code>-r</code>; my previous version only supported <code>-r</code>) but it still turns the ANSI sequences into visible gobbledygook.</p>
<p>I understand the need to keep things simple but it really impairs the usability of rg on Windows when there is a lot of output.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-05-17 15:15</div>
            <div class="timeline-body"><blockquote>
<p>I understand the need to keep things simple</p>
</blockquote>
<p>Simplicity is only part of it. The other part of it is that you're asking me or someone else to build <em>an entire cross platform pager</em> into ripgrep, and then you're asking me to maintain that. It's an unreasonable request not only because it completely violates the principle of responsibility, but that's unreasonable because it would be an ungodly amount of really annoying work. On top of all of that, I don't even know that such a thing is possible in Windows.</p>
<hr />
<p>On coloring... The standard way to color things in Windows is through the various console APIs. It's completely unlike ANSI escape sequences. Instead of putting special codes into the output text, you instead need to: 1) stop writing output, 2) ask the console to change the color to X, 3) write output again and 4) ask the console to change the color back to the setting before X.</p>
<p>With that said, Windows 10 has some support for ANSI escape sequences, but it needs to be explicitly enabled. Alternatively, the various MSYS2 terminals for cygwin support ANSI escape sequences.</p>
<blockquote>
<p>I understand the need to keep things simple but it really impairs the usability of rg on Windows when there is a lot of output.</p>
</blockquote>
<p>I've spent a ton of time making ripgrep work well on Windows, but I have to draw the line somewhere. I don't know exactly where it is, but it certainly doesn't include a built-in pager.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jason-s">@jason-s</a> on 2017-05-17 15:17</div>
            <div class="timeline-body"><p>Fair enough, that explains some of the complexity.</p>
<p>Maybe by the time I get a new laptop later this year and it's Windows 10 then this becomes a non-issue for me. I certainly don't defend Microsoft's decisions for brain-dead implementations of things that otherwise work very well in Unix-land.</p>
<p>Looks like</p>
<pre><code>DOSKEY rgl=rg --color never $* ^| less</code></pre>
<p>works for me in my crippled Windows 7 world....</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-05-17 15:27</div>
            <div class="timeline-body"><blockquote>
<p>Maybe by the time I get a new laptop later this year and it's Windows 10 then this becomes a non-issue for me.</p>
</blockquote>
<p>FWIW, I don't think ripgrep quite works yet with ANSI support on Windows 10. I think it really needs a champion to make it happen who knows more about how to make it work. You can force ripgrep to emit ANSI escapes with <code>--color ansi</code>---even on Windows---but I think you actually need to enable some config knob to make ANSI support work on Windows.</p>
<blockquote>
<p><code>DOSKEY rgl=rg --color never $* ^| less</code></p>
</blockquote>
<p>Oh, I thought you wanted paging with coloring. Disabling coloring is certainly one way of getting rid of the  escapes. Although, I do find it interesting that you're seeing ANSI escapes at all in a Windows console. That shouldn't happen.</p>
<blockquote>
<p>I certainly don't defend Microsoft's decisions for brain-dead implementations of things that otherwise work very well in Unix-land.</p>
</blockquote>
<p>I won't lie, sometimes I think this way too. But I try hard not to, and try extra hard not to actually say it because it tends to just ruffle everyone's feathers. And Unix has its fair share of strange things too. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jason-s">@jason-s</a> on 2017-05-17 15:37</div>
            <div class="timeline-body"><p>Well, I'd like paging with coloring if I can get it, but I need paging and if the way to do that is disabling coloring, then it works well enough for me.</p>
<blockquote>
<p>Although, I do find it interesting that you're seeing ANSI escapes at all in a Windows console. That shouldn't happen.</p>
</blockquote>
<p>No idea. I just use <code>rg</code> without options, and I get the coloring, but if I pipe it through <code>less</code> then I see all the ANSI-looking gobbledygook like... oh wait a minute, it disappears when I pipe it through less. I only get it when I use <code>rg -p otherstuff | less</code>. Sigh. Never mind.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssokolow">@ssokolow</a> on 2017-05-17 15:40</div>
            <div class="timeline-body"><blockquote>
<p>I certainly don't defend Microsoft's decisions for brain-dead implementations of things that otherwise work very well in Unix-land.</p>
</blockquote>
<p>It's not always Microsoft's fault. For example, they chose <code>\</code> as a path separator when they updated DOS to support directories because they were already using CP/M-style <code>/</code> to denote command-line switches and I remember reading that the decision to follow CP/M on that front ultimately lay with IBM.</p>
<p>...and, the more layers of backward-compatibility abstraction you drop below, the more POSIX-compatible modern Windows tends to get. (I assume, purely out of practicality.)</p>
<p>For example, as far as I've been able to determine, DOS and Windows have accepted <code>/</code> as a path separator in APIs where it's not ambiguous since DOS 2.0 introduced directories. It's just the command-line parsing which requires paths to use <code>\</code> to avoid ambiguity.</p>
<p>...and kernels of the Windows NT lineage don't use drive letters internally... they're just an artifact of the Win32 API subsystem and it's possible to specify paths using an internal, singly-rooted syntax. (Though, admittedly, that <em>is</em> the one notable exception to the <code>/</code> compatibility. You have to use <code>\</code> in and after the escape prefix to bypass the Win32 path rules.)</p>
<p>(the NT kernel was written so that Win32, OS/2-compatibie, and POSIX-compliant APIs could be offered as pluggable subsystems and NTFS actually has a POSIX &quot;personality&quot; where, among other things, the only disallowed filename characters are <code>\0</code> and <code>/</code>. WSL is just the latest in a lineage of POSIX subsystem modules for the NT kernel.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/labianchin">@labianchin</a> on 2017-09-24 15:53</div>
            <div class="timeline-body"><p><em>Here how I solved this, if others are looking:</em>
I used to use <code>ag</code> before and defined an alias in <code>bashrc</code>/<code>zshrc</code> to &quot;invoke ag with less&quot;:</p>
<pre><code>alias agl=&quot;ag --pager='less -XFR'&quot;
</code></pre>
<p>For <code>rg</code> I am now using:</p>
<pre><code>rgl() {
  rg -p &quot;$@&quot; | less -XFR
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibotty">@ibotty</a> on 2018-02-12 16:02</div>
            <div class="timeline-body"><p>I argue that it would be very convenient to  have it built-in. As @ssokolow said: it's about convenience.</p>
<p>Having said that: The following snippet (a bash function) will invoke <code>less</code> only when the output is a terminal. That way, there won't be strange escape sequences when redirecting stdout.</p>
<pre><code class="language-bash">rg() {
    if [ -t 1 ]; then
        command rg -p &quot;$@&quot; | less -RFX
    else
        command rg &quot;$@&quot;
    fi
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/scorphus">@scorphus</a> on 2018-05-07 08:37</div>
            <div class="timeline-body"><p>IMO, ripgrep should stick with searching and not involve any pager. The output can be easily paged as discussed above.</p>
<p>For those of you who use <strong>Fish Shell</strong>, here's the content of your <code> ~/.config/fish/functions/rg.fish</code>:</p>
<pre><code class="language-fish">function rg
  if isatty stdout
    command rg -p $argv | less -RMFXK
  else
    command rg $argv
  end
end
</code></pre>
<p>For those wondering, <code>less</code> options explained:</p>
<ul>
<li><code>-R</code>: support color output (ANSI color sequences)</li>
<li><code>-M</code>: show line number information in the bottom of screen (current/pages X%)</li>
<li><code>-F</code>: automatically quit <code>less</code> if the entire example fits on the first page</li>
<li><code>-X</code>: do not use init/deinit strings; in other words: do not clear the screen</li>
<li><code>-K</code>: exit <code>less</code> in response to Ctrl-C (<code>^C</code>)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cemeyer">@cemeyer</a> on 2018-09-30 19:25</div>
            <div class="timeline-body"><p>The arguments presented against fixing this issue essentially boil down to simplicity of implementation, vs user convenience.</p>
<p>On the other hand, it seems to me. like @ayoshi's pager-rs suggestion would be extremely simple for the implementation.  I agree that implementing an entire pager in ripgrep is excessive.  But forking out to something like <code>less</code>, on platforms where it exists, is not unreasonable (IMO).</p>
<p>Fixing this seems beneficial for ripgrep users.  I think making every single user that wants paging reimplement <code>git</code> or <code>ag</code> paging in shell has a definite cost, and is a barrier for adoption vs something like <code>ag</code>.  <code>ag</code> has substantially similar performance and at least a history of substantially better ergonomics.  <code>rg</code> can do better than it does today :-).</p>
<p>For zsh users looking to work around this issue, here's what I've got in my <code>.zprofile</code> (it is essentially identical to @ibotty's bash function; the long options to <code>less</code> are just <code>-XFR</code>):</p>
<pre><code>export RIPGREP_CONFIG_PATH=&quot;$HOME/.ripgreprc&quot;
function rg(){
    # If outputting (fd 1 = stdout) directly to a terminal, page automatically:
    if [ -t 1 ]; then
        command rg --pretty &quot;$@&quot; \
            | less --no-init --quit-if-one-screen --RAW-CONTROL-CHARS
    else
        command rg &quot;$@&quot;
    fi
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-30 20:37</div>
            <div class="timeline-body"><blockquote>
<p>ag has substantially similar performance and at least a history of substantially better ergonomics.</p>
</blockquote>
<p>Neither of these things are obviously true to me.</p>
<p>The work around to this issue is simple enough that I'm fine with the status quo for now.</p>
<p>Complexity of implementation vs user convenience is a valid trade off to make, because we live in the real world where maintenance effort is a limited finite resource. So simply pointing to the existence of that trade off is not an effective way to convince me something.</p>
<p>Something that I would consider to be a constructive contribution here would be a deep dive on how other widely deployed cross platform software implements automatic paging functionality.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cemeyer">@cemeyer</a> on 2018-09-30 20:49</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>ag has substantially similar performance and at least a history of substantially better ergonomics.</p>
</blockquote>
<p>Neither of these things are obviously true to me.</p>
</blockquote>
<p>With all respect, as the primary author you're going to have certain biases and implicit blinders.  The tool is written primarily for your own itch, so by definition it meets your needs exactly.  Your preferences are not necessarily the same as everyone else (and evidence shows they are not).</p>
<blockquote>
<p>Complexity of implementation vs user convenience is a valid trade off to make, because we live in the real world where maintenance effort is a limited finite resource.</p>
</blockquote>
<p>I absolutely agree.  I didn't mean to suggest otherwise.  I was just summarizing the discussion.</p>
<blockquote>
<p>So simply pointing to the existence of that trade off is not an effective way to convince me something.</p>
</blockquote>
<p>Right.  That isn't intended to be supporting evidence, just a summary of the pros/cons.  I think the feedback from multiple users that find the ag behavior ergonomic <em>should be</em> somewhat persuasive, but again, it's ultimately your program.</p>
<blockquote>
<p>Something that I would consider to be a constructive contribution here would be a deep dive on how other widely deployed cross platform software implements automatic paging functionality.</p>
</blockquote>
<p>That would be interesting, yes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-30 21:02</div>
            <div class="timeline-body"><blockquote>
<p>With all respect, as the primary author you're going to have certain biases and implicit blinders. The tool is written primarily for your own itch, so by definition it meets your needs exactly. Your preferences are not necessarily the same as everyone else (and evidence shows they are not).</p>
</blockquote>
<p>Most (or at least many) features found in ripgrep are things that I do not use at all, because I either do not like them or do not find them useful in my particular circumstances. Now that you know that I understand the fairly obvious fact that my preferences are not the same as everyone else's, and that moreover, I'm willing to accommodate other's preferences even when they aren't my own, will you now be willing to elaborate on your generalizations that &quot;ag has <strong>substantially</strong> similar performance and at least a history of <strong>substantially</strong> better ergonomics.&quot; (Emphasis mine.)</p>
<blockquote>
<p>Right. That isn't intended to be supporting evidence, just a summary of the pros/cons. I think the feedback from multiple users that find the ag behavior ergonomic should be somewhat persuasive, but again, it's ultimately your program.</p>
</blockquote>
<p>I understand the benefits of having a built in pager. Moreover, I understand that some users would benefit from such functionality. These are not the only things that factor into my decision, which I think I've elaborated on above. My decisions aren't immutable. If you've watched this issue tracker over the years, I've reversed my thinking on several features as more feedback comes in and more is learned about potential implementation paths and estimated maintenance burden.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cemeyer">@cemeyer</a> on 2018-09-30 21:23</div>
            <div class="timeline-body"><p>Yep, understood ‚Äî I am certainly not trying to fault your intelligence :-).  Ultimately, I am just providing a &quot;me too&quot; on this one.  (I think the 'ag' comparison has turned into a distraction ‚Äî it's my subjective opinion, but it isn't an argument that is really on-topic for this issue.  Let's not litigate it here.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tudor">@tudor</a> on 2019-03-12 22:46</div>
            <div class="timeline-body"><p>It would be great if ripgrep used an external pager only if stdout is a tty. So the same command can display pretty (colorized, paged) results on screen, or output raw results when redirected to a file.</p>
<p>Today, I have to run <code>rg -p &quot;$@&quot; | less -R</code> (aliased as <code>rgl</code>) if I want to look at the output, and <code>rg</code> directly if I want to redirect output.</p>
<p>The Silver Searcher has a <code>--pager</code> command-line flag that is ignored when the output is not a tty. Obeying the <code>PAGER</code> environment variable would be nice too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tudor">@tudor</a> on 2019-03-12 22:50</div>
            <div class="timeline-body"><p>Actually, this seems to be a good workaround:</p>
<pre><code>rg() {
    if [[ -t 1 ]]; then
        /usr/bin/rg -p &quot;$@&quot; | less -RFX
    else
        /usr/bin/rg &quot;$@&quot;
    fi
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dwijnand">@dwijnand</a> on 2019-03-13 07:03</div>
            <div class="timeline-body"><p>@ibotty's version in https://github.com/BurntSushi/ripgrep/issues/86#issuecomment-364968686 is even better as it avoids picking a path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tudor">@tudor</a> on 2019-03-13 16:05</div>
            <div class="timeline-body"><p>@dwijnand I missed that when scrolling through this task. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-10-01 14:22</div>
            <div class="timeline-body"><p>This was recently requested again in #1695, and I think my stance on this has softened. I think I was originally opposed to this because of Windows and my effort to make sure everything was as cross platform as possible. But I don't think this should hold back efforts to improve environments where pagers are common.</p>
<p>My current plan is to add a <code>--pager</code> flag that will cause ripgrep's results to show inside of a pager if stdout is a tty. I'll probably look at how <code>git grep</code> invokes a pager and copy that logic since it has always worked well for me in practice.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @BurntSushi on 2020-10-01 14:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-10-01 14:23</div>
            <div class="timeline-body"><p>(I'm not sure when I'll have time to work on this, but if someone else wanted to submit a PR, that would be great!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @BurntSushi on 2020-10-01 14:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @BurntSushi on 2020-10-01 14:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @BurntSushi on 2020-10-01 14:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/scorphus">@scorphus</a> on 2020-10-01 15:28</div>
            <div class="timeline-body"><p>Sure! I'll take this one! ü•®üçª</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/scorphus">@scorphus</a> on 2020-10-01 15:39</div>
            <div class="timeline-body"><p>The crate <a href="https://docs.rs/pager/0.15.0/pager/">pager</a> is really nice and fits well. I'm gonna use it. Any objections, @BurntSushi? BTW, any further tips are more than appreciated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-10-01 15:54</div>
            <div class="timeline-body"><p>@scorphus I am skeptical. That crate hasn't been updated in 2 years. Here is what I would do:</p>
<ol>
<li>Research how <code>git grep</code> spawns a pager. This is important because <code>git grep</code> is a widely used and popular tool. It is very likely that they've probably iterated towards an optimal solution. So let's benefit from their experience and practice by seeing if we can emulate their logic.</li>
<li>Scrutinize the <code>pager</code> crate to see if it matches <code>git grep</code>'s behavior. Also, carefully review <code>pager</code>'s internals to make sure it looks okay. I just did a brief scan and I can already see that its atty detection won't work on Windows, so that's probably a deal-breaker unless its API allows us to work around that.</li>
</ol>
<p>The implementation of <code>pager</code> does contain unsafe, and normally I'd see that as a good reason to use a crate for it, because it becomes a rallying point for other people to join together and audit and fix bugs that arise. But if the crate isn't being maintained, then this stops being an advantage.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wonderfulspam">@wonderfulspam</a> on 2021-01-07 19:10</div>
            <div class="timeline-body"><p>The <code>pager</code> crate has recently been updated but it still doesn't seem like it quite cuts the mustard, IMO.</p>
<blockquote>
<p>Something that I would consider to be a constructive contribution here would be a deep dive on how other widely deployed cross platform software implements automatic paging functionality.</p>
</blockquote>
<p>This is a very shallow (and opinionated) analysis rather than a deep dive, but perhaps it may be of use:</p>
<p>The <code>git grep</code> <a href="https://github.com/git/git/blob/3cf59784d42c4152a0b3de7bb7a75d0071e5f878/builtin/grep.c">implementation</a> is a little gnarly with the logic for deciding whether and how to spawn a pager residing at the bottom of a 300+ line function. I would not be surprised if there are more subtle bugs like <a href="https://github.com/git/git/commit/c2048f0b394fc5d5644956481b39f3d099cbe51c">this one</a> lurking under the surface.</p>
<p>I would consider taking a look at <code>bat</code>'s <a href="https://github.com/sharkdp/bat/blob/master/src/output.rs">implementation</a>. <code>bat</code> may not be as widely used as <code>git grep</code> but it does happen to be cross-platform, is written in Rust and, anecdotally, has provided a flawless paging experience for me in the past two years or so that it's been my daily driver. At the very least, @sharkdp may be able to provide some valuable pointers on the pitfalls and gotchas. See, for example, https://github.com/sharkdp/bat/pull/1402, or https://github.com/sharkdp/bat/issues/887#issuecomment-616156939 in which the maintainer of <code>less</code> even piped in to confirm that the <a href="https://github.com/gwsw/less/commit/a737ff2d16e66f10d8e39225466b524b818c9fa2">bug in question existed in <code>less</code></a>, not <code>bat</code>.</p>
<p>Interestingly, <a href="https://github.com/sharkdp/bat/issues/1053"><code>bat</code> is currently exploring adding a built-in pager</a> which would, presumably, also be available as a library that might be of interest.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/scorphus">@scorphus</a> on 2021-01-07 20:13</div>
            <div class="timeline-body"><p>Yeah! I've been considering bat's implementation as the one to follow. I've also been using it flawlessly for quite some time.</p>
<p>TBH, I didn't look too much into anything else, particularly git's one, although it was suggested ‚Äî¬†that code frightened me, to say the least. I didn't entirely believe it could really help ‚ò∫Ô∏è</p>
<p>Thank you for the the links, @wonderfulspam! üôå Espcially the last one, I wasn't aware of the idea around a built-in parser for bat, that might be something to consider!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2021-01-08 20:05</div>
            <div class="timeline-body"><blockquote>
<p>I would consider taking a look at <code>bat</code>'s <a href="https://github.com/sharkdp/bat/blob/master/src/output.rs">implementation</a>. <code>bat</code> may not be as widely used as <code>git grep</code> but it does happen to be cross-platform, is written in Rust and, anecdotally, has provided a flawless paging experience for me in the past two years or so that it's been my daily driver. At the very least, @sharkdp may be able to provide some valuable pointers on the pitfalls and gotchas.</p>
</blockquote>
<p>I think you already pointed out the most important things. I'll try to list a few points that come to my mind right now:</p>
<ul>
<li>Adding paging support to <code>bat</code> is something that turned out to be MUCH more painful than I imagined initially (take a look at the amount of issues linked in https://github.com/sharkdp/bat/issues/1053). If you take a look at our implementation, you can probably tell that it's not completely trivial to make this work consistently across platforms and <code>less</code> versions. The logic would be a lot simpler if ripgrep decides to only add a <code>--pager=&lt;cmd&gt;</code> option (instead of also adding <code>PAGER</code> handling, something like <code>RIPGREP_PAGER</code>, etc.).</li>
<li>One of the most annoying things in <code>bat</code> is the interplay between the pager and <code>bat</code>s own line wrapping and line-number output (especially if the terminal is resized). I guess this wouldn't be a problem for ripgrep.</li>
<li>Another pain point is colorized output in combination with a pager. <code>less</code> can pipe-through ANSI codes when called with the <code>-R</code> option, but we had a lot of weird things happen. Especially on Windows.</li>
<li>Making this an opt-in feature in ripgrep is definitely a good idea. From experience, I can tell that unknowing users will otherwise assume that the <code>less</code> frontend is part of the application itself. If they are not familiar with a pager, that can be confusing (how do I quit?). Also, they will report all kinds of bugs in <code>less</code> against your repo (e.g.: scrolling does not work).</li>
<li>Even if users opt in with a <code>--pager=&lt;cmd&gt;</code> option in their config file, it might be a good idea to have a <code>--paging=auto/never/always</code> option (similar to what the <code>--color=‚Ä¶</code> option does). For <code>bat</code>, we even added a short option <code>-P</code> to disable the pager because it's used so often. Imagine you are fine-tuning a search pattern and run multiple ripgrep searches in sequence. You probably don't always want to quit the pager in-between.</li>
<li>The explanation in https://github.com/sharkdp/bat#using-a-different-pager might be of interest (how we call <code>less</code> and why).</li>
</ul>
<blockquote>
<p>Interestingly, <a href="https://github.com/sharkdp/bat/issues/1053"><code>bat</code> is currently exploring adding a built-in pager</a> which would, presumably, also be available as a library that might be of interest.</p>
</blockquote>
<p>If we ever make this happen, it would be available as a library. Yes. However, most of the features that we would want in <code>bat</code> are probably not that useful for ripgrep.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sergeevabc">@sergeevabc</a> on 2021-04-01 19:21</div>
            <div class="timeline-body"><p>Gosh, these stubborn developers‚Ä¶ Guys, check out <a href="https://github.com/vrothberg/vgrep/">vgrep</a>.
Basically, it‚Äôs a mix of Ripgrep and Less (with truly working colors), which we‚Äôd like to see here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/God-damnit-all">@God-damnit-all</a> on 2021-11-15 18:10</div>
            <div class="timeline-body"><p>I would like to point out that if you're using PowerShell (regardless of platform), <code>Out-Host -Paging</code> seems to work just fine with ripgrep's <code>--color always</code> parameter. Its pager leaves much to be desired, though.</p>
<p>You can also set <code>$PSStyle.OutputRendering</code> to <code>ANSI</code> and then <code>less -R</code> should work fine, even with <a href="https://github.com/jftuga/less-Windows">less-Windows</a>.</p>
<p>ripgrep having its own pager would certainly be more convenient, though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dandavison">@dandavison</a> on 2023-03-15 10:08</div>
            <div class="timeline-body"><p><a href="https://github.com/dandavison/delta">delta</a> has special support for acting as a pager for ripgrep: see the <a href="https://dandavison.github.io/delta/grep.html">delta manual section</a>. In addition to paging, this brings two other features:</p>
<ul>
<li>syntax-highlighted code in the search hits</li>
<li>search hits can be formatted as terminal hyperlinks, which can be configured to open your text editor at the appropriate line (e.g. see <a href="https://github.com/dandavison/open-in-editor/">open-in-editor</a>)</li>
</ul>
<p>You use it by piping <code>rg --json</code> output to delta. Here's an example in the delta repo using a light background and the <code>GitHub</code> color theme:</p>
<pre><code class="language-sh">rg --json 'handle' | delta
</code></pre>
<p><strong>EDIT</strong> Please see update below: https://github.com/BurntSushi/ripgrep/issues/86#issuecomment-1632851762</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-03-15 12:03</div>
            <div class="timeline-body"><p>Wow, that is pretty slick! Nice work. @dandavison I've added a link to that from ripgrep's README: https://github.com/BurntSushi/ripgrep/commit/595e7845b87c1b9e6cfd4f1c23b3910dca3e15f0</p>
<p>PRs are welcome if you'd like to make wording tweaks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ryuheechul">@ryuheechul</a> on 2023-03-30 23:54</div>
            <div class="timeline-body"><p>Thanks @dandavison's comment!
Now my alias has changed like below</p>
<pre><code class="language-zsh"># from this
alias rg='rg -p -i'

# to this function
rg ()
{
  env rg --json $@ | delta
}
</code></pre>
<p>And it works just like how <code>bat</code> works in terms of automatic paging!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wbolster">@wbolster</a> on 2023-03-31 08:21</div>
            <div class="timeline-body"><blockquote>
<pre><code class="language-shell">env rg --json $@ | delta
</code></pre>
</blockquote>
<p>@ryuheechul, for correctness with all file names etc, you should be using this function body:</p>
<pre><code class="language-shell">command rg --json &quot;$@&quot; | delta
</code></pre>
<p>(you could also detect whether the output goes to a tty and avoid calling <code>delta</code> in that case, but the exact desired behaviour is subjective.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ryuheechul">@ryuheechul</a> on 2023-03-31 17:23</div>
            <div class="timeline-body"><p>@wbolster good points to think about and will be helpful as context when I encounter related issues :), thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/krishnakumarg1984">@krishnakumarg1984</a> on 2023-05-08 10:37</div>
            <div class="timeline-body"><p>@BurntSushi I wonder if the cross-platform pager crate <a href="https://github.com/arijit79/minus"><code>minus</code></a> shall be of immediate help.  <code>minus</code> is written both as a library and a binary crate, with the library specifically intended for being used as a pager integration with other applications. This is exactly the use case we have here, and seems like a perfect fit for the problem we have.</p>
<p>For more info, please read the <code>minus</code> <a href="https://github.com/arijit79/minus#the-problem-with-traditional-pagers">README section on integration with applications</a> as well as <a href="https://pijul.org/posts/2020-12-09-minus/">this blog post</a> by its author detailing its design and purpose.</p>
<p>Hope that helps, and soon we won't hopefully need to check for &amp; rely on the presence of an external tool <code>delta</code> for paged output from <code>ripgrep</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-05-08 11:08</div>
            <div class="timeline-body"><p>@krishnakumarg1984 I do not think it's a good idea to depend on external crates like that for core functionality. As soon as I ship something that is based on what <code>minus</code> provides, I've essentially signed up to provide that functionality forever, regardless of whether <code>minus</code> continues to be maintained or not. It also has a very large dependency tree. A significant fraction of ripgrep's dependency tree. There's probably some overlap, but that's not something that inspires confidence from my perspective. Instead, it just increases the risk of having to maintain something else.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dandavison">@dandavison</a> on 2023-07-12 16:26</div>
            <div class="timeline-body"><p>Quick update on delta's ripgrep support:</p>
<p>Delta now tries to exactly replicate ripgrep output format, so the idea is that piping <code>ripgrep --json</code> to delta should be a strictly additive improvement, bringing:</p>
<ul>
<li>paging</li>
<li>syntax highlighting</li>
<li>hyperlinks to open matching lines in an editor/IDE</li>
<li>&quot;n&quot; and &quot;N&quot; keybindings to navigate between matches</li>
</ul>
<p>The hyperlinks are particularly convenient if you're using an editor such as VSCode, Pycharm, or IntelliJ that install their own URL handlers for opening links.</p>
<p>Docs: https://dandavison.github.io/delta/grep.html</p>
<p>Please open an issue in the delta repo if delta is failing to emulate the visual appearance of ripgrep output that you would like.</p>
<p>In the image below, the line numbers are <a href="https://gist.github.com/egmontkob/eb114294efbcd5adb1944c9f3cb5feda">OSC8 terminal hyperlinks</a>.</p>
<table><tr><td><img width="600" alt="image" src="https://github.com/BurntSushi/ripgrep/assets/52205/5593f633-d279-43bd-b436-1d68a4376fa2"></td></tr></table>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a> on 2023-07-12 19:54</div>
            <div class="timeline-body"><p>@dandavison Nice work!</p>
<p>I couldn't find the URI format spec for the JetBrains IDEs, I hope you don't mind if I add the one you've found to #2483 (I'd like for ripgrep to support hyperlinks out of the box).</p>
<p>Did you by any chance find a list of the URI schemes used by the other JetBrains IDEs besides IntelliJ and PyCharm? If not, they should be rather easy to guess, but I can install them all just to make sure.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-26 19:08</div>
            <div class="timeline-body"><p>I think while I had said my stance on this softened a while back, I'm ultimately going to pass on this. I think this is a good example of scope creep, and that ripgrep just does not benefit much from having a <code>--pager</code> flag when users can invoke a pager themselves (or write an alias to do it for them).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2023-11-26 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> removed by @BurntSushi on 2023-11-26 19:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wontfix</span> added by @BurntSushi on 2023-11-26 19:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/txtsd">@txtsd</a> on 2024-11-09 13:14</div>
            <div class="timeline-body"><p>I just wanted to show everyone how beautiful <code>delta</code>'s output is! :purple_heart:</p>
<p><img src="https://github.com/user-attachments/assets/4ff6594e-58ea-4f7b-95f7-bce3497423f8" alt="2024-11-09-18:40:57:44:582274252-640x1052_grim" /></p>
<p>I came here fully prepared to ask for native support for paging via delta, and then I found this issue. I wanted to show everyone what beauty sparked that compulsion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gcflymoto">@gcflymoto</a> on 2024-11-10 08:30</div>
            <div class="timeline-body"><p>Beautiful! What terminal are you using? Still see hyperlinks from latest delta broken in Konsole and kitty.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/txtsd">@txtsd</a> on 2024-11-10 08:43</div>
            <div class="timeline-body"><blockquote>
<p>Beautiful! What terminal are you using? Still see hyperlinks from latest delta broken in Konsole and kitty.</p>
</blockquote>
<p>I use kitty! Hyperlinks worked when I tried them yesterday.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/UnsolvedCypher">@UnsolvedCypher</a> on 2025-01-15 14:59</div>
            <div class="timeline-body"><p>For fish users wanting to use Delta for your pager, you can add an abbreviation: <code>abbr -a --set-cursor -- rg 'rg % | delta'</code> . This will pipe your <code>rg</code> into <code>delta</code> but place your cursor before the pipe (where the % is) so you can type your query.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ciscohack">@ciscohack</a> on 2025-10-24 18:30</div>
            <div class="timeline-body"><p>Hello experts</p>
<p>if use this script how to hide line number i tried --no-line-number and -N but that doesn't work</p>
<p>#!/bin/sh</p>
<p>rg -p &quot;$@&quot; | less -R</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ciscohack">@ciscohack</a> on 2025-10-24 18:31</div>
            <div class="timeline-body"><blockquote>
<p>BTW, there is a nice way to invoke pager from rust console CLI: https://gitlab.com/imp/pager-rs it does pager instantiation in a quite clever way</p>
</blockquote>
<p>@ayoshi how to use it in install can you help me to know</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-10-24 18:38</div>
            <div class="timeline-body"><p>@ciscohack <code>rg -p -N &quot;$@&quot; | less -R</code> should work just fine.</p>
<p>Please don't bump old issues to ask questions. Please ask questions via <a href="https://github.com/BurntSushi/ripgrep/discussions/">discussions</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Locked by @ghost on 2025-10-24 18:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:41:41 UTC
    </footer>
</body>
</html>
