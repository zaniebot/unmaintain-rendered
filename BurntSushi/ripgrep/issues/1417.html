<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surprising feature - ripgrep respects git excludes - BurntSushi/ripgrep #1417</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Surprising feature - ripgrep respects git excludes</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1417">#1417</a>
        opened by <a href="https://github.com/nnathan">@nnathan</a>
        on 2019-11-04 05:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/nnathan">@nnathan</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p><code>ripgrep 11.0.1</code></p>
<h4>How did you install ripgrep?</h4>
<p><code>brew install ripgrep</code></p>
<h4>What operating system are you using ripgrep on?</h4>
<p>The macos before broken arse catalina.</p>
<h4>Describe your question, feature request, or bug.</h4>
<p>ripgrep supports local excludes <code>$GIT_DIR/info/exclude</code>.</p>
<p>Nowhere in the manpage does it discuss the excludes, but only .gitignore and the global core.excludesFile. This is a feature of ripgrep <a href="https://github.com/BurntSushi/ripgrep/blob/master/GUIDE.md">according to the guide</a>.</p>
<p>But it seems to be a feature you cannot specifically opt-out of - only all .gitignore and exclusions.</p>
<p>I know it's meant to be smart - but not being able to opt-out of your local excludes while respecting repository shared ignores is dumb. I would argue that it should also be specifically opt-in because it can be surprising to some - the only tools that respect the local exclude are git based tools and seemingly only rg. But that'd change the expected UI.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-11-04 10:39</div>
            <div class="timeline-body"><p>I don't really understand this ticket. ripgrep is working as intended.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2019-11-04 10:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nnathan">@nnathan</a> on 2019-11-04 10:50</div>
            <div class="timeline-body"><p>I'm fine with closing the ticket.</p>
<p>But I think you fundamentally misunderstand something and don't seem keen to even entertain it.</p>
<ol>
<li>A .gitignore is a repository <em>shared</em> file.</li>
<li>A .git/info/exclude is a <em>local</em> exception that's not shared.</li>
</ol>
<p>When ripgrep manual says it respects .gitignore intuitively it means (1) and <strong>not</strong> (2).
One could say it respects any file git would ignore which would encompass (1) and (2).
A more precise explanation would be to say it respects .gitignore and local git exclusions. But none of the manual page discusses the distinction of (1) and (2) and completely omits any explanation of (2).</p>
<p>From a user experience perspective it doesn't do what the user expects, I was using it as a drop-in replacement for ag, which it cannot be, because it does more than rg, and it can't even be compatible with ag since you can't even tell it to respect (1) and (2).</p>
<p>If anything, I would recommend you update the manual page to reflect the distinction, precisely because it's confusing. And that you can only opt out of both.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-11-04 13:18</div>
            <div class="timeline-body"><p>I don't see how it's confusing. ripgrep respects all gitignores that it can, including gitignores in parent directories, child directories, global rules and local overrides. Your comparison with ag is strange, given the incredible number of bugs and problems with ag's support for gitignores. While ripgrep takes inspiration from tools such as grep and ag, needling me over the fact that ripgrep isn't a drop in replacement for ag because it doesn't have the same bugs is pretty unproductive.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nnathan">@nnathan</a> on 2019-11-04 14:58</div>
            <div class="timeline-body"><p>Fair enough. I guess we can both agree some people are idiots. And idiots deserve inferior tools.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:02 UTC
    </footer>
</body>
</html>
