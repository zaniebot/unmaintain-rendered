<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>--with-filename doesn't show filenames on each match in a tty - BurntSushi/ripgrep #596</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>--with-filename doesn't show filenames on each match in a tty</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/596">#596</a>
        opened by <a href="https://github.com/dfabulich">@dfabulich</a>
        on 2017-09-06 09:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dfabulich">@dfabulich</a></div>
            <div class="timeline-body"><p>I like having <code>rg</code> print a filename on each matched line. I use iTerm2 for macOS, where I can command-click on a line like <code>foo.c:123:blah</code> and have Sublime automatically open <code>foo.c</code> at line 123.</p>
<p>By default, <code>rg</code> enables <code>--heading</code> in a tty:</p>
<blockquote>
<p>This shows the file name above clusters of matches from each file instead of showing the file name for every match. This is the default mode at a tty.</p>
</blockquote>
<p>That breaks my use case, so I tried using <code>-H</code> or <code>--with-filename</code>:</p>
<blockquote>
<p>Prefix each match with the file name that contains it. This is the default when more than one file is searched.</p>
</blockquote>
<p>I was quite surprised to find that this did nothing. Of course it says &quot;This is the default when more than one file is searched,&quot; but I was searching more than one file and it was still just showing the heading and not showing the file name with &quot;each match&quot; on each line.</p>
<p>In fact, to get the output I want, I have to use <code>--no-heading</code>:</p>
<blockquote>
<p>Don't group matches by each file. If -H/--with-filename is enabled, then file names will be shown for every line matched. This is the default mode when not at a tty.</p>
</blockquote>
<p>I think the current behavior of <code>--with-filename</code> would be better described like this:</p>
<blockquote>
<p>Display the file name for matches. This is the default when more than one file is searched. If --heading is enabled, the file name will be shown above clusters of matches from each file; otherwise, the file name will be shown on each match.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-09-06 09:23</div>
            <div class="timeline-body"><p>LGTM!</p>
<p>On Sep 6, 2017 05:13, &quot;dfabulich&quot; <a href="mailto:notifications@github.com">notifications@github.com</a> wrote:</p>
<blockquote>
<p>I like having rg print a filename on each matched line. I use iTerm2 for
macOS, where I can command-click on a line like foo.c:123:blah and have
Sublime automatically open foo.c at line 123.</p>
<p>By default, rg enables --heading:</p>
<p>This shows the file name above clusters of matches from each file instead
of showing the file name for every match. This is the default mode at a tty.</p>
<p>That breaks my use case, so I tried using -H or --with-filename:</p>
<p>Prefix each match with the file name that contains it. This is the default
when more than one file is searched.</p>
<p>I was quite surprised to find that this did nothing. Of course it says
&quot;This is the default when more than one file is searched,&quot; but I was
searching more than one file and it was still just showing the heading and
not showing the file name with &quot;each match&quot; on each line.</p>
<p>In fact, to get the output I want, I have to use --no-heading:</p>
<p>Don't group matches by each file. If -H/--with-filename is enabled, then
file names will be shown for every line matched. This is the default mode
when not at a tty.</p>
<p>I think the current behavior of --with-filename would be better described
like this:</p>
<p>Display the file name for matches. This is the default when more than one
file is searched. If --heading is enabled, the file name will be shown
above clusters of matches from each file; otherwise, the file name will be
shown on each match.</p>
<p>—
You are receiving this because you are subscribed to this thread.
Reply to this email directly, view it on GitHub
<a href="https://github.com/BurntSushi/ripgrep/issues/596">https://github.com/BurntSushi/ripgrep/issues/596</a>, or mute the thread
<a href="https://github.com/notifications/unsubscribe-auth/AAb34m5rwVuk6Zy-Ux0FbL_VNMBYQR93ks5sfmIegaJpZM4POEgZ">https://github.com/notifications/unsubscribe-auth/AAb34m5rwVuk6Zy-Ux0FbL_VNMBYQR93ks5sfmIegaJpZM4POEgZ</a>
.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dfabulich">@dfabulich</a> on 2017-09-06 09:25</div>
            <div class="timeline-body"><p>I'm not sure if my use case is particularly unusual, but I'd prefer <code>--no-heading</code> by default in a tty. Am I right in understanding that since there's no <code>.rgrc</code> #196 I'd have to <code>alias</code> <code>rg</code> to get that behavior?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-09-06 09:27</div>
            <div class="timeline-body"><p>Yes. Defaults aren't changing. Sorry.</p>
<p>On Sep 6, 2017 05:25, &quot;dfabulich&quot; <a href="mailto:notifications@github.com">notifications@github.com</a> wrote:</p>
<blockquote>
<p>I'm not sure if my use case is particularly unusual, but I'd prefer
--no-heading by default in a tty. Am I right in understanding that since
there's no .rgrc #196 <a href="https://github.com/BurntSushi/ripgrep/issues/196">https://github.com/BurntSushi/ripgrep/issues/196</a>
I'd have to alias rg to get that behavior?</p>
<p>—
You are receiving this because you commented.
Reply to this email directly, view it on GitHub
<a href="https://github.com/BurntSushi/ripgrep/issues/596#issuecomment-327427790">https://github.com/BurntSushi/ripgrep/issues/596#issuecomment-327427790</a>,
or mute the thread
<a href="https://github.com/notifications/unsubscribe-auth/AAb34u0srvv4L0kcSfJbRd40LeehUL05ks5sfmULgaJpZM4POEgZ">https://github.com/notifications/unsubscribe-auth/AAb34u0srvv4L0kcSfJbRd40LeehUL05ks5sfmULgaJpZM4POEgZ</a>
.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2017-09-06 12:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KindDragon">@KindDragon</a> on 2018-02-19 16:44</div>
            <div class="timeline-body"><p>Can you add short option for <code>--no-heading</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-02-19 16:45</div>
            <div class="timeline-body"><p>@KindDragon Please don't post unrelated requests in closed issues. Please open a new issue and fill out the provided template.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">doc</span> added by @BurntSushi on 2018-02-20 12:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:16 UTC
    </footer>
</body>
</html>
