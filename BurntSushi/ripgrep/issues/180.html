<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A readline flag - BurntSushi/ripgrep #180</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>A readline flag</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/180">#180</a>
        opened by <a href="https://github.com/ticki">@ticki</a>
        on 2016-10-14 17:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ticki">@ticki</a></div>
            <div class="timeline-body"><p>Regular expressions do not work well together with shells, due to escapes, canonicalization, and parsing. I suggest that a flag for reading a line from the user (<code>-r</code> or <code>-R</code>) and using this as the regex, effectively bypassing the shell weirdness.</p>
<p>This could possibly even be the behavior when no argument is given.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kaushalmodi">@kaushalmodi</a> on 2016-10-14 17:20</div>
            <div class="timeline-body"><p>Probably related to this? https://github.com/BurntSushi/ripgrep/issues/102</p>
<p>If so, this (https://github.com/BurntSushi/ripgrep/issues/102#issuecomment-249620557) is the solution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-14 17:39</div>
            <div class="timeline-body"><p>Could you please provide a use case that motivates this feature? What does this provide that single quotes or even <code>$'...'</code> don't?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ticki">@ticki</a> on 2016-10-14 17:41</div>
            <div class="timeline-body"><p>It's faster to type.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-14 17:45</div>
            <div class="timeline-body"><p>@ticki I'd like some examples please. I'm particularly interested in examples that are common.</p>
<p>Are there other tools that implement this particular feature? I can't recall seeing it before.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-14 17:57</div>
            <div class="timeline-body"><p>Another problem I kind of have with this feature is that it breaks shell history. When I run a <code>grep</code> or an <code>rg</code> command, I often need to run it multiple times because I need to tweak my pattern or change some other setting. If I have to re-type the regex every time, I'm going to get annoyed pretty quickly.</p>
<p>I do agree that handling escapes is annoying, although I'm not sure how often it comes up in practice. I'd appreciate some brainstorming with other ways to fix this. One idea is #7, although committing the pattern to a file is a bit heavyweight just to avoid escapes, but it does not suffer from the shell history problem (because I can just edit the file).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2016-10-14 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-10-15 13:54</div>
            <div class="timeline-body"><p>I was thinking about this last night before bed. So I guess it doesn't necessarily have to break shell history. If you did:</p>
<pre><code>$ rg --readline hi &lt;&lt;EOF
\w+
EOF
</code></pre>
<p>Then scrolling back to this command will preserve the heredoc, which I think satisfies at least one important objection to this feature. It does however mean that you can't search <code>stdin</code> with this feature enabled, which kind of seems like another stumbling block to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zokier">@zokier</a> on 2016-10-23 14:59</div>
            <div class="timeline-body"><p>If #7 is resolved then you could handle <code>-f-</code> as &quot;read patterns from stdin&quot;, which is what GNU grep does. In grep the interaction with searching stdin seems buggy/weird, but I don't think that will be much of a problem in practice.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-06 17:27</div>
            <div class="timeline-body"><p>OK, I'm closing this in favor of doing #7 with support for stdin.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2016-11-06 17:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-18 01:49</div>
            <div class="timeline-body"><p>@ticki FYI, this is done. This works now (master, will be in next <code>0.3</code> release), for example:</p>
<pre><code>$ rg -f-
\p{Lu}\pL!
^D
</code></pre>
<p>heredocs work too:</p>
<pre><code>$ rg -f- &lt;&lt;EOF
&gt; \p{Lu}\pL!
&gt; EOF
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:41:49 UTC
    </footer>
</body>
</html>
