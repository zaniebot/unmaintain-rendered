<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disabling color output seems to be broken - BurntSushi/ripgrep #2668</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Disabling color output seems to be broken</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2668">#2668</a>
        opened by <a href="https://github.com/wallentx">@wallentx</a>
        on 2023-11-30 14:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/wallentx">@wallentx</a></div>
            <div class="timeline-body">Please tick this box to confirm you have reviewed the above.
<ul>
<li>[X] I have a different issue.</li>
</ul>
What version of ripgrep are you using?
<p>My screenshot shows 14.0.2 (what is available in the Arch repo), but I also uninstalled from pacman, and did a <code>hash -r &amp;&amp; cargo install ripgrep</code> to replicate the same behavior with 14.0.3</p>
How did you install ripgrep?
<p>Pacman &amp; cargo</p>
What operating system are you using ripgrep on?
<p>Arch 6.6.2-arch1-1</p>
Describe your bug.
<p><img src="https://github.com/BurntSushi/ripgrep/assets/8990544/8277b5d3-0c69-46ca-9634-bd6284f404c1" alt="Screenshot_20231130-075318"></p>
<p>It also does not seem to obey the presence of a <code>NO_COLOR</code> environment variable.</p>
What are the steps to reproduce the behavior?
<p>See the screenshot above</p>
What is the actual behavior?
<p>☝️</p>
What is the expected behavior?
<p>Colors option flags should work, and passing <code>--colors path:none --colors line:none --colors column:none --colors match:none</code> should not have <code>^[[0m</code> &quot;leftovers&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-30 14:33</div>
            <div class="timeline-body"><p>You&#x27;re passing <code>-p/--pretty</code>, which is an alias for <code>--color=always --heading --line-number</code>. You&#x27;re also passing it last, so it overrides everything else.</p>
<p>This may have accidentally worked as desired in ripgrep 13, but ripgrep 14 is now much more consistent about flag overrides based on their relative position to one another.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-30 14:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-30 14:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:13 UTC
    </footer>
</body>
</html>
