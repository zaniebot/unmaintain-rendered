<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>--ignore-file fails to follow symlinks - BurntSushi/ripgrep #3030</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>--ignore-file fails to follow symlinks</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/3030">#3030</a>
        opened by <a href="https://github.com/ssbarnea">@ssbarnea</a>
        on 2025-04-11 13:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ssbarnea">@ssbarnea</a></div>
            <div class="timeline-body">Please tick this box to confirm you have reviewed the above.
<ul>
<li>[x] I have a different issue.</li>
</ul>
What version of ripgrep are you using?
<p>ripgrep 14.1.1</p>
<p>features:+pcre2
simd(compile):+NEON
simd(runtime):+NEON</p>
How did you install ripgrep?
<p>brew</p>
What operating system are you using ripgrep on?
<p>macos</p>
Describe your bug.
<p>It seems that <code>--ignore-file=valid-symlink-to-file</code> generates a runtime error instead of loading the symlinked file:</p>
<pre><code>rg: tags:: IO error for operation on tags:: No such file or directory (os error 2)
</code></pre>
<p>This is problematic for users trying to use dotfiles with something like <a href="https://www.gnu.org/software/stow/">stow</a> which uses symlinks to track config files with git. ripgrep was the first tool I found that seems to not be symlink friendly</p>
What are the steps to reproduce the behavior?
<p>Create symlink to the ignore file and pass it via --ignore-file</p>
What is the actual behavior?
<pre><code>rg: tags:: IO error for operation on tags:: No such file or directory (os error 2)
</code></pre>
What is the expected behavior?
<p>Read symlinks ignore files if they resolve and exit with error if they do not.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-04-11 13:55</div>
            <div class="timeline-body"><p>Please provide a real MRE. I cannot reproduce based on your prose:</p>
<pre><code>$ mkdir -p /tmp/rg3030
$ cd /tmp/rg3030
$ touch foo bar quux
$ echo &#x27;bar&#x27; &gt; tags
$ rg --files
foo
bar
quux
tags
$ rg --files --ignore-file tags
foo
quux
tags
$ ln -s tags tags-link
$ rg --files
foo
bar
quux
tags
$ rg --files --ignore-file tags-link
foo
quux
tags
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-04-11 13:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-10-11 01:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:14 UTC
    </footer>
</body>
</html>
