<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow -d as shorthand for --max-depth - BurntSushi/ripgrep #2643</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow -d as shorthand for --max-depth</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2643">#2643</a>
        opened by <a href="https://github.com/3tilley">@3tilley</a>
        on 2023-11-02 14:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/3tilley">@3tilley</a></div>
            <div class="timeline-body"><p><code>--max-depth</code> is one of my most used flags, I love it. It&#x27;s a bit clunky to enter regularly though. Would you allow the adding of a <code>-d</code> shorthand for it? It would also have the advantage that it would match how <code>fd</code> as <code>--max-depth / -d</code> does it. I don&#x27;t think you should have to alter your software for someone else&#x27;s software, but I would suspect there are a group of people who use both who might appreciate it, on top of the group that only use <code>rg</code>. It also appears to be used by <code>du</code> and a few other tools, which might be why I keep subconsciously reaching for it, though of course there are lots of tools that use <code>-d</code> for something else.</p>
<p>It seems like this may have been asked before, but I can&#x27;t see any record of the discussion with a brief search, but worst-case this can be that discussion.</p>
<p>The only reason I can see that it might not have been implemented is that there is a <a href="https://man7.org/linux/man-pages/man1/grep.1.html">quirky</a> grep flag with the same name.</p>
<pre><code>       -d ACTION, --directories=ACTION
              If an input file is a directory, use ACTION to process it.
              By default, ACTION is read, i.e., read directories just as
              if they were ordinary files.  If ACTION is skip, silently
              skip directories.  If ACTION is recurse, read all files
              under each directory, recursively, following symbolic
              links only if they are on the command line.  This is
              equivalent to the -r option.
</code></pre>
<p>I understand that breaking behaviour with <code>grep</code> is undesirable, but perhaps this is a sufficiently awkward and underused flag that it might be ok? After all current the behaviour isn&#x27;t compatible as <code>-d</code> does nothing.</p>
<p>Otherwise there is an argument for paucity of shortcodes for future use, in reply to which I can only make the case that I think this would be useful to lots of people, perhaps more than future yet-to-be-implemented flags? I guess you know much better than me about that.</p>
<p>A final option would be a config flag to enable it, is there prior art for that?</p>
<p>Happy to contribute the PR if you agree,</p>
<p>Max</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/3tilley">@3tilley</a> on 2023-11-02 20:19</div>
            <div class="timeline-body"><p>You&#x27;ll see that I&#x27;ve given this a go in #2644. I also had a quick look at what other similar tools did. A bit of a mix seems to be the answer.</p>
<p>Comparison with other greppers:</p>
<a href="https://github.com/Genivia/ugrep">ugrep</a>:
<p><code>-d</code> works as grep does it, <code>--depth</code> operates slightly unusually</p>
<pre><code>--depth=[MIN,][MAX], -1, -2, -3, ... -9, -10, -11, -12, ...
        Restrict recursive searches from MIN to MAX directory levels deep,
        where -1 (--depth=1) searches the specified path without recursing
        into subdirectories.  Note that -3 -5, -3-5, and -35 search 3 to 5
        levels deep.  Enables -r if -R or -r is not specified.
...
ugrep option -d, --directories=ACTION is skip by default, instead of read. By default, directories specified on the command line are searched, but not recursively deeper into subdirectories.
</code></pre>
<a href="https://mirrors.edge.kernel.org/pub/software/scm/git/docs/git-grep.html">git grep</a>
<p><code>-d</code> doesn&#x27;t do anything and <code>--max-depth</code> as per rg</p>
<a href="https://github.com/ggreer/the_silver_searcher">The Silver Searcher</a>
<p><code>-d</code> doesn&#x27;t do anything, and <code>--depth</code> is used for limiting search depth</p>
<a href="https://linux.die.net/man/1/ack">ack</a>
<p><code>-d</code> doesn&#x27;t do anything, and I can&#x27;t see a way of limiting depth of search</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-21 23:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:13 UTC
    </footer>
</body>
</html>
