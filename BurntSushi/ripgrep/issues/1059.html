<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCRE2 invalid utf support - BurntSushi/ripgrep #1059</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>PCRE2 invalid utf support</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1059">#1059</a>
        opened by <a href="https://github.com/zherczeg">@zherczeg</a>
        on 2018-09-19 08:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zherczeg">@zherczeg</a></div>
            <div class="timeline-body"><p>Hi,</p>
<p>I have been working on adding invalid UTF support to PCRE2. Here is my announcement:
https://lists.exim.org/lurker/message/20180917.192454.6e424732.en.html
Only one flag needs to be passed to enable it.</p>
<p>The feature is experimental, but I would be grateful if you could try it. If you experience issues let me know. Could you do some measurements as well?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-19 10:51</div>
            <div class="timeline-body"><p>Hi! Yes, I filed an issue for it here, which is where work needs to start: https://github.com/BurntSushi/rust-pcre2/issues/5</p>
<p>I do expect there to be at least some improvement, yeah! I'm not sure when I will get around to trying it though. It should be fairly easy to add and thread it through such that ripgrep uses it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-19 10:53</div>
            <div class="timeline-body"><p>I think the Julia folks will also be interested in this feature! From what I know, they are currently enabling UCP and UTF modes, while disabling the UTF check and potentially running on invalid UTF-8: https://github.com/JuliaLang/julia/blob/8dd33262d3c88f17ec404e772a5167227c2b26af/base/regex.jl#L7-L8</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zherczeg">@zherczeg</a> on 2018-09-19 12:51</div>
            <div class="timeline-body"><p>Thank you. If more people try it more errors could be revealed before the next pcre2 release.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @BurntSushi on 2019-01-24 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-04-14 18:53</div>
            <div class="timeline-body"><p>I'm going to close this out in favor of https://github.com/BurntSushi/rust-pcre2/issues/5. I'm not sure when I'll get a chance to try this out, but it might not be until the next release (assuming it will be in 10.33).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2019-04-14 18:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:41 UTC
    </footer>
</body>
</html>
