<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>choose buffering strategy - BurntSushi/ripgrep #231</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>choose buffering strategy</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/231">#231</a>
        opened by <a href="https://github.com/jots">@jots</a>
        on 2016-11-11 23:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jots">@jots</a></div>
            <div class="timeline-body"><p>Would like to do something like:</p>
<p>tail -f log.txt | rg term1 | rg term2 | etc.</p>
<p>and have data emitted right when data that would match hits the logfile.
Is this possible?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-12 14:04</div>
            <div class="timeline-body"><p>I don't believe it's possible today, but I agree it should be.</p>
<p>I think fixing this will involve looking at how other search tools behave.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @BurntSushi on 2016-11-12 14:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2016-11-12 14:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-12 14:05</div>
            <div class="timeline-body"><p>And we probably don't want to actually disable buffering, but perhaps switch to line buffering.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "disable buffering" to "choose buffering strategy" by @BurntSushi on 2016-11-12 14:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2016-11-20 20:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nkh">@nkh</a> on 2023-06-20 08:35</div>
            <div class="timeline-body"><p>@BurntSushi</p>
<p>Hi, I'm a bit confused about the buffering, I have a command that generates a large output, I want to act as soon as a word is matched. I tee the output in a file so I can tail it.</p>
<p>command: rm xxx ; tail -F xxx | perl -pe '/NOT/ &amp;&amp; exit'
result: stops within a second
discussion: tail does some buffering, in this case around 200 lines of the command's output</p>
<p>command: rm xxx ; tail -F xxx | rg . | perl -pe '/NOT/ &amp;&amp; exit'
result: stops within 10 seconds
discussion: I guess some buffering is done by rg but as all the lines are matching it soon flushes.</p>
<p>command: rm xxx ; tail -F xxx | rg NOT | perl -pe '/NOT/ &amp;&amp; exit'
result: never stops
discussion: tail -F never stops and I guess that rg's buffer is not flushed.</p>
<p>Did I misunderstand this ticket?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-06-20 09:07</div>
            <div class="timeline-body"><p>Please open new issues in the future. I don't understand why people keep replying to ancient issues that may or may not be related.</p>
<p>In any case, try the <code>--line-buffered</code> flag. (I'm on mobile, I believe that's what it's called. Look in the man page.)</p>
<p>If that doesn't work please <em>create a new issue with a complete reproduction.</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nkh">@nkh</a> on 2023-06-20 09:27</div>
            <div class="timeline-body"><p>it worked with --line-buffered</p>
<p>people reply to ancient issues because their issue is related (when they do spend the time)</p>
<p>now that --line-buffered is named people reading this ticket will have a clue. I found no --line-buffered in #240 nor in the patch.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-06-20 09:31</div>
            <div class="timeline-body"><p>... because it was added later.</p>
<p>I'm seriously considering locking all closed issues. Squirreling away discussion in old issues leads to a disorganized mess.</p>
<p>There's a reason why Discussions is enabled and it specifically encourages Q&amp;A. Please use that next time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Locked by @ghost on 2023-06-20 09:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:41:53 UTC
    </footer>
</body>
</html>
