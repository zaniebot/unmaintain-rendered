<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>glob exclude option does not work as expected on Windows - BurntSushi/ripgrep #517</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>glob exclude option does not work as expected on Windows</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/517">#517</a>
        opened by <a href="https://github.com/stalwartgiraffe">@stalwartgiraffe</a>
        on 2017-06-15 15:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/stalwartgiraffe">@stalwartgiraffe</a></div>
            <div class="timeline-body"><p>The glob exclude option does not seem to work as expected.  Attached is a zip of a dir with several txt files in it which contain the string literal whatever.  I tried to do a search which excluded files which ended in .map and .log but on Windows 10 received this output
<a href="https://github.com/BurntSushi/ripgrep/files/1078175/rgtest.zip">rgtest.zip</a></p>
<p>c:\rgtest&gt;rg -g !*.map.log  -F whatever
whatever.txt
2:whatever</p>
<p>sub1\whatever.map
2:whatever</p>
<p>sub1\whatever.txt
2:whatever</p>
<p>sub1\whatever.log
2:whatever</p>
<p>c:\rgtest&gt;rg -g &#x27;!*.map.log&#x27;  -F whatever
No files were searched, which means ripgrep probably applied a filter you didn&#x27;t expect. Try running again with --debug.</p>
<p>c:\rgtest&gt;rg -g &quot;!*.map.log&quot;  -F whatever
whatever.txt
2:whatever</p>
<p>sub1\whatever.log
2:whatever</p>
<p>sub1\whatever.map
2:whatever</p>
<p>sub1\whatever.txt
2:whatever</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-06-15 16:02</div>
            <div class="timeline-body"><p>Wait, you don&#x27;t have any files that end with <code>.map.log</code> though? The glob <code>*.map.log</code> only matches things like <code>foo.map.log</code> but <em>not</em> <code>foo.map</code> or <code>foo.log</code>. If you want to match <code>.map</code> or <code>.log</code>, then use <code>*.{map,log}</code>. Alternatively, <code>-g &#x27;!*.log&#x27; -g &#x27;!*.map&#x27;</code> would work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stalwartgiraffe">@stalwartgiraffe</a> on 2017-06-15 17:56</div>
            <div class="timeline-body"><p>ok I  you may want to update the doc page
https://github.com/BurntSushi/ripgrep
on git with the above example in the email.  The one in the page must have
confused me...</p>
<hr>
<p>Or exclude files matching a particular glob:</p>
<p>$ rg foo -g &#x27;!*.min.js&#x27;</p>
<hr>
<p>and I misread it to mean it that it would to apply to files ending in *.min
OR *.js
So maybe doc clarification is in order, which spells out the cases</p>
<p>ALSO, for me, single quoting the glob pattern simple does not work on the
dos shell.  Double quote and no quote does work using the pattern you
suggest in email.  I will close the issue.</p>
<p>cc:\MetaVR\Dev\rgtest&gt;rg -g &#x27;!*.log&#x27; whatever
No files were searched, which means ripgrep probably applied a filter you
didn&#x27;t expect. Try running again with --debug.</p>
<p>c:\MetaVR\Dev\rgtest&gt;rg -g &quot;!*.log&quot; whatever
sub1\whatever.map
2:whatever</p>
<p>sub1\whatever.txt
2:whatever</p>
<p>whatever.txt
2:whatever</p>
<p>c:\MetaVR\Dev\rgtest&gt;rg -g !*.log whatever
whatever.txt
2:whatever</p>
<p>sub1\whatever.map
2:whatever</p>
<p>sub1\whatever.txt
2:whatever</p>
<p>On Thu, Jun 15, 2017 at 12:03 PM, Andrew Gallant <a href="mailto:notifications@github.com">notifications@github.com</a>
wrote:</p>
<blockquote>
<p>Wait, you don&#x27;t have any files that end with .map.log though? The glob
<em>.map.log only matches things like foo.map.log but *not</em> foo.map or
foo.log. If you want to match .map or .log, then use <em>.{map,log}.
Alternatively, -g &#x27;!</em>.log&#x27; -g &#x27;!*.map&#x27; would work.</p>
<p>â€”
You are receiving this because you authored the thread.
Reply to this email directly, view it on GitHub
<a href="https://github.com/BurntSushi/ripgrep/issues/517#issuecomment-308785146">BurntSushi/ripgrep#517</a>,
or mute the thread
<a href="https://github.com/notifications/unsubscribe-auth/AGGkLCGP_yEtQ4hArRNfresyWr-xMdpGks5sEVW1gaJpZM4N7Z03">https://github.com/notifications/unsubscribe-auth/AGGkLCGP_yEtQ4hArRNfresyWr-xMdpGks5sEVW1gaJpZM4N7Z03</a>
.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/stalwartgiraffe">@stalwartgiraffe</a> on 2017-06-15 17:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:04 UTC
    </footer>
</body>
</html>
