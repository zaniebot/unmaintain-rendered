<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expose an API to determine whether a specific path is ignored - BurntSushi/ripgrep #2630</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Expose an API to determine whether a specific path is ignored</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2630">#2630</a>
        opened by <a href="https://github.com/yonip23">@yonip23</a>
        on 2023-10-15 11:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/yonip23">@yonip23</a></div>
            <div class="timeline-body"><p>Hi all,
I have a use case where I want to determine whether a specific path is ignored, for example - I have a file watcher, and I want to determine whether or not to handle the incoming event with respect to the user&#x27;s ignore configurations.
What are you guys recommending to do in my use case?</p>
<p>I started playing around with the <code>ignore</code> crate, and I think what I&#x27;m looking for is something along the lines of this function:</p>
<pre><code>fn is_ignored(path: &amp;Path) -&gt; bool {
  let ig_root = IgnoreBuilder::new().build();
  let (ig, _err) = ig_root.add_parents(path);
  ig.matched(path, path.is_dir()).is_ignore()
}
</code></pre>
<p>I&#x27;m quite certain the code above is not 100% correct, so if you can provide some guidelines on how to implement it that&#x27;d be awsome.
I&#x27;ll gladly open a PR with this API if you guys agree, and I&#x27;ll be even happier if there is a way to handle my use case without changing any code :)</p>
<p>Kind regards and thanks in advance!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-10-15 11:13</div>
            <div class="timeline-body"><p>The ignore crate isn&#x27;t really designed for this use case unfortunately. It&#x27;s designed for directory traversal as opposed to ad hoc querying.</p>
<p>It might be better to build a list of all non-ignored files in memory and maintain it somehow.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-10-15 11:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wontfix</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-10-15 11:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yonip23">@yonip23</a> on 2023-10-15 11:24</div>
            <div class="timeline-body"><p>@BurntSushi Thank you for the quick reply!
Unfortunately, maintaining an in-memory cache is a less preferable option for my use case - I&#x27;d rather maintain a private fork of your crate with the additional API necessary or find an alternative.
Can I ask how would you recommend to implement this API using the <code>IgnoreBuilder</code> APIs? how to use the <code>add_child</code> or <code>add_parents</code> in the right order?
Or if you know of any alternatives, that&#x27;d help greatly as well.</p>
<p>Thanks again!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-10-15 11:34</div>
            <div class="timeline-body"><blockquote>
<p>Can I ask how would you recommend to implement this API using the IgnoreBuilder APIs?</p>
</blockquote>
<p>I truly and honestly don&#x27;t know. This isn&#x27;t a problem I have thought about much and I just don&#x27;t have the bandwidth to do so at present.</p>
<p>I do have plans to (at some point) overhaul the <code>ignore</code> crate, and I&#x27;ll keep this use case in mind when I do. But it might be years before that&#x27;s done.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yonip23">@yonip23</a> on 2023-10-15 11:35</div>
            <div class="timeline-body"><p>I see,
Thank you for the replies and for this crate ðŸ™Œ</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:13 UTC
    </footer>
</body>
</html>
