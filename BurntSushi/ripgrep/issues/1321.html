<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ripgrep doesn't respect .ignore file - BurntSushi/ripgrep #1321</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ripgrep doesn't respect .ignore file</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1321">#1321</a>
        opened by <a href="https://github.com/tesuji">@tesuji</a>
        on 2019-07-11 04:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tesuji">@tesuji</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>ripgrep 11.0.1 (rev 8ebc113847)
-SIMD -AVX (compiled)
+SIMD -AVX (runtime)</p>
<h4>How did you install ripgrep?</h4>
<p>Build from source</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>Debian GNU/Linux 9.9 (stretch) 4.9.0-9-amd64 #1 SMP Debian 4.9.168-1+deb9u2 (2019-05-13) x86_64 GNU/Linux</p>
<h4>Describe your question, feature request, or bug.</h4>
<p>Ripgrep doesn't respect <code>.ignore</code> file. My <code>.ignore</code> file:</p>
<pre><code>src/test
src/rust-installer
src/doc/nomicon
src/tools/cargo
src/doc/reference
src/doc/book
src/tools/rls
src/tools/clippy
src/tools/rustfmt
src/tools/miri
src/doc/rust-by-example
src/llvm-emscripten
src/stdsimd
src/doc/rustc-guide
src/doc/edition-guide
src/llvm-project
src/doc/embedded-book
</code></pre>
<p>Project I grepped: https://github.com/rust-lang/rust
In the project root, I used <code>rg -trust '^\s*extern\s+crate\s+[a-z][_a-zA-Z0-9]*;' src</code>.
But ripgrep also included search result from <code>src/test</code>:</p>
<pre><code class="language-grep">...
src/tools/rls/rls-analysis/src/test/mod.rs
17:extern crate env_logger;

src/test/run-make-fulldeps/issue-26006/in/time/lib.rs
2:extern crate libc;

src/test/ui/issues/issue-38875/issue-38875.rs
4:extern crate issue_38875_b;

src/test/run-make/thumb-none-qemu/example/src/main.rs
5:extern crate cortex_m;
9:extern crate panic_halt;
...
</code></pre>
<h4>If this is a bug, what are the steps to reproduce the behavior?</h4>
<p>See above.</p>
<h4>If this is a bug, what is the actual behavior?</h4>
<p>The output is really large, upto 18MiB with only stderr. I don't know if it is
appropriate to put it in gist.</p>
<p>If you actually need it, I will upload it somewhere later.</p>
<h4>If this is a bug, what is the expected behavior?</h4>
<p>I think ripgrep should ignore <code>src/test</code> path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tesuji">@tesuji</a> on 2019-07-11 04:37</div>
            <div class="timeline-body"><p>On a second thoughts, I upload ripgrep output with <code>--debug</code> option here. Note that this
file only includes stderr from ripgrep.</p>
<p><a href="https://github.com/BurntSushi/ripgrep/files/3380252/rgoutput-stderr-only.zip">rgoutput-stderr-only.zip</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-07-11 11:27</div>
            <div class="timeline-body"><p>Dupe of #829.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2019-07-11 11:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @BurntSushi on 2019-07-11 11:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:57 UTC
    </footer>
</body>
</html>
