<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>panic in gitignore handling - BurntSushi/ripgrep #106</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>panic in gitignore handling</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/106">#106</a>
        opened by <a href="https://github.com/daaku">@daaku</a>
        on 2016-09-26 18:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/daaku">@daaku</a></div>
            <div class="timeline-body"><p>I got this panic. Looks like it&#x27;s in the gitignore logic -- I can&#x27;t share the whole file, but if you could guide me to figure out which line it&#x27;s failing on I can share that.</p>
<pre><code>thread &#x27;main&#x27; panicked at &#x27;called `Option::unwrap()` on a `None` value&#x27;, ../src/libcore/option.rs|325| 5
|| stack backtrace:
|1| :           0x4fb292 - std::sys::backtrace::tracing::imp::write::h4b09e6e8c01db097
|2| :           0x4ff86d - std::panicking::default_hook::{{closure}}::h1d3243f546573ff4
|3| :           0x4fe6fa - std::panicking::default_hook::h96c288d728df3ebf
|4| :           0x4fecf8 - std::panicking::rust_panic_with_hook::hb1322e5f2588b4db
|5| :           0x4feb92 - std::panicking::begin_panic::hfbeda5aad583dc32
|6| :           0x4fead0 - std::panicking::begin_panic_fmt::h4fe9fb9d5109c4bf
|7| :           0x4fea51 - rust_begin_unwind
|8| :           0x5548ec - core::panicking::panic_fmt::h4395919ece15c671
|9| :           0x55481b - core::panicking::panic::hc74ff52ed78364e1
10:         || x41ae18 - rg::gitignore::GitignoreBuilder::add_path::h706ac92f76fbec29
at /buildslave/rust-buildbot/slave/nightly-dist-rustc-musl-linux/build/obj/../src/libcore/macros.rs|21| 1
at /home/travis/build/BurntSushi/ripgrep/src/gitignore.rs|301| 1
at /home/travis/build/BurntSushi/ripgrep/src/gitignore.rs|265| 5
11:         || x41f708 - rg::ignore::IgnoreDir::with_ignore_names::h6235506834840d62
at /home/travis/build/BurntSushi/ripgrep/src/ignore.rs|365| 5
12:         || x41eb56 - rg::ignore::Ignore::push::he3c5dc3b90e6c6a8
at /home/travis/build/BurntSushi/ripgrep/src/ignore.rs|326| 6
at /home/travis/build/BurntSushi/ripgrep/src/ignore.rs|192| 2
13:         || x43d4c7 - rg::run::hacc2ea9b10689e6d
at /home/travis/build/BurntSushi/ripgrep/src/walk.rs|64| 4
at /home/travis/build/BurntSushi/ripgrep/src/main.rs|132| 2
14:         || x437f4b - rg::main::h38b472398f351607
at /buildslave/rust-buildbot/slave/nightly-dist-rustc-musl-linux/build/obj/../src/libcore/result.rs|601| 1
at /home/travis/build/BurntSushi/ripgrep/src/main.rs|78| 8
15:         || x5071c6 - __rust_maybe_catch_panic
16:         || x4fe0ca - std::rt::lang_start::haaae1186de9de8cb
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kevin-vigor">@kevin-vigor</a> on 2016-09-26 20:09</div>
            <div class="timeline-body"><p>I am experiencing this problem as well. Attached is a .gitignore file which leads to this crash.</p>
<p><a href="https://github.com/BurntSushi/ripgrep/files/494004/gitignore-of-doom.zip">gitignore-of-doom.zip</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-26 20:56</div>
            <div class="timeline-body"><p>My bet is that this is fixed by #104. Do you have lines that are only whitespace but otherwise empty? (I probably introduced this regression in my last round of bug fixes.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-26 20:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-26 22:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/daaku">@daaku</a> on 2016-09-26 23:24</div>
            <div class="timeline-body"><p>I looked at the <code>.gitignore</code> and did in fact find such a line! Will wait for the next release -- thanks for the quick fix!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:01 UTC
    </footer>
</body>
</html>
