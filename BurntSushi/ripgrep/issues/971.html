<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is it possible to merge the lines in rg result? - BurntSushi/ripgrep #971</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is it possible to merge the lines in rg result?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/971">#971</a>
        opened by <a href="https://github.com/wsdjeg">@wsdjeg</a>
        on 2018-07-05 04:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/wsdjeg">@wsdjeg</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<pre><code>ripgrep 0.8.1
-SIMD -AVX
</code></pre>
How did you install ripgrep?
<p>If you installed ripgrep with snap and are getting strange file permission or
file not found errors, then please do not file a bug. Instead, use one of the
Github binary releases.</p>
<p>Just using default arch package manager <code>pacman</code>.</p>
What operating system are you using ripgrep on?
<p><code>uname -a</code></p>
<pre><code>Linux archlinux 4.17.3-1-ARCH #1 SMP PREEMPT Tue Jun 26 04:42:36 UTC 2018 x86_64 GNU/Linux
</code></pre>
Describe your question, feature request, or bug.
<p>I think it is juat a question, how could I merge the lines in the results? in current version, when I search text, sometimes I see two or more lines with same file path and line number ( they have different column), I hope rg can merge the results with same file path and line number.</p>
<p>**Why: **</p>
<p>I try to improve the flygrep.vim, which is a vim plugin, in the plugin I use a job to start rg, the stdout will trigger callback function. but vim script is too slow to parse and merge the lines, I hope <code>rg</code> can do it instead.</p>
<p>for more info see <a href="https://github.com/SpaceVim/SpaceVim/pull/1898">SpaceVim/SpaceVim#1898</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-07-05 10:42</div>
            <div class="timeline-body"><p>Sorry, but this question/bug report isn&#x27;t actionable. I see no reproduction steps. I see no report of expected output or actual output. Please provide a ripgrep command, along with a corpus, that demonstrates what you&#x27;re talking about.</p>
<p>If I had to guess, I&#x27;d say it sounds like you&#x27;re <strong>specifically</strong> using a flag that causes ripgrep to emit a new line for every match. Such flags include <code>--only-matching</code> and <code>--vimgrep</code>. If you don&#x27;t want that behavior, then don&#x27;t use those flags.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-07-05 10:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2018-07-05 17:21</div>
            <div class="timeline-body"><p>@wsdjeg if you&#x27;re trying to get the output format of <code>--vimgrep</code> but without the separate-line-per-match behaviour, i think you want this:</p>
<pre><code>rg --color=never --no-heading --with-filename --line-number --column
</code></pre>
<p>e.g.:</p>
<pre><code>% print -rl &#x27;foobar foobaz&#x27; foobar baz |
  \rg --vimgrep foo
&lt;stdin&gt;:1:1:foobar foobaz
&lt;stdin&gt;:1:8:foobar foobaz
&lt;stdin&gt;:2:1:foobar

% print -rl &#x27;foobar foobaz&#x27; foobar baz |
  \rg --color=never --no-heading --with-filename --line-number --column foo
&lt;stdin&gt;:1:1:foobar foobaz
&lt;stdin&gt;:2:1:foobar
</code></pre>
<p>Obviously then the column number corresponds to only the first match on the line.</p>
<p>Looking at <a href="https://github.com/wsdjeg/SpaceVim/blob/cac5681a2c/autoload/SpaceVim/mapping/search.vim">this</a>, it doesn&#x27;t seem like you use the column number with any of your other search tools, so maybe you can just get rid of it entirely. On the face of it though it would seem ideal if your editor&#x27;s search tool could take you to specific matches instead of just the first one on the line. idk, never used this</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wsdjeg">@wsdjeg</a> on 2018-07-06 12:58</div>
            <div class="timeline-body"><p>@okdana really thanks for your answer, that is what I needed.</p>
<p>@BurntSushi I am  so sorry I do not follow the issue template.</p>
<p>This issue can be closed, and I need to find same answer for ag, pt, ack, and grep.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/wsdjeg">@wsdjeg</a> on 2018-07-06 12:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:06 UTC
    </footer>
</body>
</html>
