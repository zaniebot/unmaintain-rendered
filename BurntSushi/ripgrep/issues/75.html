<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `-g` option from ag - BurntSushi/ripgrep #75</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>-g</code> option from ag</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/75">#75</a>
        opened by <a href="https://github.com/rubik">@rubik</a>
        on 2016-09-25 08:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/rubik">@rubik</a></div>
            <div class="timeline-body"><p>The <code>-g</code> option searches only in the file names. Example:</p>
<pre><code>$ ag -g init | head
scipy/sparse/linalg/eigen/arpack/__init__.py
scipy/sparse/linalg/isolve/__pycache__/__init__.cpython-35.pyc
scipy/sparse/linalg/isolve/__init__.py
scipy/sparse/linalg/__pycache__/__init__.cpython-35.pyc
scipy/sparse/linalg/__init__.py
scipy/sparse/linalg/dsolve/__pycache__/__init__.cpython-35.pyc
scipy/sparse/linalg/dsolve/__init__.py
scipy/sparse/__pycache__/__init__.cpython-35.pyc
scipy/sparse/__init__.py
scipy/sparse/csgraph/__pycache__/__init__.cpython-35.pyc
</code></pre>
<p>It&#x27;s quite useful in combination with <a href="https://github.com/ctrlpvim/ctrlp.vim"><code>ctrlp.vim</code></a>, to replace the Vim file finder with a faster alternative. Does it seem like a sensible addition to rg?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-25 13:09</div>
            <div class="timeline-body"><p>It&#x27;s already there. Use <code>--files</code>. (Note that there&#x27;s a bug with it accepting file path arguments in the latest release that is fixed on master. I&#x27;m getting a new release out today.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-25 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rubik">@rubik</a> on 2016-09-25 20:11</div>
            <div class="timeline-body"><p>I had seen that option, but it&#x27;s not equivalent:</p>
<pre><code>$ ag -g django
notebook/static/components/codemirror/mode/django/django.js
$ rg --files -u | wc -l
18281
$ rg --files -u | rg -N django
notebook/static/components/codemirror/mode/django/django.js
</code></pre>
<p><code>ag -g</code> actually searches the file names, while <code>rg --files</code> just lists all the files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-25 20:16</div>
            <div class="timeline-body"><p>@rubik Check out <code>rg --help</code>, please. <code>rg --files -g &#x27;django&#x27;</code>. Note that <code>-g</code> is short for <code>--glob</code>, so you&#x27;ll need to do <code>rg --files -g &#x27;django*&#x27;</code> to get the same results. And use <code>rg --files -g &#x27;**/django/**&#x27;</code> to match anywhere in the path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rubik">@rubik</a> on 2016-09-25 20:31</div>
            <div class="timeline-body"><p>Thanks, I actually read <code>man rg</code> but got confused. My bad.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pdbradley">@pdbradley</a> on 2016-12-02 12:00</div>
            <div class="timeline-body"><p>hey @rubik I also use Ctrlp, and I set up ripgrep as a replacment for silversearcher (ag), but one problem I&#x27;m having is that using ripgrep, the list of search results includes the full path to the file.  I don&#x27;t like showing the full path, it clutters things.</p>
<p>Somehow using ag, the results only included the relative path of the project:</p>
<p>app/models/user.rb (for example)</p>
<p>and using rg, the result would show:</p>
<p>/User/myusername/projects/someproject/app/models/user.rb</p>
<p>I spent about an hour or two trying to find some option in either ctrlp or ripgrep related to this, and could not.</p>
<p>I know this sort of might be the wrong place to solve this, but it might not be.  Here is my relevant vimrc below.  If you got ripgrep working with ctrlp in vim, could you tell me what I&#x27;m missing?  Thanks.</p>
<pre><code>&quot;WHY WONT ripgrep and ctrlp stop showing the full path and matching on it???!!!
&quot;trying out ripgrep...use ag instead of ack with ack.vim; -i means case insensitive
 if executable(&#x27;rg&#x27;)
     let g:ctrlp_user_command = &#x27;rg --files &quot;&quot; %s&#x27;
endif

&quot;use ag instead of ack with ack.vim; -i means case insensitive
if executable(&#x27;ag&#x27;)
    let g:ctrlp_user_command = &#x27;ag %s -l --nocolor -g &quot;&quot;&#x27;
endif
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-12-02 12:14</div>
            <div class="timeline-body"><p>@pdbradley Running with <code>--files</code> outputs relative paths. I&#x27;d suggest simplifying your problem so that you can debug better. For example:</p>
<pre><code>[andrew@Serval 75] rg --files
hi
foo/hi
foo/bar/hi
[andrew@Serval 75] pwd
/tmp/75
[andrew@Serval 75] rg --files $(pwd)
/tmp/75/hi
/tmp/75/foo/hi
/tmp/75/foo/bar/hi
</code></pre>
<p>Note the last example above. ripgrep outputs paths based on the paths you&#x27;ve specified.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-12-02 12:15</div>
            <div class="timeline-body"><p>Note that <code>ag</code> has the same behavior:</p>
<pre><code>[andrew@Serval 75] ag -g . ./
hi
foo/hi
foo/bar/hi
[andrew@Serval 75] ag -g . $(pwd)
/tmp/75/hi
/tmp/75/foo/hi
/tmp/75/foo/bar/hi
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pdbradley">@pdbradley</a> on 2016-12-02 15:03</div>
            <div class="timeline-body"><p>I figured it out.  In my vimrc I needed to change this:</p>
<pre><code>     let g:ctrlp_user_command = &#x27;rg --files &quot;&quot; %s&#x27;
</code></pre>
<p>to this:</p>
<pre><code>     let g:ctrlp_user_command = &#x27;rg --files  %s&#x27;

</code></pre>
<p>i.e, remove the &quot;&quot;.  I don&#x27;t know why I had that in there.  now the paths look fine in ctrlp.  thanks for your attention @BurntSushi I heard about ripgrep on The Bike Shed podcast and thought I would try it out.  great work.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:00 UTC
    </footer>
</body>
</html>
