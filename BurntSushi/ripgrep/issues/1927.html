<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ripgrep is not ignoring .gitignore files by default! - BurntSushi/ripgrep #1927</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ripgrep is not ignoring .gitignore files by default!</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1927">#1927</a>
        opened by <a href="https://github.com/ronyAhmed1200">@ronyAhmed1200</a>
        on 2021-07-06 08:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ronyAhmed1200">@ronyAhmed1200</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p><code>ripgrep 11.0.2</code>
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)</p>
<h4>How did you install ripgrep?</h4>
<p>i used apt to install it.</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>It is linux mint 20.1 which is ubuntu derivative.</p>
<h4>Describe your bug.</h4>
<p>I have installed <code>ripgrep</code> in ubuntu 20.04. Basically i want to use it to find my code quickly in vim. But when i run <code>:rg</code> in vim, it is searching between all the 300000 files. I think it is listing all the <code>.gitignore</code> files.. So it turns out really difficult to search in <strong>300000</strong> files.</p>
<p><img src="https://user-images.githubusercontent.com/75775786/124569133-7f14cf00-de67-11eb-9524-c5c9d1da57f9.png" alt="image" /></p>
<p>This image when i tried to search source with ripgrep:
<img src="https://user-images.githubusercontent.com/75775786/124569498-d155f000-de67-11eb-9442-ed50bd55afbe.png" alt="image" /></p>
<h4>What is the expected behavior?</h4>
<p>If should not include .gitignore files by default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-06 08:57</div>
            <div class="timeline-body"><p>The version of ripgrep you're using is almost two years old. Please upgrade.</p>
<p>Otherwise, this ticket is not actionable. I can't debug your vim setup. Please provide a CLI reproduction.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ronyAhmed1200">@ronyAhmed1200</a> on 2021-07-06 09:29</div>
            <div class="timeline-body"><p>Well, I have upgraded it..now the version is:
<code>ripgrep 12.1.1 (rev 7cb211378a)</code>
But still getting the same behavior!!</p>
<p>And how to provide a cli reproduction.. you can see it in the image..</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ronyAhmed1200">@ronyAhmed1200</a> on 2021-07-06 10:50</div>
            <div class="timeline-body"><p>now after upgrading it is showing me that i need to search across all 9870000+ files !! What ??</p>
<p><img src="https://user-images.githubusercontent.com/75775786/124588067-3581af80-de7a-11eb-88aa-24c0e4d691a9.png" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-06 10:59</div>
            <div class="timeline-body"><p>If you can't provide an actual <code>rg</code> command to run, then this issue isn't actionable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2021-07-06 10:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by @BurntSushi on 2021-07-06 10:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ronyAhmed1200">@ronyAhmed1200</a> on 2021-07-06 12:46</div>
            <div class="timeline-body"><p>I have to run it with <code>:Rg</code> command in vim. But I am sure the issue is not with <code>:Rg</code> or <code>rg</code> command, but it is actually <strong>a bug or issue</strong> of the app. How am I sure?</p>
<p>Well, I have run with the <code>rg </code>command in my terminal. From there you can see that it is showing me the word i searched in <code>nodemodules</code> folder which is actually ignored by <code>.gitignore</code> file..</p>
<p><img src="https://user-images.githubusercontent.com/75775786/124602230-75e92980-de8a-11eb-85e7-43039b366969.png" alt="image" /></p>
<p>And another thing is depressing. Why did you close a issue or bug before solving out!!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-06 12:55</div>
            <div class="timeline-body"><p>I can't keep repeating myself. I can only say, &quot;i need a reproduction&quot; in so many ways. An image isn't good enough. <strong>Fill out the issue template.</strong> Give me a way to reproduce what you're seeing.</p>
<p>This is the last response I'll give to you unless I see a reproduction.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ronyAhmed1200">@ronyAhmed1200</a> on 2021-07-06 17:38</div>
            <div class="timeline-body"><p><strong>reproduction</strong></p>
<p>https://gist.github.com/ronyAhmed1200/f317f019e67ec64fbebfd4636954e3f2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-06 17:42</div>
            <div class="timeline-body"><p>@ronyAhmed1200 That's not a reproduction. <strong>I need to be able to reproduce the problem.</strong> Which git repo should I clone to run that search?</p>
<p>And you didn't include the full output as far as I can tell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ronyAhmed1200">@ronyAhmed1200</a> on 2021-07-06 17:59</div>
            <div class="timeline-body"><p>This result is produced with <a href="https://github.com/ronyAhmed1200/Robofriends">This repo</a></p>
<p>And my terminal only produced that result.. Well, u can test it with this repo..</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-06 18:14</div>
            <div class="timeline-body"><p>No. Your output is very clearly truncated.</p>
<p>Running with <code>-l</code> to just print the files matched, this is what I get:</p>
<pre><code>$ ls -l
total 1468
drwxrwxr-x 3 andrew users    4096 Jul  6 14:02 build
drwxrwxr-x 2 andrew users    4096 Jul  6 14:02 public
drwxrwxr-x 4 andrew users    4096 Jul  6 14:02 src
-rw-rw-r-- 1 andrew users    1023 Jul  6 14:02 package.json
-rw-rw-r-- 1 andrew users 1480930 Jul  6 14:02 package-lock.json
-rw-rw-r-- 1 andrew users      75 Jul  6 14:02 README.md

$ rg -l data
package-lock.json
build/static/js/main.54f0344c.chunk.js.map
src/Containers/App.js
build/static/js/runtime-main.7222f5d4.js.map
build/static/css/2.c1f4f5f4.chunk.css
public/index.html
build/static/css/2.c1f4f5f4.chunk.css.map
build/static/js/2.db7782eb.chunk.js
build/static/js/2.db7782eb.chunk.js.map
</code></pre>
<p>As far as I can tell, none of those files are in your <code>.gitignore</code>. But your <code>ls</code> output is different than mine. Yours has a <code>node_modules</code> directory. Mine does not. I guess I'm supposed to do something to generate that? I ran <code>yarn install</code> and got this:</p>
<pre><code>$ ls -l
total 2008
drwxrwxr-x    3 andrew users    4096 Jul  6 14:02 build
drwxrwxr-x 1040 andrew users   36864 Jul  6 14:08 node_modules
drwxrwxr-x    2 andrew users    4096 Jul  6 14:02 public
drwxrwxr-x    4 andrew users    4096 Jul  6 14:02 src
-rw-rw-r--    1 andrew users    1023 Jul  6 14:02 package.json
-rw-rw-r--    1 andrew users 1480930 Jul  6 14:02 package-lock.json
-rw-rw-r--    1 andrew users      75 Jul  6 14:02 README.md
-rw-rw-r--    1 andrew users  512064 Jul  6 14:08 yarn.lock
</code></pre>
<p>OK, re-running ripgrep:</p>
<pre><code>$ rg -l data
yarn.lock
package-lock.json
src/Containers/App.js
public/index.html
build/static/js/main.54f0344c.chunk.js.map
build/static/js/runtime-main.7222f5d4.js.map
build/static/css/2.c1f4f5f4.chunk.css
build/static/js/2.db7782eb.chunk.js
build/static/css/2.c1f4f5f4.chunk.css.map
build/static/js/2.db7782eb.chunk.js.map
</code></pre>
<p>The only additional file is <code>yarn.lock</code> which is also not excluded by your <code>.gitignore</code> file, so this also looks correct.</p>
<p>I see no results from <code>node_modules</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-06 18:16</div>
            <div class="timeline-body"><p>And running <code>rg -l data --debug</code> has this line:</p>
<pre><code>DEBUG|ignore::walk|crates/ignore/src/walk.rs:1741: ignoring ./node_modules: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./.gitignore&quot;), original: &quot;node_modules/&quot;, actual: &quot;**/node_modules&quot;, is_whitelist: false, is_only_dir: true })))
</code></pre>
<p>So if you're seeing something different, then you either have some other <code>.gitignore</code> or <code>.ignore</code> file somewhere, or you have a ripgrep config file. Either way, <code>--debug</code> output will tell you. <strong>Like the issue template you only partially filled out said.</strong></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ronyAhmed1200">@ronyAhmed1200</a> on 2021-07-06 18:29</div>
            <div class="timeline-body"><p>Thanks for assisting me. May be I have missed something !</p>
<p>So now after runing <code>rg -l data --debug</code>, I see this..</p>
<pre><code>DEBUG|grep_regex::literal|crates/regex/src/literal.rs:58: literal prefixes detected: Literals { lits: [Complete(data)], limit_size: 250, limit_class: 10 }
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:426: glob converted to regex: Glob { glob: &quot;**/npm-debug.log*&quot;, re: &quot;(?-u)^(?:/?|.*/)npm\\-debug\\.log[^/]*$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: Tokens([RecursivePrefix, Literal('n'), Literal('p'), Literal('m'), Literal('-'), Literal('d'), Literal('e'), Literal('b'), Literal('u'), Literal('g'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }
DEBUG|globset|crates/globset/src/lib.rs:426: glob converted to regex: Glob { glob: &quot;**/yarn-debug.log*&quot;, re: &quot;(?-u)^(?:/?|.*/)yarn\\-debug\\.log[^/]*$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: Tokens([RecursivePrefix, Literal('y'), Literal('a'), Literal('r'), Literal('n'), Literal('-'), Literal('d'), Literal('e'), Literal('b'), Literal('u'), Literal('g'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }
DEBUG|globset|crates/globset/src/lib.rs:426: glob converted to regex: Glob { glob: &quot;**/yarn-error.log*&quot;, re: &quot;(?-u)^(?:/?|.*/)yarn\\-error\\.log[^/]*$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: Tokens([RecursivePrefix, Literal('y'), Literal('a'), Literal('r'), Literal('n'), Literal('-'), Literal('e'), Literal('r'), Literal('r'), Literal('o'), Literal('r'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }
DEBUG|globset|crates/globset/src/lib.rs:426: glob converted to regex: Glob { glob: &quot;**/lerna-debug.log*&quot;, re: &quot;(?-u)^(?:/?|.*/)lerna\\-debug\\.log[^/]*$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: Tokens([RecursivePrefix, Literal('l'), Literal('e'), Literal('r'), Literal('n'), Literal('a'), Literal('-'), Literal('d'), Literal('e'), Literal('b'), Literal('u'), Literal('g'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 2 literals, 29 basenames, 6 extensions, 0 prefixes, 0 suffixes, 2 required extensions, 4 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|ignore::walk|crates/ignore/src/walk.rs:1730: ignoring ./node_modules: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./.gitignore&quot;), original: &quot;node_modules/&quot;, actual: &quot;**/node_modules&quot;, is_whitelist: false, is_only_dir: true })))
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|ignore::walk|crates/ignore/src/walk.rs:1730: ignoring ./.git: Ignore(IgnoreMatch(Hidden))
DEBUG|ignore::walk|crates/ignore/src/walk.rs:1730: ignoring ./.gitignore: Ignore(IgnoreMatch(Hidden))
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; package-lock.json
0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
public/index.html
build/static/js/main.54f0344c.chunk.js.map
build/static/js/runtime-main.7222f5d4.js.map
src/Containers/App.js
build/static/js/2.db7782eb.chunk.js
build/static/css/2.c1f4f5f4.chunk.css.map
build/static/css/2.c1f4f5f4.chunk.css
build/static/js/2.db7782eb.chunk.js.map

</code></pre>
<p>Which is clearly not same as yours. Interesting, which ripgrep version produced that result in your test? bcz i think the problem is with the version maybe..</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-07-06 18:31</div>
            <div class="timeline-body"><p>Your debug output says it is ignoring node_modules.</p>
<p>I'm using the latest version of ripgrep: 13.0.0.</p>
<p>On Tue, Jul 6, 2021, 14:29 Rony Ahmed <em><strong>@</strong></em>.***&gt; wrote:</p>
<blockquote>
<p>Thanks for assisting me. May be I have missed something !</p>
<p>So now after runing rg -l data --debug, I see this..</p>
<p>DEBUG|grep_regex::literal|crates/regex/src/literal.rs:58: literal prefixes detected: Literals { lits: [Complete(data)], limit_size: 250, limit_class: 10 }
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:426: glob converted to regex: Glob { glob: &quot;<strong>/npm-debug.log<em>&quot;, re: &quot;(?-u)^(?:/?|.</em>/)npm\-debug\.log[^/]*$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: Tokens([RecursivePrefix, Literal('n'), Literal('p'), Literal('m'), Literal('-'), Literal('d'), Literal('e'), Literal('b'), Literal('u'), Literal('g'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }
DEBUG|globset|crates/globset/src/lib.rs:426: glob converted to regex: Glob { glob: &quot;</strong>/yarn-debug.log<em>&quot;, re: &quot;(?-u)^(?:/?|.</em>/)yarn\-debug\.log[^/]<em>$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: Tokens([RecursivePrefix, Literal('y'), Literal('a'), Literal('r'), Literal('n'), Literal('-'), Literal('d'), Literal('e'), Literal('b'), Literal('u'), Literal('g'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }
DEBUG|globset|crates/globset/src/lib.rs:426: glob converted to regex: Glob { glob: &quot;**/yarn-error.log</em>&quot;, re: &quot;(?-u)^(?:/?|.<em>/)yarn\-error\.log[^/]</em>$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: Tokens([RecursivePrefix, Literal('y'), Literal('a'), Literal('r'), Literal('n'), Literal('-'), Literal('e'), Literal('r'), Literal('r'), Literal('o'), Literal('r'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }
DEBUG|globset|crates/globset/src/lib.rs:426: glob converted to regex: Glob { glob: &quot;<strong>/lerna-debug.log<em>&quot;, re: &quot;(?-u)^(?:/?|.</em>/)lerna\-debug\.log[^/]*$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: Tokens([RecursivePrefix, Literal('l'), Literal('e'), Literal('r'), Literal('n'), Literal('a'), Literal('-'), Literal('d'), Literal('e'), Literal('b'), Literal('u'), Literal('g'), Literal('.'), Literal('l'), Literal('o'), Literal('g'), ZeroOrMore]) }
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 2 literals, 29 basenames, 6 extensions, 0 prefixes, 0 suffixes, 2 required extensions, 4 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|ignore::walk|crates/ignore/src/walk.rs:1730: ignoring ./node_modules: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./.gitignore&quot;), original: &quot;node_modules/&quot;, actual: &quot;</strong>/node_modules&quot;, is_whitelist: false, is_only_dir: true })))
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|ignore::walk|crates/ignore/src/walk.rs:1730: ignoring ./.git: Ignore(IgnoreMatch(Hidden))
DEBUG|ignore::walk|crates/ignore/src/walk.rs:1730: ignoring ./.gitignore: Ignore(IgnoreMatch(Hidden))
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; package-lock.json
0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
public/index.html
build/static/js/main.54f0344c.chunk.js.map
build/static/js/runtime-main.7222f5d4.js.map
src/Containers/App.js
build/static/js/2.db7782eb.chunk.js
build/static/css/2.c1f4f5f4.chunk.css.map
build/static/css/2.c1f4f5f4.chunk.css
build/static/js/2.db7782eb.chunk.js.map</p>
<p>Which is clearly not same as yours. Interesting, which ripgrep version
produced that result in your test?</p>
<p>â€”
You are receiving this because you modified the open/close state.
Reply to this email directly, view it on GitHub
<a href="https://github.com/BurntSushi/ripgrep/issues/1927#issuecomment-874987998">https://github.com/BurntSushi/ripgrep/issues/1927#issuecomment-874987998</a>,
or unsubscribe
<a href="https://github.com/notifications/unsubscribe-auth/AADPPYX3UG7AGDDGWF47O23TWNDRVANCNFSM474DMAHQ">https://github.com/notifications/unsubscribe-auth/AADPPYX3UG7AGDDGWF47O23TWNDRVANCNFSM474DMAHQ</a>
.</p>
</blockquote>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:24 UTC
    </footer>
</body>
</html>
