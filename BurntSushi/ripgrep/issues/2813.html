<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiple quirks in ignore behavior - BurntSushi/ripgrep #2813</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Multiple quirks in ignore behavior</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2813">#2813</a>
        opened by <a href="https://github.com/mcandre">@mcandre</a>
        on 2024-05-21 16:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mcandre">@mcandre</a></div>
            <div class="timeline-body">Please tick this box to confirm you have reviewed the above.
<ul>
<li>[X] I have a different issue.</li>
</ul>
What version of ripgrep are you using?
<p>ripgrep 14.1.0</p>
How did you install ripgrep?
<p>Homebrew</p>
What operating system are you using ripgrep on?
<p>macOS 14.4.1</p>
Describe your bug.
<ul>
<li>rg fails to ignore common junk directories by default, such as <code>.git/</code>, <code>.svn/</code>, <code>build/</code>, <code>node_modules/</code>, <code>target/</code>, <code>vendor/</code>, etc.</li>
<li>rg appears not to respect <code>--glob</code> flags to ignore the same in <code>~/.ripgreprc</code>.</li>
<li>rg documents four different mechanisms dealing with ignore behavior, but only the <code>.ignore</code> file works.</li>
</ul>
What are the steps to reproduce the behavior?
<p><code>rg &quot;./...&quot;</code> in a large, complex git repository.</p>
<p><code>./...</code> is Go CLI syntax. Here, we naively plug it into the ripgrep regular expression engine, which interprets the string as a pattern matching any single character followed by a forward slash followed by any three characters. Which often matches machine generated, binary files in the <code>.git</code> directory. This clobbers the console with very many files that are not normally relevant to user queries.</p>
What is the actual behavior?
<pre><code>$ rg &#x27;./...&#x27;
.git/info/exclude
1:# git ls-files --others --exclude-from=.git/info/exclude

.git/objects/f7/4591dae4979c7527b0eb045183b5004b7f1a9a
4:?-?M??w??I?Y??&gt;t??ò??uam?mk?N???)????I??q????????4J??̫??(
                                                          /3G????C2k?????&lt;???.T??&lt;]??l;?Zw?l        uW????h?

.git/objects/af/bb51d56eb3c2271c5af6b59c6ec98b5e46e688
1:xmR]o?0?s~ŕ?CYUP[????u? t!L?Фr9vf;???:??*??s????=H}???????2O?1d?]???8ͷA?      ?O???ɹ?~?JK?*?M?a?fS?pK???6?G]7܉?D???ߚ?`?nPUF?M?]+)?A=FQ4??Q?NH???
                                                                        ?????gHu??????WҤ ??0???M|?}?Z7??33?ܽ
                                 &gt;?????Z/K2֊K(????p???R?hR?U?e???v?m??|??jFڎO7?UP??&#x27;Q?_hތ?????0??A??f
</code></pre>
<p>Even worse, ripgrep dumps binary sequences directly to the console, corrupting my terminal.</p>
<p>I have to run <code>reset</code> (UNIX) each time afterwards to account for that.</p>
What is the expected behavior?
<ul>
<li>ripgrep should respect <code>--glob</code> exclusions in <code>~/.ripgreprc</code>, which are often documented online by various ripgrep users.</li>
<li>ripgrep should automatically exclude common VCS directories (<code>.git</code>, <code>.svn</code>) and common build system directories (<code>build/</code>, <code>node_modules/</code>, <code>target/</code>, <code>vendor/</code>) by default.</li>
<li>ripgrep should deprecate <code>.rgignore</code>, presenting a warning when that file is present.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-05-21 16:33</div>
            <div class="timeline-body"><p>There is way too much going on in this issue. ripgrep <em>does</em> ignore things like <code>.git</code> by default because it&#x27;s a hidden directory and ripgrep ignores hidden directories by default. So there is more going on here than what you&#x27;re showing. Maybe you have an alias or a config file influencing things here.</p>
<p>You also don&#x27;t show any concrete example and don&#x27;t show the <code>--debug</code> output. The <code>--debug</code> output should explain why <code>.git</code> is being searched.</p>
<p>Directories like <code>node_modules</code> or <code>target</code> are usually in your <code>.gitignore</code>.</p>
<p>I don&#x27;t know why you&#x27;re suggesting that <code>.rgignore</code> should be deprecated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mcandre">@mcandre</a> on 2024-08-27 18:45</div>
            <div class="timeline-body"><p>ripgrep has too many, confusing mechanisms to manage exclusion patterns.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-27 19:06</div>
            <div class="timeline-body"><p>Closing due to insufficient data from the OP</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-27 19:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-08-27 19:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:14 UTC
    </footer>
</body>
</html>
