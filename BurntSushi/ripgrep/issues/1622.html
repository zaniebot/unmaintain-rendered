<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>-z option on Windows requires &quot;gzip&quot; no documented dependencies and no Errors in execution - BurntSushi/ripgrep #1622</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>-z option on Windows requires &quot;gzip&quot; no documented dependencies and no Errors in execution</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1622">#1622</a>
        opened by <a href="https://github.com/cwitter">@cwitter</a>
        on 2020-06-19 13:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/cwitter">@cwitter</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<p>ripgrep 12.1.1 (rev 7cb211378a)
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)</p>
How did you install ripgrep?
<p>https://github.com/BurntSushi/ripgrep/releases/download/12.1.1/ripgrep-12.1.1-x86_64-pc-windows-msvc.zip</p>
What operating system are you using ripgrep on?
<p>Windows 10 Professional</p>
Describe your bug.
<p>Using ripgrep with the &quot;-z&quot; option and attempting to search GZip files it reports no errors when missing the &quot;gzip&quot; dependency.</p>
What are the steps to reproduce the behavior?
<p>rg -z -i info -g *</p>
What is the actual behavior?
<p>rg -z -i info -g * --debug</p>
<pre><code>|crates\cli\src\decompress.rs:196: 2020-06-17-1.log.gz: error spawning command &#x27;&quot;gzip&quot; &quot;-d&quot; &quot;-c&quot; &quot;2020-06-17-1.log.gz&quot;&#x27;: The system cannot find the file specified. (os error 2) (falling back to uncompressed reader)
DEBUG|grep_cli::decompress|crates\cli\src\decompress.rs:196: 2020-06-18-1.log.gz: error spawning command &#x27;&quot;gzip&quot; &quot;-d&quot; &quot;-c&quot; &quot;2020-06-18-1.log.gz&quot;&#x27;: The system cannot find the file specified. (os error 2) (falling back to uncompressed reader)
</code></pre>
What is the expected behavior?
<p>No dependencies are listed for the Windows installation, expected behavior is it would work as expected or provide an error calling out the missing dependencies. Minor documentation updates to call out the requirements on Windows might help others as well.</p>
<p>What do you think ripgrep should have done?
Include a decompression error similar to the one in the &quot;debug&quot; output to inform the user of the failure.
With GNU Gzip installed and in the PATH everything works as expected for GZ files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-06-19 14:10</div>
            <div class="timeline-body"><p>I&#x27;m happy to have the docs for <code>-z</code> improved to explain this behavior, and we can leave this ticket open for that.</p>
<p>But no, the error will stay in the <code>--debug</code> output and will not be displayed by default. Otherwise, ripgrep will become quite noisy in certain cases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">doc</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-06-19 14:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/golimarrrr">@golimarrrr</a> on 2021-10-07 08:46</div>
            <div class="timeline-body"><p>It should probably say: &quot;This option expects the decompression binaries to be available in your PATH. If they are not found, no error will be echoed&quot;
I have gzip installed and thought it was in the PATH, and read that ripgrep supports searching into gz files, so I thought that gzip was being used and the pattern was not present in the file, but it was</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-25 20:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:10 UTC
    </footer>
</body>
</html>
