<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can't search in ZIP and tar.gz files - BurntSushi/ripgrep #918</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Can&#x27;t search in ZIP and tar.gz files</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/918">#918</a>
        opened by <a href="https://github.com/kenorb">@kenorb</a>
        on 2018-05-11 23:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kenorb">@kenorb</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<pre><code>$ rg --version
ripgrep 0.8.1
-SIMD -AVX
</code></pre>
What operating system are you using ripgrep on?
<pre><code>$ macosver 
ProductBuildVersion 17C2120
ProductCopyright 1983-2017 Apple Inc.
ProductName Mac OS X
ProductUserVisibleVersion 10.13.2
ProductVersion 10.13.2
</code></pre>
If this is a bug, what are the steps to reproduce the behavior?
<pre><code>$ echo test &gt; test
$ zip test.zip test
  adding: test (stored 0%)
$ tar zcvf test.tar.gz test
a test
$ gzip test
$ rg -z test
./test.gz
1:test
 $ rg -zl test
test.gz
</code></pre>
What is the actual behavior?
<p>No <code>.zip</code> or <code>.tar.gz</code> are searched.</p>
If this is a bug, what is the expected behavior?
<p>Should search in <code>.zip</code> and <code>.tar.gz</code> files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-05-12 00:14</div>
            <div class="timeline-body"><p>The documentation states:</p>
<pre><code>Search in compressed files. Currently gz, bz2, xz, and lzma files are
supported. This option expects the decompression binaries to be available in
your PATH.
</code></pre>
<p>So this is expected behavior. ripgrep does not advertise support for searching through tar archives.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-05-12 00:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-05-12 00:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kenorb">@kenorb</a> on 2018-05-12 00:24</div>
            <div class="timeline-body"><p>I thought <code>--search-zip</code> arg is self-explanatory. And also thought <code>.tar.gz</code> is included as part of <code>.gz</code>.</p>
<p>And at the end, <code>.tar</code> is just plain binary file, so this works:</p>
<pre><code>$ rg -a test test.tar.gz
1?(?Ztest.tar??A
</code></pre>
<p>but this not:</p>
<pre><code>$ rg -z -a test test.tar.gz
</code></pre>
<p>So if this is as expected, can we keep it open as part of the feature request?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-05-12 00:34</div>
            <div class="timeline-body"><p>That&#x27;s because tar archives are explicitly skipped:</p>
<p>https://github.com/BurntSushi/ripgrep/blob/64317bda9f497d66bbeffa71ae6328601167a5bd/src/decompressor.rs#L92-L95</p>
<p>I admit, it does seem like <code>rg -z -a test test.tar.gz</code> should work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-05-12 00:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-22 10:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-22 10:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> removed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-22 10:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-07-22 14:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:06 UTC
    </footer>
</body>
</html>
