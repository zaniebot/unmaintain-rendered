<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>regression: 11.0.2 is not (fully) statically linked - BurntSushi/ripgrep #1343</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>regression: 11.0.2 is not (fully) statically linked</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1343">#1343</a>
        opened by <a href="https://github.com/rlaager">@rlaager</a>
        on 2019-08-07 05:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/rlaager">@rlaager</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>11.0.2</p>
<h4>How did you install ripgrep?</h4>
<p>The GitHub binary release:
https://github.com/BurntSushi/ripgrep/releases/download/11.0.2/ripgrep_11.0.2_amd64.deb</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>Ubuntu 18.04</p>
<h4>Describe your question, feature request, or bug.</h4>
<p>The ripgrep 11.0.2 release is <em>not</em> (fully) statically linked like the 11.0.1 release was. It is linked with libpcre2-8.so.0. When I upgraded, ripgrep broke, because I didn't have libpcre2-8-0 installed.</p>
<h4>If this is a bug, what are the steps to reproduce the behavior?</h4>
<p>Download and install:
https://github.com/BurntSushi/ripgrep/releases/download/11.0.2/ripgrep_11.0.2_amd64.deb</p>
<h4>If this is a bug, what is the actual behavior?</h4>
<pre><code>$ ldd `which rg`
	linux-vdso.so.1 (0x00007fff364fc000)
	libpcre2-8.so.0 =&gt; not found
	libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007f9855fd7000)
	librt.so.1 =&gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007f9855dcf000)
	libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007f9855bb0000)
	libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007f9855998000)
	libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f98555a7000)
	/lib64/ld-linux-x86-64.so.2 (0x00007f9856662000)
</code></pre>
<h4>If this is a bug, what is the expected behavior?</h4>
<p>Compare to the ripgrep 11.0.1 binary package:</p>
<pre><code>$ ldd `which rg`
	linux-vdso.so.1 (0x00007ffeb65c1000)
	libdl.so.2 =&gt; /lib/x86_64-linux-gnu/libdl.so.2 (0x00007fcb3edd4000)
	librt.so.1 =&gt; /lib/x86_64-linux-gnu/librt.so.1 (0x00007fcb3ebcc000)
	libpthread.so.0 =&gt; /lib/x86_64-linux-gnu/libpthread.so.0 (0x00007fcb3e9ad000)
	libgcc_s.so.1 =&gt; /lib/x86_64-linux-gnu/libgcc_s.so.1 (0x00007fcb3e795000)
	libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007fcb3e3a4000)
	/lib64/ld-linux-x86-64.so.2 (0x00007fcb3f4d4000)
</code></pre>
<p>If linking with libpcre is intentional, then the ripgrep package needs to <code>Depend</code> on the appropriate libpcre binary package (in this case libpcre2-8-0). You shouldn't hard-code that, but should get it via <code>${shlibs:Depends}</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-08-07 12:42</div>
            <div class="timeline-body"><p>My bad! I goofed when I uploaded the deb artifact, which is manually generated by me. If you re-download the deb, this should be fixed. (PCRE2 is statically linked.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @BurntSushi on 2019-08-07 14:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2019-08-07 14:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rlaager">@rlaager</a> on 2019-08-13 01:01</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:58 UTC
    </footer>
</body>
</html>
