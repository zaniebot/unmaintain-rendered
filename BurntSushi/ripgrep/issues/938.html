<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>-w behavior around colons differs from GNU grep - BurntSushi/ripgrep #938</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>-w behavior around colons differs from GNU grep</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/938">#938</a>
        opened by <a href="https://github.com/oconnor663">@oconnor663</a>
        on 2018-06-04 15:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a></div>
            <div class="timeline-body"><p>I'm using <code>ripgrep 0.8.1</code> installed from the Arch Linux repos.</p>
<p>I don't know enough about word boundaries to know whether this is really a bug, or just a difference of interpretation. But either way, I was surprised by this difference, and I wanted to check whether it was intentional:</p>
<pre><code class="language-bash">$ echo foo: | grep -w foo:
foo:
$ echo foo: | rg -w foo:
# no output
</code></pre>
<p>If it's intentional, it might be worth adding a mention of the difference to the man page.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2018-06-04 16:11</div>
            <div class="timeline-body"><p>Duplicate of #389</p>
<p>It's not a bug in the sense that it's consistent with the way word boundaries are documented to work in Rust's regex engine (and most others) — <code>grep</code> handles this case specially. But it would certainly be neat to replicate the behaviour somehow, and i think @BurntSushi said he plans to do so as part of libripgrep</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oconnor663">@oconnor663</a> on 2018-06-04 16:47</div>
            <div class="timeline-body"><p>Ah yeah, definitely the same issue.</p>
<p>Weirdly, it seems like both <code>rg</code> and <code>grep</code> are stricter than they really need to be. <code>rg</code> is strict in the example above, but here's a case where I think <code>grep</code> is too strict:</p>
<pre><code class="language-bash">$ echo &quot;a b c&quot; | grep -w &quot; b &quot;
# no output
$ echo &quot;a b c&quot; | rg -w &quot; b &quot;
a b c
</code></pre>
<p>Without reading any code, it seems like <code>grep</code>'s rule is &quot;there must be non-word characters surrounding the match.&quot; While <code>rg</code>'s rule is &quot;there must be a word character on one side of a boundary, and a non-word character on the other.&quot;</p>
<p>I think the rule I actually want is looser than both of those: &quot;There must not be word characters on both sides of a boundary.&quot; Does anyone have a use case that relies on being stricter than that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @BurntSushi on 2018-06-04 17:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-04 17:10</div>
            <div class="timeline-body"><p>Yeah this is a dupe. Thanks @okdana. I'm still undecided on what to do exactly. This really requires actually playing with each implementation to see how well it works.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-06-04 17:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:33 UTC
    </footer>
</body>
</html>
