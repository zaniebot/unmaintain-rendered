<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature Request: flag to search filenames in addition to contents - BurntSushi/ripgrep #1034</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature Request: flag to search filenames in addition to contents</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1034">#1034</a>
        opened by <a href="https://github.com/sweth">@sweth</a>
        on 2018-09-02 19:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sweth">@sweth</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<p>ripgrep 0.9.0
-SIMD -AVX</p>
How did you install ripgrep?
<p>brew</p>
What operating system are you using ripgrep on?
<p>Darwin 17.7.0 Darwin Kernel Version 17.7.0: Thu Jun 21 22:53:14 PDT 2018; root:xnu-4570.71.2~1/RELEASE_X86_64 x86_64</p>
Describe your question, feature request, or bug.
<p>A flag (perhaps <code>--search-names-and-contents</code> or <code>--also-search-filenames</code> ?) that will allow searching both file contents and file names as part of the same invocation.  i.e. for the hypothetical</p>
<pre><code>rg --search-names-and-contents pattern dir
</code></pre>
<p>the output would be the (interleaved) equivalent of</p>
<pre><code>rg --files -g &#x27;*pattern*&#x27; dir
rg pattern dir
</code></pre>
<p>I know that rg isn&#x27;t intended to be a <code>find</code> replacement, but I often am searching through very large dir structures for files that either contain a given string OR where their filename contains that string, and running rg twice (or rg once and fd once, which is what I currently do) on the same huge dir structure (hundreds of thousands of files) is very inefficient, and having the output not interleaved because it is generated by two commands also makes it harder to read.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-02 23:43</div>
            <div class="timeline-body"><p>I don&#x27;t think this is a good fit for ripgrep. I understand the use case, but ripgrep isn&#x27;t a tool for searching file names. It&#x27;s a tool for searching files. For example, there are several things that aren&#x27;t considered in this feature request:</p>
<ol>
<li>The match semantics of <code>-g &#x27;*pattern*&#x27;</code> are of globs, not regexes.</li>
<li>Emitting a file path without any of its contents seems weird to me. There is no way for that to happen today. Each matching file contains at least one line.</li>
<li>How is a regex applied to a file path? Is it only the base name? The entire path? Something else?</li>
<li>It seems like if this flag were added, it would be natural to ask for a flag that is &quot;search only file names.&quot; In other words, it&#x27;s a feature that begets more features, which doesn&#x27;t excite me.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-02 23:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-08 14:28</div>
            <div class="timeline-body"><p>I&#x27;ve thought about this more, and I&#x27;d like to keep ripgrep focused on searching files for now.</p>
<p>Needing to do two searches is somewhat unfortunate, but one of those searches only needs to look at file paths, which should be much quicker to execute.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-08 14:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fregante">@fregante</a> on 2020-09-09 17:12</div>
            <div class="timeline-body"><p>For anyone arriving here from Google, use <code>fd</code> instead, to search files by filename: https://github.com/sharkdp/fd
It has similar improvements to <code>rg</code> (e.g. automatic .gitignore exclusions)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-09-09 17:23</div>
            <div class="timeline-body"><p>@fregante I would have mentioned that, but note that this feature request is subtly different than just searching the contents of file names. The requested feature is to search <em>both</em> file names <em>and</em> file contents simultaneously for the same pattern.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jeffr-spire">@jeffr-spire</a> on 2023-05-22 22:10</div>
            <div class="timeline-body"><p>I realize this is a very old and very closed ticket, and that I&#x27;m not submitting a patch or anything similarly helpful.  Still, on the off change you ever decide to revisit this, I offer this suggestion:  consider a directory to be a mostly ordinary file whose contents are the names of the files, one per line, in that directory (people who include newlines in filenames deserve what pain they get); and any file that is a directory is distinguished in output and processing by ending with a slash, as is the custom.  That point of view provides these answers to your questions:</p>
<blockquote>
<ol>
<li>The match semantics of <code>-g &#x27;*pattern*&#x27;</code> are of globs, not regexes.</li>
</ol>
</blockquote>
<p>Doesn&#x27;t change, <code>-g pattern</code> would still glob against file names only.   A file name could be a directory.</p>
<blockquote>
<ol>
<li>Emitting a file path without any of its contents seems weird to me. There is no way for that to happen today. Each matching file contains at least one line.</li>
</ol>
</blockquote>
<p>The file path would be the containing directory; the contents is the regex-matched filename itself.</p>
<blockquote>
<ol>
<li>How is a regex applied to a file path? Is it only the base name? The entire path? Something else?</li>
</ol>
</blockquote>
<p>It would only match against the base name as it would be found in the contents of the containing directory, not the entire file path, which can already be matched by globs.</p>
<blockquote>
<ol>
<li>It seems like if this flag were added, it would be natural to ask for a flag that is &quot;search only file names.&quot; In other words, it&#x27;s a feature that begets more features, which doesn&#x27;t excite me.</li>
</ol>
</blockquote>
<p>Here I would argue that the most sensible thing is for this to <em>not</em> be a flag, but to be default behavior.  Treating the directories as files to be searched means that they could be excluded by specifying <code>-g &#x27;!*/&#x27;</code>, and similarly searched only for by inverting the glob.  Likewise, if you are specifically searching for a directory you could anchor the regexp with a trailing / to find only directory names.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-05-22 22:13</div>
            <div class="timeline-body"><p>Your conceptualization is not bad, but:</p>
<blockquote>
<p>Here I would argue that the most sensible thing is for this to not be a flag, but to be default behavior.</p>
</blockquote>
<p>This definitely will never happen. I can say that with certainty. It is too different from grep and would be very unexpected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jeffr-spire">@jeffr-spire</a> on 2023-05-23 20:43</div>
            <div class="timeline-body"><p>Fair enough;  I may disagree about whether it&#x27;s too different or unexpected, but you&#x27;re the maintainer and get to make that call :smile:
I think even supporting this model under a flag rather than by default would allow the other pieces, in particular the inclusion/exclusion behavior using the path glob to stand and not require more feature bloat.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:07 UTC
    </footer>
</body>
</html>
