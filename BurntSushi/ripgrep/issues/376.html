<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>regex behaviour modified from regex::Regex ? - BurntSushi/ripgrep #376</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>regex behaviour modified from regex::Regex ?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/376">#376</a>
        opened by <a href="https://github.com/jedahan">@jedahan</a>
        on 2017-02-22 16:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jedahan">@jedahan</a></div>
            <div class="timeline-body"><p>I tried this in play.integer32.com :</p>
<pre><code>extern crate regex;
use regex::Regex;

fn main() {
    let re = Regex::new(r&quot;CurrentCapacity.*?([0-9]+)&quot;).unwrap();
    let text = &quot;      \&quot;CurrentCapacity\&quot; = 420&quot;;
    let mat = re.find(text).unwrap();
    for cap in re.captures_iter(text) {
        println!(&quot;{}&quot;, &amp;cap[1]);
    }
}
</code></pre>
<p>and it seemed to work (printed <strong>420</strong>)</p>
<p>Then I tried in my shell:</p>
<pre><code>echo &#x27;      &quot;CurrentCapacity&quot; = 420&#x27; | rg -N &#x27;CurrentCapacity.*?(\d+)&#x27; --replace &#x27;$1&#x27;
</code></pre>
<p>and it returned</p>
<pre><code>     &quot;420
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jedahan">@jedahan</a> on 2017-02-22 16:59</div>
            <div class="timeline-body"><p>I searched in older issues, and found <a href="https://github.com/BurntSushi/ripgrep/issues/320">BurntSushi/ripgrep#320</a> , which does what I wanted. I wonder if theres a spot to add this to the documentation, or somewhere about an FAQ and --only-matching, or if this is just a dumb mistake.</p>
<pre><code>rg -N &#x27;.*?CurrentCapacity.*?(\d+)&#x27; --replace &#x27;$1&#x27;
</code></pre>
<p>If theres no need to document, feel free to close.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-03-12 21:02</div>
            <div class="timeline-body"><p>The issue here is that the <code>-r/--replace</code> flag replaces <em>each</em> occurrence of a match with the given substitution string. This provides the most flexibility, but is annoying to deal with for simpler use cases such as yours. I think the <code>-o/--only-matching</code> flag should solve this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-03-12 21:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:03 UTC
    </footer>
</body>
</html>
