<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using `--sortr path` gives error &quot;thread 'main' panicked&quot;/&quot;not yet implemented&quot; - BurntSushi/ripgrep #2664</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Using <code>--sortr path</code> gives error &quot;thread 'main' panicked&quot;/&quot;not yet implemented&quot;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2664">#2664</a>
        opened by <a href="https://github.com/kjhaber">@kjhaber</a>
        on 2023-11-28 05:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kjhaber">@kjhaber</a></div>
            <div class="timeline-body"><h3>Please tick this box to confirm you have reviewed the above.</h3>
<ul>
<li>[X] I have a different issue.</li>
</ul>
<h3>What version of ripgrep are you using?</h3>
<p>ripgrep 14.0.2 (rev 6c7947b819)</p>
<p>features:-simd-accel,+pcre2
simd(compile):+SSE2,+SSSE3,-AVX2
simd(runtime):+SSE2,+SSSE3,-AVX2</p>
<p>PCRE2 10.42 is available (JIT is available)</p>
<h3>How did you install ripgrep?</h3>
<p>Homebrew (Mac, Apple Silicon) and asdf</p>
<h3>What operating system are you using ripgrep on?</h3>
<p>macOS Sonoma 14.1.1</p>
<h3>Describe your bug.</h3>
<p>When I use the <code>--sortr path</code> option, rg fails with:</p>
<pre><code>thread 'main' panicked at crates/core/flags/hiargs.rs:774:35:
not yet implemented
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<p>The error doesn't happen for the non-reversed <code>--sort path</code>.  It also doesn't happen for other options to --sort or --sortr (accessed, created, modified, none).</p>
<p>I'm able to reproduce the error with ripgrep 14.0.0, 14.0.1, and 14.0.2.  I can't reproduce the error in ripgrep 13.0.0.</p>
<h3>What are the steps to reproduce the behavior?</h3>
<p>Run <code>rg --sortr path bar</code>.</p>
<h3>What is the actual behavior?</h3>
<p>When I use the <code>--sortr path</code> option, rg fails with:</p>
<pre><code>% rg --sortr path bar
thread 'main' panicked at crates/core/flags/hiargs.rs:774:35:
not yet implemented
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<p>Looks like it's pointing to the <code>todo!</code> on https://github.com/BurntSushi/ripgrep/blob/ca5e294ad6b64b03c1d2fb4d9ed8c32b73e656ae/crates/core/flags/hiargs.rs#L774C1-L774C43</p>
<p>The error doesn't happen for the non-reversed <code>--sort path</code>.  It also doesn't happen for other options to --sort or --sortr (accessed, created, modified, none).</p>
<p>I'm able to reproduce the error with ripgrep 14.0.0, 14.0.1, and 14.0.2.  I can't reproduce the error in ripgrep 13.0.0.</p>
<p>With --debug flag:</p>
<pre><code>% rg --sortr path --debug bar
DEBUG|rg::flags::parse|crates/core/flags/parse.rs:97: no extra arguments found from configuration file
DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1093: using heuristics to determine whether to read from stdin or search ./ (is_readable_stdin=false, stdin_consumed=false, mode=Search(Standard))
DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1103: heuristic chose to search ./
DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1254: found hostname for hyperlink configuration: lacerta.local
DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:1264: hyperlink format: &quot;&quot;
DEBUG|rg::flags::hiargs|crates/core/flags/hiargs.rs:174: using 1 thread(s)
DEBUG|globset|crates/globset/src/lib.rs:448: glob converted to regex: Glob { glob: &quot;**/._*&quot;, re: &quot;(?-u)^(?:/?|.*/)\\._[^/]*$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true, empty_alternates: false }, tokens: Tokens([RecursivePrefix, Literal('.'), Literal('_'), ZeroOrMore]) }
DEBUG|globset|crates/globset/src/lib.rs:448: glob converted to regex: Glob { glob: &quot;**/.DS_Store?&quot;, re: &quot;(?-u)^(?:/?|.*/)\\.DS_Store[^/]$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true, empty_alternates: false }, tokens: Tokens([RecursivePrefix, Literal('.'), Literal('D'), Literal('S'), Literal('_'), Literal('S'), Literal('t'), Literal('o'), Literal('r'), Literal('e'), Any]) }
DEBUG|globset|crates/globset/src/lib.rs:448: glob converted to regex: Glob { glob: &quot;**/Icon?&quot;, re: &quot;(?-u)^(?:/?|.*/)Icon[^/]$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true, empty_alternates: false }, tokens: Tokens([RecursivePrefix, Literal('I'), Literal('c'), Literal('o'), Literal('n'), Any]) }
DEBUG|globset|crates/globset/src/lib.rs:448: glob converted to regex: Glob { glob: &quot;**/.sw*&quot;, re: &quot;(?-u)^(?:/?|.*/)\\.sw[^/]*$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true, empty_alternates: false }, tokens: Tokens([RecursivePrefix, Literal('.'), Literal('s'), Literal('w'), ZeroOrMore]) }
DEBUG|globset|crates/globset/src/lib.rs:453: built glob set; 2 literals, 20 basenames, 15 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 4 regexes
thread 'main' panicked at crates/core/flags/hiargs.rs:774:35:
not yet implemented
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<h3>What is the expected behavior?</h3>
<p>Ripgrep should return the matching results reverse-sorted by path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2023-11-28 21:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kjhaber">@kjhaber</a> on 2023-11-29 05:07</div>
            <div class="timeline-body"><p>Confirming that the fix in 14.0.3 is working for me.  Thanks so much for ripgrep and the fast fix!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @BurntSushi on 2023-11-29 12:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/redblobgames">@redblobgames</a> on 2023-11-29 18:08</div>
            <div class="timeline-body"><p>Thank you! Confirming that the fix is working for me as well.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:44 UTC
    </footer>
</body>
</html>
