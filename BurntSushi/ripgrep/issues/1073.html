<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use glob with .gitignore - BurntSushi/ripgrep #1073</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use glob with .gitignore</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1073">#1073</a>
        opened by <a href="https://github.com/adzenith">@adzenith</a>
        on 2018-10-01 14:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/adzenith">@adzenith</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<pre><code>ripgrep 0.10.0 (rev 8a7db1a918)
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)
</code></pre>
<h4>How did you install ripgrep?</h4>
<p>GitHub binary release via Apt.</p>
<h4>What operating system are you using ripgrep on?</h4>
<p><code>Linux 4.15.0-33-generic #36~16.04.1-Ubuntu</code></p>
<h4>Describe your question, feature request, or bug.</h4>
<p>I am trying to use <code>-g</code> to add a glob to my <code>.gitignore</code>, rather than replacing the <code>.gitignore</code> entirely. Just <code>-g</code> seems to replace the <code>.gitignore</code>. I've tried to add the <code>.gitignore</code> back with <code>--ignore</code> and <code>--ignore-file .gitignore</code> and neither does the trick. I've also tried adding a <code>-g '*'</code> both before and after these flags, in the hope that I could first add the glob I want, then exclude stuff in the <code>.gitignore</code>, and finally include everything else - but that seems to just include everything, as if the last glob overrides the <code>.gitignore</code> again. Is there a way to do what I'm trying to do?</p>
<p>Example call, trying to search in the project but also in the build directory:
<code>rg 'search_string' -g '.build' --ignore-file .gitignore</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-10-01 14:47</div>
            <div class="timeline-body"><p>Please provide a reproducible example. As the issue template requested, please provide the input, actual output and expected output.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adzenith">@adzenith</a> on 2018-10-01 19:36</div>
            <div class="timeline-body"><p>The template says &quot;If this is a bug, what are the steps to reproduce the behavior?&quot; - I didn't think of it as a bug, so I didn't fill in that section. It's either a feature request or a request for information on the feature, if that feature already exists. With that said, here's a script you can run to see what I mean if it's helpful:</p>
<pre><code>mkdir example &amp;&amp; cd example
git init
echo 'foo/*' &gt;&gt; .gitignore
echo 'foo2/*' &gt;&gt; .gitignore
mkdir foo
mkdir foo2
echo result &gt; foo/bar
echo result &gt; foo2/bar
echo result &gt; bar
rg result
# --  expected == actual  --
# bar
# 1:result
rg -g 'foo2/*' result
# --  expected == actual  --
# foo2/bar
# 1:result
rg -g 'foo2/*' result --ignore  # or some other flag?
# --  expected/desired  --
# bar
# 1:result
# 
# foo2/bar
# 1:result
#
#
# --  actual  --
# foo2/bar
# 1:result
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-10-01 20:06</div>
            <div class="timeline-body"><p>The <code>--glob</code> flag is implemented using whitelist semantics. What that means is that if you provide at least one whitelist item, then ripgrep will require that everything it searches match <em>at least one item in the whitelist</em>. So when you use <code>-g 'foo2/*'</code>, you're effectively telling ripgrep to only search files in <code>foo2</code> and nothing else. This is intended behavior and I don't see that changing.</p>
<p>If you just want to add additional files to your search, then just tell ripgrep to search them using standard shell globs. For example, <code>rg result ./ ./foo2/*</code>.</p>
<p>I think you'll want to pay attention to the docs on precedence. For example, the glob flag takes precedence over any type of .gitignore file. There is no way to mix and match them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by @BurntSushi on 2018-10-08 18:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-10-08 18:05</div>
            <div class="timeline-body"><p>Closing due to inactivity from the OP. As far as I can tell, things are working as intended. In particular, the intended way to search directories without respecting ignore rules is to just tell ripgrep to search the directory.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-10-08 18:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:42 UTC
    </footer>
</body>
</html>
