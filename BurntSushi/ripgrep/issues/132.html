<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libripgrep? - BurntSushi/ripgrep #132</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>libripgrep?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/132">#132</a>
        opened by <a href="https://github.com/stephanbuys">@stephanbuys</a>
        on 2016-09-29 07:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/stephanbuys">@stephanbuys</a></div>
            <div class="timeline-body"><p>After reading your post and seeing the truly amazing depths that you&#x27;ve gone to with the regex library and other methods that you use to make ripgrep blazingly fast I started wondering about the &quot;other methods&quot; and if there&#x27;s a use-case for something like <code>librip</code> that can be used for fast searching over arbitrary streams/blobs of data?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-29 11:22</div>
            <div class="timeline-body"><p>Have you looked at the source code? What about the <a href="https://github.com/BurntSushi/ripgrep/blob/master/Cargo.toml"><code>Cargo.toml</code></a>? <code>ripgrep</code> itself is relatively small. Most of the performance it gets comes from the regex engine, <a href="https://github.com/rust-lang-nursery/regex">which is already a separate library</a>. There are a small number of regex-oriented optimizations that <code>ripgrep</code> performs that are specific to line-based searching, but even these are already factored out into <a href="http://burntsushi.net/rustdoc/grep/">a separate <code>grep</code> library</a>.</p>
<p>With that said, there&#x27;s plenty of stuff I&#x27;d like to move out of <code>ripgrep</code> into standalone libraries:</p>
<ul>
<li>The search code that handles things like counting lines, contexts, inverted matches, etc. This is in both <code>src/search_stream.rs</code> and <code>src/search_buffer.rs</code>. I started by writing this inside of <code>grep</code>, but couldn&#x27;t make an iterator style API work. That&#x27;s fine, but that means it needs more design work.</li>
<li>The code to process ignore patterns is essentially the rest of <code>ripgrep</code>. <code>ripgrep</code> has its own glob implementation built on regexes in <code>src/glob.rs</code>, it implements gitignore semantics in <code>src/gitignore.rs</code>, it does file type matching in <code>src/types.rs</code> and finally ties everything together in <code>src/ignore.rs</code>.</li>
<li>There is a comparatively small amount of code that does directory traversal and the actual task of shoveling work off to search workers.</li>
</ul>
<p>I&#x27;d like to at least move the first two things in separate libraries. Doing it for globs/ignores is probably my highest priority, because it needs refactoring and I&#x27;d like to move it toward a design that can benefit from parallelism.</p>
<p>In any case, I don&#x27;t think we need a ticket tracking this. It will happen over time as the code improves.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-29 11:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stephanbuys">@stephanbuys</a> on 2016-09-29 11:25</div>
            <div class="timeline-body"><p>@BurntSushi - sounds awesome, will monitor the progress with interest. Keep up the great work!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mrageh">@mrageh</a> on 2019-05-20 20:32</div>
            <div class="timeline-body"><p>Firstly thank you for building and maintaining Ripgrep, which is a fantastic library.</p>
<p>I&#x27;m new to Rust and Ripgrep seems like it&#x27;s grown considerably since this issue was closed. I&#x27;d like to use it as a library in a toy project I&#x27;m working on. Specifically what I&#x27;d like to do is use it to search for tokens/terms. At the moment in order to use Ripgrep I have to shell out to the terminal.</p>
<p>What would you recommend I do, use https://github.com/rust-lang/regex?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mrageh">@mrageh</a> on 2019-05-21 02:31</div>
            <div class="timeline-body"><p>Please ignore me as I just found <a href="https://github.com/BurntSushi/ripgrep/issues/1009">BurntSushi/ripgrep#1009</a></p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:01 UTC
    </footer>
</body>
</html>
