<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ripgrep not shows the unicode characters whereas grep does - BurntSushi/ripgrep #2881</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ripgrep not shows the unicode characters whereas grep does</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2881">#2881</a>
        opened by <a href="https://github.com/ciscohack">@ciscohack</a>
        on 2024-09-05 15:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ciscohack">@ciscohack</a></div>
            <div class="timeline-body">Please tick this box to confirm you have reviewed the above.
<ul>
<li>[X] I have a different issue.</li>
</ul>
What version of ripgrep are you using?
<p>ripgrep 14.1.0</p>
How did you install ripgrep?
<p>brew command</p>
What operating system are you using ripgrep on?
<p>macOS 14.6</p>
Describe your bug.
<p>while doing ls | grep  it shows the unicode symbol for the file but if i do ls | rg  ripgrep failed and print like this</p>
<img alt="image" src="https://github.com/user-attachments/assets/84dc7d44-fe87-4240-b00c-2cff3f7c8d9f">

<p>here is grep output</p>
<img alt="image" src="https://github.com/user-attachments/assets/8e34c958-22b6-4347-98f1-dccf012f1936">

<p>it&#x27;s happening with all filetype</p>
What are the steps to reproduce the behavior?
<p>steps is simple ls | rg </p>
What is the actual behavior?
<p>actually behaviour is it should show file icon as grep is doing</p>
What is the expected behavior?
<p>actually behaviour is it should show file icon as grep is doing</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-09-05 16:05</div>
            <div class="timeline-body"><p><a href="https://www.youtube.com/watch?v=l1B1_jQnlFk">Help me help you.</a> Don&#x27;t tell, <a href="https://en.wikipedia.org/wiki/Minimal_reproducible_example"><em>show</em></a>. Here&#x27;s <a href="https://stackoverflow.com/help/minimal-reproducible-example">how to do it</a>.</p>
<p>So for example, in this case, you should include commands to create a file with a name equivalent to what you&#x27;re showing in the image.</p>
<p>You should also show the output of <code>alias ls</code>, <code>which ls</code>, <code>alias grep</code> and <code>which grep</code> to ensure you&#x27;re running vanilla versions of these programs. As well as <code>grep -V</code> to show the version of grep you&#x27;re using.</p>
<p>Finally, the commands you&#x27;ve provided are invalid. That is, neither <code>ls | grep</code> nor <code>ls | rg</code> are valid because both <code>grep</code> and <code>rg</code> require at least one argument. You should provide a complete command that someone else can run.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ciscohack">@ciscohack</a> on 2024-09-06 14:45</div>
            <div class="timeline-body"><p>@BurntSushi Thanks for the comment .. Here is the complete output for reference
<img alt="image" src="https://github.com/user-attachments/assets/a8a6aea3-0413-4010-9067-f55ec5a8dc31"></p>
<p>•❯•&gt; which ls
/bin/ls</p>
<p>•❯•&gt; which grep
/usr/bin/grep</p>
<p>•❯•&gt; grep -V
grep (BSD grep, GNU compatible) 2.6.0-FreeBSD</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-09-06 14:46</div>
            <div class="timeline-body"><p>I&#x27;m sorry, but you did not provide everything that I asked for.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ciscohack">@ciscohack</a> on 2024-09-06 15:02</div>
            <div class="timeline-body"><p>I don&#x27;t know what else is missing except this 2 command</p>
<p>alias grep=&#x27;grep -ia&#x27;</p>
<p>and</p>
Colorls Dir explorer
<p>if [ -x &quot;$(command -v colorls)&quot; ]; then
alias ls=&quot; colorls -rtG --report&quot;
alias la=&quot;colorls -altrG --report&quot;
alias ld=&quot;colorls -dtr --report&quot;
alias lf=&#x27;colorls  -ftr --report&#x27;
alias ll=&#x27;colorls -lrtG --report&#x27;
fi</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-09-06 15:22</div>
            <div class="timeline-body"><p>So you&#x27;re using <code>colorls</code> and not <code>ls</code>. I don&#x27;t know what that is or how to get it. You should also show the output of <code>alias rg</code>. And any config options you have set for ripgrep in <code>$RIPGREP_CONFIG_PATH</code>.</p>
<p>I really can&#x27;t keep going back-and-forth with you about this. If you can&#x27;t provide an MRE, then I can&#x27;t help you. You might need to get someone else to give you a bit more help and guidance in how to <a href="https://stackoverflow.com/help/minimal-reproducible-example">provide an MRE</a>.</p>
<p>You need to be able to provide precise instructions for how someone else can see the same output that you are. Otherwise all I can do is guess. And I&#x27;ve already tried guessing and I can&#x27;t reproduce your problem:</p>
<pre><code>$ echo &#x27; DnsServerSetup.zip&#x27; | grep DnsServerSetup.zip
 DnsServerSetup.zip
$ echo &#x27; DnsServerSetup.zip&#x27; | rg DnsServerSetup.zip
 DnsServerSetup.zip
</code></pre>
<p>It works just fine.</p>
<p>I otherwise don&#x27;t understand what would lead one command to result in emitting <code></code> as-is, while another command would emit <code>&lt;U+F410&gt;</code>. Like, <code></code> <em>is</em> <code>U+F410</code>, so it&#x27;s not like the codepoint isn&#x27;t being detected in some form. I&#x27;ve seen <em>similar</em> but not <em>identical</em> problems happen because an ANSI color escape code gets inserted in the wrong place.</p>
<p>I want to be clear that this is my last response until you can provide a real MRE. If you aren&#x27;t sure how, please seek out a generic beginners forum and ask them for help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ciscohack">@ciscohack</a> on 2024-09-06 15:28</div>
            <div class="timeline-body"><p>here is rg detail</p>
Ripgrep Pager support
<p>rg() {
# Check if the standard output is connected to a terminal
if [ -t 1 ]; then
# If connected to a terminal, use ripgrep with bat for highlighting
command rg --heading --color always -ia -p &quot;$@&quot; 2&gt;/dev/null | bat -p
else
# If not connected to a terminal, use ripgrep without bat
command rg --heading --color never -ia -p &quot;$@&quot; 2&gt;/dev/null
fi
}</p>
<p>here is colorls detail what i using it
https://github.com/athityakumar/colorls</p>
<p>and here is my ripgreprc</p>
Don&#x27;t let ripgrep vomit really long lines to my terminal, and show a preview.
https://github.com/BurntSushi/ripgrep/blob/master/GUIDE.md#configuration-file
https://github.com/BurntSushi/ripgrep/blob/master/GUIDE.md
--max-columns=1000
--max-columns=150
--max-columns-preview
Add my &#x27;web&#x27; type.
<p>--type-add
web:<em>.{html,css,js}</em></p>
Using glob patterns to include/exclude files or folders
<p>--glob=!git/*</p>
or
<p>--glob
!git/*</p>
Because who cares about case!?
<p>#--smart-case
--ignore-case</p>
pretty output
<p>--pretty</p>
Specify which regular expression engine to use
<p>--engine=auto</p>
Configure color settings and styles. (https://github.com/BurntSushi/ripgrep/blob/master/GUIDE.md#configuration-file)
--colors=path:bg:0x3b,0x3b,0x3b
--colors=path:fg:white
--colors=line:fg:0xf2,0xc2,0x60
--colors=match:bg:0x2b,0x83,0xa6
--colors=match:fg:0xff,0xff,0xff
--colors=match:style:bold
--colors=match:style:underline
--colors=match:style:nobold
Search hidden files and directories.
<p>--hidden</p>
make the output look like The Silver Searcher&#x27;s output
https://github.com/BurntSushi/ripgrep/blob/master/FAQ.md#silver-searcher-output
--colors=line:fg:yellow
--colors=line:style:bold
--colors=path:fg:green
--colors=path:style:bold
--colors=match:fg:black
--colors=match:bg:yellow
--colors=match:style:intense
--colors=match:style:underline
Show context by default
--context=5
Count the number of matches
--count
suppress line number
<p>--no-line-number</p>
<p>#depth
--maxdepth=3</p>
https://github.com/BurntSushi/dotfiles/blob/master/.ripgreprc
<p>#black, blue, green, red, cyan, magenta, yellow, white</p>
--colors=match:bg:0xff,0x7f,0x00
--colors=match:fg:white
--colors=match:style:nobold
--colors=line:none
--colors=line:fg:magenta
--colors=path:fg:green
<p>--colors=match:style:bold</p>
<p>--glob=!*.map</p>
--colors=match:style:underline
--colors=line:fg:red
--colors=match:bg:0,128,255
--colors=match:bg:yellow
--colors=match:bg:magenta
--colors=match:fg:0,5,0
--colors=line:fg:red
--colors=match:style:underline
--colors=match:bg:220,240,245
--colors=match:fg:0,89,240
<p>--colors=match:fg:red
--colors=match:style:bold
#--colors=match:bg:0,96,245
#--colors=line:bg:red
--colors=path:fg:magenta</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ciscohack">@ciscohack</a> on 2024-09-06 16:01</div>
            <div class="timeline-body"><p>•❯•&gt; $RIPGREP_CONFIG_PATH
/Users/praverai/.ripgreprc: line 10: --type-add: command not found
/Users/praverai/.ripgreprc: line 11: web:<em>.html</em>: command not found
/Users/praverai/.ripgreprc: line 14: --glob=!git/<em>: No such file or directory
/Users/praverai/.ripgreprc: line 17: --glob: command not found
/Users/praverai/.ripgreprc: line 18: !git/</em>: No such file or directory
/Users/praverai/.ripgreprc: line 22: --ignore-case: command not found
/Users/praverai/.ripgreprc: line 25: --pretty: command not found
/Users/praverai/.ripgreprc: line 27: --engine=auto: command not found
/Users/praverai/.ripgreprc: line 40: --hidden: command not found
/Users/praverai/.ripgreprc: line 60: --no-line-number: command not found
/Users/praverai/.ripgreprc: line 63: --maxdepth=3: command not found
/Users/praverai/.ripgreprc: line 73: --colors=match:style:bold: command not found
/Users/praverai/.ripgreprc: line 76: --glob=!*.map: command not found
/Users/praverai/.ripgreprc: line 87: --colors=match:fg:red: command not found
/Users/praverai/.ripgreprc: line 88: --colors=match:style:bold: command not found
/Users/praverai/.ripgreprc: line 91: --colors=path:fg:magenta: command not found</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ciscohack">@ciscohack</a> on 2024-09-06 17:50</div>
            <div class="timeline-body"><p>@BurntSushi  I found the issue and exact repro step. this is not ripgrep issue infact something with BAT is causing problem.</p>
<p>so here is config snippet I have for rg which causing problem basically problem is not below function in fact simple repro
step is do <strong>ls | bat</strong> and this will not print the unicode character. so basically when we pipe the ls output with bat. Bat unable to print the character .. can you please now suggest how to fix this bat issue as moar pager can able to print character with pipe</p>
<pre><code>rg() {
    # Check if the standard output is connected to a terminal
    if [ -t 1 ]; then
        # If connected to a terminal, use ripgrep with bat for highlighting
        command rg --heading --no-line-number --color always -ia -p &quot;$@&quot; 2&gt;/dev/null | bat -p
    else
        # If not connected to a terminal, use ripgrep without bat
        command rg --heading --no-line-number --color never -ia -p &quot;$@&quot; 2&gt;/dev/null
    fi
}
</code></pre>
<p>Here is example
<img alt="image" src="https://github.com/user-attachments/assets/88e500ff-b8ff-47de-b0a1-4543086c251d"></p>
<p>Here is moar output when doing ls | moar</p>
<img alt="image" src="https://github.com/user-attachments/assets/33ec34d4-e8ec-4e16-9b71-7b02792af3f1">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-09-06 18:01</div>
            <div class="timeline-body"><p>OK, thanks. In the future, here is what a good MRE would look like:</p>
<pre><code>$ echo &#x27; DnsServerSetup.zip&#x27; | bat -p
&lt;U+F410&gt; DnsServerSetup.zip
</code></pre>
<p>Once you get it down to this point, the next thing you should do is search. This is clearly nothing to do with ripgrep, so try searching the bat issue tracker.</p>
<p>If you search, you should find this, which exactly describes the bug you&#x27;re seeing: <a href="https://github.com/sharkdp/bat/issues/2578">sharkdp/bat#2578</a></p>
<p>And if you follow that issue, it should become clear that this isn&#x27;t even a <code>bat</code> problem, but a problem with <code>less</code>:</p>
<pre><code>$ echo &#x27; DnsServerSetup.zip&#x27; | less -FX
&lt;U+F410&gt; DnsServerSetup.zip
</code></pre>
<p>And issue even has a work-around!</p>
<pre><code>$ echo &#x27; DnsServerSetup.zip&#x27; | LESSUTFCHARDEF=E000-F8FF:p,F0000-FFFFD:p,100000-10FFFD:p less -FX
 DnsServerSetup.zip
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-09-06 18:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-09-06 18:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ciscohack">@ciscohack</a> on 2024-09-06 18:37</div>
            <div class="timeline-body"><p>@BurntSushi Thanks, if you don&#x27;t mind one more question why ripgreprc showing below error when we have all this config in man page ... my environment variable is not working due to this error</p>
<p>•❯•&gt; $RIPGREP_CONFIG_PATH
/Users/praverai/.ripgreprc: line 8: --max-columns=150: command not found
/Users/praverai/.ripgreprc: line 9: --max-columns-preview: command not found
/Users/praverai/.ripgreprc: line 12: --hidden: command not found
/Users/praverai/.ripgreprc: line 15: --colors=line:none: command not found
/Users/praverai/.ripgreprc: line 16: --colors=line:style:bold: command not found
/Users/praverai/.ripgreprc: line 19: --smart-case: command not found
/Users/praverai/.ripgreprc: line 23: --heading: command not found
/Users/praverai/.ripgreprc: line 27: --pretty: command not found
/Users/praverai/.ripgreprc: line 31: --binary: command not found
/Users/praverai/.ripgreprc: line 35: --follow: command not found
/Users/praverai/.ripgreprc: line 39: --ignore-case: command not found
/Users/praverai/.ripgreprc: line 43: --no-line-number: command not found
/Users/praverai/.ripgreprc: line 47: --max-depth=10: command not found
/Users/praverai/.ripgreprc: line 51: --context-separator=---: command not found
/Users/praverai/.ripgreprc: line 67: --text: command not found
/Users/praverai/.ripgreprc: line 71: --count: command not found
/Users/praverai/.ripgreprc: line 75: --context-line=match: command not found
/Users/praverai/.ripgreprc: line 78: --engine=auto: command not found
/Users/praverai/.ripgreprc: line 83: --color=auto: command not found
/Users/praverai/.ripgreprc: line 84: --colors=match:fg:green: command not found
/Users/praverai/.ripgreprc: line 85: --colors=line:fg:yellow: command not found</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-09-06 19:26</div>
            <div class="timeline-body"><p><code>$RIPGREP_CONFIG_PATH</code> probably expands to a file path. So what you have is equivalent to just typing <code>some/path/to/file</code> and hitting enter. The output suggests that your shell then tried to <em>run</em> the file as if it were a shell program. This is not usually what happens unless the file is itself executable, and your ripgrep config file <em>shouldn&#x27;t</em> be executable. But who knows. Maybe it is, or maybe you&#x27;re running a weird shell that tries to execute things even if they don&#x27;t have the executable permission bit set. I don&#x27;t know.</p>
<p>The correct command here would be <code>cat $RIPGREP_CONFIG_PATH</code>.</p>
<p>If this doesn&#x27;t help, I really do suggest that you go find a beginner&#x27;s forum. Or if you&#x27;re in school, a teacher or peer who can help walk you through things.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:14 UTC
    </footer>
</body>
</html>
