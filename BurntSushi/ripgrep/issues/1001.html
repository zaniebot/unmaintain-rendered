<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ripgrep glob is not match the gitignore - BurntSushi/ripgrep #1001</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ripgrep glob is not match the gitignore</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1001">#1001</a>
        opened by <a href="https://github.com/jacky1193610322">@jacky1193610322</a>
        on 2018-08-04 14:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jacky1193610322">@jacky1193610322</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>ripgrep 0.8.1
-SIMD -AVX</p>
<h4>How did you install ripgrep?</h4>
<p>brew install ripgrep</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>macos 10.14</p>
<h4>Describe your question, feature request, or bug.</h4>
<pre><code>➜  temp tree test1
test1
└── test2
    └── a.txt

1 directory, 1 file
➜  temp rg --files -g &quot;test2/&quot; --debug
DEBUG/globset/globset/src/lib.rs:401: built glob set; 0 literals, 1 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG/grep::search/grep/src/search.rs:195: regex ast:
Repeat {
    e: Literal {
        chars: [
            'z'
        ],
        casei: false
    },
    r: Range {
        min: 0,
        max: Some(
            0
        )
    },
    greedy: true
}
DEBUG/ignore::walk/ignore/src/walk.rs:1428: ignoring ./jsonschema.json: Ignore(IgnoreMatch(Override(Glob(UnmatchedIgnore))))
DEBUG/ignore::walk/ignore/src/walk.rs:1428: ignoring ./testarg.py: Ignore(IgnoreMatch(Override(Glob(UnmatchedIgnore))))
DEBUG/ignore::walk/ignore/src/walk.rs:1428: ignoring ./dto/IamJsonschemaDTO.java: Ignore(IgnoreMatch(Override(Glob(UnmatchedIgnore))))
DEBUG/ignore::walk/ignore/src/walk.rs:1431: whitelisting ./test1/test2: Whitelist(IgnoreMatch(Override(Glob(Matched(Glob { from: None, original: &quot;test2/&quot;, actual: &quot;**/test2&quot;, is_whitelist: false, is_only_dir: true })))))
DEBUG/ignore::walk/ignore/src/walk.rs:1428: ignoring ./test1/test2/a.txt: Ignore(IgnoreMatch(Override(Glob(UnmatchedIgnore))))
</code></pre>
<p>but in the man gitignore
<img src="https://user-images.githubusercontent.com/16514353/43677256-7fdfc518-9831-11e8-972c-e2e200ec8e34.png" alt="image" /></p>
<p>so why rg not support the rule</p>
<p>I use rg to search test2 directory and paths underneath it，but it doesn't work.</p>
<p>and in the gitignore, if I add test2, which also match test1/test2/a and test2/a,
but rg &quot;test&quot; -g &quot;test2&quot; only match test2 in the current directory(./test2), not match ./test1/test2
I see the debug output rg &quot;test&quot; -g &quot;test2&quot; which mean rg &quot;test&quot; -g &quot;**/test2&quot;
it match the test2 directory, but it doesn't match the subpath of test2, which is also written in the <a href="https://docs.rs/globset/0.4.1/globset/">globset</a>,
but rg document write Globbing rules match .gitignore globs, but it's actually not.
<img src="https://user-images.githubusercontent.com/16514353/43678272-fe9e387e-9842-11e8-8843-eab83f8c7b3d.png" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-01-24 16:39</div>
            <div class="timeline-body"><p>As far as I can tell, this is behaving as expected. <code>-g test2/</code> causes any directory named <code>test2</code> to match, but nothing else. <code>rg -g 'test2/**'</code> should do what you want.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2019-01-24 16:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by @BurntSushi on 2019-01-24 16:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:38 UTC
    </footer>
</body>
</html>
