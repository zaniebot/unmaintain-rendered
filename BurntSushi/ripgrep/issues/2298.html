<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support for installing ripgrep with cargo-binstall - BurntSushi/ripgrep #2298</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support for installing ripgrep with cargo-binstall</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2298">#2298</a>
        opened by <a href="https://github.com/tomkarw">@tomkarw</a>
        on 2022-09-01 22:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tomkarw">@tomkarw</a></div>
            <div class="timeline-body"><h4>Describe your feature request</h4>
<p><a href="https://github.com/cargo-bins/cargo-binstall">cargo-binstall</a> is a way to fetch precompiled binaries without the need to build from source. It is meant to speed up installing new cargo tools.</p>
<p>By default, <code>cargo-binstall</code> will look for GitHub releases artifacts, and <code>ripgrep</code> has these. Unfortunately, <code>cargo-generate</code> requires the version component to conform to <code>v.*</code> pattern, and <code>ripgrep</code> doesn't include the <code>v</code>.</p>
<p>The easiest way to achieve the desired result would be to override this default by adding this to <code>Cargo.toml</code>:</p>
<pre><code>[package.metadata.binstall]
pkg-url = &quot;{ repo }/releases/download/{ version }/{ name }-{ target }-v{ version }.{ archive-format }&quot;
</code></pre>
<p>(notice the lack of <code>v</code> in the version component)</p>
<p>If support for <code>cargo-binstall</code> is deemed preferable, I'd be happy to land such PR and test that this solution works.</p>
<h4>Alternative</h4>
<p>An alternative would be to change the naming conventions for the releases, but I think the above solution is more surgical and less interfering.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-09-01 22:41</div>
            <div class="timeline-body"><p>I'm not sure I want to encourage more people installing ripgrep through Cargo, but the Cargo.toml lines here look very unobtrusive. So I would be happy to accept a PR for it. And would probably make sense to add <code>cargo binstall</code> instructions to the README.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @BurntSushi on 2022-09-01 22:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @BurntSushi on 2022-09-01 22:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tomkarw">@tomkarw</a> on 2022-09-02 06:58</div>
            <div class="timeline-body"><p>I figured out it would be easier for <code>cargo-binstall</code> to support versions without leading <code>v</code>, rather than go repo by repo and override the default paths. They added it straight away: https://github.com/cargo-bins/cargo-binstall/issues/328!</p>
<p>We can wait till this improvement in <code>cargo-binstall</code> gets released and mention it in the README, I'll prepare a PR for that soon.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-09-02 11:32</div>
            <div class="timeline-body"><p>Perfect, thanks!</p>
<p>And yeah in retrospect, I do kind of wish I used tags starting with <code>v</code>. But all of my Rust repos follow the same convention and it isn't bad enough to be worth me switching. And switching only some of them would probably drive me nuts. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lesleyrs">@lesleyrs</a> on 2023-04-16 14:28</div>
            <div class="timeline-body"><blockquote>
<p>I'm not sure I want to encourage more people installing ripgrep through Cargo</p>
</blockquote>
<p>Huh what's wrong with it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-04-16 14:42</div>
            <div class="timeline-body"><p><code>cargo</code> isn't a package manager..... I don't really have the time to go into detail about all of the things Cargo doesn't do that a package manager does. But it's <em>a lot</em>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rollup</span> added by @BurntSushi on 2023-11-24 19:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2023-11-25 20:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:34 UTC
    </footer>
</body>
</html>
