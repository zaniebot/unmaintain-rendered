<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>use different exit codes for &quot;no match&quot; and &quot;error&quot; - BurntSushi/ripgrep #948</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>use different exit codes for &quot;no match&quot; and &quot;error&quot;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/948">#948</a>
        opened by <a href="https://github.com/Delodax">@Delodax</a>
        on 2018-06-15 11:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Delodax">@Delodax</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<p>0.8.1</p>
How did you install ripgrep?
<p>Homebrew</p>
What operating system are you using ripgrep on?
<p>macOS 10.13.5</p>
Describe your question, feature request, or bug.
<p>Hi!</p>
<p>I am using ripgrep from within a node.js program using <code>child_process.exec()</code>. I&#x27;ve noticed that when I don&#x27;t find anyhting in a search, ripgrep terminates with a non-zero exit code thus informing <code>child_process.exec()</code> that &quot;something went wrong&quot;.</p>
<p>I&#x27;d simply like to know, if there is any flag one can use or other measure to prevent a non-zero exit code during the aforementioned circumstances. I can solve the issue from with the node.js program, but would think &quot;manipulating&quot; the exit code would be a more elegant solution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-15 11:08</div>
            <div class="timeline-body"><blockquote>
<p>I&#x27;ve noticed that when I don&#x27;t find anyhting in a search, ripgrep terminates with a non-zero exit code</p>
</blockquote>
<p>This is intended behavior. ripgrep continues this very long held tradition from grep, and I don&#x27;t see myself changing it or providing a flag to change it.</p>
<p>One place where ripgrep could probably use some improvement is in refining its exit codes. Namely, I think ripgrep only ever produces <code>0</code> or <code>1</code> as an exit code, but it would be nice to reserve <code>1</code> for &quot;no match&quot; and use some other exit code (probably <code>2</code>) in the case of a real error. This is what GNU grep does.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Exit code musing&quot; to &quot;use different exit codes for &quot;no match&quot; and &quot;error&quot;&quot; by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-15 11:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-15 11:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Delodax">@Delodax</a> on 2018-06-15 11:12</div>
            <div class="timeline-body"><p>Thanks for the quick feedback. Your solution wrt extending the breadth of exit codes sounds great. üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-15 11:19</div>
            <div class="timeline-body"><p>Interestingly, it looks like this might be border-line trivial to fix. This is ripgrep&#x27;s current <code>main</code> function:</p>
<p>https://github.com/BurntSushi/ripgrep/blob/15fa77cdb384e013165687f361073defa02d9d98/src/main.rs#L56-L66</p>
<p>I think all that needs to happen is to change the error case to <code>process::exit(2)</code>.</p>
<p>There is still the matter of writing a test and updating/adding relevant docs, which might be a bit more work since I can&#x27;t remember if the test harness tries to control the exit status, but either way, shouldn&#x27;t be too bad.</p>
<p>I can patch this myself when I get a chance, but this does seem like an easy task that anyone could take on if they wanted to!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-15 11:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-06-19 11:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:06 UTC
    </footer>
</body>
</html>
