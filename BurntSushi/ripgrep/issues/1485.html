<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fish shell completions conflict with rg completions provided by fish - BurntSushi/ripgrep #1485</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>fish shell completions conflict with rg completions provided by fish</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1485">#1485</a>
        opened by <a href="https://github.com/ronjouch">@ronjouch</a>
        on 2020-02-14 20:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ronjouch">@ronjouch</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>ripgrep 11.0.2 (rev 9cb93abd11)
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)</p>
<h4>How did you install ripgrep?</h4>
<p>Official amd64 .deb package.</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>Ubuntu 19.10 x64</p>
<h4>Describe your question, feature request, or bug.</h4>
<p>The fish completions conflict with the completions provided by fish's official Ubuntu (.deb) package, https://launchpad.net/~fish-shell/+archive/ubuntu/release-3 , causing installation to fail.</p>
<p>Fish devs suggest at https://github.com/fish-shell/fish-shell/issues/5822#issuecomment-585908454 that 3rd-party completions should be packaged to <code>/usr/share/fish/vendor_completions.d</code> instead of <code>/usr/share/fish/completions</code>, which is fish's sole kingdom.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-02-14 20:40</div>
            <div class="timeline-body"><p>I don't maintain downstream packages. Please file bugs with downstream packages with downstream packagers.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2020-02-14 20:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-02-14 20:44</div>
            <div class="timeline-body"><p>Errmmm, well it looks like the debian package that I provide has this wrong too:</p>
<p>https://github.com/BurntSushi/ripgrep/blob/9cb93abd11906fe1d6f89de712465a7a3aa8c381/Cargo.toml#L104</p>
<p>Is that what you meant by &quot;official&quot; deb package? I took that to mean the deb package in Debian's repositories. But it looks like this should be fixed in my deb package as well. (Which is not official. It's a binary package provided purely as a convenience.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @BurntSushi on 2020-02-14 20:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @BurntSushi on 2020-02-14 20:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ronjouch">@ronjouch</a> on 2020-02-14 21:33</div>
            <div class="timeline-body"><blockquote>
<p>Errmmm, well it looks like the debian package that I provide has this wrong too:</p>
<p>https://github.com/BurntSushi/ripgrep/blob/9cb93abd11906fe1d6f89de712465a7a3aa8c381/Cargo.toml#L104</p>
<p>Is that what you meant by &quot;official&quot; deb package? I took that to mean the deb package in Debian's repositories. But it looks like this should be fixed in my deb package as well. (Which is not official. It's a binary package provided purely as a convenience.)</p>
</blockquote>
<p>Yup, by &quot;official&quot; I meant the package published in the Releases page. Sorry for the confusion and thanks for re-opening.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2020-02-17 22:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thernstig">@thernstig</a> on 2020-02-22 13:31</div>
            <div class="timeline-body"><p>@BurntSushi Any chance you would push a new release soon? Considering the users of fish shell cannot use ripgrep currently without some workarounds.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-02-22 13:45</div>
            <div class="timeline-body"><p>@thernstig https://github.com/BurntSushi/ripgrep/blob/master/FAQ.md#release</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thernstig">@thernstig</a> on 2020-02-22 14:07</div>
            <div class="timeline-body"><p>I assume then this does not fall under</p>
<blockquote>
<p>One exception to this is high impact bugs.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanchey">@zanchey</a> on 2020-02-22 14:10</div>
            <div class="timeline-body"><p>A workaround in the meantime is to run <code>dpkg-divert --add --divert  /usr/share/fish/completions/rg.fish.0 --rename --package ripgrep /usr/share/fish/completions/rg.fish</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-02-22 14:15</div>
            <div class="timeline-body"><p>@thernstig Do you really think it's worth needling me about how I schedule my free time to do a release? I don't. I mean, I wrote the policy. I linked the FAQ entry. Obviously I'm telling you that it applies. Moreover, this isn't some written-in-stone-law that I have to obey. I made the language in the FAQ purposely vague to try to avoid people trying to lawyer me over it. I've now made it even more vague: https://github.com/BurntSushi/ripgrep/commit/ecec6147d117da638c933cf103a3ea14ce87102d</p>
<p>In any case, no, I do not see this as a high impact bug. First of all, this isn't a regression. Nothing changed in the last release that made this a problem. Something else outside of my control appears to have changed. Second of all, my fix <em>only</em> applies to the ripgrep binary Debian package that I distribute. This fix does nothing to resolve any problems ripgrep may or may not have with other packages. If you all of a sudden can't install the binary Debian package, then you can download the generic binary releases until the next release comes out. Or build the binary Debian package from source. Or, if you're using Debian, use whatever release of ripgrep is in the Debian repos. Or, it looks like @zanchey posted a work-around (thank you for that).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thernstig">@thernstig</a> on 2020-02-22 16:16</div>
            <div class="timeline-body"><p>It was merely a question, not implying it does fall under it. I think you read too much into my answer. Thanks for explaining. All good ðŸ˜ƒ</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:05 UTC
    </footer>
</body>
</html>
