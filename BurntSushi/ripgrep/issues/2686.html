<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add printf-like option for custom formatting of filepaths - BurntSushi/ripgrep #2686</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add printf-like option for custom formatting of filepaths</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2686">#2686</a>
        opened by <a href="https://github.com/cohml">@cohml</a>
        on 2023-12-13 18:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/cohml">@cohml</a></div>
            <div class="timeline-body"><p>When ripgrepping across multiple files, the path to the parent file is shown alongside each match. This is problematic when the filepaths get long. For example, when using absolute filepaths.</p>
<p>A nice addition would therefore be some way to customize the way that paths that are shown.</p>
<p>Probably the most useful example would be to replace whatever <code>$HOME</code> expands to with <code>~</code>. But one can imagine something like adding entries into <code>.ripgreprc</code> mapping commonly used paths to informative yet shorter strings, e.g.</p>
<pre><code>/Users/me/ -&gt; ~/
/Users/me/dev/my_project1/src/ -&gt; mypj1/
/Users/me/dev/my_project1/src/ -&gt; mypj2/
[...]
</code></pre>
<p>This would ensure that even when ripgrepping using absolute paths, the output won&#x27;t eat up needless horizontal space. It would also allow users to tailor ripgrep to their bespoke formatting needs, e.g., #665.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-12-13 18:44</div>
            <div class="timeline-body"><p>#665 is already done FWIW, and it needed a lot more than a simple <code>printf</code> option like you&#x27;re asking for here. Actually, I&#x27;m not sure exactly what you&#x27;re asking for here. The issue title mentions <code>printf</code>, but your actual request seems to suggest wanting something that permits hard-coding paths to replace with shorter strings.</p>
<p>With all that said, I do think you made the specific <em>problem</em> you care about pretty clear, but I think there&#x27;s already a pretty standard solution to that:</p>
<pre><code>$ rg is_accel /home/andrew/rust/ripgrep/
/home/andrew/rust/ripgrep/crates/regex/src/literal.rs
73:        if re.is_accelerated() {
$ (cd /home/andrew/rust/ripgrep &amp;&amp; rg is_accel)
crates/regex/src/literal.rs
73:        if re.is_accelerated() {
</code></pre>
<p>That is, ripgrep already lets you shorten the file paths it prints. You just need to change ripgrep&#x27;s current working directory and provide a relative path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-12-13 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wontfix</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-12-13 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cohml">@cohml</a> on 2023-12-13 19:16</div>
            <div class="timeline-body"><p>Thanks for the prompt reply.</p>
<blockquote>
<p>#665 is already done FWIW</p>
</blockquote>
<p>Sorry, guess I missed that part. I skimmed the issue and it sounded like you weren&#x27;t into the proposal.</p>
<blockquote>
<p>Actually, I&#x27;m not sure exactly what you&#x27;re asking for here. The issue title mentions <code>printf</code>, but your actual request seems to suggest wanting something that permits hard-coding paths to replace with shorter strings.</p>
</blockquote>
<p>Sorry for the confusion. I initially had <code>find</code>&#x27;s <code>-printf</code> option in mind when I drafted the title, which can do exactly what I said but also so much more. After drafting the body I debated changing the title too, but just rolled with it.</p>
<p>My <code>.ripgreprc</code> proposal does involve hardcoding paths, but I left the door open to other ideas in case there was a more elegant solution.</p>
<blockquote>
<p>ripgrep already lets you shorten the file paths it prints. You just need to change ripgrep&#x27;s current working directory and provide a relative path.</p>
</blockquote>
<p>With unix tools, there is almost always a way. However, this approach will only work if you are executing ripgrep directly.</p>
<p>But what about if it runs inside a function that gets executed by keybinding? For example, <a href="https://github.com/junegunn/fzf/blob/master/ADVANCED.md#using-fzf-as-the-secondary-filter">this amazing fzf + ripgrep example</a>, which I have a couple variants of mapped to different keybindings.</p>
<p>That is just one specific example, but emblematic of a more general use case that would be solved by a dedicated argument or behavior configurable in <code>.ripgreprc</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-12-13 19:27</div>
            <div class="timeline-body"><p>There&#x27;s still a way even then if you feel strongly enough. You can use symlinks to shorten a path. Not the prettiest answer and has downsides of its own, but it&#x27;s there if you really need it.</p>
<p><code>find</code>&#x27;s printf flag is an <em>enormous</em> surface area. I&#x27;m not too keen on adding that.</p>
<p>I think for fzf, it would make more sense for the thing doing the display to try to trim down the output when possible.</p>
<p>I understand the request, but this is the kind of scope increase that I&#x27;d prefer not to chase. It also doesn&#x27;t help that this is exactly the kind of thing that begets more features. As soon as something like this added, folks are going to want to customize it in more ways. It&#x27;s too heavy of a maintenance burden and the benefit isn&#x27;t big enough to justify it IMO.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cohml">@cohml</a> on 2023-12-13 20:20</div>
            <div class="timeline-body"><p>Makes sense! Not the outcome I was hoping for but your justifications are totally reasonable. Thanks anyway for discussing it!</p>
<p>Should you ever change your mind, something similar is being considered for <code>fd</code> that perhaps you could check out for inspiration (see sharkdp/fd#533 and sharkdp/fd#1043). Admittedly this functionality is less out of scope for <code>fd</code> than <code>ripgrep</code>, but anyway, it&#x27;s a precedent ðŸ˜„</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:13 UTC
    </footer>
</body>
</html>
