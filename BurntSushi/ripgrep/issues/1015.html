<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piping the results of ripgrep fails - BurntSushi/ripgrep #1015</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Piping the results of ripgrep fails</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1015">#1015</a>
        opened by <a href="https://github.com/Vagelis-Prokopiou">@Vagelis-Prokopiou</a>
        on 2018-08-16 08:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Vagelis-Prokopiou">@Vagelis-Prokopiou</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>ripgrep 0.9.0 (rev 6799dcfc0e)</p>
<h4>How did you install ripgrep?</h4>
<p>I placed the rg.exe from ripgrep-0.9.0-x86_64-pc-windows-gnu to C:\User\bin</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>Windows 7 (through Git Bash).</p>
<h4>Describe your question, feature request, or bug.</h4>
<p>Piping the results of ripgrep fails. Possibly related to #890.</p>
<p><strong>Grep behavior:</strong>
Command: grep -lr &quot;):'&quot; .
Result: path/to/matching/file</p>
<p>Command: grep -lr &quot;):'&quot; . | while read line; do echo &quot;$line&quot;; done;
Result: path/to/matching/file</p>
<p><strong>Ripgrep behavior:</strong>
Command: rg -Fl &quot;):'&quot; .
Result: path\to\matching\file (which is right since we are on Windows)</p>
<p>Command: rg -Fl &quot;):'&quot; . | while read line; do echo &quot;$line&quot;; done;
Result: pathtomatchingfile (all the path separators are gone...)</p>
<p>The debug flad provides the following:
DEBUG/grep::search/grep\src\search.rs:195: original regex HIR pattern:
):'
DEBUG/grep::search/grep\src\search.rs:197: transformed regex HIR pattern:
):'
DEBUG/grep::literals/grep\src\literals.rs:36: literal prefixes detected: Literals { lits: [Complete():')], limit_size: 250, limit_class: 10 }
DEBUG/globset/globset\src\lib.rs:424: glob converted to regex: Glob { glob: &quot;Libs/TempTestCase<em>&quot;, re: &quot;(?-u)^Libs/TempTestCase[^/]</em>$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: Tokens([Literal('L'), Literal('i'), Literal('b'), Literal('s'), Literal('/'), Literal('T'), Literal('e'), Literal('m'), Literal('p'), Literal('T'), Literal('e'), Literal('s'), Literal('t'), Literal('C'), Literal('a'), Literal('s'), Literal('e'), ZeroOrMore]) }
DEBUG/globset/globset\src\lib.rs:424: glob converted to regex: Glob { glob: &quot;**/Temp<em>&quot;, re: &quot;(?-u)^(?:/?|.</em>/)Temp.*$&quot;, opts: GlobOptions { case_insensitive: false, literal_separator: false, backslash_escape: true }, tokens: Tokens([RecursivePrefix, Literal('T'), Literal('e'), Literal('m'), Literal('p'), ZeroOrMore]) }
DEBUG/globset/globset\src\lib.rs:429: built glob set; 1 literals, 4 basenames, 1 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 2 regexes</p>
<h4>If this is a bug, what are the steps to reproduce the behavior?</h4>
<p>Reproduce be running the following search:
<code>rg -Fl &quot;searchTerm&quot; . | while read line; do echo &quot;$line&quot;; done;</code></p>
<p>What do you think ripgrep should have done?
I suppose that it should at least return a result like <code>path\to\matching\file</code>.</p>
<p>I don't know if this is a ripgrep bug per se. I just decided to create this issue to provide more info on the piping subject under Windows.</p>
<p>Thanx for this awesome tool.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-08-16 10:56</div>
            <div class="timeline-body"><p>Yeah this isn't a problem with ripgrep. Others are welcome to do a deeper dive here, but <a href="https://github.com/git-for-windows/git/wiki">according to the Git for Windows docs</a>, it works similarly to cygwin in that it provides a POSIX layer on top of Windows since <code>git</code> isn't a portable application. ripgrep, on the other hand, <em>is</em> portable and does not require any sort of POSIX layer. It is a <strong>native Windows application</strong>. That means you're trying to use a native Windows application in a POSIX environment, where that POSIX environment expects <code>/</code> as a separator. Since ripgrep is a native Windows application, it uses <code>\</code> as a separator. <code>\</code> is not a path separator recognized by POSIX, and is instead often used as a way to delineate escapes in strings, which is likely what's happening here. cygwin has facilities for doing path translation such that it understands <code>\</code>, but it looks like Git for Windows does not. You, the user, must deal with that.</p>
<p>This is why ripgrep has a <code>--path-separator</code> flag. Set it to <code>/</code> in your <a href="https://github.com/BurntSushi/ripgrep/blob/master/GUIDE.md#configuration-file">ripgrep config file</a> and be happy that ripgrep will now play nicely with your POSIX emulation layer.</p>
<p>(This is exactly the suggested work around as mentioned <a href="https://github.com/BurntSushi/ripgrep/issues/890#issuecomment-406878797">here</a> in #890.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-08-16 10:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by @BurntSushi on 2018-08-16 10:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Vagelis-Prokopiou">@Vagelis-Prokopiou</a> on 2018-08-16 11:22</div>
            <div class="timeline-body"><p>Indeed, the following command works as expected:
<code>rg --path-separator //  -Fl &quot;searchTerm&quot; . | while read line; do echo &quot;$line&quot;; done;</code>
Result: <code>path/to/matching/file</code></p>
<p>PS: Thanx for the feedback Andrew!
Damn Windows...</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:39 UTC
    </footer>
</body>
</html>
