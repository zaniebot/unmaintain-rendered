<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logical AND between glob patterns - BurntSushi/ripgrep #1046</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Logical AND between glob patterns</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1046">#1046</a>
        opened by <a href="https://github.com/strindberg">@strindberg</a>
        on 2018-09-11 03:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/strindberg">@strindberg</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>ripgrep 0.10.0</p>
<p>I might be missing something, but I can't figure out a way to make ripgrep treat multiple glob patterns with logical AND. The background is, I have a wrapper script combining input from the user to set up conditions for which files to search. This wrapper script today uses find and grep, and I was interested in trying to use ripgrep instead.</p>
<p>What I am trying to achieve is for example: &quot;all files with the string 'warehouse' in its name AND the file ending 'properties' should be searched&quot;. Now, in this case I could express it as a single glob, but since there might be a lot more conditions, the combinatorics quickly become unwieldy.</p>
<p>As far as I can see, the invocation ripgrep --glob '<em>warehouse</em>' --glob '*properties' matches all files that match EITHER of the globs, and I would need away to specify that BOTH must match.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-11 11:42</div>
            <div class="timeline-body"><p>I suspect this type of complicated filtering would be more appropriately done by <code>find</code>. For example, GNU grep's recursive search doesn't have the feature you're requesting either, and instead just has basic disjunctive <code>--include</code> rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/strindberg">@strindberg</a> on 2018-09-11 12:16</div>
            <div class="timeline-body"><p>Yes, you're probably right. Every tool should be an expert in its own field. However, I can see no easy way to combine ripgrep with find, i.e. use my existing find filters and feed it into ripgrep. I would like an option saying &quot;use this list of files and don't recurse&quot;. Am I missing something and this is already possible?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-11 12:24</div>
            <div class="timeline-body"><p>@strindberg Ah. You do it the same way you would combine <code>find</code> with <code>grep</code>. e.g., <code>find ./ -name 'wat' -print0 | xargs -0 rg &lt;pattern&gt;</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/strindberg">@strindberg</a> on 2018-09-11 14:22</div>
            <div class="timeline-body"><p>Oh, now I see. I was confused by the automatic recursive mode of ripgrep, and the fact that my find filter sometimes passed on directories. Making sure I only pass non-directories solved the problem. In a use case like mine, an option to turn off recursion in ripgrep would actually help a bit, but I can work around it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-11 14:26</div>
            <div class="timeline-body"><p>@strindberg Glad you figured it out! And yeah, I forgot to include the <code>-type f</code> condition, which you probably also want with <code>grep</code> as well, but grep does print a helpful error message.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-09-11 14:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/strindberg">@strindberg</a> on 2018-09-11 14:30</div>
            <div class="timeline-body"><p>Yes. grep has a -dskip option which automatically drops directories, which is useful. The reason why it is harder than it sounds to weed out directories is that if you use the &quot;-prune&quot; option in find, it is a bit complex to make sure that the right directories are pruned, but the resulting (printed) files are only just files.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:40 UTC
    </footer>
</body>
</html>
