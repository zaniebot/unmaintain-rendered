<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>-H makes no difference - BurntSushi/ripgrep #247</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>-H makes no difference</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/247">#247</a>
        opened by <a href="https://github.com/TheRealTroff">@TheRealTroff</a>
        on 2016-11-23 15:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/TheRealTroff">@TheRealTroff</a></div>
            <div class="timeline-body"><pre><code>$ rg ripgrep
rg.1
24:ripgrep (rg) combines the usability of The Silver Searcher (an ack
27:Project home page: https://github.com/BurntSushi/ripgrep
269:This is enabled by default when ripgrep thinks it will be faster.
345:Show the version number of ripgrep and exit.
368:inside of ripgrep.
380:ripgrep.
</code></pre>
<pre><code>$ rg -H ripgrep
rg.1
24:ripgrep (rg) combines the usability of The Silver Searcher (an ack
27:Project home page: https://github.com/BurntSushi/ripgrep
269:This is enabled by default when ripgrep thinks it will be faster.
345:Show the version number of ripgrep and exit.
368:inside of ripgrep.
380:ripgrep.
</code></pre>
<p>In contrast:</p>
<pre><code>$ grep -H -n ripgrep *
rg.1:24:ripgrep (rg) combines the usability of The Silver Searcher (an ack
rg.1:27:Project home page: https://github.com/BurntSushi/ripgrep
rg.1:269:This is enabled by default when ripgrep thinks it will be faster.
rg.1:345:Show the version number of ripgrep and exit.
rg.1:368:inside of ripgrep.
rg.1:380:ripgrep.
</code></pre>
<p>This makes the output much less pleasant to parse.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-23 16:02</div>
            <div class="timeline-body"><p>This seems like intended behavior. The <code>-H</code> flag simply controls whether to show the file name or not. When searching multiple files, ripgrep enables <code>-H</code> by default. Compare the output of <code>rg ripgrep rg.1</code> and <code>rg ripgrep rg.1 -H</code>, for example.</p>
<p>It would be much more helpful if you included the problem you're trying to solve. If you want output like grep, then you get it for free automatically if you pipe to another command or redirect stdout. Alternatively, use the <code>--no-heading</code> flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheRealTroff">@TheRealTroff</a> on 2016-11-23 16:06</div>
            <div class="timeline-body"><p>Fair enough, that works, but that's not how I read the documentation of -H.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-23 16:07</div>
            <div class="timeline-body"><p>@TheRealTroff Could you suggest a better phrasing?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">doc</span> added by @BurntSushi on 2016-11-23 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheRealTroff">@TheRealTroff</a> on 2016-11-23 16:18</div>
            <div class="timeline-body"><p>Actually, no. You've conflated -H with --heading. The behaviour of -H is that described by --heading as far as I can tell. If I remove the &quot;prefix each match...&quot; I don't see a point to have -H at all.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-23 16:24</div>
            <div class="timeline-body"><p>The behavior of <code>-H</code> is precisely the same as it is in grep, so I think you're going to have to clarify further. <code>-H</code> has very little utility. It's essentially only useful to enforce consistent output regardless of the number of arguments. e.g., <code>grep foo bar</code> won't show the file name in matches but <code>grep -H foo bar</code> will. The same is true for <code>rg</code>.</p>
<p><code>--heading</code>/<code>--no-heading</code> is about grouping results.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheRealTroff">@TheRealTroff</a> on 2016-11-23 16:25</div>
            <div class="timeline-body"><p>I've already shown that the behavior is different in the original post? I've updated it for better formatting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-23 16:32</div>
            <div class="timeline-body"><p>@TheRealTroff How so? In all cases, a file name is shown.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-27 00:17</div>
            <div class="timeline-body"><p>@TheRealTroff Is there something we can add to the docs that will make this clearer? (I can take a crack at it, but I'd consider something from you much more valuable!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2016-11-28 22:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:41:54 UTC
    </footer>
</body>
</html>
