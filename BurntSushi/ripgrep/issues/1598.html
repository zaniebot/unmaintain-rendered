<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>.gitignore? ignored! - BurntSushi/ripgrep #1598</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>.gitignore? ignored!</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1598">#1598</a>
        opened by <a href="https://github.com/tifrel">@tifrel</a>
        on 2020-05-27 08:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tifrel">@tifrel</a></div>
            <div class="timeline-body"><h4>ripgrep version</h4>
<pre><code>❯ rg --version
ripgrep 12.1.0
-SIMD -AVX (compiled)
+SIMD -AVX (runtime)</code></pre>
<h4>Means of installation</h4>
<pre><code>sudo pacman -S ripgrep</code></pre>
<h4>OS</h4>
<pre><code>❯ uname -r
5.6.12-1-MANJARO</code></pre>
<h4>Bug description</h4>
<p><code>ripgrep</code> searches through files that are listed in <code>.gitignore</code>, possibly related to closed <a href="https://github.com/BurntSushi/ripgrep/issues/1336">issue 1336</a></p>
<h4>Reproduction</h4>
<pre><code>❯ ls -A
bakfile  .gitignore  testfile
❯ cat bakfile
Find me
❯ cat testfile
Find me
❯ cat .gitignore
bakfile
❯ rg 'Find me'
testfile
1:Find me

bakfile     # &lt;&lt;&lt; should not be searched
1:Find me
❯ rg 'Find me' --glob='!bakfile'
testfile
1:Find me
❯ type rg    # check if rg is aliased
rg is /usr/bin/rg
❯ rg --debug 'Find me'
DEBUG|grep_regex::literal|crates/regex/src/literal.rs:58: literal prefixes detected: Literals { lits: [Complete(Find me)], limit_size: 250, limit_class: 10 }
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 1 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|ignore::walk|crates/ignore/src/walk.rs:1730: ignoring ./.gitignore: Ignore(IgnoreMatch(Hidden))
testfile
1:Find me

bakfile
1:Find me
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
DEBUG|globset|crates/globset/src/lib.rs:431: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes</code></pre>
<h4>What is the expected behavior?</h4>
<p>Respecting the .gitignore file, as per spec.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2020-05-27 09:03</div>
            <div class="timeline-body"><p>Think you want this</p>
<pre><code>--no-require-git
    By default, ripgrep will only respect global gitignore rules,
    .gitignore rules and local exclude rules if ripgrep detects that
    you are searching inside a git repository. This flag allows you to
    relax this restriction such that ripgrep will respect all git
    related ignore rules regardless of whether you're searching in a
    git repository or not.

    This flag can be disabled with --require-git.
</code></pre>
<p>(See https://github.com/BurntSushi/ripgrep/commit/d0659282e65dde46e0b5f373d89042b2fe1d4884)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tifrel">@tifrel</a> on 2020-05-27 09:29</div>
            <div class="timeline-body"><p>I already figured out to just rename my <code>.gitignore</code> to <code>.ignore</code>. However I wish to encourage to update the documentation (might do a PR on that), because in the <a href="https://github.com/BurntSushi/ripgrep/blob/master/GUIDE.md#automatic-filtering">corresponding section</a> the claim to respect the <code>.gitignore</code> is literally the first point on the list and I can't find the line where it states that you need to be in a git repo for this to be supported. It tells you how to turn it off, not how to turn it on.</p>
<p>If doing the PR, do I assume correctly that the precedence is <code>.rgignore</code> &gt; <code>.ignore</code> &gt; <code>.gitignore</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2020-05-27 09:50</div>
            <div class="timeline-body"><p>I think that's right, assuming that list is highest to lowest priority. And it only applies where there's a conflict (like one says <code>foo</code> and one says <code>!foo</code>); otherwise it just merges them all together</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tifrel">@tifrel</a> on 2020-05-27 12:27</div>
            <div class="timeline-body"><p>There you go maintainers: https://github.com/BurntSushi/ripgrep/pull/1600</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">doc</span> added by @BurntSushi on 2020-05-28 11:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-25 19:16</div>
            <div class="timeline-body"><p>It looks like this was fixed by https://github.com/BurntSushi/ripgrep/pull/1600.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2023-11-25 19:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:11 UTC
    </footer>
</body>
</html>
