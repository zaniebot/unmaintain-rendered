<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>--color parameter IN A CONFIG FILE raises error on run - BurntSushi/ripgrep #1048</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>--color parameter IN A CONFIG FILE raises error on run</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1048">#1048</a>
        opened by <a href="https://github.com/OmanF">@OmanF</a>
        on 2018-09-12 10:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/OmanF">@OmanF</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<p>ripgrep 0.10.0
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)</p>
How did you install ripgrep?
<p>Using <code>brew</code>.</p>
What operating system are you using ripgrep on?
<p>macOS High Sierra (10.13.6)</p>
Describe your question, feature request, or bug.
<p>Using the <code>--color</code> directive in a config file raises an error when trying to run <code>rg</code> claiming the argument <code>--color</code> wasn&#x27;t expected or isn&#x27;t valid in that context.</p>
If this is a bug, what are the steps to reproduce the behavior?
<p>I&#x27;ve set a config file according to official guide.
On that file I put: <code>--color always</code>.
I then run <code>rg &lt;pattern&gt; &lt;location&gt;</code>.</p>
If this is a bug, what is the actual behavior?
<pre><code>DEBUG|rg::config|src/config.rs:37: /Users/ohadfk/.ripgreprc: arguments loaded from config file: [&quot;--color always&quot;, &quot;--smart-case&quot;]
DEBUG|rg::args|src/args.rs:508: final argv: [&quot;rg&quot;, &quot;--color always&quot;, &quot;--smart-case&quot;, &quot;--debug&quot;, &quot;io.puts&quot;, &quot;ticker&quot;]
error: Found argument &#x27;--color always&#x27; which wasn&#x27;t expected, or isn&#x27;t valid in this context
	Did you mean --color?

USAGE:

    rg [OPTIONS] PATTERN [PATH ...]
    rg [OPTIONS] [-e PATTERN ...] [-f PATTERNFILE ...] [PATH ...]
    rg [OPTIONS] --files [PATH ...]
    rg [OPTIONS] --type-list
    command | rg [OPTIONS] PATTERN

For more information try --help
</code></pre>
If this is a bug, what is the expected behavior?
<p>I expect the query to run correctly.</p>
Note
<ul>
<li>Commenting out the <code>--color always</code> argument, the <code>--smart-case</code> argument works correctly.</li>
<li>The incorrect behavior happens no matter which of the <em>valid</em> values for the <code>--color</code> is used (e.g. <code>always</code>, <code>never</code>, <code>ansi</code>).</li>
<li>Using <code>--color</code> <em>WITHOUT</em> specifying a value gives the (correct) error that this parameter takes 1 value but was passed 0.</li>
<li>Using <code>--color &lt;val&gt;</code> as a command-line parameter (with the rest of the config file <em>still in play</em>) also works correctly.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-12 10:43</div>
            <div class="timeline-body"><p>The error message isn&#x27;t great, but this isn&#x27;t a bug. Please consider <a href="https://github.com/BurntSushi/ripgrep/blob/master/GUIDE.md#configuration-file">reading the docs on config files</a>. In particular:</p>
<blockquote>
<p>When we use a flag that has a value, we either put the flag and the value on the same line but delimited by an = sign (e.g., <code>--max-columns=150</code>), or we put the flag and the value on two different lines. This is because ripgrep&#x27;s argument parser knows to treat the single argument <code>--max-columns=150</code> as a flag with a value, but if we had written <code>--max-columns 150</code> in our configuration file, then ripgrep&#x27;s argument parser wouldn&#x27;t know what to do with it.</p>
<p>Putting the flag and value on different lines is exactly equivalent and is a matter of style.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-09-12 10:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/OmanF">@OmanF</a> on 2018-09-12 10:47</div>
            <div class="timeline-body"><p>Yes, sorry for missing the part about formatting the file.
It works correctly.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:07 UTC
    </footer>
</body>
</html>
