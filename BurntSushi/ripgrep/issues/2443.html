<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>search strings are being missed / overlooked - BurntSushi/ripgrep #2443</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>search strings are being missed / overlooked</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2443">#2443</a>
        opened by <a href="https://github.com/tjex">@tjex</a>
        on 2023-03-04 12:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tjex">@tjex</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>ripgrep 13.0.0
-SIMD -AVX (compiled)</p>
<h4>How did you install ripgrep?</h4>
<p><code>brew install ripgrep</code></p>
<h4>What operating system are you using ripgrep on?</h4>
<p>macOS 12.6.1</p>
<h4>Describe your bug.</h4>
<p>running <code>rg &lt;search-term&gt;</code> (with or without the <code>-i</code> flag) finds some occurrences of the string within some sub-directories, but not all.</p>
<h4>What are the steps to reproduce the behavior?</h4>
<p>The corpus is an open source docs repo <a href="https://github.com/actualbudget/docs">actualbudget/docs</a>.</p>
<ol>
<li>clone the repo above</li>
<li><code>cd docs</code></li>
<li><code>rg -i actual-config</code> (this finds occurrences in two files. see screenshot)</li>
<li><code>cd ./docs</code> (ie, the 'docs' folder at the repo root)</li>
<li><code>rg -i actual-config</code> (same result as in step 3)</li>
</ol>
<p>command line commands</p>
<pre><code class="language-diff">- note: I've renamed my repo root folder to `abudget-docs`
</code></pre>
<img width="440" alt="Screen Shot 2023-03-04 at 13 21 32" src="https://user-images.githubusercontent.com/83029642/222900833-67493d63-9ca5-4931-8b0a-637392e8e5d9.png">

<p>neovim showing file path and instances of string that are not found in above results.
The below image shows the <code>Restore.md</code> file at <code>&lt;repo-root&gt;/docs/Backup-Restore/</code>.</p>
<img width="853" alt="Screen Shot 2023-03-04 at 13 24 43" src="https://user-images.githubusercontent.com/83029642/222900938-c330c2e7-3237-4955-98f1-4e1f1f130554.png">

<h4>What is the actual behavior?</h4>
<p>ripgrep returns search results from files in other sub-folders, but not from all - as observed manually in neovim (above).
Search results are found in: <code>docs/Installing/fly/..</code>, <code>docs/Getting-Started/migration/...</code>, but there are instances of the search term in <code>docs/Backup-Restore/Backups.md</code> that are not found.</p>
<p>Not huge, but still: <a href="https://gist.github.com/tjex/df59cf31d5afde4a9e2b465b3472260b">gist</a></p>
<h4>What is the expected behavior?</h4>
<p>The instances of the string <code>actual-config</code> should have also been returned from <code>docs/Backup-Restore/Backups.md</code> (as well as any other files in the corpus that I don't know about)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-03-04 13:03</div>
            <div class="timeline-body"><p>The answer is in the <code>--debug</code> output. Did you look at it? Note this line:</p>
<pre><code>DEBUG|ignore::walk|crates/ignore/src/walk.rs:1741: ignoring ./docs/Backup-Restore: Ignore(IgnoreMatch(Gitignore(Glob { from: Some(&quot;./.gitignore&quot;), original: &quot;Backup*/&quot;, actual: &quot;**/Backup*&quot;, is_whitelist: false, is_only_dir: true })))
</code></pre>
<p>Your <code>./docs/Backup-Restore</code> directory is matched by a rule in your <code>.gitignore</code>. So ripgrep skips that directory.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjex">@tjex</a> on 2023-03-04 20:33</div>
            <div class="timeline-body"><p>oh pwoh. I did, but overlooked this!
thanks for taking the time to point it out üôè</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @tjex on 2023-03-04 20:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by @BurntSushi on 2023-03-04 20:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:37 UTC
    </footer>
</body>
</html>
