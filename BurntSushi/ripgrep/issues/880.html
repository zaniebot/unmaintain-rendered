<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>add --no-column flag to override --column (and --vimgrep) - BurntSushi/ripgrep #880</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>add --no-column flag to override --column (and --vimgrep)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/880">#880</a>
        opened by <a href="https://github.com/kenorb">@kenorb</a>
        on 2018-04-11 00:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kenorb">@kenorb</a></div>
            <div class="timeline-body"><p>ripgrep should have a <code>--no-column</code> flag as a way to toggle the <code>--column</code> flag. Like <code>--no-line-number</code>, this should also override <code>--vimgrep</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:21</div>
            <div class="timeline-body"><p>Your output shows <em>column numbers</em>, not line numbers.</p>
<p>Could you please explain what problem you&#x27;re trying to solve? <code>--vimgrep</code> is meant specifically for parsing by external programs, particularly vim. Using it in conjunction with <code>--no-filename --no-line-number</code> seems strange to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kenorb">@kenorb</a> on 2018-04-11 00:28</div>
            <div class="timeline-body"><p>I just need the plain output without any extras. Basically what it reads &quot;a line with more than one match will be printed more than once&quot;, so I can count the duplicates.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:31</div>
            <div class="timeline-body"><p>Your sentences seem to be in conflict with each other. &quot;Plain output&quot; to me is &quot;print every line that matches.&quot; <code>rg pattern file -N</code> will do that when at a tty.</p>
<p>If you want each match to be on its own line, then <code>rg pattern file -N -o</code> will do that. The <code>-o/--only-matching</code> flag is the same one found in GNU grep.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kenorb">@kenorb</a> on 2018-04-11 00:31</div>
            <div class="timeline-body"><p>It&#x27;s basically for the workaround to do AND grepping which I haven&#x27;t found, so:</p>
<pre><code>rg --vimgrep --no-filename --no-line-number &quot;foo|bar|buzz&quot; file.txt | sort | uniq -c | sort -nr | grep -w 3</code></pre>
<p>should show me only the lines with all 3 patterns present, but because of extra column numbers, it doesn&#x27;t work. So for further workaround, I&#x27;ll have to filter out the output using <code>awk</code> and/or <code>cut</code> by removing these column numbers.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:32</div>
            <div class="timeline-body"><p>@kenorb You&#x27;re overthinking it. Look at the output of <code>rg &#x27;foo|bar|buzz&#x27; file.txt | cat</code>. ripgrep toggles slightly different options depending on whether you&#x27;re piping or printing to a tty.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:33</div>
            <div class="timeline-body"><p>See also: <code>rg &#x27;foo|bar|buzz&#x27; file.txt -o | cat</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kenorb">@kenorb</a> on 2018-04-11 00:34</div>
            <div class="timeline-body"><p>I need basically <code>foo&amp;bar&amp;buzz</code>-like pattern, so I need line with all patterns present at the same time, which would be <code>foo bar buzz</code> in this case. So having 3 the same lines and counting the duplicates could help me to find those lines.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:36</div>
            <div class="timeline-body"><p>@kenorb Then I have no idea what you&#x27;re doing. <code>rg foo | rg bar | rg buzz</code> prints only the lines that contain <code>foo</code>, <code>bar</code> and <code>buzz</code>. You should be solving this problem the same way you&#x27;d solve it with grep.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kenorb">@kenorb</a> on 2018-04-11 00:36</div>
            <div class="timeline-body"><p>I know, but I was looking for some method to run <code>rg</code> only once for simplicity, but it didn&#x27;t end well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:37</div>
            <div class="timeline-body"><p>Then why in the world did you file a bug report about <code>--vimgrep</code>? I am very confused.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:37</div>
            <div class="timeline-body"><p>If that&#x27;s what your after, then I guess you probably want #875. (It&#x27;s not clear whether it will ever happen.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kenorb">@kenorb</a> on 2018-04-11 00:38</div>
            <div class="timeline-body"><p>I would expect that <code>--no-line-number</code> would suppress column numbers as well. Otherwise, I&#x27;d expect another param like <code>--no-column-number</code> which is not there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:41</div>
            <div class="timeline-body"><p><code>--no-line-number</code> does suppress line numbers, even when paired with <code>--vimgrep</code>. So your expectation is satisfied already.</p>
<p>A request for a <code>--no-column</code> flag (to match the existing <code>--column</code> flag) is reasonable, but merely for consistency sake.</p>
<p>As far as I can tell, your use of <code>--vimgrep</code> here makes no sense at all. So if you don&#x27;t want column numbers, then don&#x27;t use it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;-N doesn&#x27;t suppress line numbers completely when used with --vimgrep&quot; to &quot;add --no-column flag to override --column (and --vimgrep)&quot; by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kenorb">@kenorb</a> on 2018-04-11 00:43</div>
            <div class="timeline-body"><p>So I would expect this output:</p>
<pre><code>$ rg --vimgrep --no-filename --no-line-number &quot;foo|bar|buzz&quot; file.txt  | cut -d: -f2-
foo
foo bar
foo bar
foo bar buzz
foo bar buzz
foo bar buzz
</code></pre>
<p>but without <code>cut</code> which won&#x27;t work anyway when there are multiple-digits. So if <code>--no-line-number</code> can&#x27;t support suppressing column numbers, then I&#x27;d expect <code>--no-column-number</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:43</div>
            <div class="timeline-body"><p>I&#x27;ve updated this issue to reflect the actual request.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:46</div>
            <div class="timeline-body"><p>@kenorb OK, I&#x27;m finding this conversation to be frustrating. It&#x27;s going in circles. I don&#x27;t know where, how or why you&#x27;re confused. If this is just a request for something as simple as <code>--no-column</code>, then fine. Let&#x27;s leave it at that. But your examples with <code>--vimgrep</code> and your questions about &quot;and&quot; grepping combined with all this talk about <code>cut</code>, <code>awk</code> and showing patterns that actually do &quot;or&quot; grepping has made this issue way harder to understand than it needs to be.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2018-04-11 00:50</div>
            <div class="timeline-body"><p>Seems like the reason @kenorb is interested in <code>--vimgrep</code> is just that it causes <code>rg</code> to print one copy of a line for each time it matches the pattern. I don&#x27;t think (?) that functionality is exposed through any other option. So his request could be fulfilled either by adding an option to disable column numbers, which could be combined with <code>--vimgrep</code>, or by adding a new option that just enables that duplicate-printing behaviour. I think that&#x27;s it, anyway?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-11 00:52</div>
            <div class="timeline-body"><p>@okdana Thanks for lending some clarity to this issue! I forgot that <code>--vimgrep</code> emitted the entire line, which is of course different than what <code>-o</code> does.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-04-23 23:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:06 UTC
    </footer>
</body>
</html>
