<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>don't output line numbers when the input is from `stdin` - BurntSushi/ripgrep #130</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>don&#x27;t output line numbers when the input is from <code>stdin</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/130">#130</a>
        opened by <a href="https://github.com/jzinn">@jzinn</a>
        on 2016-09-28 22:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jzinn">@jzinn</a></div>
            <div class="timeline-body"><p>When reading input from <code>stdin</code>, the output includes line numbers by default:</p>
<pre><code>$ echo hi | rg i
1:hi
</code></pre>
<p>It would be nice for <code>rg</code> not to print line numbers in this case.</p>
<p>Although the <code>-N</code> flag can be used to turn off line numbers, when using <code>rg</code> in a pipeline, it would be more convenient not to have to.</p>
<p>Also <code>ag</code> does not print line numbers:</p>
<pre><code>$ echo hi | ag i
hi
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kaushalmodi">@kaushalmodi</a> on 2016-09-28 23:00</div>
            <div class="timeline-body"><p>On the other hand, I have aliased <code>ag</code> to <strong>always</strong> show the line numbers, using its <code>--line-numbers</code> option :) So looks like there is no one <em>right</em> way to do this; it&#x27;s purely personal choice based.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-29 00:03</div>
            <div class="timeline-body"><p>I can go both ways here, but I should clarify one thing that is kind of important:</p>
<blockquote>
<p>when using rg in a pipeline</p>
</blockquote>
<p>If <code>rg</code> is used in a pipeline, then it should do the right thing. Note the difference between these commands:</p>
<pre><code>$ rg &#x27;Sherlock Holmes&#x27; short.txt 
5:Chapter 1. Mr. Sherlock Holmes
7:Mr. Sherlock Holmes, who was usually very late in the mornings, save

$ cat short.txt | rg &#x27;Sherlock Holmes&#x27;
5:Chapter 1. Mr. Sherlock Holmes
7:Mr. Sherlock Holmes, who was usually very late in the mornings, save

$ cat short.txt | rg &#x27;Sherlock Holmes&#x27; | cat
Chapter 1. Mr. Sherlock Holmes
Mr. Sherlock Holmes, who was usually very late in the mornings, save
</code></pre>
<p>The first two show line numbers, but only because <code>rg</code> knows it&#x27;s writing to a tty. In the last one, <code>rg</code> is in a pipeline, so it defaults to standard <code>grep</code> output.</p>
<p>It does kind of feel like the first two should be consistent with each other. One might argue that this is a little too smart, though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-29 00:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jzinn">@jzinn</a> on 2016-09-29 00:23</div>
            <div class="timeline-body"><p>Oh, I see.  I was building up a pipeline and was looking at the output of <code>rg</code> before piping it to the next stage.  I didn&#x27;t realize that the numbers would go away when the next stage was connected.</p>
<p>The current behavior is good, but somewhat surprising.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/jzinn">@jzinn</a> on 2016-09-29 00:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jzinn">@jzinn</a> on 2017-03-16 23:13</div>
            <div class="timeline-body"><p>#380</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-03-16 23:21</div>
            <div class="timeline-body"><p>@jzinn Oh interesting, completely forgot about this ticket! Thanks. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jzinn">@jzinn</a> on 2017-03-17 03:28</div>
            <div class="timeline-body"><p>@BurntSushi, thanks for this amazing utility.  A core part of my workflow is ripgrep and</p>
<pre><code>rg foo -l | xargs perl -i -ple &#x27;s/foo/bar/&#x27;
</code></pre>
<p>I type it all day long.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dtadrk">@dtadrk</a> on 2023-04-28 10:38</div>
            <div class="timeline-body"><p>By now you can just use the &quot;-N&quot; flag to suppress line numbers.
Just adding this here because this was still the first hit from Google.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mg">@mg</a> on 2024-07-11 12:02</div>
            <div class="timeline-body"><p>Hi. Is there a way to KEEP the line numbers when redirecting? I am redirecting stdout to a file/pbcopy/vim buffer and I want the line numbers to be in the final output, along with all the new line characters</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-07-11 12:09</div>
            <div class="timeline-body"><p>@mg Please ask questions in new Discussion posts instead of bumping old issues.</p>
<p>But yes, the <code>-n/--line-number</code> flag will do what you want... It&#x27;s documented in <code>rg -h</code> (short) and <code>rg --help</code> (long) and <code>man rg</code> (if available on your system).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Locked by <a href="https://github.com/ghost">@ghost</a> on 2024-07-11 12:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:01 UTC
    </footer>
</body>
</html>
