<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ripgrep slower than grep - BurntSushi/ripgrep #838</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ripgrep slower than grep</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/838">#838</a>
        opened by <a href="https://github.com/bbbsg">@bbbsg</a>
        on 2018-02-27 17:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bbbsg">@bbbsg</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>ripgrep 0.8.1 (rev c8e9f25b85)
+SIMD -AVX</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>Debian Stretch 64 bit</p>
<h4>Describe your question, feature request, or bug.</h4>
<p>ripgrep is at least 4 times slower than grep on a certain use case (never waited long enough for it to return). See data with test files attached.
<a href="https://github.com/BurntSushi/ripgrep/files/1764089/ripgrep_data_test.tar.gz">ripgrep_data_test.tar.gz</a></p>
<p>attached file is around 15 mb uncompressed, may be possible to reduce the sample further but the original files i was dealing with were 100X.</p>
<p>See README.md and test.sh , i tried with and without --dfa-size-limit</p>
<p>Another minor issue I noticed is that a hint to use --fixed-strings us provided to the user even when using -F already, perhaps this only happens when regex-size-limit is not passed in.</p>
<p>Ideally ripgrep would be faster than grep :-)</p>
<h4>If this is a bug, what are the steps to reproduce the behavior?</h4>
<p>Assumes rg is in the directory or already in the path, then run test.sh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @BurntSushi on 2018-02-27 17:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-02-27 17:59</div>
            <div class="timeline-body"><p>Thanks for the bug report! I was able to reproduce this. It looks like most of the time spent here is just compiling the patterns (since there are &gt;100K). As you pointed out on IRC, using Aho-Corasick here should help quite a bit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">libripgrep</span> added by @BurntSushi on 2018-03-10 13:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "libripgrep" by @BurntSushi on 2018-03-10 13:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">libripgrep</span> removed by @BurntSushi on 2018-08-19 14:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "libripgrep" by @BurntSushi on 2018-08-19 14:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">icebox</span> added by @BurntSushi on 2019-01-27 18:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2019-04-07 23:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:28 UTC
    </footer>
</body>
</html>
