<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Append `--pcre2-version` info to `--version` - BurntSushi/ripgrep #2645</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Append <code>--pcre2-version</code> info to <code>--version</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2645">#2645</a>
        opened by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a>
        on 2023-11-05 22:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ltrzesniewski">@ltrzesniewski</a></div>
            <div class="timeline-body"><p>This is a really minor &quot;feature&quot; request, but I figured it&#x27;s the right time to ask it since you&#x27;re already moving stuff around in #2626 ðŸ™‚</p>
<p>It would be nice to have <em>all</em> the info about ripgrep&#x27;s build be output when <code>--version</code> is called, including the PCRE2 info without having to call <code>--pcre2-version</code> in a second step.</p>
<p>This may require changing the <em>&quot;JIT is available&quot;</em> message a bit to make it clear it&#x27;s about the PCRE2 JIT, or just put everything in a single line such as: <code>PCRE2 10.42 +JIT</code></p>
<p>I wondered why there&#x27;s a separate <code>--pcre2-version</code> option in the first place, then I noticed it returns an error code when PCRE2 is unavailable, so I suppose this option will need to be kept as-is.</p>
<p>I can send a PR if you&#x27;d like after you&#x27;re done with #2626.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-22 00:18</div>
            <div class="timeline-body"><p>Can you say why you want this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a> on 2023-11-22 19:50</div>
            <div class="timeline-body"><p>Mostly because I feel this info is missing in <code>--version</code>: IMO it should provide all the important info about the build. It currently tells you if you enabled the <code>simd-accel</code> feature, but it doesn&#x27;t tell you about <code>pcre2</code>, which is inconsistent. And I wanted an easy way to make sure I didn&#x27;t forget to add <code>--features pcre2</code> in a custom build.</p>
<p>Also, I&#x27;m familiar with PCRE2 and knowing which version is shipped with ripgrep and if the JIT is enabled is a useful info.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-22 21:22</div>
            <div class="timeline-body"><p>All righty. I don&#x27;t feel too strongly about this, and I do mildly fancy having <code>--version</code> be more complete.</p>
<p>This is what the new <code>--version</code> output will look like in ripgrep 14 when PCRE2 is enabled:</p>
<pre><code>$ rg --version
ripgrep 13.0.0 (rev 204a79f168)

features:-simd-accel,+pcre2
simd(compile):+SSE2,-SSSE3,-AVX2
simd(runtime):+SSE2,+SSSE3,+AVX2

PCRE2 10.42 is available (JIT is available)
</code></pre>
<p>And when PCRE2 is not enabled:</p>
<pre><code>$ rg --version
ripgrep 13.0.0 (rev 204a79f168)

features:-simd-accel,-pcre2
simd(compile):+SSE2,-SSSE3,-AVX2
simd(runtime):+SSE2,+SSSE3,+AVX2

PCRE2 is not available in this build of ripgrep.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rollup</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-22 21:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ltrzesniewski">@ltrzesniewski</a> on 2023-11-22 21:42</div>
            <div class="timeline-body"><p>Thanks! ðŸ™‚</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-11-25 20:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:13 UTC
    </footer>
</body>
</html>
