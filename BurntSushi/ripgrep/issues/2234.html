<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>globset: order matches by specificity  - BurntSushi/ripgrep #2234</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>globset: order matches by specificity</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2234">#2234</a>
        opened by <a href="https://github.com/smallstepman">@smallstepman</a>
        on 2022-06-13 09:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/smallstepman">@smallstepman</a></div>
            <div class="timeline-body"><p>I'm building a <code>GlobSet</code> object and using it to match against the file path, however, I'd like to be able to get the results ordered from least to most specific match (aka <a href="https://www.perlmonks.org/?node_id=911956">worst/best match</a>).</p>
<h3>Example</h3>
<pre><code class="language-rust">use globset::{Glob, GlobSetBuilder};

let mut builder = GlobSetBuilder::new();
builder.add(Glob::new(&quot;src/**/foo.rs&quot;)?);
builder.add(Glob::new(&quot;*&quot;)?);
builder.add(Glob::new(&quot;*.rs&quot;)?);
builder.add(Glob::new(&quot;src/bar/baz/foo.rs&quot;)?);
let set = builder.build()?;

// current behaviour
assert_eq!(set.matches(&quot;src/bar/baz/foo.rs&quot;), vec![0, 1, 2, 3]);
// desired behaviour
assert_eq!(set.matches_order_by_specificity(&quot;src/bar/baz/foo.rs&quot;), vec![1, 2, 0, 3]);
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-06-13 12:09</div>
            <div class="timeline-body"><p>I don't think I'll accept this feature request. I don't know if any obvious definition for the &quot;specificity&quot; of a pattern. And even if I did, the implementation would just wind up reordering the globs. Which can be confusing if the caller isn't expecting it. So to implement this, I'd suggest coming up with your own definition and sorting the globs based on it before handing them to this crate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2022-06-13 12:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wontfix</span> added by @BurntSushi on 2022-06-13 12:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:33 UTC
    </footer>
</body>
</html>
