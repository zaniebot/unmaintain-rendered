<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can't add a new type, keep getting ''Invalid arguments&quot;. - BurntSushi/ripgrep #15</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Can't add a new type, keep getting ''Invalid arguments&quot;.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/15">#15</a>
        opened by <a href="https://github.com/smaximov">@smaximov</a>
        on 2016-09-23 15:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/smaximov">@smaximov</a></div>
            <div class="timeline-body"><p>Trying to add a new type results in the &quot;Invalid arguments.&quot; error followed by the usage message.</p>
<p>I have tried the example from README (<code>rg --type-add 'foo:*.foo,*.foobar'</code>) and some other patterns.</p>
<p>My environment:</p>
<ul>
<li>Fedora 24 (x86_64).</li>
<li>Rust (tried both):<ul>
<li>rustc 1.13.0-nightly (4f9812a59 2016-09-21)</li>
<li>rustc 1.11.0 (9b21dcd6a 2016-08-15)</li>
</ul>
</li>
<li>ripgrep: 0.1.16</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-23 15:45</div>
            <div class="timeline-body"><p>Could you show precisely the command you're running and the full output?</p>
<p>I wonder if I messed up the docs. It looks like comma separated globs aren't supported, but they probably should be.</p>
<p>Using <code>--type-add</code> for each glob should do as a workaround for now. (You the globs are additive, so you can have multiple <code>--type-add</code> flags for the same type.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @BurntSushi on 2016-09-23 15:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/smaximov">@smaximov</a> on 2016-09-23 15:52</div>
            <div class="timeline-body"><p>I have just built ripgrep using the stable rust (rg was bumped to 0.1.17) with no effect.</p>
<blockquote>
<p>Could you show precisely the command you're running and the full output?</p>
</blockquote>
<p>Sure:</p>
<pre><code>$ rustup show                       
Default host: x86_64-unknown-linux-gnu

installed toolchains
--------------------

stable-x86_64-unknown-linux-gnu (default)
nightly-x86_64-unknown-linux-gnu

active toolchain
----------------

stable-x86_64-unknown-linux-gnu (default)
rustc 1.11.0 (9b21dcd6a 2016-08-15)
$ rg --version
0.1.17
$ rg --type-add 'foo:*.foo,*.foobar'
Invalid arguments.

Usage: rg [options] -e PATTERN ... [&lt;path&gt; ...]
       rg [options] &lt;pattern&gt; [&lt;path&gt; ...]
       rg [options] --files [&lt;path&gt; ...]
       rg [options] --type-list
       rg --help
       rg --version
$ rg --type-add 'foo:*.foo'         
Invalid arguments.

Usage: rg [options] -e PATTERN ... [&lt;path&gt; ...]
       rg [options] &lt;pattern&gt; [&lt;path&gt; ...]
       rg [options] --files [&lt;path&gt; ...]
       rg [options] --type-list
       rg --help
       rg --version
</code></pre>
<p>I use ZSH, but I've also tried bash to make sure it's not a shell issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/smaximov">@smaximov</a> on 2016-09-23 16:05</div>
            <div class="timeline-body"><blockquote>
<p>Using <code>--type-add</code> for each glob should do as a workaround for now.</p>
</blockquote>
<p>Does adding a single glob at a time work for you? If it does, I'll try to debug this issue tomorrow with my setup.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-23 16:41</div>
            <div class="timeline-body"><p>Running <code>rg --type-add 'foo:*.foo'</code> is indeed invalid. You need to actually provide a pattern to search. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hodavidhara">@hodavidhara</a> on 2016-09-23 17:21</div>
            <div class="timeline-body"><p>I haven't been able to add a type either. Tried a bunch of stuff:</p>
<pre><code>$ rg --type-add 'ts:*.ts,*.tsx'
Invalid arguments.
$ rg --type-add 'ts:*.ts'
Invalid arguments.
$ rg --type-add ts *.ts
invalid definition (format is type:glob, e.g., html:*.html)
$ rg --type-add ts:*.ts
Invalid arguments.
</code></pre>
<p>I'm on os X el capitan (10.11.6) and Installed it with the homebrew command in the readme.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-23 17:29</div>
            <div class="timeline-body"><p>You need to provide a pattern to search. Ripgrep doesn't save any state or config anywhere. --type-add only applies to the current command.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hodavidhara">@hodavidhara</a> on 2016-09-23 17:44</div>
            <div class="timeline-body"><p>Ahh, I guess I misunderstood from the documentation. I thought it would add it to the list of types returned by <code>rg --type-list</code> to be used with -t and -T in the future. So if I understand correctly <code>rg --type-add 'ts:*.ts' -tts foo</code> would be the same as <code>rg foo -g *.ts</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-23 17:45</div>
            <div class="timeline-body"><p>@hodavidhara That sounds right yes! I'll work on improving the docs. :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/smaximov">@smaximov</a> on 2016-09-23 23:04</div>
            <div class="timeline-body"><blockquote>
<p>Ripgrep doesn't save any state or config anywhere. --type-add only applies to the current command.</p>
</blockquote>
<p>I indeed expected <code>--type-add</code> to persist the new type to some sort of config , not to be just a modifier for the search (though it would be more useful that way, IMHO). Thanks for the clarification!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-24 02:31</div>
            <div class="timeline-body"><p>My kinda-sorta intention is to see how far we can get with configuring &quot;default&quot; options just by using aliases. So for example, <code>alias rg=&quot;--type-add 'foo:*.foo'&quot;</code>. I agree that this can get a bit unwieldy if you have a lot of custom types, but I also kind of expect to be pretty lenient with putting types into <code>rg</code> itself (ya know, good defaults and all).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/smaximov">@smaximov</a> on 2016-09-24 02:52</div>
            <div class="timeline-body"><blockquote>
<p>My kinda-sorta intention is to see how far we can get with configuring &quot;default&quot; options just by using aliases. So for example, <code>alias rg=&quot;--type-add 'foo:*.foo'&quot;</code></p>
</blockquote>
<p>Yes, that use-case makes sense, I haven't thought about it before.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cldwalker">@cldwalker</a> on 2016-09-24 14:25</div>
            <div class="timeline-body"><p>I also was confused and assumed custom types persisted. Seeing --type-add, --type-clear and --type-list, I assumed add persisted since there was a clear operation</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2016-09-24 22:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:41:36 UTC
    </footer>
</body>
</html>
