<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>respect hidden file attribute - BurntSushi/ripgrep #1154</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>respect hidden file attribute</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1154">#1154</a>
        opened by <a href="https://github.com/ghost">@ghost</a>
        on 2019-01-08 12:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ghost">@ghost</a></div>
            <div class="timeline-body"><p>currently RipGrep considers a hidden file something starting with <code>.</code>, which is a
long time Linux convention</p>
<p>https://github.com/BurntSushi/ripgrep/blob/c3db8db93d048be6e4bc62c2d5bdf0e2fee65950/ignore/src/pathutil.rs#L16-L24</p>
<p>However the Windows convention of the hidden file attribute is not recognized by
RipGrep. So if you have some files on Windows with the hidden file attribute,
RipGrep will always show them regardless, unless they also happen to start with <code>.</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-01-08 12:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-01-08 12:44</div>
            <div class="timeline-body"><p>Seems reasonable to me. It looks like we need to check whether the <a href="https://docs.rs/winapi-util/0.1.1/x86_64-pc-windows-msvc/winapi_util/file/struct.Information.html#method.file_attributes">file attributes</a> contain <code>FILE_ATTRIBUTE_HIDDEN</code>.</p>
<p>The one concern I have here is that if this is done naively, it will introduce an additional stat call for every file ripgrep looks at, by default. We should try to avoid that by looking for an existing stat call and reusing its information.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ghost">@ghost</a> on 2019-01-08 13:08</div>
            <div class="timeline-body"><p>@BurntSushi thanks for fast response</p>
<p>it probably goes without saying, but i am of that opinion that even if this is
implemented it should <strong>not</strong> be the default, as it seems we are talking about
a performance hit</p>
<p>users should need to opt into this, with the default remaining the faster
option. thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-01-27 17:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:08 UTC
    </footer>
</body>
</html>
