<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>compiling with simd-accel feature is broken due to removal of stdsimd feature in nightly breaking the packed_simd crate - BurntSushi/ripgrep #2732</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>compiling with simd-accel feature is broken due to removal of stdsimd feature in nightly breaking the packed_simd crate</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2732">#2732</a>
        opened by <a href="https://github.com/R-Goc">@R-Goc</a>
        on 2024-02-10 23:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/R-Goc">@R-Goc</a></div>
            <div class="timeline-body">Please tick this box to confirm you have reviewed the above.
<ul>
<li>[X] I have a different issue.</li>
</ul>
What version of ripgrep are you using?
<p>14.1</p>
How did you install ripgrep?
<p>Cargo
cargo +nightly install --force --profile &quot;release&quot; --features &#x27;simd-accel&#x27; ripgrep</p>
What operating system are you using ripgrep on?
<p>Windows, though it affects all systems</p>
Describe your bug.
<p>The crate fails to compile with feature &#x27;simd-accel&#x27; due to feature stdsimd being removed which broke packed_simd crate used for the &#x27;simd-accel&#x27; feature. No impact on ripgrep otherwise. Only compiling with the feature isn&#x27;t possible.
The commit that broke packed-simd is: https://github.com/rust-lang/rust/commit/ea37e8091fe87ae0a7e204c034e7d55061e56790
Relevant tracking issues: <a href="https://github.com/rust-lang/rust/issues/27731">rust-lang/rust#27731</a> and <a href="https://github.com/rust-lang/rust/issues/48556">rust-lang/rust#48556</a></p>
What are the steps to reproduce the behavior?
<p>Installing or compiling ripgrep with &#x27;simd-accel&#x27;  for example with:
cargo +nightly install --force --profile &quot;release&quot; --features &#x27;simd-accel&#x27; ripgrep
target-cpu=native also has to be set.</p>
What is the actual behavior?
<p>cargo +nightly install --force --profile &quot;release&quot; --features &#x27;simd-accel&#x27; ripgrep
Updating crates.io index
Installing ripgrep v14.1.0
Updating crates.io index
Downloaded packed_simd v0.3.9
Downloaded num-traits v0.2.18
Downloaded 2 crates (150.3 KB) in 0.58s
Compiling memchr v2.7.1
Compiling winapi v0.3.9
Compiling libm v0.2.8
Compiling regex-syntax v0.8.2
Compiling autocfg v1.1.0
Compiling packed_simd v0.3.9
Compiling log v0.4.20
Compiling cfg-if v1.0.0
Compiling serde v1.0.196
Compiling crossbeam-utils v0.8.19
Compiling num-traits v0.2.18
Compiling aho-corasick v1.1.2
Compiling grep-matcher v0.1.7
Compiling serde_json v1.0.113
Compiling itoa v1.0.10
Compiling ryu v1.0.16
Compiling memmap2 v0.9.4
Compiling crossbeam-epoch v0.9.18
Compiling anyhow v1.0.79
Compiling winapi-util v0.1.6
Compiling crossbeam-deque v0.8.5
Compiling ripgrep v14.1.0
Compiling termcolor v1.4.1
Compiling same-file v1.0.6
Compiling walkdir v2.4.0
Compiling textwrap v0.16.0
Compiling lexopt v0.3.0
Compiling regex-automata v0.4.5
error[E0635]: unknown feature <code>stdsimd</code>
--&gt; .cargo\registry\src\index.crates.io-6f17d22bba15001f\packed_simd-0.3.9\src\lib.rs:219:5
|
219 |     stdsimd,
|     ^^^^^^^</p>
<p>For more information about this error, try <code>rustc --explain E0635</code>.
error: could not compile <code>packed_simd</code> (lib) due to 1 previous error</p>
What is the expected behavior?
<p>should compile with the feature enabled.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-02-10 23:09</div>
            <div class="timeline-body"><p>I don&#x27;t think this needs to be tracked here. It&#x27;s a nightly feature anyway and will get fixed once packed_simd is fixed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-02-10 23:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:13 UTC
    </footer>
</body>
</html>
