<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`--hidden` doesn't show in zsh completion - BurntSushi/ripgrep #1818</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>--hidden</code> doesn&#x27;t show in zsh completion</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1818">#1818</a>
        opened by <a href="https://github.com/fvictorio">@fvictorio</a>
        on 2021-03-11 14:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/fvictorio">@fvictorio</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<pre><code>ripgrep 12.1.1 (rev a6d05475fb)
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)
</code></pre>
How did you install ripgrep?
<p>Local build</p>
What operating system are you using ripgrep on?
<p>Ubuntu 20.04</p>
Describe your bug.
<p>I added the <code>_rg</code> completion script to my <code>$fpath</code>. When I do <code>rg --h&lt;tab&gt;</code>, the only suggestions I get are <code>--heading</code> and <code>--help</code>, no <code>--hidden</code>.</p>
What is the expected behavior?
<p><code>--hidden</code> should show up.</p>
<hr>
<p>I think that the fact that the option being hidden is... hidden is not a coincidence. I tried making this change:</p>
<pre><code>     + &#x27;(hidden)&#x27; # Hidden-file options
-    &#x27;--hidden[search hidden files and directories]&#x27;
+    &#x27;--\hidden[search hidden files and directories]&#x27;
     $no&quot;--no-hidden[don&#x27;t search hidden files and directories]&quot;
</code></pre>
<p>And the problem went away. But this was pure guesswork! I can&#x27;t find a proper reference in zsh docs, nor I understand enough of zsh completion to explain why this fixes it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-03-11 14:21</div>
            <div class="timeline-body"><p>What version of zsh are you using? I can&#x27;t reproduce your problem. <code>--hidden</code> shows up as a completion option for me. My zsh version:</p>
<pre><code>$ zsh --version
zsh 5.8 (x86_64-pc-linux-gnu)
</code></pre>
<p>cc @okdana</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fvictorio">@fvictorio</a> on 2021-03-11 14:52</div>
            <div class="timeline-body"><p>Same one:</p>
<pre><code>zsh 5.8 (x86_64-ubuntu-linux-gnu)
</code></pre>
<p>This is my <code>setopt</code> just in case:</p>
<pre><code>alwaystoend
autocd
autopushd
completeinword
extendedglob
extendedhistory
noflowcontrol
histexpiredupsfirst
histignoredups
histignorespace
histverify
incappendhistory
interactive
interactivecomments
longlistjobs
monitor
promptsubst
pushdignoredups
pushdminus
shinstdin
zle
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fvictorio">@fvictorio</a> on 2021-03-11 14:55</div>
            <div class="timeline-body"><p>Tried installing <code>zsh</code> in a docker container and I cannot reproduce the issue. Weird. I will assume this has something to do with my setup and close this. I will comment here if by any chance I find the reason.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/fvictorio">@fvictorio</a> on 2021-03-11 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fvictorio">@fvictorio</a> on 2021-03-11 14:58</div>
            <div class="timeline-body"><p>Ugh, I&#x27;m such an idiot, I already had aliased <code>rg</code> to <code>rg -S --hidden</code>. Sorry for wasting your time :sweat_smile:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-03-11 15:03</div>
            <div class="timeline-body"><p>Ah nice. Thanks for sharing the solution!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-03-11 15:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:11 UTC
    </footer>
</body>
</html>
