<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support borowing data in `ignore`s `WalkParallel` - BurntSushi/ripgrep #1410</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support borowing data in <code>ignore</code>s <code>WalkParallel</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1410">#1410</a>
        opened by <a href="https://github.com/epage">@epage</a>
        on 2019-10-27 01:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a></div>
            <div class="timeline-body"><p>I&#x27;d prefer to have my <code>WalkParallel</code> closures take references.</p>
<p>In general, this would improve the usability of <code>WalkParallel</code> because it takes a lot of work to change code from a trivial case to a non-trivial case (getting everything in <code>Arc</code>. etc). or from serial to parallel.</p>
<p>The way this is impacting me is that this will simplify my code because I can share a lot more code between my parallel (throwing everything in <code>Arc</code>) and non-parallel (directly using references).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2019-10-27 01:38</div>
            <div class="timeline-body"><p>I started implementing #469 to make it easier for me to work through the errors.  I&#x27;m at the point of dealing with the threads.  The way the threads are used, Rust can&#x27;t know that the threads will all join by the end of the function call, requiring a <code>&#x27;static</code> lifetime.  Using <code>crossbeam</code> for scoped-threads should make this problem go away.</p>
<p>I wanted to check-in before going too much further.  It looks like <a href="https://docs.rs/crossbeam-utils/0.6.6/crossbeam_utils/thread/fn.scope.html"><code>scope</code></a> is in <code>crossbeam-utils</code> which is a dependency of <code>crossbeam-channels</code>, so this shouldn&#x27;t add any new dependency to the full dependency tree.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2020-02-17 22:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:09 UTC
    </footer>
</body>
</html>
