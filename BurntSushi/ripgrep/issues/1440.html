<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`--files-with-matches` has a misleading name - BurntSushi/ripgrep #1440</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>--files-with-matches</code> has a misleading name</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/1440">#1440</a>
        opened by <a href="https://github.com/safety-tom">@safety-tom</a>
        on 2019-12-05 05:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/safety-tom">@safety-tom</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<pre><code>ripgrep 0.10.0
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)
</code></pre>
What operating system are you using ripgrep on?
<p>MacOS 10.14.6</p>
Describe your question, feature request, or bug.
<p>I frequently struggle to recall the name of the <code>--files-with-matches</code> option, so the problem is either with me or with ripgrep.</p>
Source of the confusion
<p>If asked to describe what &quot;*grep&quot; does, most people would say it&#x27;s used to search through <strong>files</strong>.
Therefore, to the uninitiated eye, the names <code>--files-with-matches</code>/<code>--files-without-matches</code>  might seem to describe the <em>nature</em> of the search, as in &quot;I&#x27;m interested in files with or without matches&quot;. This isn&#x27;t exactly the case.</p>
<ol>
<li><code>--files-with-matches</code> does two things: 1) search for files matching the pattern (as expected) 2) outputs the file <strong>name</strong> (as opposed to outputting the actual match, for example). As such, this option doesn&#x27;t only describe the nature of the search but also the <em>output</em> of the command, with a more descriptive name being <code>--only-print-the-names-of-the-files-containing-matches</code>.</li>
<li><code>--files-without-matches</code> does just one thing: output the file names not containing the pattern. This option name can be considered descriptive if we accept there&#x27;s no reasonable alternative in terms of output (what else could it do except print the file name?). But we can also consider it misleading because there&#x27;s no clear indication of what the output is going to be without referring to the man page.</li>
</ol>
<p>In order to better convey what these options do, I feel a more appropriate name would have been something like <code>--filename-with-matches</code> (perhaps complemented by <code>--filename-without-matches</code> if we wanted to keep these two grouped in the docs). The essential improvement is the usage of &quot;filename&quot; instead of &quot;file&quot;, as in &quot;we search through files and we print file names&quot;.
This would also be consistent with other options named <code>--with-filename</code> and <code>--no-filename</code>.</p>
<p>Other options:</p>
<ul>
<li><code>--only-filenames</code>/ <code>--only-filenames-without-matches</code></li>
<li><code>--only-print-filenames</code></li>
<li><code>--only-print-filepaths</code>.</li>
</ul>
<p>If nothing else, I hope I will at least find this option name easier to remember from now on.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-12-05 12:23</div>
            <div class="timeline-body"><p>I appreciate the careful thought you&#x27;ve given to this, but:</p>
<ul>
<li>ripgrep <em>always</em> searches for files matching a pattern (other than in special modes, such as with <code>rg --files</code> and <code>rg --type-list</code>). Therefore, flags like <code>--files-with-matches</code> are really only about (2), not (1), since everything does (1).</li>
<li>I personally feel like &quot;file&quot; is a good enough name here.</li>
<li>Perhaps most importantly---and while not a rigorous policy---both <code>--files-with-matches</code> and <code>--files-without-match</code> (note: it&#x27;s not <code>--files-without-matches</code>) are both flags provided by GNU grep. Therefore, with the current names, ripgrep is consistent with a long standing precedent.</li>
<li>ripgrep has had these flags for quite some time, and changing them at this point would be an unacceptable breaking change.</li>
<li>In general, ripgrep already has too many flags, and to avoid having multiple names meaning the same thing, I try to avoid adding aliases for existing flags.</li>
</ul>
<p>So, I thank you for the careful analysis, but I don&#x27;t think there&#x27;s enough here to overrule the status quo.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-12-05 12:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-12-05 12:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/safety-tom">@safety-tom</a> on 2019-12-05 13:34</div>
            <div class="timeline-body"><p>You&#x27;re right about <code>--files-without-matches</code>, I had missed this detail. And I agree changing the existing flags isn&#x27;t practical. Thank you for the work on rg.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:09 UTC
    </footer>
</body>
</html>
