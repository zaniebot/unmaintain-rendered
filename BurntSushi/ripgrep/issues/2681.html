<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Completion Files + Manpage to Source Repository  - BurntSushi/ripgrep #2681</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add Completion Files + Manpage to Source Repository</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2681">#2681</a>
        opened by <a href="https://github.com/ghost">@ghost</a>
        on 2023-12-11 04:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ghost">@ghost</a></div>
            <div class="timeline-body">Describe your feature request
<p>Hi, I am a package contributor to Guix and I recently submitted a patch series to <a href="https://issues.guix.gnu.org/67757#19">update ripgrep to version 14.0.3</a>. I noted the recent change to how shell completions and the manpage was generated via the ripgrep binary itself instead of using an external build tool like asciidoc.</p>
<p>Unfortunately, this presents a challenge for Guix because it makes it virtually impossible to cross-compile ripgrep since the target binary (that being ripgrep) has to be run in order to generate those files.</p>
<p>A good solution to this would be to simply have the generated completion files and manpage already within the actual source code repository itself. If this is already the case, feel free to point me to it and close this issue. If not, this would be a very welcome addition in the next point release or so as it would resolve this conundrum entirely and allow us (at Guix) to have reproducible builds with cross-compilation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-12-11 05:11</div>
            <div class="timeline-body"><blockquote>
<p>it makes it virtually impossible to cross-compile ripgrep since the target binary (that being ripgrep) has to be run in order to generate those files.</p>
</blockquote>
<p>ripgrep&#x27;s CI also does cross compilation, but its still able to generate man pages and completion files via qemu. Why can&#x27;t you do that?</p>
<p>Another option is to download one of the release artifacts. Those include the man page and completion files.</p>
<p>I don&#x27;t want to add these files to the repository because they risk getting out of date. It&#x27;s also not clear to me why Guix has a problem with this, but nobody else seems to.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ghost">@ghost</a> on 2023-12-11 20:59</div>
            <div class="timeline-body"><blockquote>
<p>Why can&#x27;t you do that...It&#x27;s also not clear to me why Guix has a problem with this.</p>
</blockquote>
<p>I was talking to some folks on Guix IRC who informed me of a potential issue with cross-comp. I should have mentioned that I&#x27;m still investigating the issue on my end. I was just eager to see what the thoughts were about the possibility of including these files in the source repo (which admittedly would make it a lot easier for me as a packager).</p>
<blockquote>
<p>Another option is to download one of the release artifacts. Those include the man page and completion files.</p>
</blockquote>
<p>Downloading the release artifacts would not be an option due to the rules of Guix upstream, but it&#x27;s good to know that cross-comp is something on my end to improve.</p>
<p>Thank you for such a speedy reply and congrats on the new major release.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ghost">@ghost</a> on 2023-12-11 20:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-12-11 21:27</div>
            <div class="timeline-body"><p>Thanks! Let me know if it doesn&#x27;t work as-is. I&#x27;m still happy to brainstorm other ideas. Another idea is to provide a full source archive with each release that you would download instead of cloning the repo. But I confess it is difficult to brainstorm without knowing what the rules are.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:13 UTC
    </footer>
</body>
</html>
