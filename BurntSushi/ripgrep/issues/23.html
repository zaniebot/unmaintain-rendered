<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Option to ignore git submodules - BurntSushi/ripgrep #23</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Option to ignore git submodules</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/23">#23</a>
        opened by <a href="https://github.com/Mmdixon">@Mmdixon</a>
        on 2016-09-23 18:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Mmdixon">@Mmdixon</a></div>
            <div class="timeline-body"><p><code>git grep</code> by default does not search for files within a git submodule, even though they appear like normal directories.
<code>rg</code> on the other hand will by default recurse into these directories.</p>
<p>Since <code>.gitignore</code> is supported, it would be convenient to support how git searches when there are submodules. (Either by default and turn off with one of the <code>-u</code> flags, or provide some other flag besides explicitly black listing the submodule folders.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-24 02:17</div>
            <div class="timeline-body"><p>How can <code>rg</code> detect whether a directory is a submodule or not?</p>
<p>(Running a <code>git</code> command is not something I want to do.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-25 01:52</div>
            <div class="timeline-body"><p>I&#x27;d like to close this. If there&#x27;s a simple way to detect submodules that doesn&#x27;t sacrifice performance, I might be willing to support that. One thing I&#x27;m worried about is that I personally don&#x27;t have much experience with submodules, so I don&#x27;t know whether it&#x27;s the Right Thing to ignore them or not. My suspicion is yes, it is right, because I tend to see them used as a way to vendor dependencies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mengelbrecht">@mengelbrecht</a> on 2016-09-25 02:43</div>
            <div class="timeline-body"><p>If it is going to be implemented please make it optional. Internal libraries shared between multiple projects can also be included as submodules. In that case I want to search them too e.g. when performing a global refactoring.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-09-25 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Mmdixon">@Mmdixon</a> on 2016-09-26 13:34</div>
            <div class="timeline-body"><p>@BurntSushi there will be a <code>.gitmodules</code> file with a list of the following format:</p>
<pre><code>[submodule &quot;myName&quot;]
    path = src/myName
    url = someUrl
# repeat
</code></pre>
<p>Here, the <code>path</code> has the folder <code>src/myName</code> the start of the submodule (which is another git repository).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Kha">@Kha</a> on 2016-09-26 13:43</div>
            <div class="timeline-body"><p>More importantly, there should be a <code>.git</code> <em>file</em> in the submodule workdir. So a general option to ignore nested repositories should cover submodules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Mmdixon">@Mmdixon</a> on 2016-09-26 14:06</div>
            <div class="timeline-body"><p>ah that is true too,  a <code>.git</code> file instead of folder in the submodule directory.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-06 19:08</div>
            <div class="timeline-body"><p>I think the <code>.git</code> file thing is a newer feature of <code>git</code> though?</p>
<p>I think I&#x27;d like to ask that you use <code>.ignore</code> files to explicitly skip searching submodule directories.</p>
<p>With that said, if someone submitted a PR to the <code>ignore</code> crate that added support for ignoring submodules (which was disabled by default), then I&#x27;d be OK adding a new flag to ripgrep to enable that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-06 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-06 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-06 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-19 14:55</div>
            <div class="timeline-body"><p>I&#x27;m going to close this as part of a process of culling the issue tracker to things that are likely to be implemented. I think my previous comment still stands, but I would still rather not add a new flag and instead just insist that this be part of using ripgrep&#x27;s <code>.ignore</code> file functionality.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2016-11-19 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BatmanAoD">@BatmanAoD</a> on 2023-12-27 00:58</div>
            <div class="timeline-body"><p>Would you still be open to a PR on the <code>ignore</code> crate to support ignoring nested git directories?</p>
<blockquote>
<p>I think the <code>.git</code> file thing is a newer feature of <code>git</code> though?</p>
</blockquote>
<p>If I understand correctly, the idea is just to check for the existence of the standard <code>.git/</code> directory containing <code>git</code> metadata, so not a new feature of <code>git</code> at all. I.e., the check would be something like:</p>
<ul>
<li>when searching in a git repository rooted at <code>/repo/root</code>,</li>
<li>if <code>/repo/root/foo/bar/.git/</code> exists,</li>
<li>ignore all of <code>/repo/root/foo/bar</code>.</li>
</ul>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:00 UTC
    </footer>
</body>
</html>
