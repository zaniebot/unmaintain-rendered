<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> ripgrep 13.0.0 never exits when spawned in neovim - BurntSushi/ripgrep #2143</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ripgrep 13.0.0 never exits when spawned in neovim</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2143">#2143</a>
        opened by <a href="https://github.com/Azeirah">@Azeirah</a>
        on 2022-02-11 23:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Azeirah">@Azeirah</a></div>
            <div class="timeline-body">What version of ripgrep are you using?
<p>13.0.0</p>
How did you install ripgrep?
<p>Followed the recent installation guidelines from the readme.</p>
<pre><code>$ curl -LO https://github.com/BurntSushi/ripgrep/releases/download/13.0.0/ripgrep_13.0.0_amd64.deb
$ sudo dpkg -i ripgrep_13.0.0_amd64.deb
</code></pre>
What operating system are you using ripgrep on?
<p>Ubuntu</p>
<pre><code>$ uname -a
Linux ________ 5.13.0-28-generic #31~20.04.1-Ubuntu SMP Wed Jan 19 14:08:10 UTC 2022 x86_64 x86_64 x86_64 GNU/Linux
</code></pre>
Describe your bug.
<p>When using neovim to spawn a ripgrep process, it hangs indefinitely.
This is the case for version 13.0.0, but NOT for version 12.0.1, the latter of which functions as expected.</p>
What are the steps to reproduce the behavior?
<p>I assume familiarity with neovim, although I wrote these reproduction steps with additional detail for those who&#x27;re less familiar with neovim.</p>
<ol>
<li>Install the <code>plenary</code> plugin in neovim. https://github.com/nvim-lua/plenary.nvim (easiest is to use a package manager such as <a href="https://github.com/wbthomason/packer.nvim">packer</a>)</li>
<li>Execute the following command. That is, press <code>:</code> and type in everything after the <code>:</code> below. Press enter to execute.</li>
</ol>
<p><code>:lua require(&#x27;plenary.job&#x27;):new({command=&#x27;rg&#x27;,args={&#x27;some&#x27;}}).sync()</code></p>
<p>Using version 13.0.0, this will fail with a timeout error, whereas with version 12.0.1 it will succeed as expected.</p>
What is the actual behavior?
<p>Ripgrep does not exit at all.</p>
What is the expected behavior?
<p>Ripgrep should exit, possibly similar to version 12.0.1</p>
What else have you tried?
<p>I have tried the reproduction steps with both versions 6.1 and 6.0 of neovim, this does fix the issue.</p>
<p>I have also tried the reproduction steps in both the default shell in ubuntu (gnome-shell I believe?) and the kitty shell. Again, this does not influence the bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot; ripgrep 13 never exits when spawned in neovim&quot; to &quot; ripgrep 13.0.0 never exits when spawned in neovim&quot; by <a href="https://github.com/Azeirah">@Azeirah</a> on 2022-02-11 23:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-02-12 00:01</div>
            <div class="timeline-body"><p>Duplicate of #1892.</p>
<p>See this comment in particular: <a href="https://github.com/BurntSushi/ripgrep/issues/1892">BurntSushi/ripgrep#1892</a>#issuecomment-860270717</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-02-12 00:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-02-12 00:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:12 UTC
    </footer>
</body>
</html>
