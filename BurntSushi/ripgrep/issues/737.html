<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>--replace not working as expected - BurntSushi/ripgrep #737</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>--replace not working as expected</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/737">#737</a>
        opened by <a href="https://github.com/leeoniya">@leeoniya</a>
        on 2018-01-08 17:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/leeoniya">@leeoniya</a></div>
            <div class="timeline-body"><p>Hi,</p>
<p>I&#x27;m trying to process some webserver access logs with the following format:</p>
<pre><code>8.8.8.8 - - [07/Jan/2018:06:25:10 -0600] &quot;GET /some/url HTTP/1.1&quot; 200 25861 &quot;-&quot; &quot;Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)&quot;
</code></pre>
<p>what i want as output is:</p>
<pre><code>8.8.8.8, &quot;Mozilla/5.0 (Linux; Android 6.0.1; Nexus 5X Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/41.0.2272.96 Mobile Safari/537.36 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)&quot;
</code></pre>
<p>this does not seem to be working:</p>
<pre><code>rg -N --no-filename &quot;^([0-9\.]+).+(\&quot;Mozilla.*)$&quot; --replace &#x27;$1, $2&#x27; ./logs
</code></pre>
<p>what i get as outputs is:</p>
<pre><code>&#x27;8.8.8.8,
</code></pre>
<p>(Windows 10)</p>
<p>any help would be appreciated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2018-01-08 18:02</div>
            <div class="timeline-body"><p>Works for me on UNIX. Are you using <code>cmd</code> or PowerShell? AFAIK, <code>cmd</code> has some bizarre escaping rules, like it wants <code>^</code> instead of <code>\</code>. Not sure about PS. Try single-quotes maybe?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/leeoniya">@leeoniya</a> on 2018-01-08 18:09</div>
            <div class="timeline-body"><p>ok, thx. it worked in powershell:</p>
<pre><code>.\rg -o -N --no-filename &quot;^([0-9\.]+).+(\&quot;Mozilla.*)$&quot; --replace &#x27;$1, $2&#x27; ./logs
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/leeoniya">@leeoniya</a> on 2018-01-08 18:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:05 UTC
    </footer>
</body>
</html>
