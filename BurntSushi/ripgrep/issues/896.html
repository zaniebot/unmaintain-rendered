<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Line number not correct - BurntSushi/ripgrep #896</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Line number not correct</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/896">#896</a>
        opened by <a href="https://github.com/kzhui125">@kzhui125</a>
        on 2018-04-25 06:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kzhui125">@kzhui125</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>https://github.com/BurntSushi/ripgrep/releases/download/0.8.1/ripgrep-0.8.1-x86_64-pc-windows-msvc.zip</p>
<p>ripgrep 0.8.1 (rev c8e9f25b85)
-SIMD -AVX</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>Win10</p>
<h4>Bug</h4>
<ol>
<li>download https://github.com/kzhui125/test/blob/master/clarknet_access_log_Sep4.gz and uncompress</li>
<li>rg.exe --context 2 -E UTF8 --color never --heading --line-number -F &quot;20:00:00&quot; &quot;C:\test&quot;</li>
<li>line number not correct, should be 170824</li>
</ol>
<pre><code>170821-civileng2-kfps-dynamic-185.Stanford.EDU - - [04/Sep/1995:19:59:59 -0400] &quot;GET /pub/job/vk/kathy.jpg HTTP/1.0&quot; 200 7450
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2018-04-25 07:02</div>
            <div class="timeline-body"><pre><code>170821-civileng2-kfps-dynamic-185.Stanford.EDU - - [04/Sep/1995:19:59:59 -0400] &quot;GET /pub/job/vk/kathy.jpg HTTP/1.0&quot; 200 7450
170822-d19-ts0.amug.org - - [04/Sep/1995:19:59:59 -0400] &quot;GET /pub/alweiner/wavy.gif HTTP/1.0&quot; 304 -
170823:d19-ts0.amug.org - - [04/Sep/1995:20:00:00 -0400] &quot;GET /pub/alweiner/note.gif HTTP/1.0&quot; 304 -
170824:dd11-047.compuserve.com - - [04/Sep/1995:20:00:00 -0400] &quot;GET /pub/atomicbk/catalog/home.gif HTTP/1.0&quot; 200 813
170825:d19-ts0.amug.org - - [04/Sep/1995:20:00:00 -0400] &quot;GET /pub/alweiner/work/_0303V.gif HTTP/1.0&quot; 200 490
170826-128.220.23.32 - - [04/Sep/1995:20:00:01 -0400] &quot;GET /pub/atomicbk/images/nudistbk.gif HTTP/1.0&quot; 404 207
170827-www-c4.proxy.aol.com - - [04/Sep/1995:20:00:01 -0400] &quot;GET /pub/atomicbk/catalog/mini.gif HTTP/1.0&quot; 304 -
</code></pre>
<p><code>170821</code> is a context line, as indicated by the following <code>-</code></p>
<p><code>170823</code> through <code>170825</code> are match lines, as indicated by the following <code>:</code></p>
<p>Seems like it's doing what it's supposed to, unless you mean that that line you pasted is literally the only output you get</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kzhui125">@kzhui125</a> on 2018-04-25 07:40</div>
            <div class="timeline-body"><p>@okdana  this line is 170824's line in the file, not 170821</p>
<pre><code>civileng2-kfps-dynamic-185.Stanford.EDU - - [04/Sep/1995:19:59:59 -0400] &quot;GET /pub/job/vk/kathy.jpg HTTP/1.0&quot; 200 7450
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/okdana">@okdana</a> on 2018-04-25 07:53</div>
            <div class="timeline-body"><p>That's not what i see:</p>
<pre><code>% cat -n clarknet_access_log_Sep4 | sed -n '170821,170827p'
170821  civileng2-kfps-dynamic-185.Stanford.EDU - - [04/Sep/1995:19:59:59 -0400] &quot;GET /pub/job/vk/kathy.jpg HTTP/1.0&quot; 200 7450
170822  d19-ts0.amug.org - - [04/Sep/1995:19:59:59 -0400] &quot;GET /pub/alweiner/wavy.gif HTTP/1.0&quot; 304 -
170823  d19-ts0.amug.org - - [04/Sep/1995:20:00:00 -0400] &quot;GET /pub/alweiner/note.gif HTTP/1.0&quot; 304 -
170824  dd11-047.compuserve.com - - [04/Sep/1995:20:00:00 -0400] &quot;GET /pub/atomicbk/catalog/home.gif HTTP/1.0&quot; 200 813
170825  d19-ts0.amug.org - - [04/Sep/1995:20:00:00 -0400] &quot;GET /pub/alweiner/work/_0303V.gif HTTP/1.0&quot; 200 490
170826  128.220.23.32 - - [04/Sep/1995:20:00:01 -0400] &quot;GET /pub/atomicbk/images/nudistbk.gif HTTP/1.0&quot; 404 207
170827  www-c4.proxy.aol.com - - [04/Sep/1995:20:00:01 -0400] &quot;GET /pub/atomicbk/catalog/mini.gif HTTP/1.0&quot; 304 -
</code></pre>
<p>It might be that whatever tool you're using to get those line numbers is confused by the fact that this file contains some carriage returns (<code>\r</code>); <code>rg</code> doesn't treat those specially</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kzhui125">@kzhui125</a> on 2018-04-25 08:03</div>
            <div class="timeline-body"><p>@okdana thanks! makes sense</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kzhui125 on 2018-04-25 08:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @BurntSushi on 2018-04-25 11:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:31 UTC
    </footer>
</body>
</html>
