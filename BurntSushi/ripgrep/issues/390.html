<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add space after linenumber - BurntSushi/ripgrep #390</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add space after linenumber</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/390">#390</a>
        opened by <a href="https://github.com/zwieberl">@zwieberl</a>
        on 2017-03-02 08:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zwieberl">@zwieberl</a></div>
            <div class="timeline-body"><p>Hi,
is it possible to add a space after the line-number?</p>
<p>The reason for this is the following:
If I do for example a <code>git blame SomeFile | rg some_interesting_function</code>, I get output like this:
<code>137:bdabecea    The Author    some_interesting_function(abc)</code>
To get more information, I usually do a doubleclick on the commit-hash and then copy it (e.g. for a <code>git show</code>), but with the line-number directly glued to the hash, it gets selected as well and I have to manually delete the line-number (otherwise I would have <code>git blame 137:bdabecea</code>).</p>
<p>I think some shells are intelligent enough to only select the hash, but mine selects everything between whitespaces. So an added space would fix this issue for me.
Is that possible or would that break some output-parsing-compatibility?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2017-03-02 11:30</div>
            <div class="timeline-body"><p>ripgrep should emit the contents exactly as they are in the file. This is what every other search tool does and ripgrep is not going to break from it. You'd have the same problem with grep.</p>
<blockquote>
<p>I usually do a doubleclick on the commit-hash</p>
</blockquote>
<p>Either don't doubleclick (click-and-drag instead), write the commit hash (it's only 6 letters) or disable line numbers with <code>-N</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2017-03-02 11:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Volker-Weissmann">@Volker-Weissmann</a> on 2021-03-13 15:14</div>
            <div class="timeline-body"><p>Can we add this as an optional flag?
If you Ctrl+Click on &quot;filename:123 otherstuff&quot; in vscode it opens the file and goes to line 123. But if rg outputs &quot;filename:123otherstuff&quot; vscode tries to find a file named &quot;filename:123otherstuff&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Volker-Weissmann">@Volker-Weissmann</a> on 2021-05-27 15:13</div>
            <div class="timeline-body"><p>Just in case anyone has the same issue as me.</p>
<p>This is more or less fixed in the newest version of ripgrep, because now it prints <code>filename:123:otherstuff</code> (notice the second ':') (at least if you set the --no-heading flag).
If anyone wants to implement zwieberl's request, take a loot at the <code>separator_field_match</code> variable of the <code>struct Config</code>. it is usually &quot;:&quot;.
<code>fn write_prelude</code> of <code>struct StandardImpl</code> is what prints filename, linenumber and match with the colons in between.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-05-27 15:14</div>
            <div class="timeline-body"><p>@Volker-Weissmann The <code>filename:123:otherstuff</code> format has been available since the first release of ripgrep. And there have been no changes to it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Volker-Weissmann">@Volker-Weissmann</a> on 2021-05-27 15:22</div>
            <div class="timeline-body"><blockquote>
<p>@Volker-Weissmann The <code>filename:123:otherstuff</code> format has been available since the first release of ripgrep. And there have been no changes to it.</p>
</blockquote>
<p>Yes, I also just realised that I was talking BS.
For myself, I now solved it using the one-line patch below (applies on 94e4b8e301302097dad48b292560ce135c4d4926).
If anyone else wants this, I can make a proper PR with a proper flag.</p>
<pre><code>diff --git a/crates/printer/src/standard.rs b/crates/printer/src/standard.rs
index 943bd79..14284d4 100644
--- a/crates/printer/src/standard.rs
+++ b/crates/printer/src/standard.rs
@@ -1145,6 +1145,7 @@ impl&lt;'a, M: Matcher, W: WriteColor&gt; StandardImpl&lt;'a, M, W&gt; {
                 self.write_column_number(n, sep)?;
             }
         }
+        self.write(b&quot; &quot;)?;
         if self.config().byte_offset {
             self.write_byte_offset(absolute_byte_offset, sep)?;
         }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NQNStudios">@NQNStudios</a> on 2021-11-29 18:11</div>
            <div class="timeline-body"><p>@Volker-Weissmann Your patch would help me out, because ~~in Visual Studio Code's terminal, you can control-click tokens in the syntax <code>&lt;file&gt;:&lt;line&gt;:</code> or <code>&lt;file&gt;:&lt;line&gt;:&lt;column&gt;:</code> to open the file at that line number in the text editor. Tokens with the syntax <code>&lt;file&gt;:&lt;line&gt;:&lt;randomToken&gt;</code>  break this feature for me.~~ of the same reason you outlined and I skimmed over so I wrote it again twice. ðŸ˜…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Volker-Weissmann">@Volker-Weissmann</a> on 2021-11-29 18:26</div>
            <div class="timeline-body"><blockquote>
<p>@Volker-Weissmann Your patch would help me out</p>
</blockquote>
<p>What do you mean, it <em>would</em> help you out, either it did or it did not.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NQNStudios">@NQNStudios</a> on 2021-11-29 18:41</div>
            <div class="timeline-body"><p>Oh--judging by this thread I thought you made the patch on your own fork but didn't PR it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Volker-Weissmann">@Volker-Weissmann</a> on 2021-11-29 18:43</div>
            <div class="timeline-body"><p>No, I just use 94e4b8e301302097dad48b292560ce135c4d4926 with the patch I posted.</p>
<p>But creating a PR that adds a flag for this would be useful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NQNStudios">@NQNStudios</a> on 2021-11-29 18:46</div>
            <div class="timeline-body"><p>Yeah, I would like for there to be a PR adding a flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Volker-Weissmann">@Volker-Weissmann</a> on 2021-11-29 18:47</div>
            <div class="timeline-body"><p>Do you want to write that or should I write that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NQNStudios">@NQNStudios</a> on 2021-11-29 18:57</div>
            <div class="timeline-body"><p>If you have time, it would be excellent if you could. Let's check with @BurntSushi, would this PR be welcome?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2021-11-29 20:06</div>
            <div class="timeline-body"><p>I would recommend you instead lobby tools to fix their &quot;click&quot; functionality. Not all tools get this wrong and it's an incredibly common format. (This is the traditional grep format.)</p>
<p>The problem with &quot;just add another flag&quot; is that to you it looks like a triviality, but if I don't say no to things, the number of flags grows and grows and grows. The number growing is a problem unto itself, but really only a problem that is visible to me through other end user complaints.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NQNStudios">@NQNStudios</a> on 2021-11-29 20:26</div>
            <div class="timeline-body"><p>That makes sense. I'll see if there's an open issue for this on VSCode, or if we need to make a new one.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Volker-Weissmann">@Volker-Weissmann</a> on 2021-11-29 21:49</div>
            <div class="timeline-body"><blockquote>
<p>I would recommend you instead lobby tools to fix their &quot;click&quot; functionality. Not all tools get this wrong and it's an incredibly common format. (This is the traditional grep format.)</p>
<p>The problem with &quot;just add another flag&quot; is that to you it looks like a triviality, but if I don't say no to things, the number of flags grows and grows and grows. The number growing is a problem unto itself, but really only a problem that is visible to me through other end user complaints.</p>
</blockquote>
<p>I know that I was the guy that proposed the PR, but I really like both of your arguments.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:05 UTC
    </footer>
</body>
</html>
