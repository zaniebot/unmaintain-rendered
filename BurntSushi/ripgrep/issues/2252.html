<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glob for `-g '**'`  ignores the `.gitignore` whereas `-g '*.*'`  uses `.gitignore` - BurntSushi/ripgrep #2252</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Glob for <code>-g &#x27;**&#x27;</code>  ignores the <code>.gitignore</code> whereas <code>-g &#x27;*.*&#x27;</code>  uses <code>.gitignore</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2252">#2252</a>
        opened by <a href="https://github.com/mangelozzi">@mangelozzi</a>
        on 2022-07-04 08:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mangelozzi">@mangelozzi</a></div>
            <div class="timeline-body"><p>Firstly, maybe this is not a bug but the desired behaviour, if so, then apologies, and sorry for wasting your time. I found the behaviour unexpected.</p>
What version of ripgrep are you using?
<p>Replace this text with the output of <code>ripgrep 11.0.2</code>.</p>
How did you install ripgrep?
<p><code>sudo apt install ripgrep</code> (I think)</p>
What operating system are you using ripgrep on?
<p><code>Ubuntu 20.04</code></p>
Describe your bug.
<p>A search using <code>-g &#x27;**&#x27;</code> will not use the ignore files. A search using <code>-g &#x27;*.*&#x27;</code> will use the ignore files</p>
What are the steps to reproduce the behavior?
<ol>
<li>Download the attached zip.</li>
<li><code>cd</code> into it. In it are two files:<ul>
<li><code>foo.html</code> where we want to find a match</li>
<li><code>htmlcov/bar.html</code> where we want to ignore matches (there are &quot;autogenerated&quot; test reports)</li>
</ul>
</li>
<li>Run the following search, you will see one match, the .gitignore file is used to ignore the match in <code>htmlcov</code><pre><code>$ rg -g &#x27;*.*&#x27; pattern
foo.html
1:&lt;p&gt;pattern&lt;/p&gt;
</code></pre>
</li>
<li>Run the following search, you will see the .gitignore file is <strong>NOT</strong> used, it finds additional entries:<pre><code>$ rg -g &#x27;**&#x27; pattern
foo.html
1:&lt;p&gt;pattern&lt;/p&gt;

htmlcov/bar.html
1:&lt;p&gt;pattern&lt;/p&gt;

.git/info/exclude
4:# exclude patterns (uncomment them if you want to use them):
</code></pre>
</li>
</ol>
What is the actual behavior?
<p>It fails to use the <code>.gitignore</code> file when using the glob pattern <code>**</code>, however if one uses the glob pattern <code>*.*</code> then it uses the <code>.gitignore</code> file.</p>
What is the expected behavior?
<p>Always apply the <code>.gitignore</code> rules unless one uses <code>--no--ignore</code></p>
<p><a href="https://github.com/BurntSushi/ripgrep/files/9037865/testrg.zip">testrg.zip</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Glob for `-g &#x27;**&#x27;`  ignores the `.gitignore`&quot; to &quot;Glob for `-g &#x27;**&#x27;`  ignores the `.gitignore` whereas `-g &#x27;*.*&#x27;`  uses `.gitignore`&quot; by <a href="https://github.com/mangelozzi">@mangelozzi</a> on 2022-07-04 08:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-07-04 10:57</div>
            <div class="timeline-body"><p>Yeah this is intended behavior. The <code>-g</code> flag is specifically overriding your gitignore. That&#x27;s how it&#x27;s intended to work. It&#x27;s just like how a <code>.ignore</code> file will override a <code>.gitignore</code>. Since <code>**</code> matches everything, it effectively whitelists everything and thus overrides every rule in your gitignore. This is not only correct, but to do it any other way would likely lead to madness. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-07-04 10:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-07-04 10:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:12 UTC
    </footer>
</body>
</html>
