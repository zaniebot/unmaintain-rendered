<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>(ignore) Use `.gitignore` for Sapling repositories - BurntSushi/ripgrep #2374</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>(ignore) Use <code>.gitignore</code> for Sapling repositories</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2374">#2374</a>
        opened by <a href="https://github.com/vegerot">@vegerot</a>
        on 2022-12-22 20:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vegerot">@vegerot</a></div>
            <div class="timeline-body">Describe your feature request
<p><a href="https://sapling-scm.com/docs/introduction/">Sapling</a> is a source control tool that is compatible with git repositories.  For example , when working on ripgrep I use <code>sl clone git@github.com:BurntSushi/ripgrep.git</code>.  Sapling puts its files (including the wrapped <code>.git</code> directory) in <code>&lt;repo&gt;/.sl</code>.  However, since the <code>ignore</code> crate only ignores <code>.gitignore</code> files when it detects a <code>.git</code> directory (#1229), using <code>rg</code> inside a Sapling repo ends up returning a bunch of unwanted results.</p>
Possible solutions
<ol>
<li>ripgrep patched to respect <code>.gitignore</code> files when <code>.git</code> <em>or</em> <code>.sl</code> directories are detected</li>
<li>I could make an alias for <code>rg --ignore-file .gitignore</code></li>
</ol>
<ul>
<li>won&#x27;t work for nested gitignores, or when I start a search in a subdirectory</li>
<li>Will have to do the same for <code>fd</code> and other tools using <code>ignore</code></li>
</ul>
<ol>
<li>Trick <code>ignore</code> into thinking I&#x27;m using regular git, maybe by making an empty <code>.git</code> directory</li>
<li>~~Add flag <code>--treat-as-git</code> to tell ripgrep to use <code>.gitignore</code> files~~</li>
</ol>
<ul>
<li>How do you specify where the root of the repo is?</li>
<li>@BurntSushi mentioned in #2364 that <code>--no-require-git</code> is this</li>
</ul>
<p>I prefer solution 1.  Would you accept a patch that checks for <code>.git</code> or <code>.sl</code> when deciding if you&#x27;re in a git repo?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-12-23 01:46</div>
            <div class="timeline-body"><p>This was discussed a bit here: <a href="https://github.com/BurntSushi/ripgrep/pull/2364">BurntSushi/ripgrep#2364</a></p>
<p>Namely, I talk about why your (1) idea is processor not a good idea right now, and also suggest a work around that I don&#x27;t see in your list of alternatives.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2022-12-23 01:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vegerot">@vegerot</a> on 2022-12-23 22:57</div>
            <div class="timeline-body"><p>Thank you ğŸ˜Š</p>
<p><code>--no-require-git</code> sounds good ğŸ‘.  This was an idea I wrote about but didn&#x27;t know about <code>--no-require-git</code>.  Will <code>--no-require-git</code> search for parent <code>.gitignore</code> files until my home/root directory?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vegerot">@vegerot</a> on 2022-12-29 01:46</div>
            <div class="timeline-body"><p><code>--no-require-git</code> is perfect!  Thank you ğŸ™
Happy New Year ğŸ† ğŸˆ ğŸŠ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/vegerot">@vegerot</a> on 2022-12-29 01:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:12 UTC
    </footer>
</body>
</html>
