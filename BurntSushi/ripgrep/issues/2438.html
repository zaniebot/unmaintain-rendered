<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bug in passthru option - BurntSushi/ripgrep #2438</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>bug in passthru option</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/2438">#2438</a>
        opened by <a href="https://github.com/elkarouh">@elkarouh</a>
        on 2023-03-01 15:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/elkarouh">@elkarouh</a></div>
            <div class="timeline-body"><h4>What version of ripgrep are you using?</h4>
<p>ripgrep 13.0.0 (rev af6b6c543b)
-SIMD -AVX (compiled)
+SIMD +AVX (runtime)</p>
<h4>How did you install ripgrep?</h4>
<p>manually</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>3.10.0-1160.31.1.el7.x86_64 #1 SMP Wed May 26 20:18:08 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux</p>
<h4>Describe your bug.</h4>
<p>Non-matching lines duplicated in the output, when using multiline options</p>
<h4>What are the steps to reproduce the behavior?</h4>
<p>I am trying to solve the problem of moving a line as described in the following url
https://stackoverflow.com/questions/10499960/how-to-move-specified-line-in-file-to-other-place-with-regexp-match-bash-script
I then run the following command:
The EXAMPLE file contains :
asdasd0
asdasd1
asdasd2
asdasd3
asdasd4
asdasd5
asdasd6</p>
<pre><code>rg --debug --multiline --multiline-dotall  '^(asdasd1.*)(asdasd5(?:\n|$))'  --passthru -r '$2$1'  EXAMPLE
Output is:
&lt;multiline-dotall  '^(asdasd1.*)(asdasd5(?:\n|$))' inepassthru -r '$2$1'  EXAMPLE
DEBUG|rg::config|crates/core/config.rs:40: /auto/home/elkarouh/.config/ripgrep/rc: arguments loaded from config file: [ &quot;--type-add&quot;, &quot;templ:*.templ&quot;]
DEBUG|rg::args|crates/core/args.rs:543: final argv: [&quot;rg&quot;, &quot;--type-add&quot;, &quot;templ:*.templ&quot;, &quot;--debug&quot;, &quot;--multiline&quot;
, &quot;--multiline-dotall&quot;, &quot;^(asdasd1.*)(asdasd5(?:\\n|$))&quot;, &quot;--passthru&quot;, &quot;-r&quot;, &quot;$2$1&quot;, &quot;EXAMPLE&quot;]
DEBUG|globset|crates/globset/src/lib.rs:421: built glob set; 0 literals, 0 basenames, 12 extensions, 0 prefixes, 0 suffixes, 0 required extensions,
 0 regexes
asdasd0
asdasd5
asdasd1
asdasd2
asdasd3
asdasd4
asdasd6

asdasd6

</code></pre>
<h4>What is the expected behavior?</h4>
<p>Expected output is:
asdasd0
asdasd5
asdasd1
asdasd2
asdasd3
asdasd4
asdasd6
What do you think ripgrep should have done?
Not duplicate the non-matching lines</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @BurntSushi on 2023-03-02 00:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-03-02 00:54</div>
            <div class="timeline-body"><p>Duplicate of #2095 and #2208. Was fixed in 91afd4214a9ada15e475bba02694f4fb50079cbc, which is on current master but has not yet been released.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2023-03-02 00:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/elkarouh">@elkarouh</a> on 2023-03-02 06:52</div>
            <div class="timeline-body"><p>Hi BurntSushi,</p>
<p>When is a new release expected?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2023-03-02 12:48</div>
            <div class="timeline-body"><p>I don't schedule my free time. See: https://github.com/BurntSushi/ripgrep/blob/master/FAQ.md#release</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/elkarouh">@elkarouh</a> on 2023-03-02 13:37</div>
            <div class="timeline-body"><p>No problem.
Your software is having massive impact on my productivity and i am just pushing the limits.
Many thanks for this wonderful tool !</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:43:37 UTC
    </footer>
</body>
</html>
