<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>line number disappear when piping command - BurntSushi/ripgrep #796</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>line number disappear when piping command</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/BurntSushi/ripgrep/issues/796">#796</a>
        opened by <a href="https://github.com/timotheecour">@timotheecour</a>
        on 2018-02-13 09:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/timotheecour">@timotheecour</a></div>
            <div class="timeline-body"><p>not sure whether it's a regression, don't remember seeing that before upgrading to ripgrep 0.8.0</p>
<h4>What version of ripgrep are you using?</h4>
<p>ripgrep 0.8.0 (rev )
-SIMD -AVX</p>
<h4>What operating system are you using ripgrep on?</h4>
<p>osx</p>
<h4>Describe your question, feature request, or bug.</h4>
<p>rg --no-heading packages</p>
<pre><code>source/dubregistry/web.d:563:   @auth @path(&quot;/my_packages/:packname/set_categories&quot;)
source/dubregistry/web.d:581:           redirect(&quot;/my_packages/&quot;~_packname);
source/dubregistry/web.d:584:   @auth @path(&quot;/my_packages/:packname/set_repository&quot;) @errorDisplay!getMyPackagesPackage
source/dubregistry/web.d:595:           redirect(&quot;/my_packages/&quot;~_packname);
source/dubregistry/registry.d:43:               // list of packages whose statistics need to be updated
source/dubregistry/registry.d:294:              // update stat distributions before score packages

</code></pre>
<p>rg --no-heading packages|cat</p>
<pre><code>source/dubregistry/mirror.d:    enum urls = [&quot;packages/index.json&quot;, &quot;api/packages/search?q=foobar&quot;];
source/dubregistry/mirror.d:            auto packs = requestHTTP(url ~ Path(&quot;api/packages/dump&quot;)).readJson().deserializeJson!(DbPackage[]);
source/dubregistry/mirror.d:            // first, remove all packages that don't exist anymore to avoid possible name conflicts
source/dubregistry/mirror.d:            // then add/update all existing packages
source/dubregistry/mirror.d:            logError(&quot;Fetching updated packages failed: %s&quot;, e.msg);
source/dubregistry/registry.d:          // list of packages whose statistics need to be updated
source/dubregistry/registry.d:          // update stat distributions before score packages
source/dubregistry/registry.d:                  &quot;Published packages must contain \&quot;description\&quot; and \&quot;license\&quot; fields.&quot;);
source/dubregistry/registry.d:  /// Using monthly downloads to penalize stale packages, logarithm to

</code></pre>
<p>shows no line numbers</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2018-02-13 12:21</div>
            <div class="timeline-body"><p>This has been the behavior of ripgrep since the <code>0.1.0</code> release. You can see the logic for <a href="https://github.com/BurntSushi/ripgrep/blob/ad3f55b0e51cfedfbd4d7897d7a55e4c884fd0e5/src/args.rs#L653-L664">determining whether line numbers are enabled here</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2018-02-13 12:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">invalid</span> added by @BurntSushi on 2018-02-13 12:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arclabs561">@arclabs561</a> on 2019-11-21 20:42</div>
            <div class="timeline-body"><p>One can achieve slightly similar behavior by doing</p>
<pre><code>$(output) | cat -n | rg PAT
</code></pre>
<p>...And I also see now that one can just use the <code>rg -n</code> flag, too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/timotheecour">@timotheecour</a> on 2019-11-22 00:00</div>
            <div class="timeline-body"><p>likewise <code>--column</code> will also force show line+column even with piping</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:42:26 UTC
    </footer>
</body>
</html>
