<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fix(ValueEnum): Detailed help for ValueEnum variant #6096 - clap-rs/clap #6101</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>fix(ValueEnum): Detailed help for ValueEnum variant #6096</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/clap-rs/clap/pull/6101">#6101</a>
        opened by <a href="https://github.com/smoqadam">@smoqadam</a>
        on 2025-08-11 16:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/smoqadam">@smoqadam</a></div>
            <div class="timeline-body"><p>#6096</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-08-11 16:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>tests/derive/value_enum.rs</code>:41 on 2025-08-11 16:58</div>
            <div class="timeline-body"><p>We have <code>ValueEnum</code> tests in <code>help.rs</code> and <code>doc_comment_help.rs</code></p>
<p>Do those meet the needs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/smoqadam">@smoqadam</a> reviewed on 2025-08-11 17:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/smoqadam">@smoqadam</a> on <code>tests/derive/value_enum.rs</code>:41 on 2025-08-11 17:23</div>
            <div class="timeline-body"><p>I haven&#x27;t checked yet. I just wanted to write a test to understand the issue first, and adjust the code based on that. I will check those files and I will move it to the right place.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_derive/src/item.rs</code>:908 on 2025-08-11 19:23</div>
            <div class="timeline-body"><p>This would cause the long help to be used for Arguments and Subcommands, and not just Value Enum Variants.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-08-11 19:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-08-11 19:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_derive/src/item.rs</code>:908 on 2025-08-11 19:24</div>
            <div class="timeline-body"><p>We also need to gate the behavior with <code>unstable-v5</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-08-12 15:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>tests/derive/doc_comments_help.rs</code>:17 on 2025-08-12 15:30</div>
            <div class="timeline-body"><p>We did this in <code>occurrences.rs</code> because those tests are additive.</p>
<p>In this case, please have legacy copies of the tests so we ensure the current behavior doesn&#x27;t get broken.  The last time we did this en masse, we sectioned them off in <code>tests/derive/legacy</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>tests/derive/doc_comments_help.rs</code>:17 on 2025-08-12 15:31</div>
            <div class="timeline-body"><p>Please duplicate the tests in its own commit before making any logic changes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-08-12 15:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-08-12 17:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>tests/derive/legacy.rs</code>:1 on 2025-08-12 17:03</div>
            <div class="timeline-body"><blockquote>
<p>tests/derive/legacy.rs</p>
</blockquote>
<p>should be</p>
<blockquote>
<p>tests/derive/legacy/doc_comments_help.rs</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-08-12 17:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>tests/derive/legacy.rs</code>:1 on 2025-08-12 17:04</div>
            <div class="timeline-body"><p>If <code>#[cfg(feature = &quot;unstable-v5&quot;)]</code> is being applied to all of <code>tests/derive/doc_comments_help.rs</code> (which is why I suggested the <code>legacy/</code> approach), then we should duplicate all of the tests</p>
<p>If its just a single test and it just changes the help output, then that is just a question have having two instances of the <code>str![]</code> like we do in <code>tests/builder/template_help.rs</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>tests/derive/doc_comments_help.rs</code>:1 on 2025-08-12 17:05</div>
            <div class="timeline-body"><p>This commit adding test cases should pass on its own.  It shouldn&#x27;t be updating any tests for changes in behavior</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-08-12 17:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/smoqadam">@smoqadam</a> reviewed on 2025-08-12 17:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/smoqadam">@smoqadam</a> on <code>tests/derive/legacy.rs</code>:1 on 2025-08-12 17:29</div>
            <div class="timeline-body"><p>thanks @epage, I hope I got it right this time. I marked the old test not to be run when <code>feature = &quot;unstable-v5</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-08-12 17:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>tests/derive/legacy.rs</code>:1 on 2025-08-12 17:50</div>
            <div class="timeline-body"><p>Each commit should pass tests.  I&#x27;ve gone ahead and did a push to fix it.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 20:00:54 UTC
    </footer>
</body>
</html>
