```yaml
number: 6141
title: Respect the configured display order
type: pull_request
state: closed
author: thomas-zahner
labels: []
assignees: []
draft: true
base: master
head: mangen-respect-display-order
created_at: 2025-09-26T14:05:36Z
updated_at: 2025-09-26T14:29:40Z
url: https://github.com/clap-rs/clap/pull/6141
synced_at: 2026-01-10T01:57:50Z
```

# Respect the configured display order

---

_Pull request opened by @thomas-zahner on 2025-09-26 14:05_

This is an attempt to make mangen respect the display order for args. (not yet for subcommands) The implementation is minimalistic with as few changes as possible. It's probably not be quite what we want to merge, which is why I've marked it as draft.

The failing tests also show that currently the change reorders too much. I will probably have dig a bit deeper to understand why this happens, but maybe somebody knows.

Fixes https://github.com/clap-rs/clap/issues/3362

---

_@epage reviewed on 2025-09-26 14:12_

---

_Review comment by @epage on `clap_builder/src/mkeymap.rs`:99 on 2025-09-26 14:12_

It is an interesting idea to always store the arguments in sort-order.  We wouldn't want to do this on `push` though as that can be quite slow (unless we are finding the location that matches the sort order and inserting directly there').  We'd instead want to do this in `_build`.

The question is if this display-only decision should be made always, when most of the time the display is not being used.

---

_@thomas-zahner reviewed on 2025-09-26 14:28_

---

_Review comment by @thomas-zahner on `clap_builder/src/mkeymap.rs`:99 on 2025-09-26 14:28_

Thanks, I also realised that is probably not quite what we want, so I changed it with the second commit.

---
