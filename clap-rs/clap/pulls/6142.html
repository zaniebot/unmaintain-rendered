<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Respect display order - clap-rs/clap #6142</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Respect display order</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/clap-rs/clap/pull/6142">#6142</a>
        opened by <a href="https://github.com/thomas-zahner">@thomas-zahner</a>
        on 2025-09-26 22:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/thomas-zahner">@thomas-zahner</a></div>
            <div class="timeline-body"><p>This is branched off #6072 and fixes #3362. The work over at #6072 seems to have stalled. With this PR, I'd like to get the feature ready and merged.</p>
<p>My changes (see last commit) should resolve the comments left on the original PR. Additionally, I noticed that <code>option_sort_key</code> was fully copy/pasted on the original PR. I tried to reuse the logic and ended up creating <code>ArgOrder</code>. Not fully sure if this is the way to go, but I think it's quite a bit better than the current state. Especially the bit with the <code>BTreeMap</code> was unnecessary and <code>positional_sort_key</code> was a overly complicated way of saying &quot;don't do anything&quot;.</p>
<p>Maybe you would like to implement or name<code>ArgOrder</code> differently? Also I'm not sure where I should place <code>ArgOrder</code> in order to be usable in both places.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-10-10 15:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_mangen/tests/testsuite/roff.rs</code>:174 on 2025-10-10 15:40</div>
            <div class="timeline-body"><p>Please add all new tests in the first commit</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-10-10 15:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_mangen/src/render.rs</code>:38 on 2025-10-10 15:40</div>
            <div class="timeline-body"><p>Please squash this into the main commit</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_mangen/tests/testsuite/roff.rs</code>:174 on 2025-10-10 16:57</div>
            <div class="timeline-body"><p>Looks like all of the commits had been squashed.  What you did with the test commit before the main commit was right, just more tests had been added in the &quot;fixup&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-10-10 16:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/thomas-zahner">@thomas-zahner</a> reviewed on 2025-10-11 14:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/thomas-zahner">@thomas-zahner</a> on <code>clap_mangen/tests/testsuite/roff.rs</code>:174 on 2025-10-11 14:49</div>
            <div class="timeline-body"><p>Ah I see, I misunderstood then. I've now split the commit into everything test related and then the fix itself.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-10-13 17:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_mangen/tests/testsuite/roff.rs</code>:174 on 2025-10-13 17:14</div>
            <div class="timeline-body"><p>Note that the the commits should still be atomic, including each commit passing tests.  The first commit should pass, showing the current behavior.  The second commit should still pass, showing the new behavior.</p>
<p>The intent with this split is to</p>
<ol>
<li>Verify the tests test the right behavior by seeing them change</li>
<li>Provide a visual demonstration of what this PR accomplishes by the diff between the two commits</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/thomas-zahner">@thomas-zahner</a> reviewed on 2025-10-20 07:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/thomas-zahner">@thomas-zahner</a> on <code>clap_mangen/tests/testsuite/roff.rs</code>:174 on 2025-10-20 07:51</div>
            <div class="timeline-body"><p>Ah okay :sweat_smile: The two commits are atomic now. The tests for both commits pass.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_mangen/tests/testsuite/common.rs</code>:290 on 2025-10-20 16:24</div>
            <div class="timeline-body"><p>Sorry I had missed this before.  The commit changes made this more obvious.</p>
<p>Why is this here instead of relying on inspecting the snapshots?  Not thrilled with doing post-processing on the roff output.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-10-20 16:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/thomas-zahner">@thomas-zahner</a> reviewed on 2025-10-22 08:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/thomas-zahner">@thomas-zahner</a> on <code>clap_mangen/tests/testsuite/common.rs</code>:290 on 2025-10-22 08:00</div>
            <div class="timeline-body"><p>True, I don't think there is a point in doing this as this is covered by <code>assert_matches</code> already. I've removed it.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:49:52 UTC
    </footer>
</body>
</html>
