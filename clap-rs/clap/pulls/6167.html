<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fix(clap_complete_nushell): order positional arguments by index - clap-rs/clap #6167</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>fix(clap_complete_nushell): order positional arguments by index</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/clap-rs/clap/pull/6167">#6167</a>
        opened by <a href="https://github.com/nitsky">@nitsky</a>
        on 2025-10-30 00:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/nitsky">@nitsky</a></div>
            <div class="timeline-body"><p>In clap_complete_nushell, arguments are written in the order they are added to the <code>Command</code>, not according to the
<code>index</code> they are specified with. If required positional arguments with a lower <code>index</code> are added to the command after
optional positional arguments are added, nushell rejects the generated completion because nushell forbids required
arguments to come after optional arguments.</p>
<p>For example, if positional arguments are defined as:</p>
<ul>
<li><code>.arg(Arg::new(&quot;second&quot;).index(2))</code> (optional)</li>
<li><code>.arg(Arg::new(&quot;first&quot;).index(1))</code> (required)</li>
</ul>
<p>The current output would incorrectly place <code>second?</code> before <code>first</code>, which nushell rejects.</p>
<p>To fix this, I reordered the output so all non-positional arguments are written in their normal order, and then all
positional arguments are written, ordered by their <code>index</code>.</p>
<p>I&#x27;m not certain this is the best approach, I would appreciate feedback.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 20:00:57 UTC
    </footer>
</body>
</html>
