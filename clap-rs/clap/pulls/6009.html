<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>feat(clap-complete): Introduce fallible generator - clap-rs/clap #6009</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>feat(clap-complete): Introduce fallible generator</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/clap-rs/clap/pull/6009">#6009</a>
        opened by <a href="https://github.com/gtema">@gtema</a>
        on 2025-05-22 15:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/gtema">@gtema</a> on 2025-05-22 15:29</div>
            <div class="timeline-body"><p>It may happen that writing completion fails due to whichever reason. Currently clap-complete panics without letting calling code to react on that error (i.e. ignore). Introduce fallible version of the <code>generate</code> function by mostly only getting rid of except and instead exposing Result.  For backwards compatibility make default trait implementation of <code>try_generate</code> function to call <code>generate</code> not to break users defining their own <code>generate</code>.</p>
<p>Issue: #5993</p>
<!--
Thanks for helping out!

Please link the appropriate issue from your PR.

If you don't have an issue, we'd recommend starting with one first so the PR can focus on the
implementation (unless its an obvious bug or documentation fix that will have
little conversation).
-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-05-23 14:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/src/aot/generator/mod.rs</code>:73 on 2025-05-23 14:38</div>
            <div class="timeline-body"><blockquote>
<p>For backwards compatibility make default trait implementation of generate function to call try_generate.</p>
</blockquote>
<p>This needs to go the other way: <code>try_generate</code> needs to have an inherent function that calls <code>generate</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gtema">@gtema</a> reviewed on 2025-05-26 07:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/gtema">@gtema</a> on <code>clap_complete/src/aot/generator/mod.rs</code>:73 on 2025-05-26 07:51</div>
            <div class="timeline-body"><p>right, I needed to force myself to do this against the normal sense but I totally understand why is it required. Added note in the code to explain and leave a reminder to turn it around once a major release is being prepared.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2025-05-26 17:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/src/aot/generator/mod.rs</code>:102 on 2025-05-26 17:30</div>
            <div class="timeline-body"><p>I am not a fan of tracking backlog items in code; that should be handled through issues.  As-is, this will not be acted on for the next release.</p>
<p>I also do not like user names being littered through code.  It is irrelevant noise that can be determined through <code>git blame</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:36:28 UTC
    </footer>
</body>
</html>
