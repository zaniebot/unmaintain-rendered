<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support multiple values in native completions - clap-rs/clap #5601</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support multiple values in native completions</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/clap-rs/clap/pull/5601">#5601</a>
        opened by <a href="https://github.com/shannmu">@shannmu</a>
        on 2024-07-26 13:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/shannmu">@shannmu</a></div>
            <div class="timeline-body"><!--
Thanks for helping out!

Please link the appropriate issue from your PR.

If you don't have an issue, we'd recommend starting with one first so the PR can focus on the
implementation (unless its an obvious bug or documentation fix that will have
little conversation).
-->

<p><strong>Related issue</strong> https://github.com/clap-rs/clap/issues/3921</p>
<h3>Work in this PR</h3>
<ul>
<li><p>Support multi-values for both short flag and long flag
What we can complete now?</p>
<pre><code>dynamic --flag bar1 [TAB]
</code></pre>
<p>It will complete<code>bar1 bar2 bar3</code>.
Also,</p>
<pre><code>dynamic -F bar1 [TAB]
</code></pre>
<p>will complete<code>bar1 bar2 bar3</code>.</p>
</li>
<li><p>Support multi-values for positional argument with <code>num_args(N)</code> which N is fixed.</p>
<pre><code>dynamic pos_a [TAB]
</code></pre>
<p>will complete <code>pos_a pos_b pos_c</code></p>
<pre><code>dynamic -- pos_a [TAB]
</code></pre>
<p>will complete <code>pos_a pos_b pos_c</code></p>
</li>
</ul>
<h3>What may be is left</h3>
<ul>
<li>Support multi-values for both short flag and long flag with format as follows<pre><code>dynamic --flag=bar1 [TAB]
dynamic -F=bar1 [TAB]
</code></pre>
</li>
<li>Support multi-values for positional argument with <code>last</code> or <code>trailing_var_arg</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 15:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/tests/testsuite/dynamic.rs</code>:457 on 2024-07-26 15:29</div>
            <div class="timeline-body"><p>Even in tests, lets use standard naming conventions.  CLI flags should be kebab-case rather than snake_case</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 15:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/tests/testsuite/dynamic.rs</code>:524 on 2024-07-26 15:29</div>
            <div class="timeline-body"><p>Aren't these duplicated?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 15:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/tests/testsuite/dynamic.rs</code>:524 on 2024-07-26 15:30</div>
            <div class="timeline-body"><p>Did you mean <code>uncertain</code> for the second two?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 15:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/tests/testsuite/dynamic.rs</code>:492 on 2024-07-26 15:30</div>
            <div class="timeline-body"><p>Let's also test &quot;one past the end&quot; to make sure our counting is right</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 15:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/tests/testsuite/dynamic.rs</code>:515 on 2024-07-26 15:33</div>
            <div class="timeline-body"><p>This case should be in the prior commit</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 15:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/src/dynamic/completer.rs</code>:118 on 2024-07-26 15:34</div>
            <div class="timeline-body"><p>Unsure if errorring is the right thing to do...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 15:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/src/dynamic/completer.rs</code>:178 on 2024-07-26 15:34</div>
            <div class="timeline-body"><p>This looks familiar.  Is there a way for us to reuse this code?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/shannmu">@shannmu</a> on <code>clap_complete/tests/testsuite/dynamic.rs</code>:524 on 2024-07-26 15:56</div>
            <div class="timeline-body"><p>Sorry for this. I found these duplicated tests and changed in the next feat commit. And I originally wanted to perform a rebase operation but i missed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/shannmu">@shannmu</a> reviewed on 2024-07-26 15:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/shannmu">@shannmu</a> reviewed on 2024-07-26 15:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/shannmu">@shannmu</a> on <code>clap_complete/tests/testsuite/dynamic.rs</code>:492 on 2024-07-26 15:56</div>
            <div class="timeline-body"><p>Okay.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/shannmu">@shannmu</a> reviewed on 2024-07-26 15:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/shannmu">@shannmu</a> on <code>clap_complete/src/dynamic/completer.rs</code>:118 on 2024-07-26 15:58</div>
            <div class="timeline-body"><p>Logically, this branch will not be entered, but it must be matched. If there is a better way to implement it, please tell me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 16:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/src/dynamic/completer.rs</code>:118 on 2024-07-26 16:18</div>
            <div class="timeline-body"><p><code>unreachable!(&quot;reason it won't be hit&quot;)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 18:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/src/dynamic/completer.rs</code>:103 on 2024-07-26 18:59</div>
            <div class="timeline-body"><blockquote>
<p>&quot;reason it won't be hit&quot;</p>
</blockquote>
<p>You're supposed to fill in this part :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/src/dynamic/completer.rs</code>:87 on 2024-07-26 19:00</div>
            <div class="timeline-body"><p>Won't <code>ValueDone</code> put is back into parsing options and subcommands on the next iteration?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 19:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 19:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/src/dynamic/completer.rs</code>:656 on 2024-07-26 19:01</div>
            <div class="timeline-body"><p>Not sure whats &quot;parsing&quot; about this.  This is a <code>get_positional_max_values</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a> reviewed on 2024-07-26 19:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/epage">@epage</a> on <code>clap_complete/src/dynamic/completer.rs</code>:178 on 2024-07-26 19:02</div>
            <div class="timeline-body"><p>Was hoping we culd share more than just the lookup</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:49:42 UTC
    </footer>
</body>
</html>
