<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow for derivation of multiple long and short flags for the same argument - clap-rs/clap #5571</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Allow for derivation of multiple long and short flags for the same argument</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/5571">#5571</a>
        opened by <a href="https://github.com/Dyredhead">@Dyredhead</a>
        on 2024-07-07 23:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Dyredhead">@Dyredhead</a> on 2024-07-07 23:19</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.5.7</p>
<h3>Describe your use case</h3>
<p>In my program I want to be able to derive multiple long and short flags for the same arguments.
So for example say I have a program that takes in the name of an ice cream, the long flag could be --ice-cream.
But that is sometimes a little long to type out every time and unfortunately the -i flag is already taken for another argument.</p>
<p>It would be useful to be able to derive more than one long flag for a single argument. In this case that could be &quot;--ic&quot; and &quot;--ice-cream&quot;.</p>
<h3>Describe the solution you'd like</h3>
<p>The most obvious two solutions that comes to mind is to just allow Arg::long to be derived more than once:
<img src="https://github.com/clap-rs/clap/assets/24397516/0a6f0460-cb2e-4b28-9fa0-09da5560bb0c" alt="Screenshot_20240707_185601" />
or to change Arg::long to take in a Vec&lt;&amp;str&gt; rather than just a &lt;&amp;str&gt;
<img src="https://github.com/clap-rs/clap/assets/24397516/70f0708d-f95c-4521-b1cc-f60e876cc759" alt="Screenshot_20240707_185656" /></p>
<p>I personally think the first one looks and feels better, and it also allows for clearly defined order, which can then be translated to the help dialogue.</p>
<p>An example is how this would look is how what eza does in its manpage:
<img src="https://github.com/clap-rs/clap/assets/24397516/9acb2c31-a191-449b-a28f-3df2077ea81e" alt="Screenshot_20240707_190011" />
and this would also be how the help dialogue looks like.</p>
<p>Since changing the type of Arg::long is probably a breaking change, there could be a new type introduced, such as Arg::long_list which would implement this feature instead:
<img src="https://github.com/clap-rs/clap/assets/24397516/eedabffd-59df-49a0-beae-e0fb7cecb098" alt="Screenshot_20240707_190351" /></p>
<p>If possible to implement, then the same should probably be done for the short flags as well.</p>
<h3>Alternatives, if applicable</h3>
<p><em>No response</em></p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @Dyredhead on 2024-07-07 23:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dyredhead">@Dyredhead</a> on 2024-07-07 23:32</div>
            <div class="timeline-body"><p>I see that this is possible using the visible aliases, but that only seems to be available for the builder pattern, and not the derive pattern. So i guess the questions is whether or not this is possible to do with the derive pattern?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Dyredhead on 2024-07-07 23:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @Dyredhead on 2024-07-07 23:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2024-07-08 15:06</div>
            <div class="timeline-body"><blockquote>
<p>but that only seems to be available for the builder pattern, and not the derive pattern</p>
</blockquote>
<p>How so?</p>
<p>From <a href="https://docs.rs/clap/latest/clap/_derive/index.html#terminology">the derive reference</a></p>
<blockquote>
<p>Raw attributes are forwarded directly to the underlying <a href="https://docs.rs/clap/latest/clap/builder/index.html">clap builder</a>. Any <a href="https://docs.rs/clap/latest/clap/struct.Command.html">Command</a>, <a href="https://docs.rs/clap/latest/clap/struct.Arg.html">Arg</a>, or <a href="https://docs.rs/clap/latest/clap/builder/struct.PossibleValue.html">PossibleValue</a> method can be used as an attribute.</p>
</blockquote>
<p>As for making every builder method explicitly specified in the derive reference, see https://github.com/clap-rs/clap/discussions/4090</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dyredhead">@Dyredhead</a> on 2024-07-08 19:38</div>
            <div class="timeline-body"><p>Ok I see, thank you.
I guess my question now is:
Is it possible to have the alias appear alongside the actual flags, rather than at the end of the doc comment in a
<code>[aliases: ]</code>
Im trying to achieve a similar look to how <code>eza</code> does it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2024-07-08 19:54</div>
            <div class="timeline-body"><p>At this time, no.  That is being discussed in #5459.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Dyredhead on 2024-07-09 03:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:35 UTC
    </footer>
</body>
</html>
