<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The command name should default to CARGO_BIN_NAME - clap-rs/clap #5738</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>The command name should default to CARGO_BIN_NAME</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/clap-rs/clap/issues/5738">#5738</a>
        opened by <a href="https://github.com/ia0">@ia0</a>
        on 2024-09-20 09:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ia0">@ia0</a></div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.5.9</p>
<h3>Describe your use case</h3>
<p>I want the default <code>-V / --version</code> to use the binary name instead of the package name, because this is the name users are familiar with. This situation happens when a project has both a library and a CLI. The CLI usually provides a binary with a different name than the package.</p>
<p>The documentation says that the magic command attribute <code>name</code> defaults to the package name on <code>Parser</code>. I wonder if this was decided before <code>CARGO_BIN_NAME</code> was a thing, or if it's just an oversight, or if there is a good reason to do so.</p>
<h3>Describe the solution you'd like</h3>
<p>I'd like the default name to be <code>CARGO_BIN_NAME</code> instead of <code>CARGO_PKG_NAME</code>.</p>
<h3>Alternatives, if applicable</h3>
<p>The obvious workaround is to specify a command name. This is completely fine, but the default is in my opinion wrong, so I'm creating an issue to understand the rationale.</p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @ia0 on 2024-09-20 09:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../google/magika/pulls/704.html">google/magika#704</a> on 2024-09-20 09:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M-breaking-change</span> added by @epage on 2024-09-20 14:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-derive</span> added by @epage on 2024-09-20 14:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-decision</span> added by @epage on 2024-09-20 14:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "5.0" by @epage on 2024-09-20 14:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2024-09-20 14:27</div>
            <div class="timeline-body"><p>Note that this would be a breaking change and wouild have to wait until clap v5, at least.</p>
<p>It would be good to sample various clap projects to see how <code>package.name</code> and <code>bin.name</code> might vary between them to see if there would be any unintended affect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ia0">@ia0</a> on 2024-09-20 14:52</div>
            <div class="timeline-body"><blockquote>
<p>Note that this would be a breaking change and wouild have to wait until clap v5, at least.</p>
</blockquote>
<p>Yes, makes sense.</p>
<blockquote>
<p>It would be good to sample various clap projects to see how <code>package.name</code> and <code>bin.name</code> might vary between them to see if there would be any unintended affect.</p>
</blockquote>
<p>Yes, I'm also curious. I quickly looked at the top 20 reverse dependencies of clap and used the new &quot;Install&quot; feature of crates.io to identify those with a binary and the name of the binary too:</p>
<p>| package | binary | notes |
| --- | --- | --- |
| <code>addr2line</code> | <code>addr2line</code> | |
| <code>remove_dir_all</code> | <code>remove-dir-all</code> | for some reason, <code>--version</code> shows the binary name |
| <code>cbindgen</code> | <code>cbindgen</code> | |
| <code>raw-cpuid</code> | <code>cpuid</code> | affected by this issue, see https://github.com/gz/rust-cpuid/issues/189 |
| <code>dotenvy</code> | <code>dotenvy</code> | |
| <code>dotenv</code> | <code>dotenv</code> | |</p>
<p>So it seems to not affect that many crates on such a small sample.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../gz/rust-cpuid/issues/189.html">gz/rust-cpuid#189</a> on 2024-09-20 17:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:49:28 UTC
    </footer>
</body>
</html>
