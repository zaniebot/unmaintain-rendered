<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>error[E0308]: mismatched types yaml Arg::short - clap-rs/clap #1368</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>error[E0308]: mismatched types yaml Arg::short</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/1368">#1368</a>
        opened by <a href="https://github.com/andrewmiller1">@andrewmiller1</a>
        on 2018-10-31 17:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/andrewmiller1">@andrewmiller1</a> on 2018-10-31 17:06</div>
            <div class="timeline-body"><!--
Please use the following template to assist with creating an issue and to ensure a speedy resolution. If an area is not applicable, feel free to delete the area or mark with `N/A`
-->

<h3>Rust Version</h3>
<ul>
<li>Use the output of <code>rustc -V</code></li>
</ul>
<p>rustc 1.31.0-nightly (1cf82fd9c 2018-10-30)</p>
<h3>Affected Version of clap</h3>
<ul>
<li>Can be found in Cargo.lock of your project (i.e. <code>grep clap Cargo.lock</code>)</li>
</ul>
<p>3.0.0-alpha.1</p>
<h3>Bug or Feature Request Summary</h3>
<p>94872e00a50717c3c59f39bb8a949c2116b952fc broke yaml</p>
<h3>Expected Behavior Summary</h3>
<p>Yaml is parsed</p>
<h3>Actual Behavior Summary</h3>
<p>Yaml is not successfully parsed</p>
<h3>Steps to Reproduce the issue</h3>
<p>Enable the &quot;yaml&quot; feature</p>
<h3>Sample Code or Link to Sample Code</h3>
<p><a href="https://gist.github.com/andrewmiller1/9e5456f236d9ff9fc0051c8acfc7e82c">Minimal Cargo.toml #1368</a></p>
<p><a href="https://gist.github.com/andrewmiller1/375ec96892fc9a71ac35af007965faa4">Minimal working Cargo.toml #1368</a> (uses 683105cdd10c8a301e043a6c77531b2ff8c6a383)</p>
<p>Since the build fails when compiling clap, the other two files aren't relevant.</p>
<p>~<a href="https://gist.github.com/andrewmiller1/c8e582f0627cccdc7d1a1676d6b2610a">Minimal main.rs #1368</a>~</p>
<p>~<a href="https://gist.github.com/andrewmiller1/f36a38ffd960dd20d00e2b2643591bf4">Minimal clap yaml #1368</a>~</p>
<h3>Debug output</h3>
<p>Compile clap with cargo features <code>&quot;debug&quot;</code> such as:</p>
<pre><code class="language-toml">[dependencies]
clap = { version = &quot;2&quot;, features = [&quot;debug&quot;] }
</code></pre>
<details>
<summary> Debug Output </summary>
<pre>
<code>

<p>andrew@pop-os:~/projects/dev-old/targets/dev (master *%)
$ build --verbose
Fresh unicode-xid v0.1.0<br />
Fresh libc v0.2.43<br />
Fresh linked-hash-map v0.5.1<br />
Fresh unicode-width v0.1.5<br />
Fresh bitflags v1.0.4<br />
Fresh indexmap v1.0.2<br />
Fresh strsim v0.7.0<br />
Fresh vec_map v0.8.1<br />
Fresh ansi_term v0.11.0<br />
Fresh atty v0.2.11<br />
Fresh yaml-rust v0.4.2<br />
Fresh textwrap v0.10.0<br />
Fresh proc-macro2 v0.4.20<br />
Fresh quote v0.6.9<br />
Fresh syn v0.14.9<br />
Fresh clap_derive v0.3.0 (https://github.com/clap-rs/clap_derive#2fad2c8a)<br />
Compiling clap v3.0.0-alpha.1 (https://github.com/clap-rs/clap?branch=v3-master#eaa0700e)<br />
Running <code>rustc --crate-name clap /home/andrew/.cargo/git/checkouts/clap-78dbe9b58f9073fe/eaa0700/src/lib.rs --color always --crate-type lib --emit=dep-info,link -C debuginfo=2 --cfg 'feature=&quot;ansi_term&quot;' --cfg 'feature=&quot;atty&quot;' --cfg 'feature=&quot;clap_derive&quot;' --cfg 'feature=&quot;color&quot;' --cfg 'feature=&quot;debug&quot;' --cfg 'feature=&quot;default&quot;' --cfg 'feature=&quot;derive&quot;' --cfg 'feature=&quot;strsim&quot;' --cfg 'feature=&quot;suggestions&quot;' --cfg 'feature=&quot;unstable&quot;' --cfg 'feature=&quot;vec_map&quot;' --cfg 'feature=&quot;yaml&quot;' --cfg 'feature=&quot;yaml-rust&quot;' -C metadata=e1383ef14033cd3b -C extra-filename=-e1383ef14033cd3b --out-dir /home/andrew/projects/dev/target/debug/deps -L dependency=/home/andrew/projects/dev/target/debug/deps --extern ansi_term=/home/andrew/projects/dev/target/debug/deps/libansi_term-6a1b6f7dd99c1473.rlib --extern atty=/home/andrew/projects/dev/target/debug/deps/libatty-32a142521ad608c5.rlib --extern bitflags=/home/andrew/projects/dev/target/debug/deps/libbitflags-a91b077889eb443f.rlib --extern clap_derive=/home/andrew/projects/dev/target/debug/deps/libclap_derive-7de525ba7d38dace.so --extern indexmap=/home/andrew/projects/dev/target/debug/deps/libindexmap-aff436b5b93fd6ec.rlib --extern strsim=/home/andrew/projects/dev/target/debug/deps/libstrsim-df6c1dbbc0d0dbd1.rlib --extern textwrap=/home/andrew/projects/dev/target/debug/deps/libtextwrap-048d110e2204e4ab.rlib --extern unicode_width=/home/andrew/projects/dev/target/debug/deps/libunicode_width-1f1ddf8d3aaa7342.rlib --extern vec_map=/home/andrew/projects/dev/target/debug/deps/libvec_map-4bda7b99adb92f1a.rlib --extern yaml_rust=/home/andrew/projects/dev/target/debug/deps/libyaml_rust-2bb40893dd047a0a.rlib --cap-lints allow</code>
error[E0308]: mismatched types<br />
--&gt; /home/andrew/.cargo/git/checkouts/clap-78dbe9b58f9073fe/eaa0700/src/build/macros.rs:82:9<br />
|<br />
82  | /         $v.as_str()<br />
83  | |             .unwrap_or_else(|| panic!(&quot;failed to convert YAML {:?} value to a string&quot;, $v))<br />
| |___________________________________________________________________________________________^ expected char, found &amp;str<br />
|<br />
::: /home/andrew/.cargo/git/checkouts/clap-78dbe9b58f9073fe/eaa0700/src/build/arg/mod.rs:166:28<br />
|<br />
166 |                   &quot;short&quot; =&gt; yaml_to_str!(a, v, short),<br />
|                              ------------------------- in this macro invocation<br />
|<br />
= note: expected type <code>char</code><br />
found type <code>&amp;str</code><br />
error: aborting due to previous error<br />
For more information about this error, try <code>rustc --explain E0308</code>.<br />
error: Could not compile <code>clap</code>.</p>
<p>Caused by:
process didn't exit successfully: <code>rustc --crate-name clap /home/andrew/.cargo/git/checkouts/clap-78dbe9b58f9073fe/eaa0700/src/lib.rs --color always --crate-type lib --emit=dep-info,link -C debuginfo=2 --cfg 'feature=&quot;ansi_term&quot;' --cfg 'feature=&quot;atty&quot;' --cfg 'feature=&quot;clap_derive&quot;' --cfg 'feature=&quot;color&quot;' --cfg 'feature=&quot;debug&quot;' --cfg 'feature=&quot;default&quot;' --cfg 'feature=&quot;derive&quot;' --cfg 'feature=&quot;strsim&quot;' --cfg 'feature=&quot;suggestions&quot;' --cfg 'feature=&quot;unstable&quot;' --cfg 'feature=&quot;vec_map&quot;' --cfg 'feature=&quot;yaml&quot;' --cfg 'feature=&quot;yaml-rust&quot;' -C metadata=e1383ef14033cd3b -C extra-filename=-e1383ef14033cd3b --out-dir /home/andrew/projects/dev/target/debug/deps -L dependency=/home/andrew/projects/dev/target/debug/deps --extern ansi_term=/home/andrew/projects/dev/target/debug/deps/libansi_term-6a1b6f7dd99c1473.rlib --extern atty=/home/andrew/projects/dev/target/debug/deps/libatty-32a142521ad608c5.rlib --extern bitflags=/home/andrew/projects/dev/target/debug/deps/libbitflags-a91b077889eb443f.rlib --extern clap_derive=/home/andrew/projects/dev/target/debug/deps/libclap_derive-7de525ba7d38dace.so --extern indexmap=/home/andrew/projects/dev/target/debug/deps/libindexmap-aff436b5b93fd6ec.rlib --extern strsim=/home/andrew/projects/dev/target/debug/deps/libstrsim-df6c1dbbc0d0dbd1.rlib --extern textwrap=/home/andrew/projects/dev/target/debug/deps/libtextwrap-048d110e2204e4ab.rlib --extern unicode_width=/home/andrew/projects/dev/target/debug/deps/libunicode_width-1f1ddf8d3aaa7342.rlib --extern vec_map=/home/andrew/projects/dev/target/debug/deps/libvec_map-4bda7b99adb92f1a.rlib --extern yaml_rust=/home/andrew/projects/dev/target/debug/deps/libyaml_rust-2bb40893dd047a0a.rlib --cap-lints allow</code> (exit code: 1)
andrew@pop-os:~/projects/dev-old/targets/dev (master *%)
$</p>
</code>
</pre>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1370.html">clap-rs/clap#1370</a> on 2018-11-05 01:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andrewmiller1">@andrewmiller1</a> on 2018-11-10 00:04</div>
            <div class="timeline-body"><p>#1370 is merged into v3-master</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @andrewmiller1 on 2018-11-10 00:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:32 UTC
    </footer>
</body>
</html>
