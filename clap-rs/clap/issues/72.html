<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for typed argument values - clap-rs/clap #72</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Add support for typed argument values</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/72">#72</a>
        opened by <a href="https://github.com/kbknapp">@kbknapp</a>
        on 2015-04-14 01:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-04-14 01:15</div>
            <div class="timeline-body"><p>Initially support <code>Int</code>, and <code>Float</code>. Implementation should allow additions down the road as well, based on usage, maybe a <code>File</code> or <code>Directory</code> too...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @kbknapp on 2015-04-14 01:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">feature request</span> added by @kbknapp on 2015-04-14 01:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/73.html">clap-rs/clap#73</a> on 2015-04-14 01:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-04-14 14:45</div>
            <div class="timeline-body"><p>Initial implementation may simply be a convenience macro, something like</p>
<pre><code class="language-rust">let num = value_t!(matches.value_of(&quot;length&quot;), u32);
</code></pre>
<p>This would allow far more types initially simply using Rust's <code>&amp;str.parse()</code>, without crossing any lines (i.e where does <code>clap</code> validation stop, and developer validation start? What about parsing IP address, MAC addresses, etc....where is the line?). The more validation <code>clap</code> does, the bigger a performance hit <em>everyone</em> takes whether they want the validation or not.</p>
<p>What's unclear is if failure to parse should constitute ending the process? I'm leaning towards returning an <code>Option&lt;T&gt;</code> or <code>Result&lt;T,&amp;str&gt;</code> which gives <code>clap</code> consumers the option to use <code>.unwrap_or()</code> for a default, or also deciding what to do upon a failed parse. I'm going to continue thinking about this before implementing...</p>
<p>The other nice thing about a macro initially is I could potentially include something like a <code>decode_t!</code> to decode a &amp;str into a user defined <code>enum</code>. Now this would open the door for changing <code>.possible_values()</code> but I'm unsure about how to best implement this part without just requiring the consumer to manually type out each possibility of the <code>enum</code> into a possible values vec as is currently done.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/74.html">clap-rs/clap#74</a> on 2015-04-14 18:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2015-04-14 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-04-14 20:17</div>
            <div class="timeline-body"><p>While this isn't the best solution, it does work for the time being. I'm still unsure how to best implement this in a way that is <em>least</em> taxing on the developer (i.e. I don't want to force people to implement custom traits, or anything like that...)</p>
<p>So this will remain TBD, but for now <code>value_t!</code> and <code>value_t_or_exit!</code> will at least get the job done in a somewhat efficient manner.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3124.html">clap-rs/clap#3124</a> on 2021-12-09 16:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3130.html">clap-rs/clap#3130</a> on 2021-12-09 16:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:31 UTC
    </footer>
</body>
</html>
