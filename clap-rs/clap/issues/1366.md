```yaml
number: 1366
title: Set default value if possible_values array has length of 1
type: issue
state: closed
author: yaahc
labels: []
assignees: []
created_at: 2018-10-24T19:15:06Z
updated_at: 2018-10-24T19:37:50Z
url: https://github.com/clap-rs/clap/issues/1366
synced_at: 2026-01-10T01:57:42Z
```

# Set default value if possible_values array has length of 1

---

_Issue opened by @yaahc on 2018-10-24 19:15_

This may be possible already, but I haven't been able to figure out how. The use case I have is some runtime possible_values population, in this case, hostnames, that I want to select from. If there's exactly one host I would like to be able to leave off the argument requesting it and have clap default to the one possible value, but if there are more than one possible values there's no concept of a default anymore, and I would like it to require the argument.

I can manage it with runtime checks and making the argument optional and only specifying possible_values and erroring if we don't get input, but I thought it might be a check to have done by the argument parser so there are more consistent errors, rather than having some invalid argument inputs result in clap errors and other ones result in debug logs and panics. Also, I'd prefer to avoid the optional argument version because I'm using structopt, and it seems weird to have an `Option<T>` that can only ever be populated after the extra verification step is done, when it really should just be the `T` directly.

If you're this really isn't possible to do as it is right now and seems like a reasonable feature to add I'd be glad to handle the implementation myself.

---

_Closed by @yaahc on 2018-10-24 19:37_

---

_Comment by @yaahc on 2018-10-24 19:37_

Figured it out, just have to set the default_value to an invalid value when the possible_values array is longer than 1, otherwise set it to the only possible value.

---
