<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArgMatches::try_get_flag - clap-rs/clap #5905</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>ArgMatches::try_get_flag</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/clap-rs/clap/issues/5905">#5905</a>
        opened by <a href="https://github.com/Lucretiel">@Lucretiel</a>
        on 2025-02-07 22:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Lucretiel">@Lucretiel</a> on 2025-02-07 22:38</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.5</p>
<h3>Describe your use case</h3>
<p>I'm dynamically populating a <code>Command</code>, based on the contents of a struct. Because it's happening dynamically, I'm using the <code>try</code> versions of the getters on <code>ArgMatches</code>, to handle the case where things happened incorrectly. However, there's no <code>try</code> version of <code>get_flag</code>, which I use for my bool fields.</p>
<h3>Describe the solution you'd like</h3>
<p>Would like to have a fallible <code>try_get_flag</code> on <code>ArgMatches</code>, to compliment all of the other <code>try_</code> versions of things. Currently there's no panic-free way to get an argument that you're expecting to be a <code>SetTrue</code>.</p>
<h3>Alternatives, if applicable</h3>
<p><em>No response</em></p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @Lucretiel on 2025-02-07 22:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-02-07 22:58</div>
            <div class="timeline-body"><p>Is there a reason you aren't using <code>try_get_one</code>?  <code>get_flag</code> is just a convenience helper for <code>get_one</code>.  I lean towards people using <code>try_get_one</code> when they need more rather than adding many variants of helpers (also not a fan of all of the <code>get_matches</code> / <code>parse</code> helpers and been considering reducing those)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lucretiel">@Lucretiel</a> on 2025-02-08 21:51</div>
            <div class="timeline-body"><p>I thought (because of the <code>one</code>) that <code>try_get_one</code> returns the value for an option that takes a single argument; that is, it returns <code>Some</code> when <code>--arg value</code>, <code>None</code> when <code>--arg</code> is omitted entirely, and an error otherwise. I haven't been able to find any precise documentation about the underlying &quot;data model&quot; used by <code>ArgMatches</code>; how it's populated from a <code>Command</code>, and <em>specifically</em> how the various <code>get_*</code> and <code>try_get</code>_*  methods interpret the stored data.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-02-10 15:21</div>
            <div class="timeline-body"><p>In clap v3, flags were a special case without a value in <code>ArgMatches</code>, instead users having to check for its presence.  In clap v4, we transition to always setting a value in <code>ArgMatches</code>, hence the names like <code>SetTrue</code> and <code>SetFalse</code> for flag <code>ArgAction</code>.</p>
<p>In fact, <code>SetTrue</code> is just a convenience helper for <code>Set</code> that implies</p>
<pre><code class="language-rust">arg
  .value_parser(BoolValueParser::new())
  .default_missing_value(&quot;true&quot;)
  .default_value(&quot;false&quot;)
  .num_args(0)
</code></pre>
<p>so <code>get_flag</code> is a helper for <code>get_one</code> (used for <code>Set</code>) which is a helper for <code>get_many</code> (used for <code>Append</code>, <code>num_args</code>)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:35 UTC
    </footer>
</body>
</html>
