<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>numbers as varying radix values, 15 0xF 0o17 1111 - clap-rs/clap #4564</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>numbers as varying radix values, 15 0xF 0o17 1111</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/4564">#4564</a>
        opened by <a href="https://github.com/epage">@epage</a>
        on 2022-12-20 02:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/epage">@epage</a> on 2022-12-20 02:43</div>
            <div class="timeline-body"><h3>Discussed in https://github.com/clap-rs/clap/discussions/4563</h3>
<div type='discussions-op-text'>

<p><sup>Originally posted by <strong>jtmoon79</strong> December 19, 2022</sup>
tl;dr a nice feature for numbers would allow reading passed argument as differing radix among the traditional hexadecimal, decimal, octal, and binary.</p>
<p>I have <a href="https://github.com/jtmoon79/super-speedy-syslog-searcher/blob/2157861027eff2cade51aa950a6a4300e86a1e50/src/bin/bin.rs#L533-L604">implemented this here</a>. It's a good bit of work. Would be nice if <code>clap</code> handled this for me. I'm imagining an option like <code>allow_radix_all</code></p>
<pre><code class="language-rust">    #[clap(
        required = false,
        long,
        default_value_t = 0xFFFF,
        allow_radix_all,
    )]
    number: u64,
</code></pre>
<p>And perhaps, further fine-grained options would also be allowed: <code>allow_radix_hexadecimal</code>, <code>allow_radix_octal</code>, <code>allow_radix_binary</code>.  So <code>allow_radix_all</code> would just enable all the prior.
And might even want to throw in <code>disallow_radix_decimal</code> for some users that really want such.</p>
<p>Parsing could require a prepended <code>0</code> before the radix symbol, e.g. <code>0xF</code>, <code>0d15</code>, <code>0o17</code>, <code>0b1111</code> and reject without, e.g. <code>xF</code>, <code>d15</code>, <code>o17</code>, <code>b1111</code>. <em>or</em> could be flexible and accept both. I'm not sure what is best there.</div></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @epage on 2022-12-20 02:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-derive</span> added by @epage on 2022-12-20 02:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by @epage on 2022-12-20 02:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-derive</span> removed by @epage on 2022-12-20 02:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-builder</span> added by @epage on 2022-12-20 02:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-12-20 02:50</div>
            <div class="timeline-body"><p>There are a couple routes we can go with this</p>
<ul>
<li>Create wrapper types for a specific use case and have the derive/builder automatically pick it up, like in #4074</li>
<li>Support this on the existing numeric value parsers</li>
</ul>
<p>I somewhat lean towards supporting <code>0x</code>, <code>0o</code>, and <code>0b</code> prefixes on integer value parsers without any configuration but am still undecided.  One concern with this is the slipper slope for digit separators, <a href="https://docs.rs/human-size/0.4.2/human_size/">&quot;human sizes&quot;</a>, etc which I wouldn't want to bake all of that in.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> removed by @epage on 2025-08-07 20:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-wont-fix</span> added by @epage on 2025-08-07 20:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-08-07 20:08</div>
            <div class="timeline-body"><p>I'm leaning towards this being handled externally, like with <code>clio</code> for paths.</p>
<p>In addition to the questions on which prefixes, whether a prefix is required, separates, and units, having this built-in to the existing value parsers means it is present even if a user doesn't care about it, slowing down build times and bloating binaries.</p>
<p>I'm going to go ahead and close.  However, we can re-evaluate if someone comes up with some clear motivating cases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2025-08-07 20:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:35:17 UTC
    </footer>
</body>
</html>
