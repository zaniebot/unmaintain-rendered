<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dependabot updates for `clap` uses changelog for `clap-complete` - clap-rs/clap #5902</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Dependabot updates for <code>clap</code> uses changelog for <code>clap-complete</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/5902">#5902</a>
        opened by <a href="https://github.com/duckinator">@duckinator</a>
        on 2025-02-05 18:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/duckinator">@duckinator</a> on 2025-02-05 18:43</div>
            <div class="timeline-body"><p>Dependabot PRs to update <code>clap</code> are mostly correct, but link to changelogs for <code>clap-complete</code>, which presents conflicting information about what's in an update.</p>
<p>I don't know if/how this can be fixed on your end, but I wanted to make sure you were aware of it!</p>
<p>axodotdev/cargo-dist#1742 is an example of this problem.</p>
<p><img src="https://github.com/user-attachments/assets/190b52bc-da7a-44a4-9580-15d72f044485" alt="Image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-02-05 19:10</div>
            <div class="timeline-body"><p>So the Releases and Changelog sections are correct.</p>
<p>The Commits section is not.  The range is using the wrong tags.  The version number is correct but not the package name.  Our <a href="https://github.com/clap-rs/clap/releases">Releases</a> do correctly associate the release with the tag, so its not that.</p>
<p>Looking at their code, when they <code>findTagOfRelease</code>, they assume there will be a prefix to the tag which ours does not have.  However, I'm not seeing why it would select one of the other tags.  Everything after the prefix must be a version to select a tag, otherwise it falls back to other information
https://github.com/renovatebot/renovate/blob/55b5919dd1045df9275e80d4cafd03a6e325cc06/lib/workers/repository/update/pr/changelog/source.ts#L200-L219</p>
<p>I'd prefer not to change our tag structure for just this.  It might be good to report this to RenovateBot as it should be able to</p>
<ul>
<li>Get the tag from the Release</li>
<li>Get the sha from the Release</li>
<li>Get the sha from the <code>.crate</code> file</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/duckinator">@duckinator</a> on 2025-02-06 04:04</div>
            <div class="timeline-body"><p>I agree, that definitely sounds like a bug on their end. I'll go ahead and close this, and make sure there's an issue on their repo. üëç</p>
<p><strong>EDIT:</strong> I missed that you were talking about rennovatebot, which is different than dependabot. I do agree that it's probably not a problem with this repo itself, though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @duckinator on 2025-02-06 04:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:32:09 UTC
    </footer>
</body>
</html>
