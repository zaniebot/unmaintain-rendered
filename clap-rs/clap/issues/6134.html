<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cannot parse arguments with leading dash - clap-rs/clap #6134</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Cannot parse arguments with leading dash</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/6134">#6134</a>
        opened by <a href="https://github.com/just-ero">@just-ero</a>
        on 2025-09-19 09:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/just-ero">@just-ero</a></div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Rust Version</h3>
<p>1.86.0 (05f9846f8 2025-03-31)</p>
<h3>Clap Version</h3>
<p>4.5.41</p>
<h3>Minimal reproducible code</h3>
<pre><code class="language-rust">#[derive(clap::Parser)]
#[command()]
struct Args {
    #[arg()]
    my_arg: String,
}

fn main() {
    _ = Args::parse();
}
</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<p><code>cargo run -- &quot;-foo&quot;</code></p>
<h3>Actual Behaviour</h3>
<pre><code>error: unexpected argument '-f' found

  tip: to pass '-f' as a value, use '-- -f'
</code></pre>
<h3>Expected Behaviour</h3>
<p>No error.</p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
<h3>Debug Output</h3>
<pre><code>[clap_builder::builder::command]Command::_do_parse
[clap_builder::builder::command]Command::_build: name=&quot;matrix-to-gitlab&quot;
[clap_builder::builder::command]Command::_propagate:matrix-to-gitlab
[clap_builder::builder::command]Command::_check_help_and_version:matrix-to-gitlab expand_help_tree=false
[clap_builder::builder::command]Command::long_help_exists
[clap_builder::builder::command]Command::_check_help_and_version: Building default --help
[clap_builder::builder::command]Command::_propagate_global_args:matrix-to-gitlab
[clap_builder::builder::debug_asserts]Command::_debug_asserts
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:my_arg
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:help
[clap_builder::builder::debug_asserts]Command::_verify_positionals
[clap_builder::parser::parser]Parser::get_matches_with
[clap_builder::parser::parser]Parser::parse
[clap_builder::parser::parser]Parser::get_matches_with: Begin parsing '&quot;-t9ErJApPG9RqRZ2.H-t74iaYe3XrGCttKszQ-ULvmQ-99LGBdLLCHYrh!YdRHFD&quot;'
[clap_builder::parser::parser]Parser::possible_subcommand: arg=Ok(&quot;-t9ErJApPG9RqRZ2.H-t74iaYe3XrGCttKszQ-ULvmQ-99LGBdLLCHYrh!YdRHFD&quot;)
[clap_builder::parser::parser]Parser::get_matches_with: sc=None
[clap_builder::parser::parser]Parser::parse_short_arg: short_arg=ShortFlags { inner: &quot;t9ErJApPG9RqRZ2.H-t74iaYe3XrGCttKszQ-ULvmQ-99LGBdLLCHYrh!YdRHFD&quot;, utf8_prefix: CharIndices { front_offset: 0, iter: Chars(['t', '9', 'E', 'r', 'J', 'A', 'p', 'P', 'G', '9', 'R', 'q', 'R', 'Z', '2', '.', 'H', '-', 't', '7', '4', 'i', 'a', 'Y', 'e', '3', 'X', 'r', 'G', 'C', 't', 't', 'K', 's', 'z', 'Q', '-', 'U', 'L', 'v', 'm', 'Q', '-', '9', '9', 'L', 'G', 'B', 'd', 'L', 'L', 'C', 'H', 'Y', 'r', 'h', '!', 'Y', 'd', 'R', 'H', 'F', 'D']) }, invalid_suffix: None }
[clap_builder::parser::parser]Parser::parse_short_arg:iter:t
[clap_builder::parser::parser]Parser::get_matches_with: After parse_short_arg NoMatchingArg { arg: &quot;-t&quot; }
[ clap_builder::output::usage]Usage::create_usage_with_title
[ clap_builder::output::usage]Usage::create_usage_no_title
[ clap_builder::output::usage]Usage::write_help_usage
[ clap_builder::output::usage]Usage::write_arg_usage; incl_reqs=true
[ clap_builder::output::usage]Usage::needs_options_tag
[ clap_builder::output::usage]Usage::needs_options_tag:iter: f=help
[ clap_builder::output::usage]Usage::needs_options_tag:iter Option is built-in
[ clap_builder::output::usage]Usage::needs_options_tag: [OPTIONS] not required
[ clap_builder::output::usage]Usage::write_args: incls=[]
[ clap_builder::output::usage]Usage::get_args: unrolled_reqs=[&quot;my_arg&quot;]
[ clap_builder::output::usage]Usage::write_subcommand_usage
[ clap_builder::output::usage]Usage::create_usage_with_title: usage=Usage: matrix-to-gitlab.exe &lt;MY_ARG&gt;
[clap_builder::builder::command]Command::color: Color setting...
[clap_builder::builder::command]Auto
[clap_builder::builder::command]Command::color: Color setting...
[clap_builder::builder::command]Auto
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by @just-ero on 2025-09-19 09:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vjgaur">@vjgaur</a> on 2025-09-19 11:33</div>
            <div class="timeline-body"><p>I am taking this up</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-09-19 11:35</div>
            <div class="timeline-body"><p>Have you tried enabling <a href="https://docs.rs/clap/latest/clap/struct.Arg.html#method.allow_hyphen_values"><code>allow_hyphen_values = true</code></a>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vjgaur">@vjgaur</a> on 2025-09-19 11:44</div>
            <div class="timeline-body"><blockquote>
<p>Have you tried enabling <a href="https://docs.rs/clap/latest/clap/struct.Arg.html#method.allow_hyphen_values"><code>allow_hyphen_values = true</code></a>?</p>
</blockquote>
<p>Are you asking me or the original issue creator ?
For me its first time going through clap repo, I was investigating the issue in parser.rs in parser_short_arg function
Let me know if this is not the issue and is an expected behaviour.  If configuring allow_hyphen_values = true works than  this issue should be closed .</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vjgaur">@vjgaur</a> on 2025-09-19 12:19</div>
            <div class="timeline-body"><p>@epage I have added the test cases in the app_setting.rs to verify this. Its working fine. shall I raise the PR</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/6135.html">clap-rs/clap#6135</a> on 2025-09-19 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vjgaur">@vjgaur</a> on 2025-09-19 12:43</div>
            <div class="timeline-body"><p>@epage @just-ero I have created the pr for this issue #<a href="https://github.com/clap-rs/clap/pull/6135">6134</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-09-19 15:30</div>
            <div class="timeline-body"><p>As this is working as expected, I'm going to go ahead and close</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2025-09-19 15:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/6137.html">clap-rs/clap#6137</a> on 2025-09-19 20:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:49:38 UTC
    </footer>
</body>
</html>
