<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A `require*` method that expressing `and(&amp;&amp;)` condition when requesting an argument - clap-rs/clap #2326</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>A <code>require*</code> method that expressing <code>and(&amp;&amp;)</code> condition when requesting an argument</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/2326">#2326</a>
        opened by <a href="https://github.com/zzz845zz">@zzz845zz</a>
        on 2021-02-04 09:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zzz845zz">@zzz845zz</a></div>
            <div class="timeline-body"><h3>Make sure you completed the following tasks</h3>
<ul>
<li>[x] Searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[x] Searched the closed issues</li>
</ul>
<h3>Describe your use case</h3>
<p>I think the function that requires some arguments only if multiple conditions are satisfied is helpful.</p>
<p>The example of <code>required_ifs</code> below is similar to <code>or(||)</code> expression, not <code>and(&amp;&amp;)</code> (from <a href="https://docs.rs/clap/2.33.3/clap/struct.Arg.html#examples-27">here</a>).</p>
<ul>
<li>In this example, <code>cfg</code> is required when <code>--extra=val</code> <strong>or</strong> <code>--option=spec</code></li>
<li>I want a way to require <code>cfg</code> when <code>--extra=val</code> <strong>and</strong> <code>--option=spec</code></li>
</ul>
<pre><code class="language-rust">let res = App::new(&quot;prog&quot;)
    .arg(Arg::with_name(&quot;cfg&quot;)
        .required_ifs(&amp;[
            (&quot;extra&quot;, &quot;val&quot;),
            (&quot;option&quot;, &quot;spec&quot;)
        ])
        .takes_value(true)
        .long(&quot;config&quot;))
    .arg(Arg::with_name(&quot;extra&quot;)
        .takes_value(true)
        .long(&quot;extra&quot;))
    .arg(Arg::with_name(&quot;option&quot;)
        .takes_value(true)
        .long(&quot;option&quot;))
    .get_matches_from_safe(vec![
        &quot;prog&quot;, &quot;--option&quot;, &quot;other&quot;
    ]);

assert!(res.is_ok()); // We didn't use --option=spec, or --extra=val so &quot;cfg&quot; isn't required
</code></pre>
<p>For more simply, the case above likes</p>
<pre><code class="language-c">if (extra==&quot;val&quot; || option==&quot;spec&quot;) {
    // use cfg!!
}
</code></pre>
<p>But what i want is the example below</p>
<pre><code class="language-c">if (extra==&quot;val&quot; &amp;&amp; option==&quot;spec&quot;) {
    // use cfg!!
} 
</code></pre>
<h3>Additional context</h3>
<p>Related to #2323</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by @zzz845zz on 2021-02-04 09:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-02-04 11:59</div>
            <div class="timeline-body"><p>The name should be <code>require_if_eq_all</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">:money_with_wings: $10</span> added by @pksunkara on 2021-02-04 11:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.1" by @pksunkara on 2021-02-04 12:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2371.html">clap-rs/clap#2371</a> on 2021-02-27 18:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pksunkara on 2021-02-28 13:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:47:50 UTC
    </footer>
</body>
</html>
