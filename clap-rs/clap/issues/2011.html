<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help subcommand behaves different than help flags when `App::replace` is used - clap-rs/clap #2011</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Help subcommand behaves different than help flags when <code>App::replace</code> is used</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/2011">#2011</a>
        opened by <a href="https://github.com/nickelc">@nickelc</a>
        on 2020-07-13 17:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/nickelc">@nickelc</a></div>
            <div class="timeline-body"><p>Using clap <code>master</code></p>
<h3>Code</h3>
<pre><code class="language-rust">use clap::clap_app;

fn main() {
    let app = clap_app!(prog =&gt;
        (replace: &quot;install&quot;, &amp;[&quot;module&quot;, &quot;install&quot;])
        (@subcommand module =&gt;
            (@subcommand &quot;install&quot; =&gt;
                (about: &quot;Install module&quot;)
            )
        )
    );
    app.get_matches();
}
</code></pre>
<h3>Steps to reproduce the issue</h3>
<ol>
<li>Run <code>cargo r -- install --help</code></li>
<li>Run <code>cargo r -- help install</code></li>
</ol>
<h4><code>cargo r -- install --help</code> Output</h4>
<pre><code>prog-module-install 
Install module

USAGE:
    prog module install

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information
</code></pre>
<h4><code>cargo r -- help install</code> Output</h4>
<pre><code>error:  The subcommand 'install' wasn't recognized

USAGE:
	prog help &lt;subcommands&gt;...

For more information try --help
</code></pre>
<p>I expected the replacement of <code>help install</code> with <code>help module install</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @nickelc on 2020-07-13 17:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.0" by @pksunkara on 2020-07-19 12:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.0" by @pksunkara on 2020-07-19 12:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-07-19 12:50</div>
            <div class="timeline-body"><p>I am still deciding whether this is intended or not. <code>replace</code> is similar to aliases but for more args than just one.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.0" by @pksunkara on 2020-07-19 12:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-08-23 05:05</div>
            <div class="timeline-body"><p>@CreepySkeleton Need your opinion on this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-08-23 09:27</div>
            <div class="timeline-body"><p>My opinion is that <code>replace</code> was a badly designed feature. Something that OP described (cross-level subcommand aliases) was the reason <code>replace</code> was added in the first place, and while it does kinda solve the problem, it adds more problems (help messages don't mention it at all and there's no way for them to do so, malfunctioning help subcommand) and it doesn't quite blend with the rest of the machinery (essentially being a C-like dumb preprocessor the rest of clap isn't even aware of).</p>
<p>I think the solution here is to develop a working cross-level aliasing mechanism (and possibly ditch <code>replace</code> but that questionable).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: alias</span> added by @pksunkara on 2020-08-23 09:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.0" by @pksunkara on 2021-10-09 00:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "4.0" by @pksunkara on 2021-10-09 00:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "4.0" by @epage on 2021-10-09 10:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.0" by @epage on 2021-10-09 10:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-10-09 10:45</div>
            <div class="timeline-body"><p>In case people want history, <code>replace</code> was added in https://github.com/clap-rs/clap/pull/1697 to resolve https://github.com/clap-rs/clap/issues/1603</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2836.html">clap-rs/clap#2836</a> on 2021-10-09 15:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.0" by @epage on 2021-10-09 15:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-10-09 15:50</div>
            <div class="timeline-body"><p>Cleared the milestone since it looks like we are punting on this by putting <code>App::replace</code> behind a feature flag.  See https://github.com/clap-rs/clap/issues/2836</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/158.html">epage/clapng#158</a> on 2021-12-06 20:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/212.html">epage/clapng#212</a> on 2021-12-06 22:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help message</span> added by @epage on 2021-12-08 19:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: alias</span> removed by @epage on 2021-12-08 19:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by @epage on 2021-12-10 21:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../spinframework/spin/issues/1117.html">spinframework/spin#1117</a> on 2023-02-14 00:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-03-23 20:49</div>
            <div class="timeline-body"><p>Cross posting from #2836 for greater visibility</p>
<blockquote>
<p>Due to the lack of interest on this tracking issue, I'm considering removing this unstable feature.</p>
<p>Any concerns people want to raise?</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4805.html">clap-rs/clap#4805</a> on 2023-03-28 16:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2023-03-28 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2023-03-28 16:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:47:42 UTC
    </footer>
</body>
</html>
