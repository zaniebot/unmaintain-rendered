<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error trait not implemented for clap::Error - clap-rs/clap #2097</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Error trait not implemented for clap::Error</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/2097">#2097</a>
        opened by <a href="https://github.com/jzrake">@jzrake</a>
        on 2020-08-22 19:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jzrake">@jzrake</a></div>
            <div class="timeline-body">Description
<p>Function should return a result with a generic error, <code>Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt;</code>. Even though Clap seems to implement the <code>std::error::Error</code> trait, the following fails to compile:</p>
Code
<pre><code>use clap::Clap;

fn main() {
    #[derive(Clap)]
    struct Opts {}

    let _result: Box&lt;dyn std::error::Error&gt; = Box::new(Opts::try_parse().err().unwrap());
}
</code></pre>
<p>Compiling fails with:</p>
<pre><code>the trait `std::error::Error` is not implemented for `clap::parse::errors::Error`
</code></pre>
Version
<ul>
<li><strong>Rust</strong>: 1.45.2</li>
<li><strong>Clap</strong>: 3.0.0-beta.1</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by <a href="https://github.com/jzrake">@jzrake</a> on 2020-08-22 19:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-08-23 04:54</div>
            <div class="timeline-body"><p>Yeah, we removed in 3.0.0-beta.1. @CreepySkeleton What do you think about this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;3.0&quot; by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-08-23 04:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: errors</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-08-23 04:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-08-23 05:49</div>
            <div class="timeline-body"><p>I have nothing against, but let&#x27;s wait until Refactor is landed (rebasing it is kinda painful process).</p>
<p>(It&#x27;s literally one line by the way).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#2116</a> on 2020-08-28 17:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/bors[bot]">@bors[bot]</a> on 2020-08-29 08:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-08-29 14:06</div>
            <div class="timeline-body"><blockquote>
<p>Function should return a result with a generic error, Result&lt;(), Box&gt;.</p>
</blockquote>
<p>It really shouldn&#x27;t. As long as the Err type implements <code>std:;error::Error</code>, the snippet above should compile just fine (and it does). @jzrake I&#x27;m curious what led you to think that the return type should necessarily be boxed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jzrake">@jzrake</a> on 2020-08-29 14:11</div>
            <div class="timeline-body"><p>Right, good question. I had a function that could fail with a different category of error, in addition to a Clap error. I intended to handle this by erasing the error type. However I am new to Rust -- is there is a more idiomatic way to solve that situation?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-08-29 14:18</div>
            <div class="timeline-body"><p>You should look into crates called thiserror and anyhow. Also read some
blog articles about these crates and how they are used.</p>
<p>On Sat, Aug 29, 2020, 16:11 jzrake <a href="mailto:notifications@github.com">notifications@github.com</a> wrote:</p>
<blockquote>
<p>Right, good question. I had a function that could fail with a different
category of error, in addition to a Clap error. I intended to handle this
by erasing the error type. However I am new to Rust -- is there is a more
idiomatic way to solve that situation?</p>
<p>â€”
You are receiving this because you commented.
Reply to this email directly, view it on GitHub
<a href="https://github.com/clap-rs/clap/issues/2097#issuecomment-683295986">clap-rs/clap#2097</a>, or
unsubscribe
<a href="https://github.com/notifications/unsubscribe-auth/AABKU32WY5LPFIMZQGCZDT3SDEEBNANCNFSM4QIH7S2A">https://github.com/notifications/unsubscribe-auth/AABKU32WY5LPFIMZQGCZDT3SDEEBNANCNFSM4QIH7S2A</a>
.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-08-29 15:58</div>
            <div class="timeline-body"><p>I recommend <a href="http://www.sheshbabu.com/posts/rust-error-handling/">this arcticle</a> for a beginner. The &quot;Applications vs Libraries&quot; section explains why exactly we have a custom error type, not <code>Box</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:57:53 UTC
    </footer>
</body>
</html>
