<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support hiding flags/subcommands/possible values/aliases for native compeletions - clap-rs/clap #3951</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support hiding flags/subcommands/possible values/aliases for native compeletions</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/3951">#3951</a>
        opened by <a href="https://github.com/epage">@epage</a>
        on 2022-07-19 14:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a></div>
            <div class="timeline-body"><p>We shouldn't offer hidden options by default but complete them if the user starts typing them</p>
<p>See #3166 for more details on native completions</p>
<ul>
<li><a href="https://github.com/clap-rs/clap/blob/master/clap_complete/src/dynamic.rs">code</a></li>
<li><a href="https://github.com/clap-rs/clap/blob/master/clap_complete/tests/dynamic.rs">tests</a></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @epage on 2022-07-19 14:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-completion</span> added by @epage on 2022-07-19 14:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-easy</span> added by @epage on 2022-07-19 14:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3166.html">clap-rs/clap#3166</a> on 2022-07-19 14:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1335.html">clap-rs/clap#1335</a> on 2022-07-19 14:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">:money_with_wings: $20</span> added by @epage on 2022-09-13 14:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-help-wanted</span> added by @epage on 2022-09-20 14:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4265.html">clap-rs/clap#4265</a> on 2022-09-26 22:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4853.html">clap-rs/clap#4853</a> on 2023-04-21 14:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5283.html">clap-rs/clap#5283</a> on 2024-01-04 18:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5412.html">clap-rs/clap#5412</a> on 2024-03-21 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/shannmu">@shannmu</a> on 2024-06-21 14:04</div>
            <div class="timeline-body"><p>i will work on this later.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Support hiding flags/subcommands/possible values for native compeletions" to "Support hiding flags/subcommands/possible values/aliases for native compeletions" by @epage on 2024-06-21 14:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2024-06-21 14:09</div>
            <div class="timeline-body"><p>Before we do this:</p>
<ul>
<li>We should make sure subcommand visible aliases are supported</li>
</ul>
<p>In doing this, we should hide hidden items by default unless there are no other completions available.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2024-06-21 14:10</div>
            <div class="timeline-body"><p>PR #5283 started work on this but it seemed to have stalled out</p>
<p>Per usual, I would like to see</p>
<ul>
<li>Tests added / updated in one commit, showing current behavior</li>
<li>As features are implemented, update the tests so they show the new behavior and the diff shows the change in behavior</li>
</ul>
<p>see also my comment from that PR:</p>
<blockquote>
<p>There is one point I wasn't clear about in the expectations for this: we should probably keep a completion hidden unless there are no visible choices.</p>
<p>In reviewing this, I also noticed</p>
<ul>
<li><p>I didn't mention hidden aliases</p>
</li>
<li><p>We aren't showing visible subcommand aliases</p>
</li>
</ul>
<p>I do find it less than ideal how inconsistent we are with where we check <code>is_hide_set</code>. However, I assume cleaning that up would naturally fall out of the above as we'd need to start returning <code>(value, is_hidden, help)</code> (maybe turned into a struct? if so, ideally that refactor would be its own commit) so we can handle all of these cases.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5549.html">clap-rs/clap#5549</a> on 2024-06-25 08:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2024-07-05 14:11</div>
            <div class="timeline-body"><p>Something @shannmu called out is our idea for showing hidden content is only if the user started it, we'll never be able to show hidden short flags or hidden short flag aliases.  We'll still need to make sure we can complete values for them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5583.html">clap-rs/clap#5583</a> on 2024-07-17 09:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5584.html">clap-rs/clap#5584</a> on 2024-07-17 09:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5585.html">clap-rs/clap#5585</a> on 2024-07-17 09:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2024-07-19 16:35</div>
            <div class="timeline-body"><p>@shannmu I went ahead and merged #5585 because it was complete-enough on its own but we still lack support for completing hidden aliases for PossibleValue.</p>
<p>I'll make #5480 responsible for supporting visible aliases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5480.html">clap-rs/clap#5480</a> on 2024-07-19 16:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5058.html">clap-rs/clap#5058</a> on 2024-07-19 16:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2024-07-26 14:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:48:42 UTC
    </footer>
</body>
</html>
