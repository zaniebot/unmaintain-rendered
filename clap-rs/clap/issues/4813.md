```yaml
number: 4813
title: "Add `-r, --recursive` flags to help command"
type: issue
state: open
author: SUPERCILEX
labels:
  - C-enhancement
  - A-help
  - S-waiting-on-design
assignees: []
created_at: 2023-03-30T22:49:56Z
updated_at: 2023-11-09T22:32:30Z
url: https://github.com/clap-rs/clap/issues/4813
synced_at: 2026-01-10T01:57:48Z
```

# Add `-r, --recursive` flags to help command

---

_Issue opened by @SUPERCILEX on 2023-03-30 22:49_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

master

### Describe your use case

`./binary help -r` will print the help of every subcommand recursively. This fixes https://github.com/clap-rs/clap/issues/3934 and kind of acts like a man page.

---

_Comment by @epage on 2023-03-30 23:47_

Know of any precedence in any applications?

How would you expect the output from the commands to be delineated?  Just concatenating one output after another?  Dividers?

In what way would this act like a man page?  Most man pages I've seen are either like `git` or `git stash` and don't blindly include all subcommands.  Having it be driven by the definition of the command, rather than the user, is being tracked in #1334.

I'll be upfront that I lean more in favor of #1334 rather than this.  Another element is I have been considering trying to allow arguments to be ignored so you can insert a `help` anywhere and it will then render the relevant help.  An example of where that would be relevant is [command chaining](https://github.com/clap-rs/clap/issues/2222#issuecomment-1490598453).

---

_Label `A-help` added by @epage on 2023-03-30 23:47_

---

_Label `S-waiting-on-design` added by @epage on 2023-03-30 23:47_

---

_Comment by @SUPERCILEX on 2023-03-31 00:16_

> Know of any precedence in any applications?

The Ocaml one looks like this: https://github.com/facebook/infer/blob/main/sledge/sledge-help.txt

> How would you expect the output from the commands to be delineated? Just concatenating one output after another? Dividers?

`====== path to sub command ======` seems reasonable, but I don't have any real preference here.

> In what way would this act like a man page?

I mean it in the sense that you get all the information at once.

> I'll be upfront that I lean more in favor of https://github.com/clap-rs/clap/issues/1334 rather than this.

I'm not sure these two ideas are mutually exclusive. This one is nicer in the sense that you don't force users to see the entire CLI unless they want to.

> An example of where that would be relevant is https://github.com/clap-rs/clap/issues/2222#issuecomment-1490598453.

This workflow appears to be centered around appending `--help` to an existing subcommand which doesn't seem related to the `help` subcommand.

---

_Comment by @epage on 2023-03-31 00:37_

At least in a text document, the OCaml version looks hard to read.  The dividers don't really stand out for the different levels of the document and that requires a lot of scrolling / scanning to find the appropriate section.  I feel like if we did this, it would be blocked on #4201 to ensure we had a good experience for the users.  Yes, users can manually pipe but then they lose all styling and have to go through extra hoops (env variables for clap, flags to less) for it to work

> In what way would this act like a man page?
>
> I mean it in the sense that you get all the information at once.

As I said, most man pages I've looked at don't show you everything at once.  `cargo` splits it up by subcommand.  `git` mostly does except in cases like `git stash`.

> This workflow appears to be centered around appending --help to an existing subcommand which doesn't seem related to the help subcommand.

You can just as easily substitute `help` in that discussion as `--help`.

---

_Comment by @SUPERCILEX on 2023-03-31 00:52_

> text document [...] looks hard to read

Right, and I don't think that's a solvable problem since you have to render things in your head. For output in a terminal, maybe colors could be used or the font size could be changed? (not sure if that's a thing)

Pagination sounds reasonable.

> most man pages I've looked at don't show you everything at once

Bad example then, no need to fixate on it.

> You can just as easily substitute help in that discussion as --help.

You're thinking `some command help`? That's very odd to me. Why break convention instead of having people type `some command --help`?

---

_Comment by @epage on 2023-03-31 02:19_

> You're thinking some command help? That's very odd to me. Why break convention instead of having people type some command --help?

Whats odd about it?  Its supported today.

---

_Comment by @SUPERCILEX on 2023-03-31 02:26_

Hmmm, I don't think we're talking about the same thing. `some help command` is supported, but how could `some command help` be supported when `command` can take arguments?

---

_Comment by @epage on 2023-03-31 12:26_

`some command help` is supported if it takes subcommands.  The issue I linked to is about a new `Command::chain` that, when enabled, will cause all subcommands to effectively have their sibling subcommands as subsubcommands, so if enabled for `some`, then  `some command help`  would list all subcommands of `some`.

---

_Comment by @SUPERCILEX on 2023-03-31 17:44_

Gotya, didn't know that was a thing. Then I'm not sure how these features could interact. Maybe the recursive flag could only work for the root help, but that still might conflict.

---

_Comment by @epage on 2023-11-09 22:32_

FYI #5206 is up for closing out #1334.  While not ideal, this could be abused for golden state testing to have the test force enable it recursively and then render the help.  This will lose help heading information, long abouts for subcommands, and maybe one or two other things.

---

_Referenced in [clap-rs/clap#5206](../../clap-rs/clap/pulls/5206.md) on 2023-11-10 21:00_

---
