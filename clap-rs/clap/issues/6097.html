<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ignore case on commands and sub-commands - clap-rs/clap #6097</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Ignore case on commands and sub-commands</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/6097">#6097</a>
        opened by <a href="https://github.com/Urgau">@Urgau</a>
        on 2025-08-09 14:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Urgau">@Urgau</a> on 2025-08-09 14:53</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.5.39</p>
<h3>Describe your use case</h3>
<p>We use clap to parse commands of a bot. Those commands might be entered on a regular input prompt, which on mobile makes the First letter in capital, making clap throw out an error because the case are not identical.</p>
<h3>Describe the solution you'd like</h3>
<p>Similar to the already existing <a href="https://docs.rs/clap/latest/clap/struct.Arg.html#method.ignore_case"><code>Arg::ignore_case</code></a> option for arguments, we would like to have the same feature for <code>Command</code>.</p>
<pre><code class="language-rust">impl Command {
    pub fn ignore_case(self, yes: bool) -&gt; Command;
}
</code></pre>
<p>The option would only affect the command name, it would not be application specific.</p>
<h3>Alternatives, if applicable</h3>
<p><em>No response</em></p>
<h3>Additional Context</h3>
<p>Related to https://github.com/rust-lang/triagebot/pull/2115</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @Urgau on 2025-08-09 14:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-08-11 17:36</div>
            <div class="timeline-body"><p>I thought more extensive case insensitivity had come up before but I can only find #4955 which the person handled by adding aliases.</p>
<p>You mention commands.  Are you needing this for subcommands only or also flags?</p>
<p>Implementation-wise, I'm unsure how this would be to support.  We pre-calculate the flag to <code>Arg</code> mappings, rather than doing a linear search every time, which may make it harder to swap out how that mapping works.  I'd have to check how we handle this for subcommands.</p>
<p>We'd also need to be sure to check for case ambiguous duplicates in our debug asserts.  Short flag duplicates could especially confuse people.</p>
<p>How important is being able to set it everywhere?  Depending on how the discussion for the above goes, this could end up being a global setting that clap propagates out.  If not, <code>Command::mut_args</code> would be one way to apply something to every argument without us directly supporting propagating it.  However, we don't have similar for <code>mut_subcommands</code> though we could add it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by @epage on 2025-08-11 17:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-parsing</span> added by @epage on 2025-08-11 17:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Urgau">@Urgau</a> on 2025-08-11 18:59</div>
            <div class="timeline-body"><blockquote>
<p>Are you needing this for subcommands only or also flags?</p>
</blockquote>
<p>Subcommands only. Smartphone keyboards don't seems to make the first letter after <code>-</code> or <code>--</code> upper.</p>
<blockquote>
<p>How important is being able to set it everywhere?</p>
</blockquote>
<p>Subcommands and arguments <em>(already handled)</em> are the only I'm interested in.</p>
<blockquote>
<p>Depending on how the discussion for the above goes, this could end up being a global setting that clap propagates out.</p>
</blockquote>
<p>That would fine for us. My proposal was based on <code>Arg::ignore_case</code> which is done per arg, but in our case we would want to apply it to every subcommands and arguments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-08-11 19:48</div>
            <div class="timeline-body"><p>I went ahead and added <a href="https://docs.rs/clap/latest/clap/struct.Command.html#method.mut_subcommands"><code>mut_subcommands</code></a> and added an example for your case.</p>
<p>Would that work?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../rust-lang/triagebot/pulls/2115.html">rust-lang/triagebot#2115</a> on 2025-08-11 20:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Urgau">@Urgau</a> on 2025-08-12 19:50</div>
            <div class="timeline-body"><p>Yes, that works for us.</p>
<p><em>For the record I ended-up modifying your example a bit to allow it to recurse into sub-commands.</em></p>
<pre><code class="language-rust">fn allow_title_case(sub: clap::Command) -&gt; clap::Command {
    let name = sub.get_name();
    let alias = name
        .chars()
        .enumerate()
        .map(|(i, c)| if i == 0 { c.to_ascii_uppercase() } else { c })
        .collect::&lt;String&gt;();
    sub.alias(alias)
        // Recursively allow title-case subcommands
       .mut_subcommands(allow_title_case)
}

let command = command.mut_subcommands(allow_title_case);
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> removed by @epage on 2025-08-12 19:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-wont-fix</span> added by @epage on 2025-08-12 19:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-08-12 19:52</div>
            <div class="timeline-body"><p>I would be inclined to close this then unless more use cases come up that show the necessity of this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2025-08-12 19:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:35 UTC
    </footer>
</body>
</html>
