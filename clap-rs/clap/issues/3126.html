<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Replace one big docs.rs page with a book - clap-rs/clap #3126</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Replace one big docs.rs page with a book</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/3126">#3126</a>
        opened by <a href="https://github.com/epage">@epage</a>
        on 2021-12-09 16:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/epage">@epage</a> on 2021-12-09 16:17</div>
            <div class="timeline-body"><p><a href="https://github.com/CreepySkeleton"><img src="https://avatars.githubusercontent.com/u/50968528?v=4" align="left" width="96" height="96" hspace="10"></img></a> <strong>Issue by <a href="https://github.com/CreepySkeleton">CreepySkeleton</a></strong>
<em>Tuesday Dec 31, 2019 at 04:05 GMT</em>
<em>Originally opened as https://github.com/TeXitoi/structopt/issues/319</em></p>
<hr />
<p>Right now, <code>structopt</code>'s documentation is nothing more than just a one big page on docs.rs.</p>
<p>While this approach has some advantages, namely:</p>
<ul>
<li>One big page makes it easier to search via <code>Ctrl+F</code>.</li>
<li>Code snippets can be tested with simple <code>cargo test</code>.</li>
</ul>
<p>It also has a great number of disadvantages:</p>
<ul>
<li>Such a huge page isn't really easy to navigate. <code>Ctrl+F</code> will help you only if you know what you need <em>exactly</em>, otherwise you are doomed to scroll up and down until you happen to stumble on the right topic.</li>
<li>Our artificial TOC isn't really helpful since it's placed only at the beginning of the page, once you hit a tittle you have no easy way back, you're going to have to scroll.</li>
<li><code>rustdoc</code> does not verify links.</li>
<li>We can't tweak the theme (&quot;Important&quot; blocks look ugly and don't really attract attention).</li>
<li>We can't fix typos without publishing a new version (this is arguable).</li>
</ul>
<p>Thus, I propose to make a book via <a href="https://github.com/rust-lang/mdBook"><code>mdbook</code></a> and publish it via github pages. Tt addresses all the disadvantages above:</p>
<ul>
<li>Built-in search, works <em>great</em>.</li>
<li>Built-in TOC, looks awesome.</li>
<li>We can verify links via <a href="https://github.com/Michael-F-Bryan/mdbook-linkcheck">mdbook-linkcheck</a>, integration is trivial.</li>
<li>We can inject any <code>.css</code> styles we please.</li>
<li>We can update it whenever we wish (the question is, should we?).</li>
<li>Testing is possible via <a href="https://github.com/budziq/rust-skeptic"><code>skeptic</code></a>, integration is pretty easy.</li>
</ul>
<p>In fact, I already made a <a href="https://github.com/CreepySkeleton/structopt-book-test.github.io">test repo</a>, and published it on <a href="https://creepyskeleton.github.io/structopt-book-test.github.io/">github pages</a>.</p>
<p>What do you think?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-09 16:17</div>
            <div class="timeline-body"><p><a href="https://github.com/TeXitoi"><img src="https://avatars.githubusercontent.com/u/5787066?v=4" align="left" width="48" height="48" hspace="10"></img></a> <strong>Comment by <a href="https://github.com/TeXitoi">TeXitoi</a></strong>
<em>Tuesday Jan 07, 2020 at 20:29 GMT</em></p>
<hr />
<p>Having the doc on docs.rs is easier to find, and needed. We must be careful to have a good doc here whatever we do around.</p>
<p>A mdbook can be a plus, but it can't replace completely the doccomments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-09 16:17</div>
            <div class="timeline-body"><p><a href="https://github.com/CreepySkeleton"><img src="https://avatars.githubusercontent.com/u/50968528?v=4" align="left" width="48" height="48" hspace="10"></img></a> <strong>Comment by <a href="https://github.com/CreepySkeleton">CreepySkeleton</a></strong>
<em>Saturday Jan 11, 2020 at 16:34 GMT</em></p>
<hr />
<blockquote>
<p>but it can't replace completely the doccomments.</p>
</blockquote>
<p>It can't, and it won't.</p>
<p>Doc comments are superb at documenting <em>items</em>: the <code>StructOpt</code> trait, modules, the crate itself. They are so wonderful at this task because they offer crosslinks out of box, you can just look at the function signature, click on some type within it, and, congrats!, you are reading the docs for this type now.</p>
<p>But the situation is completely different for proc-macros and their attributes in particular. They don't have any builtin links, they have no logical structure and the only way to document them is the plain text with manually crafted links. <code>rustdoc</code> doesn't offer anything for proc-macros.</p>
<p>So, every single proc-macro's documentation on docs.rs is doomed to grow and grow and grow, until it's so large that it's basically unnavigatable.</p>
<p>What I'm proposing is pretty much the same, but logically separated into different pages, which is much easier to both read and navigate.</p>
<p>If you are concerned that the book would be undiscoverable - well <code>serde</code> has the same <a href="https://docs.rs/serde">summary on docs.rs + book</a> solution; the link to the book is present in the first paragraph. We could render it bold so it's more attractive.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-09 16:17</div>
            <div class="timeline-body"><p><a href="https://github.com/TeXitoi"><img src="https://avatars.githubusercontent.com/u/5787066?v=4" align="left" width="48" height="48" hspace="10"></img></a> <strong>Comment by <a href="https://github.com/TeXitoi">TeXitoi</a></strong>
<em>Saturday Feb 01, 2020 at 10:24 GMT</em></p>
<hr />
<p>OK, but if clap v3 will be out in a &quot;short&quot; time, maibe that's better to focus on it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-09 16:17</div>
            <div class="timeline-body"><p><a href="https://github.com/CreepySkeleton"><img src="https://avatars.githubusercontent.com/u/50968528?v=4" align="left" width="48" height="48" hspace="10"></img></a> <strong>Comment by <a href="https://github.com/CreepySkeleton">CreepySkeleton</a></strong>
<em>Saturday Feb 01, 2020 at 10:42 GMT</em></p>
<hr />
<p>Hmm, to focus on releasing clap 3 or making a book?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-09 16:17</div>
            <div class="timeline-body"><p><a href="https://github.com/TeXitoi"><img src="https://avatars.githubusercontent.com/u/5787066?v=4" align="left" width="48" height="48" hspace="10"></img></a> <strong>Comment by <a href="https://github.com/TeXitoi">TeXitoi</a></strong>
<em>Saturday Feb 01, 2020 at 10:58 GMT</em></p>
<hr />
<p>To write the book for clap and not structopt.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-09 16:17</div>
            <div class="timeline-body"><p><a href="https://github.com/CreepySkeleton"><img src="https://avatars.githubusercontent.com/u/50968528?v=4" align="left" width="48" height="48" hspace="10"></img></a> <strong>Comment by <a href="https://github.com/CreepySkeleton">CreepySkeleton</a></strong>
<em>Saturday Feb 01, 2020 at 10:59 GMT</em></p>
<hr />
<p>Agreed. I'm transferring the issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-09 16:17</div>
            <div class="timeline-body"><p><a href="https://github.com/CreepySkeleton"><img src="https://avatars.githubusercontent.com/u/50968528?v=4" align="left" width="48" height="48" hspace="10"></img></a> <strong>Comment by <a href="https://github.com/CreepySkeleton">CreepySkeleton</a></strong>
<em>Saturday Feb 01, 2020 at 11:00 GMT</em></p>
<hr />
<p>No, I'm not transferring the issue because I simply can't :( I'll figure it out later.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-09 16:27</div>
            <div class="timeline-body"><p>The new docs are now split between bulder API reference, derive ref, and tutorial.  I'm assuming this resolves this issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2021-12-09 16:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-derive</span> added by @epage on 2021-12-09 16:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:34:46 UTC
    </footer>
</body>
</html>
