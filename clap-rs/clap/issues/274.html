<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bin_name doesn't work with out name field. From YAML - clap-rs/clap #274</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>bin_name doesn't work with out name field. From YAML</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/274">#274</a>
        opened by <a href="https://github.com/XAMPPRocky">@XAMPPRocky</a>
        on 2015-09-23 10:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/XAMPPRocky">@XAMPPRocky</a> on 2015-09-23 10:42</div>
            <div class="timeline-body"><p>When I changed the cli.yml file from <code>name</code> to <code>bin_name</code> the everything outputed to the <code>help</code> was changed except the name.</p>
<h2>CLI.yml</h2>
<pre><code>bin_name: Tokei
version: 1.1.1
author: Aaron P. &lt;theaaronepower@gmail.com&gt;
about: A quick CLOC (Count Lines Of Code) tool
args:
  - exclude:
      short: e
      long: exclude
      help: Will ignore all files and directories containing the word ie --exclude node_modules
      takes_value: true
  - sort:
      short: s
      long: sort
      takes_value: true
      possible_values: [files, total, blanks, code, commments]
      help: Will sort based on a certain column ie --sort=files will sort by file count.
  - input:
      index: 1
      multiple: true
      required: true
      help: The input file(s)/directory(ies)
  - languages:
      short: l
      long: languages
      conflicts_with:
          - input
      help: prints out supported languages and their extensions
</code></pre>
<h2>Expected Output</h2>
<pre><code>Tokei 1.1.1
Aaron P. &lt;theaaronepower@gmail.com&gt;
A quick CLOC (Count Lines Of Code) tool

USAGE:
    tokei [FLAGS] [OPTIONS] &lt;input&gt;...

FLAGS:
    -h, --help         Prints help information
    -l, --languages    prints out supported languages and their extensions
    -V, --version      Prints version information

OPTIONS:
    -e, --exclude &lt;exclude&gt;    Will ignore all files and directories containing the word ie --exclude node_modules
    -s, --sort &lt;sort&gt;          Will sort based on a certain column ie --sort=files will sort by file count. [values: files total blanks code commments]

ARGS:
    input...    The input file(s)/directory(ies)
</code></pre>
<h2>Actual Output</h2>
<pre><code>tokei 

USAGE:
    tokei [FLAGS]

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a> on 2015-09-23 11:12</div>
            <div class="timeline-body"><p>@Aaronepower Other than testing, do you have any usage requirement for the YAML parser?</p>
<p>I have no feedback for this exact feature as I've never used it and it'll need discussion for if we'll keep the feature in 2.0. @kbknapp Thoughts? I'd personally opt against the extra parser, but it shouldn't be too difficult to port over if you'd like to keep it. <strong>Edit</strong>: Please respond in the 2.0 issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/XAMPPRocky">@XAMPPRocky</a> on 2015-09-23 11:14</div>
            <div class="timeline-body"><p>What do you mean usage requirement? The YAML parser already is an extra feature.</p>
<p>On Wed, Sep 23, 2015 at 12:12 PM, James McGlashan
notifications@github.com wrote:</p>
<blockquote>
<p>@Aaronepower Other than testing, do you have any usage requirement for the YAML parser?</p>
<h2>I have no feedback for this exact feature as I've never used it and it'll need discussion for if we'll keep the feature in 2.0. @kbknapp Thoughts? I'd personally opt against the extra parser, but it shouldn't be too difficult to port over if you'd like to keep it.</h2>
<p>Reply to this email directly or view it on GitHub:
https://github.com/kbknapp/clap-rs/issues/274#issuecomment-142570816</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a> on 2015-09-23 11:15</div>
            <div class="timeline-body"><p>@Aaronepower I meant for your use-case. Is there any reason that you are specifically using the YAML parser?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/XAMPPRocky">@XAMPPRocky</a> on 2015-09-23 11:16</div>
            <div class="timeline-body"><p>It keeps my main file clean?</p>
<p>On Wed, Sep 23, 2015 at 12:15 PM, James McGlashan
notifications@github.com wrote:</p>
<blockquote>
<h2>@Aaronepower I meant for your use-case. Is there any reason that you are specifically using the YAML parser?</h2>
<p>Reply to this email directly or view it on GitHub:
https://github.com/kbknapp/clap-rs/issues/274#issuecomment-142571177</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a> on 2015-09-23 11:28</div>
            <div class="timeline-body"><p>@Aaronepower Okay. Although not yet ready. Your current parser would be something along the lines of the following with my 2.0 macro. I might be able to backport this to <code>clap-1.4.2</code>. Note as the builder method is used internally, this is the <strong>fastest</strong> way to get a clap builder.</p>
<p><strong>Note</strong>: This macro although valid with my current code, is not finalized and may change.</p>
<pre><code class="language-rust">clap_app!{ Tokei;
  (meta =&gt; //version: &quot;1.0.0&quot; // I don't yet have version ;-)
           author: &quot;Aaron P. &lt;theaaronepower@gmail.com&gt;&quot;
           about:  &quot;A quick CLOC (Count Lines Of Code) tool&quot;)
  (args =&gt;
    help:      [-h --help]             &quot;Prints help information&quot;
    languages: [-l --languages]        &quot;Prints out supported languages and their extensions&quot;
    version:   [-V --version]          &quot;Prints version information&quot;
    exclude:   [-e --exclude exclude]  &quot;Will ignore all files and directories containing \
                                        the word&quot;
    sort:      [-s --sort sort]        &quot;Will sort based on a certain column I.e. \
                                        --sort=files will sort by file count.&quot;
    input:     (input ...)             &quot;The input file(s)/directory(ies)&quot;
  )
}
</code></pre>
<p>As for the issue you've reported, one of the others will likely have a fix soon.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-09-23 14:36</div>
            <div class="timeline-body"><p>@Aaronepower in order to use <code>bin_name</code> you also have to have a <code>name</code> field. Sounds redundant seeing this issue I need to document it better. Reasoning being <code>name</code> is required no matter what, and <code>bin_name</code> just overrides the system determined binary name which is used in help messages.</p>
<p>I just tested on 1.4.2 and everything appears to be working.</p>
<pre><code class="language-yaml">name: Tokei
bin_name: Tokei
version: 1.1.1
author: Aaron P. &lt;theaaronepower@gmail.com&gt;
about: A quick CLOC (Count Lines Of Code) tool
args:
  - exclude:
      short: e
      long: exclude
      help: Will ignore all files and directories containing the word ie --exclude node_modules
      takes_value: true
  - sort:
      short: s
      long: sort
      takes_value: true
      possible_values: [files, total, blanks, code, commments]
      help: Will sort based on a certain column ie --sort=files will sort by file count.
  - input:
      index: 1
      multiple: true
      required: true
      help: The input file(s)/directory(ies)
  - languages:
      short: l
      long: languages
      conflicts_with:
          - input
      help: prints out supported languages and their extensions
</code></pre>
<p>Output</p>
<pre><code>Tokei 1.1.1
Aaron P. &lt;theaaronepower@gmail.com&gt;
A quick CLOC (Count Lines Of Code) tool

USAGE:
    Tokei [FLAGS] [OPTIONS] &lt;input&gt;...

FLAGS:
    -h, --help         Prints help information
    -l, --languages    prints out supported languages and their extensions
    -V, --version      Prints version information

OPTIONS:
    -e, --exclude &lt;exclude&gt;    Will ignore all files and directories containing the word ie --exclude node_modules
    -s, --sort &lt;sort&gt;          Will sort based on a certain column ie --sort=files will sort by file count. [values: files total blanks code commments]

ARGS:
    input...    The input file(s)/directory(ies)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sru">@sru</a> on 2015-09-23 14:40</div>
            <div class="timeline-body"><p>@Aaronepower @kbknapp can confirm. Not sure why though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @sru on 2015-09-23 14:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by @sru on 2015-09-23 14:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: parsing</span> added by @sru on 2015-09-23 14:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E: tedious</span> added by @sru on 2015-09-23 14:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/259.html">clap-rs/clap#259</a> on 2015-09-23 14:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-09-23 14:50</div>
            <div class="timeline-body"><p>@sru Even after/if @Aaronepower confirms that everything is working as expected by adding <code>name</code> <strong>and</strong> <code>bin_name</code> on 1.4.2, let's leave this issue open until the bug of having only a <code>bin_name</code> causing strange help messages is fixed. Ideally, if only a <code>bin_name</code> was included, it would either panic with a good error message, or use the <code>bin_name</code> for both values (which I personally think is a bit to subtle and misleading).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a> on 2015-09-23 15:34</div>
            <div class="timeline-body"><p>@kbknapp This is one of the reasons I don't like runtime parsers :wink:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/XAMPPRocky">@XAMPPRocky</a> on 2015-09-26 08:21</div>
            <div class="timeline-body"><p>Yeah, does work with both.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "1.4.3" by @kbknapp on 2015-09-28 17:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "bin_name doesn't work, and prints weird. From YAML" to "bin_name doesn't work wit out na me field. From YAML" by @kbknapp on 2015-09-30 04:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "bin_name doesn't work wit out na me field. From YAML" to "bin_name doesn't work with out na me field. From YAML" by @kbknapp on 2015-09-30 04:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "bin_name doesn't work with out na me field. From YAML" to "bin_name doesn't work with out name field. From YAML" by @kbknapp on 2015-09-30 04:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-09-30 14:30</div>
            <div class="timeline-body"><p>I had forgot requiring <code>name:</code> isn't possible due to how subcommands are parsed....so this will just have to be documented better.</p>
<p>Closed for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2015-09-30 14:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:31 UTC
    </footer>
</body>
</html>
