<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consider yanking Clap 2.9.2 - clap-rs/clap #2076</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Consider yanking Clap 2.9.2</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/2076">#2076</a>
        opened by <a href="https://github.com/matklad">@matklad</a>
        on 2020-08-15 12:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/matklad">@matklad</a> on 2020-08-15 12:05</div>
            <div class="timeline-body"><p>Hi!</p>
<p>Clap 2.9.2 (and maybe some other versions, I haven't done an investigation) triggers future compatablity warning in this code:</p>
<p>https://github.com/clap-rs/clap/blob/9605ea83aab50113fcd190e9a54adfaae1634072/src/macros.rs#L506</p>
<p>This is an erroneous definition of a macro, because <code>$ident</code> fragment lacks <code>:ident</code> specifier. This has been a deny-by-default lint for some time, and we'd want to hard error it eventually (and most likely rather soon).  So, given that this crate might stop to compile eventually, it seems prudent to yank it, to give reverse-dependeices a heads up!</p>
<p>cc https://github.com/rust-lang/rust/pull/75516
cc https://github.com/dzamlo/treeify/pull/2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @matklad on 2020-08-15 12:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Consider yanking Clap 2.9" to "Consider yanking Clap 2.9.2" by @matklad on 2020-08-15 12:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-08-15 18:33</div>
            <div class="timeline-body"><p>Sure. It's hard to tell for sure which versions are affected because not every version has a tag I could checkout, so I just located the earliest bug-free version - which is <code>2.21.1</code> - and yanked everything in between. At the end of the day, they are all are just a history; there are more than 10 minor releases after that point.</p>
<p>I didn't spend any time on checking older versions because they're quite ancient and I doubt anyone will ever notice. Anyway, whoever cares is free to contact us and we'll yank them as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @CreepySkeleton on 2020-08-15 18:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-08-15 18:45</div>
            <div class="timeline-body"><p>This has been there since v1.4.0. Do we want to yank all of them? I am not sure why we are giving importance to yanking. What if people prefer an older version of rust?</p>
<p>Also, the usage of clap by versions (atleast from public crates) is <a href="https://lib.rs/crates/clap/rev">here</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-08-15 18:59</div>
            <div class="timeline-body"><p>I don't mind, go ahead if you want to.</p>
<p><code>1.4.0</code> was released five years ago. If those people are so dead set, they can just put the desired version in <code>Cargo.lock</code> manually (and it's probably already there). Yanking doesn't remove the crate from crates.io, it just prevents <em>new</em> crates from depending on it.</p>
<blockquote>
<p>Also, the usage of clap by versions (atleast from public crates) is here</p>
</blockquote>
<p>Just as expected: the ~90% peak at the latest minor version and the <em>loong</em> low tail of older deps. I'd say we don't care. A curious phenomena: local peaks on &quot;terminator versions&quot; (i.e <code>2.23.3</code> when the next version is <code>2.24.x</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @Dylan-DPC-zz on 2020-08-16 00:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dylan-DPC-zz">@Dylan-DPC-zz</a> on 2020-08-16 00:11</div>
            <div class="timeline-body"><p>Reopening this because as per how the process goes with similar advisories, the versions have to be yanked</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../gluon-lang/gluon_language-server/issues/35.html">gluon-lang/gluon_language-server#35</a> on 2020-08-16 02:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-08-16 07:51</div>
            <div class="timeline-body"><p>So, should I yank from 1.4.0 onwards?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../rust-lang/rust/pulls/75516.html">rust-lang/rust#75516</a> on 2020-08-17 07:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-08-18 07:35</div>
            <div class="timeline-body"><p>Yanked, God bless dumb python scripts. Why doesn't cargo have the &quot;yank everything from X.X.X to Y.Y.Y&quot; functionality?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @CreepySkeleton on 2020-08-18 07:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../rust-lang/rust/pulls/128425.html">rust-lang/rust#128425</a> on 2024-08-14 06:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:33 UTC
    </footer>
</body>
</html>
