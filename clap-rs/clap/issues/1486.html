<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shouldn't Error::exit() always use exit status 1 ? - clap-rs/clap #1486</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Shouldn't Error::exit() always use exit status 1 ?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1486">#1486</a>
        opened by <a href="https://github.com/TyPR124">@TyPR124</a>
        on 2019-06-08 01:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/TyPR124">@TyPR124</a> on 2019-06-08 01:03</div>
            <div class="timeline-body"><p>Because currently it does not:</p>
<p>https://github.com/clap-rs/clap/blob/0568dbd7416ba00928474990b8d865b4e6d0e0f5/src/parse/errors.rs#L395-L403</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TyPR124">@TyPR124</a> on 2019-06-09 17:22</div>
            <div class="timeline-body"><p>So I've looked at it slightly closer, and I guess this is by design. I would still personally suggest updating the docstring, which currently states &quot;Prints the error to stderr and exits with a status of 1&quot;. Even if exit(0) only happens when used internally, it could be confusing for someone not familiar with the project.</p>
<p>I only looked at the function to see if clap did any cleanup before exiting to assure myself it was fine for me to call <code>std::process::exit</code> where I was, but I immediately saw the discrepancy between docstring and behavior, and incorrectly assumed it was erroneous.</p>
<p>Edit: Actually, it is possible (and non-hidden) for the user to create an error that would exit with status 0, so I'm re-opening this as I believe it is necessary to update documentation accordingly.</p>
<p>Either the <code>Error::exit</code> method should state when it exits with status 0, or the <code>ErrorKind::HelpDisplayed</code> and <code>VersionDisplayed</code> should state they will exit with status 0 rather than 1.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @TyPR124 on 2019-06-09 17:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @TyPR124 on 2019-06-09 17:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 13:29</div>
            <div class="timeline-body"><p>Now we use exit codes from <code>exitcode</code> crate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @CreepySkeleton on 2020-02-01 13:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by @pksunkara on 2020-02-01 19:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:59 UTC
    </footer>
</body>
</html>
