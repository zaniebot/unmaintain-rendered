<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow, or example using a build.rs to make YAML just as performant as traditional - clap-rs/clap #216</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Allow, or example using a build.rs to make YAML just as performant as traditional</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/216">#216</a>
        opened by <a href="https://github.com/kbknapp">@kbknapp</a>
        on 2015-09-02 02:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-09-02 02:22</div>
            <div class="timeline-body"><p>Based on <a href="https://www.reddit.com/r/rust/comments/3j9es2/clap_13_build_a_cli_from_yaml/cunnshc">this comment</a> in the subreddit, I'd like to look at using a <code>build.rs</code> to generate traditional code. This may also help #202 as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @kbknapp on 2015-09-02 02:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: intermediate</span> added by @kbknapp on 2015-09-02 02:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> added by @kbknapp on 2015-09-02 02:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: parsing</span> added by @kbknapp on 2015-09-02 02:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: examples</span> added by @kbknapp on 2015-09-02 02:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sru">@sru</a> on 2015-09-02 18:10</div>
            <div class="timeline-body"><p>The integration of code from build.rs is really clunky (<a href="http://doc.crates.io/build-script.html#case-study:-code-generation">Cargo's guide to code generation in build scripts</a>), and it requires the user to actually supply build script.</p>
<p>I feel like compiler plugin is better approach, but it is probably going to take months to stabilize it...</p>
<hr />
<p>Another suggestion:
This is like a spinoff from parsing YAML and <a href="https://www.reddit.com/r/rust/comments/3j9es2/clap_13_build_a_cli_from_yaml/cuo4lgb">this comment on reddit by vks_</a>. Since most Rust program that uses Cargo will have sensible Cargo.toml, if we are going to have YAML parsed in compile time, why not add parsing from Cargo.toml as an addition. The user then only needs to worry about parsing arguments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-09-02 18:27</div>
            <div class="timeline-body"><p>@sru I agree, but my thought process is to <em>allow</em> it, but not mandate it. So everything will still work just like it does today...but if someone wants to take the time to use a <code>build.rs</code> they'll get some extra performance.</p>
<p>If possible, I'd like to make that process of writing the <code>build.rs</code> as painless as possible. Perhaps by having a <code>clap_codegen</code> crate...I'm not sure.</p>
<p>The TOML question is answered on reddit, but #81 was on the todo list, but got taken off (at least for the time being) because TOML isn't really set up to nest like <code>clap</code> does when it comes to args and subcommands.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/217.html">clap-rs/clap#217</a> on 2015-09-02 21:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-04-05 18:36</div>
            <div class="timeline-body"><p>Closed in favor of the <code>serde</code> transition. Will re-address once that's complete</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2017-04-05 18:36</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:31 UTC
    </footer>
</body>
</html>
