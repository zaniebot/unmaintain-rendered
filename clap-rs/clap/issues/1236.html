<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support for raw trailing args without `--` - clap-rs/clap #1236</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support for raw trailing args without <code>--</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1236">#1236</a>
        opened by <a href="https://github.com/bjgill">@bjgill</a>
        on 2018-03-28 21:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bjgill">@bjgill</a></div>
            <div class="timeline-body"><p>I&#x27;ve been trying to switch <code>cargo clippy</code> over to use clap (<a href="https://github.com/rust-lang-nursery/rust-clippy/pull/2557">rust-lang-nursery/rust-clippy#2557</a>), and have discovered that it doesn&#x27;t quite work.</p>
<p>The reason is that cargo-clippy is just a thin wrapper around cargo-rustc. cargo-clippy has a small number of its own options (e.g. <code>--all</code>), and just passes the rest verbatim to cargo rustc.</p>
<p>i.e.</p>
<pre><code>cargo clippy               =&gt; cargo rustc
cargo clippy --all         =&gt; cargo rustc  (run multiple times)
cargo clippy --frozen      =&gt; cargo rustc --frozen
cargo clippy -- --D clippy =&gt; cargo rustc -- --D clippy
</code></pre>
<p>I have mostly been able to replicate this behaviour with <code>AppSettings::TrailingVarArg</code>. However, this has introduced the need for an additional <code>--</code> to all the args passed through to cargo-rustc. This means that the last example would become the entirely rational but nonetheless odd <code>cargo clippy -- -- -D clippy</code>.</p>
<p>I think I&#x27;m therefore asking whether it would be possible to have some sort of <code>Arg::very_raw(self, bool)</code> function that provided the same functionality as <code>raw</code> but without requiring <code>--</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>rust-lang/rust-clippy#2557</a> on 2018-03-28 21:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-03-30 01:43</div>
            <div class="timeline-body"><p>Try <a href="https://docs.rs/clap/2.31.2/clap/enum.AppSettings.html#variant.AllowMissingPositional"><code>AppSettings::AllowMissingPositional</code></a> and set <a href="https://docs.rs/clap/2.31.2/clap/struct.Arg.html#method.allow_hyphen_values"><code>Arg::allow_hyphen_values</code></a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-03-30 01:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-03-30 01:44</div>
            <div class="timeline-body"><p>The <code>AllowMissingPositional</code> is if you want to be able to short circuit to that final arg using <code>--</code> (but not <em>require</em> the <code>--</code> if you don&#x27;t need it). If you don&#x27;t care about short circuiting, just <code>allow_hyphen_values(true)</code> and <code>multiple(true)</code> should work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-04-01 03:34</div>
            <div class="timeline-body"><p>I&#x27;m going to close this, feel free to re-open if those settings don&#x27;t do what you&#x27;re looking for.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-04-01 03:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#5055</a> on 2023-07-30 20:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RalfJung">@RalfJung</a> on 2023-07-30 20:30</div>
            <div class="timeline-body"><p>I think this is still a problem: <a href="https://github.com/clap-rs/clap/issues/5055">clap-rs/clap#5055</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-parsing</span> added by <a href="https://github.com/epage">@epage</a> on 2023-08-08 02:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-medium</span> added by <a href="https://github.com/epage">@epage</a> on 2023-08-08 02:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-parsing</span> removed by <a href="https://github.com/epage">@epage</a> on 2023-08-08 02:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-medium</span> removed by <a href="https://github.com/epage">@epage</a> on 2023-08-08 02:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:57:09 UTC
    </footer>
</body>
</html>
