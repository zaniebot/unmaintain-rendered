<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clap_app! is poorly documented - clap-rs/clap #1347</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>clap_app! is poorly documented</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1347">#1347</a>
        opened by <a href="https://github.com/noyez">@noyez</a>
        on 2018-09-27 18:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/noyez">@noyez</a></div>
            <div class="timeline-body"><!--
Please use the following template to assist with creating an issue and to ensure a speedy resolution. If an area is not applicable, feel free to delete the area or mark with `N/A`
-->

<h3>Rust Version</h3>
<p><code>rustc 1.28.0 (9634041f0 2018-07-30)</code></p>
<h3>Affected Version of clap</h3>
<p><code>clap = { version = &quot;2.32&quot;, features = [ &quot;suggestions&quot;, &quot;color&quot; ] }</code></p>
<h3>Bug or Feature Request Summary</h3>
<p>Bug</p>
<p>Prelude: this is probably a limitation on Marcos in rust since i notice that with other features of clap, which, btw, clap is awsome).</p>
<p>When using the <code>clap_app!</code> macro, it appears that possible_value cannot be used with integers, for example the following works (<a href="https://play.rust-lang.org/?gist=ebcda7898ee3392935b46aeee291671c&amp;version=stable&amp;mode=debug&amp;edition=2015">playground link</a>),</p>
<pre><code>  #[macro_use] extern crate clap;

fn main() {
    let matches = clap_app!(appname =&gt;
        (@arg numbers: -n --numbers +takes_value possible_value[zero]
            &quot;number&quot;)
    ).get_matches();
}
</code></pre>
<p>However, the following does not compile (not the possible_value option) (<a href="https://play.rust-lang.org/?gist=6a0b550d49b1f200dc691a2ed662a6a7&amp;version=stable&amp;mode=debug&amp;edition=2015">playground link</a>)</p>
<pre><code>#[macro_use] extern crate clap;

fn main() {
    let matches = clap_app!(appname =&gt;
        (@arg numbers: -n --numbers +takes_value possible_value[0]
            &quot;number&quot;)
    ).get_matches();
}
</code></pre>
<h3>Expected Behavior Summary</h3>
<p>To compile.</p>
<h3>Actual Behavior Summary</h3>
<p>Compile error</p>
<pre><code>error: no rules expected the token `arg`
 --&gt; src/main.rs:4:19
  |
4 |       let matches = clap_app!(appname =&gt;
  |  ___________________^
5 | |         (@arg numbers: -n --numbers +takes_value possible_value[0]
6 | |             &quot;number&quot;)
7 | |     ).get_matches();
  | |_____^
  |
  = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)
</code></pre>
<h3>Sample Code or Link to Sample Code</h3>
<p><a href="https://play.rust-lang.org/?gist=6a0b550d49b1f200dc691a2ed662a6a7&amp;version=stable&amp;mode=debug&amp;edition=2015">Compiler Error Playground</a></p>
<p><a href="https://play.rust-lang.org/?gist=ebcda7898ee3392935b46aeee291671c&amp;version=stable&amp;mode=debug&amp;edition=2015">Comparison code</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mmastrac">@mmastrac</a> on 2018-11-05 23:43</div>
            <div class="timeline-body"><p>This syntax is poorly documented, but should work:</p>
<p>Playground link: https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2015&amp;gist=7250c15220ae9126792f52999758306c</p>
<pre><code>#[macro_use] extern crate clap;

fn main() {
    let matches = clap_app!(appname =&gt;
        (@arg numbers: -n --numbers +takes_value possible_value(&quot;0&quot;)
            &quot;number&quot;)
    ).get_matches();
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Using macro with possible_value[0] does not compile" to "clap_app! is poorly documented" by @CreepySkeleton on 2020-02-02 05:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: docs</span> added by @CreepySkeleton on 2020-02-02 05:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: macros</span> added by @CreepySkeleton on 2020-02-02 05:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @CreepySkeleton on 2020-02-02 05:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @CreepySkeleton on 2020-02-02 05:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> added by @CreepySkeleton on 2020-02-02 05:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @CreepySkeleton on 2020-02-02 05:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.1" by @CreepySkeleton on 2020-02-02 05:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1813.html">clap-rs/clap#1813</a> on 2020-04-12 10:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.1" by @pksunkara on 2020-04-12 10:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.0" by @pksunkara on 2020-04-12 10:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @bors[bot] on 2020-04-12 22:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:47:12 UTC
    </footer>
</body>
</html>
