<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check for group of repeated arguments - clap-rs/clap #5488</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Check for group of repeated arguments</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/5488">#5488</a>
        opened by <a href="https://github.com/Velnbur">@Velnbur</a>
        on 2024-05-08 07:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Velnbur">@Velnbur</a> on 2024-05-08 07:46</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.3.23</p>
<h3>Describe your use case</h3>
<p>Currently trying to implement a CLI that accepts different repeated arguments. The problem is that we need to add checks that the lengths of a subset of repeated parameters should be the same.</p>
<ol>
<li>So for example CLI sends different messages to different recipients:</li>
</ol>
<pre><code class="language-sh"># is okay
cli send --recipient ALICE --content &quot;hi!&quot; --recipient BOB --content &quot;goodbye&quot;
# results in error as no second recipient is presented
cli send --recipient ALICE --content &quot;hi!&quot; --content &quot;goodbye&quot;
</code></pre>
<ol start="2">
<li>But <code>recipients.len()</code> &lt; <code>contents.len()</code> is okay:</li>
</ol>
<pre><code class="language-sh">cli send --recipient ALICE --recipient BOB --content &quot;hi!&quot;
</code></pre>
<p>Just the same content will be sent to different recipients. So <code>contents</code> became <code>vec![&quot;hi!&quot;; recipients.len()]</code> in this case.</p>
<h3>Describe the solution you'd like</h3>
<p>Developing additional functionality to <code>ArgGroup</code> could fix that, but I have no context about its current implementation.</p>
<h3>Alternatives, if applicable</h3>
<p>I believe that #1704 will fix the first case of the requested feature. Which, with some additional tweaks, can fulfill my needs with second case too</p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @Velnbur on 2024-05-08 07:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Check for validation for group of repeated arguments" to "Check for group of repeated arguments" by @Velnbur on 2024-05-08 07:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2024-06-10 21:36</div>
            <div class="timeline-body"><p>To confirm, the way <code>--recipient</code> and <code>--content</code> are interleaved doesn't matter, only their lengths?</p>
<p>So you can do</p>
<pre><code class="language-console">$ cli send --recipient ALICE --content &quot;hi!&quot; --recipient BOB --content &quot;goodbye&quot;
$ cli send --recipient ALICE --recipient BOB --content &quot;hi!&quot; --content &quot;goodbye&quot;
</code></pre>
<p>and the meaning would be the same?</p>
<p>For myself, I feel like that would be confusing and don't see us adding native support for something thing like this without a stronger case for why this isn't confusing and is more broadly applicable, particularly in light of our work to keep the API, build times, and binary size small.</p>
<p>I think it would be better to focus our efforts on #1704 and #3476.  As such, I'm closing this.  If there is a reason for us to re-evaluate the status of this, let us know!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2024-06-10 21:36</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:35 UTC
    </footer>
</body>
</html>
