<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow styled text in `template` - clap-rs/clap #1433</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow styled text in `template`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/1433">#1433</a>
        opened by <a href="https://github.com/ssokolow">@ssokolow</a>
        on 2019-03-19 00:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ssokolow">@ssokolow</a> on 2019-03-19 00:17</div>
            <div class="timeline-body"><!--
Please use the following template to assist with creating an issue and to ensure a speedy resolution. If an area is not applicable, feel free to delete the area or mark with `N/A`
-->

<h3>Rust Version</h3>
<p><code>rustc 1.32.0 (9fda7c223 2019-01-16)</code></p>
<h3>Affected Version of clap</h3>
<p>2.32.0</p>
<h3>Bug or Feature Request Summary</h3>
<p>When using a custom template to work around papercuts in Clap (#1432) and StructOpt (TeXitoi/structopt#172) which break <code>help2man</code>, i can find no documented way to apply <code>AppSettings::ColoredHelp</code> to the &quot;USAGE:&quot; header, though I've managed to reconstruct the desired bits of all of the rest of the default template.</p>
<h3>Expected Behavior Summary</h3>
<p>I should have some means of reintroducing the conditionally and portably colored <code>USAGE:</code> header, like this:</p>
<p><img src="https://user-images.githubusercontent.com/46915/54571592-61dc3e00-49db-11e9-94cc-d1b09d698bae.png" alt="desired" /></p>
<p><strong>NOTE:</strong> Image created as a composite of two screenshots.</p>
<h3>Actual Behavior Summary</h3>
<p>I was able to recreate every desired element of the default template <em>except</em> the coloring on the <code>USAGE:</code> header:</p>
<p><img src="https://user-images.githubusercontent.com/46915/54571565-3d806180-49db-11e9-823b-55048f4436fc.png" alt="actual" /></p>
<h3>Steps to Reproduce the issue</h3>
<ol>
<li>Copy the example from the README into a new project</li>
<li>Use the following custom template in concert with <code>AppSettings::ColoredHelp</code>:</li>
</ol>
<pre><code class="language-rust">const HELP_TEMPLATE: &amp;str = &quot;{bin} {version}

{about}

USAGE:
    {usage}

{all-args}
&quot;;
</code></pre>
<h3>Sample Code or Link to Sample Code</h3>
<p>https://gist.github.com/ssokolow/9df8c92b24d94116c5eb57fccad2b1a2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssokolow">@ssokolow</a> on 2019-03-19 00:33</div>
            <div class="timeline-body"><p>...and, aesthetics aside, having a <code>USAGE:</code> header is necessary for <code>help2man</code> to recognize the usage line.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danwilliams">@danwilliams</a> on 2019-05-05 13:45</div>
            <div class="timeline-body"><p>Equally, if you use, as a guideline, the &quot;full help template&quot; that can be found here:</p>
<p>https://github.com/clap-rs/clap/blob/master/tests/example1_tmpl_full.txt</p>
<p>...there is no way to apply the ColoredHelp formatting to the various other headings if, for instance, you wish to change their order or rename them (e.g. for language translations).</p>
<p>Unsure at this point of the best approach to getting coloured help output when using custom help templates.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssokolow">@ssokolow</a> on 2019-05-06 02:03</div>
            <div class="timeline-body"><p><strong>EDIT:</strong> Sorry if you saw the original form of this via e-mail notification. I initially misunderstood the intent of your response.</p>
<p>True, but, In my testing, aside from the USAGE: header not being colourized, the template I gave is equivalent to removing the author placeholder from the default template and inserting a newline before <code>{about}</code> so <code>help2man</code> understands it properly.</p>
<p><code>example1_tmpl_full.txt</code> has the additional problem of not replicating the &quot;hide headers for empty sections&quot; behaviour of the default template.</p>
<p>That said, what I'd suggest is some kind of placeholder that resolves to either changing the colour if colourization is enabled or nothing if it's disabled.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: colorizing</span> added by @CreepySkeleton on 2020-02-01 14:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help message</span> added by @CreepySkeleton on 2020-02-01 14:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by @CreepySkeleton on 2020-02-01 14:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @CreepySkeleton on 2020-02-01 14:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.1" by @pksunkara on 2020-04-09 07:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-07-09 13:10</div>
            <div class="timeline-body"><blockquote>
<p>That said, what I'd suggest is some kind of placeholder that resolves to either changing the colour if colourization is enabled or nothing if it's disabled.</p>
</blockquote>
<p>I was thinking along these lines in the context of https://github.com/clap-rs/clap/issues/1790. Something like</p>
<pre><code>{color:yellow:USAGE}
</code></pre>
<p>or more generally</p>
<pre><code>{color:color_name-bold:text}
 ----- ---------- ---- ----
 |        |         |
 keyword  |       optional bold switch
       the color
</code></pre>
<p>And maintain the list of supported colors.</p>
<p>I don't want to support any RGB-or-something notations because Windows CMD has only a set of predefined colors and implementing the RGB code =&gt; winapi color mapping is something I very much like to avoid.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "No `template` placeholder for colorized "USAGE:" header" to "Allow styled text in `template`" by @pksunkara on 2020-10-26 08:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-10-26 08:21</div>
            <div class="timeline-body"><p>The original <code>usage</code> issue is fixed in #2131. I am repurposing this issue for general styled text in templates.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2196.html">clap-rs/clap#2196</a> on 2020-10-31 21:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/116.html">epage/clapng#116</a> on 2021-12-06 18:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: colorizing</span> removed by @epage on 2021-12-08 20:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.1" by @epage on 2021-12-08 20:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3108.html">clap-rs/clap#3108</a> on 2021-12-09 19:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> removed by @epage on 2021-12-09 19:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by @epage on 2021-12-09 19:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1790.html">clap-rs/clap#1790</a> on 2021-12-09 21:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2389.html">clap-rs/clap#2389</a> on 2021-12-30 12:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-08-18 13:37</div>
            <div class="timeline-body"><p>My plan is for the API to accept ANSI colored strings.  When we output, we use a special stdout/stderr that adapt the ANSI color codes to the capabilities of the terminal.</p>
<p>Blocked on https://github.com/epage/anstyle/issues/5</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> removed by @epage on 2022-08-18 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-blocked</span> added by @epage on 2022-08-18 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4110.html">clap-rs/clap#4110</a> on 2022-08-24 15:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4114.html">clap-rs/clap#4114</a> on 2022-08-25 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "4.x" by @epage on 2022-08-30 21:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4132.html">clap-rs/clap#4132</a> on 2022-08-31 13:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../sharkdp/bat/pulls/2327.html">sharkdp/bat#2327</a> on 2022-10-03 20:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3234.html">clap-rs/clap#3234</a> on 2022-10-07 15:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4444.html">clap-rs/clap#4444</a> on 2022-11-03 02:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4431.html">clap-rs/clap#4431</a> on 2022-11-05 03:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4611.html">clap-rs/clap#4611</a> on 2023-01-09 16:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4765.html">clap-rs/clap#4765</a> on 2023-03-17 14:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2023-03-28 02:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:07 UTC
    </footer>
</body>
</html>
