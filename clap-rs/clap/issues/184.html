<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Required argument overridden bug - clap-rs/clap #184</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Required argument overridden bug</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/184">#184</a>
        opened by <a href="https://github.com/Vinatorul">@Vinatorul</a>
        on 2015-08-22 14:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Vinatorul">@Vinatorul</a> on 2015-08-22 14:22</div>
            <div class="timeline-body"><pre><code>let m = App::new(&quot;req_overridden&quot;)
            .arg(Arg::from_usage(&quot;-f, --flag 'some flag'&quot;)
                .requires(&quot;color&quot;))
            .arg(Arg::from_usage(&quot;-c, --color 'some other flag'&quot;)
                .mutually_overrides_with(&quot;debug&quot;))
            .arg(Arg::from_usage(&quot;-d, --debug 'another other flag'&quot;))
            .get_matches_from(vec![&quot;&quot;, &quot;--flag&quot;, &quot;-c&quot;, &quot;-d&quot;]);
</code></pre>
<p>This sample should throw</p>
<pre><code>error: The following required arguments were not supplied:
    '--color'

USAGE:
    req_overridden --color --flag --debug

For more information try --help

</code></pre>
<p>unless it did not</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @Vinatorul on 2015-08-22 14:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P2: need to have</span> added by @Vinatorul on 2015-08-22 14:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: args</span> added by @Vinatorul on 2015-08-22 14:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: intermediate</span> added by @Vinatorul on 2015-08-22 14:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/182.html">clap-rs/clap#182</a> on 2015-08-22 14:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-08-22 15:01</div>
            <div class="timeline-body"><p>I think we need something like <a href="https://github.com/kbknapp/clap-rs/blob/a7e6e00a11c20cadbde0c457aafa777864374eac/src/app.rs#L2343">this line</a> only for requirements. Those two lines do some validation before the next subcommand (if any) gets parsed...so this would be the probable point to validate all requirements as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/185.html">clap-rs/clap#185</a> on 2015-08-22 15:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Vinatorul">@Vinatorul</a> on 2015-08-22 15:18</div>
            <div class="timeline-body"><p>Good idea, it will work :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-08-22 20:17</div>
            <div class="timeline-body"><p>It removes the requirements of args that were overrriden, not ones that still exist.</p>
<p>I.e. if A requires B and B mutually overrides C. Then the user passes in <code>A B C</code> which after overrides take effect is <code>A C</code>. This should fail because A's requirements aren't met.</p>
<p>Conversely, if A requires B and A mutually overrrides with C. Then the user passes in, <code>A C</code>, this should pass. Because A's requirements of B were removed when it got overrriden by C. Effectively its as if the user just passed in <code>C</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/187.html">clap-rs/clap#187</a> on 2015-08-22 21:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Vinatorul on 2015-08-23 07:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:17 UTC
    </footer>
</body>
</html>
