```yaml
number: 3660
title: "Prevent user from using both `required` and `required_unless_present`"
type: issue
state: closed
author: imlazyeye
labels:
  - C-enhancement
  - M-breaking-change
  - A-builder
  - E-easy
assignees: []
created_at: 2022-04-25T18:19:06Z
updated_at: 2022-05-06T19:45:41Z
url: https://github.com/clap-rs/clap/issues/3660
synced_at: 2026-01-10T01:57:47Z
```

# Prevent user from using both `required` and `required_unless_present`

---

_Issue opened by @imlazyeye on 2022-04-25 18:19_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

3.1.11

### Describe your use case

Given the following pattern:

```rs
/// The name of the module to be printed
#[clap(required = true, required_unless_present = "list")]
name: Option<String>,
```

`required_unless_present` will silently be overruled by `required`, which is confusing.

### Describe the solution you'd like

Ideally, an error is given to the user so that they are made aware of the conflicting derives (specifically, one that points out to them that `required_unless_present` is sufficient by itself and `required` is not additionally necessary). 

### Alternatives, if applicable

_No response_

### Additional Context

Coming from this discussion: #3658

---

_Label `C-enhancement` added by @imlazyeye on 2022-04-25 18:19_

---

_Label `M-breaking-change` added by @epage on 2022-04-25 18:21_

---

_Label `A-builder` added by @epage on 2022-04-25 18:21_

---

_Label `E-easy` added by @epage on 2022-04-25 18:21_

---

_Added to milestone `4.0` by @epage on 2022-04-25 18:21_

---

_Referenced in [clap-rs/clap#3701](../../clap-rs/clap/pulls/3701.md) on 2022-05-06 19:16_

---

_Closed by @epage on 2022-05-06 19:45_

---
