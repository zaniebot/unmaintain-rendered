<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can`t build on linux gnu - clap-rs/clap #3299</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Can`t build on linux gnu</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/3299">#3299</a>
        opened by <a href="https://github.com/nrot">@nrot</a>
        on 2022-01-16 21:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nrot">@nrot</a> on 2022-01-16 21:27</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the existing issues</li>
</ul>
<h3>Rust Version</h3>
<p>rustc 1.53.0</p>
<h3>Clap Version</h3>
<p>3.0.7</p>
<h3>Minimal reproducible code</h3>
<pre><code class="language-rust">use clap::{App, arg};

fn main() {
    println!(&quot;Hello, world!&quot;);
    let args = App::new(&quot;&quot;).args(&amp;[
        arg!(&lt;FILE&gt; &quot;file to show&quot;),
        arg!(--filter [filter] &quot;filter type: Nearest,Triangle,CatmullRom,Gaussian,Lanczos3&quot;),
        arg!(-s --&quot;scale_font&quot; [scale_font] &quot;scale of font to correct image&quot;),
    ]).get_matches();
    println!(&quot;File: {:?}&quot;, args.value_of(&quot;FILE&quot;))
}

</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<p>On wsl inside Windows 10.</p>
<blockquote>
<p>uname -a
Linux HOME-PC 5.10.16.3-microsoft-standard-WSL2 #1 SMP Fri Apr 2 22:23:49 UTC 2021 x86_64 x86_64 x86_64 GNU/Linux
cargo build</p>
</blockquote>
<h3>Actual Behaviour</h3>
<p>cargo build<br />
Compiling libc v0.2.112
Compiling memchr v2.4.1
Compiling indexmap v1.8.0
Compiling os_str_bytes v6.0.0
Compiling atty v0.2.14
Compiling clap v3.0.7
error[E0658]: arbitrary expressions in key-value attributes are unstable
--&gt; /home/nrot/.cargo/registry/src/github.com-1ecc6299db9ec823/clap-3.0.7/src/lib.rs:8:39
|
8 | #![cfg_attr(feature = &quot;derive&quot;, doc = include_str!(&quot;../README.md&quot;))]
|                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
|
= note: see issue #78835 <a href="https://github.com/rust-lang/rust/issues/78835">https://github.com/rust-lang/rust/issues/78835</a> for more information</p>
<p>error: aborting due to previous error</p>
<p>For more information about this error, try <code>rustc --explain E0658</code>.
error: could not compile <code>clap</code></p>
<p>To learn more, run the command again with --verbose.</p>
<h3>Expected Behaviour</h3>
<p>The build app</p>
<h3>Additional Context</h3>
<p>rustup show</p>
<p>Default host: x86_64-unknown-linux-gnu
rustup home:  /home/nrot/.rustup</p>
<h2>installed toolchains</h2>
<p>stable-x86_64-unknown-linux-gnu (default)
nightly-x86_64-unknown-linux-gnu</p>
<h2>active toolchain</h2>
<p>stable-x86_64-unknown-linux-gnu (default)
rustc 1.58.0 (02072b482 2022-01-11</p>
<h3>Debug Output</h3>
<p>error[E0658]: arbitrary expressions in key-value attributes are unstable
--&gt; /home/nrot/.cargo/registry/src/github.com-1ecc6299db9ec823/clap_derive-3.0.6/src/lib.rs:16:10
|
16 | #![doc = include_str!(&quot;../README.md&quot;)]
|          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
|
= note: see issue #78835 <a href="https://github.com/rust-lang/rust/issues/78835">https://github.com/rust-lang/rust/issues/78835</a> for more information</p>
<p>error: aborting due to previous error</p>
<p>For more information about this error, try <code>rustc --explain E0658</code>.
error: could not compile <code>clap_derive</code></p>
<p>To learn more, run the command again with --verbose.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by @nrot on 2022-01-16 21:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-01-17 13:51</div>
            <div class="timeline-body"><p>Our documented minimum-supported Rust version (or MSRV) is <a href="https://github.com/clap-rs/clap#about">1.54.0</a> which is when &quot;arbitrary expressions in key-value attributes&quot; was stabilized.</p>
<p>I'd recommend upgrading Rust.  If there is a problem with doing so, I'd recommend continuing this discussion on https://github.com/clap-rs/clap/issues/3267.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2022-01-17 13:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:34:52 UTC
    </footer>
</body>
</html>
