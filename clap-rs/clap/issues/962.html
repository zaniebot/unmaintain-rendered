<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show usage of subcommand in global help - clap-rs/clap #962</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Show usage of subcommand in global help</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/962">#962</a>
        opened by <a href="https://github.com/pitkley">@pitkley</a>
        on 2017-05-16 16:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pitkley">@pitkley</a></div>
            <div class="timeline-body"><p>I don&#x27;t know if this feature exists, if so, I have not found it yet. What I&#x27;m looking for is a way to see the usage of a subcommand in the help shown by the <code>help</code> subcommand or the global <code>--help</code> flag. Compare the actual behavior to the expected behavior for an example.</p>
<hr>
Rust Version
<p><code>rustc 1.17.0 (56124baa9 2017-04-24)</code></p>
Affected Version of clap
<p><code>2.24.1</code></p>
Actual Behavior Summary
<pre><code>$ ./test --help
test 

USAGE:
    test [SUBCOMMAND]

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

SUBCOMMANDS:
    help          Prints this message or the help of the given subcommand(s)
    subcommand    subcommand help
</code></pre>
<p>The <code>SUBCOMMANDS:</code> section only shows the subcommands that exist, not what parameters they require.</p>
<p>One has to ask for the specific help:</p>
<pre><code>$ ./test subcommand --help
test-subcommand 

USAGE:
    test subcommand &lt;PARAM&gt;

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

ARGS:
    &lt;test&gt;
</code></pre>
Expected Behavior Summary
<pre><code>$ ./test --help
test 

USAGE:
    test [SUBCOMMAND]

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

SUBCOMMANDS:
    help
                  Prints this message or the help of the given subcommand(s)
    subcommand &lt;PARAM&gt;
                  subcommand help
</code></pre>
<p>Instead of having to look at every individual help output, the <code>SUBCOMMANDS:</code> section shows the <code>USAGE:</code> section of the subcommands.</p>
Sample Code
<pre><code>extern crate clap;
use clap::{Arg, App, SubCommand};

fn main() {
    let matches = App::new(&quot;test&quot;)
        .subcommand(SubCommand::with_name(&quot;subcommand&quot;)
                        .about(&quot;subcommand help&quot;)
                        .arg(Arg::with_name(&quot;PARAM&quot;).required(true)))
        .get_matches();
}

</code></pre>
Debug output
<p>I can supply this at a later time if required.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-05-19 15:10</div>
            <div class="timeline-body"><p>Thanks for the suggestion and all the details! üëç</p>
<p>This feature doesn&#x27;t exist (yet) could be added as an <code>AppSettings</code> variant, although my only concern is recursively following that chain with multiple nested subcommands.</p>
<p>Since I&#x27;m actively working on 3x I think this is something I&#x27;ll try to add then, because the code clean ups I&#x27;ve done so far would make this far easier to implement, and/or people to contribute to. However, if someone wants this done immediately I&#x27;d be willing to assist in mentoring or answering questions on how this could be done.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help pages gen</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-05-19 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: subcommands</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-05-19 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: intermediate</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-05-19 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M: mentored</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-05-19 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-05-19 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-05-19 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new setting</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-05-19 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-05-19 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pitkley">@pitkley</a> on 2017-05-19 16:30</div>
            <div class="timeline-body"><p>Thanks for the reply.</p>
<ol>
<li><p>Regarding your concerns on recursion: I personally think that the first usage level &quot;down&quot; would be enough, I wouldn&#x27;t even be sure how to print another level without the output getting crowded or illegible.</p>
<p>I.e. for this code:</p>
<pre><code>extern crate clap;
use clap::{Arg, App, SubCommand};

fn main() {
    let matches = App::new(&quot;test&quot;)
        .subcommand(SubCommand::with_name(&quot;subcommand&quot;)
                        .about(&quot;subcommand help&quot;)
                        .arg(Arg::with_name(&quot;PARAM&quot;).required(true))
                        .subcommand(SubCommand::with_name(&quot;nested&quot;)
                                        .arg(Arg::with_name(&quot;NESTED&quot;).required(true)))
        .get_matches();
}
</code></pre>
<p>I would simply expect the usage on <code>subcommand</code> to gain <code>[SUBCOMMAND]</code>:</p>
<pre><code>$ ./test --help
test 

USAGE:
    test [SUBCOMMAND]

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information

SUBCOMMANDS:
    help
                  Prints this message or the help of the given subcommand(s)
    subcommand &lt;PARAM&gt; [SUBCOMMAND]
                  subcommand help
</code></pre>
<p>But if you could think of a way to cleanly print even those subcommands, it might be worth while implementing too.</p>
</li>
<li><p>Regarding an implementation for 2.x: while I would try and take a stab at it, especially since you offered your assistance, I personally can wait for 3.x to either have that feature or help with an implementation once 3.x is ready for contributions.</p>
</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-07-22 02:26</div>
            <div class="timeline-body"><p>I&#x27;m going to close this for the time being, but may re-address it once 3.x is out</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-07-22 02:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: after v3 release</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-07-22 02:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-02 02:19</div>
            <div class="timeline-body"><p>Leaving it closed for the time being</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-05-26 11:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: after v3 release</span> removed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-05-26 11:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> removed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-08-13 10:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>epage/clapng#73</a> on 2021-12-06 16:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: subcommands</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-08 20:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-help</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-08 20:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new setting</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-08 20:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#1334</a> on 2021-12-08 21:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-09 17:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: medium</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-09 17:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-mentor</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-09 17:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#1398</a> on 2021-12-09 19:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/buck-ross">@buck-ross</a> on 2022-02-09 03:49</div>
            <div class="timeline-body"><p>Has there been any update on this? I see the issue has been re-opened, but there doesn&#x27;t seem to be any follow-up that I can see.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-02-09 15:31</div>
            <div class="timeline-body"><p>No updates.  A lot of our focus right now is in other areas like API clean up, shrinking binary size, fixing bugs, etc.</p>
<p>I am curious if the solution proposed in <a href="https://github.com/clap-rs/clap/issues/1334">clap-rs/clap#1334</a> might be a viable alternative to meet the same needs.  If we can find more common solutions to problems, it can help us meet our goal of keeping binary sizes and compile times down,.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-11-08 05:10</div>
            <div class="timeline-body"><p>I lean in favor of #1334 instead and am closing in favor of that as usually someone is either caring about one command at a time or with them flattened and the build-time / binary size cost of supporting both wouldn&#x27;t be great.</p>
<p>If people make the case for this being needed, I&#x27;m ok with re-opening this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/epage">@epage</a> on 2022-11-08 05:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-mentor</span> removed by <a href="https://github.com/epage">@epage</a> on 2022-11-08 05:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-wont-fix</span> added by <a href="https://github.com/epage">@epage</a> on 2022-11-08 05:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:56:53 UTC
    </footer>
</body>
</html>
