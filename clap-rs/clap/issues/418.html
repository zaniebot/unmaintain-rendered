<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add examples for Default values for arguments - clap-rs/clap #418</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add examples for Default values for arguments</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/418">#418</a>
        opened by <a href="https://github.com/Fiedzia">@Fiedzia</a>
        on 2016-02-05 14:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Fiedzia">@Fiedzia</a> on 2016-02-05 14:54</div>
            <div class="timeline-body"><p>Its really excellent library, but I am missing ability to define default value for arguments. Could this be added?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sru">@sru</a> on 2016-02-05 17:11</div>
            <div class="timeline-body"><p>Since <code>value_of</code> from <code>ArgMatches</code> struct returns <code>Option</code>, you can use <code>unwrap_or</code> function. i.e.</p>
<pre><code class="language-rust">let s = matches.value_of(&quot;something&quot;).unwrap_or(&quot;default&quot;);
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by @sru on 2016-02-05 17:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Fiedzia">@Fiedzia</a> on 2016-02-05 17:31</div>
            <div class="timeline-body"><p>Sure, but if I'm accessing this in 5 places (say every time I'm checking verbosity), I'll have to define default  value in those 5 places, and in documentation, and then make sure all those places are in sync. Having it defined once would be nicer.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sru">@sru</a> on 2016-02-05 19:50</div>
            <div class="timeline-body"><p>You don't have to define those default value in 5 different places, you'd just define one constant and use it over those five different places. I believe having default value has been brought up previously (#367 briefly). I think adding default value would be simple enough addition though I am skeptical if it is actually needed. Need @kbknapp to chime in.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-02-05 20:46</div>
            <div class="timeline-body"><p>I'm not opposed to adding it, as with everything else in clap it'd be opt in and there's really no overhead to using it or it being there if you don't use it. Short of a quick cycle through the defaults if they're not already provided.</p>
<p>Like @sru said I personally think there are ways get by without it, but it does seem to be something that I'm asked about from time to time.</p>
<p>I'll add this to issue tracker for implementing.</p>
<p>Thanks for taking the time to file this ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by @kbknapp on 2016-02-05 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by @kbknapp on 2016-02-05 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: args</span> added by @kbknapp on 2016-02-05 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @kbknapp on 2016-02-05 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: matches</span> added by @kbknapp on 2016-02-05 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: parsing</span> added by @kbknapp on 2016-02-05 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @kbknapp on 2016-02-05 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M: mentored</span> added by @kbknapp on 2016-02-05 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> removed by @kbknapp on 2016-02-05 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-02-09 18:31</div>
            <div class="timeline-body"><p>I have a local branch with this implemented - once #422 merges I'll put in the PR. Just waiting because this feature bumps the minor version, but #422 does not.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jpastuszek">@jpastuszek</a> on 2016-02-13 12:33</div>
            <div class="timeline-body"><p>I am also looking for default value support.
Ideally you just define it with .default(&quot;<value>&quot;) on Arg.
Also it should be displayed in help message in square brackets (?) after help string using Display trait or alternatively if .default_label(&quot;<displayed in help>&quot;) is used it should display provided string instead.</p>
<p>This is what I do now:</p>
<pre><code>    -c, --data-processor-url &lt;URL&gt;     Nanomsg URL to data processor [ipc:///tmp/rdms_data_store.ipc]
</code></pre>
<pre><code>    let url = value_t!(args, &quot;data-processor-url&quot;, Url).unwrap_or_else(|err|
        match err.kind {
            clap::ErrorKind::ArgumentNotFound =&gt; FromStr::from_str(&quot;ipc:///tmp/rdms_data_store.ipc&quot;).unwrap(),
            _ =&gt; err.exit()
        }
    );
</code></pre>
<p>Is there a better way?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-02-14 08:52</div>
            <div class="timeline-body"><p>@jpastuszek The ~~just merged~~ soon to merge #423 includes this. It contains a new <code>Arg::default_value</code> method for setting the value when the argument is not used at runtime.</p>
<p>The next ~~PR~~ commit will add the adding to help text automatically, good idea.</p>
<p>Edit: after the merge I'll upload v2.1.0 to crates.io</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @homu on 2016-02-14 11:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidmyersdev">@davidmyersdev</a> on 2016-09-17 01:49</div>
            <div class="timeline-body"><p>@kbknapp is there any way we can get this added to the docs or the examples? I feel like this is a pretty useful feature, and it took me a while to find it. Is there an API reference available for the args commands? I'm loving this project so far. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-09-17 02:25</div>
            <div class="timeline-body"><p>@drm2 absolutely!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @kbknapp on 2016-09-17 02:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Default values for arguments" to "Add examples for Default values for arguments" by @kbknapp on 2016-09-17 02:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @kbknapp on 2016-09-17 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: docs</span> added by @kbknapp on 2016-09-17 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: args</span> removed by @kbknapp on 2016-09-17 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: matches</span> removed by @kbknapp on 2016-09-17 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: parsing</span> removed by @kbknapp on 2016-09-17 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M: mentored</span> removed by @kbknapp on 2016-09-17 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> removed by @kbknapp on 2016-09-17 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "2.12.2" by @kbknapp on 2016-09-17 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidmyersdev">@davidmyersdev</a> on 2016-09-17 02:42</div>
            <div class="timeline-body"><p>Wow. Incredible response time. Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @homu on 2016-09-18 20:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:06 UTC
    </footer>
</body>
</html>
