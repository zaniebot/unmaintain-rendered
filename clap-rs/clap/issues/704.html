<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Escape quotes in completions - clap-rs/clap #704</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Escape quotes in completions</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/704">#704</a>
        opened by <a href="https://github.com/tilpner">@tilpner</a>
        on 2016-10-25 00:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/tilpner">@tilpner</a> on 2016-10-25 00:56</div>
            <div class="timeline-body"><p><a href="https://internals.rust-lang.org/t/beta-testing-rustup-rs/3316/196">rustup just exposed completion generation</a>, but fish complains about the generated completions</p>
<pre><code>Unexpected end of string, quotes are not balanced
~/.config/fish/completions/rustup.fish (line 188): complete -c rustup -n '__fish_using_command rustup help' -s V -l version -d 'Prints version information'

                  ^
from sourcing file ~/.config/fish/completions/rustup.fish
    called on standard input

in command substitution
    called on standard input

source: Error while reading file “/home/till/.config/fish/completions/rustup.fish”
</code></pre>
<p>The completions don't escape the help items, leading to the <a href="https://gist.github.com/tilpner/40686d60b2e045829f3f4d4dcaf7f802#file-rustup-fish-L38">' in &quot;Don't&quot;</a> ending the help string, breaking the rest of the file.</p>
<p>ping @brson</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../rust-lang/rustup/issues/781.html">rust-lang/rustup#781</a> on 2016-10-25 00:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-10-25 03:57</div>
            <div class="timeline-body"><p>Thanks for the heads up! I should have this fixed first thing tomorrow :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @kbknapp on 2016-10-25 03:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P1: urgent</span> added by @kbknapp on 2016-10-25 03:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @kbknapp on 2016-10-25 03:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: completion gen</span> added by @kbknapp on 2016-10-25 03:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "2.16.2" by @kbknapp on 2016-10-25 03:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-10-25 14:39</div>
            <div class="timeline-body"><p>This is fixed in #705</p>
<p>Once it merges I'll put v2.16.2 on crates.io</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @homu on 2016-10-25 15:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:06 UTC
    </footer>
</body>
</html>
