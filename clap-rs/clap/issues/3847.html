<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A feature to make assertions unconditional - clap-rs/clap #3847</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>A feature to make assertions unconditional</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/3847">#3847</a>
        opened by <a href="https://github.com/stepancheg">@stepancheg</a>
        on 2022-06-17 00:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/stepancheg">@stepancheg</a> on 2022-06-17 00:32</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>3.1.8</p>
<h3>Describe your use case</h3>
<p>Currently, <code>ArgMatches</code> with subcommands is fragile: when requesting indices of non-existing flag, no error is produced in release mode. This is inconvenient when working with complex clap setup: typo in flag name or missing <code>.subcommand</code> call results in <code>ArgMatches</code> returning empty indices.</p>
<p>Panic is sometimes more convenient when test coverage is less than 100%.</p>
<h3>Describe the solution you'd like</h3>
<p>Enabled assertions when any of this is true:</p>
<ul>
<li><code>cfg(debug_assertions)</code></li>
<li><code>cfg(feature = assertions)</code></li>
</ul>
<h3>Alternatives, if applicable</h3>
<p><em>No response</em></p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @stepancheg on 2022-06-17 00:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-06-17 12:27</div>
            <div class="timeline-body"><p>I'm assuming this is split out of #3845 as an alternative idea.</p>
<p>Like with that issue, I lean towards rejecting this.  We are working to trim the API surface of clap and we need to weigh out the benefit (across all users) against another thing to have listed in our documentation.  We recently added the <code>deprecated</code> feature but that was only after feedback from a lot of users over a period of time and it fitting into our wider API evolution strategy</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2022-06-17 12:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:34 UTC
    </footer>
</body>
</html>
