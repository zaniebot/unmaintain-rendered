<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiple values separated by a delimiter _only_? - clap-rs/clap #546</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Multiple values separated by a delimiter <em>only</em>?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/546">#546</a>
        opened by <a href="https://github.com/kornelski">@kornelski</a>
        on 2016-06-28 19:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kornelski">@kornelski</a></div>
            <div class="timeline-body"><p>I'm trying to make an arg that accepts one or two comma-delimited values, and also accept unnamed (index) argument after that.</p>
<pre><code class="language-sh">prog -q 1,2 file # OK: parses as q=[1,2]; input=file
</code></pre>
<pre><code class="language-sh">prog -q 1 file # should parse as q=[1]; input=file; but parses as q=[1,file]; input missing
</code></pre>
<p>The problem is that multiple arguments allow spaces, which causes ambiguity. I don't know how to disable that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-06-29 15:04</div>
            <div class="timeline-body"><p>Currently, there isn't a way to <em>force</em> the use of a delimiter. That is something that could be added.</p>
<p>But there are few other things about this scenario too:  Is there a limit on the number of values for <code>q</code>? Otherwise, <code>prog -q 1,2 file</code> won't parse like <code>q=[1,2]; input=file</code></p>
<p>I could consider this a bug, so-to-speak. i.e. if a delimiter is present, parsing something after a space probably shouldn't be part of the same value group. This still doesn't help your scenario 2 though. To go along with the above &quot;bug&quot; is parsing something like <code>-q=1 file</code> shouldn't lump <code>file</code> in with <code>-q</code>, but currently does.</p>
<p>So, would solving those two bugs suffice, or would a <code>force_delimiter</code> still be preferred? i.e.</p>
<ul>
<li>if a delimiter is present, don't parse anything after a space as the same group of values</li>
<li>if a <code>=</code> is present, don't parse anything after a space as the same group of values</li>
</ul>
<p>This would allow you to do <code>-q=1 file</code> and the option of either <code>-q 1,2 file</code> or <code>-q=1,2 file</code> all parsing correctly.</p>
<p>~~My only issue with the <code>require_delimiter</code> type thing, is it seems somewhat niche assuming the above bugs are fixed.~~ I would assume most people, upon realizing <code>-q 1 file</code> isn't working would try <code>-q=1 file</code> next.</p>
<p>Edit: thinking about it more, I'm good adding the <code>require_delimiter</code>, but still want some thoughts on the matter :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @kbknapp on 2016-06-29 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by @kbknapp on 2016-06-29 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by @kbknapp on 2016-06-29 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: intermediate</span> added by @kbknapp on 2016-06-29 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: parsing</span> added by @kbknapp on 2016-06-29 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @kbknapp on 2016-06-29 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kornelski">@kornelski</a> on 2016-06-29 15:43</div>
            <div class="timeline-body"><p>Thank you for your response.</p>
<p>In my case it's strictly 1 or 2 values for <code>q</code>. <code>require_delimiter</code> would be ideal for me, as <code>-q 1</code> <code>file</code> case is going to be the most common in my program.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-06-29 17:35</div>
            <div class="timeline-body"><p>#547 implements those two bug fixes and will be uploaded to crates.io as v2.7.1, then I'll add the <code>Arg::require_delimiter</code> in a new PR and upload as v2.8.0 to crates.io to keep all SemVer users aware of changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kornelski">@kornelski</a> on 2016-06-29 18:34</div>
            <div class="timeline-body"><p>Fantastic! Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kornelski on 2016-06-29 18:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-06-29 18:40</div>
            <div class="timeline-body"><p><code>Arg::require_delimiter</code> isn't implemented yet, doing so now :wink:</p>
<p>I want to keep this open just a tracking issue for that, until the PR merges.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @kbknapp on 2016-06-29 18:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-06-30 03:22</div>
            <div class="timeline-body"><p>This will be fully implemented with #551</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "2.8.0" by @kbknapp on 2016-06-30 03:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @homu on 2016-06-30 13:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:46:36 UTC
    </footer>
</body>
</html>
