<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clap_derive: Arg::short does not accept &quot;...&quot; anymore, it needs char - clap-rs/clap #1815</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>clap_derive: Arg::short does not accept &quot;...&quot; anymore, it needs char</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/1815">#1815</a>
        opened by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a>
        on 2020-04-12 21:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-04-12 21:16</div>
            <div class="timeline-body"><p><code>Arg::short</code> in clap 2.x is defined as <code>.short(&quot;...&quot;)</code> while in clap 3.0 it's going to take <code>char</code>.</p>
<p>All the examples/tests for the derive use the obsoleted <code>&quot;...&quot;</code> form, which is supported by <a href="https://github.com/clap-rs/clap/blob/81457178fa7e055775867ca659b37798b5ae9584/clap_derive/src/attrs.rs#L150-L154">this hack</a>.</p>
<p>This should be fixed: tests/examples/docs need to be adjusted, the hack should be removed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: tests</span> added by @CreepySkeleton on 2020-04-12 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: docs</span> added by @CreepySkeleton on 2020-04-12 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @CreepySkeleton on 2020-04-12 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: examples</span> added by @CreepySkeleton on 2020-04-12 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">Z: mentored</span> added by @CreepySkeleton on 2020-04-12 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> added by @CreepySkeleton on 2020-04-12 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @CreepySkeleton on 2020-04-12 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">Z: good first issue</span> added by @CreepySkeleton on 2020-04-12 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: derive macros</span> added by @CreepySkeleton on 2020-04-12 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.0" by @pksunkara on 2020-04-12 21:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lanesawyer">@lanesawyer</a> on 2020-06-13 21:46</div>
            <div class="timeline-body"><p>Is this still an issue? On the <code>master</code> branch, all usages of <code>.short()</code> appear to be taking in a single character.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-06-14 16:38</div>
            <div class="timeline-body"><p>This works fine with current master:</p>
<pre><code class="language-rust">
#[derive(Clap, Debug)]
struct Opt {
    /// &quot;c&quot; is a string literal, not 'c' char
    #[clap(short = &quot;c&quot;, long)]
    nb_cars: Option&lt;i32&gt;,
}
</code></pre>
<p>It MUST have been a <code>'c'</code>, but there's <a href="https://github.com/clap-rs/clap/blob/81457178fa7e055775867ca659b37798b5ae9584/clap_derive/src/attrs.rs#L150-L154">the hack</a> supporting this blasphemy. The hack must be removed, <code>#[clap(short)]</code> must be fixed to work with chars and not strings, and examples/tests must be adjusted.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1975.html">clap-rs/clap#1975</a> on 2020-06-17 00:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @bors[bot] on 2020-06-27 01:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../cauebs/durt/issues/17.html">cauebs/durt#17</a> on 2020-10-11 19:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:32 UTC
    </footer>
</body>
</html>
