<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Replace application level settings with enum variants - clap-rs/clap #169</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Replace application level settings with enum variants</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/169">#169</a>
        opened by <a href="https://github.com/kbknapp">@kbknapp</a>
        on 2015-07-29 22:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kbknapp">@kbknapp</a></div>
            <div class="timeline-body"><p>Currently, there are several &quot;Application level&quot; options or settings, which are set with various methods and a <code>bool</code>.  I would favor using an <code>enum</code> instead.</p>
<p>Although, using a method and a <code>bool</code> does have it&#x27;s advantages when dynamically generating arguments.</p>
Example Changes
<pre><code>let app = App::new(&quot;test&quot;)
        .subcommands_required(true)
        .unified_help_message(true)
        .versionless_subcommands(true)
</code></pre>
<p>Would become</p>
<pre><code>let app = App::new(&quot;test&quot;)
        .settings(&amp;[
            AppOptions::SubCommandsRequired,
            AppOptions::UnifiedHelpMessage,
            AppOptions::VersionlessSubcommands
        ])
</code></pre>
<p>or</p>
<pre><code>let app = App::new(&quot;test&quot;)
        .setting(AppOptions::SubCommandsRequired)
        .setting(AppOptions::UnifiedHelpMessage)
        .setting(AppOptions::VersionlessSubcommands)
</code></pre>
TBD
<p>This would deprecate all those other methods, but wouldn&#x27;t be removed until 2.x.</p>
<p>I&#x27;d still need to decide on a name ~~<code>options()</code>~~, <code>settings()</code>, etc (Edit: I&#x27;m leaning towards <code>settings</code> so as to not be confused with command line <code>options</code>)</p>
Affected &quot;App Settings&quot;
<p>Here&#x27;s the full list of current &quot;application level settings&quot;</p>
<ul>
<li><code>subcommands_negate_reqs(bool)</code></li>
<li><code>subcommand_required(bool)</code></li>
<li><code>arg_required_else_help(bool)</code></li>
<li><code>global_version(bool)</code></li>
<li><code>versionless_subcommands(bool)</code></li>
<li><code>unified_help_message(bool)</code></li>
<li><code>wait_on_error(bool)</code></li>
<li><code>subcommand_required_else_help(bool)</code></li>
</ul>
<p>To be clear, I&#x27;m still on the fence about this change. Because once it&#x27;s made, what&#x27;s to say the methods of <code>Arg</code> shouldn&#x27;t be changed? But when you do that, why not just make <em>all</em> <code>Arg</code> methods a member of <code>ArgOptions</code> or whatever it&#x27;s called? Seems like a slippery slope...but maybe a good one?</p>
<p>Also, the methods of <code>App</code> do have somewhat of a delineation between &quot;app settings&quot; and &quot;adding args/subcommands/groups/etc&quot; where as <code>Arg</code>s do not.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-29 22:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: maybe</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-29 22:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-29 22:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: app</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-29 22:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-29 22:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-29 22:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> removed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-29 22:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/severen">@severen</a> on 2015-07-30 12:13</div>
            <div class="timeline-body"><p>I like how it looks, personally I would prefer to use an <code>enum</code> rather than methods using a <code>bool</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-30 23:04</div>
            <div class="timeline-body"><p>The more I think about it, the more I like it. Especially because adding new options only means adding a new enum value, not increasing the API space of <code>App</code>.</p>
<p>The downside is that adding any new &quot;settings&quot; would require either adding a new method which is instantly deprecated, or begin fracturing into &quot;some things can be set with an enum, other older settings with an enum or method&quot;</p>
<p>For the intial implementation <code>App</code> will be the only thing affected, I will chew on <code>Arg</code> some more.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#173</a> on 2015-08-14 22:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-08-15 00:41</div>
            <div class="timeline-body"><p>Closed with #173</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-08-15 00:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:56:08 UTC
    </footer>
</body>
</html>
