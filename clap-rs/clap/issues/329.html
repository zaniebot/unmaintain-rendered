<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Versionless subcommand setting does not take effect - clap-rs/clap #329</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Versionless subcommand setting does not take effect</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/329">#329</a>
        opened by <a href="https://github.com/jimmycuadra">@jimmycuadra</a>
        on 2015-10-28 22:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jimmycuadra">@jimmycuadra</a> on 2015-10-28 22:57</div>
            <div class="timeline-body"><p><code>AppSetting::VersionlessSubCommands</code> doesn't seem to disable the <code>-V</code>/<code>--version</code> options on subcommands as the docs describe:</p>
<pre><code class="language-rust">extern crate clap;

use clap::{App, AppSettings, SubCommand};

fn main() {
    let matches = App::new(&quot;example&quot;)
        .setting(AppSettings::VersionlessSubcommands)
        .version(env!(&quot;CARGO_PKG_VERSION&quot;))
        .subcommand(
            SubCommand::with_name(&quot;sub&quot;)
        )
        .get_matches();
}
</code></pre>
<p>Example executions:</p>
<pre><code>$ prog -V
prog 0.1.0
$ prog sub -V
prog-sub
$ prog sub -h
prog-sub

USAGE:
    prog sub [FLAGS]

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information
</code></pre>
<p>Using clap 1.4.5 and Rust 1.3 on OS X.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-10-29 06:53</div>
            <div class="timeline-body"><p>Ah, that's actually an oversight in logic on our behalf. It's working as designed, but the design if flawed :smile:</p>
<p><code>AppSettings::VersionlessSubcommands</code> merely disables inheriting the parent command's version number...but you're correct it should also disable the <code>-V, --version</code> flags.</p>
<p>Thanks! :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @kbknapp on 2015-10-29 06:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: app</span> added by @kbknapp on 2015-10-29 06:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @kbknapp on 2015-10-29 06:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> added by @kbknapp on 2015-10-29 06:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 1.x</span> added by @kbknapp on 2015-10-29 06:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @kbknapp by @kbknapp on 2015-10-29 06:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "1.4.6" by @kbknapp on 2015-10-29 06:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-10-29 09:09</div>
            <div class="timeline-body"><p>#330 fixes this. Once this merges, I'll put 1.4.6 out on crates.io :wink:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2015-10-29 09:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-10-29 09:41</div>
            <div class="timeline-body"><p><a href="https://crates.io/crates/clap">v1.4.6</a> is out on crates.io</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jimmycuadra">@jimmycuadra</a> on 2015-10-29 10:43</div>
            <div class="timeline-body"><p>Looks like the changelog needs to be regenerated. Thanks for the fixes this week! I love clap.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-10-29 11:40</div>
            <div class="timeline-body"><p>That's just because homu hasn't merged #331 yet, once that's done it should be updated. Thanks again for filing the bug reports! :+1:</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:17 UTC
    </footer>
</body>
</html>
