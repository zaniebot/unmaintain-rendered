<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use precise exit code on usage error - clap-rs/clap #1327</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use precise exit code on usage error</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1327">#1327</a>
        opened by <a href="https://github.com/killercup">@killercup</a>
        on 2018-08-03 14:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/killercup">@killercup</a></div>
            <div class="timeline-body"><p>Most people exit their program status code <code>1</code> on an error. To differentiate between program errors, the BSD folks made a guideline with exit codes (&gt;1) to be more specific. For example, if the user doesn't have the necessary permissions, you should exit with <code>77</code>.</p>
<p>I'm not trying to advocate rigorously following this. I want to argue from a different perspective: If people tend to use <code>1</code> for generic errors, clap should probably <em>not</em> use <code>1</code>, so if people want to detect usage errors, they have a chance to do so. Thus, I propose changing the exit code to <code>64</code> (or <a href="https://docs.rs/exitcode/1.1.2/exitcode/constant.USAGE.html"><code>exitcode::USAGE</code></a>).</p>
<p>It seems that only these places need to be touched:</p>
<p>https://github.com/clap-rs/clap/blob/eaa0700e7ed76f37d245a6878deb3b8e81754d6c/src/build/app/mod.rs#L1209</p>
<p>https://github.com/clap-rs/clap/blob/eaa0700e7ed76f37d245a6878deb3b8e81754d6c/src/build/app/mod.rs#L1285</p>
<p>As one might see this as a breaking change for consumers, it need to land before the 3.0 release.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1637.html">clap-rs/clap#1637</a> on 2020-01-17 15:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-01-30 19:30</div>
            <div class="timeline-body"><p>Merged the relevant PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pksunkara on 2020-01-30 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1653.html">clap-rs/clap#1653</a> on 2020-02-02 06:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3332.html">clap-rs/clap#3332</a> on 2022-01-23 22:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3426.html">clap-rs/clap#3426</a> on 2022-02-09 09:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../solana-labs/solana-program-library/issues/4511.html">solana-labs/solana-program-library#4511</a> on 2023-06-08 23:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5311.html">clap-rs/clap#5311</a> on 2024-01-15 22:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:47:11 UTC
    </footer>
</body>
</html>
