```yaml
number: 2367
title: Allow accessing the env name and default value when iterating over the arguments
type: issue
state: closed
author: shepmaster
labels:
  - E-easy
  - ":money_with_wings: $5"
assignees: []
created_at: 2021-02-26T18:54:15Z
updated_at: 2021-03-05T17:23:28Z
url: https://github.com/clap-rs/clap/issues/2367
synced_at: 2026-01-10T01:57:44Z
```

# Allow accessing the env name and default value when iterating over the arguments

---

_Issue opened by @shepmaster on 2021-02-26 18:54_

**Please complete the following tasks**

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the existing issues

**Describe your use case**

I want to offer the ability to quickly generate a placeholder `.env` file for developers working on my projects. This information is contained with the `App` struct via the name / help text / environment variable name. However, I cannot access the environment variable or default value.

[dotenv](https://docs.rs/dotenv/0.15.0/dotenv/) is a crate that allows specifying an `.env` file containing environment variables in a file. This allows developers to have a semi-persistent way to store and document environment variables needed to run an application.

Clap allows specifying environment variables as fallback sources for command line options. This includes the environment variable names, documentation about them, default values, possible values, etc.

**Describe the solution you'd like**

I want to reuse the definitions we've already given to Clap to generate a skeleton `.env` file:

```rust
use clap::{IntoApp, Clap};

#[derive(Clap)]
struct Config {
    #[clap(long, default_value = "world", env = "NAME")]
    /// The name to use
    name: String,
}

fn main() {
    let app: clap::App = Config::into_app();

    for arg in app.get_arguments() {
        println!("# {}", arg.get_about().unwrap_or(""));
        println!("# {}", arg.get_possible_values().unwrap_or(&[]).join(", "));
        println!("# {} = {}", arg.get_env(), arg.get_default_value());
        // Does not exist     ^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^
    }
}
```

This will generate the output

```
# The name to use
# 
# NAME = world
```

A developer starting on the project can direct that output to a `.env` file and edit it as needed.

**Alternatives, if applicable**

_No response_

**Additional Context**

Ideally in a stable release of Clap, but in a beta release would be cool too!



---

_Label `T: new feature` added by @shepmaster on 2021-02-26 18:54_

---

_Comment by @pksunkara on 2021-02-26 18:56_

Need more description and examples. Not really sure what you are asking here.

---

_Comment by @shepmaster on 2021-02-26 19:06_

Updated.

---

_Added to milestone `3.1` by @pksunkara on 2021-02-26 19:08_

---

_Label `:money_with_wings: $5` added by @pksunkara on 2021-02-26 19:08_

---

_Label `C: args` added by @pksunkara on 2021-02-26 19:08_

---

_Label `D: easy` added by @pksunkara on 2021-02-26 19:08_

---

_Label `P4: nice to have` added by @pksunkara on 2021-02-26 19:08_

---

_Label `Z: good first issue` added by @pksunkara on 2021-02-26 19:08_

---

_Referenced in [clap-rs/clap#2368](../../clap-rs/clap/pulls/2368.md) on 2021-02-26 21:45_

---

_Closed by @pksunkara on 2021-03-05 17:23_

---

_Referenced in [clap-rs/clap#4729](../../clap-rs/clap/issues/4729.md) on 2023-02-24 13:55_

---
