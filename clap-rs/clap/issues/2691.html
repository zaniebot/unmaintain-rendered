<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clap `2.33.3` has incorrect MSRV due to bitflags `1.3` MSRV bump - clap-rs/clap #2691</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>clap <code>2.33.3</code> has incorrect MSRV due to bitflags <code>1.3</code> MSRV bump</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/2691">#2691</a>
        opened by <a href="https://github.com/CosmicHorrorDev">@CosmicHorrorDev</a>
        on 2021-08-13 20:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/CosmicHorrorDev">@CosmicHorrorDev</a></div>
            <div class="timeline-body">Please complete the following tasks
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the existing issues</li>
</ul>
Clap Version
<p>2.33.3</p>
Where?
<p>https://github.com/bitflags/bitflags/issues/255</p>
What&#x27;s wrong?
<p>The README states that <code>clap</code> &gt;=2.21 has an MSRV of 1.42, but the dependency on <code>bitflags = &quot;1.2&quot;</code> allows for v1.3 which bumps the requirement up to 1.46</p>
How to fix?
<p>Either pin the requirement for bitflags to 1.2.x, bump the MSRV, or work with bitflags to see if something else can be sorted out</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: docs</span> added by <a href="https://github.com/CosmicHorrorDev">@CosmicHorrorDev</a> on 2021-08-13 20:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>CosmicHorrorDev/vdf-rs#23</a> on 2021-08-13 20:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-08-13 20:43</div>
            <div class="timeline-body"><p>This is one of those complications from MSRV:</p>
<ul>
<li>imo the version constraint is correct and we shouldn&#x27;t be overly constraining  for the sake of MSRV.</li>
<li>Other crates are allowed to advance their MSRV without it being a breaking change.</li>
<li>However, the tools for supporting MSRV are still quite crude</li>
</ul>
<p>The best I can offer at the moment is to use <code>-Z minimal-versions</code> or to patch the dependency.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-08-13 20:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#2735</a> on 2021-08-23 13:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#2734</a> on 2021-08-23 13:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>lsd-rs/lsd#452</a> on 2021-08-24 05:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>pop-os/system76-power#270</a> on 2021-09-16 22:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rfan-debug">@rfan-debug</a> on 2021-09-23 00:12</div>
            <div class="timeline-body"><p>@epage I ran into the same error. Would you mind giving me an example how to patch the transitive dependency <code>bitflags</code> of <code>clap</code>? My rustc version is <code>1.42.0</code></p>
<p>I tried to use a patch as the following but it does not work.</p>
<pre><code>[patch.crates-io]
clap = {git = &quot;https://github.com/clap-rs/clap&quot;, tag = &quot;v2.33.3&quot;}

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>foresterre/cargo-msrv#312</a> on 2022-02-22 15:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>lsd-rs/lsd#688</a> on 2022-07-03 16:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>rust-lang/cargo#9930</a> on 2023-03-30 12:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:58:14 UTC
    </footer>
</body>
</html>
