<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>how to parse `mv &lt;files&gt;... &lt;target&gt;`? - clap-rs/clap #725</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>how to parse <code>mv &lt;files&gt;... &lt;target&gt;</code>?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/725">#725</a>
        opened by <a href="https://github.com/hh9527">@hh9527</a>
        on 2016-11-01 06:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hh9527">@hh9527</a></div>
            <div class="timeline-body"><p>E.g.: <code>mv a1 a2 a3/</code></p>
<p>I use the code like this:</p>
<pre><code class="language-rust">let m = App::new()
  .arg(Arg::with_name(&quot;files&quot;).required(true).multiple(true))
  .arg(Arg::with_name(&quot;target&quot;).required(true))
  .get_matches();
</code></pre>
<p>When input <code>mv a1 a2 a3/</code>, I expect result like this:</p>
<pre><code class="language-js">{
  files: [&quot;a1&quot;, &quot;a2&quot;],
  target: &quot;a3&quot;,
}
</code></pre>
<p>But I got a error:</p>
<pre><code>error: The following required arguments were not provided:
    &lt;target&gt;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-01 16:03</div>
            <div class="timeline-body"><p>This is because there's no way to know when <code>&lt;files&gt;</code> ends and <code>&lt;target&gt;</code> starts. Positional arguments that take multiple values must be the <em>last</em> positional argument.</p>
<p>There are two ways to fix this, either swap the arguments (i.e. <code>&lt;target&gt; &lt;files&gt;...</code>) or limit the number of values to a fixed number (i.e. <code>&lt;file&gt; &lt;file&gt; &lt;target&gt;</code>). Obviously one of those solutions is less viable than the other (fixed number of files), but it's still an option.</p>
<p>Hope this helps! I'm also open to suggestions :wink:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by @kbknapp on 2016-11-01 16:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "how to parse `mv <files> <target>`?" to "how to parse `mv <files>... <target>`?" by @kbknapp on 2016-11-01 16:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-01 16:07</div>
            <div class="timeline-body"><p>Also, thinking about this a little more, there may be a way I could add this feature. Let me play with some implementations and get back with you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @kbknapp on 2016-11-01 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by @kbknapp on 2016-11-01 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: args</span> added by @kbknapp on 2016-11-01 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: parsing</span> added by @kbknapp on 2016-11-01 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @kbknapp on 2016-11-01 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-01 20:29</div>
            <div class="timeline-body"><p>I found a way to make this work, after #727 merges I'll upload v2.17.0 to crates.io</p>
<p>At which point this will give the expected results:</p>
<pre><code class="language-rust">let m = App::new()
  .arg(Arg::with_name(&quot;files&quot;).required(true).multiple(true))
  .arg(Arg::with_name(&quot;target&quot;).required(true))
  .get_matches();
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @homu on 2016-11-01 22:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-02 01:01</div>
            <div class="timeline-body"><p>@hh9527 v2.17.0 is up on crates.io now</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hh9527">@hh9527</a> on 2016-11-02 01:49</div>
            <div class="timeline-body"><p>waooo, it is so nice of you! thank you for this great project!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hh9527">@hh9527</a> on 2016-11-02 02:56</div>
            <div class="timeline-body"><p>@kbknapp I have tried v2.17.0, it works without subcommand, but still break in subcommand.</p>
<p>This works:</p>
<pre><code class="language-rust">    let m = App::new(&quot;mv&quot;)
        .arg(Arg::with_name(&quot;paths&quot;).required(true).multiple(true))
        .arg(Arg::with_name(&quot;target&quot;).required(true))
        .get_matches();
</code></pre>
<p>And this not:</p>
<pre><code class="language-rust">    let m = App::new(&quot;cli&quot;)
        .subcommand(
            SubCommand::with_name(&quot;mv&quot;)
                .arg(Arg::with_name(&quot;paths&quot;).required(true).multiple(true))
                .arg(Arg::with_name(&quot;target&quot;).required(true))
        ).get_matches();
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-02 03:15</div>
            <div class="timeline-body"><p>Ah, thanks for pointing this out, I hadn't testsed it <em>after</em> a subcommand, only before!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @kbknapp on 2016-11-02 03:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-02 03:34</div>
            <div class="timeline-body"><p>It's fixed in #730 :wink:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @homu on 2016-11-02 05:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-02 13:36</div>
            <div class="timeline-body"><p>v2.17.1 is up now!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:46:44 UTC
    </footer>
</body>
</html>
