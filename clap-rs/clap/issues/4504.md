```yaml
number: 4504
title: "Bring back `possible_values` (because `ValueEnum` does not fit everything)"
type: issue
state: closed
author: KSXGitHub
labels:
  - C-enhancement
assignees: []
created_at: 2022-11-23T13:51:25Z
updated_at: 2022-11-24T16:06:54Z
url: https://github.com/clap-rs/clap/issues/4504
synced_at: 2026-01-10T01:57:48Z
```

# Bring back `possible_values` (because `ValueEnum` does not fit everything)

---

_Issue opened by @KSXGitHub on 2022-11-23 13:51_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

4.0.26

### Describe your use case

There are cases where I want to only limit user choices between strings. The behavior of the program remain exactly the same (i.e. no branches related to the user choice). For example: Choosing a weekday only to be printed out, choosing a profile between "release" and "debug" only to infer the binary path, etc.

In such cases, an enum (that derives `ValueEnum`) would be inconvenient since it requires me to write `match` to convert every single enum variant to corresponding strings.

### Describe the solution you'd like

Bring back `possible_values` or something similar.

### Alternatives, if applicable

Derive [strum](https://crates.io/crates/strum) on the value enum. However, this method is not optimal as the resulting program still parse a string into a value enum only to convert it back to the original string.

Use `value_parser = [PossibleValue::new("..."), ...]` but this is unwieldy and cumbersome, especially when written in derive code.

### Additional Context

I exclusively use `#[derive(clap::Parser)]`. I've never use the args builder directly.

---

_Label `C-enhancement` added by @KSXGitHub on 2022-11-23 13:51_

---

_Comment by @epage on 2022-11-23 14:21_

> Use `value_parser = [PossibleValue::new("..."), ...]` but this is unwieldy and cumbersome, especially when written in derive code.

You can also do `value_parser = ["always", "auto", "never"])` as shown in the (builder) example for [`Arg::value_parser`](https://docs.rs/clap/latest/clap/builder/struct.Arg.html#method.value_parser)

---

_Comment by @KSXGitHub on 2022-11-23 15:45_

@epage  I apologize, the fault lies with me for not reading the documentation carefully. I searched for the term "possible" on the docs.rs page for clap and find only the `PossibleValue` struct. The example for `PossibleValue` does not includes this convenient shorthand. May I request adding this shorthand to the code examples for `PossibleValue`?

---

_Comment by @timvisee on 2022-11-24 12:24_

@epage 

`.value_parser(["always", "auto", "never"])` only seems to accept a list as array.

It doesn't seem to be possible to pass a runtime slice or `Vec` holding strings into there, or am I missing something?

---

_Referenced in [clap-rs/clap#4509](../../clap-rs/clap/pulls/4509.md) on 2022-11-24 15:39_

---

_Closed by @epage on 2022-11-24 16:06_

---
