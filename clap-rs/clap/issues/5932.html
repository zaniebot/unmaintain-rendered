<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arg::get_num_args would benefir from more thorough documentation - clap-rs/clap #5932</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Arg::get_num_args would benefir from more thorough documentation</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/clap-rs/clap/issues/5932">#5932</a>
        opened by <a href="https://github.com/nwalfield">@nwalfield</a>
        on 2025-02-27 13:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nwalfield">@nwalfield</a> on 2025-02-27 13:25</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.5.31</p>
<h3>Describe your use case</h3>
<p>I'm trying to understand <a href="https://docs.rs/clap/latest/clap/struct.Arg.html#method.get_num_args"><code>Arg::get_num_args</code></a>.  The documentation says:</p>
<pre><code>Get the number of values for this argument.
</code></pre>
<p>It's unclear to me what <code>None</code> means.</p>
<p>My guess is this method just returns whatever was set by <code>Arg::num_args</code>, and the defalt is <code>None</code>.  But then it remains unclear to me how to interpret <code>None</code>.</p>
<p>I tried looking at the code.  <a href="https://github.com/clap-rs/clap/blob/a8f9885/clap_builder/src/builder/arg.rs#L4637"><code>Here</code></a> <code>None</code> is mapped to <code>1</code>:</p>
<pre><code>let num_vals = self.get_num_args().unwrap_or_else(|| 1.into());
</code></pre>
<p><a href="https://github.com/clap-rs/clap/blob/a8f9885/clap_builder/src/builder/arg.rs#L4637">Here</a> it is <code>Default::default</code>:</p>
<pre><code>if self.is_positional() &amp;&amp; self.num_vals.unwrap_or_default().is_unbounded() 
</code></pre>
<p>which is <a href="https://docs.rs/clap_builder/4.5.27/clap_builder/builder/struct.ValueRange.html#associatedconstant.SINGLE">ValueRange::Single</a>.</p>
<h3>Describe the solution you'd like</h3>
<p>It would be nice if <code>Arg::get_num_args</code> (as well as other methods) had more detailed documentation.</p>
<h3>Alternatives, if applicable</h3>
<p><em>No response</em></p>
<h3>Additional Context</h3>
<p>This is an issue for me, because I'm programmatically deriving our man pages from clap's data structures.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @nwalfield on 2025-02-27 13:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-02-27 16:59</div>
            <div class="timeline-body"><blockquote>
<p>My guess is this method just returns whatever was set by Arg::num_args, and the defalt is None.</p>
</blockquote>
<p>That is correct and true for all of the other <code>get</code> methods, not just <code>get_num_args</code>.</p>
<blockquote>
<p>But then it remains unclear to me how to interpret None.</p>
</blockquote>
<p>Before <code>command.build()</code>, there is no definitive interpretation; its just unset.  After <code>command.build()</code>. it will never be <code>None</code>.  You'll also see a lot of <code>.expect(&quot;built&quot;)</code>s in our code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nwalfield">@nwalfield</a> on 2025-02-27 18:42</div>
            <div class="timeline-body"><p>Thanks for the explanation and the hint to call <code>Command::build</code> before examining the command.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:35:44 UTC
    </footer>
</body>
</html>
