<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapping raw args to desired type on-the-fly similar to `serde_with::TryFromInto` - clap-rs/clap #6118</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Mapping raw args to desired type on-the-fly similar to <code>serde_with::TryFromInto</code></h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/clap-rs/clap/issues/6118">#6118</a>
        opened by <a href="https://github.com/MrFoxPro">@MrFoxPro</a>
        on 2025-09-01 15:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MrFoxPro">@MrFoxPro</a></div>
            <div class="timeline-body">Clap Version
<p>4.5.42</p>
Describe your use case
<p>Due to limitations of clap, it&#x27;s not always possible to get desired type from CLI: <a href="https://github.com/clap-rs/clap/issues/2621">example</a>.
Same thing applies to serde, but <a href="https://docs.rs/serde_with/latest/serde_with/struct.TryFromInto.html">there is convenient macro</a> <code>serde_with::TryFromInto</code>, which allows in combination with <code>#[serde(flatten)]</code> to map values into desired type.</p>
Describe the solution you&#x27;d like
<p>Something like <code>serde_with::TryFromInto</code>, but for clap.</p>
Additional Context
<p>It&#x27;s difficult to transform CLI input to different type, especially if there are multiple nested subcommands. Right now it requires a lot of boilerplate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by <a href="https://github.com/MrFoxPro">@MrFoxPro</a> on 2025-09-01 15:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Mapping raw args to desired object on-the-fly similar to `serde_with::TryFromInto`&quot; to &quot;Mapping raw args to desired type on-the-fly similar to `serde_with::TryFromInto`&quot; by <a href="https://github.com/MrFoxPro">@MrFoxPro</a> on 2025-09-01 16:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-09-02 13:45</div>
            <div class="timeline-body"><p>It would help if you provided a concrete example, like code you tried but is failing.</p>
<p>There are two things I can think you mean:</p>
<ul>
<li>An individual argument type is unsupported.  We have the <code>value_parser</code> attribute for this.  To see what all conversions are supported for that, see https://docs.rs/clap/latest/clap/macro.value_parser.html.  That means we support <code>FromStr</code> but not <code>TryFrom</code> for failable operations though we do support <code>try_map</code> on other value parsers.</li>
<li>A group of arguments (like #2621).  This requires implementing traits directly, see https://docs.rs/clap/latest/clap/_derive/index.html#mixing-builder-and-derive-apis</li>
</ul>
<p>If its one of those cases, could you clarify why the current solutions aren&#x27;t meeting your needs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-derive</span> added by <a href="https://github.com/epage">@epage</a> on 2025-09-02 13:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 20:00:37 UTC
    </footer>
</body>
</html>
