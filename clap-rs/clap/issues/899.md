```yaml
number: 899
title: after_version for consistency with after_help?
type: issue
state: closed
author: swsnr
labels: []
assignees: []
created_at: 2017-03-13T11:40:19Z
updated_at: 2018-08-02T03:30:03Z
url: https://github.com/clap-rs/clap/issues/899
synced_at: 2026-01-10T01:57:41Z
```

# after_version for consistency with after_help?

---

_Issue opened by @swsnr on 2017-03-13 11:40_

Is there anything like `after_version`, to print an additional string after the default text for `--version`?

I'd like to include licensing information and some additional statistics in `--version` (like GNU programs do); currently I use `get_matches_safe` and directly `println!` if the error is `VersionDisplayed`.

---

_Comment by @BurntSushi on 2017-03-13 11:43_

One possibility is to give an internal name of your `--version` flag something distinct from `version` and then handle printing the version info yourself.

---

_Comment by @BurntSushi on 2017-03-13 11:44_

You can use the [`crate_version!`](https://docs.rs/clap/2.21.1/clap/macro.crate_version.html) macro to get the current version of your crate.

---

_Comment by @swsnr on 2017-03-13 11:49_

@BurntSushi Thanks for getting back so quickly â¤ï¸ 

I should like to not, though, that I'm not actually adding my own `--version`.  Sorry for being unclear ðŸ˜ž 

I just rely on the default one, but use `get_matches_safe` and if the error is `VersionDisplayed` I print my additional text before exiting.

Making my own version flag is not as easy, not due to the actual version, but because of the binary name, which you can only get from `app.get_bin_name()` after the args were parsed, but `get_matches` consumes the app so I can't call anything on it afterwards.  There's `get_matches_from_safe_borrow` but its doc says "not normally desired functionality" so I'm unsure whether its okay to use it (new to Rust, so I can't always make sense of the borrow/move semantics :blush:).

---

_Comment by @kbknapp on 2017-03-14 02:06_

`get_matches_from_safe_borrow` is safe to use (and actually what's used internally. I should update the docs. Having said that, having to resort to that is usually not required.

You could also look at using `App::template` which may give you the functionality you need. (Sorry I'm on mobile so I don't have a link at the moment).

---

_Comment by @kbknapp on 2017-03-14 02:12_

Ah I may have misunderstood, if you'd like this info to be displayed when the user runs `--version` but not `--help` there isn't support for that yet, short of doing exactly what you're doing now.

Although I'm working adding a differentiated "long help" vs "short help" which this may fit nearly with. I'll link the issues once I get to a computer.

This would allow you place this extra information in the `--version` text.

---

_Referenced in [clap-rs/clap#900](../../clap-rs/clap/issues/900.md) on 2017-03-14 02:18_

---

_Comment by @swsnr on 2017-03-28 08:31_

@kbknapp Sorry for the late reply.  

> if you'd like this info to be displayed when the user runs --version but not --help there isn't support for that yet, short of doing exactly what you're doing now.

Yes, that's exactly my use case.  Specifically, I'd like to include licensing information in `--version`, similar to what GNU programs show (e.g. `emacs --version`).

It's not too important, since it's possible to add this output in other ways as described above, but it'd simplify the code a bit if I were able to put it into `App` directly instead of manually printing it after the default `--version` output.  In other words, it'd be great if there was an `.after_version()` method on `App` like the existing `.after_help()`.

So, I'm looking forward to #900 :blush:

Thanks for your help <3

---

_Comment by @kbknapp on 2017-04-05 12:59_

Closed now that `long_version` is a thing

---

_Closed by @kbknapp on 2017-04-05 12:59_

---
