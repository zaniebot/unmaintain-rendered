<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unset default value if some other Arg is present (or has a specific value) - clap-rs/clap #1406</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>unset default value if some other Arg is present (or has a specific value)</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/1406">#1406</a>
        opened by <a href="https://github.com/delan">@delan</a>
        on 2019-01-27 06:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/delan">@delan</a> on 2019-01-27 06:17</div>
            <div class="timeline-body"><!--
Please use the following template to assist with creating an issue and to ensure a speedy resolution. If an area is not applicable, feel free to delete the area or mark with `N/A`
-->

<h3>Rust Version</h3>
<p>rustc 1.32.0 (9fda7c223 2019-01-16)</p>
<h3>Affected Version of clap</h3>
<p>2.32.0</p>
<h3>Feature Request Summary</h3>
<p>Some way to unset the default value for an Arg based on the presence or value of some other Arg. One alternative the current API allows is to pass the empty string (or some other value that means nothing) to <code>Arg::default_value_if</code> (at the expense of additional code to treat <code>Some(&quot;&quot;)</code> like <code>None</code>):</p>
<pre><code class="language-rust">.default_value_if(&quot;other&quot;, None, &quot;&quot;).default_value(&quot;foo&quot;)
</code></pre>
<p>The signature Iâ€™m imagining looks something like:</p>
<pre><code class="language-rust">fn no_default_value_if(self, arg: &amp;'a str, val: Option&lt;&amp;'b str&gt;) -&gt; Self
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/delan">@delan</a> on 2019-01-27 07:39</div>
            <div class="timeline-body"><p>@Moongoodboy-K suggests <code>default_value_unless</code> over <code>no_default_value_if</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: args</span> added by @CreepySkeleton on 2020-02-01 15:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: options</span> added by @CreepySkeleton on 2020-02-01 15:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: intermediate</span> added by @CreepySkeleton on 2020-02-01 15:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by @CreepySkeleton on 2020-02-01 15:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by @CreepySkeleton on 2020-02-01 15:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.1" by @pksunkara on 2020-04-09 07:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/patrickelectric">@patrickelectric</a> on 2020-05-21 15:12</div>
            <div class="timeline-body"><p>That's a really important feature!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stevenengler">@stevenengler</a> on 2021-01-02 21:09</div>
            <div class="timeline-body"><p>Instead of creating a new method, could the signature of <code>default_value_if()</code> be changed in version 3 to support an <code>Option&lt;&amp;str&gt;</code> for the default rather than just a <code>&amp;str</code>? This way the default can be unset without needing to add more functions to the API.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.1" by @pksunkara on 2021-01-03 08:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.0" by @pksunkara on 2021-01-03 08:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/delan">@delan</a> on 2021-01-04 13:33</div>
            <div class="timeline-body"><blockquote>
<p>Instead of creating a new method, could the signature of <code>default_value_if()</code> be changed in version 3 to support an <code>Option&lt;&amp;str&gt;</code> for the default rather than just a <code>&amp;str</code>?</p>
</blockquote>
<p>Good idea (fwiw). The parameter type could even change without adding to the version 3 migration burden with <code>impl Into&lt;Option&lt;&amp;str&gt;&gt;</code>, which allows you to continue passing <code>&amp;str</code> values without wrapping them in <code>Some</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2296.html">clap-rs/clap#2296</a> on 2021-01-17 07:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-02-28 12:35</div>
            <div class="timeline-body"><p>@logansquirel And then you can take this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2400.html">clap-rs/clap#2400</a> on 2021-03-09 18:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pksunkara on 2021-03-10 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../solana-labs/solana-program-library/issues/4511.html">solana-labs/solana-program-library#4511</a> on 2023-06-08 23:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:07 UTC
    </footer>
</body>
</html>
