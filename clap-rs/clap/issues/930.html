<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Differences between App::is_present and App::occurrences_of - clap-rs/clap #930</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Differences between App::is_present and App::occurrences_of</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/930">#930</a>
        opened by <a href="https://github.com/RazrFalcon">@RazrFalcon</a>
        on 2017-04-11 17:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/RazrFalcon">@RazrFalcon</a> on 2017-04-11 17:39</div>
            <div class="timeline-body"><p>I have an option with a default value and I want to check that this value was set explicitly. How can I do this?</p>
<p>Example:</p>
<pre><code class="language-rust">    let m = App::new(&quot;myprog&quot;)
        .arg(Arg::with_name(&quot;test&quot;)
        .short(&quot;t&quot;)
        .default_value(&quot;yes&quot;))
        .get_matches();

    println!(&quot;{} {}&quot;, m.is_present(&quot;test&quot;), m.occurrences_of(&quot;test&quot;));
</code></pre>
<pre><code>cargo run
true 0

cargo run -- -t yes
true 1
</code></pre>
<p>So <code>is_present</code> returns <code>true</code> even when a value is not set explicitly but has a default value. And <code>occurrences_of</code> processes such case &quot;correctly&quot;.</p>
<p>The idea is that I want an option like <code>--no-defaults</code>, which will reset/ignore default values, but that I have to detect cases when user set default value manually.</p>
<p>Can I rely on <code>occurrences_of</code>, as in the example above, or this behavior may change in future?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-04-18 00:45</div>
            <div class="timeline-body"><blockquote>
<p>Can I rely on occurrences_of, as in the example above, or this behavior may change in future?</p>
</blockquote>
<p>Yes you can rely on it. This this the primary reasons for <code>occurrences_of</code>, i.e. to know how many times a particular arg was explicitly used.</p>
<p><code>is_present</code> is primarily meant to be used with flags (i.e. args with no associated value).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by @kbknapp on 2017-04-18 00:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2017-04-18 00:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:31 UTC
    </footer>
</body>
</html>
