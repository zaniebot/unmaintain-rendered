```yaml
number: 3012
title: "Build failure: cannot find derive macro `Clap` in this scope"
type: issue
state: closed
author: chandrakananandi
labels: []
assignees: []
created_at: 2021-11-10T15:00:53Z
updated_at: 2021-11-10T15:08:03Z
url: https://github.com/clap-rs/clap/issues/3012
synced_at: 2026-01-10T01:57:46Z
```

# Build failure: cannot find derive macro `Clap` in this scope

---

_Issue opened by @chandrakananandi on 2021-11-10 15:00_

<!--
Please use the following template to assist with creating an issue and to ensure a speedy resolution. If an area is not applicable, feel free to delete the area or mark with `N/A`
-->

### Rust Version

*  `1.56.1`

### OS
* macOS Monterey, version 12.0.1

### Affected Version of clap

* `3.0.0-beta.5`, `3.0.0-beta.2`, `2.33.3`

### Expected Behavior Summary

`cargo build` should succeed.

### Actual Behavior Summary

`cargo build` fails with this message: `error[E0432]: unresolved import clap::Clap`.

### Steps to Reproduce the issue

To reproduce the error, I wrote this hello world code in a new project made with `cargo init`. In `src/main.rs` I put:

```
use clap::Clap;                                                                 
                                                                                
#[derive(Clap)]                                                                 
pub struct Foo {                                                                
    //#[clap(long)]                                                             
    pub param: bool,                                                            
}                                                                               
                                                                                
fn main() {                                                                     
    println!("Hello, world!");                                                  
} 
```

and the `Cargo.toml` has:
```
[package]                                                                       
name = "clapper"                                                                
version = "0.1.0"                                                               
edition = "2021"                                                                
                                                                                
# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html
                                                                                
[dependencies]                                                                  
clap = "3.0.0-beta.5" 
```


### Output
Here is what I see when I do `cargo build`:

``` 
error[E0432]: unresolved import `clap::Clap`
 --> src/main.rs:1:5
  |
1 | use clap::Clap;
  |     ^^^^^^^^^^ no `Clap` in the root

error: cannot determine resolution for the derive macro `Clap`
 --> src/main.rs:3:10
  |
3 | #[derive(Clap)]
  |          ^^^^
  |
  = note: import resolution is stuck, try simplifying macro imports

For more information about this error, try `rustc --explain E0432`.
error: could not compile `clapper` due to 2 previous errors
```

I have tried to remove my rust installation and the `.cargo` and `.rustup` directories and reinstalled rust but that didn't solve the problem. I also checked to make sure `.cargo/bin` is in my PATH variable.

Has anyone encountered such an issue? Could this be due to OS upgrade?


---

_Comment by @ccokl on 2021-11-10 15:05_

Yep, look like `clap::Clap` renamed to `clap::Parser`.

---

_Comment by @epage on 2021-11-10 15:08_

Yes, in beta5, we renamed the trait. See https://github.com/clap-rs/clap/blob/master/CHANGELOG.md#v300-beta5-2021-10-18

---

_Closed by @epage on 2021-11-10 15:08_

---
