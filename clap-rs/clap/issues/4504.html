<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bring back `possible_values` (because `ValueEnum` does not fit everything) - clap-rs/clap #4504</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Bring back <code>possible_values</code> (because <code>ValueEnum</code> does not fit everything)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/4504">#4504</a>
        opened by <a href="https://github.com/KSXGitHub">@KSXGitHub</a>
        on 2022-11-23 13:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/KSXGitHub">@KSXGitHub</a></div>
            <div class="timeline-body">Please complete the following tasks
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
Clap Version
<p>4.0.26</p>
Describe your use case
<p>There are cases where I want to only limit user choices between strings. The behavior of the program remain exactly the same (i.e. no branches related to the user choice). For example: Choosing a weekday only to be printed out, choosing a profile between &quot;release&quot; and &quot;debug&quot; only to infer the binary path, etc.</p>
<p>In such cases, an enum (that derives <code>ValueEnum</code>) would be inconvenient since it requires me to write <code>match</code> to convert every single enum variant to corresponding strings.</p>
Describe the solution you&#x27;d like
<p>Bring back <code>possible_values</code> or something similar.</p>
Alternatives, if applicable
<p>Derive <a href="https://crates.io/crates/strum">strum</a> on the value enum. However, this method is not optimal as the resulting program still parse a string into a value enum only to convert it back to the original string.</p>
<p>Use <code>value_parser = [PossibleValue::new(&quot;...&quot;), ...]</code> but this is unwieldy and cumbersome, especially when written in derive code.</p>
Additional Context
<p>I exclusively use <code>#[derive(clap::Parser)]</code>. I&#x27;ve never use the args builder directly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by <a href="https://github.com/KSXGitHub">@KSXGitHub</a> on 2022-11-23 13:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-11-23 14:21</div>
            <div class="timeline-body"><blockquote>
<p>Use <code>value_parser = [PossibleValue::new(&quot;...&quot;), ...]</code> but this is unwieldy and cumbersome, especially when written in derive code.</p>
</blockquote>
<p>You can also do <code>value_parser = [&quot;always&quot;, &quot;auto&quot;, &quot;never&quot;])</code> as shown in the (builder) example for <a href="https://docs.rs/clap/latest/clap/builder/struct.Arg.html#method.value_parser"><code>Arg::value_parser</code></a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KSXGitHub">@KSXGitHub</a> on 2022-11-23 15:45</div>
            <div class="timeline-body"><p>@epage  I apologize, the fault lies with me for not reading the documentation carefully. I searched for the term &quot;possible&quot; on the docs.rs page for clap and find only the <code>PossibleValue</code> struct. The example for <code>PossibleValue</code> does not includes this convenient shorthand. May I request adding this shorthand to the code examples for <code>PossibleValue</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/timvisee">@timvisee</a> on 2022-11-24 12:24</div>
            <div class="timeline-body"><p>@epage</p>
<p><code>.value_parser([&quot;always&quot;, &quot;auto&quot;, &quot;never&quot;])</code> only seems to accept a list as array.</p>
<p>It doesn&#x27;t seem to be possible to pass a runtime slice or <code>Vec</code> holding strings into there, or am I missing something?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#4509</a> on 2022-11-24 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/epage">@epage</a> on 2022-11-24 16:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:59:30 UTC
    </footer>
</body>
</html>
