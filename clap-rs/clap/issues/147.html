<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Re-order optional arguments in usage strings to appear before required arguments - clap-rs/clap #147</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Re-order optional arguments in usage strings to appear before required arguments</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/147">#147</a>
        opened by <a href="https://github.com/manfredlotz">@manfredlotz</a>
        on 2015-07-06 17:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/manfredlotz">@manfredlotz</a> on 2015-07-06 17:39</div>
            <div class="timeline-body"><p>Hi Kevin,
First of all, your videos are really great. Thanks for this.
Question: I played with fake and when invokind fake like this:
./target/debug/fake --help
one of the lines is this:
fake <input> <output> [FLAGS] [OPTIONS]</p>
<p>Shouldn't it be the other way round?
fake [FLAGS] [OPTIONS] <input> <output></p>
<p>-- Manfred</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/manfredlotz">@manfredlotz</a> on 2015-07-06 17:46</div>
            <div class="timeline-body"><p>Sorry I wanted to say that I got this line
fake <input> <output> [FLAGS] [OPTIONS]
instead of that line:
fake [FLAGS] [OPTIONS] <input> <output></p>
<p>(Didn't know I have to escape &lt; and &gt;)
-- Manfred</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @manfredlotz on 2015-07-06 17:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-06 23:15</div>
            <div class="timeline-body"><p>I'm in the process of updating the videos now actually :) There have been some significant changes/improvements since those were made.</p>
<p>As for your question though, yes and no. &quot;No&quot; because it works either way; as the optional flags and optional options could go before or after the required arguments and work just fine.
&quot;Yes&quot; because traditionally optional arguments come before required ones in usage strings. The reason they appear that way is due to how <code>clap</code> parses required arguments for very complex usage strings (even though <code>fake</code>'s arguments aren't complex, it's still a bi-product). The way you can in effect read that usage string is: &quot;fake takes two required positional arguments, first 'input' and second 'output' there are also several other optional flags and options which are position independent.&quot; If you were to add additional optional positional arguments you'd see a <code>[POSITIONAL]</code> pre-pended as well meaning, &quot;There are also one or more optional positional arguments.&quot;</p>
<p>If you need to change the usage string (to match documentation or anything), you can use <code>App::usage(&quot;fake [FLAGS] [OPTIONS] &lt;input&gt; &lt;output&gt;&quot;)</code> to override the auto-generated one. There is a drawback to this approach though; you no longer can take advantage of &quot;smart&quot; or &quot;context aware&quot; usage strings for that command, as <code>clap</code> will just spit out the one you provided no matter what. So it's a trade-off, but there are some very valid times you may want to do that.</p>
<p>Hope this answers your question :) If not, feel free to contact me!</p>
<p>Edit: And thanks for watching the videos and taking the time to comment!! :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/manfredlotz">@manfredlotz</a> on 2015-07-09 13:24</div>
            <div class="timeline-body"><p>Yes, I know that it works either way. I only think it is more 'natural' to have flags and options coming first. IIRC, then in the samples you presented in the videos it came out more naturally like this:
fake [FLAGS] <input></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-09 13:28</div>
            <div class="timeline-body"><p>I think you're correct as well. If I get some time this weekend I'll take a look at some possible ways to re-order them back to the expected way. I've got some ideas on how to do so, I just need to test them :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @kbknapp on 2015-07-09 13:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @kbknapp on 2015-07-09 13:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Issue or not?" to "Re-order optional arguments in usage strings to appear before required arguments" by @kbknapp on 2015-07-09 13:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/manfredlotz">@manfredlotz</a> on 2015-07-09 13:44</div>
            <div class="timeline-body"><p>Sounds great. Thx a lot.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-09 13:54</div>
            <div class="timeline-body"><p>Turned out to be way easier than I imagined, so I've just put in a PR to correct this to the more standard natural order. I've also change <code>[POSITIONALS]</code> to <code>[ARGS]</code> in usage strings because thats the more standard vernacular.</p>
<p>Once Travis passes I'll merge this into master and upload <code>1.0.2</code> to crates.io</p>
<p>Thanks again for taking the time to file this!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/153.html">clap-rs/clap#153</a> on 2015-07-09 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2015-07-09 14:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-07-09 14:29</div>
            <div class="timeline-body"><p>1.0.2 on crates.io or master here is good to go now! Once I finish these updated videos everything should be back in sync ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/manfredlotz">@manfredlotz</a> on 2015-07-09 19:43</div>
            <div class="timeline-body"><p>Just tested. Works fine.
Thanks a lot for reacting such quickly.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:17 UTC
    </footer>
</body>
</html>
