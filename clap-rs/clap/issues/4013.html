<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set the value of an argument from a file, based on an environment variable - clap-rs/clap #4013</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Set the value of an argument from a file, based on an environment variable</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/4013">#4013</a>
        opened by <a href="https://github.com/nitnelave">@nitnelave</a>
        on 2022-08-01 12:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nitnelave">@nitnelave</a> on 2022-08-01 12:18</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>3.1.15</p>
<h3>Describe your use case</h3>
<p>I'm writing an application that will be run in a docker container. The application takes some secrets which should be possible to pass as a file, rather than as direct values on the command line or environment.</p>
<h3>Describe the solution you'd like</h3>
<p>Currently, for a flag <code>--password</code>, it's possible to get an env variable <code>PASSWORD</code> and load the value from there. I'd like to be able to have <code>PASSWORD_FILE</code> that would point to a file that would be read to get the value of the flag.</p>
<p>E.g.:</p>
<pre><code>$ ./my_app --password=abc
Got password: abc
$ PASSWORD=abc ./my_app
Got password: abc
$ PASSWORD_FILE=/tmp/password ./my_app
Got password: abc
$ cat /tmp/password
abc
</code></pre>
<h3>Alternatives, if applicable</h3>
<p><em>No response</em></p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @nitnelave on 2022-08-01 12:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../SergioBenitez/Figment/issues/51.html">SergioBenitez/Figment#51</a> on 2022-08-01 13:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nitnelave">@nitnelave</a> on 2022-08-01 13:14</div>
            <div class="timeline-body"><p>An alternative would be to use a custom provider with e.g. Figment to load these values: https://github.com/SergioBenitez/Figment/issues/51</p>
<p>The disadvantage of this is that the option doesn't show up in the usage/help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-help</span> added by @epage on 2022-08-01 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-parsing</span> added by @epage on 2022-08-01 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-wont-fix</span> added by @epage on 2022-08-01 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-08-01 14:13</div>
            <div class="timeline-body"><p>At the moment, thos seems too specialized of a use case to include in clap.  One workaround  is to document <code>PASSWORD_FILE</code> in the <code>Arg::help</code> and read it directly if <code>Arg::help</code> is not set.  In the future, I hope to make all env support a plugin.  The way I'm thinking of this, it would allow other people to implement their own variation on the same theme.  Again, this would be the user supplying the logic for this, rather than clap directly.</p>
<p>As I feel this is out of scope, I'm closing this issue.  If there are concerns about this, feel free to let us know!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2022-08-01 14:13</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:34 UTC
    </footer>
</body>
</html>
