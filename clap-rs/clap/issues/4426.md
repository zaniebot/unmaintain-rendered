```yaml
number: 4426
title: Allow an argument to be both a positional and an option
type: issue
state: closed
author: figsoda
labels:
  - C-enhancement
  - A-builder
  - S-wont-fix
assignees: []
created_at: 2022-10-27T04:40:42Z
updated_at: 2022-10-27T12:41:51Z
url: https://github.com/clap-rs/clap/issues/4426
synced_at: 2026-01-10T01:57:48Z
```

# Allow an argument to be both a positional and an option

---

_Issue opened by @figsoda on 2022-10-27 04:40_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

4.0.18

### Describe your use case

As far as I'm aware, `short` and `long` overrides the implicit positionalness and there is no way to have both on

### Describe the solution you'd like

for example, if I want to have `prog a b c`, `prog -f a b c`, and `prog --foo a b c` to be equivalent
```rust
#[derive(Parser)]
struct Opts {
    #[arg(short, long, position, num_args = ..)]
    foo: Option<Vec<String>>,
}
```

### Alternatives, if applicable

Using `replace` from `unstable-replace`, but I have to deal with the quirks of `replace` and also use an unstable feature
```rust
#[derive(Parser)]
#[command(replace("-f", [""; 0]), replace("-foo", [""; 0]))] // not sure how to create explicitly typed slices so I had to create this abomination
struct Opts {
    #[arg(short, long, num_args = ..)]
    foo: Option<Vec<String>>,
}
```

Or having 2 separated fields and combine them manually, which seems overly complicated
```rust
#[derive(Parser)]
struct Opts {
    #[arg(short, long, num_args = ..)]
    foo: Option<Vec<String>>,
    foo2: Option<Vec<String>>,
}
```

### Additional Context

_No response_

---

_Label `C-enhancement` added by @figsoda on 2022-10-27 04:40_

---

_Label `A-builder` added by @epage on 2022-10-27 12:41_

---

_Label `S-wont-fix` added by @epage on 2022-10-27 12:41_

---

_Comment by @epage on 2022-10-27 12:41_

I feel like trying to support both without a very strong motivation will add complexity to clap for a case that should be pretty rare in CLIs.  I also feel that this isn't a pattern we should be encouraging by making things easier.

Users have the building blocks they need to implement this themselves by putting the two arguments into a group which will be made easier with https://github.com/clap-rs/clap/issues/2621.

Without more, I'm going ahead and closing this as unplanned.

---

_Closed by @epage on 2022-10-27 12:41_

---
