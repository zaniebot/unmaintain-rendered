<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clap does not compile - clap-rs/clap #2917</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Clap does not compile</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/2917">#2917</a>
        opened by <a href="https://github.com/ghost">@ghost</a>
        on 2021-10-20 14:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ghost">@ghost</a></div>
            <div class="timeline-body">Please complete the following tasks
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the existing issues</li>
</ul>
Rust Version
<p>1.55</p>
Clap Version
<p>3.0-beta.5</p>
Minimal reproducible code
<pre><code>use clap::*;

/// NEAR Indexer Example
/// Watches for stream of blocks from the chain
#[derive(Debug,Clap)]
#[clap(version = &quot;0.1&quot;, author = &quot;Near Inc. &lt;hello@nearprotocol.com&gt;&quot;)]
pub(crate) struct Opts {
    /// Sets a custom config dir. Defaults to ~/.near/
    #[clap(short, long)]
    pub home_dir: Option&lt;std::path::PathBuf&gt;,
}

fn main() {
    println!(&quot;Hello, world!&quot;);
}

</code></pre>
Steps to reproduce the bug with the above code
<p><code>cargo run --release</code></p>
Actual Behaviour
<pre><code>error: cannot find derive macro `Clap` in this scope
 --&gt; src/main.rs:5:16
  |
5 | #[derive(Debug,Clap)]
  |                ^^^^

error: cannot find attribute `clap` in this scope
 --&gt; src/main.rs:6:3
  |
6 | #[clap(version = &quot;0.1&quot;, author = &quot;Near Inc. &lt;hello@nearprotocol.com&gt;&quot;)]
  |   ^^^^

error: cannot find attribute `clap` in this scope
 --&gt; src/main.rs:9:7
  |
9 |     #[clap(short, long)]
  |       ^^^^

warning: unused import: `clap::*`
 --&gt; src/main.rs:1:5
  |
1 | use clap::*;
  |     ^^^^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

error: aborting due to 3 previous errors; 1 warning emitted

</code></pre>
Expected Behaviour
<p>Hello world</p>
Additional Context
<p>The answer here doesn&#x27;t make sense <a href="https://github.com/clap-rs/clap/issues/2910">clap-rs/clap#2910</a></p>
<p>3.0.0-beta.2 does not compile now
3.0.0-beta.4 does not compile now
3.0.0-beta.5 does not compile now</p>
<p>3.0.0-beta.2 compiled last month</p>
Debug Output
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by <a href="https://github.com/ghost">@ghost</a> on 2021-10-20 14:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-10-20 14:51</div>
            <div class="timeline-body"><p>You would need to upgrade to beta.5 and change the code accordingly since we have breaking changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-10-20 14:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ghost">@ghost</a> on 2021-10-20 14:52</div>
            <div class="timeline-body"><p>Upgrade to what? I just showed you that the latest version does not compile</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ghost">@ghost</a> on 2021-10-20 14:54</div>
            <div class="timeline-body"><p>Nevermind <code>change the code accordingly</code> means I have to go and find what that means.</p>
<p>It&#x27;d be great if you can point to the place where I can see exactly what is breaking instead of looking through source code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-10-20 14:56</div>
            <div class="timeline-body"><p>https://github.com/clap-rs/clap/blob/master/CHANGELOG.md</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>chmln/handlr#53</a> on 2021-11-06 19:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>denisidoro/navi#650</a> on 2021-12-18 07:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:58:25 UTC
    </footer>
</body>
</html>
