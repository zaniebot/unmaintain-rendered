```yaml
number: 1815
title: "clap_derive: Arg::short does not accept \"...\" anymore, it needs char"
type: issue
state: closed
author: CreepySkeleton
labels:
  - A-docs
  - E-medium
  - E-help-wanted
  - E-easy
  - A-derive
assignees: []
created_at: 2020-04-12T21:16:03Z
updated_at: 2020-06-27T01:32:42Z
url: https://github.com/clap-rs/clap/issues/1815
synced_at: 2026-01-10T01:57:44Z
```

# clap_derive: Arg::short does not accept "..." anymore, it needs char

---

_Issue opened by @CreepySkeleton on 2020-04-12 21:16_

`Arg::short` in clap 2.x is defined as `.short("...")` while in clap 3.0 it's going to take `char`.

All the examples/tests for the derive use the obsoleted `"..."` form, which is supported by [this hack](https://github.com/clap-rs/clap/blob/81457178fa7e055775867ca659b37798b5ae9584/clap_derive/src/attrs.rs#L150-L154). 

This should be fixed: tests/examples/docs need to be adjusted, the hack should be removed.

---

_Label `C: tests` added by @CreepySkeleton on 2020-04-12 21:16_

---

_Label `C: docs` added by @CreepySkeleton on 2020-04-12 21:16_

---

_Label `D: easy` added by @CreepySkeleton on 2020-04-12 21:16_

---

_Label `C: examples` added by @CreepySkeleton on 2020-04-12 21:16_

---

_Label `Z: mentored` added by @CreepySkeleton on 2020-04-12 21:16_

---

_Label `W: 3.x` added by @CreepySkeleton on 2020-04-12 21:16_

---

_Label `help wanted` added by @CreepySkeleton on 2020-04-12 21:16_

---

_Label `Z: good first issue` added by @CreepySkeleton on 2020-04-12 21:16_

---

_Label `C: derive macros` added by @CreepySkeleton on 2020-04-12 21:16_

---

_Added to milestone `3.0` by @pksunkara on 2020-04-12 21:20_

---

_Comment by @lanesawyer on 2020-06-13 21:46_

Is this still an issue? On the `master` branch, all usages of `.short()` appear to be taking in a single character.

---

_Comment by @CreepySkeleton on 2020-06-14 16:38_

This works fine with current master:

```rust

#[derive(Clap, Debug)]
struct Opt {
    /// "c" is a string literal, not 'c' char
    #[clap(short = "c", long)]
    nb_cars: Option<i32>,
}
```

It MUST have been a `'c'`, but there's [the hack](https://github.com/clap-rs/clap/blob/81457178fa7e055775867ca659b37798b5ae9584/clap_derive/src/attrs.rs#L150-L154) supporting this blasphemy. The hack must be removed, `#[clap(short)]` must be fixed to work with chars and not strings, and examples/tests must be adjusted.

---

_Referenced in [clap-rs/clap#1975](../../clap-rs/clap/pulls/1975.md) on 2020-06-17 00:49_

---

_Closed by @bors[bot] on 2020-06-27 01:32_

---

_Referenced in [cauebs/durt#17](../../cauebs/durt/issues/17.md) on 2020-10-11 19:49_

---
