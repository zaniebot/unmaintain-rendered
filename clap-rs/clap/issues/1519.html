<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question/Idea: Parse config file via clap-rs? - clap-rs/clap #1519</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Question/Idea: Parse config file via clap-rs?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/1519">#1519</a>
        opened by <a href="https://github.com/michael-smythe">@michael-smythe</a>
        on 2019-07-16 03:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/michael-smythe">@michael-smythe</a> on 2019-07-16 03:17</div>
            <div class="timeline-body"><p>I have a program which looks like this:</p>
<pre><code>let matches = App::new(&quot;Great Program&quot;)
                 .version(&quot;0.0.1&quot;)
                 .arg(Arg::with_name(&quot;great_option_a&quot;)
                    .short(&quot;a&quot;)
                    .long(&quot;great_option_a&quot;)
                    .value_name(&quot;A_NAME&quot;)
                    .help(&quot;Specify great_option_a's name&quot;)
                    .required(true)
                 )
                 .arg(Arg::with_name(&quot;great_option_b&quot;)
                    .short(&quot;b&quot;)
                    .long(&quot;great_option_b&quot;)
                    .value_name(&quot;B_NAME&quot;)
                    .help(&quot;Specify great_option_b's name&quot;)
                    .required(true)
                 )
                 ==== TRUNCATED ====
                 .arg(Arg::with_name(&quot;great_option_z&quot;)
                    .short(&quot;z&quot;)
                    .long(&quot;great_option_z&quot;)
                    .value_name(&quot;Z_NAME&quot;)
                    .help(&quot;Specify great_option_z's name&quot;)
                    .required(true)
                 )
                 .get_matches();
</code></pre>
<p>The program works great, because its a great program, but something that I would like to be able to do is use a config file instead of specify all of these options via the cli at runtime. Is there a way to leverage the backend logic that gets built by clap where it parses and validates all or some of the options that I would normally have to type as arguments? For instance if I was to make a file that contained the following:</p>
<pre><code>cat ./greatest_config
great_option_a=&quot;A&quot;
great_option_b=&quot;B&quot;
==== TRUNCATED ====
great_option_z=&quot;Z&quot;
</code></pre>
<p>Would it be possible using clap to have something which makes the following commands equivelant:</p>
<pre><code>./great_program -a A -b B ==== TRUNCATERD ==== -z Z
./great_program --config_file=./greatest_config
</code></pre>
<p>Or is the correct answer that I would have to build a seperate parsing and validating system for when the option of a config file is preseted and ensure that the logic matches the logic setup by the clap parsing engine? If this a completely idiotic question please just point me in the right direction, if this is not a completely dumb question and it does not currently exist inside of clap is it a feature the clap-rs project would be interested in integrating? Also if there is a better venue for this conversation please let me know. Thanks in advance for any help/insight you may be able to provide!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/comfortablynick">@comfortablynick</a> on 2019-07-18 21:35</div>
            <div class="timeline-body"><p>I had this same idea recently. I am using using clap for my cli and reading from a toml config file, and they share some options. Serde converts the toml file into a separate struct, so for now I'll have to validate them separately. But it would be great to have some type of integration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ebkalderon">@ebkalderon</a> on 2019-11-07 03:11</div>
            <div class="timeline-body"><p>@comfortablynick Would you be able to use <code>structopt</code> with its <code>clap</code> backend and then derive <code>Serialize</code> and <code>Deserialize</code> on the struct to achieve the same effect? This won't fully solve this issue, but it might make your current experience a bit more streamlined.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidMcneil">@davidMcneil</a> on 2019-11-26 13:18</div>
            <div class="timeline-body"><p><a href="https://github.com/davidMcneil/unified-dynamic-rust-app-config">Here</a> is proof-of-concept work on parsing a config file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by @CreepySkeleton on 2020-02-01 13:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by @CreepySkeleton on 2020-02-01 13:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: after v3 release</span> added by @CreepySkeleton on 2020-02-01 13:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: after v3 release</span> removed by @CreepySkeleton on 2020-02-07 07:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-04-09 08:06</div>
            <div class="timeline-body"><p>#1693 should be fixing this. I would like to close this issue in favour of that. Please reopen with arguments if I missed something.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pksunkara on 2020-04-09 08:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1693.html">clap-rs/clap#1693</a> on 2020-04-09 13:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:07 UTC
    </footer>
</body>
</html>
