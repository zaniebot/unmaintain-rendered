<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Question about flags and values in YAML - clap-rs/clap #284</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Question about flags and values in YAML</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/284">#284</a>
        opened by <a href="https://github.com/XAMPPRocky">@XAMPPRocky</a>
        on 2015-09-28 23:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/XAMPPRocky">@XAMPPRocky</a></div>
            <div class="timeline-body"><p>When a flag is imported from YAML, and used in the app, the parser will recognise that the flag being passed, but will not give it a value leading to getting a <code>None</code>. In the following example, I have two arguments, one a required free argument, the other a flag that conflicts withs the first. The program will run without error, leading to believe the flag is being parsed correctly, but isn't being assigned a value.</p>
<h3>main.rs</h3>
<pre><code>fn main() {
    use clap::App;
    let yaml = load_yaml!(&quot;../cli.yml&quot;);
    let matches = App::from_yaml(yaml).get_matches();

    println!(&quot;{:?}&quot;, matches.value_of(&quot;stdin&quot;));
}
</code></pre>
<h3>cli.yml</h3>
<pre><code>name: Test
version: 0.0.1
author: Aaron P. &lt;theaaronepower@gmail.com&gt;
about: testing
args:
  - input:
        index: 1
        multiple: true
        required: true
        help: The input file(s)/directory(ies)
  - stdin:
        short: s
        long: stdin
        conflicts_with:
            - input
</code></pre>
<h1>Meta</h1>
<h6>clap version: 1.4.2</h6>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-09-29 00:43</div>
            <div class="timeline-body"><p>Ah ok. This is because flags don't have a value, they are simply present or not present. Using the <code>value_of()</code> will always return <code>None</code> with flags. Instead use <code>is_present(&quot;stdin&quot;)</code> which returns a <code>bool</code> to see if the flag was used or not.</p>
<p>Slightly un-related, if the flag has <code>multiple(true)</code> you can use <code>occurrences_of(&quot;stdin&quot;)</code> to see how many times the user passed it (such as <code>-sss</code> or <code>-s -s -s</code>). Not really applicable to this problem, but just FYI :wink:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by @kbknapp on 2015-09-29 00:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Flags do not fully work when imported from YAML" to "Question about flags and values in YAML" by @kbknapp on 2015-09-30 18:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2015-10-28 13:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:46:26 UTC
    </footer>
</body>
</html>
