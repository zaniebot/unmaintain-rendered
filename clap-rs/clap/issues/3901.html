<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YAML Parsing - clap-rs/clap #3901</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>YAML Parsing</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/3901">#3901</a>
        opened by <a href="https://github.com/aress31">@aress31</a>
        on 2022-07-08 22:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/aress31">@aress31</a></div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Rust Version</h3>
<p>rustc 1.62.0 (a8314ef7d 2022-06-27)</p>
<h3>Clap Version</h3>
<p>3.2.8</p>
<h3>Minimal reproducible code</h3>
<ul>
<li>main.rs:</li>
</ul>
<pre><code class="language-rust">use clap::{App, Command, load_yaml};

#[tokio::main]
async fn main() -&gt; Result&lt;(), reqwest::Error&gt; {
    
    let yaml = load_yaml!(&quot;args.yaml&quot;);
    let matches = App::from(yaml).get_matches();
}
</code></pre>
<ul>
<li>args.yaml:</li>
</ul>
<pre><code class="language-yaml">name: &quot;tool&quot;
version: &quot;0.1&quot;
about: &quot;description&quot;
author: &quot;m00am&quot;

subcommands:
  - subcommand1:
      args:
        - path:
            index: 1
            required: true
            default_value: &quot;/tmp/&quot;
            help: &quot;Dummy Path&quot;
  - subcommand2:
      args:
         - other_path:
             index: 1
             required: true
             help: &quot;A second dummy path&quot;
</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<ul>
<li>Result of <code>cargo build</code>:</li>
</ul>
<pre><code>error[E0308]: mismatched types
 --&gt; src\main.rs:7:29
  |
7 |     let matches = App::from(yaml).get_matches();
  |                             ^^^^ expected struct `App`, found `&amp;yaml_rust::yaml::Yaml`
</code></pre>
<h3>Actual Behaviour</h3>
<p>Failing with the above error message.</p>
<h3>Expected Behaviour</h3>
<p>I have followed the documentation and am trying to get a very basic parsing of a <code>yaml structure</code> but for some reasons it does not work.</p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
<h3>Debug Output</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by @aress31 on 2022-07-08 22:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-07-11 22:00</div>
            <div class="timeline-body"><p>rustdoc might not be showing it on <code>From</code> impls but you need the <code>yaml</code> feature.</p>
<blockquote>
<p>I have followed the documentation and am trying to get a very basic parsing of a yaml structure but for some reasons it does not work.
.<br />
Which documentation?  We've stripped almost all of it out because of #3087.  See https://github.com/aobatact/clap-serde for a possible replacement.</p>
</blockquote>
<p>Considering this feature is deprecated and will soon be removed, I'm going to close this as we are not going to be improving the documentation around this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2022-07-11 22:00</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:48:39 UTC
    </footer>
</body>
</html>
