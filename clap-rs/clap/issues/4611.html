<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make `iter` and `into_iter` part of the public interface in `StyledStr` - clap-rs/clap #4611</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make <code>iter</code> and <code>into_iter</code> part of the public interface in <code>StyledStr</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/4611">#4611</a>
        opened by <a href="https://github.com/makspll">@makspll</a>
        on 2023-01-08 12:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/makspll">@makspll</a></div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.0.32</p>
<h3>Describe your use case</h3>
<p>I am using clap to power an in-game console, I'd rather not parse ansii characters back to colour information to format the text.</p>
<h3>Describe the solution you'd like</h3>
<p>Make the iteration functionality of StyledStr part of the public interface</p>
<h3>Alternatives, if applicable</h3>
<p><em>No response</em></p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @makspll on 2023-01-08 12:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../makspll/bevy-console/issues/37.html">makspll/bevy-console#37</a> on 2023-01-08 12:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-01-09 16:06</div>
            <div class="timeline-body"><p>The internals of <code>StyledStr</code> are not public because they are subject to change which will happen soon.  Our plan is to write ANSI codes directly into a <code>String</code> and strip them when needed, so you doing that on your side aligns with where we are going.</p>
<p>The original reason we are doing this is to allow users to provide formatted text without having to also maintaining a bespoke formatting API for #1433, #3108.  We also found that the current approach is very expensive in binary size terms which are we working to reduce (#1365).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/makspll">@makspll</a> on 2023-01-09 21:14</div>
            <div class="timeline-body"><p>Hmm so would formatting be done by writing ANSI into the <code>StyledStr</code> or <code>String</code> directly? Is it at least going to be possible to force ansii output, without using the cross-platform capabilities of termcolor ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-01-09 21:52</div>
            <div class="timeline-body"><p><code>StyledStr</code> will be a newtype around <code>String</code> with the same API as today (ability to get a <code>Display</code> with and without ansi codes).</p>
<p>Users can use their crate of choice (e.g. owo-colors) to write ansi codes to a <code>StyledStr</code>.  We will either</p>
<ul>
<li>(no tty) Strip those codes</li>
<li>(unix) Write the codes</li>
<li>(windows) Output the codes if supported, otherwise turn them into wincon calls</li>
</ul>
<p>As most of the work of <code>termcolor</code> will not be needed, my plan is to write a minimal crate to support the above policy.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/makspll">@makspll</a> on 2023-01-09 22:11</div>
            <div class="timeline-body"><p>I see, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @makspll on 2023-01-09 22:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:48:58 UTC
    </footer>
</body>
</html>
