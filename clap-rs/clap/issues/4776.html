<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Description Doesn't Work (Again?) - clap-rs/clap #4776</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Description Doesn't Work (Again?)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/4776">#4776</a>
        opened by <a href="https://github.com/JimLynchCodes">@JimLynchCodes</a>
        on 2023-03-22 04:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/JimLynchCodes">@JimLynchCodes</a> on 2023-03-22 04:42</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Rust Version</h3>
<p>rustc 1.68.0 (2c8cc3432 2023-03-06)</p>
<h3>Clap Version</h3>
<p>4.1.11</p>
<h3>Minimal reproducible code</h3>
<pre><code class="language-rust">use clap::Parser;

#[derive(Parser, Debug)]
struct Args {
    /// Some description for this
    #[arg(short, long)]
    b_option: bool, // this will be `-b`

    /// Some cool thing for this one too!
    #[arg(short)]
    foo: bool, 
}

pub fn main() -&gt; () {
    let args = Args::parse();

    println!(&quot;It just works all {:?}!&quot;, args);
}
</code></pre>
<pre><code class="language-toml">[package]
name = &quot;random_int_generator&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;
description = &quot;A short description of my package&quot;
 
[dependencies]
clap = { version = &quot;4.1.11&quot;, features = [&quot;derive&quot;] }
</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<p>cargo run -- --help</p>
<h3>Actual Behaviour</h3>
<pre><code>   Compiling random_int_generator v0.1.0 (/Users/jim/Git-Projects/rust-cli-examples/_009_random_int_generator)
    Finished dev [unoptimized + debuginfo] target(s) in 0.48s
     Running `target/debug/random_int_generator --help`
Usage: random_int_generator [OPTIONS]

Options:
  -b, --b-option  Some description for this
  -f              Some cool thing for this one too!
  -h, --help      Print help
</code></pre>
<p><em>Notice there is no description displayed.</em></p>
<h3>Expected Behaviour</h3>
<p>Should display the description at the top, &quot;A short description of my package&quot;</p>
<h3>Additional Context</h3>
<p>Another user mentioned this before: https://github.com/clap-rs/clap/issues/4496</p>
<p>Not sure if it was supposed to be fixed, but it never actually displays for me...</p>
<h3>Debug Output</h3>
<p>Compiling clap_derive v4.1.9
Compiling clap v4.1.11
Compiling random_int_generator v0.1.0 (/Users/jim/Git-Projects/rust-cli-examples/_009_random_int_generator)
Finished dev [unoptimized + debuginfo] target(s) in 5.63s
Running <code>target/debug/random_int_generator --help</code>
[      clap::builder::command] 	Command::_do_parse
[      clap::builder::command] 	Command::_build: name=&quot;random_int_generator&quot;
[      clap::builder::command] 	Command::_propagate:random_int_generator
[      clap::builder::command] 	Command::_check_help_and_version:random_int_generator expand_help_tree=false
[      clap::builder::command] 	Command::long_help_exists
[      clap::builder::command] 	Command::_check_help_and_version: Building default --help
[      clap::builder::command] 	Command::_propagate_global_args:random_int_generator
[clap::builder::debug_asserts] 	Command::_debug_asserts
[clap::builder::debug_asserts] 	Arg::_debug_asserts:b_option
[clap::builder::debug_asserts] 	Arg::_debug_asserts:foo
[clap::builder::debug_asserts] 	Arg::_debug_asserts:help
[clap::builder::debug_asserts] 	Command::_verify_positionals
[        clap::parser::parser] 	Parser::get_matches_with
[        clap::parser::parser] 	Parser::get_matches_with: Begin parsing 'RawOsStr(&quot;--help&quot;)' ([45, 45, 104, 101, 108, 112])
[        clap::parser::parser] 	Parser::possible_subcommand: arg=Ok(&quot;--help&quot;)
[        clap::parser::parser] 	Parser::get_matches_with: sc=None
[        clap::parser::parser] 	Parser::parse_long_arg
[        clap::parser::parser] 	Parser::parse_long_arg: Does it contain '='...
[        clap::parser::parser] 	Parser::parse_long_arg: Found valid arg or flag '--help'
[        clap::parser::parser] 	Parser::parse_long_arg(&quot;help&quot;): Presence validated
[        clap::parser::parser] 	Parser::react action=Help, identifier=Some(Long), source=CommandLine
[        clap::parser::parser] 	Help: use_long=true
[      clap::builder::command] 	Command::long_help_exists: false
[      clap::builder::command] 	Command::write_help_err: random_int_generator, use_long=false
[      clap::builder::command] 	Command::long_help_exists: false
[          clap::output::help] 	write_help
[ clap::output::help_template] 	HelpTemplate::new cmd=random_int_generator, use_long=false
[ clap::output::help_template] 	should_show_arg: use_long=false, arg=b_option
[ clap::output::help_template] 	HelpTemplate::write_templated_help
[ clap::output::help_template] 	HelpTemplate::write_before_help
[         clap::output::usage] 	Usage::create_usage_no_title
[         clap::output::usage] 	Usage::create_help_usage; incl_reqs=true
[         clap::output::usage] 	Usage::needs_options_tag
[         clap::output::usage] 	Usage::needs_options_tag:iter: f=b_option
[      clap::builder::command] 	Command::groups_for_arg: id=&quot;b_option&quot;
[         clap::output::usage] 	Usage::needs_options_tag:iter:iter: grp_s=&quot;Args&quot;
[         clap::output::usage] 	Usage::needs_options_tag:iter: [OPTIONS] required
[         clap::output::usage] 	Usage::get_args: incls=[]
[         clap::output::usage] 	Usage::get_args: unrolled_reqs=[]
[         clap::output::usage] 	Usage::get_args: ret_val=[]
[         clap::output::usage] 	Usage::create_help_usage: usage=random_int_generator [OPTIONS]
[ clap::output::help_template] 	HelpTemplate::write_all_args
[ clap::output::help_template] 	should_show_arg: use_long=false, arg=b_option
[ clap::output::help_template] 	should_show_arg: use_long=false, arg=foo
[ clap::output::help_template] 	should_show_arg: use_long=false, arg=help
[ clap::output::help_template] 	HelpTemplate::write_args Options
[ clap::output::help_template] 	should_show_arg: use_long=false, arg=b_option
[ clap::output::help_template] 	HelpTemplate::write_args: arg=&quot;b_option&quot; longest=10
[ clap::output::help_template] 	should_show_arg: use_long=false, arg=foo
[ clap::output::help_template] 	should_show_arg: use_long=false, arg=help
[ clap::output::help_template] 	HelpTemplate::write_args: arg=&quot;help&quot; longest=10
[ clap::output::help_template] 	should_show_arg: use_long=false, arg=b_option
[ clap::output::help_template] 	HelpTemplate::spec_vals: a=--b-option
[ clap::output::help_template] 	should_show_arg: use_long=false, arg=foo
[ clap::output::help_template] 	HelpTemplate::spec_vals: a=-f
[ clap::output::help_template] 	should_show_arg: use_long=false, arg=help
[ clap::output::help_template] 	HelpTemplate::spec_vals: a=--help
[ clap::output::help_template] 	HelpTemplate::spec_vals: a=--b-option
[ clap::output::help_template] 	HelpTemplate::short
[ clap::output::help_template] 	HelpTemplate::long
[ clap::output::help_template] 	HelpTemplate::align_to_about: arg=b_option, next_line_help=false, longest=10
[ clap::output::help_template] 	HelpTemplate::align_to_about: positional=false arg_len=10, spaces=2
[ clap::output::help_template] 	HelpTemplate::help
[ clap::output::help_template] 	HelpTemplate::help: help_width=18, spaces=25, avail=82
[ clap::output::help_template] 	HelpTemplate::spec_vals: a=-f
[ clap::output::help_template] 	HelpTemplate::short
[ clap::output::help_template] 	HelpTemplate::long
[ clap::output::help_template] 	HelpTemplate::align_to_about: arg=foo, next_line_help=false, longest=10
[ clap::output::help_template] 	HelpTemplate::align_to_about: positional=false arg_len=2, spaces=14
[ clap::output::help_template] 	HelpTemplate::help
[ clap::output::help_template] 	HelpTemplate::help: help_width=18, spaces=33, avail=82
[ clap::output::help_template] 	HelpTemplate::spec_vals: a=--help
[ clap::output::help_template] 	HelpTemplate::short
[ clap::output::help_template] 	HelpTemplate::long
[ clap::output::help_template] 	HelpTemplate::align_to_about: arg=help, next_line_help=false, longest=10
[ clap::output::help_template] 	HelpTemplate::align_to_about: positional=false arg_len=6, spaces=6
[ clap::output::help_template] 	HelpTemplate::help
[ clap::output::help_template] 	HelpTemplate::help: help_width=18, spaces=10, avail=82
[ clap::output::help_template] 	HelpTemplate::write_after_help
[      clap::builder::command] 	Command::color: Color setting...
[      clap::builder::command] 	Auto
[      clap::builder::command] 	Command::color: Color setting...
[      clap::builder::command] 	Auto
Usage: random_int_generator [OPTIONS]</p>
<p>Options:
-b, --b-option  Some description for this
-f              Some cool thing for this one too!
-h, --help      Print help</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by @JimLynchCodes on 2023-03-22 04:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-03-22 12:54</div>
            <div class="timeline-body"><blockquote>
<p>Another user mentioned this before: https://github.com/clap-rs/clap/issues/4496</p>
</blockquote>
<p>As noted in that issue, it was because the user set a <code>Cargo.toml</code> field that doesn't exist.  Changing <code>about</code> to <code>description</code> fixed it.</p>
<p>The difference between their code and the code in this issue is they opted-in to reading from <code>Cargo.toml</code> with <code>#[command(about)]</code>.  See the <a href="https://docs.rs/clap/latest/clap/_derive/index.html#command-attributes">derive reference entry for <code>about</code></a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2023-03-22 12:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:35:22 UTC
    </footer>
</body>
</html>
