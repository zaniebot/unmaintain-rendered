<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow obtaining &quot;about&quot; text as a &amp;str - clap-rs/clap #4962</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow obtaining &quot;about&quot; text as a &amp;str</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/4962">#4962</a>
        opened by <a href="https://github.com/lufte">@lufte</a>
        on 2023-06-10 14:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/lufte">@lufte</a></div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4</p>
<h3>Describe your use case</h3>
<p>My GUI application has an internal shell with multiple clap::Commands. In some parts of the app I want to show a list of all commands and their descriptions, but the <code>get_about</code> method returns a <code>&amp;StyledStr</code> that won't fit everywhere a <code>&amp;str</code> does.</p>
<h3>Describe the solution you'd like</h3>
<p>I would like a reference to the internal <code>String</code> so I can pass it to my GUI library directly instead of having to allocate a new <code>String</code> every time with <code>StyledStr.to_string()</code> or having to keep a separate copy.</p>
<h3>Alternatives, if applicable</h3>
<p><em>No response</em></p>
<h3>Additional Context</h3>
<p>Previous discussion in https://github.com/clap-rs/clap/discussions/4961</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @lufte on 2023-06-10 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-06-12 16:47</div>
            <div class="timeline-body"><blockquote>
<p>My GUI application has an internal shell with multiple clap::Commands. In some parts of the app I want to show a list of all commands and their descriptions, but the get_about method returns a &amp;StyledStr that won't fit everywhere a &amp;str does.</p>
</blockquote>
<p>In seeing more of your use case, I'm actually thinking a <code>as_styled_str</code> would not fill your needs.</p>
<p><code>as_styled_str</code> may included styled text which you wouldn't want to render without converting to HTML or stripping.</p>
<p>Is there a reason you can't just do <code>cmd.get_about().to_string()</code> and then do the relevant pass a reference to that string around?  Granted, it could run into ownership issues depending on your architecture.</p>
<p>Yes, of course, in all of this you can make the assumption within your application that the text has no ANSI formatting (for now, for derive users we might do more formatting on their behalf) but I would like to focus on solving the general use case problem before narrowing down on suggesting a hack for your specific application.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lufte">@lufte</a> on 2023-06-12 17:40</div>
            <div class="timeline-body"><blockquote>
<p>Is there a reason you can't just do cmd.get_about().to_string() and then do the relevant pass a reference to that string around? Granted, it could run into ownership issues depending on your architecture.</p>
</blockquote>
<p>There's no reason, that's actually what I'm doing now. It just occurred to me that it's a waste that I need to keep two copies of the same string for each command: one is separate from the command and the other is inside of it, but inaccessible. I'm assuming the Command's internal String is not mutated to apply format to it, in which case it wouldn't be possible to obtain a reference to the original one and this use case wouldn't make sense anymore.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-06-23 18:07</div>
            <div class="timeline-body"><p>In that case, I think I lean towards closing this.  Sorry for the extra hoop of an Issue though I think it did help us to pull out the extra information on this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2023-06-23 18:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lufte">@lufte</a> on 2023-06-23 21:54</div>
            <div class="timeline-body"><p>No worries, it definitely helped. And it was a super minor thing either way. Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:49:07 UTC
    </footer>
</body>
</html>
