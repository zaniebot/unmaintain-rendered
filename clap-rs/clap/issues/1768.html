<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Easily configurable license information - clap-rs/clap #1768</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Easily configurable license information</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/clap-rs/clap/issues/1768">#1768</a>
        opened by <a href="https://github.com/Dantali0n">@Dantali0n</a>
        on 2020-03-27 15:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Dantali0n">@Dantali0n</a> on 2020-03-27 15:01</div>
            <div class="timeline-body"><h3>Describe your use case</h3>
<p>Some types of software licenses, in particular GPL and friends, require licensing information to be displayed by the program upon request. Naturally this can already be configured with clap by creating a flag similar to -h/--help, however, I think this can be improved</p>
<h3>Describe the solution you'd like</h3>
<p>A more seamlessly integrated solution similar to <code>.author()</code> would improve this. The <code>license()</code> function could take sufficient arguments to automatically generate the licensing excerpt. for instance: <code>.license(gplv3, 'MyNiceCompany.inc')</code>.</p>
<p>Calling the program with <em>--license</em> could generate the following:</p>
<pre><code>Copyright (C) 2020 MyNiceCompany.inc
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by @Dantali0n on 2020-03-27 15:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-03-27 15:06</div>
            <div class="timeline-body"><p>Sounds good to me. @pksunkara @Dylan-DPC @TeXitoi what do you think?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-03-27 17:08</div>
            <div class="timeline-body"><p>This is more similar to <code>version</code> flag and setting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dylan-DPC-zz">@Dylan-DPC-zz</a> on 2020-04-01 22:10</div>
            <div class="timeline-body"><p>@Dantali0n thanks for the request. In this case it is better we make it a separate crate and see how it goes and then later merge it into clap if needed. Would you like to volunteer to write it? (we can mentor). Else will try myself or get someone to write it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dantali0n">@Dantali0n</a> on 2020-04-02 17:48</div>
            <div class="timeline-body"><blockquote>
<p>@Dantali0n thanks for the request. In this case it is better we make it a separate crate and see how it goes and then later merge it into clap if needed. Would you like to volunteer to write it? (we can mentor). Else will try myself or get someone to write it</p>
</blockquote>
<p>Hi, In terms of experience I don't think I am there yet as I am written my very first rust program atm. Currently I am still struggling with a lot of construct in rust, in addition, I tend not to have a lot of free time. Therefor, I think it is better if someone else tries to implement this, assuming someone has time and feels motivated to do so ofcourse.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.1" by @pksunkara on 2020-04-09 08:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: other</span> added by @CreepySkeleton on 2020-06-30 10:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by @CreepySkeleton on 2020-06-30 10:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">Z: good first issue</span> added by @CreepySkeleton on 2020-06-30 10:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">Z: mentored</span> added by @CreepySkeleton on 2020-06-30 10:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2144.html">clap-rs/clap#2144</a> on 2020-09-25 09:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3001.html">clap-rs/clap#3001</a> on 2021-11-08 13:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheAlgorythm">@TheAlgorythm</a> on 2021-11-08 17:44</div>
            <div class="timeline-body"><p>I did a bit of research on the UX of displaying the license. There are mainly 2 options:</p>
<h2>A separate <code>version</code> subcommand</h2>
<blockquote>
<ul>
<li>Most modern CLIs support a --version flag and a version command, where --version is a short, one-line machine-readable output and version is more detailed (and optionally machine readable).</li>
<li>The version command can include more detailed information, such as the backing API version or server version, git commit, build date/host, dependency versions, links to legal information, release notes, etc. It’s sort of like an “About” page on installed software.</li>
</ul>
</blockquote>
<p><a href="http://codyaray.com/2020/07/cli-design-best-practices">Opinion of Cody Ray</a></p>
<blockquote>
<pre><code class="language-sh">$ mycli version # multi only
$ mycli --version
$ mycli -V
</code></pre>
<p>Unless it’s a single-command CLI that also has a <code>-v</code>,<code>--verbose</code> flag, <code>$ mycli -v</code> should also just display the CLI version. It’s frustrating to run 3 different commands to get the version for a CLI until you find the right one.</p>
</blockquote>
<p>The version command is a main place you’ll ask users for debugging information so it’s a good place to add any helpful extra information aside from just the version number that might help you diagnose issues.</p>
<p><a href="https://medium.com/@jdxcode/12-factor-cli-apps-dd3c227a0e46">Jeff Dickey</a></p>
<p>This is an elegant solution but has the downsides of possibly breaking compatibility and Imho the <code>version</code> subcommand isn't well known.</p>
<h2>Additional information in <code>version</code>-flag</h2>
<blockquote>
<p>The standard --version option should direct the program to print information about its name, version, origin and legal status, all on standard output, and then exit successfully. [...]
The first line is meant to be easy for a program to parse; the version number proper starts after the last space. [...]
The following line, after the version number line or lines, should be a copyright notice. If more than one copyright notice is called for, put each on a separate line.
Next should follow a line stating the license, preferably using one of abbreviations below, and a brief statement that the program is free software, and that users are free to copy and change it. Also mention that there is no warranty, to the extent permitted by law. See recommended wording below.
It is ok to finish the output with a list of the major authors of the program, as a way of giving credit.
Here’s an example of output that follows these rules:</p>
<pre><code>GNU hello 2.3
Copyright (C) 2007 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.
</code></pre>
<p>You should adapt this to your program, of course, filling in the proper year, copyright holder, name of program, and the references to distribution terms, and changing the rest of the wording as necessary.
This copyright notice only needs to mention the most recent year in which changes were made—there’s no need to list the years for previous versions’ changes. You don’t have to mention the name of the program in these notices, if that is inconvenient, since it appeared in the first line. (The rules are different for copyright notices in source files; see Copyright Notices in Information for GNU Maintainers.)
Translations of the above lines must preserve the validity of the copyright notices (see Internationalization). If the translation’s character set supports it, the ‘(C)’ should be replaced with the copyright symbol, as follows: <code>©</code>
Write the word “Copyright” exactly like that, in English. Do not translate it into another language. International treaties recognize the English word “Copyright”; translations into other languages do not have legal significance.</p>
</blockquote>
<p><a href="https://www.gnu.org/prep/standards/html_node/_002d_002dversion.html#g_t_002d_002dversion">The GNU Standard</a> which could be a bit too GNU specific and hard to implement in an generic way.
But I think that should be the ultimate goal.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-11-08 17:52</div>
            <div class="timeline-body"><p>Do clap users need to list all of the legally relevant licenses and notices or just the license and attribution for their own program, leaving the rest to another file like with <a href="https://github.com/EmbarkStudios/cargo-about">cargo-about</a>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheAlgorythm">@TheAlgorythm</a> on 2021-11-08 19:13</div>
            <div class="timeline-body"><p>Idk, I'm not a lawyer.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3016.html">clap-rs/clap#3016</a> on 2021-11-12 16:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/147.html">epage/clapng#147</a> on 2021-12-06 19:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: other</span> removed by @epage on 2021-12-08 20:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-help</span> added by @epage on 2021-12-08 20:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> removed by @epage on 2021-12-08 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @epage on 2021-12-08 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.1" by @epage on 2021-12-09 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> removed by @epage on 2021-12-09 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-medium</span> removed by @epage on 2021-12-09 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-easy</span> removed by @epage on 2021-12-09 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by @epage on 2021-12-09 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dcampbell24">@dcampbell24</a> on 2025-06-22 18:11</div>
            <div class="timeline-body"><p>A license should also most definitely be displayed in the man page. I was thinking you should be able to display the contents of a file. Maybe you should be able to auto-generate a license excerpt from cargo's <code>license</code> attribute, but that seems more challenging.</p>
<p>For a file based approach I was thinking add the function <code>license_files_or([&quot;LICENSE-APACHE&quot;, &quot;LICENSE-MIT&quot;])</code> to Command (maybe also allow using the cargo attribute <code>license-file</code>, but as is I use <code>license</code>, then also have <code>MIT-LICENSE</code>, not linked to, so <code>crates.io</code> works as expected, but also github works and I can link to the whole license).</p>
<p>Then (only bothering with the man page bit) add a <code>LICENSE</code> (or <code>LICENSES</code>) section to the man page and if, as is this example, two or more licenses are listed, put an <code>OR</code> between each license that is listed.</p>
<p>This is one of the features I would really like to see, because at the moment I am stuck duplicating my documentation and using <code>pandoc</code> instead of <code>clap_mangen</code>. Note, I am leaving the <code>copyright</code> as a separate issue. It would make it more challenging to combine the two.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-06-23 13:31</div>
            <div class="timeline-body"><p>Regarding <code>clap_mangen</code>, you can always mix your own content with what is generated and in fact I don't expect us to ever be able to fully generate man pages on our own.</p>
<p>We need to figure out the fundamentals about how licensing information should be included before we figure out how and where it should be rendered.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../rust-lang/cargo/issues/15697.html">rust-lang/cargo#15697</a> on 2025-06-23 13:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6041.html">clap-rs/clap#6041</a> on 2025-06-23 18:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:32 UTC
    </footer>
</body>
</html>
