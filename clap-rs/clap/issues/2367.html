<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow accessing the env name and default value when iterating over the arguments - clap-rs/clap #2367</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow accessing the env name and default value when iterating over the arguments</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/2367">#2367</a>
        opened by <a href="https://github.com/shepmaster">@shepmaster</a>
        on 2021-02-26 18:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/shepmaster">@shepmaster</a></div>
            <div class="timeline-body"><p><strong>Please complete the following tasks</strong></p>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the existing issues</li>
</ul>
<p><strong>Describe your use case</strong></p>
<p>I want to offer the ability to quickly generate a placeholder <code>.env</code> file for developers working on my projects. This information is contained with the <code>App</code> struct via the name / help text / environment variable name. However, I cannot access the environment variable or default value.</p>
<p><a href="https://docs.rs/dotenv/0.15.0/dotenv/">dotenv</a> is a crate that allows specifying an <code>.env</code> file containing environment variables in a file. This allows developers to have a semi-persistent way to store and document environment variables needed to run an application.</p>
<p>Clap allows specifying environment variables as fallback sources for command line options. This includes the environment variable names, documentation about them, default values, possible values, etc.</p>
<p><strong>Describe the solution you&#x27;d like</strong></p>
<p>I want to reuse the definitions we&#x27;ve already given to Clap to generate a skeleton <code>.env</code> file:</p>
<pre><code>use clap::{IntoApp, Clap};

#[derive(Clap)]
struct Config {
    #[clap(long, default_value = &quot;world&quot;, env = &quot;NAME&quot;)]
    /// The name to use
    name: String,
}

fn main() {
    let app: clap::App = Config::into_app();

    for arg in app.get_arguments() {
        println!(&quot;# {}&quot;, arg.get_about().unwrap_or(&quot;&quot;));
        println!(&quot;# {}&quot;, arg.get_possible_values().unwrap_or(&amp;[]).join(&quot;, &quot;));
        println!(&quot;# {} = {}&quot;, arg.get_env(), arg.get_default_value());
        // Does not exist     ^^^^^^^^^^^^^  ^^^^^^^^^^^^^^^^^^^^^^^
    }
}
</code></pre>
<p>This will generate the output</p>
<pre><code># The name to use
# 
# NAME = world
</code></pre>
<p>A developer starting on the project can direct that output to a <code>.env</code> file and edit it as needed.</p>
<p><strong>Alternatives, if applicable</strong></p>
<p><em>No response</em></p>
<p><strong>Additional Context</strong></p>
<p>Ideally in a stable release of Clap, but in a beta release would be cool too!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by <a href="https://github.com/shepmaster">@shepmaster</a> on 2021-02-26 18:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-02-26 18:56</div>
            <div class="timeline-body"><p>Need more description and examples. Not really sure what you are asking here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/shepmaster">@shepmaster</a> on 2021-02-26 19:06</div>
            <div class="timeline-body"><p>Updated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;3.1&quot; by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-02-26 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">:money_with_wings: $5</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-02-26 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: args</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-02-26 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-02-26 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-02-26 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">Z: good first issue</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-02-26 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#2368</a> on 2021-02-26 21:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-03-05 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#4729</a> on 2023-02-24 13:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:58:02 UTC
    </footer>
</body>
</html>
