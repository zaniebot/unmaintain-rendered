<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add App::name set function to use crate_name!() macro - clap-rs/clap #908</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add App::name set function to use crate_name!() macro</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/908">#908</a>
        opened by <a href="https://github.com/SuperFluffy">@SuperFluffy</a>
        on 2017-03-20 16:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/SuperFluffy">@SuperFluffy</a> on 2017-03-20 16:02</div>
            <div class="timeline-body"><p>Currently, you can further specify the <code>about</code>, <code>authors</code>, and <code>version</code> field of an <code>App</code> through setter methods of the same, and pull in the appropriate value through <code>crate_about!()</code> and similar macros. Only <code>crate_name!()</code> is special, in that we can only use it when constructing a new <code>App</code> through <code>App::new</code>.</p>
<p>If we construct an app through <code>App::from_yaml</code>, we have no way of setting the name to the one in Cargo.toml through the macro. It would be great to be able to set the name after <code>App</code> was constructed.</p>
<p>Is it possible to add this or is there a reason why this was omitted?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-21 01:50</div>
            <div class="timeline-body"><p>It's not omiited on purpose,probably just overlooked. Until I get a chance to add this (I recently broke my finger so am typing with one hand and it's not feasible to get real work done ðŸ˜ž) there is a workaround (that is <em>technically</em> public, but its not meant to be public and is undocumented. As such it may change in the future without warning):</p>
<pre><code class="language-rust">let mut app = // load YAML like normal
app.p.meta.name = &quot;Some Name&quot;.into();
let m = app.get_matches();
</code></pre>
<p>If someone would like to submit a PR with this, it'd be an easy one just adding the fn to <code>src/app/mod.rs</code>!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: app</span> added by @kbknapp on 2017-03-21 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @kbknapp on 2017-03-21 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M: mentored</span> added by @kbknapp on 2017-03-21 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> added by @kbknapp on 2017-03-21 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @kbknapp on 2017-03-21 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @kbknapp on 2017-03-21 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SuperFluffy">@SuperFluffy</a> on 2017-03-21 10:08</div>
            <div class="timeline-body"><p>Sorry about your hand. :( To make it heal faster I submitted #910.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @homu on 2017-03-22 00:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/larsrh">@larsrh</a> on 2018-02-13 20:32</div>
            <div class="timeline-body"><p>What I find a bit strange here is that I need to use a dummy name in the YAML file, because otherwise clap does some strange stuff:</p>
<pre><code class="language-rust">        let mut a = if let Some(name) = yaml[&quot;name&quot;].as_str() {
            App::new(name)
        } else {
            let yaml_hash = yaml.as_hash().unwrap();
            let sc_key = yaml_hash.keys().nth(0).unwrap();
            is_sc = Some(yaml_hash.get(sc_key).unwrap());
            App::new(sc_key.as_str().unwrap())
        };
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:29 UTC
    </footer>
</body>
</html>
