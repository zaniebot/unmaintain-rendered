<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Single backslash character not recognized on Windows - clap-rs/clap #3369</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Single backslash character not recognized on Windows</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/3369">#3369</a>
        opened by <a href="https://github.com/jgranduel">@jgranduel</a>
        on 2022-01-29 14:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jgranduel">@jgranduel</a> on 2022-01-29 14:43</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the existing issues</li>
</ul>
<h3>Rust Version</h3>
<p>1.58</p>
<h3>Clap Version</h3>
<p>clap v3.0.13</p>
<h3>Minimal reproducible code</h3>
<p>Hi,</p>
<p>I was trying <a href="https://github.com/domoritz/csv2parquet">csv2parquet</a> on Windows. csv2parquet parses CSV files and I happened to have TSV file. I couldn't get it working although it has a <code>--delimiter</code> option. The author told me to simply use <code>\t</code> for indicating tab separator, but it doesn't work on Windows (Windows 10/PowerShell 7.2, but not relevant AFAIK). We think it's a <code>clap</code> issue.
Here the link to the <a href="https://github.com/domoritz/csv2parquet/issues/58">csv2parquet #58 </a> issue I posted.</p>
<p>In Rust code, the deliimiter is a simple char:</p>
<pre><code>delimiter: char, 
</code></pre>
<p>How to use <code>\t</code> (or other escaped characters) on Windows or any ASCII/UNICODE field, line separtors?</p>
<h3>Steps to reproduce the bug with the above code</h3>
<p>csv2parquet.exe -d \t a.csv a.parquet</p>
<h3>Actual Behaviour</h3>
<pre><code>csv2parquet.exe -d \t a.csv a.parquet
error: Invalid value for '--delimiter &lt;DELIMITER&gt;': too many characters in string
</code></pre>
<h3>Expected Behaviour</h3>
<p><code>\t</code> recognized as &quot;,&quot; on Windows, or any ASCII/UNICODE separator like U001C file separator, U+001D group separator, U+001E record separator, U+001F unit separator, U+2028   line separator, U+2029   paragraph separator.</p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
<h3>Debug Output</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by @jgranduel on 2022-01-29 14:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../domoritz/csv2parquet/issues/58.html">domoritz/csv2parquet#58</a> on 2022-01-29 14:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-01-29 19:53</div>
            <div class="timeline-body"><p>Can you include the debug output requested in the template?  That will show how clap is parsing things.</p>
<p>As for how its being handled, thats all in the CLI parser which, for windows, is baked into Rust.  A combination of things to try</p>
<ul>
<li>Quoting</li>
<li>Using the <code>-d=</code> syntax</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jgranduel">@jgranduel</a> on 2022-01-30 11:18</div>
            <div class="timeline-body"><p>Mentionned in <a href="https://github.com/domoritz/csv2parquet/issues/58">csv2parquet #58</a>
Thanks for your answer.  It might have been a Windows issue tab character is <strong>`t</strong> in PowerShell and I didn't use it properly.
So these 3 commands worked out:</p>
<pre><code>&gt;csv2parquet.exe -d &quot;`t&quot; a.tsv a.parquet     # OK
&gt;csv2parquet.exe &quot;-d=`t&quot; a.tsv aa.parquet  # OK 
 
&gt;csv2parquet.exe -d `t a.tsv aaa.parquet  # OK, unquoted, space is needed!
</code></pre>
<p>This unquoted syntax</p>
<pre><code>csv2parquet.exe -d=`t a.tsv a.parquet  # KO
</code></pre>
<p>failed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jgranduel">@jgranduel</a> on 2022-01-31 08:15</div>
            <div class="timeline-body"><p>As it seems to be a Windows feature, I'm closing this issue. Thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jgranduel on 2022-01-31 08:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:34:54 UTC
    </footer>
</body>
</html>
