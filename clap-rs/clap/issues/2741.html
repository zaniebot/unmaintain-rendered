<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>error[E0658]: arbitrary expressions in key-value attributes are unstable - clap-rs/clap #2741</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>error[E0658]: arbitrary expressions in key-value attributes are unstable</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/2741">#2741</a>
        opened by <a href="https://github.com/happysalada">@happysalada</a>
        on 2021-08-28 12:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/happysalada">@happysalada</a></div>
            <div class="timeline-body">Please complete the following tasks
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the existing issues</li>
</ul>
Rust Version
<p>1.54</p>
Clap Version
<p>3.0.0-beta-4</p>
Minimal reproducible code
<p>There is a compilation error on darwin and linux
the pueue crate which has a dependency on clap, will fail compiling from source with the following error</p>
<p>pueue&gt; error[E0658]: arbitrary expressions in key-value attributes are unstable
pueue&gt;  --&gt; /private/tmp/nix-build-pueue-1.0.1.drv-0/pueue-1.0.1-vendor.tar.gz/clap/src/lib.rs:8:10
pueue&gt;   |
pueue&gt; 8 | #![doc = include_str!(&quot;../README.md&quot;)]
pueue&gt;   |          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pueue&gt;   |
pueue&gt;   = note: see issue #78835 <a href="https://github.com/rust-lang/rust/issues/78835">rust-lang/rust#78835</a> for more information
pueue&gt; error: aborting due to previous error
pueue&gt; For more information about this error, try <code>rustc --explain E0658</code>.
pueue&gt; error: could not compile <code>clap</code>
pueue&gt; To learn more, run the command again with --verbose.
pueue&gt; warning: build failed, waiting for other jobs to finish...
pueue&gt; error: build failed</p>
Steps to reproduce the bug with the above code
<p>Here is the link to the crate https://github.com/Nukesor/pueue
running cargo build from the src will trigger the error</p>
Actual Behaviour
<p>compilation error</p>
Expected Behaviour
<p>no compilation error</p>
Additional Context
<p>This is for packaging for the NixOS distribution.</p>
Debug Output
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by <a href="https://github.com/happysalada">@happysalada</a> on 2021-08-28 12:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>Nukesor/pueue#235</a> on 2021-08-28 12:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-08-28 15:40</div>
            <div class="timeline-body"><p>Thats strange.   In beta4, we bumped MSRV to 1.54 which <a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-1540-2021-07-29">stablized this feature</a> but your report mentions using 1.54.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/happysalada">@happysalada</a> on 2021-08-29 00:37</div>
            <div class="timeline-body"><p>My bad, I was actually on version 1.53, sorry for the bother!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/happysalada">@happysalada</a> on 2021-08-29 00:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>fornwall/rust-script#41</a> on 2021-11-27 08:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>gatecat/prjoxide#32</a> on 2022-09-24 21:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:58:17 UTC
    </footer>
</body>
</html>
