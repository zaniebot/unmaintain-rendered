<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ability to require_equals with optional value for long option, but require value for short option. - clap-rs/clap #4702</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ability to require_equals with optional value for long option, but require value for short option.</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/clap-rs/clap/issues/4702">#4702</a>
        opened by <a href="https://github.com/tmccombs">@tmccombs</a>
        on 2023-02-11 06:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/tmccombs">@tmccombs</a> on 2023-02-11 06:34</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.0</p>
<h3>Describe your use case</h3>
<p><code>mktemp</code> has the following option:</p>
<pre><code>-p DIR, --tmpdir[=DIR]
</code></pre>
<p>If using the short option, <code>DIR</code> is required. But if using the long option, <code>DIR</code> is optional, and requires the &quot;=&quot;.</p>
<h3>Describe the solution you'd like</h3>
<p>I'm not really sure. Perhaps the cleanest solution would be to be either some way to use the same id, and help text for multiple Args, or to have some way to provide separate options for the short and long variants.</p>
<h3>Alternatives, if applicable</h3>
<p>It's possible to work around this by having separate <code>Arg</code>s for the short and long options. But this can be a little awkward to work with when consuming the arguments, and there isn't a way to combine the help text for the two options.</p>
<h3>Additional Context</h3>
<p>See https://github.com/uutils/coreutils/issues/3454</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @tmccombs on 2023-02-11 06:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../uutils/coreutils/pulls/4342.html">uutils/coreutils#4342</a> on 2023-02-11 06:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-02-13 16:03</div>
            <div class="timeline-body"><p>I feel like this came up elsewhere but I'm not finding it.    Maybe its buried in #3030.</p>
<p>There is a sibling request of #4499.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-parsing</span> added by @epage on 2023-02-13 16:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by @epage on 2023-02-13 16:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-02-13 16:04</div>
            <div class="timeline-body"><p>My main concern is ensuring we give the user the ability to create the policy they need without bloating compile times, binary size, or the API.</p>
<p>Probably the first step in this is designing out the API.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3008.html">clap-rs/clap#3008</a> on 2023-05-03 14:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:35:20 UTC
    </footer>
</body>
</html>
