<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Please support a feature to omit all help and messages - clap-rs/clap #1384</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Please support a feature to omit all help and messages</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1384">#1384</a>
        opened by <a href="https://github.com/joshtriplett">@joshtriplett</a>
        on 2018-11-18 10:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/joshtriplett">@joshtriplett</a></div>
            <div class="timeline-body"><p>For the purposes of reducing binary size, I&#x27;d love to have a new default feature flag for <code>clap</code> (that projects could then disable) that would omit generated <code>--help</code> and all friendly error/constraint messages, and minimize error reporting to just &quot;Invalid arguments&quot; or similar. That would help for embedded use cases that may want to reduce the sizes of binaries used in scripting, without regard to human invocations of those binaries.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 15:28</div>
            <div class="timeline-body"><p>Related to #1485</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help message</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: other</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 15:37</div>
            <div class="timeline-body"><p>Closing in favor of #1365</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 15:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dylan-DPC-zz">@Dylan-DPC-zz</a> on 2020-02-01 15:41</div>
            <div class="timeline-body"><p>This may be a side effect of that but not directly related. Reopening</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by <a href="https://github.com/Dylan-DPC-zz">@Dylan-DPC-zz</a> on 2020-02-01 15:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: other</span> removed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-02-01 19:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: errors</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-02-01 19:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-02-01 19:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;3.1&quot; by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-02-01 19:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> removed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-10-10 19:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P1: urgent</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-10-10 19:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone &quot;3.1&quot; by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-10-13 07:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;3.0&quot; by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-10-13 07:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Rua">@Rua</a> on 2021-01-21 14:34</div>
            <div class="timeline-body"><p>I would like this as well, but supported as a runtime option instead of a feature flag, so that it can be enabled or disabled on a case-by-case basis.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ldm0">@ldm0</a> on 2021-01-28 17:25</div>
            <div class="timeline-body"><blockquote>
<p>I would like this as well, but supported as a runtime option instead of a feature flag, so that it can be enabled or disabled on a case-by-case basis.</p>
</blockquote>
<p>@Rua This issue is mainly about reducing binary size. If you just wanna control the help message emission in the runtime, the right-now approach is using <a href="https://docs.rs/clap/3.0.0-beta.2/clap/struct.App.html#method.try_get_matches">try_get_matches</a> to get a result and control the output by yourself.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/ldm0">@ldm0</a> by <a href="https://github.com/ldm0">@ldm0</a> on 2021-03-13 08:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone &quot;3.0&quot; by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-06-16 01:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned <a href="https://github.com/ldm0">@ldm0</a> by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-06-16 01:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-06-16 01:27</div>
            <div class="timeline-body"><p>Postponing this for later than 3.0 because we need design on how to divided the existing <code>help</code>, error messages, usage etc.. into separate feature flags.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>epage/clapng#109</a> on 2021-12-06 17:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: errors</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-08 20:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-08 21:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-08 21:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#2914</a> on 2021-12-09 19:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-09 19:26</div>
            <div class="timeline-body"><p>https://github.com/clap-rs/clap/issues/2914 would unblock code-generating a display-agnostic(wrapping, styling) help message</p>
<p>So breaking this down, parts we can trim down</p>
<ul>
<li>Simpler error messages</li>
<li>Static help (<code>App::override_help</code>)</li>
<li>Code-genned formatted help with re-rendering the help (built on #2914)</li>
<li>Non-smart usage</li>
<li>Static usage (<code>App::override_usage</code>)</li>
</ul>
<p>The main question I have is how should we divide this up among feature flags without overwhelming people (with too many flags).  For example, a user could want to provide codegenned formatted help but still get all of the other nice features.  Next would be the bike shedding over the names.</p>
<p>To get the conversation started, I&#x27;ll start with</p>
<ul>
<li><code>helpgen</code><ul>
<li>Without <code>App::override_help</code>, no <code>--help</code> flag is generated</li>
</ul>
</li>
<li><code>detailed-errors</code><ul>
<li>includes smart usage, people have to disable <code>helpgen</code> to get rid of smart usage</li>
</ul>
</li>
</ul>
<p>With that said, how we divide things up I think depends partly on the cost of each feature.  For example, if smart usage is more expensive, then maybe that should be broken out into its own feature flag.  Or if detailed errors isn&#x27;t too expensive, maybe we don&#x27;t provide it.  So I am assuming whatever decision we come up is a guideline and the implementer would need to measure the results and adapt accordingly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P1: urgent</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-09 19:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-09 19:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#4111</a> on 2022-08-24 17:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#4236</a> on 2022-09-19 18:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/epage">@epage</a> on 2022-09-19 19:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:57:18 UTC
    </footer>
</body>
</html>
