<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`long_about` used instead of `about` for &quot;-h&quot; - clap-rs/clap #1472</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>long_about</code> used instead of <code>about</code> for &quot;-h&quot;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1472">#1472</a>
        opened by <a href="https://github.com/romanows">@romanows</a>
        on 2019-05-14 23:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/romanows">@romanows</a> on 2019-05-14 23:01</div>
            <div class="timeline-body"><h3>Rust Version</h3>
<p>1.33.0 and playground 1.34.1</p>
<h3>Affected Version of clap</h3>
<p>2.32.0 and 2.33.0</p>
<h3>Bug or Feature Request Summary</h3>
<p>Show <code>about</code> text for <code>-h</code> and <code>long_about</code> text for <code>--help</code>.</p>
<h3>Expected Behavior Summary</h3>
<p>The following should print out different text for <code>app.print_help()</code> and <code>app.print_long_help()</code> corresponding to my actual use case of calling my app with &quot;-h&quot; versus &quot;--help&quot;.  I expect to see &quot;foo&quot; in the first case corresponding to &quot;-h&quot; and &quot;bar&quot; in the second case corresponding to &quot;--help&quot;.</p>
<pre><code>extern crate clap; // 2.33.0;
use clap::App;

fn main() {
    let mut app = App::new(&quot;app&quot;)
        .about(&quot;foo&quot;)
        .long_about(&quot;bar&quot;);

    println!(&quot;&quot;);
    println!(&quot;== -h ==&quot;);
    app.print_help();  // Should show &quot;foo&quot; not &quot;bar&quot;?
    
    println!(&quot;&quot;);
    println!(&quot;&quot;);
    println!(&quot;== --help ==&quot;);
    app.print_long_help();  // Should show &quot;foo&quot; and &quot;bar&quot; or maybe just &quot;bar&quot;?
}</code></pre>
<h3>Actual Behavior Summary</h3>
<p>The same text is printed when the app is called with &quot;-h&quot; and &quot;--help&quot; and it is the <code>long_about</code> text in both cases.  (Not including the slightly different formatting for the for the flags section.)  I see &quot;bar&quot; and &quot;bar&quot; in both &quot;-h&quot; and &quot;--help&quot; cases.</p>
<h3>Sample Code or Link to Sample Code</h3>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=14b8a0566fff939fd0e42a46b9f6b3fa">Playground</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/romanows">@romanows</a> on 2019-05-17 18:50</div>
            <div class="timeline-body"><p>If you could confirm what exactly is supposed to happen with both <code>about</code> and <code>long_about</code> are defined, I could try my hand at debugging and patching this.  The documentation isn't explicit and maybe I'm off-base here, but I would think that one of these two cases is what one would want to have happen:</p>
<ul>
<li>&quot;-h&quot; gets you the <code>.about</code> text and &quot;--help&quot; gets you just the <code>.long_about</code> text</li>
<li>&quot;-h&quot; gets you the <code>.about</code> text and &quot;--help&quot; gets you the <code>.about</code> text, a newline, then the <code>.long_about</code> text</li>
</ul>
<p>I'd be happy with the second case because my <code>long_about</code> text just gives additional info to what I plan to write in the <code>about</code> text.  However, I think that the first case is ultimately more flexible, because I could see some applications wishing to restate the content in their short <code>about</code> text if they know the user is explicitly requesting more verbose help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../TeXitoi/structopt/issues/173.html">TeXitoi/structopt#173</a> on 2019-06-27 18:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheLostLambda">@TheLostLambda</a> on 2019-12-25 16:10</div>
            <div class="timeline-body"><p>Hi, I've just run into the same issue via structopt. I actually think that the first option would be better (just printing the long_about) because, as I understand it, structopt includes the short about text within the long_about text. Producing code like this:</p>
<pre><code>clap::App::new(&quot;&lt;name&gt;&quot;)
    .about(&quot;Hi there, I'm Robo!&quot;)
    .long_about(&quot;Hi there, I'm Robo!\n\n\
                 I like beeping, stumbling, eating your electricity,\
                 and making records of you singing in a shower.\
                 Pay up or I'll upload it to youtube!&quot;)
// args...
</code></pre>
<p>from Doc comments like this:</p>
<pre><code>/// Hi there, I'm Robo!
///
/// I like beeping, stumbling, eating your electricity,
/// and making records of you singing in a shower.
/// Pay up, or I'll upload it to youtube!
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2019-12-25 16:24</div>
            <div class="timeline-body"><blockquote>
<p>I actually think that the first option would be better (just printing the long_about)</p>
</blockquote>
<p>The distinction between <code>-h</code> and <code>--help</code> is pretty clear - a short summary and a long description. If you want only the long message, use <code>long_about</code> only.</p>
<blockquote>
<p>structopt includes the short about text within the long_about text.</p>
</blockquote>
<p>This is how <code>structopt</code> handles doc comments, the most common case. If you want only <code>long_about</code> to be called, use a raw method.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheLostLambda">@TheLostLambda</a> on 2019-12-25 17:42</div>
            <div class="timeline-body"><p>This functionality that I was seeking was actually already in the 2.33 version of Clap, but was just commented out.</p>
<p>It's in the <code>write_default_help</code> method in the <code>app/help.rs</code> file. It just checks if <code>self.use_long</code> is set, and prefers <code>long_about</code> if it is.</p>
<p>I'll probably push that to my fork and I think that's a good way to do things, calling <code>long_about</code> for <code>long_help</code> and <code>about</code> for <code>help</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1612.html">clap-rs/clap#1612</a> on 2019-12-26 01:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help message</span> added by @CreepySkeleton on 2020-02-01 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @CreepySkeleton on 2020-02-01 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P2: need to have</span> added by @CreepySkeleton on 2020-02-01 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @CreepySkeleton on 2020-02-01 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @CreepySkeleton on 2020-02-01 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> added by @CreepySkeleton on 2020-02-01 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.0" by @CreepySkeleton on 2020-02-01 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pksunkara on 2020-02-13 12:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zetok">@zetok</a> on 2020-10-22 13:42</div>
            <div class="timeline-body"><p>This is still not fixed in clap v2.33.3, and going by the tags assigned to this issue it should have been. Reopen?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-10-22 16:59</div>
            <div class="timeline-body"><p>It's fixed in master which will be released as v3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zetok">@zetok</a> on 2020-10-22 17:07</div>
            <div class="timeline-body"><p>The 3.0 milestone has an awfully long list open issues attached, and no due date set. Combined with how long it has been open, it seems really unlikely to be released anytime soon. Based on the amount of open attached issues, I'd say that it would take months if not years until it gets released.</p>
<p>In meanwhile, the latest stable release of clap will continue to have this bug.</p>
<p>So the question here is: how long exactly are you planning to keep the buggy behaviour in stable release of clap?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-10-22 18:00</div>
            <div class="timeline-body"><p>We have pre releases for v3 out. The v2 is effectively frozen unless it's a security patch.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:41 UTC
    </footer>
</body>
</html>
