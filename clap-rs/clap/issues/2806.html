<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User confusion over help messages not being colored, despite color being enabled - clap-rs/clap #2806</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>User confusion over help messages not being colored, despite color being enabled</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/2806">#2806</a>
        opened by <a href="https://github.com/epage">@epage</a>
        on 2021-10-04 18:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/epage">@epage</a> on 2021-10-04 18:37</div>
            <div class="timeline-body"><h3>Rust Version</h3>
<p>1.55.0</p>
<h3>Affected Version of clap</h3>
<p>v3.0.0-beta.4</p>
<h3>Expected Behavior Summary</h3>
<p>When the color feature is enabled, all coloring is done</p>
<h3>Actual Behavior Summary</h3>
<p>Users have to know that the <code>ColoredHelp</code> setting exists and set it</p>
<h3>Context</h3>
<p>This came up when discussing clap's defaults. In addition being <a href="https://github.com/clap-rs/clap/discussions/2627#discussion-3478195">a very popular setting among clap CLIs</a>, a <a href="https://github.com/clap-rs/clap/discussions/2627#discussioncomment-1193448">user reported</a></p>
<blockquote>
<p>I recently started using clap, and it took a bit to comprehend help messages were not coloured despite the <code>color</code> feature being the default. Lots of head scratching followed by &quot;really?&quot;.</p>
<p>I understand the potential argument against having <em>any</em> colourisation by default (ie not a default feature), but regardless of the feature being default or not, colourisation should be the default when the feature is enabled.</p>
</blockquote>
<p>Depending on what the motivation for this flag existing, we should either</p>
<ul>
<li>Remove it completely and always color help when color is on</li>
<li>Change the default (and possibly rename to reflect that changed behavior)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @epage on 2021-10-04 18:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E: breaking change</span> added by @epage on 2021-10-04 18:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: colorizing</span> added by @epage on 2021-10-04 18:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "4.0" by @epage on 2021-10-04 18:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/joshtriplett">@joshtriplett</a> on 2021-10-04 21:40</div>
            <div class="timeline-body"><p>I completely agree: if you have the color feature enabled, you should get color automatically by default unless you disable it.</p>
<p>People can always disable <code>ColoredHelp</code> if they don't want it, <em>or</em> disable the color feature entirely to not get color anywhere.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-10-09 00:12</div>
            <div class="timeline-body"><p>@epage Do you have a design for this if we want to get this into v3?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> removed by @pksunkara on 2021-10-09 00:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @pksunkara on 2021-10-09 00:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-10-09 10:23</div>
            <div class="timeline-body"><p>While I want to fix our defaults, I don't think this meets the minimum bar for the 3.0 milestone.  Whatever the fix will be, will be small, so its easy to slip in, but I'm concerned about the decision making slowing us down and distracting us from other work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2021-10-10 18:06</div>
            <div class="timeline-body"><p>This one seems much more simple to me to decide on than some of the other defaults questions. I essentially agree with @joshtriplett 100%. If our default features includes color, we color the terminal by default. However, we <em>must</em> maintain a way for users to turn that off both at runtime and by just not compiling the color feature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/joshtriplett">@joshtriplett</a> on 2021-10-11 09:21</div>
            <div class="timeline-body"><p>I agree; this one seems straightforward compared to other potential changes to defaults.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-10-11 13:51</div>
            <div class="timeline-body"><blockquote>
<p>If our default features includes color, we color the terminal by default. However, we must maintain a way for users to turn that off both at runtime and by just not compiling the color feature.</p>
</blockquote>
<p>We still have the Always, Auto, Never settings.</p>
<p>If there is no real dispute on this (which is never really predictable, see bike shedding), I'll go ahead and remove it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "4.0" by @epage on 2021-10-11 13:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.0" by @epage on 2021-10-11 13:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2845.html">clap-rs/clap#2845</a> on 2021-10-11 14:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @bors[bot] on 2021-10-11 15:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2956.html">clap-rs/clap#2956</a> on 2021-11-03 06:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/pulls/59.html">epage/clapng#59</a> on 2021-12-04 18:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../solana-labs/solana-program-library/issues/4511.html">solana-labs/solana-program-library#4511</a> on 2023-06-08 23:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:08 UTC
    </footer>
</body>
</html>
