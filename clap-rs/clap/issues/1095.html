<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`arg_enum` breaks on nightly - clap-rs/clap #1095</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>arg_enum</code> breaks on nightly</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1095">#1095</a>
        opened by <a href="https://github.com/epage">@epage</a>
        on 2017-11-06 15:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a></div>
            <div class="timeline-body">

Rust Version
<ul>
<li>rustc 1.23.0-nightly (3b82e4c74 2017-11-05)</li>
</ul>
Affected Version of clap
<ul>
<li>2.27.1</li>
</ul>
<pre><code>error: unused import: `std::ascii::AsciiExt`
 --&gt; src/syntax_highlight/syntect.rs:1:5
  |
1 | use std::ascii::AsciiExt;
  |     ^^^^^^^^^^^^^^^^^^^^
  |
note: lint level defined here
 --&gt; src/lib.rs:35:9
  |
35|         unused_imports,
  |         ^^^^^^^^^^^^^^
error: unused import: `:: std :: ascii :: AsciiExt`
  --&gt; src/config.rs:15:1
   |
15 | / arg_enum! {
16 | |     #[derive(Serialize, Deserialize)]
17 | |     #[derive(Debug, PartialEq, Copy, Clone)]
18 | |     pub enum Dump {
...  |
23 | |     }
24 | | }
   | |_^
   |
   = note: this error originates in a macro outside of the current crate
</code></pre>
<p>See https://travis-ci.org/cobalt-org/cobalt.rs/jobs/298020332</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2017-11-06 17:41</div>
            <div class="timeline-body"><p>See https://users.rust-lang.org/t/psa-dealing-with-warning-unused-import-std-ascii-asciiext-in-today-s-nightly/13726</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-06 17:56</div>
            <div class="timeline-body"><p>Ah great catch! This should be an easy fix once I get home. Adding a <code>cfg</code> to either remove the import or simply allow that lint on nightly is fine with me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: macros</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: nightly bug</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;2.27.2&quot; by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-07 01:18</div>
            <div class="timeline-body"><p>As of #1096 you should compile clap with the <code>nightly</code> feature which fixes this issue. See the <a href="https://github.com/kbknapp/clap-rs/commit/fb08bb5dd5760d2932e9f673abe23ea0df858aa2">commit f858aa2 message</a> for all the details.</p>
<p>I remember a while back some discussion lints not being transitive to your dependencies, but I don&#x27;t know where that discussion went. I&#x27;ve adopted the approach of only denying warnings in my &quot;strict&quot; or &quot;lint&quot; feature that I only use while developing or in CI, but it won&#x27;t block a PR merge.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2017-11-07 01:57</div>
            <div class="timeline-body"><p>Thanks for being quick about this.</p>
<p>The downside to this approach is it requires clients to create a <code>nightly</code> feature so that we can successful build our strict CIs.  Is there a reason you didn&#x27;t take the approach of disabling the warning for just that one <code>use</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-07 02:39</div>
            <div class="timeline-body"><blockquote>
<p>Is there a reason you didn&#x27;t take the approach of disabling the warning for just that one use?</p>
</blockquote>
<p>Because on stable that <code>use</code> is still required, and there isn&#x27;t a built-in <code>cfg</code> to determine when you&#x27;re building on stable/nightly unless you manually make a feature for it (that I&#x27;m aware of).</p>
<p>If there&#x27;s a better way I&#x27;m open to ideas :wink:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-07 02:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-07 02:49</div>
            <div class="timeline-body"><p>This issue was closed automatically via the PR, but if there is a better way to handle this issue I&#x27;m open to ideas and willing to consider them :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2017-11-07 03:37</div>
            <div class="timeline-body"><p>In the linked post on users, it suggests</p>
<pre><code>#[allow(unused_import)] use std::ascii::AsciiExt;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-07 04:42</div>
            <div class="timeline-body"><p>Yep just saw that, I think I only saw your CI link in my haste. I&#x27;ll try this out tomorrow and put in the new PR, thanks for pointing it out :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-07 04:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#1102</a> on 2017-11-12 17:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-12 19:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#1037</a> on 2017-11-12 19:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-05-26 11:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: nightly bug</span> removed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-05-26 11:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:57:01 UTC
    </footer>
</body>
</html>
