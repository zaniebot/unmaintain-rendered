<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add JSON Export for App - clap-rs/clap #918</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add JSON Export for App</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/clap-rs/clap/issues/918">#918</a>
        opened by <a href="https://github.com/mitsuhiko">@mitsuhiko</a>
        on 2017-03-26 14:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mitsuhiko">@mitsuhiko</a></div>
            <div class="timeline-body"><p>It would be great to be able to export the app with all subcommands, options and args to JSON (or something similar) so documentation tools can then pick up on it and make documentation pages.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 15:07</div>
            <div class="timeline-body"><p>Great suggestion, I&#x27;d love this. I have it on the back burner to add <code>serde</code> impls, specifically so we could get YAML and JSON. This will probably come out in the 3.x release which I keep hoping is right on the horizon...but then my day job goes and monopolizes my time. Hopefully soonish!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: app</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: args</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: hard</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mitsuhiko">@mitsuhiko</a> on 2017-03-26 21:09</div>
            <div class="timeline-body"><p>I was toying around with making a soft version of this that just spits out some json but it&#x27;s not clear on what basis this could be implemented. I was taking the completion code as a reference (the zsh one spits out most of the info I need) but it uses lots of internal APIs.</p>
<p>I wonder if it would make sense to base the completion code on an abstraction that could become public and then also be used for other exporting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 21:22</div>
            <div class="timeline-body"><p>I bet providing <code>Debug</code> impls would get us 90% of the way there. Not full on JSON, but close. <code>src/args/arg_builder/valued.rs</code> would need a manual impl because of the <code>validator[_os]</code>, but everything else could probably be derived</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 21:26</div>
            <div class="timeline-body"><p>Also I should also add, providing <code>serde::Serialize</code> for either YAML or JSON (or really any target) isn&#x27;t a breaking change, and doesn&#x27;t need to wait for 3.x. The only part that would be &quot;breaking&quot; is using <code>serde</code> for the <code>Deserialize</code> for YAML. Although, even then not technically breaking because the API used would be different than the current <code>App::from_yaml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 21:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E: optional dep</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 21:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-26 21:44</div>
            <div class="timeline-body"><p>So actually providing a JSON/YAML serialization doesn&#x27;t seem to be that hard, and is pretty straight forward. Maybe I can knock it out this week.</p>
<p>I will want the <code>serde{_json._yaml}</code> crates to be optional and behind a feature flag. And I want to keep the minimum version of Rust 1.11 if possibe (so no <code>#[derive(..)]</code> or <code>?</code>) for the time being.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mitsuhiko">@mitsuhiko</a> on 2017-03-26 21:46</div>
            <div class="timeline-body"><p>You could keep serde internal for now and just provide an export to JSON / YAML function that directly writes to a writer.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;serde&quot; by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-27 02:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#1037</a> on 2017-08-22 04:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> removed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-07-22 01:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#1630</a> on 2020-01-10 15:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> removed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-05-26 10:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone &quot;serde&quot; by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-05-26 10:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-05-26 10:52</div>
            <div class="timeline-body"><p>Blocked by <a href="https://github.com/dtolnay/serde-yaml/issues/94">dtolnay/serde-yaml#94</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-07-20 17:31</div>
            <div class="timeline-body"><p>Like with #853, #1041 could help with the lifetime blocker</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MikailBag">@MikailBag</a> on 2021-07-20 17:36</div>
            <div class="timeline-body"><p>AFAIU, serde-yaml lifetime limitations are not really blockers: one can serialize to JSON at first, and then serialize <code>serde_json::Value</code> to YAML.</p>
<p>Also, JSON seems to be subset of YAML, so json-serialized string can be interpreted as yaml.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-07-20 17:42</div>
            <div class="timeline-body"><p>Forgot which issue I was on, in general, exporting isn&#x27;t blocked on the lifetime issue, only importing and only for yaml.</p>
<p>I&#x27;m assuming we&#x27;d want to solve these several issues (#853, #1630, this one) together, providing a single serialization/deserialization experience and not have serde for most types and then a special case for deserializing from yaml, which would make the lifetime issue a blocker.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>epage/clapng#71</a> on 2021-12-06 16:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-builder</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-08 20:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-help</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-08 20:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-08 20:30</div>
            <div class="timeline-body"><p>How much would <a href="https://github.com/clap-rs/clap/issues/2914">clap-rs/clap#2914</a> help in this case?</p>
<p>The idea would be that help generation is split into the generator and formatter.  This would allow user-defined formatters, like man pages.  Would that work for this case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: args</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-08 20:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E: optional dep</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-08 20:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-08 21:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-08 21:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-hard</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-09 17:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-09 17:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-13 22:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>aobatact/clap-serde#11</a> on 2022-01-21 15:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#552</a> on 2022-04-12 13:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:56:49 UTC
    </footer>
</body>
</html>
