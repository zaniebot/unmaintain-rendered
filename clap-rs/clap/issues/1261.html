<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoBinaryName breaks parsing - clap-rs/clap #1261</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>NoBinaryName breaks parsing</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1261">#1261</a>
        opened by <a href="https://github.com/KalitaAlexey">@KalitaAlexey</a>
        on 2018-04-25 09:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/KalitaAlexey">@KalitaAlexey</a></div>
            <div class="timeline-body">Rust Version
<ul>
<li>rustc 1.27.0-nightly (7360d6dd6 2018-04-15)</li>
</ul>
Affected Version of clap
<ul>
<li>2.31.2</li>
</ul>
Expected Behavior Summary
<p>It doesn&#x27;t break parsing and <em>--help</em> doesn&#x27;t display the binary name</p>
Actual Behavior Summary
<p>It breaks parsing and there is no workaround</p>
Steps to Reproduce the issue
<ul>
<li><em>cargo new --bin app</em></li>
<li>Insert the code to <em>main.rs</em></li>
</ul>
Sample Code or Link to Sample Code
<pre><code>extern crate clap;

fn main() {
    let _ = clap::App::new(&quot;app&quot;)
        .setting(clap::AppSettings::NoBinaryName)
        .setting(clap::AppSettings::SubcommandRequired)
        .subcommand(clap::SubCommand::with_name(&quot;subcommand&quot;))
        .get_matches();
}
</code></pre>
Debug output
<p>It&#x27;s doesn&#x27;t compile if I enable the debug feature.</p>
<pre><code>E:\Projects\Rust\clap_test&gt; .\target\debug\clap_test.exe build
error: Found argument &#x27;E:\Projects\Rust\clap_test\target\debug\clap_test.exe&#x27; which wasn&#x27;t expected, or isn&#x27;t valid in this context

USAGE:
    app &lt;SUBCOMMAND&gt;

For more information try --help
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-06-05 01:30</div>
            <div class="timeline-body"><p>Sorry for the long wait, I&#x27;ve been away with my day job for a few weeks.</p>
<p><code>NoBinaryName</code> is meant for things like parsing custom line CLIs or daemon mode processes, it&#x27;s not meant to be used when you are directly calling the binary program.</p>
<p>i.e. <code>racer</code> uses in the the daemon mode, and if one were building a custom interactive prompt it would be useful, but that&#x27;s about it.</p>
<p>Is this to build a cargo subcommand? If so there is a specific way to do that. I&#x27;m going to close this issue, but if it&#x27;s to build a cargo subcommand either ping me here or in Gitter and I&#x27;ll tell you how to do that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-06-05 01:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:57:10 UTC
    </footer>
</body>
</html>
