<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoBinaryName breaks parsing - clap-rs/clap #1261</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>NoBinaryName breaks parsing</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1261">#1261</a>
        opened by <a href="https://github.com/KalitaAlexey">@KalitaAlexey</a>
        on 2018-04-25 09:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/KalitaAlexey">@KalitaAlexey</a> on 2018-04-25 09:59</div>
            <div class="timeline-body"><h3>Rust Version</h3>
<ul>
<li>rustc 1.27.0-nightly (7360d6dd6 2018-04-15)</li>
</ul>
<h3>Affected Version of clap</h3>
<ul>
<li>2.31.2</li>
</ul>
<h3>Expected Behavior Summary</h3>
<p>It doesn't break parsing and <em>--help</em> doesn't display the binary name</p>
<h3>Actual Behavior Summary</h3>
<p>It breaks parsing and there is no workaround</p>
<h3>Steps to Reproduce the issue</h3>
<ul>
<li><em>cargo new --bin app</em></li>
<li>Insert the code to <em>main.rs</em></li>
</ul>
<h3>Sample Code or Link to Sample Code</h3>
<pre><code class="language-rust">extern crate clap;

fn main() {
    let _ = clap::App::new(&quot;app&quot;)
        .setting(clap::AppSettings::NoBinaryName)
        .setting(clap::AppSettings::SubcommandRequired)
        .subcommand(clap::SubCommand::with_name(&quot;subcommand&quot;))
        .get_matches();
}
</code></pre>
<h3>Debug output</h3>
<p>It's doesn't compile if I enable the debug feature.</p>
<pre><code>E:\Projects\Rust\clap_test&gt; .\target\debug\clap_test.exe build
error: Found argument 'E:\Projects\Rust\clap_test\target\debug\clap_test.exe' which wasn't expected, or isn't valid in this context

USAGE:
    app &lt;SUBCOMMAND&gt;

For more information try --help
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-06-05 01:30</div>
            <div class="timeline-body"><p>Sorry for the long wait, I've been away with my day job for a few weeks.</p>
<p><code>NoBinaryName</code> is meant for things like parsing custom line CLIs or daemon mode processes, it's not meant to be used when you are directly calling the binary program.</p>
<p>i.e. <code>racer</code> uses in the the daemon mode, and if one were building a custom interactive prompt it would be useful, but that's about it.</p>
<p>Is this to build a cargo subcommand? If so there is a specific way to do that. I'm going to close this issue, but if it's to build a cargo subcommand either ping me here or in Gitter and I'll tell you how to do that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2018-06-05 01:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:48 UTC
    </footer>
</body>
</html>
