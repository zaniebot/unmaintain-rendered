<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow Arg to be copied/cloned - clap-rs/clap #361</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow Arg to be copied/cloned</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/361">#361</a>
        opened by <a href="https://github.com/LegNeato">@LegNeato</a>
        on 2015-12-11 00:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/LegNeato">@LegNeato</a> on 2015-12-11 00:27</div>
            <div class="timeline-body"><p>(I'm a rust n00b, let me know if I am doing something stupid)</p>
<p>It doesn't appear I can use a generic shared argument in multiple places / subcommands due to ownership.</p>
<pre><code class="language-rust">        let shared_arg = Arg::with_name(&quot;shared&quot;)
            .required(true)
            .help(&quot;This is shared&quot;);

        let matches = app
            .subcommand(foo_command.arg(shared_arg))
            .subcommand(bar_command.arg(shared_arg))
</code></pre>
<p>Ideally <code>Arg</code> would let me copy/clone so I could reuse shared definitions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LegNeato">@LegNeato</a> on 2015-12-11 02:13</div>
            <div class="timeline-body"><p>Ah, just saw https://github.com/kbknapp/clap-rs/issues/354. Closing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @LegNeato on 2015-12-11 02:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-12-11 06:09</div>
            <div class="timeline-body"><p>No worries,  we should have this implemented soon :wink:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lipanski">@lipanski</a> on 2015-12-18 17:24</div>
            <div class="timeline-body"><p>@LegNeato you can use <code>Arg::from</code> to copy the argument around:</p>
<pre><code class="language-rust">let shared_arg = Arg::with_name(&quot;shared&quot;).required(true).help(&quot;This is shared&quot;);

let matches = app
            .subcommand(foo_command.arg(Arg::from(&amp;shared_arg)))
            .subcommand(bar_command.arg(Arg::from(&amp;shared_arg)));
</code></pre>
<p>not sure how orthodox this is, but it did the job for me.</p>
<p>and yes, would be lovely to have #354 :)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:06 UTC
    </footer>
</body>
</html>
