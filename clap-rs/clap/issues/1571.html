<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>help text wrong for number_of_values=1 - clap-rs/clap #1571</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>help text wrong for number_of_values=1</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1571">#1571</a>
        opened by <a href="https://github.com/metajack">@metajack</a>
        on 2019-10-10 15:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/metajack">@metajack</a></div>
            <div class="timeline-body">

Rust Version
<p>Any</p>
Affected Version of clap
<p>clap 2.33</p>
Behavior Summary
<p>I&#x27;m moving this bug from structopt (TeXitoi/structopt#267) repo, since it is really about clap. Please forgive the syntax differences, but I think it should be clear how it maps to clap.</p>
<p>For a field defined like:</p>
<pre><code>    #[structopt(long=&quot;package&quot;, short=&quot;p&quot;, name=&quot;name&quot;, number_of_values=1)]
    roots: Vec&lt;String&gt;,
</code></pre>
<p>The help text implies you can specify multiple values per option:</p>
<pre><code>    -p, --package &lt;name&gt;...
</code></pre>
<p>It should probably remove the <code>...</code> in this case. Or at least it seems like the ability to specify an option multiple times should look different than allowing multiple values for a single option. I interpret <code>&lt;value&gt;...</code> as lots of values.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2019-10-10 15:57</div>
            <div class="timeline-body"><p>Pure <code>clap</code> equivalent:</p>
<pre><code>Arg::new(&quot;name&quot;)
    .long(&quot;package&quot;)
    .short(&quot;p&quot;),
    .number_of_values(1)
    .takes_value(true)
    .multiple_values(true)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jdollar">@jdollar</a> on 2019-10-12 10:49</div>
            <div class="timeline-body"><p>Hey. I&#x27;d be more than willing to take this one, but I wanted to try and get some clarification on what we would expect in this scenario? I&#x27;m not really finding any good documentation out there for how people are detailing out that a parameter can be used repeatedly. I see tons on where the argument can have multiple, but no clear examples on where the parameter repeats. At least no clear example in terms of how the help text is ideally displayed in such a case.</p>
<p>In this case should we just completely remove the ellipsis and rely on the developer using clap to provide a description for that argument that informs the user that it can be used multiple times? Basing that suggestoin off the documentation for multiple boolean occurrences here: https://picocli.info/#_multiple_occurrences.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 11:31</div>
            <div class="timeline-body"><p>I like @jdollar proposal.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help message</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 11:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 11:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 11:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 11:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#1458</a> on 2020-02-01 14:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-02-01 19:37</div>
            <div class="timeline-body"><p>Instead of that, we can remove the ellipsis if the <code>number_of_values</code> is 1. This sounds like a much simple and straightforward solution to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;3.0&quot; by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-02 02:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone &quot;3.0&quot; by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-02 02:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;3.1&quot; by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-02 02:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">:money_with_wings: $5</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-06-16 03:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/ldm0">@ldm0</a> by <a href="https://github.com/ldm0">@ldm0</a> on 2021-08-14 10:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#2701</a> on 2021-08-15 01:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-08-17 09:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>coreos/coreos-installer#740</a> on 2022-01-04 22:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:57:30 UTC
    </footer>
</body>
</html>
