<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>use -V for version instead of -v - clap-rs/clap #138</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>use -V for version instead of -v</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/138">#138</a>
        opened by <a href="https://github.com/kbknapp">@kbknapp</a>
        on 2015-06-07 19:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kbknapp">@kbknapp</a></div>
            <div class="timeline-body"><p>In order to follow typical conventions where lowercase <code>-v</code> is for <code>verbose</code> and many programs use the capital <code>-V</code> for version (to include <code>rustc</code>). Currently, if one wants to use typical <code>-v</code> for verbose, that leaves <em>only</em> the long for <code>version</code> with no option to &quot;add&quot; a short without manually implementing it (which isn&#x27;t hard...but still).</p>
<p>There are two options for this:</p>
<ol>
<li>Simply change default short of version to <code>-V</code> which is a &quot;breaking&quot; change (at least for downstream documentation).</li>
<li>Use short <code>-v</code> for version unless manually overridden, then use short <code>-V</code> if available.</li>
</ol>
<p>I like option 2 because it&#x27;s a non-breaking change, the downside is it could be confusing if a program suddenly changes from <code>-v</code> to <code>-V</code> for version seemingly automagically. Or when subcommands have one <code>-v</code> but parents or other subcommands have <code>-V</code>....so maybe I actually prefer option 1.</p>
<p>TBD</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking change</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-06-07 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">maybe</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-06-07 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/kbknapp">@kbknapp</a> by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-06-07 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;1.0 Release&quot; by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-06-07 19:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-06-17 00:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-06-17 00:52</div>
            <div class="timeline-body"><p><code>-V</code> is now the default. In order to stay more in line with other standard command line interfaces.</p>
<p>I have added <code>App::version_short()</code> and <code>App::help_short()</code> which allow you to override this default (and set it to anything you like).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>metamath/metamath-knife#102</a> on 2023-02-20 17:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>deislabs/spiderlightning#380</a> on 2023-04-12 16:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JimLynchCodes">@JimLynchCodes</a> on 2023-05-21 05:26</div>
            <div class="timeline-body"><p>@kbknapp  honestly, I don&#x27;t like this change.</p>
<p>Many popular cli tools (for example, npm) use the lower case -v for the version short flag.</p>
<p>The <code>App::version_short()</code> is cool, but I&#x27;m still not sure how to actually use it with the Clap derive syntax... also, what if you want to allow both -v and -V for short version flag?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-05-22 18:22</div>
            <div class="timeline-body"><p>imo <code>-v</code> is more generally recognized as <code>--verbose</code> and we do allow customizing it, so not too concerned about some tools using <code>-v</code> for <code>--version</code>.</p>
<p><code>App::version_short</code> was more of a v2 way of customizing it.</p>
<p>The way to do this in clap today is something like:</p>
<pre><code>#[derive(Parser)]
#[command(disable_version_flag = true)]
struct {
    /// Print version
    #[arg(short = &#x27;v&#x27;, short_alias = &#x27;V&#x27;, long, action = clap::builder::ArgAction::Version)]
    version: (),
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fawdlstty">@fawdlstty</a> on 2024-01-31 01:40</div>
            <div class="timeline-body"><p>Can we change the version retrieval method to lowercase? Verbose is not something everyone needs, but uppercase input is difficult, using lowercase to obtain the version is more reasonable</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2024-01-31 02:10</div>
            <div class="timeline-body"><p>At this point, someone would need to put forward a strong case for changing the default.  As shown above, people are free to change this for their application as they wish.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>russellbanks/Komac#409</a> on 2024-01-31 09:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>UCSD-E4E/e4e-data-management-rust#15</a> on 2024-02-14 03:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>theoforger/mastermind#2</a> on 2024-09-13 22:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:56:06 UTC
    </footer>
</body>
</html>
