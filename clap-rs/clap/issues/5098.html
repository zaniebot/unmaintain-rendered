<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow more granular styling - clap-rs/clap #5098</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow more granular styling</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/clap-rs/clap/issues/5098">#5098</a>
        opened by <a href="https://github.com/AndreasBackx">@AndreasBackx</a>
        on 2023-08-28 17:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AndreasBackx">@AndreasBackx</a></div>
            <div class="timeline-body">Please complete the following tasks
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
Clap Version
<p>4.4.1</p>
Describe your use case
<p>This is a follow-up from <a href="https://github.com/clap-rs/clap/issues/3234">clap-rs/clap#3234</a>#issuecomment-1562999659.</p>
<p>There are subcommands, or particular arguments sometimes that would benefit from having particular colouring to express what effect they could have. Imagine the fictional CLI <code>cluster-manager</code> which has a <code>delete</code> subcommand. It would be nice to reflect that this will actually delete a cluster. Perhaps that subcommand will have a prompt to confirm whether the user wants to delete a cluster, to allow for automation the <code>--yes</code> flag might be added. That <code>--yes</code> flag might also want to be coloured in a particular way to signify it&#x27;s a dangerous flag to use.</p>
Describe the solution you&#x27;d like
<p>The current behaviour is when a subcommand has a style, it overrides the subcommand&#x27;s. The first change would be to allow the subcommand to change its styling. Then, similarly to how a command&#x27;s styling works, tune it to allow for overriding a command&#x27;s style for:</p>
<ul>
<li>A particular argument</li>
<li>A particular option</li>
<li>A particular subcommand</li>
</ul>
<p>Unless I am missing anything, this should allow any generated line in <code>--help</code> to also be uniquely styled:</p>
<pre><code>$ cli --help
Description.

USAGE:
    cli [OPTIONS] [-- &lt;args&gt;...]

ARGS:
	&lt;args&gt;... Options passed to whatever.

OPTIONS:
	--something
		Something very important.

COMMANDS:
	delete
		DANGEROUS BE AWARE!
</code></pre>
<p>We could style <code>&lt;args&gt;...</code>, <code>--something</code>, and <code>delete</code> uniquely.</p>
Alternatives, if applicable
<p><em>No response</em></p>
Additional Context
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by <a href="https://github.com/AndreasBackx">@AndreasBackx</a> on 2023-08-28 17:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-help</span> added by <a href="https://github.com/epage">@epage</a> on 2023-08-28 18:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by <a href="https://github.com/epage">@epage</a> on 2023-08-28 18:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-08-28 18:46</div>
            <div class="timeline-body"><p>This idea was inspired by https://github.com/click-contrib/click-help-colors</p>
<p>Unfortunately, not seeing a quick reference, so from what I gather they allow</p>
<ul>
<li>help_headers_color<ul>
<li>You can set the color for all headings but not on a per-heading basis</li>
<li>Maybe we could change <code>help_heading</code> to accept a <code>StyledStr</code> and then we have a way to detect if styling is present and only apply ours if so</li>
<li>We might also want to wait on this to design it with help heading before / after text (we don&#x27;t already have an issue for this?) in case it would be better handled another way</li>
</ul>
</li>
<li>help_options_color<ul>
<li>We support this today</li>
</ul>
</li>
<li>help_options_custom_colors (maps arg or command to color)<ul>
<li>We could add <code>Arg::styles</code> and the help / usage could read that though it might require some more book keeping</li>
<li>This might make sorting of arguments more complex and we&#x27;ll need to take that into account</li>
</ul>
</li>
<li>prog_name_color, version_color, message_color (for <code>--version</code>)<ul>
<li>We allow people to pass in a colored version already which I think covers this</li>
</ul>
</li>
<li>All of that can be set on a per-command basis<ul>
<li>We only support it on an application basis</li>
<li>Part of this is an architectural issue as we are using our plugin system and it doesn&#x27;t know how to merge when propogating</li>
</ul>
</li>
</ul>
<p>In addition,. this Issue calls out styling of subcommand names.  The challenge here is that we don&#x27;t want names to be accepted as styled because we do string matching on them.  API wise, this might also relate to #1553</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:59:55 UTC
    </footer>
</body>
</html>
