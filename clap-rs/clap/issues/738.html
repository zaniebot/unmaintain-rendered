<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backwards-incompatible change made. - clap-rs/clap #738</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Backwards-incompatible change made.</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/738">#738</a>
        opened by <a href="https://github.com/jrvanwhy">@jrvanwhy</a>
        on 2016-11-12 04:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jrvanwhy">@jrvanwhy</a> on 2016-11-12 04:47</div>
            <div class="timeline-body"><p>Commit 1ced2a7433ea8937a1b260ea65d708f32ca7c95e introduced a &quot; + Clone&quot; trait bound to many functions, including App::get_matches_with(), which is a breaking change and technically requires a major version increase.</p>
<p>We should see if this bound can be removed without losing functionality (which would obviously be another breaking change).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jrvanwhy">@jrvanwhy</a> on 2016-11-12 08:13</div>
            <div class="timeline-body"><p>I think I have a workable solution, but it's hanging the compiler. Unfortunately, I need to get permission from my employer before releasing my changes, so this will take a bit of time. Assuming I am correct in thinking I have a solution, I will have a patch ASAP, but that may be a few days.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-12 17:05</div>
            <div class="timeline-body"><p>Thanks for filing this! And also thanks for working on this issue! Let me know if you have any questions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: settings</span> added by @kbknapp on 2016-11-12 17:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: intermediate</span> added by @kbknapp on 2016-11-12 17:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P1: urgent</span> added by @kbknapp on 2016-11-12 17:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">Regression</span> added by @kbknapp on 2016-11-12 17:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @kbknapp on 2016-11-12 17:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jrvanwhy">@jrvanwhy</a> on 2016-11-12 18:43</div>
            <div class="timeline-body"><p>Thanks for the offer of help. I've looked at my employer's (Google's) documentation, and it looks like they will own the copyright on the patch I'm creating. I notice that the current codebase is copyrighted solely by you. Are you fine accepting patches that would make you share copyright with Google in those two files? (It'd still be under the MIT license, of course).</p>
<p>If not, then my suggestion is to remove the Clone bound from get_matches_from(), get_matches_from_safe(), and get_matches_from_borrow() in app/mod.rs and change the iterator in get_matches_with() in parser.rs to create OsString objects with than T: Into<OsString> objects. I'm not sure if that works, however, because I'm hitting a compiler bug (currently waiting on Google's permission to release the patch so the Rust team can investigate the issue).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-12 21:35</div>
            <div class="timeline-body"><p>@jrvanwhy I'm not against sharing the copyright, but being that I'm only one guy working on a side project that would be alittle more complicated than I'd want to think/worry about right now since I'm nowhere even close to being a lawyer :stuck_out_tongue_winking_eye:</p>
<p>Let me see if I can get this working - if not then I'll concede and take the patch!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jrvanwhy">@jrvanwhy</a> on 2016-11-12 22:42</div>
            <div class="timeline-body"><p>I understand completely, sorry my patch-making is tied up in bureaucracy. Good luck making it work, and thank you for supporting this project so well!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tormol">@tormol</a> on 2016-11-13 13:22</div>
            <div class="timeline-body"><p>@kbknapp I'm almost certain you already share the copyright.
Copyright reassignment isn't mentioned anywhere, and that that stuff <a href="https://www.gnu.org/prep/maintain/maintain.html#Copyright-Papers">seems to require paperwork</a>.
The copyright notice in lib.rs says '... and <code>clap-rs</code> contributors', so either that or LICENCE-MIT is wrong.
If you were the sole copyright holder the contributor checkoff for <a href="https://github.com/kbknapp/clap-rs/issues/389">re-licensing</a> would be unnecessary.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-14 21:22</div>
            <div class="timeline-body"><p>@tormol you are probably correct, which is in part why I tend to steer clear of copyright paperwork unless it's required since it's a murky field.</p>
<p>I think what I'm most leery of is singling out a particular contributor for individual lines/files. Because what happens when those particular parts change, do the derivative works also need to added to this list of singled out contributions? That would be hard to keep up correctly. Granted this isn't to say any one of the clap contributors could request the same thing, but most are good with having their name listed in the contributors and using things like <code>git blame</code>.</p>
<p>With individual github contributors this is typically hand waved over, but when big corporation get involved things to be done correctly or it gets messy quick. Since I'm unfamiliar with how that whole derivative work part works, that's what I'm unsure of. The way I understand it sounds like a virus that spreads to all things derived from those original few lines?</p>
<p>I'm <strong>all for</strong> sharing the love with the contributors, because without all of them, clap wouldn't be what it is today! I just don't want to do something totally wrong and get hung out to dry by mistake!</p>
<p>I could be waaay off too, so take what I say with a grain of salt :stuck_out_tongue_winking_eye:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jrvanwhy">@jrvanwhy</a> on 2016-11-14 23:40</div>
            <div class="timeline-body"><p>@kbknapp The following might work, but I would need to clear it with Google first:</p>
<ul>
<li>I replace &quot;Kevin B. Knapp&quot; with &quot;Kevin B. Knapp and other contributors&quot; in LICENSE-MIT</li>
<li>I add Google, Inc to CONTRIBUTORS</li>
</ul>
<p>Would that set of changes be fine with you? Of course, don't feel like you need to wait for me to make changes -- if you find a solution on your own, go ahead and commit it. I'm just trying to save you some effort by solving it myself ;p</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jrvanwhy">@jrvanwhy</a> on 2016-11-15 07:08</div>
            <div class="timeline-body"><p>The above changes are fine with Google. However, I'm not sure how to make the &quot;Google, Inc&quot; persistent in CONTRIBUTORS, since CONTRIBUTORS is apparently regularly regenerated from commit messages.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-15 22:13</div>
            <div class="timeline-body"><p>@jrvanwhy absolutely, I was going to do that regardless (well similar, I was going to list your name :wink:). Assuming it's good with your employer I'd still like to add your name to the CONTRIBUTORS.md list. After making that change, do you know who from Google can give the thumbs up/down to #389 ? That change would allow this library to be compatible with the Rust ecosystem at large. As @tormol pointed out, that thumbs up/down may not even be totally necessary, but in case it is I'd still like to know who can give that approval.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jrvanwhy">@jrvanwhy</a> on 2016-11-15 22:32</div>
            <div class="timeline-body"><p>@kbknapp Unfortunately, Google requires that I add &quot;Google Inc&quot; as a contributor, which is difficult because your contributors list is auto-generated and the tool you're using would only pick up my username. The patch I posted (on Reddit) for the compiler devs changed LICENSE-MIT to mention Google Inc, which I find a bit heavy-handed.</p>
<p>Assuming I am able to create a working patch, I will ask Google's licensing team how to proceed. My guess is that I should release the patch under the proposed dual license.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jrvanwhy">@jrvanwhy</a> on 2016-11-17 07:27</div>
            <div class="timeline-body"><p>@kbknapp Here's an idea: What if I modified justfile to append something like:</p>
<p>`The following entities have contributed to clap-rs:</p>
<ul>
<li>Google Inc`</li>
</ul>
<p>to CONTRIBUTORS.md so that you can maintain a list of companies/nonprofit organizations/governments, etc... that have contributed to clap-rs?</p>
<p>Also, I'm still blocked on <a href="https://github.com/rust-lang/rust/issues/37779">the rustc bug I found</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-11-21 15:12</div>
            <div class="timeline-body"><p>I'm good with that too :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../vitiral/artifact/issues/15.html">vitiral/artifact#15</a> on 2016-11-26 05:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vitiral">@vitiral</a> on 2016-11-26 05:23</div>
            <div class="timeline-body"><p>I just hit this bug and it was a quick fix. I just want to let you know how grateful I am for this library. It is an amazing command line lib and you are awesome for maintaining it. :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2018-02-02 01:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:06 UTC
    </footer>
</body>
</html>
