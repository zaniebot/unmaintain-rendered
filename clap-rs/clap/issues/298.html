<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wrong usage string for trailing varargs - clap-rs/clap #298</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Wrong usage string for trailing varargs</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/298">#298</a>
        opened by <a href="https://github.com/matklad">@matklad</a>
        on 2015-10-01 16:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/matklad">@matklad</a> on 2015-10-01 16:02</div>
            <div class="timeline-body"><p>For the following code</p>
<pre><code class="language-rust">        .args_from_usage(
            &quot;[daemon] -d   'Daemonizes the container'
             --cpu [PREC]  'set CPU usage limit'
             &lt;IMAGE_PATH&gt;  'path to image of container file system'
             &lt;CMD&gt;         'command to run inside the container'
             [ARGS]...     'arguments to pass to the CMD'&quot;)
</code></pre>
<p>I get this usage string: <code>aucont_start [FLAGS] [OPTIONS] [ARGS] &lt;IMAGE_PATH&gt; &lt;CMD&gt;</code>.
<code>[ARGS]</code> should definitely come after IMAGE_PATH and CMD in the usage string. The parsing itself works correctly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-10-01 16:16</div>
            <div class="timeline-body"><p>Thanks for taking the time to file this! I can confirm, on 1.4.3 this is the case. I believe this may be a bug in the usage generation portion because in cases like the above it should be:</p>
<pre><code>USAGE:
    aucont_start [FLAGS] [OPTIONS] &lt;IMAGE_PATH&gt; &lt;CMD&gt; [--] [ARGS]
</code></pre>
<p>Note, you <em>can</em> also override the usage string to make it anything you like, but doing so manes you no longer get context aware usage strings generated on error messages. This doesn't appear to be  a good case for that, but just FYI.</p>
<p>We'll report back here once this bug is fixed :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @kbknapp on 2015-10-01 16:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P2: need to have</span> added by @kbknapp on 2015-10-01 16:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help message</span> added by @kbknapp on 2015-10-01 16:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @kbknapp on 2015-10-01 16:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 1.x</span> added by @kbknapp on 2015-10-01 16:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "1.4.4" by @kbknapp on 2015-10-01 16:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-10-01 16:28</div>
            <div class="timeline-body"><p>Also, this is somewhat muddled by the use of <code>ARGS</code> for the argument name, and <code>clap</code>s use of <code>[ARGS]</code> in regular usage strings just to denote &quot;optional positional arguments.&quot; It's not a big deal, but just something to be aware of.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/299.html">clap-rs/clap#299</a> on 2015-10-01 16:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/matklad">@matklad</a> on 2015-10-01 16:45</div>
            <div class="timeline-body"><p>Thanks for the swift reply! I'd like to add that implementing #278 would be ideal for my use case :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-10-01 16:49</div>
            <div class="timeline-body"><p>That's actually what I'm working on now, and should be implemented shortly :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @homu on 2015-10-01 17:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:17 UTC
    </footer>
</body>
</html>
