<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>required_unless, required_unless_one, and required_unless_all for ArgGroup - clap-rs/clap #1801</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>required_unless, required_unless_one, and required_unless_all for ArgGroup</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/clap-rs/clap/issues/1801">#1801</a>
        opened by <a href="https://github.com/AuroransSolis">@AuroransSolis</a>
        on 2020-04-09 10:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/AuroransSolis">@AuroransSolis</a> on 2020-04-09 10:05</div>
            <div class="timeline-body"><h3>Describe your use case</h3>
<p>The issue this aims to solve is the lack of <code>required_unless</code>, <code>required_unless_one</code>, and <code>required_unless_all</code> for <code>ArgGroup</code>. For example, one might have the following:</p>
<pre><code class="language-rust">let app = App::new(&quot;example&quot;)
    .arg(Arg::with_name(&quot;foo-user&quot;)
        .takes_value(true)
        .long(&quot;foo-user&quot;))
    .arg(Arg::with_name(&quot;foo-user-file&quot;)
        .takes_value(true)
        .long(&quot;foo-user-file&quot;))
    .group(ArgGroup::with_name(&quot;foo-username&quot;)
        .args(&amp;[&quot;foo-user&quot;, &quot;foo-user-file&quot;])
        .multiple(false)
        .requires(&quot;foo-password&quot;))
    .arg(Arg::with_name(&quot;foo-pass&quot;)
        .takes_value(true)
        .long(&quot;foo-pass&quot;))
    .arg(Arg::with_name(&quot;foo-pass-file&quot;)
        .takes_value(true)
        .long(&quot;foo-pass-file&quot;))
    .group(ArgGroup::with_name(&quot;foo-password&quot;)
        .args(&amp;[&quot;foo-pass&quot;, &quot;foo-pass-file&quot;])
        .multiple(false))
    .group(ArgGroup::with_name(&quot;foo-creds&quot;)
        .args(&amp;[&quot;foo-username&quot;, &quot;foo-password&quot;])
        .requires_all(&amp;[&quot;foo-username&quot;, &quot;foo-password&quot;])
        .multiple(true)
        .required_unless(&quot;bar-creds&quot;))
    .arg(Arg::with_name(&quot;bar-user&quot;)
        .takes_value(true)
        .requires(&quot;bar-password&quot;)
        .long(&quot;bar-user&quot;))
    .arg(Arg::with_name(&quot;bar-user-file&quot;)
        .takes_value(true)
        .requires(&quot;bar-password&quot;)
        .long(&quot;bar-user-file&quot;))
    .group(ArgGroup::with_name(&quot;bar-username&quot;)
        .args(&amp;[&quot;bar-user&quot;, &quot;bar-user-file&quot;])
        .multiple(false))
    .arg(Arg::with_name(&quot;bar-pass&quot;)
        .takes_value(true)
        .long(&quot;bar-pass&quot;))
    .arg(Arg::with_name(&quot;bar-pass-file&quot;)
        .takes_value(true)
        .long(&quot;bar-pass-file&quot;))
    .group(ArgGroup::with_name(&quot;bar-password&quot;)
        .args(&amp;[&quot;bar-pass&quot;, &quot;bar-pass-file&quot;])
        .multiple(false))
    .group(ArgGroup::with_name(&quot;bar-creds&quot;)
        .args(&amp;[&quot;bar-username&quot;, &quot;bar-password&quot;])
        .multiple(true))
    .arg(Arg::with_name(&quot;bar-fallback-to-foo&quot;)
        .takes_value(false)
        .requires_all(&amp;[&quot;foo-creds&quot;, &quot;bar-creds&quot;]));
</code></pre>
<p>One might imagine a different situation where <code>required_unless_one</code> or <code>required_unless_all</code> might be of use as well, but the only short example I could come up with is one demonstrating the use of <code>required_unless</code>. This reduces the number of lines required to express certain requirements by moving a <code>required_unless</code>, <code>required_unless_one</code>, or <code>required_unless_all</code> method from each argument in the group to a single one on the group itself. This also makes requirements for group arguments more clear and maintainable, as they're located in a single spot instead of on each group argument.</p>
<h3>Alternatives</h3>
<p>It may be possible in some situations to use <code>required_unless</code>, <code>required_unless_one</code>, or <code>required_unless_all</code> on the arguments in the group one might otherwise apply to the group itself, but this would be at least one line per argument, possibly more if the slices for <code>required_unless_one</code> or <code>required_unless_all</code> are particularly long.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by @AuroransSolis on 2020-04-09 10:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: arg groups</span> added by @pksunkara on 2020-04-09 10:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @pksunkara on 2020-04-09 10:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> added by @pksunkara on 2020-04-09 10:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">Z: good first issue</span> added by @pksunkara on 2020-04-09 10:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.1" by @pksunkara on 2020-04-09 10:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/j-delaney">@j-delaney</a> on 2020-04-10 12:18</div>
            <div class="timeline-body"><p>I'm happy to take a shot at this if that's okay!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dylan-DPC-zz">@Dylan-DPC-zz</a> on 2020-04-10 12:18</div>
            <div class="timeline-body"><p>Go ahead. Thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1827.html">clap-rs/clap#1827</a> on 2020-04-15 21:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pksunkara on 2020-05-20 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @pksunkara on 2020-05-20 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2020-05-20 14:14</div>
            <div class="timeline-body"><p>Better way to fix this would be implementing the following way</p>
<blockquote>
<p>factoring out most of Arg and ArgGroup into new ArgBase struct to avoid code duplication</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/152.html">epage/clapng#152</a> on 2021-12-06 20:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: arg groups</span> removed by @epage on 2021-12-08 19:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-builder</span> added by @epage on 2021-12-08 19:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: validators</span> added by @epage on 2021-12-08 19:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> removed by @epage on 2021-12-08 21:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @epage on 2021-12-08 21:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-builder</span> removed by @epage on 2021-12-09 22:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> removed by @epage on 2021-12-09 22:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> removed by @epage on 2021-12-09 22:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-easy</span> removed by @epage on 2021-12-09 22:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-mentor</span> added by @epage on 2021-12-09 22:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.1" by @epage on 2021-12-09 22:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6030.html">clap-rs/clap#6030</a> on 2025-06-10 15:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:32 UTC
    </footer>
</body>
</html>
