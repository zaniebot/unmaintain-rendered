```yaml
number: 3697
title: Bash completion no longer completes arg possible_values
type: issue
state: closed
author: vincentdephily
labels:
  - C-bug
assignees: []
created_at: 2022-05-06T10:44:53Z
updated_at: 2022-05-06T14:40:01Z
url: https://github.com/clap-rs/clap/issues/3697
synced_at: 2026-01-10T01:57:47Z
```

# Bash completion no longer completes arg possible_values

---

_Issue opened by @vincentdephily on 2022-05-06 10:44_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Rust Version

1.60.0

### Clap Version

3.1.16 (clap) 3.1.3 (clap_complete)

### Minimal reproducible code

```rust
use clap::*;
use clap_complete::*;

fn main() {
    let mut cli = App::new("foo").arg(Arg::new("foo").long("foo").possible_values(&["bar", "baz"]));
    generate(Shell::Bash, &mut cli, "foo", &mut std::io::stdout());
}
```


### Steps to reproduce the bug with the above code

`cargo run | rg -C1 COMPREPLY`

### Actual Behaviour

```
                --foo)
                    COMPREPLY=($(compgen -W "" -- "${cur}"))
                    return 0
```

### Expected Behaviour

```
                --foo)
                    COMPREPLY=($(compgen -W "bar baz" -- "${cur}"))
                    return 0
```

### Additional Context

This is a regression introduced in `clap_complete 3.1.1`. Versions 3.1.0 and earlier (including 2.x series I'm currently upgrading from) are fine.

### Debug Output

_No response_

---

_Label `C-bug` added by @vincentdephily on 2022-05-06 10:44_

---

_Referenced in [clap-rs/clap#3698](../../clap-rs/clap/pulls/3698.md) on 2022-05-06 14:15_

---

_Closed by @epage on 2022-05-06 14:37_

---

_Comment by @epage on 2022-05-06 14:40_

Fix released in v3.1.4

---
