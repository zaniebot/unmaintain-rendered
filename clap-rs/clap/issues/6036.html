<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conformation Argument - clap-rs/clap #6036</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Conformation Argument</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/6036">#6036</a>
        opened by <a href="https://github.com/snowfoxsh">@snowfoxsh</a>
        on 2025-06-16 18:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/snowfoxsh">@snowfoxsh</a> on 2025-06-16 18:29</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.5.39</p>
<h3>Describe your use case</h3>
<p>sometimes you want to ask the user “are you sure?” before doing something destructive. it’d be nice if clap had a built-in way to mark a flag or subcommand as requiring confirmation, instead of rolling that logic by hand every time. maybe something like <code>#[arg(confirm)]</code> or a requires_confirmation(true) builder method.</p>
<p><code>#[arg(confirm(default=bool))]</code> could be used to set if by default (on enter press).
<code>#[arg(confirm(prompt=&quot;this action is destructive, would you like to continue?&quot;))]</code> could be used to set a custom prompt</p>
<h3>Describe the solution you'd like</h3>
<p>before executing the command read from standard input. when the colored feature is enabled then maybe color codes could be added.</p>
<pre><code class="language-rust">// hook run before command
// basic psudocode
fn confirm(prompt: Option&lt;&amp;str&gt;, default_no: Option&lt;bool&gt;) {
   let prompt_tail = if default_no.unwrap_or(true) {
      &quot;[y/N]&quot;
   } else {
      &quot;[Y/n]&quot;   
   };
  
   let prompt = prompt.unwrap_or(&quot;continue&quot;);
   print!(&quot;{prompt} {prompt_tail}&quot;);
   std::io::flush().unwrap();
   
   let mut input = String::new();
   std::io::stdin().read_line(&amp;mut input)).unwrap();
   
   if !matches!(input.trim.to_lowercase().as_str(), &quot;y&quot; | &quot;yes&quot;) {
      println!(&quot;aborting&quot;);
      std::process:exit(1);
   }
}
</code></pre>
<h3>Alternatives, if applicable</h3>
<p><em>No response</em></p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @snowfoxsh on 2025-06-16 18:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-06-16 20:01</div>
            <div class="timeline-body"><p>This sounds like it is a duplicate of #1634, so closing in favor of that.  If there is a reason to keep this open, let us know!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2025-06-16 20:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:36:27 UTC
    </footer>
</body>
</html>
