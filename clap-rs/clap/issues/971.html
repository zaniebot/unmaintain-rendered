<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example supporting a &quot;slop&quot; style parse - clap-rs/clap #971</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Example supporting a &quot;slop&quot; style parse</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/971">#971</a>
        opened by <a href="https://github.com/drusellers">@drusellers</a>
        on 2017-05-27 17:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/drusellers">@drusellers</a> on 2017-05-27 17:26</div>
            <div class="timeline-body"><p>Would it be possible to get an example of using the <code>--</code> argument parsing concept?</p>
<p><code>my-command -f -p bob -- a whole bunch of stuff</code></p>
<p>Is there a way to do this already in clap? Or should I write up a feature request?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-05-29 18:42</div>
            <div class="timeline-body"><p>Absolutely, it's already possible but adding a new example would be great!</p>
<p>You can add the example to the <code>examples/</code> directory, and I'd call it something like &quot;stop_parsing_with_--&quot; or similar.</p>
<p>A quick example is:</p>
<pre><code class="language-rust">extern crate clap;

use clap::{App, Arg};

fn main() {
    let matches = App::new(&quot;myprog&quot;)
        .arg(Arg::with_name(&quot;eff&quot;)
            .short(&quot;f&quot;))
        .arg(Arg::with_name(&quot;pea&quot;)
             .short(&quot;p&quot;)
             .takes_value(true))
        .arg(Arg::with_name(&quot;slop&quot;)
             .multiple(true))
        .get_matches();

    println!(&quot;-f used: {:?}&quot;, matches.is_present(&quot;eff&quot;));
    println!(&quot;-p's value: {:?}&quot;, matches.value_of(&quot;pea&quot;));
    println!(&quot;'slops' values: {:?}&quot;, matches.values_of(&quot;slop&quot;).map(|vals| vals.collect::&lt;Vec&lt;_&gt;&gt;()));
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: examples</span> added by @kbknapp on 2017-05-29 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @kbknapp on 2017-05-29 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M: mentored</span> added by @kbknapp on 2017-05-29 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by @kbknapp on 2017-05-29 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @kbknapp on 2017-05-29 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/drusellers">@drusellers</a> on 2017-05-30 12:26</div>
            <div class="timeline-body"><p>A: Awesome - I have it working.
B: My current use case looks like <code>my-command rc abc def -- ping google.com</code>
`<PROGRAM> <COMMAND> <POS ARG...> -- &lt;SLOP...&gt;</p>
<p>Clap doesn't seem to know about <code>--</code> as it is saying that two multiple args are no bueno. I'll be adding the example shortly, but I wonder if we couldn't teach clap about <code>--</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/977.html">clap-rs/clap#977</a> on 2017-05-31 19:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2017-06-10 21:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/messense">@messense</a> on 2017-06-19 13:11</div>
            <div class="timeline-body"><p>Is it possible to make the <code>--</code> mandatory for the slop args?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/drusellers">@drusellers</a> on 2017-06-19 13:11</div>
            <div class="timeline-body"><p>I too would like that. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/messense">@messense</a> on 2017-06-19 13:13</div>
            <div class="timeline-body"><p>Without that it would be a break change if I add some other args in the future before the <code>--</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-06-19 17:05</div>
            <div class="timeline-body"><p>@messense and @drusellers</p>
<p>Look into using <a href="https://docs.rs/clap/2.24.2/clap/struct.Arg.html#method.last"><code>Arg::last</code></a> it does what you're looking for ðŸ˜„</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/991.html">clap-rs/clap#991</a> on 2017-06-23 05:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../commander-rb/commander/issues/96.html">commander-rb/commander#96</a> on 2020-07-02 13:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:33 UTC
    </footer>
</body>
</html>
