<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Could not compile `clap`. process didn't exit successfully - clap-rs/clap #1467</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Could not compile `clap`. process didn't exit successfully</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1467">#1467</a>
        opened by <a href="https://github.com/asmarcz">@asmarcz</a>
        on 2019-05-05 14:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/asmarcz">@asmarcz</a> on 2019-05-05 14:56</div>
            <div class="timeline-body"><p>Hi, I am a bit unsure where to put this issue as it happens when using <code>tether</code> crate but only <code>bindgen</code> is dependent on <code>clap</code>.</p>
<h3>Rust Version</h3>
<p>rustc 1.34.1 (fc50f328b 2019-04-24)</p>
<h3>Affected Version of clap</h3>
<p>2.33.0</p>
<h3>Bug Summary</h3>
<p>RSL won't start because it can't compile clap in VS Code extension.</p>
<h3>Actual Behavior Summary</h3>
<p>An Error is shown:</p>
<pre><code>{
	&quot;resource&quot;: &quot;/home/asmar/projects/rust/tether_test/Cargo.toml&quot;,
	&quot;owner&quot;: &quot;rust&quot;,
	&quot;severity&quot;: 8,
	&quot;message&quot;: &quot;Could not compile `clap`.\nprocess didn't exit successfully: `/home/asmar/.rustup/toolchains/stable-x86_64-unknown-linux-gnu/bin/rls --crate-name clap /home/asmar/.cargo/registry/src/github.com-1ecc6299db9ec823/clap-2.33.0/src/lib.rs --color never --crate-type lib --emit=dep-info,link -C debuginfo=2 --cfg 'feature=\&quot;ansi_term\&quot;' --cfg 'feature=\&quot;atty\&quot;' --cfg 'feature=\&quot;color\&quot;' --cfg 'feature=\&quot;default\&quot;' --cfg 'feature=\&quot;strsim\&quot;' --cfg 'feature=\&quot;suggestions\&quot;' --cfg 'feature=\&quot;vec_map\&quot;' -C metadata=92f4b88ca94d45f6 -C extra-filename=-92f4b88ca94d45f6 --out-dir /home/asmar/projects/rust/tether_test/target/rls/debug/deps -L dependency=/home/asmar/projects/rust/tether_test/target/rls/debug/deps --extern ansi_term=/home/asmar/projects/rust/tether_test/target/rls/debug/deps/libansi_term-5d0ea3e7965a4619.rlib --extern atty=/home/asmar/projects/rust/tether_test/target/rls/debug/deps/libatty-b238ee1612164c59.rlib --extern bitflags=/home/asmar/projects/rust/tether_test/target/rls/debug/deps/libbitflags-1eecf389306a3c09.rlib --extern strsim=/home/asmar/projects/rust/tether_test/target/rls/debug/deps/libstrsim-9254da5d76dd790e.rlib --extern textwrap=/home/asmar/projects/rust/tether_test/target/rls/debug/deps/libtextwrap-bcb2e577ece43bfb.rlib --extern unicode_width=/home/asmar/projects/rust/tether_test/target/rls/debug/deps/libunicode_width-19d5b772cca570d6.rlib --extern vec_map=/home/asmar/projects/rust/tether_test/target/rls/debug/deps/libvec_map-fa11111d90438a74.rlib --cap-lints allow --error-format=json --sysroot /home/asmar/.rustup/toolchains/stable-x86_64-unknown-linux-gnu` (exit code: 101)&quot;,
	&quot;startLineNumber&quot;: 1,
	&quot;startColumn&quot;: 1,
	&quot;endLineNumber&quot;: 10000,
	&quot;endColumn&quot;: 1
}
</code></pre>
<h3>Steps to Reproduce the issue</h3>
<p>Open Cargo project that has <code>tether=&quot;0.3.0&quot;</code> dependency with VS Code and Rust (rls) extension.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mooreryan">@mooreryan</a> on 2019-05-06 04:10</div>
            <div class="timeline-body"><p>I ran into a similar issue.  Posted it as an issue to <code>rls</code> here: https://github.com/rust-lang/rls/issues/1454</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mooreryan">@mooreryan</a> on 2019-05-06 04:12</div>
            <div class="timeline-body"><p>For some reason <code>rls</code> fails to compile <code>clap</code> or things that depend on it.  Interesting thing is that just compiling/running my program with <code>cargo run</code> will work, just not when VS Code tries to compile using <code>rls</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mati865">@mati865</a> on 2019-05-06 15:14</div>
            <div class="timeline-body"><p>It's not <code>clap</code> issue: https://github.com/rust-lang/rls/issues/1449#issuecomment-489026206</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mooreryan">@mooreryan</a> on 2019-05-06 20:25</div>
            <div class="timeline-body"><p>@mati865 is right.  Try the fix in https://github.com/bitflags/bitflags/issues/177, it worked for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/philipjkim">@philipjkim</a> on 2019-05-07 02:48</div>
            <div class="timeline-body"><p>How can I lock the version of bitflags, which is a dependency of clap? In my case, adding <code>bitflags = &quot;1.0.4&quot;</code> to <code>Cargo.toml</code> didn't work (<code>Cargo.lock</code> still contains bitflags 1.0.5, not 1.0.4). What worked for me is that I edited auto-generated <code>Cargo.lock</code> manually:</p>
<ol>
<li><p>replacing all occurrences of bitflags version <code>1.0.5</code> to <code>1.0.4</code> and</p>
</li>
<li><p>replacing checksum value of <code>bitflags 1.0.5</code>to the value of <code>1.0.4</code>. I found the checksum value <a href="https://github.com/rust-lang/crates.io-index/blob/master/bi/tf/bitflags">here</a></p>
<pre><code>&quot;checksum bitflags 1.0.4 (registry+https://github.com/rust-lang/crates.io-index)&quot; = &quot;228047a76f468627ca71776ecdebd732a3423081fcf5125585bcd7c49886ce12&quot;
</code></pre>
</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mooreryan">@mooreryan</a> on 2019-05-07 04:36</div>
            <div class="timeline-body"><p>Add this to your <code>Cargo.toml</code></p>
<pre><code>[dependencies]
bitflags = &quot;=1.0.4&quot;
</code></pre>
<p>Looks like you are missing the second <code>=</code> sign (<code>&quot;=1.0.4&quot;</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Dylan-DPC-zz on 2019-09-26 09:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:58 UTC
    </footer>
</body>
</html>
