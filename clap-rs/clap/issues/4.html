<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add tests - clap-rs/clap #4</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add tests</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/4">#4</a>
        opened by <a href="https://github.com/kbknapp">@kbknapp</a>
        on 2015-03-03 19:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kbknapp">@kbknapp</a></div>
            <div class="timeline-body"><p><em>No description provided.</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-03-03 19:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-03-16 15:29</div>
            <div class="timeline-body"><p>Need to add tests for subcommands</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gsquire">@gsquire</a> on 2015-03-17 04:47</div>
            <div class="timeline-body"><p>I&#x27;d be willing to help start this. How would you want the tests to be written since it parses from the command line?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-03-17 14:04</div>
            <div class="timeline-body"><p>I&#x27;d appreciate the help! There are two ways I can see going about it, one
would be to write more comprehensive simple tests (such as what&#x27;s done in
src/lib.rs) just asserting things that should or shouldn&#x27;t work.</p>
<p>A more comprehensive way, but also far more difficult, would be to write a
separate module or binary all together which uses the API to assert some of
the more internal workings (such as correct parsing of pre-determined
command line arguments).</p>
<p>I&#x27;m of the mind to say start small and grow, so if you&#x27;d like to put
together some more tests in src/lib.rs that&#x27;d be awesome! The way I have
things working right now is that if the developer (i.e. consumer of <code>clap</code>)
does something wrong it will <code>panic!</code> at runtime (things such as adding <code>.index()</code> and <code>.takes_value()</code> to the same <code>Arg</code>). This ensures it will be caught
before ever making it to the end user. But if the end user (i.e. user of
the consumer&#x27;s product) does something wrong, it should not <code>panic!</code> but
fail gracefully with an error message and usage string). So what I&#x27;m more
concerned with testing is the developer side of things, that should (or
should not) <code>panic!</code></p>
<p>On Tue, Mar 17, 2015 at 12:47 AM, Garrett Squire notifications@github.com
wrote:</p>
<blockquote>
<p>I&#x27;d be willing to help start this. How would you want the tests to be
written since it parses from the command line?</p>
<p>—
Reply to this email directly or view it on GitHub
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82103845.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/untitaker">@untitaker</a> on 2015-03-17 15:32</div>
            <div class="timeline-body"><p>Since you can&#x27;t assert that a panic is happening, I suppose there should be a separate API which doesn&#x27;t use panics, which</p>
<ul>
<li>can then be wrapped with one that does panic</li>
<li>can be used directly to assert correct detection of developer errors.</li>
</ul>
<p>Related: Clap could generally provide utilities for the dev to test its own app&#x27;s behavior. Then those could be used for testing Clap itself too.</p>
<p>On 17 March 2015 15:04:26 CET, &quot;Kevin K.&quot; notifications@github.com wrote:</p>
<blockquote>
<p>I&#x27;d appreciate the help! There are two ways I can see going about it,
one
would be to write more comprehensive simple tests (such as what&#x27;s done
in
src/lib.rs) just asserting things that should or shouldn&#x27;t work.</p>
<p>A more comprehensive way, but also far more difficult, would be to
write a
separate module or binary all together which uses the API to assert
some of
the more internal workings (such as correct parsing of pre-determined
command line arguments).</p>
<p>I&#x27;m of the mind to say start small and grow, so if you&#x27;d like to put
together some more tests in src/lib.rs that&#x27;d be awesome! The way I
have
things working right now is that if the developer (i.e. consumer of
<code>clap</code>)
does something wrong it will <code>panic!</code> at runtime, so that it will be
caught
before ever making it to the end user. But if the end user (i.e. user
of
the consumer&#x27;s product) does something wrong, it should not <code>panic!</code>
but
fail gracefully with an error message and usage string). So what I&#x27;m
more
concerned with testing is the developer side of things, that should (or
should not) <code>panic!</code></p>
<p>On Tue, Mar 17, 2015 at 12:47 AM, Garrett Squire
notifications@github.com
wrote:</p>
<blockquote>
<p>I&#x27;d be willing to help start this. How would you want the tests to be
written since it parses from the command line?</p>
<p>—
Reply to this email directly or view it on GitHub
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82103845.</p>
</blockquote>
<hr>
<p>Reply to this email directly or view it on GitHub:
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82370305</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-03-17 15:46</div>
            <div class="timeline-body"><p>You can use the #[should_panic] directive if a given function should
produce a panic (which causes the test to pass on a panic). You just have
to be careful, because things can panic for a multitude of reasons, and
it&#x27;s hard to determine why they panic&#x27;ed. I believe there is a directive to
such as #[should_panic(&quot;some string&quot;)] which checks the panic message for a
particular string, and only passes the test if the panic message contains
that string (but I can&#x27;t remember off the top of my head the exact name).</p>
<p>On Tue, Mar 17, 2015 at 11:32 AM, Markus Unterwaditzer &lt;
notifications@github.com&gt; wrote:</p>
<blockquote>
<p>Since you can&#x27;t assert that a panic is happening, I suppose there should
be a separate API which doesn&#x27;t use panics, which</p>
<ul>
<li>can then be wrapped with one that does panic</li>
<li>can be used directly to assert correct detection of developer errors.</li>
</ul>
<p>Related: Clap could generally provide utilities for the dev to test its
own app&#x27;s behavior. Then those could be used for testing Clap itself too.</p>
<p>On 17 March 2015 15:04:26 CET, &quot;Kevin K.&quot; notifications@github.com
wrote:</p>
<blockquote>
<p>I&#x27;d appreciate the help! There are two ways I can see going about it,
one
would be to write more comprehensive simple tests (such as what&#x27;s done
in
src/lib.rs) just asserting things that should or shouldn&#x27;t work.</p>
<p>A more comprehensive way, but also far more difficult, would be to
write a
separate module or binary all together which uses the API to assert
some of
the more internal workings (such as correct parsing of pre-determined
command line arguments).</p>
<p>I&#x27;m of the mind to say start small and grow, so if you&#x27;d like to put
together some more tests in src/lib.rs that&#x27;d be awesome! The way I
have
things working right now is that if the developer (i.e. consumer of
<code>clap</code>)
does something wrong it will <code>panic!</code> at runtime, so that it will be
caught
before ever making it to the end user. But if the end user (i.e. user
of
the consumer&#x27;s product) does something wrong, it should not <code>panic!</code>
but
fail gracefully with an error message and usage string). So what I&#x27;m
more
concerned with testing is the developer side of things, that should (or
should not) <code>panic!</code></p>
<p>On Tue, Mar 17, 2015 at 12:47 AM, Garrett Squire
notifications@github.com
wrote:</p>
<blockquote>
<p>I&#x27;d be willing to help start this. How would you want the tests to be
written since it parses from the command line?</p>
<p>—
Reply to this email directly or view it on GitHub
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82103845.</p>
</blockquote>
<hr>
<p>Reply to this email directly or view it on GitHub:
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82370305</p>
</blockquote>
<p>—
Reply to this email directly or view it on GitHub
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82415819.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/untitaker">@untitaker</a> on 2015-03-17 15:51</div>
            <div class="timeline-body"><p>Interesting, didn&#x27;t know that! Still believe that a results-based API would
provide some benefits (more precise assertions), tedious to implement though.</p>
<p>Is there something similar for asserting a particular stdout output?</p>
<p>On Tue, Mar 17, 2015 at 08:46:02AM -0700, Kevin K. wrote:</p>
<blockquote>
<p>You can use the #[should_panic] directive if a given function should
produce a panic (which causes the test to pass on a panic). You just have
to be careful, because things can panic for a multitude of reasons, and
it&#x27;s hard to determine why they panic&#x27;ed. I believe there is a directive to
such as #[should_panic(&quot;some string&quot;)] which checks the panic message for a
particular string, and only passes the test if the panic message contains
that string (but I can&#x27;t remember off the top of my head the exact name).</p>
<p>On Tue, Mar 17, 2015 at 11:32 AM, Markus Unterwaditzer &lt;
notifications@github.com&gt; wrote:</p>
<blockquote>
<p>Since you can&#x27;t assert that a panic is happening, I suppose there should
be a separate API which doesn&#x27;t use panics, which</p>
<ul>
<li>can then be wrapped with one that does panic</li>
<li>can be used directly to assert correct detection of developer errors.</li>
</ul>
<p>Related: Clap could generally provide utilities for the dev to test its
own app&#x27;s behavior. Then those could be used for testing Clap itself too.</p>
<p>On 17 March 2015 15:04:26 CET, &quot;Kevin K.&quot; notifications@github.com
wrote:</p>
<blockquote>
<p>I&#x27;d appreciate the help! There are two ways I can see going about it,
one
would be to write more comprehensive simple tests (such as what&#x27;s done
in
src/lib.rs) just asserting things that should or shouldn&#x27;t work.</p>
<p>A more comprehensive way, but also far more difficult, would be to
write a
separate module or binary all together which uses the API to assert
some of
the more internal workings (such as correct parsing of pre-determined
command line arguments).</p>
<p>I&#x27;m of the mind to say start small and grow, so if you&#x27;d like to put
together some more tests in src/lib.rs that&#x27;d be awesome! The way I
have
things working right now is that if the developer (i.e. consumer of
<code>clap</code>)
does something wrong it will <code>panic!</code> at runtime, so that it will be
caught
before ever making it to the end user. But if the end user (i.e. user
of
the consumer&#x27;s product) does something wrong, it should not <code>panic!</code>
but
fail gracefully with an error message and usage string). So what I&#x27;m
more
concerned with testing is the developer side of things, that should (or
should not) <code>panic!</code></p>
<p>On Tue, Mar 17, 2015 at 12:47 AM, Garrett Squire
notifications@github.com
wrote:</p>
<blockquote>
<p>I&#x27;d be willing to help start this. How would you want the tests to be
written since it parses from the command line?</p>
<p>—
Reply to this email directly or view it on GitHub
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82103845.</p>
</blockquote>
<hr>
<p>Reply to this email directly or view it on GitHub:
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82370305</p>
</blockquote>
<p>—
Reply to this email directly or view it on GitHub
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82415819.</p>
</blockquote>
<hr>
<p>Reply to this email directly or view it on GitHub:
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82424729</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-03-17 15:57</div>
            <div class="timeline-body"><p>I totally agree. And that&#x27;s where I&#x27;d eventually like to get, it&#x27;s just
harder to implement, like you said.</p>
<blockquote>
<p>Is there something similar for asserting a particular stdout output?</p>
</blockquote>
<p>I&#x27;m not sure, I haven&#x27;t seen anything specific like that, but it&#x27;d be nice.
I can think of hacky ways to do that, but all involve another binary or
module. I currently have a binary, named &quot;fake&quot; which I use to test various
things, but it&#x27;s not at all automated, just something I use to double check
myself. You&#x27;d almost have to have fake&#x27;s test (or whatever binary) call
itself, monitor the output, and assert based off the findings...I&#x27;ll have
to think on that some more.</p>
<p>If anyone has a good way to go about this, I&#x27;m all ears!</p>
<p>On Tue, Mar 17, 2015 at 11:51 AM, Markus Unterwaditzer &lt;
notifications@github.com&gt; wrote:</p>
<blockquote>
<p>Interesting, didn&#x27;t know that! Still believe that a results-based API would
provide some benefits (more precise assertions), tedious to implement
though.</p>
<p>Is there something similar for asserting a particular stdout output?</p>
<p>On Tue, Mar 17, 2015 at 08:46:02AM -0700, Kevin K. wrote:</p>
<blockquote>
<p>You can use the #[should_panic] directive if a given function should
produce a panic (which causes the test to pass on a panic). You just have
to be careful, because things can panic for a multitude of reasons, and
it&#x27;s hard to determine why they panic&#x27;ed. I believe there is a directive
to
such as #[should_panic(&quot;some string&quot;)] which checks the panic message
for a
particular string, and only passes the test if the panic message contains
that string (but I can&#x27;t remember off the top of my head the exact name).</p>
<p>On Tue, Mar 17, 2015 at 11:32 AM, Markus Unterwaditzer &lt;
notifications@github.com&gt; wrote:</p>
<blockquote>
<p>Since you can&#x27;t assert that a panic is happening, I suppose there
should
be a separate API which doesn&#x27;t use panics, which</p>
<ul>
<li>can then be wrapped with one that does panic</li>
<li>can be used directly to assert correct detection of developer errors.</li>
</ul>
<p>Related: Clap could generally provide utilities for the dev to test its
own app&#x27;s behavior. Then those could be used for testing Clap itself
too.</p>
<p>On 17 March 2015 15:04:26 CET, &quot;Kevin K.&quot; notifications@github.com
wrote:</p>
<blockquote>
<p>I&#x27;d appreciate the help! There are two ways I can see going about it,
one
would be to write more comprehensive simple tests (such as what&#x27;s done
in
src/lib.rs) just asserting things that should or shouldn&#x27;t work.</p>
<p>A more comprehensive way, but also far more difficult, would be to
write a
separate module or binary all together which uses the API to assert
some of
the more internal workings (such as correct parsing of pre-determined
command line arguments).</p>
<p>I&#x27;m of the mind to say start small and grow, so if you&#x27;d like to put
together some more tests in src/lib.rs that&#x27;d be awesome! The way I
have
things working right now is that if the developer (i.e. consumer of
<code>clap</code>)
does something wrong it will <code>panic!</code> at runtime, so that it will be
caught
before ever making it to the end user. But if the end user (i.e. user
of
the consumer&#x27;s product) does something wrong, it should not <code>panic!</code>
but
fail gracefully with an error message and usage string). So what I&#x27;m
more
concerned with testing is the developer side of things, that should
(or
should not) <code>panic!</code></p>
<p>On Tue, Mar 17, 2015 at 12:47 AM, Garrett Squire
notifications@github.com
wrote:</p>
<blockquote>
<p>I&#x27;d be willing to help start this. How would you want the tests to
be
written since it parses from the command line?</p>
<p>—
Reply to this email directly or view it on GitHub
&lt;<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82103845
.</p>
</blockquote>
<hr>
<p>Reply to this email directly or view it on GitHub:
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82370305</p>
</blockquote>
<p>—
Reply to this email directly or view it on GitHub
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82415819.</p>
</blockquote>
<hr>
<p>Reply to this email directly or view it on GitHub:
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82424729</p>
</blockquote>
<p>—
Reply to this email directly or view it on GitHub
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82429895.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/untitaker">@untitaker</a> on 2015-03-17 16:18</div>
            <div class="timeline-body"><p>The CLI framework <a href="http://click.pocoo.org/3/testing/">click</a> for Python has its
own tools for writing application tests. They monkeypatch a lot of things
(sys.stdout, sys.argv), I think some of those ideas are basically
unimplementable in Rust.</p>
<p>Using subprocesses with something like <code>expect</code> would be a language-independent
way to go about this, but such tests come with a huge performance penalty.</p>
<p>OTOH I think we wouldn&#x27;t actually need as much test coverage as one would
require in a dynamic language. Mostly logic-intensive things like the help
output formatter require extensive tests, but that can be esentially a function
that takes an app and returns a string.</p>
<p>On Tue, Mar 17, 2015 at 08:57:08AM -0700, Kevin K. wrote:</p>
<blockquote>
<p>I totally agree. And there&#x27;s where I&#x27;d eventually like to get, it&#x27;s just
harder to implement, like you said.</p>
<p>I&#x27;m not sure, I haven&#x27;t seen anything specific like that, but it&#x27;d be nice.
I can think of hacky ways to do that, but all involve another binary or
module. I currently have a binary, named &quot;fake&quot; which I use to test various
things, but it&#x27;s not at all automated, just something I use to double check
myself. You&#x27;d almost have to have fake&#x27;s test (or whatever binary) call
itself, monitor the output, and assert based off the findings...I&#x27;ll have
to think on that some more.</p>
<p>If anyone has a good way to go about this, I&#x27;m all ears!</p>
<p>On Tue, Mar 17, 2015 at 11:51 AM, Markus Unterwaditzer &lt;
notifications@github.com&gt; wrote:</p>
<blockquote>
<p>Interesting, didn&#x27;t know that! Still believe that a results-based API would
provide some benefits (more precise assertions), tedious to implement
though.</p>
<p>Is there something similar for asserting a particular stdout output?</p>
<p>On Tue, Mar 17, 2015 at 08:46:02AM -0700, Kevin K. wrote:</p>
<blockquote>
<p>You can use the #[should_panic] directive if a given function should
produce a panic (which causes the test to pass on a panic). You just have
to be careful, because things can panic for a multitude of reasons, and
it&#x27;s hard to determine why they panic&#x27;ed. I believe there is a directive
to
such as #[should_panic(&quot;some string&quot;)] which checks the panic message
for a
particular string, and only passes the test if the panic message contains
that string (but I can&#x27;t remember off the top of my head the exact name).</p>
<p>On Tue, Mar 17, 2015 at 11:32 AM, Markus Unterwaditzer &lt;
notifications@github.com&gt; wrote:</p>
<blockquote>
<p>Since you can&#x27;t assert that a panic is happening, I suppose there
should
be a separate API which doesn&#x27;t use panics, which</p>
<ul>
<li>can then be wrapped with one that does panic</li>
<li>can be used directly to assert correct detection of developer errors.</li>
</ul>
<p>Related: Clap could generally provide utilities for the dev to test its
own app&#x27;s behavior. Then those could be used for testing Clap itself
too.</p>
<p>On 17 March 2015 15:04:26 CET, &quot;Kevin K.&quot; notifications@github.com
wrote:</p>
<blockquote>
<p>I&#x27;d appreciate the help! There are two ways I can see going about it,
one
would be to write more comprehensive simple tests (such as what&#x27;s done
in
src/lib.rs) just asserting things that should or shouldn&#x27;t work.</p>
<p>A more comprehensive way, but also far more difficult, would be to
write a
separate module or binary all together which uses the API to assert
some of
the more internal workings (such as correct parsing of pre-determined
command line arguments).</p>
<p>I&#x27;m of the mind to say start small and grow, so if you&#x27;d like to put
together some more tests in src/lib.rs that&#x27;d be awesome! The way I
have
things working right now is that if the developer (i.e. consumer of
<code>clap</code>)
does something wrong it will <code>panic!</code> at runtime, so that it will be
caught
before ever making it to the end user. But if the end user (i.e. user
of
the consumer&#x27;s product) does something wrong, it should not <code>panic!</code>
but
fail gracefully with an error message and usage string). So what I&#x27;m
more
concerned with testing is the developer side of things, that should
(or
should not) <code>panic!</code></p>
<p>On Tue, Mar 17, 2015 at 12:47 AM, Garrett Squire
notifications@github.com
wrote:</p>
<blockquote>
<p>I&#x27;d be willing to help start this. How would you want the tests to
be
written since it parses from the command line?</p>
<p>—
Reply to this email directly or view it on GitHub
&lt;<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82103845
.</p>
</blockquote>
<hr>
<p>Reply to this email directly or view it on GitHub:
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82370305</p>
</blockquote>
<p>—
Reply to this email directly or view it on GitHub
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82415819.</p>
</blockquote>
<hr>
<p>Reply to this email directly or view it on GitHub:
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82424729</p>
</blockquote>
<p>—
Reply to this email directly or view it on GitHub
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82429895.</p>
</blockquote>
<hr>
<p>Reply to this email directly or view it on GitHub:
<a href="https://github.com/kbknapp/clap-rs/issues/4">kbknapp/clap-rs#4</a>#issuecomment-82433398</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gsquire">@gsquire</a> on 2015-03-17 16:25</div>
            <div class="timeline-body"><p>For now, I think I could add some more tests to <code>src/lib.rs</code> as suggested. How would you all feel about a separate test script that can build and use a binary compiled with Clap and then run it with various args and check the results from there?</p>
<p>I think that would be simple enough to build with Python or Ruby or whatever else sounded appropriate. That&#x27;s just my idea.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-03-17 16:48</div>
            <div class="timeline-body"><p>@gsquire Yeah I&#x27;m good with that. The only thing I want to avoid is a huge convoluted system that takes a week to wrap your brain around before knowing how to simply test a library. But I&#x27;m all for a script that runs some automated testing.</p>
<p>I&#x27;d lean to towards Python if possible, as that&#x27;s the background I come from, and I know very little (read none) Ruby.</p>
<p>@untitaker I&#x27;m not overly concerned with the performance of the tests, unless it gets ridiculous. The end user will never have to worry about the tests, they&#x27;re more for our benefit to know we didn&#x27;t break something along the way. And I totally agree that we wouldn&#x27;t need quite as comprehensive a test suite, because a fair amount of the checking is already ensured by the compiler.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-03-24 15:24</div>
            <div class="timeline-body"><p>The solution as it stands (or that I&#x27;m currently adding) is:</p>
<ol>
<li><p>Test internal workings (such as <em>building</em> an application with <code>clap</code>)</p>
<p>a. ~~Use src/lib.rs tests, maybe at some point move to a tests dir if lib.rs gets too cluttered (not there yet)~~</p>
<p>b. This is done-ish, but needs some more tests</p>
</li>
<li><p>Test external workings (such as <em>using</em> an application built with <code>clap</code>)</p>
<p>a. ~~Add a <code>claptests</code> application inside this repo~~</p>
<p>b. ~~Add a python script to run <code>claptests</code> multiple times with various options and verify the output~~</p>
</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-03-26 02:00</div>
            <div class="timeline-body"><p>~~Comparing command output is turning out to be quite difficult due to unicode...I haven&#x27;t figured it out yet, but then I also have spent much time.~~</p>
<p>My goal is to have a python script which runs various commands checking the output against a known good. This script should be run when running <code>make test</code> inside claptests. Checking small outputs should be easy, but large chunks such as the help message is difficult.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-03-26 15:25</div>
            <div class="timeline-body"><p>I finally figured it out. It&#x27;s becase I don&#x27;t sort the list of options or flags when printing help, so the order sometimes changes between runs. I don&#x27;t want to sort options for performance reason (unless at a later date people just really want sorted options whe viewing the help info), so I&#x27;ll simply count the number of lines printed and assume good.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gsquire">@gsquire</a> on 2015-03-29 23:45</div>
            <div class="timeline-body"><p>@kbknapp Are you working on one currently? If you want to add it to the repository I can help add to it. Otherwise I will keep plugging away on my own.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-03-30 00:02</div>
            <div class="timeline-body"><p>@gsquire Not currently. I&#x27;ve just got a simple python script which runs a few tests to ensure I haven&#x27;t broken anything new upon a commit. (inside the claptests/ run <code>make test</code>) although, I still need to add quite a few features to be tested, it&#x27;s still the bare minimum. If you&#x27;ve got something you&#x27;d like to incorporate I&#x27;ll by all means take a look at it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#62</a> on 2015-04-05 19:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-04-14 00:40</div>
            <div class="timeline-body"><p>I&#x27;m going to go ahead and close this issue, as I&#x27;m decently happy with the testing I currently have. Granted I could always use more, so this isn&#x27;t to stop contributions to the tests...just so I don&#x27;t have an issue that in all honesty could be open forever.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-04-14 00:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:56:01 UTC
    </footer>
</body>
</html>
