<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support trailing comma for arg_enum!() - clap-rs/clap #1097</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support trailing comma for arg_enum!()</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1097">#1097</a>
        opened by <a href="https://github.com/behnam">@behnam</a>
        on 2017-11-07 20:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/behnam">@behnam</a> on 2017-11-07 20:42</div>
            <div class="timeline-body"><p>Would be great to support trailing comma for <code>arg_enum!()</code> macro, as Rust itself does and this error got me spend a few minutes trying to figure out if I got something (else) wrong in my definition.</p>
<p>Ref: <a href="https://docs.rs/clap/2.27.1/clap/macro.arg_enum.html">https://docs.rs/clap/2.27.1/clap/macro.arg_enum.html</a></p>
<h3>Rust Version</h3>
<p>rustc 1.23.0-nightly (e340996ff 2017-11-02)</p>
<h3>Affected Version of clap</h3>
<p>2.27.1</p>
<h3>Expected Behavior Summary</h3>
<p>Support trailing comma in <code>arg_enum!()</code>, like this:</p>
<pre><code class="language-rust">arg_enum!{
    #[derive(Debug)]
    pub enum Foo {
        Bar,
        Baz,
        Qux,
    }
}
</code></pre>
<h3>Actual Behavior Summary</h3>
<p>A trailing comma in <code>enum</code> definition results in this error:</p>
<pre><code>error: no rules expected the token `}`
</code></pre>
<h3>Steps to Reproduce the issue</h3>
<p>Add the above example to a clap app file.</p>
<h3>Sample Code or Link to Sample Code</h3>
<p>See above.</p>
<h3>Debug output</h3>
<p>N/A</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-09 03:53</div>
            <div class="timeline-body"><p>Thanks for filing this, I keep meaning to do this and have never actually implemented it! :stuck_out_tongue_winking_eye:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: macros</span> added by @kbknapp on 2017-11-09 03:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @kbknapp on 2017-11-09 03:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @kbknapp on 2017-11-09 03:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M: mentored</span> added by @kbknapp on 2017-11-09 03:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> added by @kbknapp on 2017-11-09 03:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @kbknapp on 2017-11-09 03:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @kbknapp on 2017-11-09 03:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1124.html">clap-rs/clap#1124</a> on 2017-12-07 00:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2017-12-07 21:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../TeXitoi/structopt/issues/101.html">TeXitoi/structopt#101</a> on 2018-04-25 17:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/im-0">@im-0</a> on 2018-04-25 18:49</div>
            <div class="timeline-body"><p>This does not work in current release (v2.31.2) with non-pub enums. Example:</p>
<pre><code class="language-rust">arg_enum! {
    #[derive(Debug)]
    enum OutputFormat {
        PrettyJSON,
        JSON,
    }
}
</code></pre>
<p>Error:</p>
<pre><code>error: no rules expected the token `:`
  --&gt; zicsv-tool/src/main.rs:43:1
   |
43 | / arg_enum! {
44 | |     #[derive(Debug)]
45 | |     enum OutputFormat {
46 | |         PrettyJSON,
47 | |         JSON,
48 | |     }
49 | | }
   | |_^
   |
   = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)
</code></pre>
<p>Fix was already merged in master: kbknapp/clap-rs#1244.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1800.html">clap-rs/clap#1800</a> on 2020-04-09 09:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:40 UTC
    </footer>
</body>
</html>
