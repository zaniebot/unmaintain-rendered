<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Line breaking is inconsistent - clap-rs/clap #1194</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Line breaking is inconsistent</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/1194">#1194</a>
        opened by <a href="https://github.com/spacekookie">@spacekookie</a>
        on 2018-02-25 01:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/spacekookie">@spacekookie</a> on 2018-02-25 01:32</div>
            <div class="timeline-body"><h3>System info</h3>
<ul>
<li>rustc 1.25.0-nightly (b1f8e6fb0 2018-02-22)</li>
<li>clap 2.30.0</li>
</ul>
<h3>Expected Behavior Summary</h3>
<p>I've noticed some inconsistencies in the line breaking behaviour for long descriptions. When creating a subcommand or argument I would expect it always to wrap to the size of the terminal, then pad the text to line up with the previous line.</p>
<h3>Actual Behavior Summary</h3>
<p>In actuality it sometimes feels arbitrary how lines are wrapped, almost like some parameters aren't being considered.</p>
<ol>
<li>I've noticed that when my terminal is ~80 characters that long lines always overflow into the next line without being padded</li>
<li>I've also noticed that adding additional flags like <code>long</code> and <code>short</code> doesn't impact the line breaking distance.</li>
</ol>
<h3>Steps to Reproduce the issue</h3>
<p>Looking at some examples...</p>
<pre><code class="language-rust">SubCommand::with_name(&quot;cmd&quot;)
  .about(&quot;A command that does things with much ferocity&quot;)
  .arg(
      Arg::with_name(&quot;type&quot;)
          .help(&quot;You can choose between different things that do almost \
          different things but not really because I'm lazy :)&quot;)
          .possible_values(&amp;[&quot;meh&quot;, &quot;awesome&quot;])
          .default_value(&quot;meh&quot;),
  ),
</code></pre>
<p>It generates the following ouput on an 80-character wide terminal</p>
<p><img src="https://i.imgur.com/nJaVXyH.png" alt="" /></p>
<p>When we add some more flags to the argument it get's even more funky :sweat_smile:</p>
<pre><code class="language-rust">SubCommand::with_name(&quot;cmd&quot;)
  .about(&quot;A command that does things with much ferocity&quot;)
  .arg(
      Arg::with_name(&quot;type&quot;)
          .short(&quot;t&quot;)
          .long(&quot;typical-argument-name&quot;)
          .help(&quot;You can choose between different things that do almost \
          different things but not really because I'm lazy :)&quot;)
          .possible_values(&amp;[&quot;meh&quot;, &quot;awesome&quot;])
          .default_value(&quot;meh&quot;),
  ),
</code></pre>
<p><img src="https://i.imgur.com/MpfcAx3.png" alt="" /></p>
<p>Granted, my use cases here <em>are</em> kinda corner-case-y. But it would be cool if clap could still handle them</p>
<h3>Debug output</h3>
<p>I only ran the last example I gave with the debug output on. It can be found here: https://pastebin.com/CVt2xgG9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-02-25 01:47</div>
            <div class="timeline-body"><p>As per the gutter discussion I'm on mobile will check this out tomorrow  :) thanks for reporting!</p>
<p>Also, which OS are you using, and did you compile with any non-default cargo features?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2018-02-25 17:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-02-25 17:14</div>
            <div class="timeline-body"><p>For those that find this issue, the fix is to compile with the <code>wrap_help</code> feature.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:32 UTC
    </footer>
</body>
</html>
