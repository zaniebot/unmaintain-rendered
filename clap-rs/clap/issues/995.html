<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bug with hyphenated long arguments using macro  - clap-rs/clap #995</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Bug with hyphenated long arguments using macro</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/995">#995</a>
        opened by <a href="https://github.com/salpalvv">@salpalvv</a>
        on 2017-07-05 19:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/salpalvv">@salpalvv</a></div>
            <div class="timeline-body">Rust Version
<p>rustc 1.20.0-nightly (2fbba5bdb 2017-07-04)</p>
Affected Version of clap
<p>&quot;clap 2.25.0 (registry+https://github.com/rust-lang/crates.io-index)&quot;,
name = &quot;clap&quot;
&quot;checksum clap 2.25.0 (registry+https://github.com/rust-lang/crates.io-index)&quot; = &quot;867a885995b4184be051b70a592d4d70e32d7a188db6e8dff626af286a962771&quot;</p>
Expected Behavior Summary
<p>hyphenated long arguments should work while using macro</p>
<pre><code>(@arg test: -m --mattermost-channel ... &quot;this should work&quot;)
</code></pre>
<p><code>-m</code> and <code>--mattermost-channel</code> should be valid</p>
Actual Behavior Summary
<p><code>-m</code> is not registering.
<code>--mattermost</code> and <code>-c</code> are considered the valid arguments
I am guessing the <code>-channel</code> is getting picked up as <code>-c</code> for short and overriding <code>-m</code></p>
<p>setting <code>.short(&quot;m)</code> and <code>.long(&quot;mattermost-channel&quot;)</code> in builder pattern works fine</p>
Steps to Reproduce the issue
<p>use macro and a hyphenated command</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/halostatue">@halostatue</a> on 2017-07-15 16:24</div>
            <div class="timeline-body"><p>The macro docs suggest that your code should be:</p>
<p><code>(@arg test: -m --&quot;mattermost-channel&quot; ... &quot;this should work&quot;)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/salpalvv">@salpalvv</a> on 2017-07-19 21:05</div>
            <div class="timeline-body"><p><code>(@arg test: -m --(&quot;mattermost-channel&quot;) ... &quot;this should work&quot;)</code> with the parens seems to work per the docs.</p>
<p>Perhaps this could be made a little more visible in the docs. I&#x27;m going to close this since it&#x27;s a &quot;limitation of rust macros&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/salpalvv">@salpalvv</a> on 2017-07-19 21:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:56:55 UTC
    </footer>
</body>
</html>
