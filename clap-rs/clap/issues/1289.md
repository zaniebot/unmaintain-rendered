```yaml
number: 1289
title: "Help doesn't print help for subcommands"
type: issue
state: closed
author: kirillbobyrev
labels: []
assignees: []
created_at: 2018-06-07T18:25:11Z
updated_at: 2018-08-02T03:30:24Z
url: https://github.com/clap-rs/clap/issues/1289
synced_at: 2026-01-10T01:57:42Z
```

# Help doesn't print help for subcommands

---

_Issue opened by @kirillbobyrev on 2018-06-07 18:25_

Help message for subcommands doesn't work as expected: despite being provided, `version`, `about` and `author` do not appear upon calling `binary subcommand --help`. Also, none of the options and flags which can be used with subcommand appear in the subcommand help message.

As outlined in the [subcommands example](https://github.com/kbknapp/clap-rs/blob/master/examples/08_subcommands.rs#L30), subcommands can have their own `author`, `version`, `about` and options. However, the only thing that actually appears in the `binary subcommand --help` output is the `help` of the corresponding subcommand, which is probably incorrect behaviour.

### Rust Version

rustc 1.26.2 (594fb253c 2018-06-01)

### Affected Version of clap

clap 2.31.2

### Expected Behavior Summary

My understanding is that calling `binary subcommand --help` would output a message similar to the one generated for upper-level command. However, this is not the case in my setup.

### Actual Behavior Summary

As seen below, the upper-level help message looks valid, but help messages for both subcommands do not have any

```
[I] kbobyrev@archlinux ~/d/p/minimal> cargo run -- --help
minimal 0.0.1
Kirill Bobyrev <kbobyrev.opensource@gmail.com>
Minimal project for reproducing clap-rs bug
USAGE:
    minimal [SUBCOMMAND]
FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information
SUBCOMMANDS:
    code     Minimal project for reproducing clap-rs bug
    help     Prints this message or the help of the given subcommand(s)
    sleep    Minimal project for reproducing clap-rs bug
```

```
[I] kbobyrev@archlinux ~/d/p/minimal> cargo run -- code --help
code for a while
```

```
[I] kbobyrev@archlinux ~/d/p/minimal> cargo run -- sleep --help
sleep for a while
```

### Steps to Reproduce the issue

* Build the project via `cargo build`
* Run `cargo run -- --help` to see the upper-level help message
* Run `cargo run -- code --help` to see first subcommand's help message
* Run `cargo run -- sleep --help` to see second subcommand's help message

### Link to minimal code for reproducing the issue and debug output

https://gist.github.com/kbobyrev/95ca5697ce602cca4666884090ad8b8b

---

_Comment by @kbknapp on 2018-06-10 18:41_

I would need to see the code you're using, do you have a link to it? I can't build your project otherwise to test it.

---

_Comment by @kirillbobyrev on 2018-06-11 21:07_

Hi @kbknapp!

There's a link on the bottom, the gist contains both code and debug output:

https://gist.github.com/kbobyrev/95ca5697ce602cca4666884090ad8b8b

---

_Comment by @kbknapp on 2018-06-12 13:10_

Ah, sorry! I usually don't look at the debug output unless I'm unsure what's going on :stuck_out_tongue_winking_eye: 

This is *extremely* strange though. I'm digging in now!

---

_Comment by @kbknapp on 2018-06-12 13:18_

Ok, I found the issue and it's something I overlooked.

If you use [`App::help`](https://docs.rs/clap/2.31.2/clap/struct.App.html#method.help) as you're doing in [line 10](https://gist.github.com/kbobyrev/95ca5697ce602cca4666884090ad8b8b#file-main-rs-L10) and [line 30](https://gist.github.com/kbobyrev/95ca5697ce602cca4666884090ad8b8b#file-main-rs-L30) it *replaces* the auto-generated help message with whatever you specify. 

I know this can be confused with `Arg::help` which sets the help message an argument. However, for subcommands you must use [`App::about`](https://docs.rs/clap/2.31.2/clap/struct.App.html#method.about) and [`App::long_about`](https://docs.rs/clap/2.31.2/clap/struct.App.html#method.long_about) in order to only set the small "about/help message" and not replace the entire generated message.

---

_Closed by @kbknapp on 2018-06-12 13:18_

---

_Label `T: RFC / question` added by @kbknapp on 2018-06-12 13:18_

---

_Comment by @kbknapp on 2018-06-12 13:19_

Also, in the v3 branch which is being worked on for release, these methods are more intuitively named :wink:

---

_Comment by @kirillbobyrev on 2018-06-12 15:54_

@kbknapp ah, okay, I see! Thank you very much for looking into this and clarifying!

I'm so sorry this was my misuse of the library, I spent some time investigating this issue myself but I couldn't figure out what you pointed out.

Thank you!

---

_Comment by @kbknapp on 2018-06-12 23:59_

No worries, I'm glad I could help :smile: Feel free to ping me any time with a question, or ask in the Gitter chat linked at the top of the readme

---
