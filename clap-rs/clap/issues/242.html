<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deprecated features; use attributes - clap-rs/clap #242</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Deprecated features; use attributes</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/242">#242</a>
        opened by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a>
        on 2015-09-09 08:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/WildCryptoFox">@WildCryptoFox</a></div>
            <div class="timeline-body"><p>Rust has stability markers.  <code>#[$stability_level] $ITEM</code>:</p>
<ul>
<li><code>#[stable]</code>: Stable and officially supported for this major release</li>
<li><code>#[unstable]</code>: Exists in this major release, but is not officially stable and may become deprecated.</li>
<li>~~<code>#[experimental]</code>: Exists, but is neither stable, unstable, nor deprecated~~</li>
<li><code>#[deprecated]</code>: Existed as stable or unstable in a previous major release, has been marked for removal for the next major</li>
</ul>
<p>An important note here is that rust will warn any consumers who use the deprecated, experimental, or unstable functions.</p>
<hr />
<p>This was just off the top of my head, things may have changed. IIRC something was happening with experimental; maybe removed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Depricated features; use attributes" to "Deprecated features; use attributes" by @WildCryptoFox on 2015-09-09 08:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a> on 2015-09-09 08:50</div>
            <div class="timeline-body"><p>Appears to have been migrated to a compiler feature <code>#![feature(staged_api)] #![staged_api]</code>. Only gives <code>stable</code> <code>unstable</code> and <code>deprecated</code> stability markers.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Vinatorul">@Vinatorul</a> on 2015-09-09 08:52</div>
            <div class="timeline-body"><p>This is good idea, but, I think it will not work on <code>stable</code> and <code>beta</code> rust, isn't it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a> on 2015-09-09 09:21</div>
            <div class="timeline-body"><p>Anything <code>#[stable]</code> will work fine. Anything <code>#[unstable]</code> should be rejected by <code>stable</code> and <code>beta</code>, while <code>nightly</code> should allow the usage of these.</p>
<p>Rust stops the consumption of these marked items, it doesn't prevent their existence. They would not prevent building on stable (unless a stable function attempts to use an unstable or deprecated function).</p>
<h2></h2>
<p>Thanks @Vinatorul for mentioning this, I only use nightly and so forgot about this detail.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Vinatorul">@Vinatorul</a> on 2015-09-09 10:30</div>
            <div class="timeline-body"><blockquote>
<p>unless a stable function attempts to use an unstable or deprecated function</p>
</blockquote>
<p>What will happend when user will try to use <code>deprecated</code> function on <code>stable</code>? Compilation error, or warning?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a> on 2015-09-09 10:48</div>
            <div class="timeline-body"><p>Good question, but sadly I can't test, I only have nightly. If you have stable rust - you could try to consume something deprecated from <code>std</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-09-09 11:46</div>
            <div class="timeline-body"><p>An early version of <code>clap</code> used these, but the Rust team quickly stated these were only for internal Rust use. We've asked about allowing them outside of <code>std</code> which worked, but was advised against. I haven't revisited the topic in a long time, but if this is now good to go outside of <code>std</code> I'm all for it and think it's a great idea!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a> on 2015-09-09 12:00</div>
            <div class="timeline-body"><p>I must have missed this discussion. Thanks for the note. Currently I'm trying to add them to my own code and for some reason; they don't appear to even want to be applied to my functions.... I also can't find any documentation past http://doc.rust-lang.org/reference.html.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-09-09 12:07</div>
            <div class="timeline-body"><p>I don't remember where the conversation took place, I think it was Reddit, and this was pre 1.0. Steveklabnik was the one with &quot;official guidance&quot; although there were quite a few people wanting to use something like these stability attributes. I believe even burntsushi was using them, who is now on the official libs team....so I have no idea what the current status of this is, or if it's even been brought back up.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a> on 2015-09-09 12:24</div>
            <div class="timeline-body"><p>The section that I referenced in the link above; shows that the feature remains and <strong>SHOULD</strong> be accessible to crates... But attempting to use so far, not having any luck.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-09-10 04:11</div>
            <div class="timeline-body"><p>Awesome, I'll try and look into this more over the next few days too. It'd be great if we can start incorporating these!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WildCryptoFox">@WildCryptoFox</a> on 2015-09-10 08:59</div>
            <div class="timeline-body"><p>https://github.com/rust-lang/rust/blob/9165a4e2dcaaa878a33379c6ff097c68f0ca0485/src/test/auxiliary/inherited_stability.rs</p>
<pre><code class="language-rust">#![feature(staged_api)]
#![staged_api]
// Default everything to unstable with issue 0.
// Issue 0: Milestone 1.5.0 checklist
#![unstable(feature = &quot;clap&quot;, issue = &quot;0&quot;)]

// This function is stable
#[stable(feature = &quot;clap&quot;, since = &quot;1.4.0&quot;)]
fn stable() { /* .. */ }

// This function was stable in 1.2.0. Since 1.4.0 it has been removed.
#[stable(feature = &quot;clap&quot;, since = &quot;1.2.0&quot;)]
#[deprecated(since = &quot;1.4.0&quot;)] // In favor of???
fn deprecated_function_since_1_4_0(foo: Foo) {
    // ...
}
</code></pre>
<p>Attempting to use <code>deprecated_function_since_1_4_0</code> will cause the following <strong>WARNING</strong>.</p>
<pre><code>warning: use of deprecated item, #[warn(deprecated)] on by default
</code></pre>
<h2>Implementation</h2>
<p>Every stable item needs to have it's stability set. Unstable can carry over as a crate wide default, stable does not have this effect.</p>
<h2>Consumers</h2>
<p>Consumers should be able to just use the crate such that they only use stable features. If an unstable feature is used, <code>#![feature(clap)]</code> is required to unlock the <code>unstable</code> items.  If the code already uses a deprecated function, a warning will inform for the deprecation at compile time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-09-10 11:54</div>
            <div class="timeline-body"><p>Huge :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @kbknapp on 2015-09-10 18:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @kbknapp on 2015-09-10 18:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> added by @kbknapp on 2015-09-10 18:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E: tedious</span> added by @kbknapp on 2015-09-10 18:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2016-03-18 01:20</div>
            <div class="timeline-body"><p>The deprecated attribute should be stable now for everyone's use. There's also no deprecated items in clap right now, so this closed. All future depreciations will use said attribute.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2016-03-18 01:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:46:24 UTC
    </footer>
</body>
</html>
