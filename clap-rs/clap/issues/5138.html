<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combine long_flag and long_flag_aliases into one API? - clap-rs/clap #5138</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Combine long_flag and long_flag_aliases into one API?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/clap-rs/clap/issues/5138">#5138</a>
        opened by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a>
        on 2023-09-25 20:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a> on 2023-09-25 20:16</div>
            <div class="timeline-body"><p>Clap currently has https://docs.rs/clap/latest/clap/struct.Command.html#method.long_flag and https://docs.rs/clap/latest/clap/struct.Command.html#method.long_flag_aliases where <code>long_flag_aliases</code> does nothing without <code>long_flag</code> being specified. One could add a runtime warning/crash, but it's usually better to make bad states unrepresentable. ~~The proposed solution is to unify these APIs into a <code>long_flags</code> method.~~</p>
<p>Actually, the reason the &quot;alias&quot; method variants exist is to allow having hidden long flags that don't show up in help. I think the next best solution to use a builder pattern to only allow calling the alias variants after having specified the base long flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-builder</span> added by @epage on 2023-09-25 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @epage on 2023-09-25 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M-breaking-change</span> added by @epage on 2023-09-25 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-decision</span> added by @epage on 2023-09-25 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-decision</span> removed by @epage on 2023-09-25 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by @epage on 2023-09-25 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-09-25 20:48</div>
            <div class="timeline-body"><p>Not finding an issue for this but I believe there has been a request to have a subcommand flag without a name.  This would mean we need a canonical <code>long_flag</code>.</p>
<blockquote>
<p>I think the next best solution to use a builder pattern to only allow calling the alias variants after having specified the base long flag.</p>
</blockquote>
<p>Without what I stated above, hidden doesn't really make a difference.  The desire to force a visible flag when dealing with invisible aliases applies just as much to Args.</p>
<blockquote>
<p>I think the next best solution to use a builder pattern to only allow calling the alias variants after having specified the base long flag.</p>
</blockquote>
<p>Relying on the type state pattern in a build API can severely complicate it especially for a runtime-focused API like clap's.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:09 UTC
    </footer>
</body>
</html>
