```yaml
number: 582
title: External Subcommand names incorrect
type: issue
state: closed
author: VoidStarKat
labels:
  - C-bug
assignees: []
created_at: 2016-07-15T07:50:51Z
updated_at: 2018-08-02T03:29:51Z
url: https://github.com/clap-rs/clap/issues/582
synced_at: 2026-01-10T01:57:40Z
```

# External Subcommand names incorrect

---

_Issue opened by @VoidStarKat on 2016-07-15 07:50_

If you use `AllowExternalSubcommands`, the name of the external subcommand is _always_ `EXTERNAL_SUBCOMMAND` and there is no way to retrieve the actual name of the external subcommand, making the feature entirely useless. This bug is in the latest release 2.9.2.

Here's the example code for `AllowExternalSubcommands` from the documentation, with added asserts that currently fail:

``` rust
extern crate clap;
use clap::{App, AppSettings};

fn main() {
    let m = App::new("myprog")
        .setting(AppSettings::AllowExternalSubcommands)
        .get_matches_from(vec![
            "myprog", "subcmd", "--option", "value", "-fff", "--flag"
        ]);

    match m.subcommand() {
        (external, Some(ext_m)) => {
            let ext_args: Vec<&str> = ext_m.values_of(external).unwrap().collect();

            // We can retrieve the subcommand arguments just fine...
            assert_eq!(ext_args, ["--option", "value", "-fff", "--flag"]); // Works

            // But there's no way to get the subcommand name
            assert_eq!(external, "subcmd"); // FAILS!!! external == "EXTERNAL_SUBCOMMAND"
            assert_eq!(m.subcommand_name().unwrap(), "subcmd"); // ALSO FAILS!
        },
        _ => unreachable!()
   }
}
```


---

_Referenced in [clap-rs/clap#584](../../clap-rs/clap/pulls/584.md) on 2016-07-16 21:32_

---

_Label `T: bug` added by @kbknapp on 2016-07-23 19:31_

---

_Label `P2: need to have` added by @kbknapp on 2016-07-23 19:31_

---

_Label `C: subcommands` added by @kbknapp on 2016-07-23 19:31_

---

_Label `D: intermediate` added by @kbknapp on 2016-07-23 19:31_

---

_Label `W: 2.x` added by @kbknapp on 2016-07-23 19:31_

---

_Label `C: settings` added by @kbknapp on 2016-07-23 19:31_

---

_Closed by @VoidStarKat on 2016-07-29 05:43_

---
