<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How can I handle this case which requires any group - clap-rs/clap #1537</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How can I handle this case which requires any group</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/clap-rs/clap/issues/1537">#1537</a>
        opened by <a href="https://github.com/oblique">@oblique</a>
        on 2019-08-28 16:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oblique">@oblique</a></div>
            <div class="timeline-body"><p>I have a special flag which when it is set I want always one of two groups to match. This special flag should never passed alone.</p>
<p>To be more clear I created a simple example on what I want to achieve:</p>
<pre><code>use clap::{App, Arg, ArgGroup};

fn main() {
    let mut app = App::new(&quot;my-app&quot;)
        .arg(Arg::with_name(&quot;special&quot;).long(&quot;special&quot;))
        .arg(Arg::with_name(&quot;opt-a1&quot;).long(&quot;opt-a1&quot;))
        .arg(Arg::with_name(&quot;opt-a2&quot;).long(&quot;opt-a2&quot;))
        .arg(Arg::with_name(&quot;opt-b1&quot;).long(&quot;opt-b1&quot;))
        .arg(Arg::with_name(&quot;opt-b2&quot;).long(&quot;opt-b2&quot;))
        .group(
            ArgGroup::with_name(&quot;special-and-opt-a&quot;)
                .args(&amp;[&quot;opt-a1&quot;, &quot;opt-a2&quot;])
                .requires_all(&amp;[&quot;special&quot;, &quot;opt-a1&quot;, &quot;opt-a2&quot;])
                .conflicts_with(&quot;special-and-opt-b&quot;)
                .multiple(true)
                .required(false),
        )
        .group(
            ArgGroup::with_name(&quot;special-and-opt-b&quot;)
                .args(&amp;[&quot;opt-b1&quot;, &quot;opt-b2&quot;])
                .requires_all(&amp;[&quot;special&quot;, &quot;opt-b1&quot;, &quot;opt-b2&quot;])
                .conflicts_with(&quot;special-and-opt-a&quot;)
                .multiple(true)
                .required(false),
        );

    let valid_cases = vec![
        vec![&quot;my-app&quot;],
        vec![&quot;my-app&quot;, &quot;--special&quot;, &quot;--opt-a1&quot;, &quot;--opt-a2&quot;],
        vec![&quot;my-app&quot;, &quot;--special&quot;, &quot;--opt-b1&quot;, &quot;--opt-b2&quot;],
    ];

    let invalid_cases = vec![
        vec![&quot;my-app&quot;, &quot;--opt-a1&quot;, &quot;--opt-a2&quot;],
        vec![&quot;my-app&quot;, &quot;--opt-b1&quot;, &quot;--opt-b2&quot;],
        vec![&quot;my-app&quot;, &quot;--special&quot;],
        vec![&quot;my-app&quot;, &quot;--special&quot;, &quot;--opt-a1&quot;],
        vec![&quot;my-app&quot;, &quot;--special&quot;, &quot;--opt-b1&quot;],
        vec![&quot;my-app&quot;, &quot;--special&quot;, &quot;--opt-a1&quot;, &quot;--opt-a2&quot;, &quot;--opt-b1&quot;],
        vec![&quot;my-app&quot;, &quot;--special&quot;, &quot;--opt-b1&quot;, &quot;--opt-b2&quot;, &quot;--opt-a1&quot;],
        vec![&quot;my-app&quot;, &quot;--special&quot;, &quot;--opt-a1&quot;, &quot;--opt-a2&quot;, &quot;--opt-b1&quot;, &quot;-opt-b2&quot;],
    ];

    for x in valid_cases {
        assert!(app.get_matches_from_safe_borrow(x).is_ok());
    }

    for x in invalid_cases {
        assert!(app.get_matches_from_safe_borrow(x).is_err());
    }
}
</code></pre>
<p>The case which I can not find how to handle is <code> [&quot;my-app&quot;, &quot;--special&quot;]</code>. Of-course I can workaround this with <code>is_present</code>, but I&#x27;m curious if there is a solution via groups. Maybe this is a valid case where <code>requires_any</code> is needed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 12:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">not-sure</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-01 14:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-06 09:04</div>
            <div class="timeline-body"><p>maybe we need to introduce <code>requires_any(&amp;[group/option])</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cc: CreepySkeleton</span> removed by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-06 09:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: parsing</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-06 09:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-06 09:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-06 09:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> added by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-06 09:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;3.1&quot; by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-06 09:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2020-02-06 09:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> removed by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-08-13 10:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nrdxp">@nrdxp</a> on 2021-08-25 22:31</div>
            <div class="timeline-body"><p>Just ran into this situation today, and could use a <code>requires_any</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: medium</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-08-31 10:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">:money_with_wings: 20</span> added by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-08-31 11:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>epage/clapng#122</a> on 2021-12-06 18:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-08 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-08 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-09 20:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: medium</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-09 20:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-parsing</span> removed by <a href="https://github.com/epage">@epage</a> on 2021-12-09 20:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-validators</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-09 20:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-medium</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-09 20:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone &quot;3.1&quot; by <a href="https://github.com/epage">@epage</a> on 2021-12-09 20:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:57:27 UTC
    </footer>
</body>
</html>
