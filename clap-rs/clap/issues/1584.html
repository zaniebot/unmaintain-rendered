<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document benefit of using Clap 3.x.x over StructOpt - clap-rs/clap #1584</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Document benefit of using Clap 3.x.x over StructOpt</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1584">#1584</a>
        opened by <a href="https://github.com/danieleades">@danieleades</a>
        on 2019-10-25 10:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/danieleades">@danieleades</a> on 2019-10-25 10:14</div>
            <div class="timeline-body"><p>I've been using Clap for some time now and I'm a big fan.</p>
<p>I've recently switched to using StructOpt because I prefer the declarative style.</p>
<p>I see that clap 3 is re-exporting StructOpt, so I guess it's nice to have all the functionality under one roof.</p>
<p>What I'm not clear on, is where the benefit lies for me to switch from StructOpt (which re-exports Clap functionality) to Clap (which re-exports StructOpt functionality) given that I'm exclusively using the declarative syntax.</p>
<p>What does a user gain by having Clap as the direct dependency? I don't feel this has been documented anywhere.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2019-10-25 11:39</div>
            <div class="timeline-body"><blockquote>
<p>I see that clap 3 is re-exporting StructOpt</p>
</blockquote>
<p>Keep in mind that the <code>structopt</code> in question is a year-old version, 0.2.x, while the latest version is 0.3.3. <code>clap_derive</code> is not a replacement for the latest <code>structopt</code> (for now).</p>
<blockquote>
<p>I guess it's nice to have all the functionality under one roof</p>
</blockquote>
<p>That would be nice indeed, but it looks like the current maintainers <a href="https://github.com/clap-rs/clap/issues/1574#issuecomment-543858824">do not agree</a>.</p>
<blockquote>
<p>What I'm not clear on, is where the benefit lies for me to switch from StructOpt (which re-exports Clap functionality) to Clap (which re-exports StructOpt functionality) given that I'm exclusively using the declarative syntax.</p>
</blockquote>
<p>For now effectively none since you'd be moving from <code>structopt 0.3</code> to 0.2. That's a move backward, not forward.</p>
<blockquote>
<p>What does a user gain by having Clap as the direct dependency? I don't feel this has been documented anywhere.</p>
</blockquote>
<p>The intention here (AFAIK) is to have them both [<code>structopt</code> and <code>clap</code>] under a single group of maintainers so they could be developed in sync. Some things cannot be done without tight integration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danieleades">@danieleades</a> on 2019-10-25 13:30</div>
            <div class="timeline-body"><p>Thanks @CreepySkeleton, that's a really good summary of the current state of play. So for now, I'm better off using StructOpt. But then when (if) they reach parity it gets murky again...
Is that about right?</p>
<p>Kind of seems like a lot of overlap and a bit of bloat.</p>
<p>I'd really love to hear from one of the maintainers here. @kbknapp ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2019-10-25 13:57</div>
            <div class="timeline-body"><blockquote>
<p>Is that about right?</p>
</blockquote>
<p>If they do reach parity (and I really hope they would) <code>structopt</code> will likely become deprecated, I recall @TeXitoi (<code>structopt</code>'s author) said something about that this has been his intention.</p>
<blockquote>
<p>Kind of seems like a lot of overlap and a bit of bloat.</p>
</blockquote>
<p>A lot of overlap indeed, but bot <code>structopt</code> and <code>clap_derive</code> are proc-macros, they don't end up in the final binary, no bloat involved.</p>
<blockquote>
<p>I'd really love to hear from one of the maintainers here. @kbknapp ?</p>
</blockquote>
<p>@kbknapp is unlikely to reply, he's kind of <a href="https://www.reddit.com/r/rust/comments/b575hi/is_clap_maintained/ejdawiv?utm_source=share&amp;utm_medium=web2x">retired</a>.
I believe @Dylan-DPC is maintainer here.</p>
<p>Also @Dylan-DPC what is your opinion on this matter? Is there any particular reason not to update to <code>structopt 0.3</code>? If it's about lack of manpower I would volunteer for the job, I'm pretty familiar with <code>structopt</code> codebase.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dylan-DPC-zz">@Dylan-DPC-zz</a> on 2019-10-25 14:23</div>
            <div class="timeline-body"><p>Give me some time i'll respond to this and the other issue later today. But please do not pass any statements on behalf of the team. Thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dylan-DPC-zz">@Dylan-DPC-zz</a> on 2019-10-25 14:24</div>
            <div class="timeline-body"><p>Also @CreepySkeleton if you want to go about updating structopt to 0.3 on clap-derive, you can go ahead and do it, we have no problem with that :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2019-10-25 14:43</div>
            <div class="timeline-body"><blockquote>
<p>But please do not pass any statements on behalf of the team</p>
</blockquote>
<p>I've never meant to, I'm terribly sorry if I left wrong impression</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamestwebber">@jamestwebber</a> on 2019-10-25 17:54</div>
            <div class="timeline-body"><p>Maybe this is a question more appropriate for the <code>structopt</code> repo, but is it generally true that <code>structopt</code> can not do anything that can't be done in plain <code>clap</code> because it is generating the same code?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TeXitoi">@TeXitoi</a> on 2019-10-26 09:43</div>
            <div class="timeline-body"><p>You can do almost everything. There is some exceptions as https://github.com/TeXitoi/structopt/issues/130</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2019-10-31 00:55</div>
            <div class="timeline-body"><p>The idea when the 3.0 branch started (seemingly forever ago) was exactly as you stated, to bring all the functionality under one roof and have a more cohesive product for users.</p>
<p>However, with my life events being what they've been over the past year (changed jobs, moved, had a baby) it has fallen behind. My dream goal was to move StructOpt into clap, but still have @TeXitoi as the owner of <code>clap_derive</code> with full creative and administrative control. Just with the idea that we could collaborate and present users <em>less</em> confusion. Of course the argument has been raised as to why can't that happen without clap absorbing StructOpt? It could, but the two different names alone causes confusion about relation between the projects and how to share functionality between them.</p>
<p>I'd still love for that dream to become a reality. But it's also totally understandable that there are valid arguments against this. The next step would be trying to update <code>clap_derive</code> to feature parity with StructOpt 0.3.x.</p>
<p>I guess it's TBD how this will all play out. It is open source after all :smile:</p>
<blockquote>
<p>What I'm not clear on, is where the benefit lies for me to switch from StructOpt (which re-exports Clap functionality) to Clap (which re-exports StructOpt functionality) given that I'm exclusively using the declarative syntax.</p>
</blockquote>
<p>Small nit, <code>clap_derive</code> doesn't re-export StructOpt. It used the StructOpt v0.2.x code as a base and made some changes. (which I think provide some more flexibility and are more in line with clap such as the ability to split out derivable traits in order to be able to just use parts of the derive instead of all or nothing)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by @kbknapp on 2019-10-31 00:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CreepySkeleton">@CreepySkeleton</a> on 2019-10-31 01:08</div>
            <div class="timeline-body"><p>@kbknapp It's good to have you back!</p>
<p>In fact, I <em>am</em> performing the transition in https://github.com/clap-rs/clap_derive/pull/22 . Right now I'm short on time but I think I'll get clear in 3-4 days. Any specific deadline I should account for?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dylan-DPC-zz">@Dylan-DPC-zz</a> on 2019-10-31 01:31</div>
            <div class="timeline-body"><p>@CreepySkeleton 3-4 days sounds good</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danieleades">@danieleades</a> on 2019-11-02 14:14</div>
            <div class="timeline-body"><p>I didn't anticipate the amount of interest this question would stir up!</p>
<p>I really appreciate the in depth responses, and I think I have a clear picture of where things are at. It sounds like there's not a totally coherent story for users now, but by the sounds of things it's not too far off.</p>
<p>I'll continue using StructOpt, and I'll be paying close attention as things develop!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danieleades">@danieleades</a> on 2021-04-08 12:48</div>
            <div class="timeline-body"><p>a year and a bit down the line, where are things at now?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-04-08 13:18</div>
            <div class="timeline-body"><p>We have decided on the plan and the difference between clap v3 and structopt long ago, https://github.com/clap-rs/clap/issues/1574#issuecomment-575919336</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.0" by @pksunkara on 2021-04-08 13:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: docs</span> added by @pksunkara on 2021-04-08 13:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danieleades">@danieleades</a> on 2021-04-08 14:34</div>
            <div class="timeline-body"><p>In that case, I think this issue can probably be closed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @danieleades on 2021-04-08 14:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @pksunkara on 2021-04-08 15:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-04-08 15:16</div>
            <div class="timeline-body"><p>I am using this issue as a placeholder to write a small blurb about it in the readme/website</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pksunkara on 2021-05-26 00:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../tikv/tikv/pulls/10837.html">tikv/tikv#10837</a> on 2021-08-27 08:36</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:34:02 UTC
    </footer>
</body>
</html>
