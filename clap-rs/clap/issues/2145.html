<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clap_generate PowerShell script does not complete case sensitive options like -S. Only completes -s - clap-rs/clap #2145</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>clap_generate PowerShell script does not complete case sensitive options like -S. Only completes -s</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/2145">#2145</a>
        opened by <a href="https://github.com/jfishe">@jfishe</a>
        on 2020-09-27 22:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jfishe">@jfishe</a> on 2020-09-27 22:50</div>
            <div class="timeline-body"><h3>Make sure you completed the following tasks</h3>
<ul>
<li>[X] Searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] Searched the closed issues</li>
</ul>
<h3>Code</h3>
<p>https://github.com/clap-rs/clap/blob/3e9ee86713b5c407b50ba76f30cffaed25952063/clap_generate/src/generators/shells/powershell.rs</p>
<h3>Steps to reproduce the issue</h3>
<p>N/A</p>
<h3>Version</h3>
<p>name = &quot;clap&quot;
version = &quot;2.33.1&quot;
source = &quot;registry+https://github.com/rust-lang/crates.io-index&quot;
checksum = &quot;bdfa80d47f954d53a35a64987ca1422f495b8d6483c0fe9f7117b36c2a792129&quot;
dependencies = [
&quot;bitflags&quot;,
&quot;strsim&quot;,
&quot;textwrap&quot;,
&quot;unicode-width&quot;,
]</p>
<h3>Actual Behavior Summary</h3>
<p>https://github.com/BurntSushi/ripgrep generated _rg.ps1 does not complete -S correctly. It only completes -s.</p>
<h3>Expected Behavior Summary</h3>
<p>See https://github.com/BurntSushi/ripgrep/issues/1690 for details.</p>
<p><code>.  _rg.ps1</code></p>
<p><code>rg -s&lt;Ctrl-Space&gt;</code> completes <code>rg -s</code>. It should produce:</p>
<pre><code>rg -s
s   S

Search case sensitively (default).
</code></pre>
<p>A simple fix would be to change ListItemText for 'S' to 'S '. The space makes ListItemText unique, which is all that's needed.</p>
<h3>Additional context</h3>
<p>A simple fix may be to test for upper case and append a space. I don't know rust, so a PR is beyond me.</p>
<p>https://github.com/clap-rs/clap/blob/3e9ee86713b5c407b50ba76f30cffaed25952063/clap_generate/src/generators/shells/powershell.rs#L94 and https://github.com/clap-rs/clap/blob/3e9ee86713b5c407b50ba76f30cffaed25952063/clap_generate/src/generators/shells/powershell.rs#L105</p>
<p>For example, change the second '{}' to '{} ' in the format! below after adding a check for upper case. Sorry I can't be more helpful.</p>
<pre><code>if let Some(short_aliases) = option.get_visible_short_aliases() {
                for data in short_aliases {
                    completions.push_str(&amp;preamble);
                    completions.push_str(
                        format!(
                            &quot;'-{}', '{} ', {}, '{}')&quot;,
                            data, data, &quot;[CompletionResultType]::ParameterName&quot;, tooltip
                        )
                        .as_str(),
                    );
                }
            }
        }
</code></pre>
<h3>Debug output</h3>
<p>N/A</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @jfishe on 2020-09-27 22:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: generator</span> added by @pksunkara on 2020-09-28 08:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">:money_with_wings: $5</span> added by @pksunkara on 2020-10-25 20:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3022.html">clap-rs/clap#3022</a> on 2021-11-14 01:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1232.html">clap-rs/clap#1232</a> on 2021-11-15 14:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/92.html">epage/clapng#92</a> on 2021-12-06 17:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/165.html">epage/clapng#165</a> on 2021-12-06 20:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/238.html">epage/clapng#238</a> on 2021-12-06 22:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-medium</span> added by @epage on 2021-12-13 15:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3166.html">clap-rs/clap#3166</a> on 2021-12-13 17:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4992.html">clap-rs/clap#4992</a> on 2023-07-04 07:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2023-07-05 15:36</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:33 UTC
    </footer>
</body>
</html>
