<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validate all arguments together - clap-rs/clap #2332</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Validate all arguments together</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/2332">#2332</a>
        opened by <a href="https://github.com/giggio">@giggio</a>
        on 2021-02-06 22:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/giggio">@giggio</a> on 2021-02-06 22:12</div>
            <div class="timeline-body"><h3>Make sure you completed the following tasks</h3>
<ul>
<li>[x] Searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[x] Searched the closed issues</li>
</ul>
<h3>Describe your use case</h3>
<p>I'd like to have a validation function that would validate the arguments together.</p>
<h3>Describe the solution you'd like</h3>
<p>I'm thinking something like this:</p>
<pre><code class="language-rust">App::new(&quot;x&quot;)
    .validate(|args| /* some logic and... */ Err((&quot;myarg&quot;, &quot;Why invalid&quot;));
</code></pre>
<p>(I'm not married to this example, it is just so we can have an idea)</p>
<p>In this case, argument <code>myarg</code> is invalid, after I've gone through some logic that would go through all arguments already supplied (and validated individually).</p>
<h3>Alternatives, if applicable</h3>
<p>Validate after parsing using <code>ArgMatches</code>.</p>
<h3>Additional context</h3>
<p>Already discussed at #1913 and #1206, and I think a solution with a closure after on the app context could make sense.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by @giggio on 2021-02-06 22:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: validators</span> added by @pksunkara on 2021-02-06 22:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: parsing</span> added by @pksunkara on 2021-02-06 22:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/178.html">epage/clapng#178</a> on 2021-12-06 21:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> removed by @epage on 2021-12-08 21:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @epage on 2021-12-08 21:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-13 16:22</div>
            <div class="timeline-body"><p>Note that in clap3 we added <code>App::error</code> for being able to create custom validation with <code>ArgMatches</code> that looks as if it was from a validator.</p>
<p>#3008 is our other generalization of validation.</p>
<p>Closing this in favor of <code>App::error</code> and #3008.  If there is any concern with this, feel free to let us know!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2021-12-13 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ctrlcctrlv">@ctrlcctrlv</a> on 2022-01-09 04:02</div>
            <div class="timeline-body"><p>MFEK's fork can do this and was rejected in #3029. If you need a solution right now like we did you could use it. We are waiting for a resolution to #3008 to be able to drop our fork and track upstream again.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-duplicate</span> added by @epage on 2022-01-11 18:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:34:25 UTC
    </footer>
</body>
</html>
