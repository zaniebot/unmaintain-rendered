<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Command::get_opts doesn't return arguments that don't take values - clap-rs/clap #4214</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Command::get_opts doesn't return arguments that don't take values</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/4214">#4214</a>
        opened by <a href="https://github.com/larswirzenius">@larswirzenius</a>
        on 2022-09-14 17:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/larswirzenius">@larswirzenius</a> on 2022-09-14 17:32</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Rust Version</h3>
<p>rustc 1.63.0 (4b91a6ea7 2022-08-08)</p>
<h3>Clap Version</h3>
<p>3.2.21</p>
<h3>Minimal reproducible code</h3>
<pre><code class="language-rust">use clap::{CommandFactory, Parser};

#[derive(Parser)]
struct Args {
    #[clap(long)]
    foo: bool,

    #[clap(long)]
    bar: String,
}

fn main() {
    let args = Args::command();
    for arg in args.get_arguments() {
        println!(&quot;arg: {:?}&quot;, arg.get_name());
    }
    for arg in args.get_opts() {
        println!(&quot;opt: {:?}&quot;, arg.get_name());
    }
}
</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<p>Run the program with <code>cargo run</code></p>
<h3>Actual Behaviour</h3>
<p>The output looks like this:</p>
<pre><code>arg: &quot;help&quot;
arg: &quot;version&quot;
arg: &quot;foo&quot;
arg: &quot;bar&quot;
opt: &quot;bar&quot;
</code></pre>
<p>Note that both &quot;foo&quot; and &quot;bar&quot; are printed as arguments (i.e., returned by <code>get_arguments</code>), but only <code>bar</code> is returned by <code>get_opts</code>.</p>
<h3>Expected Behaviour</h3>
<p>Both <code>foo</code> and <code>bar</code> should be returned by <code>get_opts</code>.</p>
<h3>Additional Context</h3>
<p>I expect that the <code>get_opts</code> method should only filter on <code>!a.is_positional()</code>.</p>
<h3>Debug Output</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by @larswirzenius on 2022-09-14 17:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-09-15 00:22</div>
            <div class="timeline-body"><p>Historically, clap has had specific terminology</p>
<ul>
<li><code>flag</code> is <code>--foo</code></li>
<li><code>option</code> is <code>--foo &lt;bar&gt;</code></li>
</ul>
<p>These functions are conveying that and are working as expected.  If there was something to change about these functions, it would probably be to remove them as they are convenience functions that can easily be recreated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2022-09-15 00:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:35:09 UTC
    </footer>
</body>
</html>
