<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panic, `unwrap()` on a `None` value - clap-rs/clap #2540</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Panic, <code>unwrap()</code> on a <code>None</code> value</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/2540">#2540</a>
        opened by <a href="https://github.com/mazznoer">@mazznoer</a>
        on 2021-06-16 13:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mazznoer">@mazznoer</a> on 2021-06-16 13:49</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the existing issues</li>
</ul>
<h3>Rust Version</h3>
<p>rustc 1.50.0 (cb75ad5db 2021-02-10)</p>
<h3>Clap Version</h3>
<p>3.0.0-beta.2</p>
<h3>Minimal reproducible code</h3>
<p><code>Cargo.toml</code>:</p>
<pre><code class="language-toml">[package]
name = &quot;test&quot;
version = &quot;0.1.0&quot;
edition = &quot;2018&quot;

[dependencies]
clap = { version = &quot;3.0.0-beta.2&quot; }
</code></pre>
<p><code>main.rs</code>:</p>
<pre><code class="language-rust">use clap::Clap;

#[derive(Debug, Clap)]
struct Opt {
    #[clap(short, long, default_value = &quot;xxx&quot;, value_name = &quot;NAME&quot;, help_heading = Some(&quot;HEADING-1&quot;))]
    name: String,
}

fn main() {
    let _opt = Opt::parse();
}
</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<pre><code>$ cargo build
$ target/debug/test
</code></pre>
<h3>Actual Behaviour</h3>
<p>Panic.</p>
<h3>Expected Behaviour</h3>
<p>Not panicking.</p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
<h3>Debug Output</h3>
<pre><code>[            clap::build::app] 	App::_do_parse
[            clap::build::app] 	App::_build
[            clap::build::app] 	App::_propagate:test
[            clap::build::app] 	App::_derive_display_order:test
[            clap::build::app] 	App::_create_help_and_version
[            clap::build::app] 	App::_create_help_and_version: Building --help
[            clap::build::app] 	App::_create_help_and_version: Building --version
[clap::build::app::debug_asserts] 	App::_debug_asserts
[            clap::build::arg] 	Arg::_debug_asserts:name
[            clap::build::arg] 	Arg::_debug_asserts:help
[            clap::build::arg] 	Arg::_debug_asserts:version
[         clap::parse::parser] 	Parser::get_matches_with
[         clap::parse::parser] 	Parser::_build
[         clap::parse::parser] 	Parser::_verify_positionals
[         clap::parse::parser] 	Parser::remove_overrides
[      clap::parse::validator] 	Validator::validate
[         clap::parse::parser] 	Parser::add_defaults
[      clap::parse::validator] 	Validator::validate_conflicts
[      clap::parse::validator] 	Validator::validate_exclusive
[      clap::parse::validator] 	Validator::gather_conflicts
[      clap::parse::validator] 	Validator::validate_required: required=ChildGraph([])
[      clap::parse::validator] 	Validator::gather_requirements
[      clap::parse::validator] 	Validator::validate_required_unless
[      clap::parse::validator] 	Validator::validate_matched_args
[    clap::parse::arg_matcher] 	ArgMatcher::get_global_values: global_arg_vec=[]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @mazznoer on 2021-06-16 13:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-06-16 13:50</div>
            <div class="timeline-body"><p>Not enough information in the actual behaviour. Also, try master.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pksunkara on 2021-06-16 13:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:44 UTC
    </footer>
</body>
</html>
