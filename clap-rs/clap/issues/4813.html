<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `-r, --recursive` flags to help command - clap-rs/clap #4813</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add `-r, --recursive` flags to help command</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/clap-rs/clap/issues/4813">#4813</a>
        opened by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a>
        on 2023-03-30 22:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a> on 2023-03-30 22:49</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>master</p>
<h3>Describe your use case</h3>
<p><code>./binary help -r</code> will print the help of every subcommand recursively. This fixes https://github.com/clap-rs/clap/issues/3934 and kind of acts like a man page.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-03-30 23:47</div>
            <div class="timeline-body"><p>Know of any precedence in any applications?</p>
<p>How would you expect the output from the commands to be delineated?  Just concatenating one output after another?  Dividers?</p>
<p>In what way would this act like a man page?  Most man pages I've seen are either like <code>git</code> or <code>git stash</code> and don't blindly include all subcommands.  Having it be driven by the definition of the command, rather than the user, is being tracked in #1334.</p>
<p>I'll be upfront that I lean more in favor of #1334 rather than this.  Another element is I have been considering trying to allow arguments to be ignored so you can insert a <code>help</code> anywhere and it will then render the relevant help.  An example of where that would be relevant is <a href="https://github.com/clap-rs/clap/issues/2222#issuecomment-1490598453">command chaining</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-help</span> added by @epage on 2023-03-30 23:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by @epage on 2023-03-30 23:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a> on 2023-03-31 00:16</div>
            <div class="timeline-body"><blockquote>
<p>Know of any precedence in any applications?</p>
</blockquote>
<p>The Ocaml one looks like this: https://github.com/facebook/infer/blob/main/sledge/sledge-help.txt</p>
<blockquote>
<p>How would you expect the output from the commands to be delineated? Just concatenating one output after another? Dividers?</p>
</blockquote>
<p><code>====== path to sub command ======</code> seems reasonable, but I don't have any real preference here.</p>
<blockquote>
<p>In what way would this act like a man page?</p>
</blockquote>
<p>I mean it in the sense that you get all the information at once.</p>
<blockquote>
<p>I'll be upfront that I lean more in favor of https://github.com/clap-rs/clap/issues/1334 rather than this.</p>
</blockquote>
<p>I'm not sure these two ideas are mutually exclusive. This one is nicer in the sense that you don't force users to see the entire CLI unless they want to.</p>
<blockquote>
<p>An example of where that would be relevant is https://github.com/clap-rs/clap/issues/2222#issuecomment-1490598453.</p>
</blockquote>
<p>This workflow appears to be centered around appending <code>--help</code> to an existing subcommand which doesn't seem related to the <code>help</code> subcommand.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-03-31 00:37</div>
            <div class="timeline-body"><p>At least in a text document, the OCaml version looks hard to read.  The dividers don't really stand out for the different levels of the document and that requires a lot of scrolling / scanning to find the appropriate section.  I feel like if we did this, it would be blocked on #4201 to ensure we had a good experience for the users.  Yes, users can manually pipe but then they lose all styling and have to go through extra hoops (env variables for clap, flags to less) for it to work</p>
<blockquote>
<p>In what way would this act like a man page?</p>
<p>I mean it in the sense that you get all the information at once.</p>
</blockquote>
<p>As I said, most man pages I've looked at don't show you everything at once.  <code>cargo</code> splits it up by subcommand.  <code>git</code> mostly does except in cases like <code>git stash</code>.</p>
<blockquote>
<p>This workflow appears to be centered around appending --help to an existing subcommand which doesn't seem related to the help subcommand.</p>
</blockquote>
<p>You can just as easily substitute <code>help</code> in that discussion as <code>--help</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a> on 2023-03-31 00:52</div>
            <div class="timeline-body"><blockquote>
<p>text document [...] looks hard to read</p>
</blockquote>
<p>Right, and I don't think that's a solvable problem since you have to render things in your head. For output in a terminal, maybe colors could be used or the font size could be changed? (not sure if that's a thing)</p>
<p>Pagination sounds reasonable.</p>
<blockquote>
<p>most man pages I've looked at don't show you everything at once</p>
</blockquote>
<p>Bad example then, no need to fixate on it.</p>
<blockquote>
<p>You can just as easily substitute help in that discussion as --help.</p>
</blockquote>
<p>You're thinking <code>some command help</code>? That's very odd to me. Why break convention instead of having people type <code>some command --help</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-03-31 02:19</div>
            <div class="timeline-body"><blockquote>
<p>You're thinking some command help? That's very odd to me. Why break convention instead of having people type some command --help?</p>
</blockquote>
<p>Whats odd about it?  Its supported today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a> on 2023-03-31 02:26</div>
            <div class="timeline-body"><p>Hmmm, I don't think we're talking about the same thing. <code>some help command</code> is supported, but how could <code>some command help</code> be supported when <code>command</code> can take arguments?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-03-31 12:26</div>
            <div class="timeline-body"><p><code>some command help</code> is supported if it takes subcommands.  The issue I linked to is about a new <code>Command::chain</code> that, when enabled, will cause all subcommands to effectively have their sibling subcommands as subsubcommands, so if enabled for <code>some</code>, then  <code>some command help</code>  would list all subcommands of <code>some</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SUPERCILEX">@SUPERCILEX</a> on 2023-03-31 17:44</div>
            <div class="timeline-body"><p>Gotya, didn't know that was a thing. Then I'm not sure how these features could interact. Maybe the recursive flag could only work for the root help, but that still might conflict.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-11-09 22:32</div>
            <div class="timeline-body"><p>FYI #5206 is up for closing out #1334.  While not ideal, this could be abused for golden state testing to have the test force enable it recursively and then render the help.  This will lose help heading information, long abouts for subcommands, and maybe one or two other things.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5206.html">clap-rs/clap#5206</a> on 2023-11-10 21:00</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:09 UTC
    </footer>
</body>
</html>
