<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reconsider the update behavior for external commands and other values-taking fields - clap-rs/clap #2212</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Reconsider the update behavior for external commands and other values-taking fields</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/2212">#2212</a>
        opened by <a href="https://github.com/lu-zero">@lu-zero</a>
        on 2020-11-14 12:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/lu-zero">@lu-zero</a> on 2020-11-14 12:50</div>
            <div class="timeline-body"><p>As discussed <a href="https://github.com/clap-rs/clap/pull/1878#discussion_r523415453">here</a>.</p>
<p>Updating a struct that has an external command field has it replaced completely, other options are to extend the Vec with the additional arguments if the command is the same. The behavior should stay consistent with the other places that take a list of values.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by @lu-zero on 2020-11-14 12:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @pksunkara on 2020-11-14 12:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> removed by @pksunkara on 2020-11-14 12:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: derive macros</span> added by @pksunkara on 2020-11-17 05:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-08-13 00:57</div>
            <div class="timeline-body"><p>@epage Do you want to tackle this since you have fresh context regarding this code? (I know it's not 3.0)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-08-13 17:01</div>
            <div class="timeline-body"><p>Its unclear to me whether this is the &quot;the right thing&quot;, at least to do unilaterally.  Merging is context-specific and we don't have the context to know what to do.</p>
<ul>
<li>Does the external subcommand have &quot;overrides self&quot; setup for its fields or will it want a fresh set each time?</li>
<li>Is a subcommand being used within that external subcommand?  We'd have to have that knowledge to know how to merge them, like our native subcommand merging logic.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-08-13 17:02</div>
            <div class="timeline-body"><p>Assuming the field type is <code>Vec&lt;OsString&gt;</code>, is it currently completely replaced when doing update? If yes, then I would close this issue since the other ways have too many complications.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-08-13 17:20</div>
            <div class="timeline-body"><p>While we don't have a test case for it, I believe we completely replace:</p>
<pre><code class="language-rust">                // Fallback to `from_arg_matches`
                Kind::ExternalSubcommand =&gt; None,
</code></pre>
<p>I can go add a test case real quick</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-08-13 17:21</div>
            <div class="timeline-body"><blockquote>
<p>I can go add a test case real quick</p>
</blockquote>
<p>Let's do that and close this issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2684.html">clap-rs/clap#2684</a> on 2021-08-13 17:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pksunkara on 2021-08-13 19:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4974.html">clap-rs/clap#4974</a> on 2023-06-19 17:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:07 UTC
    </footer>
</body>
</html>
