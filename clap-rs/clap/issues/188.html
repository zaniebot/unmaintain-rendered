<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SubcommandsNegateReqs completely disables Arg.required - clap-rs/clap #188</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>SubcommandsNegateReqs completely disables Arg.required</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/188">#188</a>
        opened by <a href="https://github.com/wenLiangcan">@wenLiangcan</a>
        on 2015-08-24 14:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/wenLiangcan">@wenLiangcan</a> on 2015-08-24 14:00</div>
            <div class="timeline-body"><pre><code class="language-rust">App::new(&quot;my_app&quot;)
                .setting(AppSettings::SubcommandsNegateReqs)
                .arg(Arg::with_name(&quot;test&quot;)
                       .required(true)
                       .index(1))
                .subcommand(SubCommand::with_name(&quot;sub1&quot;))
                .subcommand(SubCommand::with_name(&quot;sub1&quot;))
</code></pre>
<p>While running:</p>
<pre><code class="language-shell">$ my_app
</code></pre>
<p><code>.required(true)</code> has no effect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Vinatorul">@Vinatorul</a> on 2015-08-24 14:11</div>
            <div class="timeline-body"><p>Hello, as you can read in documentation about <code>AppSettings::SubcommandsNegateReqs</code>.</p>
<blockquote>
<p>Allows subcommands to override all requirements of the parent (this command). For example if you had a subcommand or even top level application which had a required arguments that are only required as long as there is no subcommand present.</p>
<p><strong>NOTE</strong>: This defaults to false (using subcommand does not negate requirements)</p>
</blockquote>
<p>So it is expected behavior.
If you don't want for subcommands to override requires - just delete <code>.setting(AppSettings::SubcommandsNegateReqs)</code> call.</p>
<p>Please let me know if you still have problems or not.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by @Vinatorul on 2015-08-24 14:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: args</span> added by @Vinatorul on 2015-08-24 14:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wenLiangcan">@wenLiangcan</a> on 2015-08-24 14:37</div>
            <div class="timeline-body"><p>But in my opinion, I think <code>&lt;test&gt;</code> should be required when running <code>my_app</code> without <code>sub1</code> and <code>sub2</code>.</p>
<p>I have no idea why we need <code>SubcommandsNegateReqs</code> if it should behave as you described, because we can simply omit the declaration of the parent's requirements or declare the parent without the subcommands.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Vinatorul">@Vinatorul</a> on 2015-08-24 14:38</div>
            <div class="timeline-body"><p>Oh, I'm sorry, you are right, it's a bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @Vinatorul on 2015-08-24 14:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P1: urgent</span> added by @Vinatorul on 2015-08-24 14:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> removed by @Vinatorul on 2015-08-24 14:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-08-24 14:43</div>
            <div class="timeline-body"><p>@wenLiangcan Thanks for finding and taking the time to file this issue! As @Vinatorul said, it's in fact a bug. We'll get this patched and put out v1.2.3 shortly :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @kbknapp on 2015-08-24 14:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Vinatorul">@Vinatorul</a> on 2015-08-24 14:44</div>
            <div class="timeline-body"><p>@kbknapp I can do it, when come home in about one hour.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-08-24 14:44</div>
            <div class="timeline-body"><p>Sounds good thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @Vinatorul by @kbknapp on 2015-08-24 14:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wenLiangcan">@wenLiangcan</a> on 2015-08-24 14:46</div>
            <div class="timeline-body"><p>Thanks for the quick responses, @Vinatorul , @kbknapp :smile:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: app</span> added by @Vinatorul on 2015-08-24 17:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/189.html">clap-rs/clap#189</a> on 2015-08-24 17:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2015-08-24 18:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2015-08-24 18:35</div>
            <div class="timeline-body"><p>@wenLiangcan the new version (v1.2.3) has been published to crates.io thanks to @Vinatorul</p>
<p>Let us know if you have any other questions or issues! :smile:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wenLiangcan">@wenLiangcan</a> on 2015-08-24 18:45</div>
            <div class="timeline-body"><p>@kbknapp Thank you, I tried the new version and it works well now!</p>
<p>Thanks for your great job, @Vinatorul :clap:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Vinatorul">@Vinatorul</a> on 2015-08-24 18:48</div>
            <div class="timeline-body"><p>At your service ;)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:31 UTC
    </footer>
</body>
</html>
