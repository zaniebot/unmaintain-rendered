<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Short/long help distinction seems unclear to the end-user - clap-rs/clap #1015</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Short/long help distinction seems unclear to the end-user</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1015">#1015</a>
        opened by <a href="https://github.com/8573">@8573</a>
        on 2017-07-29 08:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/8573">@8573</a></div>
            <div class="timeline-body"><pre><code>FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information</code></pre>
<p>This default help message, produced by <code>clap</code> version 2.25.1, seems to
me to imply that <code>-h</code> and <code>--help</code> do the same thing, when they don't
necessarily. For <a href="https://docs.rs/clap/2.25.1/clap/struct.Arg.html"><code>Arg</code></a>s defined with both <code>help</code> and <code>long_help</code>,
<code>--help</code> may provide much more information than <code>-h</code>, but as far as I
can tell there is nothing to make the end-user aware of this, which
seems problematic to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-07-29 19:35</div>
            <div class="timeline-body"><p>True, but then again they <em>might</em> do the same thing. Programs that opt in to differences (via <code>Arg::long_help</code> and friends) can also change the default help message to reflect those differences, such as how <a href="https://github.com/BurntSushi/ripgrep/blob/d4b790fd8d979591cee058e7014957b9f579380d/src/app.rs#L59"><code>ripgrep</code></a> does it.</p>
<p>I do believe this should be marked as a documentation issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: docs</span> added by @kbknapp on 2017-07-29 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @kbknapp on 2017-07-29 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M: mentored</span> added by @kbknapp on 2017-07-29 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/8573">@8573</a> on 2017-07-29 22:14</div>
            <div class="timeline-body"><blockquote>
<p>True, but then again they <em>might</em> do the same thing. Programs that
opt in to differences (via <code>Arg::long_help</code> and friends) can also
change the default help message to reflect those differences, such as how
<a href="https://github.com/BurntSushi/ripgrep/blob/d4b790fd8d979591cee058e7014957b9f579380d/src/app.rs#L59"><code>ripgrep</code></a>
does it.</p>
</blockquote>
<p>Oh huh, I'd never noticed that in ripgrep; thanks for the tip.</p>
<blockquote>
<p>I do believe this should be marked as a documentation issue.</p>
</blockquote>
<p>Okay.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help message</span> added by @kbknapp on 2018-07-22 02:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> added by @kbknapp on 2018-07-22 02:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> added by @kbknapp on 2018-07-22 02:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @kbknapp on 2018-07-22 02:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v3-alpha.1" by @kbknapp on 2018-07-22 02:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "v3-alpha.2" by @pksunkara on 2020-02-01 07:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v3.0" by @pksunkara on 2020-02-01 07:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.0" by @pksunkara on 2021-02-28 12:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.1" by @pksunkara on 2021-02-28 12:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> removed by @pksunkara on 2021-08-13 10:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/martinvonz">@martinvonz</a> on 2021-08-28 20:36</div>
            <div class="timeline-body"><p>Is it reasonable for clap to split up <code>-h</code> and <code>--help</code> into two arguments, so they appear on two lines in the help text?</p>
<p>I think much of the problem is that they're presented as <code>-h, --help</code>, which made at least me (as a user) think that they're just aliases. I'm a little worried that, even if I (as a developer) add a custom help message with <code>App::help_message()</code> to clarify that the two flags are different, my users might make not even read that because they see <code>-h, --help</code> and assume they're aliases without reading the description.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/76.html">epage/clapng#76</a> on 2021-12-06 16:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> removed by @epage on 2021-12-09 17:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P3: want to have</span> removed by @epage on 2021-12-09 17:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-medium</span> removed by @epage on 2021-12-09 17:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-easy</span> removed by @epage on 2021-12-09 17:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-waiting-on-design</span> added by @epage on 2021-12-09 17:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.1" by @epage on 2021-12-09 17:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @epage on 2021-12-13 22:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3367.html">clap-rs/clap#3367</a> on 2022-01-31 22:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AndreKR">@AndreKR</a> on 2022-03-22 16:14</div>
            <div class="timeline-body"><blockquote>
<p>Is it reasonable for clap to split up -h and --help into two arguments, so they appear on two lines in the help text?</p>
</blockquote>
<p>Yes, they should absolutely be on separate lines if they do different things. The distinction between short and long help might make sense but putting <code>-h, --help</code> and expecting that users realize that they are different does not.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-04-18 12:20</div>
            <div class="timeline-body"><p>For those that only want one or the other, #3405 might be a way of forcing it by having <code>HelpShort</code>, <code>HelpLong</code>, and <code>HelpAuto</code> actions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-08-31 17:55</div>
            <div class="timeline-body"><p>Thought it was interesting to see how some tools handle this</p>
<pre><code class="language-console">$ rg -h 
...
Use -h for short descriptions and --help for more details.
...
</code></pre>
<pre><code class="language-console">$ rg --help
...
Use -h for short descriptions and --help for more details.
...
</code></pre>
<pre><code class="language-console">$ bat -h
...
Note: `bat -h` prints a short and concise overview while `bat --help` gives all details.
</code></pre>
<pre><code class="language-console">$ bat --help
...
Note: `bat -h` prints a short and concise overview while `bat --help` gives all details.
</code></pre>
<p>What if we changed the help description for <code>-h</code> / <code>--help</code></p>
<pre><code class="language-rust">.help(&quot;Print this help message.  Use `--help` for more detail&quot;)
.long_help(&quot;Print this help message..  Use `-h` for a summary&quot;)
</code></pre>
<p>As <a href="https://github.com/kbknapp">kbknapp</a> said earlier in this thread</p>
<blockquote>
<p>True, but then again they might do the same thing</p>
</blockquote>
<p>Since then</p>
<ul>
<li>The derive has become the go-to way of configuring clap, making it more natural (or accidental) to provide long help</li>
<li><code>PossibleValue</code> now has help which, if specified, will cause long help to be used</li>
</ul>
<p>I'm thinking that putting these hints in the description for help would be good enough at this point in time to resolve this.  <code>cargo</code> is a popular counter example that doesn't use long help.  I wonder if it should make <code>--help</code> go to the man page like the <code>help</code> subcommand does though, like git.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-08-31 17:55</div>
            <div class="timeline-body"><p>We could also auto-detect if long help is used.  Unsure if we want to pay that runtime price though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4159.html">clap-rs/clap#4159</a> on 2022-08-31 19:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2022-08-31 19:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../jj-vcs/jj/pulls/2409.html">jj-vcs/jj#2409</a> on 2023-10-22 16:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gasche">@gasche</a> on 2023-10-22 17:03</div>
            <div class="timeline-body"><p>I hit this issue when using <code>jj</code>: I was reading doc using <code>-h</code>, it was missing the information I needed, and I wasted time because I did not think of using <code>--help</code> which I assumed was doing the exact same thing.</p>
<p>I am used to CLI interface conventions where the long and short names of an option do the same thing. It would never occur to me that <code>-h</code> and <code>--help</code>, if they both show help, would show different amount of help.</p>
<p>Personally I think that if two options do different things, they should have different short and long names. For example, one could have <code>-h / --help</code> on one hand and <code>-sh / --short-help</code> or <code>-hs / --help-summary</code> on the other hand.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gasche">@gasche</a> on 2023-10-22 17:05</div>
            <div class="timeline-body"><p>(Or maybe <code>-h / --help</code> for short help and <code>--doc</code> for &quot;documentation&quot; (long help).)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-10-23 13:14</div>
            <div class="timeline-body"><p>@gasche does <code>jj</code>s help output for <code>--help</code> say to use <code>--help</code> for more information?</p>
<blockquote>
<p>I am used to CLI interface conventions where the long and short names of an option do the same thing. It would never occur to me that -h and --help, if they both show help, would show different amount of help.</p>
</blockquote>
<p>I found it odd at first as well but it isn't unique to clap.  <code>git stash -h</code> will show brief information and <code>git stash --help</code> will show the man page.</p>
<p>We are unlikely to remove support for it at this point due to compatibility within the applications that use it.  We have made it configurable in 4.3.14, so applications can choose to switch to something else.  We can explore changing the defaults though.  However, the case for it would likely need to be strong due to the people relying on the current behavior.</p>
<p>The current convention is entrenched enough that we are unlikely to change i</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:46:58 UTC
    </footer>
</body>
</html>
