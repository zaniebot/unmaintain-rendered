<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Argument descriptions not aligned when mixing positional arguments with others under a help heading - clap-rs/clap #3835</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Argument descriptions not aligned when mixing positional arguments with others under a help heading</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/3835">#3835</a>
        opened by <a href="https://github.com/pemistahl">@pemistahl</a>
        on 2022-06-15 07:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pemistahl">@pemistahl</a></div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Rust Version</h3>
<p>rustc 1.61.0 (fe5b13d68 2022-05-18)</p>
<h3>Clap Version</h3>
<p>3.2.2</p>
<h3>Minimal reproducible code</h3>
<pre><code class="language-rust">use clap::Parser;
use std::path::PathBuf;

#[derive(Parser)]
struct Cli {
    /// One or more test cases separated by blank space.
    #[clap(value_name = &quot;INPUT&quot;, value_parser, help_heading = &quot;INPUT&quot;)]
    input: Vec&lt;String&gt;,

    /// Reads test cases on separate lines from a file.
    #[clap(
        name = &quot;file&quot;,
        value_name = &quot;FILE&quot;,
        short,
        long,
        value_parser,
        help_heading = &quot;INPUT&quot;
    )]
    file_path: Option&lt;PathBuf&gt;
}

fn main() {
    let cli = Cli::parse();
}
</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<ol>
<li>Compile the binary.</li>
<li>Print the help using <code>binary -h</code>.</li>
</ol>
<h3>Actual Behaviour</h3>
<p>The help messages are not properly aligned.</p>
<pre><code>INPUT:
    -f, --file &lt;FILE&gt;    Reads test cases on separate lines from a file
    &lt;INPUT&gt;...       One or more test cases separated by blank space
</code></pre>
<h3>Expected Behaviour</h3>
<p>The help messages should be properly aligned.</p>
<pre><code>INPUT:
    -f, --file &lt;FILE&gt;    Reads test cases on separate lines from a file
    &lt;INPUT&gt;...           One or more test cases separated by blank space
</code></pre>
<h3>Additional Context</h3>
<p>I understand that proper alignment is not always possible or appropriate. Grouped arguments, however, should always be aligned correctly, in my opinion. The problem here is probably that help messages of flags are aligned differently than help messages of arguments receiving arbitrary input.</p>
<h3>Debug Output</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by @pemistahl on 2022-06-15 07:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3836.html">clap-rs/clap#3836</a> on 2022-06-15 15:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-help</span> added by @epage on 2022-06-15 15:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-medium</span> added by @epage on 2022-06-15 15:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-06-15 15:06</div>
            <div class="timeline-body"><p>Thanks for reporting this!</p>
<p>Currently, our help output is making the assumption that positionals and named arguments are in separate sections.  Supporting them in the same section will take a little bit of finagling to ensure all of the padding situations work out correctly especially to not over-pad in positional-only cases.</p>
<p>If we can reduce leading padding in long-flag only cases, that'd be a bonus to fixing this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Help messages of grouped arguments are not properly aligned" to "Argument descriptions not aligned when mixing positional arguments with others under a help heading" by @epage on 2022-06-17 17:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5963.html">clap-rs/clap#5963</a> on 2025-03-30 07:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2025-04-01 16:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2025-04-01 16:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../rust-lang/cargo/issues/11072.html">rust-lang/cargo#11072</a> on 2025-11-10 16:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:48:36 UTC
    </footer>
</body>
</html>
