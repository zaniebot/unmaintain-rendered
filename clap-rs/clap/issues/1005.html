<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow conditional usage of positional arguments - clap-rs/clap #1005</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow conditional usage of positional arguments</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/1005">#1005</a>
        opened by <a href="https://github.com/kieraneglin">@kieraneglin</a>
        on 2017-07-20 03:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kieraneglin">@kieraneglin</a> on 2017-07-20 03:05</div>
            <div class="timeline-body"><p>This is version agnostic, but I am using the YAML option.</p>
<p>I am working on an app <a href="https://github.com/kieraneglin/diecast">here</a> for reference.</p>
<hr />
<p>Simply, I want to be able to change the possible arguments and whether they're required or not based on the value of a preceding positional argument.</p>
<p>Here's an example.  The program's name will be <code>program</code>.  The first argument will be the subcommand I want, <code>command</code>.  The second argument will be the <code>action</code> I want to perform.  <code>action</code> can be either <code>save</code> or <code>load</code>.</p>
<p><strong>If <code>program command save ...</code></strong>
Usage: <code>program command save &lt;namespace: required&gt; &lt;name: required&gt; &lt;url: required&gt;</code></p>
<p><strong>If <code>program command load ...</code></strong>
Usage: <code>program command load &lt;url: required&gt;</code></p>
<hr />
<p>I hope that was clear enough.  I don't believe this functionality is present already (at least not when using a YAML file).</p>
<p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-10-04 02:38</div>
            <div class="timeline-body"><p>Sorry for long wait, I've been swamped and just trying to get 3.x out the door :disappointed:</p>
<p>You could use <a href="https://docs.rs/clap/2.26.2/clap/struct.Arg.html#method.requires_if"><code>Arg::requires_if</code></a> to make the other positionals required if the value equals either <code>save</code> or <code>load</code>. This could be used in conjunction with <a href="https://docs.rs/clap/2.26.2/clap/struct.Arg.html#method.possible_values"><code>Arg::possible_values</code></a>.</p>
<p>If that doesn't work, make them flags, and use the <a href="https://docs.rs/clap/2.26.2/clap/struct.Arg.html#method.requires"><code>Arg::requires</code></a> for each.</p>
<p>Finally, you could just make <code>save|load</code> separate subcommands.</p>
<p>I'm gonna close this issue just to clean up the issue tracker a little, but feel free to reopen if this needs more addressing :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by @kbknapp on 2017-10-04 02:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2017-10-04 02:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:07 UTC
    </footer>
</body>
</html>
