<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visually Separate ArgGroups - clap-rs/clap #5426</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Visually Separate ArgGroups</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/5426">#5426</a>
        opened by <a href="https://github.com/Swivelgames">@Swivelgames</a>
        on 2024-03-25 22:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Swivelgames">@Swivelgames</a> on 2024-03-25 22:04</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.4.7</p>
<h3>Describe your use case</h3>
<p>ArgGroups are very useful for developers, but they don't always show up sequentially in the help text, which can make it difficult to decipher between different options.</p>
<p>For instance, all <code>+</code> are part of the &quot;Initializer&quot; <code>ArgGroup</code>, and the <code>-</code> are this specific subcommand's options. The rest are <code>global = true</code> options:</p>
<pre><code class="language-diff">  $ dotctl init --help
  Initializes a new directory in dotctl for a new machine

  Usage: dotctl machine init [OPTIONS] &lt;--template &lt;TEMPLATE&gt;|--copy-from &lt;COPY_FROM&gt;|--bare&gt;

  Options:
        --debug                  Prints extra information
+   -t, --template &lt;TEMPLATE&gt;    Use a template as the base for this machine
+   -c, --copy-from &lt;COPY_FROM&gt;  Use an existing machine config as the base for this machine
    -d, --dry-run                Prints actions, but doesn't perform them
+       --bare                   Initialize an empty machine
        --mock                   
-       --home &lt;HOME&gt;            Use a different destination than $HOME
-   -m, --machine &lt;MACHINE&gt;      Specify a different hostname
-       --force                  
    -h, --help                   Print help
    -V, --version                Print version
</code></pre>
<h3>Describe the solution you'd like</h3>
<p>It would be great if we could visually separate options and arguments from the rest of the list if they're grouped, to make it easier to read for users:</p>
<p>Again, all <code>+</code> are part of the &quot;Initializer&quot; <code>ArgGroup</code>, and the <code>-</code> are this specific subcommand's options. The rest are <code>global = true</code> options:</p>
<pre><code class="language-diff">  $ dotctl init --help
  Initializes a new directory in dotctl for a new machine

  Usage: dotctl machine init [OPTIONS] &lt;--template &lt;TEMPLATE&gt;|--copy-from &lt;COPY_FROM&gt;|--bare&gt;

  Init Options:
-       --home &lt;HOME&gt;            Use a different destination than $HOME
-   -m, --machine &lt;MACHINE&gt;      Specify a different hostname
-       --force                  

  Initializer Options:
+   -t, --template &lt;TEMPLATE&gt;    Use a template as the base for this machine
+   -c, --copy-from &lt;COPY_FROM&gt;  Use an existing machine config as the base for this machine
+       --bare                   Initialize an empty machine config

  Global Options:
        --debug                  Prints extra information
    -d, --dry-run                Prints actions, but doesn't perform them
        --mock
    -h, --help                   Print help
    -V, --version                Print version
</code></pre>
<p>I'm imagining this implemented with something like <code>#[group(distinguish = true)]</code>:</p>
<pre><code class="language-rust">#[derive(ClapArgs, Clone)]
#[group(required = true, multiple = false, distinguish = true)]
pub struct Args {
	/// Use a template as the base for this machine
	#[arg(short, long, group = &quot;Initializer&quot;)]
	template: Option&lt;String&gt;,

	/// Use an existing machine config as the base for this machine
	#[arg(short, long, group = &quot;Initializer&quot;)]
	copy_from: Option&lt;String&gt;,

	/// Initialize an empty machine
	#[arg(long, action, group = &quot;Initializer&quot;)]
	bare: bool,

	/// Specify a different hostname
	#[arg(short, long)]
	machine: Option&lt;String&gt;,

	#[arg(long, action)]
	force: bool,
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @Swivelgames on 2024-03-25 22:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2024-03-26 00:54</div>
            <div class="timeline-body"><p>Clap has this but its not expressed through groups.  As someone who mostly did CLIs in Python before Rust, this surprised me about clap but it turned out to be so much better.  Groups are a way of tagging arguments to define arbitrary relationships.  These can't boil down to simple things like &quot;organize help by group&quot;.  Instead, clap has the concept of applying a <code>help_heading</code> to an argument.  See the <a href="https://docs.rs/clap/latest/clap/_derive/_cookbook/find/index.html">find example</a> for what this looks like in code (builder API but concept carries over) and in the help output.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Swivelgames">@Swivelgames</a> on 2024-03-26 01:45</div>
            <div class="timeline-body"><p>@epage Oh, awesome! I totally overlooked that. :sweat_smile: Thanks! Apologies for the frivolous issue :upside_down_face:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Swivelgames on 2024-03-26 01:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:35 UTC
    </footer>
</body>
</html>
