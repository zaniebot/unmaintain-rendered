<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syntax error when attempt ZSH completion for `ValueEnum` variants - clap-rs/clap #4053</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Syntax error when attempt ZSH completion for <code>ValueEnum</code> variants</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/clap-rs/clap/issues/4053">#4053</a>
        opened by <a href="https://github.com/KSXGitHub">@KSXGitHub</a>
        on 2022-08-10 07:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/KSXGitHub">@KSXGitHub</a></div>
            <div class="timeline-body">Notes
<p>This bug is very specific to my application that I haven&#x27;t managed to create a minimal reproducible code yet. So instead, I&#x27;ll be providing links to my application.</p>
Please complete the following tasks
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
Rust Version
<p>1.62.1</p>
Clap Version
<p>3.2.16</p>
Minimal reproducible code
<p>N/A</p>
Steps to reproduce
<ol>
<li>Create an executable at <code>/usr/bin/pdu</code>. Or alternatively, install <a href="https://github.com/KSXGitHub/parallel-disk-usage"><code>pdu</code></a>.</li>
<li>Download and install <a href="https://github.com/KSXGitHub/parallel-disk-usage/blob/master/exports/completion.zsh">the zsh completions for pdu</a> at <code>/usr/share/zsh/site-functions/_pdu</code> (this file was generated by <a href="https://github.com/KSXGitHub/parallel-disk-usage/blob/master/generate-completions.sh"><code>./generate-completion.sh</code></a>).</li>
<li>Open ZSH login shell, type <code>pdu --bytes-format=</code> and then press Tab.</li>
</ol>
Actual Behaviour
<p>The following error appears:</p>
<pre><code>(eval):2: unmatched &quot;
_arguments:465: command not found: (
(eval):2: unmatched &quot;
_arguments:465: command not found: (
(eval):2: unmatched &quot;
_arguments:465: command not found: (
</code></pre>
Expected Behaviour
<p>A completion menu of <code>plain</code>, <code>metric</code>, and <code>binary</code> should appear to let user choose.</p>
Additional Context
<ul>
<li>ZSH version: 5.9</li>
<li>OS: Arch Linux</li>
<li>The <code>Args</code> struct: https://github.com/KSXGitHub/parallel-disk-usage/blob/0.8.2/src/args.rs</li>
<li>The completion generator: https://github.com/KSXGitHub/parallel-disk-usage/blob/0.8.2/cli/completions.rs</li>
</ul>
<p>If you have an Arch Linux machine, you can also install <a href="https://aur.archlinux.org/packages/parallel-disk-usage">the AUR package</a> (<a href="https://aur.archlinux.org/packages/parallel-disk-usage-bin">bin version</a>).</p>
Debug Output
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by <a href="https://github.com/KSXGitHub">@KSXGitHub</a> on 2022-08-10 07:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-completion</span> added by <a href="https://github.com/epage">@epage</a> on 2022-08-10 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-easy</span> added by <a href="https://github.com/epage">@epage</a> on 2022-08-10 13:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:59:12 UTC
    </footer>
</body>
</html>
