<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Failure to compile when using macro builder argument `possible_values` - clap-rs/clap #1248</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Failure to compile when using macro builder argument <code>possible_values</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1248">#1248</a>
        opened by <a href="https://github.com/Jarngreipr">@Jarngreipr</a>
        on 2018-04-17 12:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Jarngreipr">@Jarngreipr</a></div>
            <div class="timeline-body">

Rust Version
<p>rustc 1.25.0 (84203cac6 2018-03-25)</p>
Affected Version of clap
<p>clap 2.31.2</p>
Expected Behavior Summary
<p>When using the macro builder as described in #217, I expected <code>possible_values[fast slow]</code> to behave
like <code>.possible_values(&amp;[&quot;fast&quot;, &quot;slow&quot;])</code>.</p>
Actual Behavior Summary
<p>when using
<code>possible_values[fast slow]</code>
Cargo fails to compile the crate with this error:</p>
<pre><code>error[E0308]: mismatched types
  --&gt; src/main.rs:51:19
   |
51 |       let matches = clap_app!(appname =&gt;
   |  ___________________^
52 | |         (version: &quot;0.2.1&quot;)
53 | |         (author: &quot;Jarngreipr &lt;other@somewhere.com&gt;&quot;)
54 | |         (about: &quot;descriptive description&quot;)
...  |
70 | |             )
71 | |         ).get_matches();
   | |_________^ expected slice, found str
   |
   = note: expected type `&amp;[&amp;str]`
              found type `&amp;&#x27;static str`
</code></pre>
Steps to Reproduce the issue
<p>Add argument to a subcommand that expects two or more possible values.
Using <code>possible_value[fast]</code> works as expected.</p>
Sample Code or Link to Sample Code
<p><a href="https://play.rust-lang.org/?gist=542d5592f49013b9a087f53942069421&amp;version=stable">example</a></p>
Debug output
<p>Sorry, I&#x27;m not sure how to include this part.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-06-05 01:51</div>
            <div class="timeline-body"><p>I agree this isn&#x27;t optimal, however it&#x27;s mentioned in the <a href="https://docs.rs/clap/2.31.2/clap/macro.clap_app.html#shorthand-syntax-for-args">macros shorthand notes</a> that you have to use the singular form and a list of values <code>possible_value[fast slow]</code></p>
<p>https://play.rust-lang.org/?gist=c8adeb01ded5c5838fc074193776d07a&amp;version=stable&amp;mode=debug</p>
<p>I&#x27;m going to close this for now, however I&#x27;d also not say no to making the docs more clear :wink:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-06-05 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jarngreipr">@Jarngreipr</a> on 2018-06-05 13:20</div>
            <div class="timeline-body"><p>You are referring to the last bullet point in the macros shorthand notes, i assume?
In my opinion it is far from obvious that one must use the singular form from looking at the notes.
On the first read, one would assume that this is a more ergonomic way of setting a possible value multiple times, not that it is the only way to set multiple values.</p>
<p>Where would it be appropriate to expand on this point in the documentation, if I were to send in a pull request?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2018-06-05 13:41</div>
            <div class="timeline-body"><p>I agree it&#x27;s basically hidden. Unfortunately, it&#x27;s hard to document macros properly. I&#x27;d be all for a better documentation PR if you have some good ideas? The fact that the shorthand version are quite numerous makes it hard to make each one prominent when a particular user only needs a few of them.</p>
<p>This is a somewhat common issue, recently #1253 is another such instance.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:57:09 UTC
    </footer>
</body>
</html>
