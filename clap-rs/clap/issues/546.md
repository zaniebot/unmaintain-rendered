```yaml
number: 546
title: Multiple values separated by a delimiter _only_?
type: issue
state: closed
author: kornelski
labels:
  - C-bug
  - A-parsing
assignees: []
created_at: 2016-06-28T19:26:15Z
updated_at: 2018-08-02T03:29:50Z
url: https://github.com/clap-rs/clap/issues/546
synced_at: 2026-01-10T01:57:40Z
```

# Multiple values separated by a delimiter _only_?

---

_Issue opened by @kornelski on 2016-06-28 19:26_

I'm trying to make an arg that accepts one or two comma-delimited values, and also accept unnamed (index) argument after that.

``` sh
prog -q 1,2 file # OK: parses as q=[1,2]; input=file
```

``` sh
prog -q 1 file # should parse as q=[1]; input=file; but parses as q=[1,file]; input missing
```

The problem is that multiple arguments allow spaces, which causes ambiguity. I don't know how to disable that.


---

_Comment by @kbknapp on 2016-06-29 15:04_

Currently, there isn't a way to _force_ the use of a delimiter. That is something that could be added.

But there are few other things about this scenario too:  Is there a limit on the number of values for `q`? Otherwise, `prog -q 1,2 file` won't parse like `q=[1,2]; input=file`

I could consider this a bug, so-to-speak. i.e. if a delimiter is present, parsing something after a space probably shouldn't be part of the same value group. This still doesn't help your scenario 2 though. To go along with the above "bug" is parsing something like `-q=1 file` shouldn't lump `file` in with `-q`, but currently does.

So, would solving those two bugs suffice, or would a `force_delimiter` still be preferred? i.e.
- if a delimiter is present, don't parse anything after a space as the same group of values
- if a `=` is present, don't parse anything after a space as the same group of values

This would allow you to do `-q=1 file` and the option of either `-q 1,2 file` or `-q=1,2 file` all parsing correctly.

~~My only issue with the `require_delimiter` type thing, is it seems somewhat niche assuming the above bugs are fixed.~~ I would assume most people, upon realizing `-q 1 file` isn't working would try `-q=1 file` next.

Edit: thinking about it more, I'm good adding the `require_delimiter`, but still want some thoughts on the matter :)


---

_Label `T: bug` added by @kbknapp on 2016-06-29 15:05_

---

_Label `T: RFC / question` added by @kbknapp on 2016-06-29 15:05_

---

_Label `P4: nice to have` added by @kbknapp on 2016-06-29 15:05_

---

_Label `D: intermediate` added by @kbknapp on 2016-06-29 15:05_

---

_Label `C: parsing` added by @kbknapp on 2016-06-29 15:05_

---

_Label `W: 2.x` added by @kbknapp on 2016-06-29 15:05_

---

_Comment by @kornelski on 2016-06-29 15:43_

Thank you for your response.

In my case it's strictly 1 or 2 values for `q`. `require_delimiter` would be ideal for me, as `-q 1` `file` case is going to be the most common in my program.


---

_Comment by @kbknapp on 2016-06-29 17:35_

#547 implements those two bug fixes and will be uploaded to crates.io as v2.7.1, then I'll add the `Arg::require_delimiter` in a new PR and upload as v2.8.0 to crates.io to keep all SemVer users aware of changes.


---

_Comment by @kornelski on 2016-06-29 18:34_

Fantastic! Thank you!


---

_Closed by @kornelski on 2016-06-29 18:34_

---

_Comment by @kbknapp on 2016-06-29 18:40_

`Arg::require_delimiter` isn't implemented yet, doing so now :wink: 

I want to keep this open just a tracking issue for that, until the PR merges.


---

_Reopened by @kbknapp on 2016-06-29 18:40_

---

_Comment by @kbknapp on 2016-06-30 03:22_

This will be fully implemented with #551 


---

_Added to milestone `2.8.0` by @kbknapp on 2016-06-30 03:29_

---

_Closed by @homu on 2016-06-30 13:44_

---
