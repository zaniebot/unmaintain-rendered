```yaml
number: 1082
title: "`clap` procedural macroses as in python's `click` module"
type: issue
state: closed
author: iddm
labels: []
assignees: []
created_at: 2017-10-25T14:58:27Z
updated_at: 2018-08-02T03:30:13Z
url: https://github.com/clap-rs/clap/issues/1082
synced_at: 2026-01-10T01:57:42Z
```

# `clap` procedural macroses as in python's `click` module

---

_Issue opened by @iddm on 2017-10-25 14:58_

Can `clap` do something like [this](https://realpython.com/blog/python/comparing-python-command-line-parsing-libraries-argparse-docopt-click/) with procedural macroses?

```python
import click


def greeter(**kwargs):
    output = '{0}, {1}!'.format(kwargs['greeting'],
                                kwargs['name'])
    if kwargs['caps']:
        output = output.upper()
    print(output)


@click.group()
def greet():
    pass


@greet.command()
@click.argument('name')
# add an option with 'Hello' as the default
@click.option('--greeting', default='Hello')
# add a flag (is_flag=True)
@click.option('--caps', is_flag=True)
# the application logic has been refactored into a single function
def hello(**kwargs):
    greeter(**kwargs)


@greet.command()
@click.argument('name')
@click.option('--greeting', default='Goodbye')
@click.option('--caps', is_flag=True)
def goodbye(**kwargs):
    greeter(**kwargs)

if __name__ == '__main__':
    greet()
```

I don't if it is even possible in rust and sensible but it looks nice. If `clap` has all the things done for having such procedural macroses I'd like to implement them.

---

_Comment by @kbknapp on 2017-10-26 13:32_

Not exactly, but using `clap_app!` or `structopt` (which uses `clap` internally) and [`Arg::validator`](https://docs.rs/clap/2.27.0/clap/struct.Arg.html#method.validator) will get you *close*. I'm open to ideas though!

---

_Label `T: RFC / question` added by @kbknapp on 2017-10-26 13:32_

---

_Closed by @kbknapp on 2017-11-06 03:40_

---
