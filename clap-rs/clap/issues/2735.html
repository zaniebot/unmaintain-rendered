<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MSRV broken in minor version - clap-rs/clap #2735</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>MSRV broken in minor version</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/2735">#2735</a>
        opened by <a href="https://github.com/TeXitoi">@TeXitoi</a>
        on 2021-08-23 10:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/TeXitoi">@TeXitoi</a> on 2021-08-23 10:19</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the existing issues</li>
</ul>
<h3>Rust Version</h3>
<p>rustc 1.36.0 (a53f9df32 2019-07-03)</p>
<h3>Clap Version</h3>
<p>v2.33.3</p>
<h3>Minimal reproducible code</h3>
<pre><code class="language-rust">fn main() {}
</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<p>cargo build</p>
<h3>Actual Behaviour</h3>
<pre><code>    Compiling clap v2.33.3

error[E0433]: failed to resolve: could not find `stringify` in `_core`
  --&gt; /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/clap-2.33.3/src/app/settings.rs:7:1
   |
7  | / bitflags! {
8  | |     struct Flags: u64 {
9  | |         const SC_NEGATE_REQS       = 1;
10 | |         const SC_REQUIRED          = 1 &lt;&lt; 1;
...  |
51 | |     }
52 | | }
   | |_^ could not find `stringify` in `_core`
   |
   = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)
error[E0433]: failed to resolve: could not find `stringify` in `_core`
  --&gt; /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/clap-2.33.3/src/args/settings.rs:6:1
   |
6  | / bitflags! {
7  | |     struct Flags: u32 {
8  | |         const REQUIRED         = 1;
9  | |         const MULTIPLE         = 1 &lt;&lt; 1;
...  |
28 | |     }
29 | | }
   | |_^ could not find `stringify` in `_core`
   |
   = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)
error: aborting due to 2 previous errors
For more information about this error, try `rustc --explain E0433`.
</code></pre>
<h3>Expected Behaviour</h3>
<p>compile succeed</p>
<h3>Additional Context</h3>
<p>It was working with the 2.33.2, it breaks structopt MSRV</p>
<p>https://app.travis-ci.com/github/TeXitoi/structopt/jobs/532369433</p>
<p>Seems that the MRSV is not tested by the github ci in clap.</p>
<p>I don't really care, but I think that's better to at least document MSRV upgrade somewhere (the README says &gt;=2.21: 1.24.0)</p>
<h3>Debug Output</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @TeXitoi on 2021-08-23 10:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-08-23 13:24</div>
            <div class="timeline-body"><p>This is coming from the <code>bitflags</code> crate which has its own MSRV.  Having an MSRV does not mean that all dependencies are locked down to only allow the MSRV.  Overly constraining dependencies for the sake of MSRV can actually be harmful, like <a href="https://www.reddit.com/r/rust/comments/p8clcx/how_to_fix_cargo_dependency_issue/">what happened with nom</a></p>
<p>The best I can offer at the moment is to use <code>-Z minimal-versions</code> or for people to patch the dependency</p>
<p>See #2691 which had a similar issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TeXitoi">@TeXitoi</a> on 2021-08-23 13:47</div>
            <div class="timeline-body"><p>Sure, thanks for the quick reply, and sorry for not finding the previous issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @TeXitoi on 2021-08-23 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../foresterre/cargo-msrv/issues/312.html">foresterre/cargo-msrv#312</a> on 2022-02-22 15:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../rust-lang/cargo/issues/9930.html">rust-lang/cargo#9930</a> on 2023-03-30 12:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:34:35 UTC
    </footer>
</body>
</html>
