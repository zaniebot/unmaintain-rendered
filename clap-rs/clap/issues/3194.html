<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Main documentation example doesn't build - clap-rs/clap #3194</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Main documentation example doesn't build</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/3194">#3194</a>
        opened by <a href="https://github.com/bestouff">@bestouff</a>
        on 2021-12-17 15:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bestouff">@bestouff</a> on 2021-12-17 15:01</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the existing issues</li>
</ul>
<h3>Rust Version</h3>
<p>rustc 1.57.0 (f1edd0429 2021-11-29)</p>
<h3>Clap Version</h3>
<p>3.0.0-rc.7</p>
<h3>Minimal reproducible code</h3>
<p><code>cat src/main.rs</code></p>
<pre><code class="language-rust">use clap::Parser;

/// Simple program to greet a person
#[derive(Parser, Debug)]
#[clap(about, version, author)]
struct Args {
    /// Name of the person to greet
    #[clap(short, long)]
    name: String,

    /// Number of times to greet
        #[clap(short, long, default_value_t = 1)]
    count: u8,
}

fn main() {
    let args = Args::parse();

    for _ in 0..args.count {
        println!(&quot;Hello {}!&quot;, args.name)
    }
}
</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<p>cargo build</p>
<h3>Actual Behaviour</h3>
<pre><code>   Compiling clap_example v0.1.0 (/home/xav/clap_example)
error: cannot find derive macro `Parser` in this scope
 --&gt; src/main.rs:4:10
  |
4 | #[derive(Parser, Debug)]
  |          ^^^^^^
  |
note: `Parser` is imported here, but it is only a trait, without a derive macro
 --&gt; src/main.rs:1:5
  |
1 | use clap::Parser;
  |     ^^^^^^^^^^^^

error: cannot find attribute `clap` in this scope
 --&gt; src/main.rs:5:3
  |
5 | #[clap(about, version, author)]
  |   ^^^^
  |
  = note: `clap` is in scope, but it is a crate, not an attribute

error: cannot find attribute `clap` in this scope
 --&gt; src/main.rs:8:7
  |
8 |     #[clap(short, long)]
  |       ^^^^
  |
  = note: `clap` is in scope, but it is a crate, not an attribute

error: cannot find attribute `clap` in this scope
  --&gt; src/main.rs:12:11
   |
12 |         #[clap(short, long, default_value_t = 1)]
   |           ^^^^
   |
   = note: `clap` is in scope, but it is a crate, not an attribute

error[E0599]: no function or associated item named `parse` found for struct `Args` in the current scope
  --&gt; src/main.rs:17:22
   |
6  | struct Args {
   | ----------- function or associated item `parse` not found for this
...
17 |     let args = Args::parse();
   |                      ^^^^^ function or associated item not found in `Args`
   |
   = help: items from traits can only be used if the trait is implemented and in scope
   = note: the following trait defines an item `parse`, perhaps you need to implement it:
           candidate #1: `Parser`

For more information about this error, try `rustc --explain E0599`.
error: could not compile `clap_example` due to 5 previous errors
</code></pre>
<h3>Expected Behaviour</h3>
<p>build ok</p>
<h3>Additional Context</h3>
<pre><code class="language-toml">[package]
name = &quot;clap_example&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
clap = &quot;3.0.0-rc.7&quot;
</code></pre>
<h3>Debug Output</h3>
<p>same output</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by @bestouff on 2021-12-17 15:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Main page example doesn't build" to "Main documentation example doesn't build" by @bestouff on 2021-12-17 15:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-17 15:15</div>
            <div class="timeline-body"><p>Below the example is is this comment</p>
<blockquote>
<p>(note: requires feature derive)</p>
</blockquote>
<p>You need to update your <code>Cargo.toml</code> to</p>
<pre><code class="language-toml">[package]
name = &quot;clap_example&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
clap = { version = &quot;3.0.0-rc.7&quot;, features = [&quot;derive&quot;] }
</code></pre>
<p>If you have thoughts for how to make this less likely to be missed we are open to input!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bestouff">@bestouff</a> on 2021-12-17 15:23</div>
            <div class="timeline-body"><p>Something like that ?
https://github.com/clap-rs/clap/pull/3195</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-23 20:40</div>
            <div class="timeline-body"><p>Documentation has improved that led to this, closing out this issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2021-12-23 20:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:34:49 UTC
    </footer>
</body>
</html>
