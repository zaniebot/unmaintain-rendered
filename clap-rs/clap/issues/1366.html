<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set default value if possible_values array has length of 1 - clap-rs/clap #1366</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Set default value if possible_values array has length of 1</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1366">#1366</a>
        opened by <a href="https://github.com/yaahc">@yaahc</a>
        on 2018-10-24 19:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/yaahc">@yaahc</a></div>
            <div class="timeline-body"><p>This may be possible already, but I haven&#x27;t been able to figure out how. The use case I have is some runtime possible_values population, in this case, hostnames, that I want to select from. If there&#x27;s exactly one host I would like to be able to leave off the argument requesting it and have clap default to the one possible value, but if there are more than one possible values there&#x27;s no concept of a default anymore, and I would like it to require the argument.</p>
<p>I can manage it with runtime checks and making the argument optional and only specifying possible_values and erroring if we don&#x27;t get input, but I thought it might be a check to have done by the argument parser so there are more consistent errors, rather than having some invalid argument inputs result in clap errors and other ones result in debug logs and panics. Also, I&#x27;d prefer to avoid the optional argument version because I&#x27;m using structopt, and it seems weird to have an <code>Option&lt;T&gt;</code> that can only ever be populated after the extra verification step is done, when it really should just be the <code>T</code> directly.</p>
<p>If you&#x27;re this really isn&#x27;t possible to do as it is right now and seems like a reasonable feature to add I&#x27;d be glad to handle the implementation myself.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/yaahc">@yaahc</a> on 2018-10-24 19:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yaahc">@yaahc</a> on 2018-10-24 19:37</div>
            <div class="timeline-body"><p>Figured it out, just have to set the default_value to an invalid value when the possible_values array is longer than 1, otherwise set it to the only possible value.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:57:17 UTC
    </footer>
</body>
</html>
