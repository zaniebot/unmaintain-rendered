<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`bin_name` overrides `name` in the help message - clap-rs/clap #1474</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>bin_name</code> overrides <code>name</code> in the help message</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1474">#1474</a>
        opened by <a href="https://github.com/sphynx">@sphynx</a>
        on 2019-05-20 17:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sphynx">@sphynx</a></div>
            <div class="timeline-body"><p>Maintainer's notes</p>
<ul>
<li>Fixing this might also fix #1431 and #1382</li>
</ul>
<hr />
<!--
Please use the following template to assist with creating an issue and to ensure a speedy resolution. If an area is not applicable, feel free to delete the area or mark with `N/A`
-->

<h3>Rust Version</h3>
<p>rustc 1.36.0-nightly (af98304b9 2019-05-11)</p>
<h3>Affected Version of clap</h3>
<p>2.33</p>
<h3>Bug or Feature Request Summary</h3>
<p>If I use <code>bin_name</code> to override executable name in usage (for something like cargo command), <code>clap</code> also automatically overrides <code>name</code> (as well as argument to <code>App::new</code>) in the help message. It would be nice to have control over the name, since it appears at the very top of the help message.</p>
<h3>Expected Behavior Summary</h3>
<pre><code>&gt; cargo run -- --help
appname

USAGE:
    bin name
</code></pre>
<h3>Actual Behavior Summary</h3>
<pre><code>&gt; cargo run -- --help
bin-name

USAGE:
    bin name
</code></pre>
<h3>Steps to Reproduce the issue</h3>
<p><code>cargo run -- --help</code></p>
<h3>Sample Code or Link to Sample Code</h3>
<pre><code class="language-rust">use clap::App;

fn main() {
    App::new(&quot;My Super Program&quot;)
        .name(&quot;appname&quot;)
        .bin_name(&quot;bin name&quot;)
        .get_matches();
}
</code></pre>
<h3>Debug output</h3>
<details>
<summary> Debug Output </summary>
<pre>
<code>

<p>DEBUG:clap:Parser::propagate_settings: self=appname, g_settings=AppFlags(
(empty),
)
DEBUG:clap:Parser::get_matches_with;
DEBUG:clap:Parser::create_help_and_version;
DEBUG:clap:Parser::create_help_and_version: Building --help
DEBUG:clap:Parser::create_help_and_version: Building --version
DEBUG:clap:Parser::get_matches_with: Begin parsing '&quot;--help&quot;' ([45, 45, 104, 101, 108, 112])
DEBUG:clap:Parser::is_new_arg:&quot;--help&quot;:NotFound
DEBUG:clap:Parser::is_new_arg: arg_allows_tac=false
DEBUG:clap:Parser::is_new_arg: -- found
DEBUG:clap:Parser::is_new_arg: starts_new_arg=true
DEBUG:clap:Parser::possible_subcommand: arg=&quot;--help&quot;
DEBUG:clap:Parser::get_matches_with: possible_sc=false, sc=None
DEBUG:clap:ArgMatcher::process_arg_overrides:None;
DEBUG:clap:Parser::parse_long_arg;
DEBUG:clap:Parser::parse_long_arg: Does it contain '='...No
DEBUG:clap:Parser::parse_long_arg: Found valid flag '--help'
DEBUG:clap:Parser::check_for_help_and_version_str;
DEBUG:clap:Parser::check_for_help_and_version_str: Checking if --help is help or version...Help
DEBUG:clap:Parser::_help: use_long=true
DEBUG:clap:Help::write_parser_help;
DEBUG:clap:Help::write_parser_help;
DEBUG:clap:Parser::color;
DEBUG:clap:Parser::color: Color setting...Auto
DEBUG:clap:is_a_tty: stderr=false
DEBUG:clap:Help::new;
DEBUG:clap:Help::write_help;
DEBUG:clap:Help::write_default_help;
DEBUG:clap:Help::write_bin_name;
DEBUG:clap:Help::write_version;
DEBUG:clap:usage::create_usage_no_title;
DEBUG:clap:usage::get_required_usage_from: reqs=[], extra=None
DEBUG:clap:usage::get_required_usage_from: after init desc_reqs=[]
DEBUG:clap:usage::get_required_usage_from: no more children
DEBUG:clap:usage::get_required_usage_from: final desc_reqs=[]
DEBUG:clap:usage::get_required_usage_from: args_in_groups=[]
DEBUG:clap:usage::needs_flags_tag;
DEBUG:clap:usage::needs_flags_tag:iter: f=hclap_help;
DEBUG:clap:usage::needs_flags_tag:iter: f=vclap_version;
DEBUG:clap:usage::needs_flags_tag: [FLAGS] not required
DEBUG:clap:usage::create_help_usage: usage=bin name
DEBUG:clap:Help::write_all_args;
DEBUG:clap:Help::write_args;
DEBUG:clap:Help::write_args: Current Longest...2
DEBUG:clap:Help::write_args: New Longest...6
DEBUG:clap:Help::write_args: Current Longest...6
DEBUG:clap:Help::write_args: New Longest...9
DEBUG:clap:Help::write_arg;
DEBUG:clap:Help::short;
DEBUG:clap:Help::long;
DEBUG:clap:Help::val: arg=--help
DEBUG:clap:Help::spec_vals: a=--help
DEBUG:clap:Help::val: Has switch...Yes
DEBUG:clap:Help::val: force_next_line...false
DEBUG:clap:Help::val: nlh...false
DEBUG:clap:Help::val: taken...21
DEBUG:clap:Help::val: help_width &gt; (width - taken)...23 &gt; (120 - 21)
DEBUG:clap:Help::val: longest...9
DEBUG:clap:Help::val: next_line...No
DEBUG:clap:write_spaces!: num=7
DEBUG:clap:Help::help;
DEBUG:clap:Help::help: Next Line...false
DEBUG:clap:Help::help: Too long...No
DEBUG:clap:Help::write_arg;
DEBUG:clap:Help::short;
DEBUG:clap:Help::long;
DEBUG:clap:Help::val: arg=--version
DEBUG:clap:Help::spec_vals: a=--version
DEBUG:clap:Help::val: Has switch...Yes
DEBUG:clap:Help::val: force_next_line...false
DEBUG:clap:Help::val: nlh...false
DEBUG:clap:Help::val: taken...21
DEBUG:clap:Help::val: help_width &gt; (width - taken)...26 &gt; (120 - 21)
DEBUG:clap:Help::val: longest...9
DEBUG:clap:Help::val: next_line...No
DEBUG:clap:write_spaces!: num=4
DEBUG:clap:Help::help;
DEBUG:clap:Help::help: Next Line...false
DEBUG:clap:Help::help: Too long...No
bin-name</p>
<p>USAGE:
bin name</p>
<p>FLAGS:
-h, --help       Prints help information
-V, --version    Prints version information</p>
</code>
</pre>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help message</span> added by @CreepySkeleton on 2020-02-01 13:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @CreepySkeleton on 2020-02-01 13:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @CreepySkeleton on 2020-02-01 13:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> added by @CreepySkeleton on 2020-02-01 13:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: maybe</span> added by @CreepySkeleton on 2020-02-01 13:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: postponed</span> added by @CreepySkeleton on 2020-02-01 13:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Wtoll">@Wtoll</a> on 2020-09-08 03:48</div>
            <div class="timeline-body"><p>I second this being a necessary addition. I'm trying to write an extension to cargo (cargo-extension binary name as an example), and in order to have the usage information make sense, the bin name has to be set to &quot;cargo extension&quot;, but then that forces the name in the version write out to be &quot;cargo-extension&quot; which is not very descriptive or helpful.</p>
<p>Considering cargo itself uses clap I think it makes sense for clap to be fully able to support writing extensions to cargo, and part of that includes allowing the &quot;name&quot; field to take precedence over the &quot;bin-name&quot; field to allow for both an accurate usage example, and a descriptive name.</p>
<p>Also, because I noticed the version number in this issue is different, this also equally affects clap v3.0.0-beta.1 which is what I've been developing with.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> removed by @pksunkara on 2020-10-05 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 3.x</span> removed by @pksunkara on 2020-10-05 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: maybe</span> removed by @pksunkara on 2020-10-05 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: postponed</span> removed by @pksunkara on 2020-10-05 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.1" by @pksunkara on 2020-10-05 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pksunkara">@pksunkara</a> on 2021-05-26 03:26</div>
            <div class="timeline-body"><p>Note: Need to check if <code>NoBinaryName</code> solves it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">:money_with_wings: $5</span> added by @pksunkara on 2021-06-16 03:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../epage/clapng/issues/119.html">epage/clapng#119</a> on 2021-12-06 18:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">S-triage</span> added by @epage on 2021-12-09 20:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.1" by @epage on 2021-12-09 20:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-14 22:02</div>
            <div class="timeline-body"><p>From a comment of mine in #3096</p>
<blockquote>
<p>From <a href="https://www.gnu.org/software/help2man/">help2man's docs</a></p>
<blockquote>
<p>Use argv[0] for the program name in these synopses, just as it is, with no directory stripping. This is in contrast to the canonical (constant) name of the program which is used in --version.</p>
</blockquote>
<p>Interesting. They want the usage to use <code>argv[0]</code> but everywhere else to the use actual name.</p>
<p>For us, we show the bin name as the application name (see #992). Our bin name is <code>argv[0].file_name()</code> though with #992 I am considering changing it to <code>argv[0].file_stem()</code> or similar.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-05-04 21:14</div>
            <div class="timeline-body"><p>#3680 added a help_template variable for this.  I'm debating whether it can be the default in 3.2 (minor compatibility break) or 4.0 (major compatibility break).</p>
<p>This is also helping #992</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.2" by @epage on 2022-05-04 21:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1431.html">clap-rs/clap#1431</a> on 2022-05-04 21:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "3.2" by @epage on 2022-05-05 01:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "4.0" by @epage on 2022-05-05 01:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-05-05 01:14</div>
            <div class="timeline-body"><p>We're close enough to when we can start working on 4.0, I'm going to play it safe and push it off to then</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3693.html">clap-rs/clap#3693</a> on 2022-05-05 01:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2022-05-05 17:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:47:20 UTC
    </footer>
</body>
</html>
