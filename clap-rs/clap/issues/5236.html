<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Document: First Step Towards Modularity - clap-rs/clap #5236</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Design Document: First Step Towards Modularity</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/clap-rs/clap/issues/5236">#5236</a>
        opened by <a href="https://github.com/epage">@epage</a>
        on 2023-12-01 14:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a></div>
            <div class="timeline-body"><p>This is more of a note dumping ground so I don't forget this in the lead up to 5.0.</p>
<ul>
<li>Create sealed <code>UsageWriter</code> trait<ul>
<li>Returns usage lines, without header or indentation</li>
<li>Create a <code>NoUsage</code>, <code>FixedUsage</code>, <code>AutoUsage</code>, <code>AdaptiveUsage</code></li>
</ul>
</li>
<li>Create sealed <code>HelpWriter</code> trait<ul>
<li>Create a <code>NoHelp</code>, <code>FixedHelp</code>, <code>HelpTemplate</code>, and <code>AutoHelp</code></li>
<li>Generic over usage</li>
</ul>
</li>
<li>Create a <code>Storage</code> trait with sealed methods, making <code>ArgMatches</code> generic over it<ul>
<li>Create new derive methods so this can be used implicitly to reduce constraints on derive and improve performance</li>
</ul>
</li>
<li>Create <code>ArgParser</code> that is generic over the above</li>
<li>Deprecate all <code>Command::...get_matches...</code> functions except the most basic, pushing people to <code>ArgParser</code></li>
<li>Deprecate all <code>Command</code> help/usage writing functions (maybe)</li>
</ul>
<p>End result</p>
<ul>
<li>Reduce binary size without the use of feature flags</li>
<li>Reduce requirements on derive users</li>
<li>Allow moving some <code>Command</code> state to <code>ArgParser</code></li>
<li>Open door for more experimentation with custom usage/help</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @epage on 2023-12-01 14:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-hard</span> added by @epage on 2023-12-01 14:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-parsing</span> added by @epage on 2023-12-01 14:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "4.x" by @epage on 2023-12-01 14:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2914.html">clap-rs/clap#2914</a> on 2023-12-27 18:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/380.html">clap-rs/clap#380</a> on 2024-01-08 17:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:49:15 UTC
    </footer>
</body>
</html>
