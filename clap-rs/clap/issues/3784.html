<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show Docstrings of variants in ArgEnum in --help - clap-rs/clap #3784</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Show Docstrings of variants in ArgEnum in --help</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/3784">#3784</a>
        opened by <a href="https://github.com/nipunn1313">@nipunn1313</a>
        on 2022-06-02 22:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/nipunn1313">@nipunn1313</a></div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>3.1.14</p>
<h3>Describe your use case</h3>
<p>Would like something like this:</p>
<pre><code>#[derive(Parser, Debug)]
struct Args {
    /// Choice of variant
    #[clap(long, arg_enum)]
    v: Variants
}

#[derive(ArgEnum, Clone, Copy, Debug)]
pub enum Variants {
    /// Variant 1
    V1,
    /// Variant 2
    V2,
    /// Variant 3
    V3,
}

fn main() {
  let args = Args::parse();
}
</code></pre>
<h3>Describe the solution you'd like</h3>
<p>I would ideally like <code>--help</code> to show the description of the variants (V1, V2, V3).
Currently, it just shows the docstring for <code>v: Variants</code></p>
<h3>Alternatives, if applicable</h3>
<p>Could also work to have this be gated behind a derive arg attribute on the struct</p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @nipunn1313 on 2022-06-02 22:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-06-03 00:07</div>
            <div class="timeline-body"><p>I believe this is a duplicate of https://github.com/clap-rs/clap/issues/3312 which was implemented in https://github.com/clap-rs/clap/pull/3503 which was released in 3.1.4.</p>
<p>It is gated behind <code>unstable-v4</code> as we were uncomfortable with taking a doc string we previously ignored and starting to put it in the help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2022-06-03 00:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nipunn1313">@nipunn1313</a> on 2022-06-03 00:55</div>
            <div class="timeline-body"><p>thanks! Appreciate the team behind clap</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hulxv">@hulxv</a> on 2022-06-04 03:33</div>
            <div class="timeline-body"><blockquote>
<p>I believe this is a duplicate of #3312 which was implemented in #3503 which was released in 3.1.4.</p>
<p>It is gated behind <code>unstable-v4</code> as we were uncomfortable with taking a doc string we previously ignored and starting to put it in the help.</p>
</blockquote>
<p>Is it possible to do it by <strong>derive</strong> way like that's example</p>
<pre><code class="language-rust">#[derive(Parser, Debug)]
struct Args {
    /// Choice of variant
    #[clap(long, arg_enum)]
    v: Variants
}

#[derive(ArgEnum, Clone, Copy, Debug)]
pub enum Variants {
    /// Variant 1
    V1,
    /// Variant 2
    V2,
    /// Variant 3
    V3,
}

fn main() {
  let args = Args::parse();
}
</code></pre>
<p>or that's available for <strong>builder</strong> only now?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-06-04 12:03</div>
            <div class="timeline-body"><p>Yes, the derive will automatically pick up doc comments.  While the PR didn't explicitly add any code for that, it picked it up through shared code.  I'm adding an explicit test for it.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:48:35 UTC
    </footer>
</body>
</html>
