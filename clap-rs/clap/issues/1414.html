<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clap doesn't compile on macOS - clap-rs/clap #1414</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>clap doesn&#x27;t compile on macOS</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/1414">#1414</a>
        opened by <a href="https://github.com/gedigi">@gedigi</a>
        on 2019-02-16 23:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gedigi">@gedigi</a></div>
            <div class="timeline-body">

Rust Version
<p>rustc 1.21.0 (3b72af97e 2017-10-09)</p>
Affected Version of clap
<p>2.32.0</p>
Bug or Feature Request Summary
<p>clap doesn&#x27;t compile on macOS with rust 1.21.0, which according to the CHANGELOG is the lowest supported version. The problem appears to be in libc, which is a dependency of atty.</p>
Expected Behavior Summary
<p><code>cargo build</code> completes without errors.</p>
Actual Behavior Summary
<pre><code>$ cargo build
   Compiling libc v0.2.48
error: const fns are an unstable feature
    --&gt; ~/.cargo/registry/src/github.com-1ecc6299db9ec823/libc-0.2.48/src/unix/bsd/apple/mod.rs:2388:42
     |
2388 |     const __DARWIN_ALIGNBYTES32: usize = mem::size_of::&lt;u32&gt;() - 1;
     |                                          ^^^^^^^^^^^^^^^^^^^^^
     |
     = help: in Nightly builds, add `#![feature(const_fn)]` to the crate attributes to enable

error: aborting due to previous error

error: Could not compile `libc`.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dylan-DPC-zz">@Dylan-DPC-zz</a> on 2019-06-21 13:14</div>
            <div class="timeline-body"><p>thanks for reporting this. however since we are close to a 3.0 release, closing this as it isn&#x27;t relevant anymore.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Dylan-DPC-zz">@Dylan-DPC-zz</a> on 2019-06-21 13:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2019-06-21 13:21</div>
            <div class="timeline-body"><p>@gedigi Note that the <a href="https://github.com/clap-rs/clap/blob/784524f7eb193e35f81082cc69454c8c21b948f7/.travis.yml#L8">MSRV is Rust 1.31</a>, not Rust 1.21. Rust 1.21 is pretty ancient at this point.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:57:20 UTC
    </footer>
</body>
</html>
