<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`App` feels like an awkward name in the API - clap-rs/clap #3089</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>App</code> feels like an awkward name in the API</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/3089">#3089</a>
        opened by <a href="https://github.com/epage">@epage</a>
        on 2021-12-08 19:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epage">@epage</a></div>
            <div class="timeline-body"><p>Maintainer&#x27;s notes</p>
<ul>
<li>The plan is to rename <code>App</code> to <code>Command</code>, including in other names like <code>app_from_crate</code> and <code>AppSettings</code></li>
</ul>
<hr>
<p>clap version: master</p>
<p>Existing code:</p>
<pre><code>use clap::{app_from_crate, arg, App, AppSettings};

fn main() {
    let matches = app_from_crate!()
        .global_setting(AppSettings::PropagateVersion)
        .global_setting(AppSettings::UseLongFormatForHelpSubcommand)
        .setting(AppSettings::SubcommandRequiredElseHelp)
        .subcommand(
            App::new(&quot;add&quot;)
                .about(&quot;Adds files to myapp&quot;)
                .arg(arg!([NAME])),
        )
        .get_matches();

    match matches.subcommand() {
        Some((&quot;add&quot;, sub_matches)) =&gt; println!(
            &quot;&#x27;myapp add&#x27; was used, name is: {:?}&quot;,
            sub_matches.value_of(&quot;NAME&quot;)
        ),
        _ =&gt; unreachable!(),
    }
}
</code></pre>
<p>Personally, its always felt weird constructing an &quot;App&quot; and then adding &quot;apps&quot; as subcommands.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-08 19:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: app</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-08 19:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-12-08 19:48</div>
            <div class="timeline-body"><p>I&#x27;ve considered names like <code>Parser</code> or <code>ParserBuilder</code> (see #2911) but we run into conflicts between builder and derive traits.</p>
<p>When <a href="https://docs.rs/clap/3.0.0-rc.0/clap/struct.App.html#impl-2">splitting up the impl blocks in the docs</a>, I had the idea for <code>Command</code>.  I think this makes more sense for the argument to <code>Command::new</code>, in subcommand context, etc.</p>
<p>See</p>
<pre><code>use clap::{app_from_crate, arg, App, AppSettings};

fn main() {
    let matches = command_from_crate!()
        .global_setting(CommandSettings::PropagateVersion)
        .global_setting(CommandSettings::UseLongFormatForHelpSubcommand)
        .setting(CommandSettings::SubcommandRequiredElseHelp)
        .subcommand(
            Command::new(&quot;add&quot;)
                .about(&quot;Adds files to myapp&quot;)
                .arg(arg!([NAME])),
        )
        .get_matches();

    match matches.subcommand() {
        Some((&quot;add&quot;, sub_matches)) =&gt; println!(
            &quot;&#x27;myapp add&#x27; was used, name is: {:?}&quot;,
            sub_matches.value_of(&quot;NAME&quot;)
        ),
        _ =&gt; unreachable!(),
    }
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nicoburns">@nicoburns</a> on 2021-12-08 20:50</div>
            <div class="timeline-body"><p><code>Command</code> seems right to me. That&#x27;s what I&#x27;ve seen other CLI parsing libraries use for this concept. I suppose <code>Subcommand</code> could also work to match the method name. <code>App</code> definitely seems confusing to me. I would expect <code>App</code> to contain the core logic of my program not CLI argument parsing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M-breaking-change</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-09 00:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">E-easy</span> added by <a href="https://github.com/epage">@epage</a> on 2021-12-13 22:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;4.0&quot; by <a href="https://github.com/epage">@epage</a> on 2021-12-14 15:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#2911</a> on 2021-12-14 15:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#3472</a> on 2022-02-15 13:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#3473</a> on 2022-02-15 14:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a>clap-rs/clap#3474</a> on 2022-02-15 14:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2022-02-15 15:35</div>
            <div class="timeline-body"><p>We&#x27;ve now done</p>
<ul>
<li><code>App</code> -&gt; <code>Command</code></li>
<li><code>app_from_crate</code> -&gt; <code>command</code></li>
<li><code>IntoApp::into_app</code> -&gt; <code>CommandFactory::command</code></li>
</ul>
<p>The only thing left is removing the deprecations in 4.0.   Since we have #3021 for that, going to close this out.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/epage">@epage</a> on 2022-02-15 15:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:58:31 UTC
    </footer>
</body>
</html>
