<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`multiple_values` does only take the first value - clap-rs/clap #3045</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`multiple_values` does only take the first value</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/3045">#3045</a>
        opened by <a href="https://github.com/b1rger">@b1rger</a>
        on 2021-11-22 19:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/b1rger">@b1rger</a> on 2021-11-22 19:36</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the existing issues</li>
</ul>
<h3>Rust Version</h3>
<p>rustc 1.56.0</p>
<h3>Clap Version</h3>
<p>3.0.0-beta.5</p>
<h3>Minimal reproducible code</h3>
<pre><code class="language-rust">use clap::{Parser};

#[derive(Parser)]
struct Opts {
    #[clap(multiple_values=true, takes_value=true)]
    date: Option&lt;String&gt;,
}

fn main() {
    let opts: Opts = Opts::parse();
    println!(&quot;{:?}&quot;, opts.date);
}

</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<p>cargo run -- 2020 03 05</p>
<h3>Actual Behaviour</h3>
<p>Some(&quot;2020&quot;)</p>
<h3>Expected Behaviour</h3>
<p>Some(&quot;2020 03 05&quot;) or maybe a vector?</p>
<h3>Additional Context</h3>
<p><em>No response</em></p>
<h3>Debug Output</h3>
<p>[            clap::build::app]  App::_do_parse
[            clap::build::app]  App::_build
[            clap::build::app]  App::_propagate:claptest
[            clap::build::app]  App::_check_help_and_version
[            clap::build::app]  App::_check_help_and_version: Removing generated version
[            clap::build::app]  App::_propagate_global_args:claptest
[            clap::build::app]  App::_derive_display_order:claptest
[clap::build::app::debug_asserts]       App::_debug_asserts
[clap::build::arg::debug_asserts]       Arg::_debug_asserts:help
[clap::build::arg::debug_asserts]       Arg::_debug_asserts:date
[         clap::parse::parser]  Parser::get_matches_with
[         clap::parse::parser]  Parser::_build
[         clap::parse::parser]  Parser::_verify_positionals
[         clap::parse::parser]  Parser::get_matches_with: Begin parsing 'RawOsStr(&quot;2020&quot;)' ([50, 48, 50, 48])
[         clap::parse::parser]  Parser::get_matches_with: Positional counter...1
[         clap::parse::parser]  Parser::get_matches_with: Low index multiples...false
[         clap::parse::parser]  Parser::possible_subcommand: arg=RawOsStr(&quot;2020&quot;)
[         clap::parse::parser]  Parser::get_matches_with: sc=None
[         clap::parse::parser]  Parser::add_val_to_arg; arg=date, val=RawOsStr(&quot;2020&quot;)
[         clap::parse::parser]  Parser::add_val_to_arg; trailing_values=false, DontDelimTrailingVals=false
[         clap::parse::parser]  Parser::add_single_val_to_arg: adding val...&quot;2020&quot;
[         clap::parse::parser]  Parser::add_single_val_to_arg: cur_idx:=1
[            clap::build::app]  App::groups_for_arg: id=date
[    clap::parse::arg_matcher]  ArgMatcher::needs_more_vals: o=date
[    clap::parse::arg_matcher]  ArgMatcher::inc_occurrence_of: arg=date
[            clap::build::app]  App::groups_for_arg: id=date
[         clap::parse::parser]  Parser::get_matches_with: Begin parsing 'RawOsStr(&quot;03&quot;)' ([48, 51])
[         clap::parse::parser]  Parser::get_matches_with: Positional counter...1
[         clap::parse::parser]  Parser::get_matches_with: Low index multiples...false
[         clap::parse::parser]  Parser::add_val_to_arg; arg=date, val=RawOsStr(&quot;03&quot;)
[         clap::parse::parser]  Parser::add_val_to_arg; trailing_values=false, DontDelimTrailingVals=false
[         clap::parse::parser]  Parser::add_single_val_to_arg: adding val...&quot;03&quot;
[         clap::parse::parser]  Parser::add_single_val_to_arg: cur_idx:=2
[            clap::build::app]  App::groups_for_arg: id=date
[    clap::parse::arg_matcher]  ArgMatcher::needs_more_vals: o=date
[    clap::parse::arg_matcher]  ArgMatcher::inc_occurrence_of: arg=date
[            clap::build::app]  App::groups_for_arg: id=date
[         clap::parse::parser]  Parser::get_matches_with: Begin parsing 'RawOsStr(&quot;05&quot;)' ([48, 53])
[         clap::parse::parser]  Parser::get_matches_with: Positional counter...1
[         clap::parse::parser]  Parser::get_matches_with: Low index multiples...false
[         clap::parse::parser]  Parser::add_val_to_arg; arg=date, val=RawOsStr(&quot;05&quot;)
[         clap::parse::parser]  Parser::add_val_to_arg; trailing_values=false, DontDelimTrailingVals=false
[         clap::parse::parser]  Parser::add_single_val_to_arg: adding val...&quot;05&quot;
[         clap::parse::parser]  Parser::add_single_val_to_arg: cur_idx:=3
[            clap::build::app]  App::groups_for_arg: id=date
[    clap::parse::arg_matcher]  ArgMatcher::needs_more_vals: o=date
[    clap::parse::arg_matcher]  ArgMatcher::inc_occurrence_of: arg=date
[            clap::build::app]  App::groups_for_arg: id=date
[         clap::parse::parser]  Parser::remove_overrides
[         clap::parse::parser]  Parser::remove_overrides:iter:date
[      clap::parse::validator]  Validator::validate
[         clap::parse::parser]  Parser::add_env: Checking arg <code>--help</code>
[         clap::parse::parser]  Parser::add_env: Skipping existing arg <code>&lt;DATE&gt;...</code>
[         clap::parse::parser]  Parser::add_defaults
[         clap::parse::parser]  Parser::add_defaults:iter:date:
[         clap::parse::parser]  Parser::add_value: doesn't have conditional defaults
[         clap::parse::parser]  Parser::add_value:iter:date: doesn't have default vals
[         clap::parse::parser]  Parser::add_value:iter:date: doesn't have default missing vals
[      clap::parse::validator]  Validator::validate_conflicts
[      clap::parse::validator]  Validator::validate_exclusive
[      clap::parse::validator]  Validator::validate_exclusive:iter:date
[      clap::parse::validator]  Validator::gather_conflicts
[      clap::parse::validator]  Validator::gather_conflicts:iter: id=date
[            clap::build::app]  App::groups_for_arg: id=date
[      clap::parse::validator]  Validator::validate_required: required=ChildGraph([])
[      clap::parse::validator]  Validator::gather_requirements
[      clap::parse::validator]  Validator::gather_requirements:iter:date
[      clap::parse::validator]  Validator::validate_required_unless
[      clap::parse::validator]  Validator::validate_matched_args
[      clap::parse::validator]  Validator::validate_matched_args:iter:date: vals=Flatten {
inner: FlattenCompat {
iter: Fuse {
iter: Some(
Iter(
[
[
&quot;2020&quot;,
&quot;03&quot;,
&quot;05&quot;,
],
],
),
),
},
frontiter: None,
backiter: None,
},
}
[      clap::parse::validator]  Validator::validate_arg_num_vals
[      clap::parse::validator]  Validator::validate_arg_values: arg=&quot;date&quot;
[      clap::parse::validator]  Validator::validate_arg_values: checking validator...
[      clap::parse::validator]  good
[      clap::parse::validator]  Validator::validate_arg_values: checking validator...
[      clap::parse::validator]  good
[      clap::parse::validator]  Validator::validate_arg_values: checking validator...
[      clap::parse::validator]  good
[      clap::parse::validator]  Validator::validate_arg_requires:&quot;date&quot;
[      clap::parse::validator]  Validator::validate_arg_num_occurs: &quot;date&quot;=3
[    clap::parse::arg_matcher]  ArgMatcher::get_global_values: global_arg_vec=[help]
Some(&quot;2020&quot;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @b1rger on 2021-11-22 19:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mkayaalp">@mkayaalp</a> on 2021-11-22 19:41</div>
            <div class="timeline-body"><p>The type needs to be a <code>Vec&lt;T&gt;</code>:</p>
<pre><code class="language-diff">-     date: Option&lt;String&gt;,
+     date: Vec&lt;String&gt;,
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/b1rger">@b1rger</a> on 2021-11-22 19:43</div>
            <div class="timeline-body"><blockquote>
<p>The type needs to be a Vec<T></p>
</blockquote>
<p>Ah, oke, I didn't think of that! Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @b1rger on 2021-11-22 19:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:08 UTC
    </footer>
</body>
</html>
