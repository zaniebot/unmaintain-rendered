<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clap_mangen does not write the arg information in the subcommand - clap-rs/clap #4818</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>clap_mangen does not write the arg information in the subcommand</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/4818">#4818</a>
        opened by <a href="https://github.com/eatradish">@eatradish</a>
        on 2023-04-01 07:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eatradish">@eatradish</a></div>
            <div class="timeline-body">Please complete the following tasks
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
Rust Version
<p>rustc 1.68.2 (9eb3afe9e 2023-03-27)</p>
Clap Version
<p>clap 4.2.1</p>
Minimal reproducible code
<pre><code>fn main() -&gt; std::io::Result&lt;()&gt; {
    let cmd = command_builder();

    let man = clap_mangen::Man::new(cmd);
    let mut buffer: Vec&lt;u8&gt; = Default::default();
    man.render(&amp;mut buffer)?;

    let man_dir = std::path::PathBuf::from(
        std::env::var_os(&quot;CARGO_MANIFEST_DIR&quot;).ok_or(std::io::ErrorKind::NotFound)?,
    )
    .join(&quot;man&quot;);

    if !man_dir.is_dir() {
        std::fs::create_dir_all(&amp;man_dir)?;
    }

    std::fs::write(man_dir.join(&quot;oma.1&quot;), buffer)?;

    Ok(())
}

fn command_builder() {
command!()
        .subcommand(
            Command::new(&quot;install&quot;)
                .about(&quot;Install Package&quot;)
                .arg(&amp;pkgs)
                .arg(
                    Arg::new(&quot;install_dbg&quot;)
                        .alias(&quot;dbg&quot;)
                        .long(&quot;install-dbg&quot;)
                        .help(&quot;Install package(s) debug symbol&quot;)
                        .requires(&quot;packages&quot;)
                        .action(ArgAction::SetTrue)
                )
                .arg(
                    Arg::new(&quot;reinstall&quot;)
                        .long(&quot;reinstall&quot;)
                        .help(&quot;Reinstall package(s)&quot;)
                        .requires(&quot;packages&quot;)
                        .action(ArgAction::SetTrue),
                )
        )
}
</code></pre>
Steps to reproduce the bug with the above code
<ol>
<li><code>cargo build --release</code></li>
<li>Check SRCDIR/man/oma.1 file</li>
<li>See result, like:</li>
</ol>
<pre><code>...
SUBCOMMANDS
       oma-install(1)
              Install Package

       oma-upgrade(1)
              Update Package

...
</code></pre>
<p>Does not have argument help information.</p>
Actual Behaviour
<p>No information is written to the argment in the subcommand</p>
Expected Behaviour
<p>written to the argment in the subcommand</p>
Additional Context
<p><em>No response</em></p>
Debug Output
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by <a href="https://github.com/eatradish">@eatradish</a> on 2023-04-01 07:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;clap_mangen does not write the parameter information in the subcommand&quot; to &quot;clap_mangen does not write the arg information in the subcommand&quot; by <a href="https://github.com/eatradish">@eatradish</a> on 2023-04-01 07:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2023-04-03 20:18</div>
            <div class="timeline-body"><blockquote>
<p>No information is written to the argment in the subcommand</p>
</blockquote>
<p>What do you mean by &quot;argument help information&quot;?</p>
<p>Are you expecting the one manpage to service all subcommands?  Currently, we only support generating man pages for the model where the is one man page per subcommand.</p>
<p>See also</p>
<ul>
<li>#3365</li>
<li>#1334</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eatradish">@eatradish</a> on 2023-04-05 14:56</div>
            <div class="timeline-body"><p>Looks like your advice solved my problem, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/eatradish">@eatradish</a> on 2023-04-05 14:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:59:43 UTC
    </footer>
</body>
</html>
