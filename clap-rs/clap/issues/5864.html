<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long help only - clap-rs/clap #5864</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Long help only</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/clap-rs/clap/issues/5864">#5864</a>
        opened by <a href="https://github.com/nic-hartley">@nic-hartley</a>
        on 2025-01-01 23:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nic-hartley">@nic-hartley</a> on 2025-01-01 23:55</div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[X] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Clap Version</h3>
<p>4.5.23</p>
<h3>Describe your use case</h3>
<p>I always want the long help to be displayed in every scenario, without having to manually write glue code for every single command and subcommand and edge case.</p>
<h3>Describe the solution you'd like</h3>
<p><code>long_help_only</code> in the same place as <code>disable_help_flag</code>, which makes the long help show up whenever either long or short help is requested.</p>
<h3>Alternatives, if applicable</h3>
<ol>
<li>Status quo: There is no way to do this without manually writing significant amounts of glue code to add a <code>--help</code> flag to every subcommand with the <code>HelpLong</code> action, <em>as well as</em> extra handling around parsing at every level (which I haven't even figured out! It's possible this isn't even possible!) to display the long help in case of usage errors/missing required subcommands, instead of the short help that's the default.</li>
<li>Delete short help entirely: This would make me personally happy because I've had to fight it every time I use clap, but I suspect I'm in the minority with that opinion, so I don't think it'd be a popular move.</li>
<li>A more general, command-wide formatting system. I think this is something clap would benefit from -- something I've unsuccessfully fought in the past is clap's default formatting, which I generally dislike (I don't like underlines in my CLI at all!) -- but it's a massively overengineered solution to this small and (I think) relatively simple use-case.</li>
</ol>
<h3>Additional Context</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-enhancement</span> added by @nic-hartley on 2025-01-01 23:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-01-02 14:42</div>
            <div class="timeline-body"><blockquote>
<p>long_help_only in the same place as disable_help_flag, which makes the long help show up whenever either long or short help is requested.</p>
</blockquote>
<p>For each entry point we add like this, we make clap</p>
<ul>
<li>Harder to use because it makes it more difficult to find functionality people are looking for</li>
<li>Slower to compiler</li>
<li>Have a larger binary size</li>
</ul>
<p>We are instead trying to focus on a common set of behaviors across applications and providing general extension points.</p>
<blockquote>
<p>Status quo: There is no way to do this without manually writing significant amounts of glue code to add a --help flag to every subcommand with the HelpLong action, as well as extra handling around parsing at every level (which I haven't even figured out! It's possible this isn't even possible!) to display the long help in case of usage errors/missing required subcommands, instead of the short help that's the default.</p>
</blockquote>
<p>Why do you need &quot;extra handling of parsing at every level&quot;?</p>
<p>I feel I'm missing something in terms of why this is a lot of glue code.  If you use a derive, you can define one struct that you flatten into every subcommand struct.  If you use the builder API, its a single function to do the same.  Each one just needs to set one <code>Command</code> attribute and add a new <code>Arg</code>.</p>
<blockquote>
<p>A more general, command-wide formatting system. I think this is something clap would benefit from -- something I've unsuccessfully fought in the past is clap's default formatting, which I generally dislike (I don't like underlines in my CLI at all!) -- but it's a massively overengineered solution to this small and (I think) relatively simple use-case.</p>
</blockquote>
<p>As I said, our focus is on general extension points.  We are tracking this overall at #3476.  I'd like to move help generation to be a behind a trait and allow people to select the help generation policy they want.  This will allow people to pull in what they need, reducing binary size and build times, and allow complete customization.  For example, we can split our current help generator into ShortHelpWriter, LongHelpWriter, TemplatedHelpWriter, StaticHelpWriter.  We could provide a composite type for any dynamic capabilities we want.</p>
<p>I don't see us writing a bespoke formatting system though. We have considered separating out the extracting of data used for generating help from the formatter, making it easier to write a custom formatter.</p>
<blockquote>
<p>which I generally dislike (I don't like underlines in my CLI at all!)</p>
</blockquote>
<p>Are you aware of <a href="https://docs.rs/clap/latest/clap/struct.Command.html#method.styles"><code>Command::styles</code></a>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-06-10 15:31</div>
            <div class="timeline-body"><p>As this is just a convenience and we have other plans being tracked to help with this, I'm going to go ahead and close this.  If there is a reason we should keep this open, let us know!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @epage on 2025-06-10 15:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:35:42 UTC
    </footer>
</body>
</html>
