<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>-h, --help generate trailing spaces - clap-rs/clap #1094</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>-h, --help generate trailing spaces</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/1094">#1094</a>
        opened by <a href="https://github.com/jakwings">@jakwings</a>
        on 2017-11-06 04:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jakwings">@jakwings</a> on 2017-11-06 04:10</div>
            <div class="timeline-body"><!-- Issuehunt Badges -->

<p><a href="https://issuehunt.io/r/clap-rs/clap/issues/1094"><img alt="Issuehunt badges" src="https://img.shields.io/badge/IssueHunt-%2410%20Rewarded-%237E24E3.svg" /></a></p>
<!-- /Issuehunt Badges -->

<h3>Rust Version</h3>
<p>rustc 1.21.0 (3b72af97e 2017-10-09)</p>
<h3>Affected Version of clap</h3>
<p>clap 2.27.1</p>
<h3>Expected Behavior Summary</h3>
<p>The help info should not contain unexpected trailing spaces for any lines of text.</p>
<h3>Actual Behavior Summary</h3>
<p>Some text ends with spaces, especially after the flag names.</p>
<h3>Steps to Reproduce the issue</h3>
<p><code>program --help</code> or <code>program -h</code>.</p>
<h3>Sample Code</h3>
<pre><code class="language-rust">extern crate clap;
use clap::{App, Arg};

fn main() {
    let _ = App::new(&quot;clap-space&quot;)
        .arg(Arg::with_name(&quot;a&quot;).long(&quot;flag-a&quot;).help(&quot;The first flag.&quot;))
        .arg(Arg::with_name(&quot;b&quot;).long(&quot;flag-b&quot;).help(&quot;The second flag.&quot;))
        .print_long_help();
}
</code></pre>
<h3>Debug output</h3>
<pre><code>DEBUG:clap:Parser::propagate_settings: self=clap-space, g_settings=AppFlags(
    NEEDS_LONG_HELP | NEEDS_LONG_VERSION | NEEDS_SC_HELP | UTF8_NONE | COLOR_AUTO
)
DEBUG:clap:Parser::create_help_and_version;
DEBUG:clap:Parser::create_help_and_version: Building --help
DEBUG:clap:Parser::create_help_and_version: Building --version
DEBUG:clap:Parser::propagate_settings: self=clap-space, g_settings=AppFlags(
    NEEDS_LONG_HELP | NEEDS_LONG_VERSION | NEEDS_SC_HELP | UTF8_NONE | COLOR_AUTO
)
DEBUG:clap:Parser::create_help_and_version;
DEBUG:clap:Help::write_app_help;
DEBUG:clap:Help::write_parser_help;
DEBUG:clap:Help::write_parser_help;
DEBUG:clap:Parser::color;
DEBUG:clap:Parser::color: Color setting...Auto
DEBUG:clap:is_a_tty: stderr=false
DEBUG:clap:Help::new;
DEBUG:clap:Help::write_help;
DEBUG:clap:Help::write_default_help;
DEBUG:clap:Help::write_bin_name;
DEBUG:clap:Help::write_version;
DEBUG:clap:usage::create_usage_no_title;
DEBUG:clap:usage::get_required_usage_from: reqs=[], extra=None
DEBUG:clap:usage::get_required_usage_from: after init desc_reqs=[]
DEBUG:clap:usage::get_required_usage_from: no more children
DEBUG:clap:usage::get_required_usage_from: final desc_reqs=[]
DEBUG:clap:usage::get_required_usage_from: args_in_groups=[]
DEBUG:clap:usage::needs_flags_tag;
DEBUG:clap:usage::needs_flags_tag:iter: f=a;
DEBUG:clap:Parser::groups_for_arg: name=a
DEBUG:clap:Parser::groups_for_arg: No groups defined
DEBUG:clap:usage::needs_flags_tag:iter: [FLAGS] required
DEBUG:clap:usage::create_help_usage: usage=clap-space [FLAGS]
DEBUG:clap:Help::write_all_args;
DEBUG:clap:Help::write_args;
DEBUG:clap:Help::write_args: Current Longest...2
DEBUG:clap:Help::write_args: New Longest...8
DEBUG:clap:Help::write_args: Current Longest...8
DEBUG:clap:Help::write_args: New Longest...8
DEBUG:clap:Help::write_args: Current Longest...8
DEBUG:clap:Help::write_args: New Longest...8
DEBUG:clap:Help::write_args: Current Longest...8
DEBUG:clap:Help::write_args: New Longest...9
DEBUG:clap:Help::write_arg;
DEBUG:clap:Help::short;
DEBUG:clap:Help::long;
DEBUG:clap:Help::val: arg=--flag-a
DEBUG:clap:Help::spec_vals: a=--flag-a
DEBUG:clap:Help::val: Has switch...Yes
DEBUG:clap:Help::val: force_next_line...false
DEBUG:clap:Help::val: nlh...false
DEBUG:clap:Help::val: taken...21
DEBUG:clap:Help::val: help_width &gt; (width - taken)...15 &gt; (120 - 21)
DEBUG:clap:Help::val: longest...9
DEBUG:clap:Help::val: next_line...No
DEBUG:clap:write_spaces!: num=5
DEBUG:clap:Help::help;
DEBUG:clap:Help::help: Next Line...true
DEBUG:clap:Help::help: Too long...No
DEBUG:clap:Help::write_arg;
DEBUG:clap:Help::short;
DEBUG:clap:Help::long;
DEBUG:clap:Help::val: arg=--flag-b
DEBUG:clap:Help::spec_vals: a=--flag-b
DEBUG:clap:Help::val: Has switch...Yes
DEBUG:clap:Help::val: force_next_line...false
DEBUG:clap:Help::val: nlh...false
DEBUG:clap:Help::val: taken...21
DEBUG:clap:Help::val: help_width &gt; (width - taken)...16 &gt; (120 - 21)
DEBUG:clap:Help::val: longest...9
DEBUG:clap:Help::val: next_line...No
DEBUG:clap:write_spaces!: num=5
DEBUG:clap:Help::help;
DEBUG:clap:Help::help: Next Line...true
DEBUG:clap:Help::help: Too long...No
DEBUG:clap:Help::write_arg;
DEBUG:clap:Help::short;
DEBUG:clap:Help::long;
DEBUG:clap:Help::val: arg=--help
DEBUG:clap:Help::spec_vals: a=--help
DEBUG:clap:Help::val: Has switch...Yes
DEBUG:clap:Help::val: force_next_line...false
DEBUG:clap:Help::val: nlh...false
DEBUG:clap:Help::val: taken...21
DEBUG:clap:Help::val: help_width &gt; (width - taken)...23 &gt; (120 - 21)
DEBUG:clap:Help::val: longest...9
DEBUG:clap:Help::val: next_line...No
DEBUG:clap:write_spaces!: num=7
DEBUG:clap:Help::help;
DEBUG:clap:Help::help: Next Line...true
DEBUG:clap:Help::help: Too long...No
DEBUG:clap:Help::write_arg;
DEBUG:clap:Help::short;
DEBUG:clap:Help::long;
DEBUG:clap:Help::val: arg=--version
DEBUG:clap:Help::spec_vals: a=--version
DEBUG:clap:Help::val: Has switch...Yes
DEBUG:clap:Help::val: force_next_line...false
DEBUG:clap:Help::val: nlh...false
DEBUG:clap:Help::val: taken...21
DEBUG:clap:Help::val: help_width &gt; (width - taken)...26 &gt; (120 - 21)
DEBUG:clap:Help::val: longest...9
DEBUG:clap:Help::val: next_line...No
DEBUG:clap:write_spaces!: num=4
DEBUG:clap:Help::help;
DEBUG:clap:Help::help: Next Line...true
DEBUG:clap:Help::help: Too long...No
clap-space 

USAGE:
    clap-space [FLAGS]

FLAGS:
        --flag-a     
            The first flag.

        --flag-b     
            The second flag.

    -h, --help       
            Prints help information

    -V, --version    
            Prints version information
</code></pre>
<!-- Issuehunt content -->

<hr />
<details>
<summary>
<b>IssueHunt Summary</b>
</summary>

<h4><a href="https://issuehunt.io/u/knightpp"><img src='https://avatars2.githubusercontent.com/u/28928944?v=4' alt='knightpp' width=24 height=24> knightpp</a> has been rewarded.</h4>
<h3>Backers (Total: $10.00)</h3>
<ul>
<li><a href="https://issuehunt.io/u/pksunkara"><img src='https://avatars0.githubusercontent.com/u/174703?v=4' alt='pksunkara' width=24 height=24> pksunkara</a> ($10.00)</li>
</ul>
<h3>Submitted pull Requests</h3>
<ul>
<li><a href="https://issuehunt.io/r/clap-rs/clap/pull/2085">#2085 Don't print spaces in long help</a></li>
</ul>
<hr />
<h3>Tips</h3>
<ul>
<li>Checkout the <a href="https://issuehunt.io/r/clap-rs/clap/">Issuehunt explorer</a> to discover more funded issues.</li>
<li>Need some help from other developers? <a href="https://issuehunt.io/r/new">Add your repositories</a> on IssueHunt to raise funds.</details>

</li>
</ul>
<!-- /Issuehunt content-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-11-06 17:53</div>
            <div class="timeline-body"><p>This is partly an implementation issue that doesn't have a good work around. The help generation is segmented off where each &quot;section&quot; is written in isolation. Without greater coupling (or a larger refactor), the section that writes the spaces between the flags/values and the actual help line can't look ahead to see if there is actually anything that requires those spaces.</p>
<p>For the <code>long_help</code> it <em>might</em> be possible to look ahead since there is no possible way they'd need those spaces, but I'd have to dig deeper.</p>
<p>I agree it'd be better to have them gone, but is there an issue that these spaces are causing other than some additional bytes written to stdout?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> added by @kbknapp on 2017-11-06 17:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jakwings">@jakwings</a> on 2017-11-06 21:50</div>
            <div class="timeline-body"><p>Thanks for the details. No serious issue here. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help message</span> added by @kbknapp on 2017-11-07 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: intermediate</span> added by @kbknapp on 2017-11-07 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @kbknapp on 2017-11-07 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M: mentored</span> added by @kbknapp on 2017-11-07 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P4: nice to have</span> added by @kbknapp on 2017-11-07 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: enhancement</span> added by @kbknapp on 2017-11-07 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: RFC / question</span> removed by @kbknapp on 2017-11-07 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "3.1" by @pksunkara on 2020-04-12 10:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/issuehunt-oss[bot]">@issuehunt-oss[bot]</a> on 2020-05-27 14:31</div>
            <div class="timeline-body"><p><a href="https://issuehunt.io/u/pksunkara">@pksunkara</a> has funded $5.00 to this issue.</p>
<hr />
<ul>
<li>Submit pull request via <a href="https://issuehunt.io/repos/31315121/issues/1094">IssueHunt</a> to receive this reward.</li>
<li>Want to contribute? Chip in to this issue via <a href="https://issuehunt.io/repos/31315121/issues/1094">IssueHunt</a>.</li>
<li>Checkout the <a href="https://issuehunt.io/issues">IssueHunt Issue Explorer</a> to see more funded issues.</li>
<li>Need help from developers? <a href="https://issuehunt.io/r/new">Add your repository</a> on IssueHunt to raise funds.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">:dollar: Funded on Issuehunt</span> added by @issuehunt-oss[bot] on 2020-05-27 14:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/issuehunt-oss[bot]">@issuehunt-oss[bot]</a> on 2020-08-11 11:39</div>
            <div class="timeline-body"><p><a href="https://issuehunt.io/u/pksunkara">@pksunkara</a> has funded $5.00 to this issue.</p>
<hr />
<ul>
<li>Submit pull request via <a href="https://issuehunt.io/repos/31315121/issues/1094">IssueHunt</a> to receive this reward.</li>
<li>Want to contribute? Chip in to this issue via <a href="https://issuehunt.io/repos/31315121/issues/1094">IssueHunt</a>.</li>
<li>Checkout the <a href="https://issuehunt.io/issues">IssueHunt Issue Explorer</a> to see more funded issues.</li>
<li>Need help from developers? <a href="https://issuehunt.io/r/new">Add your repository</a> on IssueHunt to raise funds.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2085.html">clap-rs/clap#2085</a> on 2020-08-20 12:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @bors[bot] on 2020-08-20 18:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">:dollar: Funded on Issuehunt</span> removed by @issuehunt-oss[bot] on 2020-08-20 18:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/issuehunt-oss[bot]">@issuehunt-oss[bot]</a> on 2020-08-20 18:21</div>
            <div class="timeline-body"><p><a href="https://issuehunt.io/u/pksunkara">@pksunkara</a> has rewarded $9.00 to <a href="https://issuehunt.io/u/knightpp">@knightpp</a>. <a href="https://issuehunt.io/repos/31315121/issues/1094">See it on IssueHunt</a></p>
<ul>
<li>:moneybag: Total deposit: $10.00</li>
<li>:tada: Repository reward(0%): $0.00</li>
<li>:wrench: Service fee(10%): $1.00</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">:gift: Rewarded on Issuehunt</span> added by @issuehunt-oss[bot] on 2020-08-20 18:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:32 UTC
    </footer>
</body>
</html>
