<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Help message doesn't output  - clap-rs/clap #912</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Help message doesn't output </h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/912">#912</a>
        opened by <a href="https://github.com/kirillbobyrev">@kirillbobyrev</a>
        on 2017-03-21 18:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kirillbobyrev">@kirillbobyrev</a> on 2017-03-21 18:50</div>
            <div class="timeline-body"><p>If YAML is used running <code>program --help</code> would produce</p>
<pre><code>yml_app 1.0
an example using a .yml file to build a CLI
</code></pre>
<p>instead of</p>
<pre><code>yml_app 1.0
Kevin K. &lt;kbknapp@gmail.com&gt;
an example using a .yml file to build a CLI
</code></pre>
<h3>Rust Version</h3>
<p><code>rustc 1.16.0 (30cf806ef 2017-03-10)</code></p>
<h3>Affected Version of clap</h3>
<p><code>&quot;clap 2.21.2 (registry+https://github.com/rust-lang/crates.io-index)&quot;, name = &quot;clap&quot; &quot;checksum clap 2.21.2 (registry+https://github.com/rust-lang/crates.io-index)&quot; = &quot;58ad5e8142f3a5eab0c1cba5011aa383e009842936107fe4d94f1a8d380a1aec&quot;</code></p>
<h3>Steps to Reproduce the issue</h3>
<p>I am using the code from YAML example of the clap-rs repo trunk.</p>
<h3>Sample Code or Link to Sample Code</h3>
<p><strong>src/main.rs</strong></p>
<pre><code class="language-rust">#[macro_use]
extern crate clap;

fn main() {
    use clap::App;
    let yml = load_yaml!(&quot;cli.yaml&quot;);
    let m = App::from_yaml(yml).get_matches();

    if let Some(mode) = m.value_of(&quot;mode&quot;) {
        match mode {
            &quot;vi&quot; =&gt; println!(&quot;You are using vi&quot;),
            &quot;emacs&quot; =&gt; println!(&quot;You are using emacs...&quot;),
            _      =&gt; unreachable!()
        }
    } else {
        println!(&quot;--mode &lt;MODE&gt; wasn't used...&quot;);
    }
}
</code></pre>
<p><strong>src/cli.yaml</strong></p>
<pre><code class="language-yaml">name: yml_app
version: &quot;1.0&quot;
about: an example using a .yml file to build a CLI
author: Kevin K. &lt;kbknapp@gmail.com&gt;

# AppSettings can be defined as a list and are **not** ascii case sensitive
settings:
    - ArgRequiredElseHelp

# All Args must be defined in the 'args:' list where the name of the arg, is the
# key to a Hash object
args:
    # The name of this argument, is 'opt' which will be used to access the value
    # later in your Rust code
    - opt:
        help: example option argument from yaml
        short: o
        long: option
        multiple: true
        takes_value: true
    - pos:
        help: example positional argument from yaml
        index: 1
        # A list of possible values can be defined as a list
        possible_values:
            - fast
            - slow
    - flag:
        help: demo flag argument
        short: F
        multiple: true
        global: true
        # Conflicts, mutual overrides, and requirements can all be defined as a
        # list, where the key is the name of the other argument
        conflicts_with:
            - opt
        requires:
            - pos
    - mode:
        long: mode
        help: shows an option with specific values
        # possible_values can also be defined in this list format
        possible_values: [ vi, emacs ]
        takes_value: true
    - mvals:
        long: mult-vals
        help: demos an option which has two named values
        # value names can be described in a list, where the help will be shown
        # --mult-vals &lt;one&gt; &lt;two&gt;
        value_names:
            - one
            - two
    - minvals:
        long: min-vals
        multiple: true
        help: you must supply at least two values to satisfy me
        min_values: 2
    - maxvals:
        long: max-vals
        multiple: true
        help: you can only supply a max of 3 values for me!
        max_values: 3

# All subcommands must be listed in the 'subcommand:' object, where the key to
# the list is the name of the subcommand, and all settings for that command are
# are part of a Hash object
subcommands:
    # The nae of this subcommand will be 'subcmd' which can be accessed in your
    # Rust code later
    - subcmd:
        about: demos subcommands from yaml
        version: &quot;0.1&quot;
        author: Kevin K. &lt;kbknapp@gmail.com&gt;
        # Subcommand args are exactly like App args
        args:
            - scopt:
                short: B
                multiple: true
                help: example subcommand option
                takes_value: true
            - scpos1:
                help: example subcommand positional
                index: 1

# ArgGroups are supported as well, and must be sepcified in the 'groups:'
# object of this file
groups:
    # the name of the ArgGoup is specified here
    - min-max-vals:
        # All args and groups that are a part of this group are set here
        args:
            - minvals
            - maxvals
        # setting conflicts is done the same manner as setting 'args:'
        #
        # to make this group required, you could set 'required: true' but for
        # this example we won't do that.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kbknapp">@kbknapp</a> on 2017-03-22 00:42</div>
            <div class="timeline-body"><p>Interesting! I'd have thought this would be caught by a test! Ive got a broken finger right now and the cast is causing me to only type with one hand. But if someone wants to confirm this and take a stab at a fix it shlould be in <code>src/app/mod.rs</code> in the <code>From</code> impl.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: help message</span> added by @kbknapp on 2017-03-22 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: yaml parser</span> added by @kbknapp on 2017-03-22 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">D: easy</span> added by @kbknapp on 2017-03-22 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M: help wanted</span> added by @kbknapp on 2017-03-22 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">M: mentored</span> added by @kbknapp on 2017-03-22 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">P2: need to have</span> added by @kbknapp on 2017-03-22 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: bug</span> added by @kbknapp on 2017-03-22 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">W: 2.x</span> added by @kbknapp on 2017-03-22 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/914.html">clap-rs/clap#914</a> on 2017-03-22 10:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kirillbobyrev">@kirillbobyrev</a> on 2017-03-22 14:04</div>
            <div class="timeline-body"><p>@kbknapp @crazymerlyn Thank you very much!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kbknapp on 2017-03-22 23:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:07 UTC
    </footer>
</body>
</html>
