<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Positional arguments can't conflict with each other - clap-rs/clap #6105</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Positional arguments can't conflict with each other</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/clap-rs/clap/issues/6105">#6105</a>
        opened by <a href="https://github.com/feraxhp">@feraxhp</a>
        on 2025-08-14 11:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/feraxhp">@feraxhp</a></div>
            <div class="timeline-body"><h3>Please complete the following tasks</h3>
<ul>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/discussions">discussions</a></li>
<li>[x] I have searched the <a href="https://github.com/clap-rs/clap/issues">open</a> and <a href="https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed">rejected</a> issues</li>
</ul>
<h3>Rust Version</h3>
<p>rustc 1.88.0 (6b00bc388 2025-06-23)</p>
<h3>Clap Version</h3>
<p>4.5.45</p>
<h3>Minimal reproducible code</h3>
<pre><code class="language-rust">use clap::{Arg, ArgGroup, ArgMatches, Command, arg, command};

fn main() {
    let cli = Command::new(&quot;clone&quot;)
        .aliases([&quot;cl&quot;])
        .about(&quot;Clone a repository from a configured platform&quot;)
        .args([
            // Definimos 'repo' como un argumento posicional que ocupa el primer slot (index 1)
            Arg::new(&quot;repo&quot;)
                .required(true)
                .help(&quot;The name of the repository or a single argument&quot;),
            Arg::new(&quot;pconf&quot;)
                .num_args(2)
                .required(true)
                .value_names([&quot;pconf&quot;, &quot;url&quot;])
                .conflicts_with(&quot;repo&quot;)
                .help(&quot;The URL or repository path&quot;),
            // Arg::new(&quot;repo&quot;)
            //     .required(true)
            //     .help(&quot;The name of the repository or a single argument&quot;),
        ])
        .group(
            ArgGroup::new(&quot;clone_target&quot;)
                .arg(&quot;pconf&quot;)
                .arg(&quot;repo&quot;)
                .required(true)
        );

    // --- Testing: clone somearg ---
    println!(&quot;--- Testing: clone somearg ---&quot;);
    let res1 = cli.clone().try_get_matches_from(vec![&quot;clone&quot;, &quot;somearg&quot;]);

    match res1 {
        Ok(m) =&gt; {
            let s = m.get_one::&lt;String&gt;(&quot;repo&quot;);
            let p = m.get_one::&lt;String&gt;(&quot;pconf&quot;);
            // let u = m.get_one::&lt;String&gt;(&quot;url&quot;);

            println!(&quot;repo: {:?}&quot;, s); // Esperado: Some(&quot;somearg&quot;)
            println!(&quot;pconf: {:?}&quot;, p); // Esperado: None
            // println!(&quot;url_val: {:?}&quot;, u); // Esperado: None
        }
        Err(e) =&gt; {
            println!(&quot;Error: {}&quot;, e)
        }
    }

    // --- Testing: clone somearg butother ---
    println!(&quot;\n--- Testing: clone somearg butother ---&quot;);
    let res2 = cli
        .clone()
        .try_get_matches_from(vec![&quot;clone&quot;, &quot;l&quot;, &quot;somearg&quot;, &quot;butother&quot;]);

    match res2 {
        Ok(m) =&gt; {
            let s = m.get_one::&lt;String&gt;(&quot;repo&quot;);
            let p = m.get_many::&lt;String&gt;(&quot;pconf&quot;);
            // let u = m.get_one::&lt;String&gt;(&quot;url&quot;);

            println!(&quot;repo: {:?}&quot;, s); // Esperado: None
            println!(&quot;pconf: {:?}&quot;, p); // Esperado: Some(&quot;somearg&quot;)
            // println!(&quot;url_val: {:?}&quot;, u); // Esperado: Some(&quot;butother&quot;)
        }
        Err(e) =&gt; {
            println!(&quot;Error: {}&quot;, e)
        }
    }

    // --- Testing: clone --- (should error because 'required(true)' on group)
    println!(&quot;\n--- Testing: clone (no args) ---&quot;);
    let res3 = cli.clone().try_get_matches_from(vec![&quot;clone&quot;]);
    match res3 {
        Ok(m) =&gt; {
            println!(&quot;Parsed successfully: {:?}&quot;, m);
        }
        Err(e) =&gt; {
            println!(&quot;Error: {}&quot;, e); // Esperado: Error, porque se requiere un argumento
        }
    }
}

</code></pre>
<h3>Steps to reproduce the bug with the above code</h3>
<p>run <code>cargo run</code></p>
<h3>Actual Behaviour</h3>
<h1>Fails the second test</h1>
<pre><code class="language-output">--- Testing: clone somearg ---
repo: Some(&quot;somearg&quot;)
pconf: None

--- Testing: clone somearg butother ---
Error: error: the argument '&lt;repo&gt;' cannot be used with '&lt;pconf&gt; &lt;url&gt;'

Usage: clone &lt;&lt;pconf&gt; &lt;url&gt;|repo&gt;

For more information, try '--help'.


--- Testing: clone (no args) ---
Error: error: the following required arguments were not provided:
  &lt;&lt;pconf&gt; &lt;url&gt;|repo&gt;

Usage: clone &lt;&lt;pconf&gt; &lt;url&gt;|repo&gt;

For more information, try '--help'.
</code></pre>
<h3>Expected Behaviour</h3>
<p>The second test should pass, because the 2 arguments are supplied.</p>
<h3>Additional Context</h3>
<p>Well the idea is to have this behavior in the command line.</p>
<pre><code class="language-bash">clone somearg // matches somearg as repo
clone somearg butother // matches somearg as pconf and butother as url
</code></pre>
<p>I know u can accomplish this by letting the first position argument to have 1.. amount of args and manage the logic after the match, but that is not ideal, because it does not allow you to have different value parsers for each case.</p>
<h3>Debug Output</h3>
<pre><code>--- Testing: clone somearg ---
[clap_builder::builder::command]Command::_do_parse
[clap_builder::builder::command]Command::_build: name=&quot;clone&quot;
[clap_builder::builder::command]Command::_propagate:clone
[clap_builder::builder::command]Command::_check_help_and_version:clone expand_help_tree=false
[clap_builder::builder::command]Command::long_help_exists
[clap_builder::builder::command]Command::_check_help_and_version: Building default --help
[clap_builder::builder::command]Command::_propagate_global_args:clone
[clap_builder::builder::debug_asserts]Command::_debug_asserts
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:repo
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:pconf
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:help
[clap_builder::builder::debug_asserts]Command::_verify_positionals
[clap_builder::parser::parser]Parser::get_matches_with
[clap_builder::parser::parser]Parser::parse
[clap_builder::parser::parser]Parser::get_matches_with: Begin parsing '&quot;somearg&quot;'
[clap_builder::parser::parser]Parser::possible_subcommand: arg=Ok(&quot;somearg&quot;)
[clap_builder::parser::parser]Parser::get_matches_with: sc=None
[clap_builder::parser::parser]Parser::get_matches_with: Positional counter...1
[clap_builder::parser::parser]Parser::get_matches_with: Low index multiples...false
[clap_builder::parser::parser]Parser::resolve_pending: id=&quot;repo&quot;
[clap_builder::parser::parser]Parser::react action=Set, identifier=Some(Index), source=CommandLine
[clap_builder::parser::parser]Parser::remove_overrides: id=&quot;repo&quot;
[clap_builder::parser::arg_matcher]ArgMatcher::start_custom_arg: id=&quot;repo&quot;, source=CommandLine
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;repo&quot;
[clap_builder::parser::arg_matcher]ArgMatcher::start_custom_arg: id=&quot;clone_target&quot;, source=CommandLine
[clap_builder::parser::parser]Parser::push_arg_values: [&quot;somearg&quot;]
[clap_builder::parser::parser]Parser::add_single_val_to_arg: cur_idx:=1
[clap_builder::parser::arg_matcher]ArgMatcher::needs_more_vals: o=repo, pending=0
[clap_builder::parser::arg_matcher]ArgMatcher::needs_more_vals: expected=1, actual=0
[clap_builder::parser::parser]Parser::react not enough values passed in, leaving it to the validator to complain
[clap_builder::parser::parser]Parser::add_defaults
[clap_builder::parser::parser]Parser::add_defaults:iter:repo:
[clap_builder::parser::parser]Parser::add_default_value: doesn't have conditional defaults
[clap_builder::parser::parser]Parser::add_default_value:iter:repo: doesn't have default vals
[clap_builder::parser::parser]Parser::add_defaults:iter:pconf:
[clap_builder::parser::parser]Parser::add_default_value: doesn't have conditional defaults
[clap_builder::parser::parser]Parser::add_default_value:iter:pconf: doesn't have default vals
[clap_builder::parser::parser]Parser::add_defaults:iter:help:
[clap_builder::parser::parser]Parser::add_default_value: doesn't have conditional defaults
[clap_builder::parser::parser]Parser::add_default_value:iter:help: doesn't have default vals
[clap_builder::parser::validator]Validator::validate
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;repo&quot;
[clap_builder::parser::validator]Conflicts::gather_direct_conflicts id=&quot;repo&quot;, conflicts=[&quot;pconf&quot;]
[clap_builder::parser::validator]Conflicts::gather_direct_conflicts id=&quot;clone_target&quot;, conflicts=[]
[clap_builder::parser::validator]Validator::validate_conflicts
[clap_builder::parser::validator]Validator::validate_exclusive
[clap_builder::parser::validator]Validator::validate_conflicts::iter: id=&quot;repo&quot;
[clap_builder::parser::validator]Conflicts::gather_conflicts: arg=&quot;repo&quot;
[clap_builder::parser::validator]Conflicts::gather_conflicts: conflicts=[]
[clap_builder::parser::validator]Validator::validate_required: required=ChildGraph([Child { id: &quot;repo&quot;, children: [] }, Child { id: &quot;pconf&quot;, children: [] }, Child { id: &quot;clone_target&quot;, children: [] }])
[clap_builder::parser::validator]Validator::gather_requires
[clap_builder::parser::validator]Validator::gather_requires:iter:&quot;repo&quot;
[clap_builder::parser::validator]Validator::gather_requires:iter:&quot;clone_target&quot;
[clap_builder::parser::validator]Validator::gather_requires:iter:&quot;clone_target&quot;:group
[clap_builder::parser::validator]Validator::validate_required: is_exclusive_present=false
[clap_builder::parser::validator]Validator::validate_required:iter:aog=&quot;pconf&quot;
[clap_builder::parser::validator]Validator::validate_required:iter: This is an arg
[clap_builder::parser::validator]Validator::is_missing_required_ok: pconf
[clap_builder::parser::validator]Conflicts::gather_conflicts: arg=&quot;pconf&quot;
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;pconf&quot;
[clap_builder::parser::validator]Conflicts::gather_direct_conflicts id=&quot;pconf&quot;, conflicts=[&quot;repo&quot;, &quot;repo&quot;]
[clap_builder::parser::validator]Conflicts::gather_conflicts: conflicts=[&quot;repo&quot;, &quot;repo&quot;]
[clap_builder::parser::validator]Validator::is_missing_required_ok: true (self)
[clap_builder::parser::arg_matcher]ArgMatcher::get_global_values: global_arg_vec=[]
repo: Some(&quot;somearg&quot;)
pconf: None

--- Testing: clone somearg butother ---
[clap_builder::builder::command]Command::_do_parse
[clap_builder::builder::command]Command::_build: name=&quot;clone&quot;
[clap_builder::builder::command]Command::_propagate:clone
[clap_builder::builder::command]Command::_check_help_and_version:clone expand_help_tree=false
[clap_builder::builder::command]Command::long_help_exists
[clap_builder::builder::command]Command::_check_help_and_version: Building default --help
[clap_builder::builder::command]Command::_propagate_global_args:clone
[clap_builder::builder::debug_asserts]Command::_debug_asserts
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:repo
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:pconf
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:help
[clap_builder::builder::debug_asserts]Command::_verify_positionals
[clap_builder::parser::parser]Parser::get_matches_with
[clap_builder::parser::parser]Parser::parse
[clap_builder::parser::parser]Parser::get_matches_with: Begin parsing '&quot;l&quot;'
[clap_builder::parser::parser]Parser::possible_subcommand: arg=Ok(&quot;l&quot;)
[clap_builder::parser::parser]Parser::get_matches_with: sc=None
[clap_builder::parser::parser]Parser::get_matches_with: Positional counter...1
[clap_builder::parser::parser]Parser::get_matches_with: Low index multiples...false
[clap_builder::parser::parser]Parser::get_matches_with: Begin parsing '&quot;somearg&quot;'
[clap_builder::parser::parser]Parser::possible_subcommand: arg=Ok(&quot;somearg&quot;)
[clap_builder::parser::parser]Parser::get_matches_with: sc=None
[clap_builder::parser::parser]Parser::get_matches_with: Positional counter...2
[clap_builder::parser::parser]Parser::get_matches_with: Low index multiples...false
[clap_builder::parser::parser]Parser::resolve_pending: id=&quot;repo&quot;
[clap_builder::parser::parser]Parser::react action=Set, identifier=Some(Index), source=CommandLine
[clap_builder::parser::parser]Parser::remove_overrides: id=&quot;repo&quot;
[clap_builder::parser::arg_matcher]ArgMatcher::start_custom_arg: id=&quot;repo&quot;, source=CommandLine
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;repo&quot;
[clap_builder::parser::arg_matcher]ArgMatcher::start_custom_arg: id=&quot;clone_target&quot;, source=CommandLine
[clap_builder::parser::parser]Parser::push_arg_values: [&quot;l&quot;]
[clap_builder::parser::parser]Parser::add_single_val_to_arg: cur_idx:=1
[clap_builder::parser::arg_matcher]ArgMatcher::needs_more_vals: o=repo, pending=0
[clap_builder::parser::arg_matcher]ArgMatcher::needs_more_vals: expected=1, actual=0
[clap_builder::parser::parser]Parser::react not enough values passed in, leaving it to the validator to complain
[clap_builder::parser::parser]Parser::get_matches_with: Begin parsing '&quot;butother&quot;'
[clap_builder::parser::parser]Parser::get_matches_with: Positional counter...2
[clap_builder::parser::parser]Parser::get_matches_with: Low index multiples...false
[clap_builder::parser::parser]Parser::resolve_pending: id=&quot;pconf&quot;
[clap_builder::parser::parser]Parser::react action=Set, identifier=Some(Index), source=CommandLine
[clap_builder::parser::parser]Parser::remove_overrides: id=&quot;pconf&quot;
[clap_builder::parser::arg_matcher]ArgMatcher::start_custom_arg: id=&quot;pconf&quot;, source=CommandLine
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;pconf&quot;
[clap_builder::parser::arg_matcher]ArgMatcher::start_custom_arg: id=&quot;clone_target&quot;, source=CommandLine
[clap_builder::parser::parser]Parser::push_arg_values: [&quot;somearg&quot;, &quot;butother&quot;]
[clap_builder::parser::parser]Parser::add_single_val_to_arg: cur_idx:=2
[clap_builder::parser::parser]Parser::add_single_val_to_arg: cur_idx:=3
[clap_builder::parser::arg_matcher]ArgMatcher::needs_more_vals: o=pconf, pending=0
[clap_builder::parser::arg_matcher]ArgMatcher::needs_more_vals: expected=2, actual=0
[clap_builder::parser::parser]Parser::react not enough values passed in, leaving it to the validator to complain
[clap_builder::parser::parser]Parser::add_defaults
[clap_builder::parser::parser]Parser::add_defaults:iter:repo:
[clap_builder::parser::parser]Parser::add_default_value: doesn't have conditional defaults
[clap_builder::parser::parser]Parser::add_default_value:iter:repo: doesn't have default vals
[clap_builder::parser::parser]Parser::add_defaults:iter:pconf:
[clap_builder::parser::parser]Parser::add_default_value: doesn't have conditional defaults
[clap_builder::parser::parser]Parser::add_default_value:iter:pconf: doesn't have default vals
[clap_builder::parser::parser]Parser::add_defaults:iter:help:
[clap_builder::parser::parser]Parser::add_default_value: doesn't have conditional defaults
[clap_builder::parser::parser]Parser::add_default_value:iter:help: doesn't have default vals
[clap_builder::parser::validator]Validator::validate
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;repo&quot;
[clap_builder::parser::validator]Conflicts::gather_direct_conflicts id=&quot;repo&quot;, conflicts=[&quot;pconf&quot;]
[clap_builder::parser::validator]Conflicts::gather_direct_conflicts id=&quot;clone_target&quot;, conflicts=[]
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;pconf&quot;
[clap_builder::parser::validator]Conflicts::gather_direct_conflicts id=&quot;pconf&quot;, conflicts=[&quot;repo&quot;, &quot;repo&quot;]
[clap_builder::parser::validator]Validator::validate_conflicts
[clap_builder::parser::validator]Validator::validate_exclusive
[clap_builder::parser::validator]Validator::validate_exclusive:iter:&quot;repo&quot;
[clap_builder::parser::validator]Validator::validate_exclusive:iter:&quot;clone_target&quot;
[clap_builder::parser::validator]Validator::validate_exclusive:iter:&quot;pconf&quot;
[clap_builder::parser::validator]Validator::validate_conflicts::iter: id=&quot;repo&quot;
[clap_builder::parser::validator]Conflicts::gather_conflicts: arg=&quot;repo&quot;
[clap_builder::parser::validator]Conflicts::gather_conflicts: conflicts=[&quot;pconf&quot;, &quot;pconf&quot;]
[clap_builder::parser::validator]Validator::build_conflict_err: name=&quot;repo&quot;
[ clap_builder::output::usage]Usage::create_usage_with_title
[ clap_builder::output::usage]Usage::create_usage_no_title
[ clap_builder::output::usage]Usage::create_smart_usage
[ clap_builder::output::usage]Usage::write_arg_usage; incl_reqs=true
[ clap_builder::output::usage]Usage::write_args: incls=[&quot;repo&quot;]
[ clap_builder::output::usage]Usage::get_args: unrolled_reqs=[&quot;repo&quot;, &quot;pconf&quot;, &quot;clone_target&quot;]
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[  clap_builder::builder::arg]Arg::name_no_brackets:pconf
[  clap_builder::builder::arg]Arg::name_no_brackets: val_names=[
    &quot;pconf&quot;,
    &quot;url&quot;,
]
[  clap_builder::builder::arg]Arg::name_no_brackets:repo
[  clap_builder::builder::arg]Arg::name_no_brackets: just name
[ clap_builder::output::usage]Usage::create_usage_with_title: usage=Usage: clone &lt;&lt;pconf&gt; &lt;url&gt;|repo&gt;
[clap_builder::builder::command]Command::color: Color setting...
[clap_builder::builder::command]Auto
[clap_builder::builder::command]Command::color: Color setting...
[clap_builder::builder::command]Auto
Error: error: the argument '&lt;repo&gt;' cannot be used with '&lt;pconf&gt; &lt;url&gt;'

Usage: clone &lt;&lt;pconf&gt; &lt;url&gt;|repo&gt;

For more information, try '--help'.

Backtrace:
   0: backtrace::backtrace::win64::trace
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\backtrace-0.3.75\src\backtrace\win64.rs:85
      backtrace::backtrace::trace_unsynchronized&lt;backtrace::capture::impl$4::create::closure_env$0&gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\backtrace-0.3.75\src\backtrace\mod.rs:66
   1: backtrace::backtrace::trace&lt;backtrace::capture::impl$4::create::closure_env$0&gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\backtrace-0.3.75\src\backtrace\mod.rs:53
   2: backtrace::capture::Backtrace::create
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\backtrace-0.3.75\src\capture.rs:294
   3: backtrace::capture::Backtrace::new
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\backtrace-0.3.75\src\capture.rs:259
   4: clap_builder::error::Backtrace::new
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\error\mod.rs:913
   5: clap_builder::error::Error&lt;clap_builder::error::format::RichFormatter&gt;::new&lt;clap_builder::error::format::RichFormatter&gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\error\mod.rs:140
   6: clap_builder::error::Error&lt;clap_builder::error::format::RichFormatter&gt;::argument_conflict&lt;clap_builder::error::format::RichFormatter&gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\error\mod.rs:384
   7: clap_builder::parser::validator::Validator::build_conflict_err
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\parser\validator.rs:155
   8: clap_builder::parser::validator::Validator::validate_conflicts
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\parser\validator.rs:78
   9: clap_builder::parser::validator::Validator::validate
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\parser\validator.rs:54
  10: clap_builder::parser::parser::Parser::get_matches_with
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\parser\parser.rs:71
  11: clap_builder::builder::command::Command::_do_parse
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\builder\command.rs:4322
  12: clap_builder::builder::command::Command::try_get_matches_from_mut&lt;alloc::vec::Vec&lt;ref$&lt;str$&gt;,alloc::alloc::Global&gt;,ref$&lt;str$&gt; &gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\builder\command.rs:902
  13: clap_builder::builder::command::Command::try_get_matches_from&lt;alloc::vec::Vec&lt;ref$&lt;str$&gt;,alloc::alloc::Global&gt;,ref$&lt;str$&gt; &gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\builder\command.rs:812
  14: rust_::main
             at C:\Users\feraxhp\projects\tprojects\rust_\src\main.rs:50
  15: core::ops::function::FnOnce::call_once&lt;void (*)(),tuple$&lt;&gt; &gt;
             at C:\Users\feraxhp\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\ops\function.rs:250
  16: core::hint::black_box
             at C:\Users\feraxhp\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\hint.rs:482
      std::sys::backtrace::__rust_begin_short_backtrace&lt;void (*)(),tuple$&lt;&gt; &gt;
             at C:\Users\feraxhp\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\std\src\sys\backtrace.rs:152
  17: std::rt::lang_start::closure$0&lt;tuple$&lt;&gt; &gt;
             at C:\Users\feraxhp\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\std\src\rt.rs:199
  18: std::rt::lang_start_internal::closure$0
             at /rustc/6b00bc3880198600130e1cf62b8f8a93494488cc/library\std\src\rt.rs:168
      std::panicking::try::do_call
             at /rustc/6b00bc3880198600130e1cf62b8f8a93494488cc/library\std\src\panicking.rs:589
      std::panicking::try
             at /rustc/6b00bc3880198600130e1cf62b8f8a93494488cc/library\std\src\panicking.rs:552
      std::panic::catch_unwind
             at /rustc/6b00bc3880198600130e1cf62b8f8a93494488cc/library\std\src\panic.rs:359
      std::rt::lang_start_internal
             at /rustc/6b00bc3880198600130e1cf62b8f8a93494488cc/library\std\src\rt.rs:164
  19: std::rt::lang_start&lt;tuple$&lt;&gt; &gt;
             at C:\Users\feraxhp\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\std\src\rt.rs:198
  20: main
  21: invoke_main
             at D:\a\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl:78
      __scrt_common_main_seh
             at D:\a\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl:288
  22: BaseThreadInitThunk
  23: RtlUserThreadStart



--- Testing: clone (no args) ---
[clap_builder::builder::command]Command::_do_parse
[clap_builder::builder::command]Command::_build: name=&quot;clone&quot;
[clap_builder::builder::command]Command::_propagate:clone
[clap_builder::builder::command]Command::_check_help_and_version:clone expand_help_tree=false
[clap_builder::builder::command]Command::long_help_exists
[clap_builder::builder::command]Command::_check_help_and_version: Building default --help
[clap_builder::builder::command]Command::_propagate_global_args:clone
[clap_builder::builder::debug_asserts]Command::_debug_asserts
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:repo
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:pconf
[clap_builder::builder::debug_asserts]Arg::_debug_asserts:help
[clap_builder::builder::debug_asserts]Command::_verify_positionals
[clap_builder::parser::parser]Parser::get_matches_with
[clap_builder::parser::parser]Parser::parse
[clap_builder::parser::parser]Parser::add_defaults
[clap_builder::parser::parser]Parser::add_defaults:iter:repo:
[clap_builder::parser::parser]Parser::add_default_value: doesn't have conditional defaults
[clap_builder::parser::parser]Parser::add_default_value:iter:repo: doesn't have default vals
[clap_builder::parser::parser]Parser::add_defaults:iter:pconf:
[clap_builder::parser::parser]Parser::add_default_value: doesn't have conditional defaults
[clap_builder::parser::parser]Parser::add_default_value:iter:pconf: doesn't have default vals
[clap_builder::parser::parser]Parser::add_defaults:iter:help:
[clap_builder::parser::parser]Parser::add_default_value: doesn't have conditional defaults
[clap_builder::parser::parser]Parser::add_default_value:iter:help: doesn't have default vals
[clap_builder::parser::validator]Validator::validate
[clap_builder::parser::validator]Validator::validate_conflicts
[clap_builder::parser::validator]Validator::validate_exclusive
[clap_builder::parser::validator]Validator::validate_required: required=ChildGraph([Child { id: &quot;repo&quot;, children: [] }, Child { id: &quot;pconf&quot;, children: [] }, Child { id: &quot;clone_target&quot;, children: [] }])
[clap_builder::parser::validator]Validator::gather_requires
[clap_builder::parser::validator]Validator::validate_required: is_exclusive_present=false
[clap_builder::parser::validator]Validator::validate_required:iter:aog=&quot;repo&quot;
[clap_builder::parser::validator]Validator::validate_required:iter: This is an arg
[clap_builder::parser::validator]Validator::is_missing_required_ok: repo
[clap_builder::parser::validator]Conflicts::gather_conflicts: arg=&quot;repo&quot;
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;repo&quot;
[clap_builder::parser::validator]Conflicts::gather_direct_conflicts id=&quot;repo&quot;, conflicts=[&quot;pconf&quot;]
[clap_builder::parser::validator]Conflicts::gather_conflicts: conflicts=[]
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;repo&quot;
[clap_builder::parser::validator]Conflicts::gather_conflicts: arg=&quot;clone_target&quot;
[clap_builder::parser::validator]Conflicts::gather_direct_conflicts id=&quot;clone_target&quot;, conflicts=[]
[clap_builder::parser::validator]Conflicts::gather_conflicts: conflicts=[]
[clap_builder::parser::validator]Validator::validate_required:iter: Missing &quot;repo&quot;
[clap_builder::parser::validator]Validator::validate_required:iter:aog=&quot;pconf&quot;
[clap_builder::parser::validator]Validator::validate_required:iter: This is an arg
[clap_builder::parser::validator]Validator::is_missing_required_ok: pconf
[clap_builder::parser::validator]Conflicts::gather_conflicts: arg=&quot;pconf&quot;
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;pconf&quot;
[clap_builder::parser::validator]Conflicts::gather_direct_conflicts id=&quot;pconf&quot;, conflicts=[&quot;repo&quot;, &quot;repo&quot;]
[clap_builder::parser::validator]Conflicts::gather_conflicts: conflicts=[]
[clap_builder::builder::command]Command::groups_for_arg: id=&quot;pconf&quot;
[clap_builder::parser::validator]Conflicts::gather_conflicts: arg=&quot;clone_target&quot;
[clap_builder::parser::validator]Conflicts::gather_direct_conflicts id=&quot;clone_target&quot;, conflicts=[]
[clap_builder::parser::validator]Conflicts::gather_conflicts: conflicts=[]
[clap_builder::parser::validator]Validator::validate_required:iter: Missing &quot;pconf&quot;
[clap_builder::parser::validator]Validator::validate_required:iter:aog=&quot;clone_target&quot;
[clap_builder::parser::validator]Validator::validate_required:iter: This is a group
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::parser::validator]Validator::validate_required:iter: Missing &quot;clone_target&quot;
[clap_builder::parser::validator]Validator::validate_required:iter: Missing &quot;repo&quot;
[clap_builder::parser::validator]Validator::missing_required_error; incl=[&quot;repo&quot;, &quot;pconf&quot;, &quot;clone_target&quot;, &quot;repo&quot;]
[clap_builder::parser::validator]Validator::missing_required_error: reqs=ChildGraph([Child { id: &quot;repo&quot;, children: [] }, Child { id: &quot;pconf&quot;, children: [] }, Child { id: &quot;clone_target&quot;, children: [] }])
[ clap_builder::output::usage]Usage::get_required_usage_from: incls=[&quot;repo&quot;, &quot;pconf&quot;, &quot;clone_target&quot;, &quot;repo&quot;], matcher=true, incl_last=true
[ clap_builder::output::usage]Usage::get_required_usage_from: unrolled_reqs=[&quot;repo&quot;, &quot;pconf&quot;, &quot;clone_target&quot;]
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[ clap_builder::output::usage]Usage::get_required_usage_from:iter:&quot;clone_target&quot; group is_present=false
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[  clap_builder::builder::arg]Arg::name_no_brackets:pconf
[  clap_builder::builder::arg]Arg::name_no_brackets: val_names=[
    &quot;pconf&quot;,
    &quot;url&quot;,
]
[  clap_builder::builder::arg]Arg::name_no_brackets:repo
[  clap_builder::builder::arg]Arg::name_no_brackets: just name
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[ clap_builder::output::usage]Usage::get_required_usage_from:iter:&quot;clone_target&quot; group is_present=false
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[  clap_builder::builder::arg]Arg::name_no_brackets:pconf
[  clap_builder::builder::arg]Arg::name_no_brackets: val_names=[
    &quot;pconf&quot;,
    &quot;url&quot;,
]
[  clap_builder::builder::arg]Arg::name_no_brackets:repo
[  clap_builder::builder::arg]Arg::name_no_brackets: just name
[ clap_builder::output::usage]Usage::get_required_usage_from: ret_val=[StyledStr(&quot;&lt;&lt;pconf&gt; &lt;url&gt;|repo&gt;&quot;)]
[clap_builder::parser::validator]Validator::missing_required_error: req_args=[
    &quot;&lt;&lt;pconf&gt; &lt;url&gt;|repo&gt;&quot;,
]
[ clap_builder::output::usage]Usage::create_usage_with_title
[ clap_builder::output::usage]Usage::create_usage_no_title
[ clap_builder::output::usage]Usage::create_smart_usage
[ clap_builder::output::usage]Usage::write_arg_usage; incl_reqs=true
[ clap_builder::output::usage]Usage::write_args: incls=[&quot;repo&quot;, &quot;pconf&quot;, &quot;clone_target&quot;, &quot;repo&quot;]
[ clap_builder::output::usage]Usage::get_args: unrolled_reqs=[&quot;repo&quot;, &quot;pconf&quot;, &quot;clone_target&quot;]
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[  clap_builder::builder::arg]Arg::name_no_brackets:pconf
[  clap_builder::builder::arg]Arg::name_no_brackets: val_names=[
    &quot;pconf&quot;,
    &quot;url&quot;,
]
[  clap_builder::builder::arg]Arg::name_no_brackets:repo
[  clap_builder::builder::arg]Arg::name_no_brackets: just name
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group: group=&quot;clone_target&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;pconf&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[clap_builder::builder::command]Command::unroll_args_in_group:iter: entity=&quot;repo&quot;
[clap_builder::builder::command]Command::unroll_args_in_group:iter: this is an arg
[  clap_builder::builder::arg]Arg::name_no_brackets:pconf
[  clap_builder::builder::arg]Arg::name_no_brackets: val_names=[
    &quot;pconf&quot;,
    &quot;url&quot;,
]
[  clap_builder::builder::arg]Arg::name_no_brackets:repo
[  clap_builder::builder::arg]Arg::name_no_brackets: just name
[ clap_builder::output::usage]Usage::create_usage_with_title: usage=Usage: clone &lt;&lt;pconf&gt; &lt;url&gt;|repo&gt;
[clap_builder::builder::command]Command::color: Color setting...
[clap_builder::builder::command]Auto
[clap_builder::builder::command]Command::color: Color setting...
[clap_builder::builder::command]Auto
Error: error: the following required arguments were not provided:
  &lt;&lt;pconf&gt; &lt;url&gt;|repo&gt;

Usage: clone &lt;&lt;pconf&gt; &lt;url&gt;|repo&gt;

For more information, try '--help'.

Backtrace:
   0: backtrace::backtrace::win64::trace
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\backtrace-0.3.75\src\backtrace\win64.rs:85
      backtrace::backtrace::trace_unsynchronized&lt;backtrace::capture::impl$4::create::closure_env$0&gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\backtrace-0.3.75\src\backtrace\mod.rs:66
   1: backtrace::backtrace::trace&lt;backtrace::capture::impl$4::create::closure_env$0&gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\backtrace-0.3.75\src\backtrace\mod.rs:53
   2: backtrace::capture::Backtrace::create
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\backtrace-0.3.75\src\capture.rs:294
   3: backtrace::capture::Backtrace::new
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\backtrace-0.3.75\src\capture.rs:259
   4: clap_builder::error::Backtrace::new
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\error\mod.rs:913
   5: clap_builder::error::Error&lt;clap_builder::error::format::RichFormatter&gt;::new&lt;clap_builder::error::format::RichFormatter&gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\error\mod.rs:140
   6: clap_builder::error::Error&lt;clap_builder::error::format::RichFormatter&gt;::missing_required_argument&lt;clap_builder::error::format::RichFormatter&gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\error\mod.rs:557
   7: clap_builder::parser::validator::Validator::missing_required_error
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\parser\validator.rs:428
   8: clap_builder::parser::validator::Validator::validate_required
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\parser\validator.rs:338
   9: clap_builder::parser::validator::Validator::validate
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\parser\validator.rs:56
  10: clap_builder::parser::parser::Parser::get_matches_with
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\parser\parser.rs:71
  11: clap_builder::builder::command::Command::_do_parse
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\builder\command.rs:4322
  12: clap_builder::builder::command::Command::try_get_matches_from_mut&lt;alloc::vec::Vec&lt;ref$&lt;str$&gt;,alloc::alloc::Global&gt;,ref$&lt;str$&gt; &gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\builder\command.rs:902
  13: clap_builder::builder::command::Command::try_get_matches_from&lt;alloc::vec::Vec&lt;ref$&lt;str$&gt;,alloc::alloc::Global&gt;,ref$&lt;str$&gt; &gt;
             at C:\Users\feraxhp\.cargo\registry\src\index.crates.io-1949cf8c6b5b557f\clap_builder-4.5.44\src\builder\command.rs:812
  14: rust_::main
             at C:\Users\feraxhp\projects\tprojects\rust_\src\main.rs:71
  15: core::ops::function::FnOnce::call_once&lt;void (*)(),tuple$&lt;&gt; &gt;
             at C:\Users\feraxhp\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\ops\function.rs:250
  16: core::hint::black_box
             at C:\Users\feraxhp\.rustup\toolchains\stable-x86_64-pc-windows-msvc\lib\rustlib\src\rust\library\core\src\hint.rs:482
             at D:\a\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl:78
      __scrt_common_main_seh
             at D:\a\_work\1\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl:288
  22: BaseThreadInitThunk
  23: RtlUserThreadStart
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C-bug</span> added by @feraxhp on 2025-08-14 11:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Exclusive group does not work with multiple" to "Positional arguments can't conflict with each other" by @epage on 2025-08-14 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">A-parsing</span> added by @epage on 2025-08-14 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-08-14 16:57</div>
            <div class="timeline-body"><blockquote>
<p>Well the idea is to have this behavior in the command line.</p>
<pre><code>clone somearg // matches somearg as repo
clone somearg butother // matches somearg as pconf and butother as url
</code></pre>
</blockquote>
<p>Clap does not support backtracking and trying alternative sets of arguments.  In fact, clap assigns positional indexes to each positional argument by default so <code>repo</code> has an index of <code>1</code> and <code>pconf</code> has an index of <code>2</code>.  Positional arguments are processed in index order.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/feraxhp">@feraxhp</a> on 2025-08-15 00:43</div>
            <div class="timeline-body"><p>Yes, that's why i tried add <code>.index(1)</code> for <code>repo</code> and <code>pconf</code>. But it throws an error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-08-15 13:32</div>
            <div class="timeline-body"><p>Yes, as you found, cargo only allows one positional per index and not multiple.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2025-08-15 13:50</div>
            <div class="timeline-body"><p>Related issues</p>
<ul>
<li>#2122</li>
<li>#1794</li>
<li>#4837</li>
</ul>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:49:37 UTC
    </footer>
</body>
</html>
