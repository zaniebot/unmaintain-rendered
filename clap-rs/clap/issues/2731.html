<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support `about` for `possible_values` e.g. `ArgEnum` - clap-rs/clap #2731</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Support `about` for `possible_values` e.g. `ArgEnum`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/clap-rs/clap/issues/2731">#2731</a>
        opened by <a href="https://github.com/ModProg">@ModProg</a>
        on 2021-08-21 00:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ModProg">@ModProg</a> on 2021-08-21 00:15</div>
            <div class="timeline-body"><h3>Clap Version</h3>
<p>master</p>
<h3>Describe your use case</h3>
<p>Sometimes the value itself my not give enough information to the user, therefore it would be helpful to be able to show and additional about in e.g. fish completions.
Fish does that for example for <code>__fish_complete_users</code>:
<img src="https://user-images.githubusercontent.com/11978847/130304017-ed419f48-2321-4517-a67d-9c00d0d99f6a.png" alt="grafik" /></p>
<h3>Describe the solution you'd like</h3>
<p>Support adding abouts/documentation for the possible completion values.</p>
<p>For <code>ArgEnum</code>:</p>
<pre><code class="language-rs">#[derive(Clone, Copy, ArgEnum)]
pub enum ShellType {
    /// the default Shell
    Bash,
    /// the friendly interactive Shell
    Fish
}
</code></pre>
<p>This should result in the following completions in fish for example:
<img src="https://user-images.githubusercontent.com/11978847/130304172-dee7c631-950a-4d52-843b-1cab6b6feda8.png" alt="grafik" /></p>
<h3>Additional Context</h3>
<p>For fish this is somewhat related to #2730</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">T: new feature</span> added by @ModProg on 2021-08-21 00:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Support `abbout` for `possible_values` e.g. `ArgEnum`" to "Support `about` for `possible_values` e.g. `ArgEnum`" by @ModProg on 2021-08-21 00:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epage">@epage</a> on 2021-08-21 02:05</div>
            <div class="timeline-body"><p>The challenge is the derive API is built on top of the builder API, so we need to come up with a way to specify this within the builder API.</p>
<p>Possibly a variant of <code>possible_values</code> that takes a slice of tuples.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ModProg">@ModProg</a> on 2021-08-21 08:58</div>
            <div class="timeline-body"><blockquote>
<p>Possibly a variant of possible_values that takes a slice of tuples.</p>
</blockquote>
<p>Tho this is not very builder like :D but as that is probably the only information you would want to attach to a possible_value it makes sense.</p>
<p>I could also imagine somthing more like this (somewhat verbose if there can only be <code>about</code>:</p>
<pre><code>.possible_value(PVal::new(&quot;bash&quot;).about(&quot;the default Shell&quot;))
.possible_value(PVal::new(&quot;fish&quot;).about(&quot;the friendly interactive Shell&quot;))
.possible_value(PVal::new(&quot;sh&quot;))
</code></pre>
<p>Another option would be to do it via <code>possible_value</code> and <code>possible_value_about</code>:</p>
<pre><code>.possible_value_about(&quot;bash&quot;,&quot;the default Shell&quot;)
.possible_value_about(&quot;fish&quot;,&quot;the friendly interactive Shell&quot;)
.possible_value(&quot;sh&quot;)
</code></pre>
<p>When using <code>possible_values_about</code>:</p>
<pre><code>.possible_values_about(
    &amp;[
        (&quot;bash&quot;, &quot;the default Shell&quot;), 
        (&quot;fish&quot;, &quot;the friendly interactive Shell&quot;),
        (&quot;sh&quot;, &quot;&quot;)
    ]
)
// or
.possible_values_about(
    &amp;[
        (&quot;bash&quot;, &quot;the default Shell&quot;), 
        (&quot;fish&quot;, &quot;the friendly interactive Shell&quot;)
    ]
)
.possible_value(&quot;sh&quot;)
</code></pre>
<p>Internally this would need to be stored in a Vec of Tuples.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2733.html">clap-rs/clap#2733</a> on 2021-08-21 16:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ModProg">@ModProg</a> on 2021-08-21 19:17</div>
            <div class="timeline-body"><p>I drafted an Implementation in #2733 using the <code>.possible_values_about</code>. It works for zsh and fish, because those currently implement possible_args completion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">C: args</span> added by @pksunkara on 2021-08-31 10:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2758.html">clap-rs/clap#2758</a> on 2021-09-07 21:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2762.html">clap-rs/clap#2762</a> on 2021-09-09 12:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pksunkara on 2021-09-19 10:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:33 UTC
    </footer>
</body>
</html>
